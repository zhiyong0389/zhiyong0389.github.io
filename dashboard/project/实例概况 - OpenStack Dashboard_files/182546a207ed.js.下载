var STATIC_URL="/dashboard/static/";var WEBROOT="/dashboard/";/*!
 * jQuery twitter bootstrap wizard plugin
 * Examples and documentation at: http://github.com/VinceG/twitter-bootstrap-wizard
 * version 1.0
 * Requires jQuery v1.3.2 or later
 * Supports Bootstrap 2.2.x, 2.3.x, 3.0
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * Authors: Vadim Vincent Gabriel (http://vadimg.com), Jason Gill (www.gilluminate.com)
 */;(function($){var bootstrapWizardCreate=function(element,options){var element=$(element);var obj=this;var baseItemSelector='li:has([data-toggle="tab"])';var $settings=$.extend({},$.fn.bootstrapWizard.defaults,options);var $activeTab=null;var $navigation=null;this.rebindClick=function(selector,fn)
{selector.unbind('click',fn).bind('click',fn);}
this.fixNavigationButtons=function(){if(!$activeTab.length){$navigation.find('a:first').tab('show');$activeTab=$navigation.find(baseItemSelector+':first');}
$($settings.previousSelector,element).toggleClass('disabled',(obj.firstIndex()>=obj.currentIndex()));$($settings.nextSelector,element).toggleClass('disabled',(obj.currentIndex()>=obj.navigationLength()));obj.rebindClick($($settings.nextSelector,element),obj.next);obj.rebindClick($($settings.previousSelector,element),obj.previous);obj.rebindClick($($settings.lastSelector,element),obj.last);obj.rebindClick($($settings.firstSelector,element),obj.first);if($settings.onTabShow&&typeof $settings.onTabShow==='function'&&$settings.onTabShow($activeTab,$navigation,obj.currentIndex())===false){return false;}};this.next=function(e){if(element.hasClass('last')){return false;}
if($settings.onNext&&typeof $settings.onNext==='function'&&$settings.onNext($activeTab,$navigation,obj.nextIndex())===false){return false;}
$index=obj.nextIndex();if($index>obj.navigationLength()){}else{$navigation.find(baseItemSelector+':eq('+$index+') a').tab('show');}};this.previous=function(e){if(element.hasClass('first')){return false;}
if($settings.onPrevious&&typeof $settings.onPrevious==='function'&&$settings.onPrevious($activeTab,$navigation,obj.previousIndex())===false){return false;}
$index=obj.previousIndex();if($index<0){}else{$navigation.find(baseItemSelector+':eq('+$index+') a').tab('show');}};this.first=function(e){if($settings.onFirst&&typeof $settings.onFirst==='function'&&$settings.onFirst($activeTab,$navigation,obj.firstIndex())===false){return false;}
if(element.hasClass('disabled')){return false;}
$navigation.find(baseItemSelector+':eq(0) a').tab('show');};this.last=function(e){if($settings.onLast&&typeof $settings.onLast==='function'&&$settings.onLast($activeTab,$navigation,obj.lastIndex())===false){return false;}
if(element.hasClass('disabled')){return false;}
$navigation.find(baseItemSelector+':eq('+obj.navigationLength()+') a').tab('show');};this.currentIndex=function(){return $navigation.find(baseItemSelector).index($activeTab);};this.firstIndex=function(){return 0;};this.lastIndex=function(){return obj.navigationLength();};this.getIndex=function(e){return $navigation.find(baseItemSelector).index(e);};this.nextIndex=function(){return $navigation.find(baseItemSelector).index($activeTab)+1;};this.previousIndex=function(){return $navigation.find(baseItemSelector).index($activeTab)-1;};this.navigationLength=function(){return $navigation.find(baseItemSelector).length-1;};this.activeTab=function(){return $activeTab;};this.nextTab=function(){return $navigation.find(baseItemSelector+':eq('+(obj.currentIndex()+1)+')').length?$navigation.find(baseItemSelector+':eq('+(obj.currentIndex()+1)+')'):null;};this.previousTab=function(){if(obj.currentIndex()<=0){return null;}
return $navigation.find(baseItemSelector+':eq('+parseInt(obj.currentIndex()-1)+')');};this.show=function(index){return element.find(baseItemSelector+':eq('+index+') a').tab('show');};this.disable=function(index){$navigation.find(baseItemSelector+':eq('+index+')').addClass('disabled');};this.enable=function(index){$navigation.find(baseItemSelector+':eq('+index+')').removeClass('disabled');};this.hide=function(index){$navigation.find(baseItemSelector+':eq('+index+')').hide();};this.display=function(index){$navigation.find(baseItemSelector+':eq('+index+')').show();};this.remove=function(args){var $index=args[0];var $removeTabPane=typeof args[1]!='undefined'?args[1]:false;var $item=$navigation.find(baseItemSelector+':eq('+$index+')');if($removeTabPane){var $href=$item.find('a').attr('href');$($href).remove();}
$item.remove();};var innerTabClick=function(e){var clickedIndex=$navigation.find(baseItemSelector).index($(e.currentTarget).parent(baseItemSelector));if($settings.onTabClick&&typeof $settings.onTabClick==='function'&&$settings.onTabClick($activeTab,$navigation,obj.currentIndex(),clickedIndex)===false){return false;}};var innerTabShown=function(e){$element=$(e.target).parent();var nextTab=$navigation.find(baseItemSelector).index($element);if($element.hasClass('disabled')){return false;}
if($settings.onTabChange&&typeof $settings.onTabChange==='function'&&$settings.onTabChange($activeTab,$navigation,obj.currentIndex(),nextTab)===false){return false;}
$activeTab=$element;obj.fixNavigationButtons();};this.resetWizard=function(){$('a[data-toggle="tab"]',$navigation).off('click',innerTabClick);$('a[data-toggle="tab"]',$navigation).off('shown shown.bs.tab',innerTabShown);$navigation=element.find('ul:first',element);$activeTab=$navigation.find(baseItemSelector+'.active',element);$('a[data-toggle="tab"]',$navigation).on('click',innerTabClick);$('a[data-toggle="tab"]',$navigation).on('shown shown.bs.tab',innerTabShown);obj.fixNavigationButtons();};$navigation=element.find('ul:first',element);$activeTab=$navigation.find(baseItemSelector+'.active',element);if(!$navigation.hasClass($settings.tabClass)){$navigation.addClass($settings.tabClass);}
if($settings.onInit&&typeof $settings.onInit==='function'){$settings.onInit($activeTab,$navigation,0);}
if($settings.onShow&&typeof $settings.onShow==='function'){$settings.onShow($activeTab,$navigation,obj.nextIndex());}
$('a[data-toggle="tab"]',$navigation).on('click',innerTabClick);$('a[data-toggle="tab"]',$navigation).on('shown shown.bs.tab',innerTabShown);};$.fn.bootstrapWizard=function(options){if(typeof options=='string'){var args=Array.prototype.slice.call(arguments,1)
if(args.length===1){args.toString();}
return this.data('bootstrapWizard')[options](args);}
return this.each(function(index){var element=$(this);if(element.data('bootstrapWizard'))return;var wizard=new bootstrapWizardCreate(element,options);element.data('bootstrapWizard',wizard);wizard.fixNavigationButtons();});};$.fn.bootstrapWizard.defaults={tabClass:'nav nav-pills',nextSelector:'.wizard li.next',previousSelector:'.wizard li.previous',firstSelector:'.wizard li.first',lastSelector:'.wizard li.last',onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onTabChange:null,onTabClick:null,onTabShow:null};})(jQuery);horizon.string={escapeRegex:function(text){return text.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");},escapeHtml:function(text){return text.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#x27;').replace(/\//g,'&#x2F;');}};horizon.lists={generate_element:function(name,value,type){var $li=$('<li>');$li.attr('name',value).html(name+'<em class="'+type+'_id">('+value+')</em>'+'<a href="#" class="btn btn-primary"></a>');return $li;},generate_html:function(type){var self=this;self.feature_type=type;var update_form=function(){var lists=$("#"+type+"ListId li").attr('data-index',100);var active_features=$("#selected_"+type+" > li").map(function(){return $(this).attr("name");});$("#"+type+"ListId input:checkbox").removeAttr('checked');active_features.each(function(index,value){$("#"+type+"ListId input:checkbox[value="+value+"]").prop('checked',true).parents("li").attr('data-index',index);});$("#"+type+"ListId ul").html(lists.sort(function(a,b){if($(a).data("index")<$(b).data("index")){return-1;}
if($(a).data("index")>$(b).data("index")){return 1;}
return 0;}));};var append_new_elements=function(type,state){$("#"+state+"_"+type).empty();$.each(self[type+"s_"+state],function(index,value){$("#"+state+"_"+self.feature_type).append(self.generate_element(value.name,value.value,self.feature_type));});};$("#"+type+"ListSortContainer").show();$("#"+type+"ListIdContainer").hide();self.init_list(type);append_new_elements(type,"available");append_new_elements(type,"selected");$("."+type+"list > li > a.btn").click(function(e){var $this=$(this);e.preventDefault();e.stopPropagation();if($this.parents("ul#available_"+type).length>0){$this.parent().appendTo($("#selected_"+type));}else if($this.parents("ul#selected_"+type).length>0){$this.parent().appendTo($("#available_"+type));}
update_form();});if($("#"+type+"ListId > div.form-group.error").length>0){var errortext=$("#"+type+"ListId > div.form-group.error").find("span.help-block").text();$("#selected_"+type+"_label").before($('<div class="dynamic-error">').html(errortext));}
$("."+type+"list").sortable({connectWith:"ul."+type+"list",placeholder:"ui-state-highlight",distance:5,start:function(){$("#selected_"+type).addClass("dragging");},stop:function(){$("#selected_"+type).removeClass("dragging");update_form();}}).disableSelection();},get_console_log:function(via_user_submit,user_decided_length){var form_element=$("#tail_length");var error_txt=gettext('There was a problem communicating with the server, please try again.');if(!via_user_submit){via_user_submit=false;}
$.ajax({url:$(form_element).attr('action'),data:(user_decided_length)?$(form_element).serialize():"length=35",method:'get',success:function(response_body){$('pre.logs').text(response_body);},error:function(){if(via_user_submit){horizon.clearErrorMessages();horizon.toast.add('error',error_txt);}}});},get_element:function(id,type){return $('label[for^="id_'+type+'_'+id+'"]');},init_list:function(type){var self=this;self[type+"s_selected"]=[];self[type+"s_available"]=[];$(horizon.lists.get_element("",type)).each(function(){var $parent=$(this).parent();var $input=$parent.children("input");var name=horizon.string.escapeHtml($parent.text().replace(/^\s+/,""));var properties={"name":name,"id":$input.attr("id"),"value":$input.attr("value")};var feature_state=($input.is(":checked"))?"selected":"available";self[type+"s_"+feature_state].push(properties);});}};horizon.ajax={_queue:[],_active:[],get_messages:function(request){return request.getResponseHeader("X-Horizon-Messages");},queue:function(opts){var def=$.Deferred();horizon.ajax._queue.push({opts:opts,deferred:def});horizon.ajax.next();return def.promise();},next:function(){var queue=horizon.ajax._queue;var limit=horizon.conf.ajax.queue_limit;function process_queue(request){return function(){var active=horizon.ajax._active;var index=$.inArray(request,active);if(index>-1){active.splice(index,1);}
horizon.ajax.next();};}
if(queue.length&&(!limit||horizon.ajax._active.length<limit)){var item=queue.shift();var request=$.ajax(item.opts);horizon.ajax._active.push(request);request.always(process_queue(request));request.then(item.deferred.resolve,item.deferred.reject);}}};horizon.datepickers={add:function(selector){$(selector).each(function(){var el=$(this);el.datepicker({format:'yyyy-mm-dd',setDate:new Date(),showButtonPanel:true,language:horizon.datepickerLocale});});}};horizon.forms={handle_snapshot_source:function(){$("div.table_wrapper, #modal_wrapper").on("change","select#id_snapshot_source",function(){var $option=$(this).find("option:selected");var $form=$(this).closest('form');var $volName=$form.find('input#id_name');if($volName.val()===""){$volName.val($option.data("name"));}
var $volSize=$form.find('input#id_size');var volSize=parseInt($volSize.val(),10)||-1;var dataSize=parseInt($option.data("size"),10)||-1;if(volSize<dataSize){$volSize.val(dataSize);}});},handle_volume_source:function(){$("div.table_wrapper, #modal_wrapper").on("change","select#id_volume_source",function(){var $option=$(this).find("option:selected");var $form=$(this).closest('form');var $volName=$form.find('input#id_name');if($volName.val()===""){$volName.val($option.data("name"));}
var $volSize=$form.find('input#id_size');var volSize=parseInt($volSize.val(),10)||-1;var dataSize=parseInt($option.data("size"),10)||-1;if(volSize<dataSize){$volSize.val(dataSize);}});},handle_image_source:function(){$("div.table_wrapper, #modal_wrapper").on("change","select#id_image_source",function(){var $option=$(this).find("option:selected");var $form=$(this).closest('form');var $volName=$form.find('input#id_name');if($volName.val()===""){$volName.val($option.data("name"));}
var $volSize=$form.find('input#id_size');var dataSize=parseInt($option.data("size"),10)||-1;var minDiskSize=parseInt($option.data("min_disk"),10)||1;$volSize.val(Math.max(minDiskSize,dataSize));});},handle_subnet_address_source:function(){$("div.table_wrapper, #modal_wrapper").on("change","select#id_address_source",function(){var $option=$(this).find("option:selected");var $form=$(this).closest("form");var $ipVersion=$form.find("select#id_ip_version");if($option.val()=="subnetpool"){$ipVersion.attr("disabled","disabled");}else{$ipVersion.removeAttr("disabled");}});},handle_subnet_subnetpool:function(){$("div.table_wrapper, #modal_wrapper").on("change","select#id_subnetpool",function(){var $option=$(this).find("option:selected");var $form=$(this).closest("form");var $ipVersion=$form.find("select#id_ip_version");var $prefixLength=$form.find("select#id_prefixlen");var subnetpoolIpVersion=parseInt($option.data("ip_version"),10)||4;var minPrefixLen=parseInt($option.data("min_prefixlen"),10)||1;var maxPrefixLen=parseInt($option.data("max_prefixlen"),10);var defaultPrefixLen=parseInt($option.data("default_prefixlen"),10)||-1;var optionsAsString="";$ipVersion.val(subnetpoolIpVersion);if(!maxPrefixLen){if(subnetpoolIpVersion==4){maxPrefixLen=32;}else{maxPrefixLen=128;}}
for(i=minPrefixLen;i<=maxPrefixLen;i++){optionsAsString+="<option value='"+i+"'>"+i;if(i==defaultPrefixLen){optionsAsString+=" ("+gettext("pool default")+")";}
optionsAsString+="</option>";}
$prefixLength.empty().append(optionsAsString);if(defaultPrefixLen>=0){$prefixLength.val(defaultPrefixLen);}else{$prefixLength.val("");}});},handle_object_upload_source:function(){$("div.table_wrapper, #modal_wrapper").on("change","input#id_object_file",function(){if(typeof($(this).attr("filename"))==='undefined'){$(this).attr("filename","");}
var $form=$(this).closest("form");var $obj_name=$form.find("input#id_name");var $fullPath=$(this).val();var $startIndex=($fullPath.indexOf('\\')>=0?$fullPath.lastIndexOf('\\'):$fullPath.lastIndexOf('/'));var $filename=$fullPath.substring($startIndex);if($filename.indexOf('\\')===0||$filename.indexOf('/')===0){$filename=$filename.substring(1);}
if(typeof($obj_name.val())==='undefined'||$obj_name.val().length<1||$(this).attr("filename").localeCompare($obj_name.val())===0){$obj_name.val($filename);$(this).attr("filename",$filename);$obj_name.trigger('input');}});},datepicker:function(){var startDate=$('#id_start').datepicker({language:horizon.datepickerLocale}).on('changeDate',function(ev){if(ev.dates[0].valueOf()>endDate.dates[0].valueOf()){var newDate=new Date(ev.dates[0]);newDate.setDate(newDate.getDate()+1);endDate.setDate(newDate);$('input#id_end')[0].focus();}
startDate.hide();endDate.setStartDate(ev.dates[0]);endDate.update();}).data('datepicker');var endDate=$('#id_end').datepicker({language:horizon.datepickerLocale,startDate:startDate?startDate.dates[0]:null}).on('changeDate',function(){endDate.hide();}).data('datepicker');$("#id_start").mousedown(function(){endDate.hide();});$("#id_end").mousedown(function(){startDate.hide();});$('.datepicker-addon').on('click',function(){$(this).siblings('input').trigger('focus');});}};horizon.forms.handle_submit=function(el){var $form=$(el).find("form");$form.submit(function(){var $this=$(this);var button=$this.find('[type="submit"]');if(button.hasClass('btn-primary')&&!button.hasClass('always-enabled')){$this.submit(function(){return false;});button.removeClass('primary').addClass('disabled');button.attr('disabled','disabled');}
$this.find('select[disabled="disabled"]').each(function(i,field){$(field).removeAttr("disabled");});return true;});};horizon.forms.add_password_fields_reveal_buttons=function(el){var _change_input_type=function($input,type){var $new_input=$input.clone();$new_input.attr('type',type);$input.replaceWith($new_input);return $new_input;};$(el).find('input[type="password"]').each(function(i,input){var $input=$(input);$input.closest('div').addClass("has-feedback");$('<span>').addClass("form-control-feedback fa fa-eye password-icon").insertAfter($input).click(function(){var $icon=$(this);if($input.attr('type')==='password'){$icon.removeClass('fa-eye');$icon.addClass('fa-eye-slash');$input=_change_input_type($input,'text');}else{$icon.removeClass('fa-eye-slash');$icon.addClass('fa-eye');$input=_change_input_type($input,'password');}});});};horizon.forms.init_themable_select=function($elem){"use strict";$elem=$elem||$('body');$elem=$elem instanceof jQuery?$elem:$($elem);$elem=$elem.hasClass('themable-select')?$elem:$elem.find('.themable-select');var initialized_class='select-initialized';if($elem.hasClass(initialized_class)){return;}
$elem.addClass(initialized_class);$elem.on('click','li a',function(){var $this=$(this);var $container=$this.closest('.themable-select');var value=$this.data('selectValue');var $select=$container.data('mySelect');if(!$select){$select=$container.find('select');$container.data('mySelect',$select);}
if($select.val()!==value){$select.val(value).change();}});$elem.find('li a[title]').tooltip();MutationObserver=window.MutationObserver||window.WebKitMutationObserver;var $targets=$elem.find('select');for(var ii=0;ii<$targets.length;ii++){var observer=new MutationObserver(function(mutations){var $select=$(mutations[0].target).closest('select');var $options=$select.find('option');var list=[];for(var jj=0;jj<$options.length;jj++){var $thisOption=$($options[jj]);var $list_item=$(document.createElement('li')).attr('data-original-index',jj);var $anchor=$(document.createElement('a')).attr('data-select-value',$thisOption.attr('value'));$anchor.text($thisOption.text()).appendTo($list_item);list[jj]=$list_item;}
$select.siblings('.dropdown-menu').html(list).change();$select.trigger('change');});var config={childList:true,subtree:true,attributes:false,characterData:true};observer.observe($targets[ii],config);}
$elem.children('select').on('change',function(){var $this=$(this);var thisVal=$this.val();var thisLabel=$this.find('option[value="'+thisVal+'"]').text();var $title=$this.parents('.themable-select').find('.dropdown-title');if(thisLabel===null||thisLabel.length===0){thisLabel=$this.find('option').first().text();}
if(thisLabel!==$title.text()){$title.text(thisLabel);}});};horizon.forms.init_new_selects=function(){$(document).on('DOMNodeInserted',function(e){var $target=$(e.target);var newInputs=$target.find('.themable-select').not('.select-initialized');for(var ii=0;ii<newInputs.length;ii++){horizon.forms.init_themable_select($(newInputs[ii]));}});};horizon.forms.getSpinnerValue=function(val,defaultVal){val=parseInt(val,10);return isNaN(val)?defaultVal:val;};horizon.forms.checkSpinnerValue=function($inputs){$inputs.each(function(index,input){var $input=$(input);var val=$input.attr('value');var max=horizon.forms.getSpinnerValue($input.attr('max'),Number.MAX_SAFE_INTEGER);var min=horizon.forms.getSpinnerValue($input.attr('min'),0);var $parent=$input.parents('.themable-spinner');var $up=$parent.find('.spinner-up');var $down=$parent.find('.spinner-down');$parent.find('.themable-spinner-btn').removeAttr('disabled');if(val<=min){$down.attr('disabled',true);}else if(val>=max){$up.attr('disabled',true);}});};horizon.forms.init_themable_spinner=function($elem){"use strict";$elem=$elem||$('body');$elem=$elem instanceof jQuery?$elem:$($elem);$elem=$elem.hasClass('themable-spinner')?$elem:$elem.find('.themable-spinner');var initialized_class='spinner-initialized';$elem=$elem.not('.'+initialized_class);var $input=$elem.find('input[type="number"]');horizon.forms.checkSpinnerValue($input);$elem.addClass(initialized_class).on('click','.btn',function(){var $this=$(this);var $input=$this.parents('.themable-spinner').find('input');var max=horizon.forms.getSpinnerValue($input.attr('max'),Number.MAX_SAFE_INTEGER);var min=horizon.forms.getSpinnerValue($input.attr('min'),0);var step=horizon.forms.getSpinnerValue($input.attr('step'),1);var originalVal=$input.val();var val=parseInt(originalVal===''?min||0:$input.val(),10);var new_val=val-step;if($this.hasClass('spinner-up')){new_val=originalVal?val+step:min;if(max==undefined||new_val<=max){$input.val(new_val).trigger('input').trigger('change');}}else{new_val=originalVal?val-step:min;if(min==undefined||new_val>=min){$input.val(new_val).trigger('input').trigger('change');}}});$input.on('change',function(e){horizon.forms.checkSpinnerValue($(e.delegateTarget));});};horizon.forms.init_new_spinners=function(){$(document).on('DOMNodeInserted',function(e){var $target=$(e.target);var newInputs=$target.find('.themable-spinner').not('.spinner-initialized');for(var ii=0;ii<newInputs.length;ii++){horizon.forms.init_themable_spinner($(newInputs[ii]));}});};horizon.addInitFunction(horizon.forms.init=function(){var $body=$('body');horizon.forms.handle_submit($body);horizon.modals.addModalInitFunction(horizon.forms.handle_submit);horizon.forms.init_themable_select();horizon.forms.init_new_selects();horizon.modals.addModalInitFunction(horizon.forms.init_themable_select);horizon.forms.init_themable_spinner();horizon.forms.init_new_spinners();horizon.forms.handle_snapshot_source();horizon.forms.handle_volume_source();horizon.forms.handle_image_source();horizon.forms.handle_object_upload_source();horizon.forms.datepicker();horizon.forms.handle_subnet_address_source();horizon.forms.handle_subnet_subnetpool();if(!horizon.conf.disable_password_reveal){horizon.forms.add_password_fields_reveal_buttons($body);horizon.modals.addModalInitFunction(horizon.forms.add_password_fields_reveal_buttons);}
$body.on("click","form button:not([ng-click]).btn-danger",function(evt){horizon.datatables.confirm(this);evt.preventDefault();});var $document=$(document);$document.on("change",'select.switchable',function(evt){var $fieldset=$(evt.target).closest('fieldset'),$switchables=$fieldset.find('select.switchable');$switchables.each(function(index,switchable){var $switchable=$(switchable);var slug=$switchable.data('slug');var isThemable=$switchable.parent('.themable-select').length>0;var visible=isThemable?$switchable.siblings('.dropdown-toggle').is(':visible'):$switchable.is(':visible');var val=$switchable.val();function handle_switched_field(index,input){var $input=$(input),data=$input.data(slug+"-"+val);if(typeof data==="undefined"||!visible){$input.closest('.form-group').hide();if($input.attr('required')==='required'){$input.data('savedRequired','required');$input.removeAttr('required');}}else{if($input.attr('type')!=="checkbox"){$('label[for='+$input.attr('id')+']').html(data);}
$input.closest('.form-group').show();if($input.data('savedRequired')==='required'){$input.attr("required","required");}}
if($input.data("required-when-shown")===true&&$input.closest('.form-group').find('.hz-icon-required').length<1){var asterist_text='<span class="hz-icon-required fa fa-asterisk"></span>';$input.closest('.form-group').children('.control-label').after(asterist_text);}}
$fieldset.find('.switched[data-switch-on*="'+slug+'"]').each(handle_switched_field);$fieldset.siblings().find('.switched[data-switch-on*="'+slug+'"]').each(handle_switched_field);});});$('select.switchable').trigger('change');horizon.modals.addModalInitFunction(function(modal){$(modal).find('select.switchable').trigger('change');});$document.on("change",'input.switchable',function(evt){var $fieldset=$(evt.target).closest('fieldset'),$switchables=$fieldset.find('input.switchable');$switchables.each(function(index,switchable){var $switchable=$(switchable),visible=$switchable.parent().hasClass('themable-checkbox')?$switchable.siblings('label').is(':visible'):$switchable.is(':visible'),slug=$switchable.data('slug'),checked=$switchable.prop('checked'),hide_on=$switchable.data('hideOnChecked');if(!visible)return;if($switchable.data('hide-tab')){var hide_tab=String($switchable.data('hide-tab')).split(',');for(var i=0,len=hide_tab.length;i<len;i++){var tab=$('*[data-target="#'+hide_tab[i]+'"]').parent();if(checked==hide_on){tab.hide();}else if(!tab.is(':visible')){tab.show();}}
var $btnfinal=$('.button-final');if(checked==hide_on){$('.button-next').hide();$btnfinal.show();$btnfinal.data('show-on-tab',$fieldset.prop('id'));}else{$btnfinal.hide();$('.button-next').show();$btnfinal.removeData('show-on-tab');}}
function handle_switched_field(index,input){var $input=$(input);if(checked!=hide_on){$input.closest('.form-group').show();if($input.data('is-required')){$input.closest('.form-group').addClass("required");}}else{$input.closest('.form-group').hide();if($input.data('is-required')){$input.closest('.form-group').removeClass("required");}}}
$fieldset.find('.switched[data-switch-on*="'+slug+'"]').each(handle_switched_field);$fieldset.siblings().find('.switched[data-switch-on*="'+slug+'"]').each(handle_switched_field);});});$('input.switchable').trigger('change');horizon.modals.addModalInitFunction(function(modal){$(modal).find('input.switchable').trigger('change');});$document.on('shown.bs.tab',function(){var $fieldset=$('fieldset.active');var $btnfinal=$('.button-final');if($btnfinal.data('show-on-tab')){if($fieldset.prop('id')==$btnfinal.data('show-on-tab')){$('.button-next').hide();$btnfinal.show();}else{$btnfinal.hide();$('.button-next').show();}}});$document.tooltip({selector:"div.form-group .help-icon",placement:function(tip,input){return $(input).closest("form[class*='split']").length?"bottom":'right';},title:function(){return $(this).closest('div.form-group').children('.help-block').text();}});$document.on('mousedown keydown','.form-group select',function(){$(this).tooltip('hide');});$document.on('keydown.esc_btn',function(evt){if(evt.keyCode===27){$('.tooltip').hide();}});$('p.help-block').hide();});horizon.formset_table=(function(){'use strict';var module={};module.reenumerate_rows=function(table,prefix){var count=0;var input_name_re=new RegExp('^'+prefix+'-(\\d+|__prefix__)-');var input_id_re=new RegExp('^id_'+prefix+'-(\\d+|__prefix__)-');table.find('tbody tr').each(function(){$(this).find('input').each(function(){var input=$(this);input.attr('name',input.attr('name').replace(input_name_re,prefix+'-'+count+'-'));input.attr('id',input.attr('id').replace(input_id_re,'id_'+prefix+'-'+count+'-'));});count+=1;});$('#id_'+prefix+'-TOTAL_FORMS').val(count);};module.delete_row=function(){$(this).closest('tr').hide();$(this).prev('input[name$="-DELETE"]').attr('checked',true);};module.replace_delete=function(where){where.find('input[name$="-DELETE"]').hide().after($('<a href="#" class="close">×</a>').click(module.delete_row));};module.add_row=function(table,prefix,empty_row_html){var new_row=$(empty_row_html);module.replace_delete(new_row);table.find('tbody').append(new_row);module.reenumerate_rows(table,prefix);};module.init=function(prefix,empty_row_html,add_label){var table=$('table#'+prefix);module.replace_delete(table);if(add_label){var button=$('<a href="#" class="btn btn-primary btn-sm pull-right">'+
add_label+'</a>');table.find('tfoot td').append(button);button.click(function(){module.add_row(table,prefix,empty_row_html);});}
var initial_forms=+$('#id_'+prefix+'-INITIAL_FORMS').val();var total_forms=+$('#id_'+prefix+'-TOTAL_FORMS').val();if(table.find('tbody tr').length>1&&table.find('tbody td.error').length===0&&total_forms>initial_forms){table.find('tbody tr').each(function(index){if(index>=initial_forms){$(this).remove();}});module.reenumerate_rows(table,prefix);$('#id_'+prefix+'-INITIAL_FORMS').val($('#id_'+prefix+'-TOTAL_FORMS').val());}
table.find('td.error[title]').tooltip();};return module;}());horizon.loader={templates:{inline:'#loader-inline',modal:'#loader-modal'}};horizon.loader.inline=function(text){return horizon.templates.compile(horizon.loader.templates.inline,{text:text});};horizon.loader.modal=function(text){return horizon.templates.compile(horizon.loader.templates.modal,{text:text});};horizon.alert=function(type,message,extra_tags){var safe=false;if(typeof(extra_tags)!=="undefined"&&$.inArray('safe',extra_tags.split(' '))!==-1){safe=true;}
var type_display={'danger':gettext("Danger: "),'warning':gettext("Warning: "),'info':gettext("Notice: "),'success':gettext("Success: "),'error':gettext("Error: ")}[type];if(type==='error'){type='danger';}
var template=horizon.templates.compiled_templates["#alert_message_template"],params={"type":type||'default',"type_display":type_display,"message":message,"safe":safe};var this_alert=$(template.render(params)).hide().prependTo("#main_content .messages").fadeIn(100);horizon.autoDismissAlert(this_alert);return this_alert;};horizon.clearErrorMessages=function(){$('#main_content .messages .alert.alert-danger').remove();};horizon.clearSuccessMessages=function(){$('#main_content .messages .alert.alert-success').remove();};horizon.clearAllMessages=function(){horizon.clearErrorMessages();horizon.clearSuccessMessages();};horizon.autoDismissAlert=function($alert){if(typeof(horizon.conf.auto_fade_alerts)==="undefined")
return;var types=$alert.attr('class').split(' '),intersection=$.grep(types,function(value){return $.inArray(value,horizon.conf.auto_fade_alerts.types)!==-1;});if(intersection.length>0){setTimeout(function(){$alert.fadeOut(horizon.conf.auto_fade_alerts.fade_duration);},horizon.conf.auto_fade_alerts.delay);}};horizon.addInitFunction(function(){$(document).ajaxComplete(function(event,request){var message_array=$.parseJSON(horizon.ajax.get_messages(request));$(message_array).each(function(index,item){horizon.alert(item[0],item[1],item[2]);});});$('a.ajax-modal').click(function(){horizon.clearAllMessages();});$(".alert").alert();$('#main_content .messages .alert').each(function(){horizon.autoDismissAlert($(this));});});horizon.modals={_request:null,spinner:null,progress_bar:null,_init_functions:[]};horizon.modals.addModalInitFunction=function(f){horizon.modals._init_functions.push(f);};horizon.modals.initModal=function(modal){$(horizon.modals._init_functions).each(function(index,f){f(modal);});};horizon.modals.create=function(title,body,confirm,cancel,confirmCssClass){if(!cancel){cancel=gettext("Cancel");}
var template=horizon.templates.compiled_templates["#modal_template"],params={title:title,body:body,confirm:confirm,cancel:cancel,confirmCssClass:confirmCssClass||"btn-primary",modal_backdrop:horizon.modals.MODAL_BACKDROP};return $(template.render(params)).appendTo("#modal_wrapper");};horizon.modals.success=function(data){var modal;var modal_wrapper=$('#modal_wrapper');modal_wrapper.parent().append(modal_wrapper);modal_wrapper.append(data);modal=$('#modal_wrapper > .modal:last');modal.modal();$(modal).trigger("new_modal",modal);return modal;};horizon.modals.modal_spinner=function(text,$container){if(!$container){$container=$('#modal_wrapper');}
horizon.modals.spinner=horizon.loader.modal(text);horizon.modals.spinner.appendTo($container);horizon.modals.spinner.modal({backdrop:'static'});};horizon.modals.progress_bar=function(text){var template=horizon.templates.compiled_templates["#progress-modal"];horizon.modals.bar=$(template.render({text:text})).appendTo("#modal_wrapper");horizon.modals.bar.modal({backdrop:'static'});var $progress_bar=horizon.modals.bar.find('.progress-bar');horizon.modals.progress_bar.update=function(fraction){var percent=Math.round(100*fraction)+'%';$progress_bar.css('width',Math.round(100*fraction)+'%').parents('.progress-text').find('.progress-bar-text').text(percent);};};horizon.modals.init_wizard=function(){var _max_visited_step=0;var _validate_steps=function(start,end){var $form=$('.workflow > form'),response={};if(typeof end==='undefined'){end=start;}
if($form.find('div.row div.alert-danger').siblings().length==0){$form.find('div.row div.alert-danger').parent().remove();}else{$form.find('div.row div.alert-danger').remove();}
$form.find('.form-group.has-error').each(function(){var $group=$(this);$group.removeClass('has-error');$group.find('span.help-block').remove();});var disabled=$form.find('select[disabled="disabled"]').removeAttr("disabled");$.ajax({type:'POST',url:$form.attr('action'),headers:{'X-Horizon-Validate-Step-Start':start,'X-Horizon-Validate-Step-End':end},data:$form.serialize(),dataType:'json',async:false,success:function(data){response=data;}});disabled.attr("disabled","disabled");if(response.has_errors){var first_field=true;$.each(response.errors,function(step_slug,step_errors){var step_id=response.workflow_slug+'__'+step_slug,$fieldset=$form.find('#'+step_id);$.each(step_errors,function(field,errors){var $field;if(field==='__all__'){$.each(errors,function(index,error){$fieldset.find('div.row').prepend('<div class="col-sm-12"><div class="alert alert-danger">'+
error+'</div></div>');});$fieldset.find('input,  select, textarea').first().focus();return;}
$field=$fieldset.find('[name="'+field+'"]');$field.closest('.form-group').addClass('has-error');$.each(errors,function(index,error){$field.closest(".form-control").after('<span class="help-block">'+
error+'</span>');});if(first_field){$field.focus();first_field=false;}});});return false;}};$('.workflow.wizard').bootstrapWizard({tabClass:'wizard-tabs',nextSelector:'.button-next',previousSelector:'.button-previous',onTabShow:function(tab,navigation,index){var $navs=navigation.find('li');var total=$navs.length;var current=index;var $footer=$('.modal-footer');_max_visited_step=Math.max(_max_visited_step,current);if(current+1>=total){$footer.find('.button-next').hide();$footer.find('.button-final').show();}else{$footer.find('.button-next').show();$footer.find('.button-final').hide();}
$navs.each(function(i){var $this=$(this);if(i<=_max_visited_step){$this.addClass('done');}else{$this.removeClass('done');}});},onNext:function($tab,$nav,index){return _validate_steps(index-1);},onTabClick:function($tab,$nav,current,index){return(index<=current||_validate_steps(current,index-1)!==false);}});};horizon.modals.getUploadUrl=function(jqXHR){return jqXHR.getResponseHeader("X-File-Upload-URL");};horizon.modals.fileUpload=function(url,file,jqXHR){var token=jqXHR.getResponseHeader('X-Auth-Token');horizon.modals.progress_bar(gettext("Uploading image"));return $.ajax({type:'PUT',url:url,xhrFields:{withCredentials:true},headers:{'X-Auth-Token':token},data:file,processData:false,contentType:'application/octet-stream',xhr:function(){var xhr=new window.XMLHttpRequest();xhr.upload.addEventListener('progress',function(evt){if(evt.lengthComputable){horizon.modals.progress_bar.update(evt.loaded/evt.total);}},false);return xhr;}});};horizon.modals.prepareFileUpload=function($form){var $elem=$form.find('input[data-external-upload]');if(!$elem.length){return undefined;}
var file=$elem.get(0).files[0];var $hiddenPseudoFile=$form.find('input[name="'+$elem.attr('name')+'__hidden"]');if(file){$hiddenPseudoFile.val(file.name);$elem.remove();return file;}else{$hiddenPseudoFile.val('');return undefined;}};horizon.addInitFunction(horizon.modals.init=function(){var $document=$(document);$('#modal_wrapper').on('new_modal',function(evt,modal){horizon.modals.initModal(modal);});$document.on('click','.modal .cancel',function(evt){$(this).closest('.modal').modal('hide');evt.preventDefault();});$document.on('submit','.modal form',function(evt){var $form=$(this),form=this,$button=$form.find(".modal-footer .btn-primary"),update_field_id=$form.attr("data-add-to-field"),headers={},modalFileUpload=$form.attr("enctype")==="multipart/form-data",formData,ajaxOpts,featureFileList,featureFormData,file;if(modalFileUpload){featureFileList=$("<input type='file'/>").get(0).files!==undefined;featureFormData=window.FormData!==undefined;if(!featureFileList||!featureFormData){return;}else{file=horizon.modals.prepareFileUpload($form);formData=new window.FormData(form);}}else{formData=$form.serialize();}
evt.preventDefault();$button.prop("disabled",true);if(update_field_id){headers["X-Horizon-Add-To-Field"]=update_field_id;}
function processServerSuccess(data,textStatus,jqXHR){var redirect_header=jqXHR.getResponseHeader("X-Horizon-Location"),add_to_field_header=jqXHR.getResponseHeader("X-Horizon-Add-To-Field"),json_data,field_to_update;if(redirect_header===null){$('.ajax-modal, .dropdown-toggle').removeAttr("disabled");}
if(redirect_header){location.href=redirect_header;}else if(add_to_field_header){json_data=$.parseJSON(data);field_to_update=$("#"+add_to_field_header);field_to_update.append("<option value='"+json_data[0]+"'>"+json_data[1]+"</option>");field_to_update.change();field_to_update.val(json_data[0]);}else{horizon.modals.success(data,textStatus,jqXHR);}}
function processServerError(jqXHR,textStatus,errorThrown,$formElement){$formElement=$formElement||$form;if(jqXHR.getResponseHeader('logout')){location.href=jqXHR.getResponseHeader("X-Horizon-Location");}else{$('.ajax-modal, .dropdown-toggle').removeAttr("disabled");$formElement.closest(".modal").modal("hide");horizon.toast.add("danger",gettext("There was an error submitting the form. Please try again."));}}
ajaxOpts={type:"POST",url:$form.attr('action'),headers:headers,data:formData,beforeSend:function(){$("#modal_wrapper .modal").last().modal("hide");$('.ajax-modal, .dropdown-toggle').attr('disabled',true);horizon.modals.modal_spinner(gettext("Working"));},complete:function(jqXHR){var redirect_header=jqXHR.getResponseHeader("X-Horizon-Location");if(redirect_header===null){horizon.modals.spinner.modal('hide');}
$("#modal_wrapper .modal").last().modal("show");$button.prop("disabled",false);},success:function(data,textStatus,jqXHR){var promise;var uploadUrl=horizon.modals.getUploadUrl(jqXHR);$form.closest(".modal").modal("hide");if(uploadUrl){promise=horizon.modals.fileUpload(uploadUrl,file,jqXHR);}
if(promise){promise.then(function(){processServerSuccess(data,textStatus,jqXHR);},function(jqXHR,statusText,errorThrown){var $progressBar=horizon.modals.bar.find('.progress-bar');processServerError(jqXHR,statusText,errorThrown,$progressBar);});}else{processServerSuccess(data,textStatus,jqXHR);}},error:processServerError};if(modalFileUpload){ajaxOpts.contentType=false;ajaxOpts.processData=false;}
$.ajax(ajaxOpts);});$document.on('show.bs.modal','.modal',function(evt){$("select",evt.target).keyup(function(e){if(e.keyCode===27){e.target.blur();e.stopPropagation();}});});horizon.modals.addModalInitFunction(function(modal){$(modal).find(":text, select, textarea").filter(":visible:first").focus();});horizon.modals.addModalInitFunction(function(modal){horizon.datatables.validate_button($(modal).find(".table_wrapper > form"));});horizon.modals.addModalInitFunction(horizon.utils.loadAngular);$document.on('click','.ajax-modal',function(evt){var $this=$(this);if(horizon.modals._request&&typeof(horizon.modals._request.abort)!==undefined){horizon.modals._request.abort();}
horizon.modals._request=$.ajax($this.attr('href'),{beforeSend:function(){horizon.modals.modal_spinner(gettext("Loading"));},complete:function(){horizon.modals._request=null;horizon.modals.spinner.modal('hide');},error:function(jqXHR){if(jqXHR.status===401){var redir_url=jqXHR.getResponseHeader("X-Horizon-Location");if(redir_url){location.href=redir_url;}else{location.reload(true);}}
else{if(!horizon.ajax.get_messages(jqXHR)){horizon.toast.add("danger",gettext("An error occurred. Please try again later."));}}},success:function(data,textStatus,jqXHR){var update_field_id=$this.attr('data-add-to-field'),modal,form;modal=horizon.modals.success(data,textStatus,jqXHR);if(update_field_id){form=modal.find("form");if(form.length){form.attr("data-add-to-field",update_field_id);}}}});evt.preventDefault();});$document.on("show.bs.modal",".modal",function(){var modal_stack=$("#modal_wrapper .modal");modal_stack.splice(modal_stack.length-1,1);modal_stack.modal("hide");});$document.on('hidden.bs.modal','.modal',function(){var $this=$(this),modal_stack=$("#modal_wrapper .modal");if($this[0]===modal_stack.last()[0]||$this.hasClass("loading")){$this.remove();if(!$this.hasClass("loading")){$("#modal_wrapper .modal").last().modal("show");}}});$document.on("show.bs.modal",".modal",function(){$(".modal-content").draggable({handle:".modal-header"});});var MOUSE_LBUTTON_CODE_NORMALIZED=1;var MOUSE_WHEEL_CODE_NORMALIZED=2;$(document).on('click','.openstack-spin',function(ev){if(ev.which!==MOUSE_WHEEL_CODE_NORMALIZED&&!(ev.which===MOUSE_LBUTTON_CODE_NORMALIZED&&(ev.shiftKey||ev.ctrlKey||ev.metaKey))){horizon.modals.modal_spinner(gettext("Loading"));}});});horizon.addInitFunction(function(){$(window).bind('pageshow',function(event){if(event.originalEvent.persisted){window.location.reload();}});});horizon.modals.MODAL_BACKDROP="static";horizon.datatables={update:function(){var $rows_to_update=$('tr.warning.ajax-update');var $table=$rows_to_update.closest('table');var interval=$rows_to_update.attr('data-update-interval');var decay_constant=$table.attr('decay_constant');var requests=[];if($rows_to_update.length<=0){return;}
if($rows_to_update.find('.actions_column .btn-group.open').length){setTimeout(horizon.datatables.update,interval);$table.removeAttr('decay_constant');return;}
$rows_to_update.each(function(){var $row=$(this);var $table=$row.closest('table.datatable');requests.push(horizon.ajax.queue({url:$row.attr('data-update-url'),error:function(jqXHR){switch(jqXHR.status){case 404:var row_count,colspan,template,params;row_count=horizon.datatables.update_footer_count($table,-1);if(row_count===0){colspan=$table.find('.table_column_header th').length;template=horizon.templates.compiled_templates["#empty_row_template"];params={"colspan":colspan,no_items_label:gettext("No items to display.")};var empty_row=template.render(params);$row.replaceWith(empty_row);}else{$row.remove();}
$table.trigger("update");horizon.datatables.update_actions();break;default:console.log(gettext("An error occurred while updating."));$row.removeClass("ajax-update");$row.find("i.ajax-updating").remove();break;}},success:function(data){var $new_row=$(data);if($new_row.hasClass('warning')){var $container=$(document.createElement('div')).addClass('progress-text horizon-loading-bar');var $progress=$(document.createElement('div')).addClass('progress progress-striped active').appendTo($container);$width=$new_row.find('[percent]:first').attr('percent')||"100%";$(document.createElement('div')).addClass('progress-bar').css("width",$width).appendTo($progress);if($new_row.find('.btn-action-required').length>0){$(document.createElement('span')).addClass('fa fa-question-circle progress-bar-text').appendTo($container);}
$new_row.find("td.warning:last").prepend($container);}
if($new_row.html()!==$row.html()){var $checkbox=$row.find('.table-row-multi-select');if($checkbox.length&&$checkbox[0].checked){$new_row.find('.table-row-multi-select').prop('checked',true);}
$row.replaceWith($new_row);recompileAngularContent($table);$table.trigger("update");$table.removeAttr('decay_constant');if($table.attr('id')in horizon.datatables.qs){horizon.datatables.qs[$table.attr('id')].cache();}}},complete:function(){horizon.datatables.validate_button();}}));});$.when.apply($,requests).always(function(){decay_constant=decay_constant||0;decay_constant++;$table.attr('decay_constant',decay_constant);var next_poll=interval*decay_constant;if(next_poll>30*1000){next_poll=30*1000;}
setTimeout(horizon.datatables.update,next_poll);});},update_actions:function(){var $actions_to_update=$('.btn-launch.ajax-update, .btn-create.ajax-update');$actions_to_update.each(function(){var $action=$(this);horizon.ajax.queue({url:$action.attr('data-update-url'),error:function(){console.log(gettext("An error occurred while updating."));},success:function(data){var $new_action=$(data);if($new_action.html()!=$action.html()){$action.replaceWith($new_action);}}});});},validate_button:function($form,disable_button){$form=$form||$(".table_wrapper > form");$form.each(function(){var $this=$(this);var $action_buttons=$this.find('.table_actions button[data-batch-action="true"]');var $more_dropdown=$this.find('.table_actions_menu > a.dropdown-toggle');if(disable_button===undefined){var checkboxes=$this.find(".table-row-multi-select");var checked=checkboxes.filter(":checked");disable_button=(checkboxes.length>0&&checked.length==0);}
$action_buttons.toggleClass("disabled",disable_button);$more_dropdown.toggleClass("disabled",disable_button);});},initialize_checkboxes_behavior:function(){$('.table_wrapper, #modal_wrapper').on('change','.table-row-multi-select',function(){var $this=$(this);var $table=$this.closest('table');var is_checked=$this.prop('checked');if($this.hasClass('multi-select-header')){$table.find('tbody tr:visible .table-row-multi-select').prop('checked',is_checked);}else{var $multi_select_checkbox=$table.find('.multi-select-header');var $checkboxes=$table.find('tbody .table-row-multi-select');var not_checked=$checkboxes.not(':checked').length;is_checked=$checkboxes.length!=not_checked;$multi_select_checkbox.prop('checked',not_checked==0);}
horizon.datatables.validate_button($this.closest('form'),!is_checked);});},initialize_table_tooltips:function(){$('div.table_wrapper').tooltip({selector:'[data-toggle="tooltip"]',container:'body'});},disable_actions_on_submit:function($form){$form=$form||$(".table_wrapper > form");$form.on("submit",function(){var $this=$(this);$this.attr('data-submitted','true');$this.find('td.actions_column button[type="submit"]').addClass("disabled");$this.addClass('wait');});}};horizon.datatables.confirm=function(action){var $action=$(action);if($action.hasClass("disabled")){return;}
var $uibModal_parent=$action.closest('.modal');var name_array=[];var action_string=$action.text();var help_text=$action.attr("help_text")||"";var name_string="";var $closest_tr=$action.closest("tr");var $data_display=$closest_tr.find('span[data-display]');if($data_display.length>0){name_string=' "'+$data_display.attr("data-display")+'"';name_array=[name_string];}else{var $device_window=$('div.topologyBalloon');var $device_table=$device_window.find('table.detailInfoTable').has('caption[data-display]');var $data_display=$device_table.find('caption[data-display]');if($data_display.length>0){name_string=' "'+$data_display.attr("data-display")+'"';name_array=[name_string];}}
var $closest_table=$action.closest("table");$data_display=$closest_table.find('tr[data-display]');if($data_display.length>0){var $actions_div=$action.closest("div");if($actions_div.hasClass("table_actions")||$actions_div.hasClass("table_actions_menu")){$data_display.has(".table-row-multi-select:checked").each(function(){name_array.push(" \""+$(this).attr("data-display")+"\"");});name_string=name_array.join(", ");}else{name_string=" \""+$action.closest("tr").attr("data-display")+"\"";name_array=[name_string];}}else{$data_display=$('dd[data-display]');if($data_display.length>0){name_string=' "'+$('dd[data-display]').attr("data-display")+'"';name_array=[name_string];}}
var title=interpolate(gettext("Confirm %s"),[action_string]);var template=horizon.templates.compiled_templates["#confirm_modal"],params={selection:name_string,selection_list:name_array,help:help_text};var body;try{body=$(template.render(params)).html();}catch(e){body=name_string+gettext("Please confirm your selection. ")+help_text;}
var actionNode=action.nodeType?action:action[0];var confirmCssClass=actionNode.className.indexOf("btn-danger")>=0?"btn-danger":"btn-primary";var modal=horizon.modals.create(title,body,action_string,"",confirmCssClass);modal.modal();if($uibModal_parent.length){var child_backdrop=modal.next('.modal-backdrop');child_backdrop.css('z-index',$uibModal_parent.css('z-index')+10);modal.css('z-index',child_backdrop.css('z-index')+10);}
modal.find('.'+confirmCssClass).click(function(){var $form=$action.closest('form');var el=document.createElement("input");el.type='hidden';el.name=$action.attr('name');el.value=$action.attr('value');$form.append(el).submit();modal.modal('hide');horizon.modals.modal_spinner(gettext("Working"));return false;});return modal;};$.tablesorter.addParser({id:'sizeSorter',is:function(){return false;},format:function(s){var sizes={BYTE:0,B:0,KB:1,MB:2,GB:3,TB:4,PB:5};var regex=/([\d\.,]+)\s*(byte|B|KB|MB|GB|TB|PB)+/i;var match=s.match(regex);if(match&&match.length===3){return parseFloat(match[1])*Math.pow(1024,sizes[match[2].toUpperCase()]);}
return parseInt(s,10);},type:'numeric'});$.tablesorter.addParser({id:'timesinceSorter',is:function(){return false;},format:function(s,table,cell){return $(cell).find('span').data('seconds');},type:'numeric'});$.tablesorter.addParser({id:"timestampSorter",is:function(){return false;},format:function(s){s=s.replace(/\-/g," ").replace(/:/g," ");s=s.replace("T"," ").replace("Z"," ");s=s.split(" ");return new Date(s[0],s[1],s[2],s[3],s[4],s[5]).getTime();},type:"numeric"});$.tablesorter.addParser({id:'IPv4Address',is:function(s,table,cell){var a=$(cell).find('li').first().text().split('.');if(a.length===1&&a[0]===''){a=s.split('.');}
if(a.length!==4){return false;}
for(var i=0;i<a.length;i++){if(isNaN(a[i])){return false;}
if((a[i]&0xFF)!=a[i]){return false;}}
return true;},format:function(s,table,cell){var result=0;var a=$(cell).find('li').first().text().split('.');if(a.length===1&&a[0]===''){a=s.split('.');}
var last_index=a.length-1;for(var i=0;i<a.length;i++){var shift=8*(last_index-i);result+=((parseInt(a[i],10)<<shift)>>>0);}
return result;},type:'numeric'});horizon.datatables.disable_buttons=function(){$("table .table_actions").on("click",".btn.disabled",function(event){event.preventDefault();event.stopPropagation();});};$.tablesorter.addParser({id:'uuid',is:function(){return false;},format:function(s){s=s.toUpperCase();var value=0.0;for(var i=0;i<s.length;i++){var char_offset=1.0/Math.pow(100,i);value=value+(s.charCodeAt(i)*char_offset);}
return value;},type:'numeric'});horizon.datatables.update_footer_count=function(el,modifier){var $el=$(el),$browser,$header,$footer,row_count,footer_text_template,footer_text;if(!modifier){modifier=0;}
$browser=$el.closest("#browser_wrapper");if($browser.length){$footer=$browser.find('.tfoot span.content_table_count');}
else{$header=$el.find('thead span.table_count');$footer=$el.find('tfoot span.table_count');}
row_count=$el.find('tbody tr:visible').length+modifier-$el.find('.empty').length;if(row_count){footer_text_template=ngettext("Displaying %s item","Displaying %s items",row_count);footer_text=interpolate(footer_text_template,[row_count]);}else{footer_text='';}
if($header){$header.text(footer_text);}
$footer.text(footer_text);return row_count;};horizon.datatables.add_no_results_row=function(table){var template=horizon.templates.compiled_templates["#empty_row_template"];if(!table.find("tbody tr:visible").length&&typeof(template)!=="undefined"){var colspan=table.find('.table_column_header th').length;var params={"colspan":colspan,no_items_label:gettext("No items to display.")};table.find("tbody").append(template.render(params));}};horizon.datatables.remove_no_results_row=function(table){table.find("tr.empty").remove();};horizon.datatables.fix_row_striping=function(table){table.trigger('applyWidgetId',['zebra']);};horizon.datatables.set_table_sorting=function(parent){$(parent).find("table.datatable").each(function(){var $table=$(this),header_options={};if($table.find('tbody tr').not('.empty').length>1){$table.find("thead th[class!='table_header']").each(function(i){var $th=$(this);if(!$th.hasClass('sortable')){header_options[i]={sorter:false};}else if($th.data('type')==='size'){header_options[i]={sorter:'sizeSorter'};}else if($th.data('type')==='ip'){header_options[i]={sorter:'IPv4Address'};}else if($th.data('type')==='timesince'){header_options[i]={sorter:'timesinceSorter'};}else if($th.data('type')==='timestamp'){header_options[i]={sorter:'timestampSorter'};}else if($th.data('type')=='uuid'){header_options[i]={sorter:'uuid'};}});$table.tablesorter({headers:header_options,widgets:['zebra'],selectorHeaders:"thead th[class!='table_header']",cancelSelection:false,emptyTo:'none',headerTemplate:'{content}{icon}',cssIcon:'table-sort-indicator'});}});};horizon.datatables.add_table_checkboxes=function($parent){$($parent).find('table thead .multi_select_column').each(function(){var $thead=$(this);if(!$thead.find('.table-row-multi-select').length&&$thead.parents('table').find('tbody .table-row-multi-select').length){var $container=$(document.createElement('div')).addClass('themable-checkbox');var $input=$(document.createElement('input')).attr('type','checkbox').addClass('table-row-multi-select multi-select-header').uniqueId().appendTo($container);$(document.createElement('label')).attr('for',$input.attr('id')).appendTo($container);$thead.append($container);}});};horizon.datatables.update_header_checkbox=function(table){var $multi_select_checkbox=table.find('.multi-select-header');var $checkboxes=table.find('tbody tr:visible .table-row-multi-select');if($checkboxes.length==0){$multi_select_checkbox.prop('checked',false);$multi_select_checkbox.attr('disabled',true);}else{$multi_select_checkbox.removeAttr('disabled');var not_checked=$checkboxes.not(':checked').length;$multi_select_checkbox.prop('checked',not_checked==0);}};horizon.datatables.set_table_query_filter=function(parent){if(typeof horizon.datatables.qs==="undefined"){horizon.datatables.qs={};}
$(parent).find('table').each(function(index,elm){var input=$($(elm).find('div.table_search.client input')),table_selector;if(input.length>0){input.on('keypress',function(evt){if(evt.keyCode===13){return false;}});input.next('button.btn span.search-icon').on('click keypress',function(){return false;});table_selector='table#'+$(elm).attr('id');var qs=input.quicksearch(table_selector+' tbody tr',{'delay':300,'loader':'span.loading','bind':'keyup','show':this.show,'hide':this.hide,onBefore:function(){var table=$(table_selector);horizon.datatables.remove_no_results_row(table);},onAfter:function(){var table=$(table_selector);horizon.datatables.update_footer_count(table);horizon.datatables.add_no_results_row(table);horizon.datatables.fix_row_striping(table);horizon.datatables.update_header_checkbox(table);},prepareQuery:function(val){return new RegExp(horizon.string.escapeRegex(val),"i");},testQuery:function(query,txt,_row){return query.test($(_row).find('td:not(.hidden):not(.actions_column)').text());}});horizon.datatables.qs[$(elm).attr('id')]=qs;}});};horizon.datatables.set_table_fixed_filter=function(parent){$(parent).find('table.datatable').each(function(index,elm){$(elm).on('click','div.table_filter button',function(evt){$(elm).find('div.table_filter button').each(function(index,btn){$(btn).removeClass('active');});var table=$(elm);var category=$(this).val();evt.preventDefault();horizon.datatables.remove_no_results_row(table);table.find('tbody tr').hide();table.find('tbody tr.category-'+category).show();horizon.datatables.update_footer_count(table);horizon.datatables.add_no_results_row(table);horizon.datatables.fix_row_striping(table);});$(elm).find('div.table_filter button').each(function(i,button){if($(button).text().indexOf(' (0)')===-1){$(button).trigger('click');return false;}});});};horizon.addInitFunction(horizon.datatables.init=function(){horizon.datatables.validate_button();horizon.datatables.disable_buttons();$('table.datatable').each(function(idx,el){horizon.datatables.update_footer_count($(el),0);});horizon.datatables.initialize_checkboxes_behavior();horizon.datatables.initialize_table_tooltips();var $body=$('body');horizon.datatables.add_table_checkboxes($body);horizon.datatables.set_table_sorting($body);horizon.datatables.set_table_query_filter($body);horizon.datatables.set_table_fixed_filter($body);horizon.datatables.disable_actions_on_submit();horizon.modals.addModalInitFunction(horizon.datatables.add_table_checkboxes);horizon.modals.addModalInitFunction(horizon.datatables.set_table_sorting);horizon.modals.addModalInitFunction(horizon.datatables.set_table_query_filter);horizon.modals.addModalInitFunction(horizon.datatables.set_table_fixed_filter);horizon.modals.addModalInitFunction(horizon.datatables.initialize_table_tooltips);horizon.modals.addModalInitFunction(function modalInitActionDisable(modal){horizon.datatables.disable_actions_on_submit($(modal).find(".table_wrapper > form"));});horizon.tabs.addTabLoadFunction(horizon.datatables.add_table_checkboxes);horizon.tabs.addTabLoadFunction(horizon.datatables.set_table_sorting);horizon.tabs.addTabLoadFunction(horizon.datatables.set_table_query_filter);horizon.tabs.addTabLoadFunction(horizon.datatables.set_table_fixed_filter);horizon.tabs.addTabLoadFunction(horizon.datatables.initialize_checkboxes_behavior);horizon.tabs.addTabLoadFunction(horizon.datatables.initialize_table_tooltips);horizon.tabs.addTabLoadFunction(function(tab){horizon.datatables.validate_button($(tab).find(".table_wrapper > form"));horizon.datatables.disable_actions_on_submit($(tab).find(".table_wrapper > form"));});horizon.datatables.update();});horizon.tabs={_init_load_functions:[]};horizon.tabs.addTabLoadFunction=function(f){horizon.tabs._init_load_functions.push(f);};horizon.tabs.initTabLoad=function($tab){$tab.removeClass('tab-loading');$(horizon.tabs._init_load_functions).each(function(index,f){f($tab);});recompileAngularContent($tab);};horizon.tabs.load_tab=function(){var $this=$(this),tab_id=$this.attr('data-target'),$tab_pane=$(tab_id);var $template=horizon.loader.inline(gettext('Loading'));$tab_pane.append($template).addClass('tab-loading');if(window.location.search.length>0){$tab_pane.load(window.location.search+"&tab="+tab_id.replace('#',''),function(){horizon.tabs.initTabLoad($tab_pane);});}else{$tab_pane.load("?tab="+tab_id.replace('#',''),function(){horizon.tabs.initTabLoad($tab_pane);});}
$this.attr("data-loaded","true");};horizon.addInitFunction(horizon.tabs.init=function(){var data=horizon.cookies.getObject("tabs")||{};$(".tab-content").find(".js-tab-pane").addClass("tab-pane");horizon.modals.addModalInitFunction(function(el){$(el).find(".js-tab-pane").addClass("tab-pane");});var $document=$(document);$document.on("show.bs.tab",".ajax-tabs a[data-loaded='false']",horizon.tabs.load_tab);$document.on("shown.bs.tab",".nav-tabs a[data-toggle='tab']",function(evt){var $tab=$(evt.target),$content=$($(evt.target).attr('data-target'));$content.find("table.datatable").each(function(){horizon.datatables.update_footer_count($(this));});if($content.find(".d3-container").length){window.dispatchEvent(new Event('resize'));}
data[$tab.closest(".nav-tabs").attr("id")]=$tab.attr('data-target');horizon.cookies.putObject("tabs",data);});$(".nav-tabs[data-sticky-tabs='sticky']").each(function(){var $this=$(this),id=$this.attr("id"),active_tab=data[id];if(active_tab&&window.location.search.indexOf("tab=")<0){$this.find("a[data-target='"+active_tab+"']").tab('show');}});$(".tab-content").on("keydown",".tab-pane :input:visible:last",function(evt){var $this=$(this),next_pane=$this.closest(".tab-pane").next(".tab-pane");if(evt.which===9&&!evt.shiftKey&&next_pane.length){evt.preventDefault();$(".nav-tabs a[data-target='#"+next_pane.attr("id")+"']").tab('show');}});$(".tab-content").on("keydown",".tab-pane :input:visible:first",function(evt){var $this=$(this),prev_pane=$this.closest(".tab-pane").prev(".tab-pane");if(evt.shiftKey&&evt.which===9&&prev_pane.length){evt.preventDefault();$(".nav-tabs a[data-target='#"+prev_pane.attr("id")+"']").tab('show');prev_pane.find(":input:last").focus();}});$document.on("focus",".tab-content :input",function(){var $this=$(this),tab_pane=$this.closest(".tab-pane"),tab_id=tab_pane.attr('id');if(!tab_pane.hasClass("active")){$(".nav-tabs a[data-target='#"+tab_id+"']").tab('show');}});});horizon.templates={template_ids:["#modal_template","#empty_row_template","#alert_message_template","#loader-modal","#loader-inline","#membership_template","#confirm_modal","#progress-modal"],compiled_templates:{}};horizon.templates.compile_templates=function(id){if(id){horizon.templates.compiled_templates[id]=Hogan.compile($(id).html());}else{horizon.templates.compiled_templates=$.isEmptyObject(horizon.templates.compiled_templates)?{}:horizon.templates.compiled_templates;$.each(horizon.templates.template_ids,function(ind,template_id){if(!(template_id in horizon.templates.compiled_templates)){horizon.templates.compiled_templates[template_id]=Hogan.compile($(template_id).html());}});}};horizon.templates.compile=function(id,context){var template=horizon.templates.compiled_templates[id];if(!template){horizon.templates.compile_templates(id);template=horizon.templates.compiled_templates[id];}
return $(template.render(context));};horizon.addInitFunction(horizon.templates.init=function(){horizon.templates.compile_templates();});horizon.user={init:function(){$("#id_password").change(function(){if($("#id_confirm_password").val()!==""){horizon.user.check_passwords_match();}});$("#id_confirm_password").change(function(){horizon.user.check_passwords_match();});},check_passwords_match:function(){var row=$("input#id_confirm_password");var error_id="id_confirm_password_error";var msg="<span id='"+error_id+"' class='help-block'>"+gettext("Passwords do not match.")+"</span>";var password=$("#id_password").val();var confirm_password=$("#id_confirm_password").val();if(password!==confirm_password&&$("#"+error_id).length===0){$(row).parent().addClass("has-error").append(msg);}else if(password===confirm_password){$(row).parent().removeClass("has-error");$("#"+error_id).remove();}}};horizon.membership={current_membership:[],data:[],roles:[],has_roles:[],default_role_id:[],get_field_id:function(id_string){return id_string.slice(id_string.lastIndexOf("_")+1);},get_member_id:function(id_string,step_slug){return id_string.slice(id_string.indexOf(step_slug)+step_slug.length+1);},get_role_element:function(step_slug,role_id){return $('select[id^="id_'+step_slug+'_role_'+role_id+'"]');},get_member_element:function(step_slug,data_id){return $('li[data-'+step_slug+'-id$='+data_id+']').parent();},init_properties:function(step_slug){horizon.membership.has_roles[step_slug]=$("."+step_slug+"_membership").data('show-roles')!=="False";horizon.membership.default_role_id[step_slug]=$('#id_default_'+step_slug+'_role').attr('value');horizon.membership.init_data_list(step_slug);horizon.membership.init_role_list(step_slug);horizon.membership.init_current_membership(step_slug);},init_data_list:function(step_slug){horizon.membership.data[step_slug]=[];angular.forEach($(this.get_role_element(step_slug,"")).find("option"),function(option){horizon.membership.data[step_slug][option.value]=option.text;});},init_role_list:function(step_slug){horizon.membership.roles[step_slug]=[];angular.forEach($('label[for^="id_'+step_slug+'_role_"]'),function(role){var id=horizon.membership.get_field_id($(role).attr('for'));horizon.membership.roles[step_slug][id]=$(role).text();});},init_current_membership:function(step_slug){horizon.membership.current_membership[step_slug]=[];var members_list=[];var role_id,selected_members;angular.forEach(this.get_role_element(step_slug,''),function(value){role_id=horizon.membership.get_field_id($(value).attr('id'));selected_members=$(value).find("option:selected");members_list=[];if(selected_members){angular.forEach(selected_members,function(member){members_list.push(member.value);});}
horizon.membership.current_membership[step_slug][role_id]=members_list;});},get_member_roles:function(step_slug,data_id){var roles=[];for(var role in horizon.membership.current_membership[step_slug]){if($.inArray(data_id,horizon.membership.current_membership[step_slug][role])!==-1){roles.push(role);}}
return roles;},update_role_lists:function(step_slug,role_id,new_list){this.get_role_element(step_slug,role_id).val(new_list);horizon.membership.current_membership[step_slug][role_id]=new_list;},remove_member:function(step_slug,data_id,role_id,role_list){var index=role_list.indexOf(data_id);if(index>=0){role_list.splice(index,1);horizon.membership.update_role_lists(step_slug,role_id,role_list);}},remove_member_from_role:function(step_slug,data_id,role_id){var role,membership=horizon.membership.current_membership[step_slug];if(role_id){horizon.membership.remove_member(step_slug,data_id,role_id,membership[role_id]);}
else{for(role in membership){if(membership.hasOwnProperty(role)){horizon.membership.remove_member(step_slug,data_id,role,membership[role]);}}}},add_member_to_role:function(step_slug,data_id,role_id){var role_list=horizon.membership.current_membership[step_slug][role_id];role_list.push(data_id);horizon.membership.update_role_lists(step_slug,role_id,role_list);},update_member_role_dropdown:function(step_slug,data_id,role_ids,member_el){if(typeof(role_ids)==='undefined'){role_ids=horizon.membership.get_member_roles(step_slug,data_id);}
if(typeof(member_el)==='undefined'){member_el=horizon.membership.get_member_element(step_slug,data_id);}
var $dropdown=member_el.find("li.member").siblings('.dropdown');var $role_items=$dropdown.children('.role_dropdown').children('li');$role_items.each(function(idx,el){if($.inArray(($(el).data('role-id')),role_ids)!==-1){$(el).addClass('selected');}else{$(el).removeClass('selected');}});var $roles_display=$dropdown.children('.dropdown-toggle').children('.roles_display');var roles_to_display=[];for(var i=0;i<role_ids.length;i++){roles_to_display.push(horizon.membership.roles[step_slug][role_ids[i]]);}
var text=roles_to_display.join(', ');if(text.length===0){text=gettext('No roles');}
$roles_display.text(text);},generate_member_element:function(step_slug,display_name,data_id,role_ids,text){var roles=[],that=this,membership_roles=that.roles[step_slug],r;for(r in membership_roles){if(membership_roles.hasOwnProperty(r)){roles.push({role_id:r,role_name:membership_roles[r]});}}
var template=horizon.templates.compiled_templates["#membership_template"],params={data_id:"id_"+step_slug+"_"+data_id,step_slug:step_slug,default_role:that.roles[that.default_role_id[step_slug]],display_name:display_name,text:text,roles:roles,roles_label:gettext("Roles")},member_el=$(template.render(params));this.update_member_role_dropdown(step_slug,params.data_id,role_ids,member_el);return $(member_el);},generate_html:function(step_slug){var data_id,data=horizon.membership.data[step_slug];for(data_id in data){if(data.hasOwnProperty(data_id)){var display_name=data[data_id];var role_ids=this.get_member_roles(step_slug,data_id);if(role_ids.length>0){$("."+step_slug+"_members").append(this.generate_member_element(step_slug,display_name,data_id,role_ids,"-"));}
else{$(".available_"+step_slug).append(this.generate_member_element(step_slug,display_name,data_id,role_ids,"+"));}}}
horizon.membership.detect_no_results(step_slug);},update_membership:function(step_slug){$(".available_"+step_slug+", ."+step_slug+"_members").on('click',".btn-group a[href='#add_remove']",function(evt){evt.preventDefault();var available=$(".available_"+step_slug).has($(this)).length;var data_id=horizon.membership.get_member_id($(this).parent().siblings().attr('data-'+step_slug+'-id'),step_slug);var member_el=$(this).parent().parent();if(available){var default_role=horizon.membership.default_role_id[step_slug];$(this).text("-");$("."+step_slug+"_members").append(member_el);horizon.membership.add_member_to_role(step_slug,data_id,default_role);if(horizon.membership.has_roles[step_slug]){$(this).parent().siblings(".role_options").show();horizon.membership.update_member_role_dropdown(step_slug,data_id,[default_role],member_el);}}
else{$(this).text("+");$(this).parent().siblings(".role_options").hide();$(".available_"+step_slug).append(member_el);horizon.membership.remove_member_from_role(step_slug,data_id);}
horizon.membership.list_filtering(step_slug);horizon.membership.detect_no_results(step_slug);$("input."+step_slug+"_filter").trigger("keyup");});},detect_no_results:function(step_slug){$('.'+step_slug+'_filterable').each(function(){var css_class=$(this).find('ul').attr('class');var filter=$.grep(css_class.split(' '),function(val){return val.indexOf(step_slug)!==-1;})[0];if(!$('.'+filter).children('ul').length){$('#no_'+filter).show();$("input[id='"+filter+"']").attr('disabled','disabled');}
else{$('#no_'+filter).hide();$("input[id='"+filter+"']").removeAttr('disabled');}});},select_member_role:function(step_slug){$(".available_"+step_slug+", ."+step_slug+"_members").on('click','.role_dropdown li',function(evt){evt.preventDefault();evt.stopPropagation();var new_role_id=$(this).attr("data-role-id");var id_str=$(this).parent().parent().siblings(".member").attr("data-"+step_slug+"-id");var data_id=horizon.membership.get_member_id(id_str,step_slug);if($(this).hasClass('selected')){$(this).removeClass('selected');horizon.membership.remove_member_from_role(step_slug,data_id,new_role_id);}else{$(this).addClass('selected');horizon.membership.add_member_to_role(step_slug,data_id,new_role_id);}
horizon.membership.update_member_role_dropdown(step_slug,data_id);});},add_new_member:function(step_slug){$("select[id='id_new_"+step_slug+"']").on('change',function(){var display_name=$(this).find("option").text();var data_id=$(this).find("option").attr("value");var default_role_id=horizon.membership.default_role_id[step_slug];$("."+step_slug+"_members").append(horizon.membership.generate_member_element(step_slug,display_name,data_id,[default_role_id],"-"));horizon.membership.data[step_slug][data_id]=display_name;$("select[multiple='multiple']").append("<option value='"+data_id+"'>"+horizon.membership.data[step_slug][data_id]+"</option>");horizon.membership.add_member_to_role(step_slug,data_id,default_role_id);$(this).text("");horizon.membership.list_filtering(step_slug);horizon.membership.detect_no_results(step_slug);$("input.filter").val("");$("."+step_slug+"_members .btn-group").removeClass('last_stripe');$("."+step_slug+"_members .btn-group:last").addClass('last_stripe');});},add_new_member_styling:function(step_slug){var add_member_el=$("label[for='id_new_"+step_slug+"']").parent();$(add_member_el).find("select").hide();$("#add_"+step_slug).append($(add_member_el));$(add_member_el).addClass("add_"+step_slug);$(add_member_el).find("label, .input").addClass("add_"+step_slug+"_btn");},fix_stripes:function(step_slug){$('.fake_'+step_slug+'_table').each(function(){var filter="."+$(this).attr('id');var visible=" .btn-group:visible";var even=" .btn-group:visible:even";var last=" .btn-group:visible:last";$(filter+visible).removeClass('dark_stripe');$(filter+visible).addClass('light_stripe');$(filter+even).removeClass('light_stripe');$(filter+even).addClass('dark_stripe');$(filter+visible).removeClass('last_stripe');$(filter+last).addClass('last_stripe');});},list_filtering:function(step_slug){$('input.'+step_slug+'_filter').unbind();$('.'+step_slug+'_filterable').each(function(){var css_class=$(this).children().children('ul').attr('class');var filter=$.grep(css_class.split(' '),function(val){return val.indexOf(step_slug)!==-1;})[0];var input=$("input[id='"+filter+"']");input.quicksearch('ul.'+filter+' ul li span.display_name',{'delay':200,'loader':'span.loading','show':function(){$(this).parent().parent().show();if(filter==="available_"+step_slug){$(this).parent('.dropdown-toggle').hide();}},'hide':function(){$(this).parent().parent().hide();},'noResults':'ul#no_'+filter,'onAfter':function(){horizon.membership.fix_stripes(step_slug);},'prepareQuery':function(val){return new RegExp(horizon.string.escapeRegex(val),"i");},'testQuery':function(query,txt,span){if($(input).attr('id')===filter){$(input).prev().removeAttr('disabled');return query.test($(span).text());}else{return true;}}});});},workflow_init:function(modal,step_slug,step_id){$(modal).find('form').each(function(){var $form=$(this);if($form.find('div.'+step_slug+'_membership').length===0){return;}
horizon.membership.init_properties(step_slug);horizon.membership.generate_html(step_slug);horizon.membership.update_membership(step_slug);horizon.membership.select_member_role(step_slug);horizon.membership.add_new_member(step_slug);$form.find(".available_"+step_slug+" .role_options").hide();if(!horizon.membership.has_roles[step_slug]){$form.find("."+step_slug+"_members .role_options").hide();}
if(step_id.indexOf('update')===0){$form.find("#"+step_id+" input").blur();}
$form.find('.'+step_slug+'_membership').keydown(function(event){if(event.keyCode===13){event.preventDefault();return false;}});horizon.membership.add_new_member_styling(step_slug);horizon.membership.list_filtering(step_slug);horizon.membership.detect_no_results(step_slug);$form.find('.fake_'+step_slug+'_table').each(function(){var filter="."+$(this).attr('id');$(filter+' .btn-group:even').addClass('dark_stripe');$(filter+' .btn-group:last').addClass('last_stripe');});});}};var WIDTH=100;var HEIGHT=100;var RADIUS=45;function create_vis(chart){return d3.select(chart).append("svg:svg").attr("class","chart legacy-pie-chart").attr("viewBox","0 0 "+WIDTH+" "+HEIGHT).append("g").attr("transform","translate("+(WIDTH/2)+","+(HEIGHT/2)+")");}
function create_arc(){return d3.svg.arc().outerRadius(RADIUS).innerRadius(0);}
function create_pie(param){return d3.layout.pie().sort(null).value(function(d){return d[param];});}
horizon.d3_pie_chart_usage={init:function(){var self=this;var pie_chart_data=$(".pie-chart-usage");self.chart=d3.selectAll(".pie-chart-usage");for(var i=0;i<pie_chart_data.length;i++){var data=$(pie_chart_data[i]).data("used");if(data[1]===true){self.data=data[0];self.pieChart(i,false);}else{var used=Math.min(parseInt(data,10),100);self.data=[{"percentage":used},{"percentage":100-used}];self.pieChart(i,true);}}},pieChart:function(i,fill){var self=this;var vis=create_vis(self.chart[0][i]);var arc=create_arc();var pie=create_pie("percentage");vis.selectAll(".arc").data(pie([{"percentage":10}])).enter().append("path").attr("class","arc").attr("d",arc);var animate=function(data){vis.selectAll(".arc").data(pie(data)).enter().append("path").attr("class",function(){var ret_val="arc inner";if(self.data[0].percentage>=100){ret_val+=" FULL";}else if(self.data[0].percentage>=80){ret_val+=" NEARLY_FULL";}
return ret_val;}).attr("d",arc).transition().duration(500).attrTween("d",function(start){start.endAngle=start.startAngle=0;var end={startAngle:0,endAngle:2*Math.PI*(100-start.value)/100};var tween=d3.interpolate(start,end);return function(t){return arc(tween(t));};});};var show_numbers=function(){vis.append("text").attr("class","chart-numbers").attr('text-anchor','middle').attr('dominant-baseline','central').text(self.data);};if(fill){animate(self.data);}else{show_numbers(self.data);}}};horizon.d3_pie_chart_distribution={init:function(){var self=this;var pie_chart_data=$(".pie-chart-distribution");self.chart=d3.selectAll(".pie-chart-distribution");for(var i=0;i<pie_chart_data.length;i++){var parts=$(pie_chart_data[i]).data("used").split("|");self.data=[];self.keys=[];for(var j=0;j<parts.length;j++){var key_value=parts[j].split("=");var d={key:key_value[0],value:key_value[1]};self.data.push(d);self.keys.push(key_value[0]);}
self.pieChart(i,$(pie_chart_data[i]));}},pieChart:function(i,$elem){var self=this;var vis=create_vis(self.chart[0][i]);var arc=create_arc();var pie=create_pie("value");var total=0;for(var j=0;j<self.data.length;j++){total=total+parseInt(self.data[j].value,10);}
var initial_data=[];if(total===0){initial_data=[{"value":1}];}
vis.selectAll(".arc").data(pie(initial_data)).enter().append("path").attr("class","arc").attr("d",arc);var animate=function(data){vis.selectAll(".arc").data(pie(data)).enter().append("path").attr("class","arc inner").attr("d",arc).transition().duration(500).attrTween("d",function(start){start.endAngle=start.startAngle;var end=jQuery.extend({},start);end.endAngle=end.startAngle+2*Math.PI/total*end.value;var tween=d3.interpolate(start,end);return function(t){return arc(tween(t));};});};if(total!==0){animate(self.data);}
var $legend=$(document.createElement('div')).addClass('legend');var total=0;for(var j=0;j<self.data.length;j++){self.data[j].value=parseFloat(self.data[j].value);total+=self.data[j].value;}
for(var j=0;j<self.data.length;j++){var this_item=self.data[j];var $this_group=$(document.createElement('div')).addClass('legend-group').appendTo($legend);$(document.createElement('span')).addClass('legend-symbol').appendTo($this_group);$(document.createElement('span')).addClass('legend-key').text(this_item.key).appendTo($this_group);var $this_value=$(document.createElement('span')).addClass('legend-value');if(this_item.value===0){$this_item.text("0%");}else{$this_value.text(Math.round((this_item.value/total)*100)+"%");}
$this_value.appendTo($this_group);}
$elem.append($legend);}};horizon.addInitFunction(function(){horizon.d3_pie_chart_usage.init();horizon.d3_pie_chart_distribution.init();});var container="#heat_resource_topology";function update(){node=node.data(nodes,function(d){return d.name;});link=link.data(links);var nodeEnter=node.enter().append("g").attr("class","node").attr("node_name",function(d){return d.name;}).attr("node_id",function(d){return d.instance;}).call(force.drag);nodeEnter.append("image").attr("xlink:href",function(d){return d.image;}).attr("id",function(d){return"image_"+d.name;}).attr("x",function(d){return d.image_x;}).attr("y",function(d){return d.image_y;}).attr("width",function(d){return d.image_size;}).attr("height",function(d){return d.image_size;});node.exit().remove();link.enter().insert("svg:line","g.node").attr("class","link").style("stroke-width",function(d){return Math.sqrt(d.value);});link.exit().remove();node.on("mouseover",function(d){$("#info_box").html(d.info_box);});node.on("mouseout",function(){$("#info_box").html('');});force.start();}
function tick(){link.attr("x1",function(d){return d.source.x;}).attr("y1",function(d){return d.source.y;}).attr("x2",function(d){return d.target.x;}).attr("y2",function(d){return d.target.y;});node.attr("transform",function(d){return"translate("+d.x+","+d.y+")";});}
function set_in_progress(stack,nodes){if(stack.in_progress===true){in_progress=true;}
for(var i=0;i<nodes.length;i++){var d=nodes[i];if(d.in_progress===true){in_progress=true;return false;}}}
function findNode(name){for(var i=0;i<nodes.length;i++){if(nodes[i].name===name){return nodes[i];}}}
function findNodeIndex(name){for(var i=0;i<nodes.length;i++){if(nodes[i].name===name){return i;}}}
function addNode(node){nodes.push(node);needs_update=true;}
function removeNode(name){var i=0;var n=findNode(name);while(i<links.length){if(links[i].source===n||links[i].target===n){links.splice(i,1);}else{i++;}}
nodes.splice(findNodeIndex(name),1);needs_update=true;}
function remove_nodes(old_nodes,new_nodes){for(var i=0;i<old_nodes.length;i++){var remove_node=true;for(var j=0;j<new_nodes.length;j++){if(old_nodes[i].name===new_nodes[j].name){remove_node=false;break;}}
if(remove_node===true){removeNode(old_nodes[i].name);}}}
function build_links(){for(var i=0;i<nodes.length;i++){build_node_links(nodes[i]);build_reverse_links(nodes[i]);}}
function build_node_links(node){for(var j=0;j<node.required_by.length;j++){var push_link=true;var target_idx='';var source_idx=findNodeIndex(node.name);try{target_idx=findNodeIndex(node.required_by[j]);}catch(err){push_link=false;}
for(var lidx=0;lidx<links.length;lidx++){if(links[lidx].source===source_idx&&links[lidx].target===target_idx){push_link=false;break;}}
if(push_link===true&&(source_idx&&target_idx)){links.push({'source':source_idx,'target':target_idx,'value':1});}}}
function build_reverse_links(node){for(var i=0;i<nodes.length;i++){if(nodes[i].required_by){for(var j=0;j<nodes[i].required_by.length;j++){var dependency=nodes[i].required_by[j];if(node.name===dependency){links.push({'source':findNodeIndex(nodes[i].name),'target':findNodeIndex(node.name),'value':1});}}}}}
function ajax_poll(poll_time){setTimeout(function(){$.getJSON(ajax_url,function(json){$("#d3_data").attr("data-d3_data",JSON.stringify(json));$("#stack_box").html(json.stack.info_box);set_in_progress(json.stack,json.nodes);needs_update=false;remove_nodes(nodes,json.nodes);json.nodes.forEach(function(d){var current_node=findNode(d.name);if(current_node){current_node.status=d.status;if(current_node.image!==d.image){current_node.image=d.image;var this_image=d3.select("#image_"+current_node.name);this_image.transition().attr("x",function(d){return d.image_x+5;}).duration(100).transition().attr("x",function(d){return d.image_x-5;}).duration(100).transition().attr("x",function(d){return d.image_x+5;}).duration(100).transition().attr("x",function(d){return d.image_x-5;}).duration(100).transition().attr("xlink:href",d.image).transition().attr("x",function(d){return d.image_x;}).duration(100).ease("bounce");}
current_node.info_box=d.info_box;}else{addNode(d);build_links();}});if(needs_update===true){update();}});if(in_progress===false){poll_time=30000;}
else{poll_time=3000;}
ajax_poll(poll_time);},poll_time);}
if($(container).length){var width=$(container).width(),height=500,stack_id=$("#stack_id").data("stack_id"),ajax_url=WEBROOT+'project/stacks/get_d3_data/'+stack_id+'/',graph=$("#d3_data").data("d3_data"),force=d3.layout.force().nodes(graph.nodes).links([]).gravity(0.1).charge(-2000).linkDistance(100).size([width,height]).on("tick",tick),svg=d3.select(container).append("svg").attr("width",width).attr("height",height),node=svg.selectAll(".node"),link=svg.selectAll(".link"),needs_update=false,nodes=force.nodes(),links=force.links();build_links();update();$("#stack_box").html(graph.stack.info_box);var in_progress=false;set_in_progress(graph.stack,node);var poll_time=0;if(in_progress===true){poll_time=3000;}
else{poll_time=30000;}
ajax_poll(poll_time);}
Rickshaw.namespace('Rickshaw.Graph.Renderer.StaticAxes');Rickshaw.Graph.Renderer.StaticAxes=Rickshaw.Class.create(Rickshaw.Graph.Renderer.Line,{name:'StaticAxes',defaults:function($super){return Rickshaw.extend($super(),{xMin:undefined,xMax:undefined,yMin:undefined,yMax:undefined});},domain:function($super){var ret=$super();var xMin,xMax;if(this.yMin!==undefined&&this.yMax!==undefined){ret.y=[this.yMin,this.yMax];}
if(this.xMin!==undefined&&this.xMax!==undefined){xMin=d3.time.format.utc('%Y-%m-%dT%H:%M:%S').parse(this.xMin);xMin=xMin.getTime()/1000;xMax=d3.time.format.utc('%Y-%m-%dT%H:%M:%S').parse(this.xMax);xMax=xMax.getTime()/1000;ret.x=[xMin,xMax];}
return ret;}});horizon.d3_line_chart={LineChart:function(chart_module,html_element,settings){var self=this;var jquery_element=$(html_element);self.chart_module=chart_module;self.html_element=html_element;self.jquery_element=jquery_element;self.$spinner=horizon.loader.inline(gettext('Loading')).hide().appendTo(jquery_element);self.init=function(){var self=this;self.legend_element=$(jquery_element.data('legend-selector')).get(0);self.slider_element=$(jquery_element.data('slider-selector')).get(0);self.data=jquery_element.data('data');self.url_parameters=jquery_element.data('url_parameters');if(typeof self.data==='string'){self.final_url=self.data;if(jquery_element.data('form-selector')){$(jquery_element.data('form-selector')).each(function(){if(self.final_url.indexOf('?')>-1){self.final_url+='&'+$(this).serialize();}else{self.final_url+='?'+$(this).serialize();}});}}
self.color=d3.scale.category10();self.stats={};self.stats.average=0;self.stats.last_value=0;self.init_settings(settings);self.get_size();};self.init_settings=function(settings){var self=this;self.settings={};self.settings.renderer='line';self.settings.auto_size=true;self.settings.axes_x=true;self.settings.axes_y=true;self.settings.axes_y_label=true;self.settings.interpolation='linear';self.settings.yMin=undefined;self.settings.yMax=undefined;self.settings.xMin=undefined;self.settings.xMax=undefined;self.settings.higlight_last_point=false;self.settings.composed_chart_selector='.overview_chart';self.settings.bar_chart_selector='div[data-chart-type="overview_bar_chart"]';self.settings.bar_chart_settings=undefined;self.hover_formatter='verbose';if(settings){self.apply_settings(settings);}
if(self.jquery_element.data('settings')){var inline_settings=self.jquery_element.data('settings');self.apply_settings(inline_settings);}};self.apply_settings=function(settings){var self=this;var allowed_settings=['renderer','auto_size','axes_x','axes_y','interpolation','yMin','yMax','xMin','xMax','bar_chart_settings','bar_chart_selector','composed_chart_selector','higlight_last_point','axes_y_label'];jQuery.each(allowed_settings,function(index,setting_name){if(settings[setting_name]!==undefined){self.settings[setting_name]=settings[setting_name];}});};self.get_size=function(){$(self.html_element).css('height','');$(self.html_element).css('width','');var svg=$(self.html_element).find('svg');svg.hide();self.width=jquery_element.width();self.height=jquery_element.height();if(self.settings.auto_size){var auto_height=$(window).height()-jquery_element.offset().top-30;if(auto_height>self.height){self.height=auto_height;}}
$(self.html_element).css('height',self.height);$(self.html_element).css('width',self.width);svg.show();svg.css('height',self.height);svg.css('width',self.width);};self.init();self.error_message=function(error){$(self.html_element).html(error);$(self.legend_element).empty();$(self.legend_element).css('height','');horizon.toast.add('error',gettext('An error occurred. Please try again later.'));};self.load_data=function(data){self.jquery_element.empty();$(self.legend_element).empty();self.series=data.series;self.stats=data.stats;self.apply_settings(data.settings);if(self.series.length<=0){$(self.html_element).html(gettext('No data available.'));$(self.legend_element).empty();$(self.legend_element).css('height','');}else{self.render();}};self.refresh=function(){var self=this;self.start_loading();if(typeof self.data==='string'){horizon.ajax.queue({url:self.final_url,success:function(data){self.load_data(data);},error:function(){self.error_message(gettext('No data available.'));},complete:function(){self.finish_loading();}});}else if(self.data){self.load_data(self.data);self.finish_loading();}else{self.error_message(gettext('No data available.'));}};self.render=function(){var self=this;var last_point,last_point_color;$.map(self.series,function(serie){serie.color=last_point_color=self.color(serie.name);$.map(serie.data,function(statistic){statistic.x=d3.time.format.utc('%Y-%m-%dT%H:%M:%S').parse(statistic.x);statistic.x=statistic.x.getTime()/1000;last_point=statistic;last_point.color=serie.color;});});var renderer=self.settings.renderer;if(renderer==='StaticAxes'){renderer=Rickshaw.Graph.Renderer.StaticAxes;}
self.jquery_element.empty();var $newGraph=self.jquery_element.clone();self.jquery_element.replaceWith($newGraph);self.jquery_element=$newGraph;self.html_element=self.jquery_element[0];var graph=new Rickshaw.Graph({element:self.html_element,width:self.width,height:self.height,renderer:renderer,series:self.series,yMin:self.settings.yMin,yMax:self.settings.yMax,xMin:self.settings.xMin,xMax:self.settings.xMax,interpolation:self.settings.interpolation});graph.render();if(self.hover_formatter==='verbose'){new Rickshaw.Graph.HoverDetail({graph:graph,formatter:function(series,x,y){if(y%1===0){y=parseInt(y,10);}else{y=parseFloat(y).toFixed(2);}
var d=new Date(x*1000);var datetime_string=d.getUTCFullYear()+"-"+
("00"+(d.getUTCMonth()+1)).slice(-2)+"-"+
("00"+d.getUTCDate()).slice(-2)+" "+
("00"+d.getUTCHours()).slice(-2)+":"+
("00"+d.getUTCMinutes()).slice(-2)+":"+
("00"+d.getUTCSeconds()).slice(-2)+" GMT";var date='<span class="date">'+datetime_string+'</span>';var swatch='<span class="detail_swatch" style="background-color: '+series.color+'"></span>';return swatch+series.name+': '+y+' '+series.unit+'<br>'+date;}});}
if(self.legend_element){var legend=new Rickshaw.Graph.Legend({graph:graph,element:self.legend_element});new Rickshaw.Graph.Behavior.Series.Toggle({graph:graph,legend:legend});new Rickshaw.Graph.Behavior.Series.Order({graph:graph,legend:legend});new Rickshaw.Graph.Behavior.Series.Highlight({graph:graph,legend:legend});}
if(self.settings.axes_x){var axes_x=new Rickshaw.Graph.Axis.Time({graph:graph});axes_x.render();}
if(self.settings.axes_y){var axes_y_settings={graph:graph};if(!self.settings.axes_y_label){axes_y_settings.tickFormat=(function(){return'';});}
var axes_y=new Rickshaw.Graph.Axis.Y(axes_y_settings);axes_y.render();}
$(self.legend_element).css('height','');if(self.stats!==undefined){var composed_chart=self.jquery_element.parents(self.settings.composed_chart_selector).first();var bar_chart_html=composed_chart.find(self.settings.bar_chart_selector).get(0);horizon.d3_bar_chart.refresh(bar_chart_html,self.settings.bar_chart_settings,self.stats);}
if(self.settings.higlight_last_point){if(last_point!==undefined&&last_point_color!==undefined){graph.vis.append('circle').attr('class','used_component').attr('cy',graph.y(last_point.y)).attr('cx',graph.x(last_point.x)).attr('r',2).style('fill',last_point_color).style('stroke',last_point_color).style('stroke-width',2);}}};self.start_loading=function(){var self=this;$(self.html_element).addClass('has-spinner');self.$spinner.show();$(self.legend_element).empty().addClass('disabled');};self.finish_loading=function(){var self=this;$(self.legend_element).removeClass('disabled');$(self.html_element).removeClass('has-spinner');self.$spinner.hide();};},init:function(selector,settings){var self=this;$(selector).each(function(){self.refresh(this,settings);});if(settings!==undefined&&settings.auto_resize){var rtime=new Date(1,1,2000,12,0,0);var timeout=false;var delta=400;$(window).resize(function(){rtime=new Date();if(timeout===false){timeout=true;setTimeout(resizeend,delta);}});var resizeend=function(){if(new Date()-rtime<delta){setTimeout(resizeend,delta);}else{timeout=false;$(selector).each(function(){self.refresh(this,settings);});}};}
self.bind_commands(selector,settings);},refresh:function(html_element,settings){var chart=new this.LineChart(this,html_element,settings);chart.refresh();},bind_commands:function(selector,settings){var select_box_selector='select[data-line-chart-command="select_box_change"]';var datepicker_selector='input[data-line-chart-command="date_picker_change"]';var self=this;var connect_forms_to_charts=function(){$(selector).each(function(){var chart=$(this);$(chart.data('form-selector')).each(function(){var form=$(this);var chart_identifier='div[data-form-selector="'+chart.data('form-selector')+'"]';if(!form.data('charts_selector')){form.data('charts_selector',chart_identifier);}else{form.data('charts_selector',form.data('charts_selector')+', '+chart_identifier);}});});};var delegate_event_and_refresh_charts=function(selector,event_name,settings){$('form').delegate(selector,event_name,function(){var invoker=$(this);var form=invoker.parents('form').first();$(form.data('charts_selector')).each(function(){self.refresh(this,settings);});});};var bind_select_box_change=function(settings){delegate_event_and_refresh_charts(select_box_selector,'change',settings);};var bind_datepicker_change=function(settings){horizon.datepickers.add(datepicker_selector);delegate_event_and_refresh_charts(datepicker_selector,'changeDate',settings);};connect_forms_to_charts();bind_select_box_change(settings);bind_datepicker_change(settings);}};horizon.addInitFunction(function(){horizon.d3_line_chart.init('div[data-chart-type="line_chart"]',{});});horizon.d3_bar_chart={BarChart:function(chart_module,html_element,settings,data){var self=this;self.chart_module=chart_module;self.html_element=html_element;self.jquery_element=$(self.html_element);self.init=function(settings,data){var self=this;self.data={};self.data.max_value=self.jquery_element.data('max-value');if(!self.max_value){self.max_value=100;}
self.data.used=self.jquery_element.data('used');self.data.average=self.jquery_element.data('average');self.data.tooltip_average=self.jquery_element.data('tooltip-average');self.data.tooltip_free=self.jquery_element.data('tooltip-free');self.data.tooltip_used=self.jquery_element.data('tooltip-used');if(data!==undefined){if(data.used!==undefined){self.data.used=data.used;}
if(data.average!==undefined){self.data.average=data.average;}
if(data.tooltip_average!==undefined){self.data.tooltip_average=data.tooltip_average;}
if(data.tooltip_free!==undefined){self.data.tooltip_free=data.tooltip_free;}
if(data.tooltip_used!==undefined){self.data.tooltip_used=data.tooltip_used;}}
if($.isArray(self.data.used)){self.data.percentage_average=0;self.data.percentage_used=Array();self.data.tooltip_used_contents=Array();for(var i=0;i<self.data.used.length;++i){if(!isNaN(self.max_value)&&!isNaN(self.data.used[i].used_instances)){var used=Math.round((self.data.used[i].used_instances/self.max_value)*100);self.data.percentage_used.push(used);self.data.tooltip_used_contents.push(self.data.used[i].tooltip_used);}else{}}}else{if(!isNaN(self.max_value)&&!isNaN(self.data.used)){self.data.percentage_used=Math.round((self.data.used/self.max_value)*100);}else{self.data.percentage_used=0;}
if(!isNaN(self.max_value)&&!isNaN(self.data.average)){self.data.percentage_average=((self.data.average/self.max_value)*100);}else{self.data.percentage_average=0;}}
self.init_settings(settings);};self.init_settings=function(settings){var self=this;self.data.settings={};self.data.settings.orientation='horizontal';self.data.settings.width=self.jquery_element.data('width');self.data.settings.height=self.jquery_element.data('height');if(settings){self.apply_settings(settings);}
if(self.jquery_element.data('settings')){var inline_settings=self.jquery_element.data('settings');self.apply_settings(inline_settings);}};self.apply_settings=function(settings){var self=this;var allowed_settings=['orientation','used_label_placement','width','height'];$.each(allowed_settings,function(index,setting_name){if(settings[setting_name]!==undefined){self.data.settings[setting_name]=settings[setting_name];}});};self.init(settings,data);self.refresh=function(){var self=this;self.jquery_element.empty();self.render();};self.render=function(){var self=this;var wrapper=new self.chart_module.Wrapper(self.chart_module,self.html_element,self.data);(new self.chart_module.UnusedComponent(wrapper)).render(self.data.tooltip_free);if(wrapper.used_multi()){for(var i=0;i<wrapper.percentage_used.length;++i){wrapper.used_multi_iterator=i;(new self.chart_module.UsedComponent(wrapper)).render(self.data.tooltip_used);wrapper.total_used_perc+=wrapper.percentage_used_value();wrapper.total_used_value_in_pixels=(wrapper.w/100)*wrapper.total_used_perc;}}else{(new self.chart_module.UsedComponent(wrapper)).render(self.data.tooltip_used);(new self.chart_module.AverageComponent(wrapper)).render(self.data.tooltip_average);}};},Wrapper:function(chart_module,html_element,data){var self=this;self.html_element=html_element;self.jquery_element=$(html_element);self.bar_html=d3.select(html_element);self.bar=self.bar_html.append('svg:svg').attr('class','legacy-bar-chart');chart_module.get_size(self.html_element);self.data=data;self.used_label_placement=data.settings.used_label_placement;if(data.settings.width!==undefined){self.w=parseFloat(data.settings.width);}else{self.w=parseFloat(self.jquery_element.width());}
if(data.settings.height!==undefined){self.h=parseFloat(data.settings.height);}else{self.h=parseFloat(self.jquery_element.height());}
self.chart_start_x=0;if(self.data.settings.orientation==='vertical'){if(self.used_label_placement==='left'){self.chart_start_x=44;}
self.chart_wrapper_w=self.w+self.chart_start_x;}else{self.chart_wrapper_w=self.w;}
self.chart_wrapper_h=self.h;self.lvl_curve=3;self.percentage_used=data.percentage_used;self.total_used_perc=0;self.total_used_value_in_pixels=0;self.used_value_in_pixels=0;self.average_value_in_pixels=0;self.percentage_average=data.percentage_average;self.tooltip_used_contents=data.tooltip_used_contents;self.border_width=1;self.used_multi=function(){return($.isArray(self.percentage_used));};self.used_multi_iterator=0;self.percentage_used_value=function(){if(self.used_multi()){return self.percentage_used[self.used_multi_iterator];}else{return self.percentage_used;}};self.tooltip_used_value=function(){if(self.used_multi()){return self.tooltip_used_contents[self.used_multi_iterator];}else{return'';}};self.horizontal_orientation=function(){return(self.data.settings.orientation==='horizontal');};},UsedComponent:function(wrapper){var self=this;self.wrapper=wrapper;if(self.wrapper.horizontal_orientation()){self.wrapper.used_value_in_pixels=(self.wrapper.w/100)*self.wrapper.percentage_used_value();self.y=0;self.x=self.wrapper.total_used_value_in_pixels;self.width=0;self.height=self.wrapper.h;self.trasition_attr='width';self.trasition_value=self.wrapper.used_value_in_pixels;}else{self.wrapper.used_value_in_pixels=(self.wrapper.h/100)*self.wrapper.percentage_used_value();self.y=self.wrapper.h;self.x=self.wrapper.chart_start_x;self.width=self.wrapper.w-self.wrapper.border_width;self.height=self.wrapper.used_value_in_pixels;self.trasition_attr='y';self.trasition_value=self.wrapper.h-self.wrapper.used_value_in_pixels;}
self.render=function(tooltip){var elem=self.wrapper.bar.append('rect').attr('class','used_component legacy-bar-chart-section').attr('y',self.y).attr('x',self.x).attr('width',self.width).attr('height',self.height).attr('d',self.wrapper.percentage_used_value()).transition().duration(500).attr(self.trasition_attr,self.trasition_value);$(elem).tooltip({placement:self.wrapper.data.settings.orientation==='horizontal'?'bottom':'left',container:'body',title:$.isArray(self.wrapper.data.percentage_used)?self.wrapper.tooltip_used_value():tooltip});if(self.wrapper.used_label_placement==='left'){var label_placement_y=self.wrapper.h-self.wrapper.used_value_in_pixels;if(label_placement_y<=6){label_placement_y=6;}else if(label_placement_y>=(self.wrapper.h-6)){label_placement_y=self.wrapper.h-6;}
self.wrapper.bar.append('text').attr('class','used_component_label').text(self.wrapper.percentage_used_value()+'%').attr('y',label_placement_y).attr('x',0).attr('dominant-baseline','middle').transition().duration(500).attr('x',function(){if(self.wrapper.percentage_used_value()>99){return 0;}
else if(self.wrapper.percentage_used_value()>9){return 4;}
else{return 8;}});var poly=[{'x':self.wrapper.chart_start_x-8,'y':label_placement_y},{'x':self.wrapper.chart_start_x-3,'y':label_placement_y+2},{'x':self.wrapper.chart_start_x-3,'y':label_placement_y-2}];self.wrapper.bar.selectAll('polygon').data([poly]).enter().append('polygon').attr('class','used_component_label_arrow').attr('points',function(d){return d.map(function(d){return[d.x,d.y].join(',');}).join(' ');}).attr('stroke-width',2);}};},AverageComponent:function(wrapper){var self=this;self.wrapper=wrapper;if(wrapper.horizontal_orientation()){self.wrapper.average_value_in_pixels=(self.wrapper.w/100)*self.wrapper.percentage_average;self.y=1;self.x=self.wrapper.average_value_in_pixels;self.width=0;self.height=self.wrapper.h;}else{self.wrapper.average_value_in_pixels=(self.wrapper.h/100)*(100-self.wrapper.percentage_average);self.y=self.wrapper.average_value_in_pixels;self.x=self.wrapper.chart_start_x;self.width=self.wrapper.w-self.wrapper.border_width;self.height=0;}
self.render=function(tooltip){if(self.wrapper.percentage_average>0){var elem=self.wrapper.bar.append('line').attr('class','average_component').attr('y1',self.y).attr('x1',self.x).attr('y2',self.y+self.height).attr('x2',self.x+self.width);$(elem).tooltip({placement:self.wrapper.data.settings.orientation==='horizontal'?'top':'right',container:'body',title:tooltip});}};},UnusedComponent:function(wrapper){var self=this;self.wrapper=wrapper;self.render=function(tooltip){var elem=self.wrapper.bar.append('rect').attr('class','unused_component legacy-bar-chart-section').attr('y',0).attr('x',self.wrapper.chart_start_x).attr('width',self.wrapper.w).attr('height',self.wrapper.h).attr('rx',self.wrapper.lvl_curve).attr('ry',self.wrapper.lvl_curve);$(elem).tooltip({placement:self.wrapper.data.settings.orientation==='horizontal'?'bottom':'left',container:'body',title:tooltip});};},init:function(selector,settings,data){var self=this;self.bars=$(selector);self.bars.each(function(){self.refresh(this,settings,data);});},refresh:function(html_element,settings,data){var chart=new this.BarChart(this,html_element,settings,data);chart.refresh();},get_size:function(html_element){var jquery_element=$(html_element);jquery_element.css('height','');jquery_element.css('width','');var svg=jquery_element.find('svg');svg.hide();var width=jquery_element.width();var height=jquery_element.height();jquery_element.css('height',height);jquery_element.css('width',width);svg.show();svg.css('height',height);svg.css('width',width);}};horizon.addInitFunction(function(){horizon.d3_bar_chart.init('div[data-chart-type="bar_chart"]',{},{});});$(document).ready(function(){'use strict';var $sidenav=$('#sidebar');var $mask=$(document.createElement('div')).prop('id','sidebar-mask').appendTo($('#content_body'));$(document).on('click','#sidebar-toggle',function(){$mask.toggleClass('on-screen');$sidenav.toggleClass('on-screen');});});horizon.extensible_header={populate:function(){var $path=$(location).attr('pathname');var $url=$(location).attr('href');$url=$url.replace($path,$(window).attr('WEBROOT')+'header/');horizon.ajax.queue({url:$url,success:function(data){$('#extensible-header').replaceWith($(data));selected=horizon.cookies.get('selected_header');if(selected&&$('#header-list #'+selected).length){$old_primary=$('#primary-extensible-header > a');$new_primary=$('#header-list #'+selected);$old_primary.insertAfter($new_primary);$new_primary.first().appendTo($('#primary-extensible-header'));}
function swap(){$old_primary=$('#primary-extensible-header > a');$new_primary=$(this);horizon.cookies.put("selected_header",$new_primary.attr('id'),{path:'/'});$old_primary.insertAfter($new_primary);$new_primary.appendTo($('#primary-extensible-header'));$new_primary.off('click',swap);$old_primary.on('click',swap);}
$('#header-list .extensible-header-section').on('click',swap);},error:function(jqXHR){if(jqXHR.status!==401&&jqXHR.status!==403){if(jqXHR.status!==0){horizon.alert("info",gettext("Failed to populate extensible header."));}}}});return true;}};horizon.addInitFunction(function(){horizon.extensible_header.populate();});horizon.instances={user_volume_size:false,workflow_init:function(){horizon.lists.generate_html("network");}};horizon.addInitFunction(horizon.instances.init=function(){var $document=$(document);$document.on('submit','#tail_length',function(evt){horizon.lists.get_console_log(true,true);evt.preventDefault();});function update_launch_source_displayed_fields(field){var $this=$(field);var base_type=$this.val();var elements_list;$this.closest(".form-group").nextAll().hide();if(base_type!="image_id"){$("#id_image_id").val('');$('#id_image_id').change();}
switch(base_type){case"image_id":elements_list="#id_image_id";break;case"instance_snapshot_id":elements_list="#id_instance_snapshot_id";break;case"volume_id":elements_list="#id_volume_id, #id_device_name, #id_vol_delete_on_instance_delete";break;case"volume_image_id":elements_list="#id_image_id, #id_volume_size, #id_device_name, #id_vol_delete_on_instance_delete";break;case"volume_snapshot_id":elements_list="#id_volume_snapshot_id, #id_device_name, #id_vol_delete_on_instance_delete";break;}
var elements_list_group=$(elements_list).closest(".form-group");elements_list_group.addClass("required");$("#id_device_name").closest(".form-group").removeClass("required");elements_list_group.show();}
$document.on('change','.workflow #id_source_type',function(){update_launch_source_displayed_fields(this);});$('.workflow #id_source_type').change();horizon.modals.addModalInitFunction(function(modal){$(modal).find("#id_source_type").change();});function update_device_size(source_type){var volume_size;var selected_flavor=horizon.Quota.getSelectedFlavor();if(selected_flavor){volume_size=selected_flavor.disk;}
var size_field=$("#id_volume_size");if(source_type==='image'){var image=horizon.Quota.getSelectedImageOrSnapshot(source_type);if(image!==undefined&&image.min_disk>volume_size){volume_size=image.min_disk;}
if(image!==undefined&&image.size>volume_size){volume_size=image.size;}}
if(horizon.instances.user_volume_size){var user_value=size_field.val();if(user_value>volume_size){volume_size=user_value;}}
if(volume_size<1){volume_size=1;}
size_field.val(volume_size);}
$document.on('change','.workflow #id_flavor',function(){update_device_size();});$document.on('change','.workflow #id_image_id',function(){update_device_size('image');});$document.on('input','.workflow #id_volume_size',function(){horizon.instances.user_volume_size=true;$document.off('input','.workflow #id_volume_size');});horizon.instances.decrypt_password=function(encrypted_password,private_key){var crypt=new JSEncrypt();crypt.setKey(private_key);return crypt.decrypt(encrypted_password);};$document.on('change','#id_private_key_file',function(evt){var file=evt.target.files[0];var reader=new FileReader();if(file){reader.onloadend=function(event){$("#id_private_key").val(event.target.result);};reader.onerror=function(){horizon.clearErrorMessages();horizon.toast.add('error',gettext('Could not read the file'));};reader.readAsText(file);}
else{horizon.clearErrorMessages();horizon.toast.add('error',gettext('Could not decrypt the password'));}});$document.on('show.bs.modal','#password_instance_modal',function(){$("#id_decrypted_password").css({"font-family":"monospace","cursor":"text"});$("#id_encrypted_password").css("cursor","text");$("#id_keypair_name").css("cursor","text");});$document.on('click','#decryptpassword_button',function(evt){var encrypted_password=$("#id_encrypted_password").val();var private_key=$('#id_private_key').val();if(!private_key){evt.preventDefault();$(this).closest('.modal').modal('hide');}
else{if(private_key.length>0){evt.preventDefault();var decrypted_password=horizon.instances.decrypt_password(encrypted_password,private_key);if(decrypted_password===false||decrypted_password===null){horizon.clearErrorMessages();horizon.toast.add('error',gettext('Could not decrypt the password'));}
else{$("#id_decrypted_password").val(decrypted_password);$("#decryptpassword_button").hide();}}}});});horizon.Quota={is_flavor_quota:false,user_value_progress_bars:[],auto_value_progress_bars:[],flavor_progress_bars:[],user_value_form_inputs:[],selected_flavor:null,flavors:[],init:function(){this.user_value_progress_bars=$('div[data-progress-indicator-for]');this.auto_value_progress_bars=$('div[data-progress-indicator-step-by]');this.user_value_form_inputs=$($.map(this.user_value_progress_bars,function(elm){return('#'+$(elm).attr('data-progress-indicator-for'));}));this._attachInputHandlers();},belowMinimum:function(minimum,actual){return parseInt(minimum,10)>parseInt(actual,10);},imageFitsFlavor:function(image,flavor){if(image===undefined){return true;}else{var overDisk=horizon.Quota.belowMinimum(image.min_disk,flavor.disk);var overRAM=horizon.Quota.belowMinimum(image.min_ram,flavor.ram);return!(overDisk||overRAM);}},noteDisabledFlavors:function(allDisabled){if($('#some_flavors_disabled').length===0){var message=allDisabled?horizon.Quota.allFlavorsDisabledMessage:horizon.Quota.disabledFlavorMessage;$('#id_flavor').parent().append("<span id='some_flavors_disabled'>"+
message+'</span>');}},resetFlavors:function(){if($('#some_flavors_disabled')){$('#some_flavors_disabled').remove();$('#id_flavor option').each(function(){$(this).attr('disabled',false);});}},findImageById:function(id){var _image;$.each(horizon.Quota.images,function(i,image){if(image.id===id){_image=image;}});return _image;},getSelectedImageOrSnapshot:function(source_type){var selected=$('#id_'+source_type+'_id option:selected').val();return horizon.Quota.findImageById(selected);},disableFlavorsForImage:function(source_type){var source=horizon.Quota.getSelectedImageOrSnapshot(source_type);var to_disable=[];horizon.Quota.resetFlavors();$.each(horizon.Quota.flavors,function(i,flavor){if(!horizon.Quota.imageFitsFlavor(source,flavor)){to_disable.push(flavor.name);}});var flavors=$('#id_flavor option');$.each(to_disable,function(i,flavor_name){flavors.each(function(){if($(this).text()===flavor_name){$(this).attr('disabled','disabled');}});});if(to_disable.length>0){var selected=($('#id_flavor option').filter(':selected'))[0];if(to_disable.length<flavors.length&&selected.disabled){flavors.each(function(index,element){if(!element.disabled){$('#id_flavor').val(element.value);$('#id_flavor').change();return false;}});}
horizon.Quota.noteDisabledFlavors(to_disable.length===flavors.length);}},initWithImages:function(images,disabledMessage,allDisabledMessage){this.images=images;this.disabledFlavorMessage=disabledMessage;this.allFlavorsDisabledMessage=allDisabledMessage;horizon.Quota.disableFlavorsForImage('image');},initWithFlavors:function(flavors){this.is_flavor_quota=true;this.flavor_progress_bars=$('div[data-progress-indicator-flavor]');this.flavors=flavors;this.init();this.showFlavorDetails();this.updateFlavorUsage();},getSelectedFlavor:function(){if(this.is_flavor_quota){this.selected_flavor=$.grep(this.flavors,function(flavor){return flavor.id===$("#id_flavor").children(":selected").val();})[0];this.old_flavor=$.grep(this.flavors,function(flavor){return flavor.name===$('#id_old_flavor_name').val();})[0];}else{this.old_flavor=null;this.selected_flavor=null;}
return this.selected_flavor;},showFlavorDetails:function(){this.getSelectedFlavor();if(this.selected_flavor){var vcpus=horizon.Quota.humanizeNumbers(this.selected_flavor.vcpus);var disk=horizon.Quota.humanizeNumbers(this.selected_flavor.disk);var ephemeral=horizon.Quota.humanizeNumbers(this.selected_flavor["OS-FLV-EXT-DATA:ephemeral"]);var disk_total=this.selected_flavor.disk+this.selected_flavor["OS-FLV-EXT-DATA:ephemeral"];var disk_total_display=horizon.Quota.humanizeNumbers(disk_total);var ram=horizon.Quota.humanizeNumbers(this.selected_flavor.ram);$("#flavor_name").text(this.selected_flavor.name);$("#flavor_vcpus").text(vcpus);$("#flavor_disk").text(disk);$("#flavor_ephemeral").text(ephemeral);$("#flavor_disk_total").text(disk_total_display);$("#flavor_ram").text(ram);}
else{$("#flavor_name").html('');$("#flavor_vcpus").text('');$("#flavor_disk").text('');$("#flavor_ephemeral").text('');$("#flavor_disk_total").text('');$("#flavor_ram").text('');}},humanizeNumbers:function(number){return number.toString().replace(/\d+(?:\.\d+)?/g,function(match){var lang=horizon.cookies.get('horizon_language');try{return new Intl.NumberFormat(lang).format(match);}catch(e){return match;}});},updateFlavorUsage:function(){if(!this.is_flavor_quota){return;}
var scope=this;var instance_count=(parseInt($("#id_count").val(),10)||1);var update_amount=0;this.getSelectedFlavor();$(this.flavor_progress_bars).each(function(index,element){var element_id=$(element).attr('id');var progress_stat=element_id.match(/^quota_(.+)/)[1];var sourceType=$("#id_source_type").val();var createVolume=(sourceType==="volume_snapshot_id"||sourceType==="volume_image_id");if(!progress_stat){return;}else if(progress_stat==='resize_instance'){update_amount=0;}else if(progress_stat==='instances'){update_amount=instance_count;}else if(progress_stat==='vcpus'&&scope.old_flavor&&scope.selected_flavor){var old_vcpus=scope.old_flavor.vcpus;var new_vcpus=scope.selected_flavor.vcpus;update_amount=(new_vcpus-old_vcpus<0)?0:(new_vcpus-old_vcpus);}else if(progress_stat==='ram'&&scope.old_flavor&&scope.selected_flavor){var old_ram=scope.old_flavor.ram;var new_ram=scope.selected_flavor.ram;update_amount=(new_ram-old_ram<0)?0:(new_ram-old_ram);}else if(progress_stat==="volume"){update_amount=createVolume?instance_count:0;}else if(progress_stat==="volume_storage"){var volumeSize=0;if(sourceType==="volume_snapshot_id"){var volumeSizeMatches=$("#id_volume_snapshot_id").children(":selected").html().match(/\s(\d+)\s/g);volumeSize=horizon.Quota.getSelectedFlavor().disk;if(volumeSizeMatches){volumeSize=Math.max(volumeSize,volumeSizeMatches[volumeSizeMatches.length-1]);}}else if(sourceType==="volume_image_id"){volumeSize=$("#id_volume_size").val();}
update_amount=volumeSize*instance_count;}else if(scope.selected_flavor){update_amount=(scope.selected_flavor[progress_stat]*instance_count);}
scope.updateUsageFor(element,update_amount);});},updateUsageFor:function(progress_element,increment_by){var $progress_element=$(progress_element);var quota_limit=parseInt($progress_element.attr('data-quota-limit'),10);var percentage_to_update=((increment_by/quota_limit)*100);this.update($progress_element.attr('id'),percentage_to_update);},update:function(element,value){var bars=$('#'+element).find('.progress-bar');var used_val=+$(bars[0]).attr('aria-valuenow');var total=used_val+value;if(total>100){value=100-used_val;}
var percent_str=value+'%';var $bar=$(bars[1]);$bar.css('width',percent_str).attr('aria-valuenow',value).find('.sr-only').html(percent_str);if(total>99){$bar.removeClass('progress-bar-warning').addClass('progress-bar-danger');}else{$bar.removeClass('progress-bar-danger');total>89?$bar.addClass('progress-bar-warning'):$bar.removeClass('progress-bar-warning');}},_attachInputHandlers:function(){var scope=this;if(this.is_flavor_quota){var eventCallback=function(){scope.showFlavorDetails();scope.updateFlavorUsage();};var imageChangeCallback=function(){scope.disableFlavorsForImage('image');};var snapshotChangeCallback=function(){scope.disableFlavorsForImage('instance_snapshot');};var volumeChangeCallback=function(){scope.updateFlavorUsage();};$('#id_flavor').on('keyup change',eventCallback);$('#id_count').on('input',eventCallback);$('#id_image_id').on('change',imageChangeCallback);$('#id_instance_snapshot_id').on('change',snapshotChangeCallback);$('#id_source_type').on('change',volumeChangeCallback);$('#id_volume_snapshot_id').on('change',volumeChangeCallback);$('#id_image_id').on('change',volumeChangeCallback);$('#id_volume_size').on('keyup change',volumeChangeCallback);}
$(this.user_value_form_inputs).each(function(index,element){$(element).on('input',function(){var $this=$(this);var $progress_element=$('div[data-progress-indicator-for='+$this.attr('id')+']');var integers_in_input=$this.val().match(/\d+/g);var user_integer;if(integers_in_input===null){user_integer=0;}else if(integers_in_input.length>1){user_integer=integers_in_input.join('');}else if(integers_in_input.length===1){user_integer=integers_in_input[0];}
var progress_amount=parseInt(user_integer,10);scope.updateUsageFor($progress_element,progress_amount);});});}};horizon.metering={init_create_usage_report_form:function(){horizon.datepickers.add('input[data-date-picker]');horizon.metering.add_change_event_to_period_dropdown();horizon.metering.show_or_hide_date_fields();},init_stats_page:function(){if(typeof horizon.d3_line_chart!=='undefined'){horizon.d3_line_chart.init("div[data-chart-type='line_chart']",{'auto_resize':true});}
horizon.metering.add_change_event_to_period_dropdown();horizon.metering.show_or_hide_date_fields();},show_or_hide_date_fields:function(){$("#date_from .controls input, #date_to .controls input").val('');if($("#id_period").find("option:selected").val()==="other"){$("#id_date_from, #id_date_to").parent().parent().show();return true;}else{$("#id_date_from, #id_date_to").parent().parent().hide();return false;}},add_change_event_to_period_dropdown:function(){$("#id_period").change(function(evt){if(horizon.metering.show_or_hide_date_fields()){evt.stopPropagation();}});}};horizon.networktopologycommon={init:function(){horizon.networktopologyloader.init();horizon.networktopologymessager.init();}};horizon.networktopologyloader={model:null,reload_duration:10000,update_timer:null,init:function(){var self=this;if($('#networktopology').length===0){return;}
self.update();},update:function(){var self=this;angular.element.getJSON(angular.element('#networktopology').data('networktopology')+'?'+angular.element.now(),function(data){self.model=data;$('#networktopology').trigger('change');self.update_timer=setTimeout(function(){self.update();},self.reload_duration);});},stop_update:function(){var self=this;clearTimeout(self.update_timer);},setup_loader:function($container){return horizon.loader.inline(gettext('Loading')).hide().prependTo($container);}};horizon.networktopologymessager={previous_message:null,post_messages:'#topologyMessages',messaging_functions:[],delete_data:{},init:function(){var self=this;angular.element(window).on('message',function(e){var message=angular.element.parseJSON(e.originalEvent.data);if(self.previous_message!==message.message){horizon.toast.add(message.type,message.message);self.previous_message=message.message;self.delete_post_message(message.iframe_id);self.messageNotify(message);horizon.networktopologyloader.update();setTimeout(function(){self.previous_message=null;self.delete_data={};},self.reload_duration);}});},addMessageHandler:function(fn,fnObj){var self=this;self.messaging_functions.push({obj:fnObj,func:fn});},messageNotify:function(message){var self=this;for(var i=0;i<self.messaging_functions.length;i+=1){func=self.messaging_functions[i].func;fnObj=self.messaging_functions[i].obj;func.call(fnObj,message);}},post_message:function(id,url,message,type,action,data){var self=this;if(action=="delete"){self.delete_data.device_id=id;self.delete_data.device_type=type;self.delete_data.device_data=data;}
horizon.networktopologyloader.stop_update();var iframeID='ifr_'+id;var iframe=$('<iframe width="500" height="300" />').attr('id',iframeID).attr('src',url).appendTo('#topologyMessages');iframe.on('load',function(){angular.element(this).get(0).contentWindow.postMessage(JSON.stringify(message,null,2),'*');});},delete_post_message:function(id){angular.element('#'+id).remove();}};horizon.flat_network_topology={model:null,fa_globe_glyph:'\uf0ac',fa_globe_glyph_width:15,svg:'#topology_canvas',svg_container:'#flatTopologyCanvasContainer',network_tmpl:{small:'#topology_template > .network_container_small',normal:'#topology_template > .network_container_normal'},router_tmpl:{small:'#topology_template > .router_small',normal:'#topology_template > .router_normal'},instance_tmpl:{small:'#topology_template > .instance_small',normal:'#topology_template > .instance_normal'},balloon_tmpl:null,balloon_device_tmpl:null,balloon_port_tmpl:null,network_index:{},balloon_id:null,reload_duration:10000,draw_mode:'normal',network_height:0,previous_message:null,element_properties:{normal:{network_width:270,network_min_height:500,top_margin:80,default_height:50,margin:20,device_x:98.5,device_width:90,port_margin:16,port_height:6,port_width:82,port_text_margin:{x:6,y:-4},texts_bg_y:32,type_y:46,balloon_margin:{x:12,y:-12}},small:{network_width:100,network_min_height:400,top_margin:50,default_height:20,margin:30,device_x:47.5,device_width:20,port_margin:5,port_height:3,port_width:32.5,port_text_margin:{x:0,y:0},texts_bg_y:0,type_y:0,balloon_margin:{x:12,y:-30}},cidr_margin:5,device_name_max_size:9,device_name_suffix:'..'},init:function(){var self=this;self.$container=$(self.svg_container);self.$loading_template=horizon.networktopologyloader.setup_loader($(self.$container));if($('#networktopology').length===0){return;}
self.color=d3.scale.category10();self.balloon_tmpl=Hogan.compile($('#balloon_container').html());self.balloon_device_tmpl=Hogan.compile($('#balloon_device').html());self.balloon_port_tmpl=Hogan.compile($('#balloon_port').html());$(document).on('click','a.closeTopologyBalloon',function(e){e.preventDefault();self.delete_balloon();}).on('click','.topologyBalloon',function(e){e.stopPropagation();}).on('click','a.vnc_window',function(e){e.preventDefault();e.stopImmediatePropagation();var vnc_window=window.open($(this).attr('href'),vnc_window,'width=760,height=560');self.delete_balloon();}).click(function(){self.delete_balloon();});$('.toggle-view > .btn').click(function(){self.draw_mode=$(this).data('value');$('g.network').remove();horizon.cookies.put('ntp_draw_mode',self.draw_mode);self.data_convert();});self.$loading_template.show();$('#networktopology').on('change',function(){self.load_network_info();});},load_network_info:function(){var self=this;self.model=horizon.networktopologyloader.model;self.data_convert();},select_draw_mode:function(){var self=this;var draw_mode='normal';try{draw_mode=horizon.cookies.get('ntp_draw_mode');}
catch(e){}
if(draw_mode&&(draw_mode==='normal'||draw_mode==='small')){self.draw_mode=draw_mode;}else{if(self.model.networks.length*self.element_properties.normal.network_width>$('#topologyCanvas').width()){self.draw_mode='small';}else{self.draw_mode='normal';}
horizon.cookies.put('ntp_draw_mode',self.draw_mode);}
$('.toggle-view > .btn').each(function(){var $this=$(this);if($this.data('value')===self.draw_mode){$this.addClass('active');}else{$this.removeClass('active');}});},data_convert:function(){var self=this;var model=self.model;$.each(model.networks,function(index,network){self.network_index[network.id]=index;});self.select_draw_mode();var element_properties=self.element_properties[self.draw_mode];self.network_height=element_properties.top_margin;$.each([{model:model.routers,type:'router'},{model:model.servers,type:'instance'}],function(index,devices){var type=devices.type;var model=devices.model;$.each(model,function(index,device){device.type=type;device.ports=self.select_port(device.id);var hasports=device.ports.length>0;device.parent_network=(hasports)?self.select_main_port(device.ports).network_id:self.model.networks[0].id;var height=element_properties.port_margin*(device.ports.length-1);device.height=(self.draw_mode==='normal'&&height>element_properties.default_height)?height:element_properties.default_height;device.pos_y=self.network_height;device.port_height=(self.draw_mode==='small'&&height>device.height)?1:element_properties.port_height;device.port_margin=(self.draw_mode==='small'&&height>device.height)?device.height/device.ports.length:element_properties.port_margin;self.network_height+=device.height+element_properties.margin;});});$.each(model.networks,function(index,network){network.devices=[];$.each([model.routers,model.servers],function(index,devices){$.each(devices,function(index,device){if(network.id===device.parent_network){network.devices.push(device);}});});});self.network_height+=element_properties.top_margin;self.network_height=(self.network_height>element_properties.network_min_height)?self.network_height:element_properties.network_min_height;self.draw_topology();self.$loading_template.hide();},draw_topology:function(){var self=this;$(self.svg_container).removeClass('noinfo');if(self.model.networks.length<=0){$('g.network').remove();$(self.svg_container).addClass('noinfo');return;}
var svg=d3.select(self.svg);var element_properties=self.element_properties[self.draw_mode];svg.attr('width',self.model.networks.length*element_properties.network_width).attr('height',self.network_height);var network=svg.selectAll('g.network').data(self.model.networks);network.enter().append('g').attr('class','network').each(function(d){this.appendChild(d3.select(self.network_tmpl[self.draw_mode]).node().cloneNode(true));var $this=d3.select(this).select('.network-rect');if(d.url){$this.on('mouseover',function(){$this.transition().style('fill',function(){return d3.rgb(self.get_network_color(d.id)).brighter(0.5);});}).on('mouseout',function(){$this.transition().style('fill',function(){return self.get_network_color(d.id);});}).on('click',function(){window.location.href=d.url;});}else{$this.classed('nourl',true);}});network.attr('id',function(d){return'id_'+d.id;}).attr('transform',function(d,i){return'translate('+element_properties.network_width*i+','+0+')';}).select('.network-rect').attr('height',function(){return self.network_height;}).style('fill',function(d){return self.get_network_color(d.id);});network.select('.network-name').attr('x',function(){return self.network_height/2;}).text(function(d){return d.name;});network.select('.network-cidr').attr('x',function(d){var padding=isExternalNetwork(d)?self.fa_globe_glyph_width:0;return self.network_height-self.element_properties.cidr_margin-
padding;}).text(function(d){var cidr=$.map(d.subnets,function(n){return n.cidr;});return cidr.join(', ');});function isExternalNetwork(d){return d['router:external'];}
network.select('.network-type').text(function(d){return isExternalNetwork(d)?self.fa_globe_glyph:'';}).attr('x',function(){return self.network_height-self.element_properties.cidr_margin;});$('[data-toggle="tooltip"]').tooltip({container:'body'});network.exit().remove();var device=network.selectAll('g.device').data(function(d){return d.devices;});var device_enter=device.enter().append("g").attr('class','device').each(function(d){var device_template=self[d.type+'_tmpl'][self.draw_mode];this.appendChild(d3.select(device_template).node().cloneNode(true));});device_enter.on('mouseenter',function(d){var $this=$(this);self.show_balloon(d,$this);}).on('click',function(){d3.event.stopPropagation();});device.attr('id',function(d){return'id_'+d.id;}).attr('transform',function(d){return'translate('+element_properties.device_x+','+d.pos_y+')';}).select('.frame').attr('height',function(d){return d.height;});device.select('.texts_bg').attr('y',function(d){return element_properties.texts_bg_y+d.height-element_properties.default_height;});device.select('.type').attr('y',function(d){return element_properties.type_y+d.height-element_properties.default_height;});device.select('.name').text(function(d){return self.string_truncate(d.name);});device.each(function(d){if(d.status==='BUILD'){d3.select(this).classed('loading',true);}else if(d.task==='deleting'){d3.select(this).classed('loading',true);if('bl_'+d.id===self.balloon_id){self.delete_balloon();}}else{d3.select(this).classed('loading',false);if('bl_'+d.id===self.balloon_id){var $this=$(this);self.show_balloon(d,$this);}}});device.exit().each(function(d){if('bl_'+d.id===self.balloon_id){self.delete_balloon();}}).remove();var port=device.select('g.ports').selectAll('g.port').data(function(d){return d.ports;});var port_enter=port.enter().append('g').attr('class','port').attr('id',function(d){return'id_'+d.id;});port_enter.append('line').attr('class','port_line');port_enter.append('text').attr('class','port_text');device.select('g.ports').each(function(d){this._portdata={};this._portdata.ports_length=d.ports.length;this._portdata.parent_network=d.parent_network;this._portdata.device_height=d.height;this._portdata.port_height=d.port_height;this._portdata.port_margin=d.port_margin;this._portdata.left=0;this._portdata.right=0;$(this).mouseenter(function(e){e.stopPropagation();});});port.each(function(d){var index_diff=self.get_network_index(this.parentNode._portdata.parent_network)-
self.get_network_index(d.network_id);this._index_diff=index_diff=(index_diff>=0)?++index_diff:index_diff;this._direction=(this._index_diff<0)?'right':'left';this._index=this.parentNode._portdata[this._direction]++;});port.attr('transform',function(){var x=(this._direction==='left')?0:element_properties.device_width;var ports_length=this.parentNode._portdata[this._direction];var distance=this.parentNode._portdata.port_margin;var y=(this.parentNode._portdata.device_height-
(ports_length-1)*distance)/2+this._index*distance;return'translate('+x+','+y+')';});port.select('.port_line').attr('stroke-width',function(){return this.parentNode.parentNode._portdata.port_height;}).attr('stroke',function(d){return self.get_network_color(d.network_id);}).attr('x1',0).attr('y1',0).attr('y2',0).attr('x2',function(){var parent=this.parentNode;var width=(Math.abs(parent._index_diff)-1)*element_properties.network_width+
element_properties.port_width;return(parent._direction==='left')?-1*width:width;});port.select('.port_text').attr('x',function(){var parent=this.parentNode;if(parent._direction==='left'){d3.select(this).classed('left',true);return element_properties.port_text_margin.x*-1;}else{d3.select(this).classed('left',false);return element_properties.port_text_margin.x;}}).attr('y',function(){return element_properties.port_text_margin.y;}).text(function(d){var ip_label=[];$.each(d.fixed_ips,function(){ip_label.push(this.ip_address);});return ip_label.join(',');});port.exit().remove();},get_network_color:function(network_id){return this.color(this.get_network_index(network_id));},get_network_index:function(network_id){return this.network_index[network_id];},select_port:function(device_id){return $.map(this.model.ports,function(port){if(port.device_id===device_id){return port;}});},select_main_port:function(ports){var _self=this;var main_port_index=0;var MAX_INT=4294967295;var min_port_length=MAX_INT;$.each(ports,function(index,port){var port_length=_self.sum_port_length(port.network_id,ports);if(port_length<min_port_length){min_port_length=port_length;main_port_index=index;}});return ports[main_port_index];},sum_port_length:function(network_id,ports){var self=this;var sum_port_length=0;var base_index=self.get_network_index(network_id);$.each(ports,function(index,port){sum_port_length+=base_index-self.get_network_index(port.network_id);});return sum_port_length;},string_truncate:function(string){var self=this;var str=string;var max_size=self.element_properties.device_name_max_size;var suffix=self.element_properties.device_name_suffix;var bytes=0;for(var i=0;i<str.length;i++){bytes+=str.charCodeAt(i)<=255?1:2;if(bytes>max_size){str=str.substr(0,i)+suffix;break;}}
return str;},delete_device:function(device_type,device_id){var message={id:device_id};var target=device_type==='instance'?'instance?id='+device_id:device_type;horizon.networktopologymessager.post_message(device_id,target,message,device_type,'delete',data={});},delete_port:function(router_id,port_id,network_id){var message={id:port_id};var data={router_id:router_id,network_id:network_id};horizon.networktopologymessager.post_message(port_id,'router/'+router_id+'/',message,'port','delete',data);},show_balloon:function(d,element){var self=this;var element_properties=self.element_properties[self.draw_mode];if(self.balloon_id){self.delete_balloon();}
var balloon_tmpl=self.balloon_tmpl;var device_tmpl=self.balloon_device_tmpl;var port_tmpl=self.balloon_port_tmpl;var balloon_id='bl_'+d.id;var ports=[];$.each(d.ports,function(i,port){var object={};object.id=port.id;object.router_id=port.device_id;object.url=port.url;object.port_status=port.status;object.port_status_class=(port.original_status==="ACTIVE")?'active':'down';var ip_address='';try{ip_address=port.fixed_ips[0].ip_address;}catch(e){ip_address=gettext('None');}
var device_owner='';try{device_owner=port.device_owner.replace('network:','');}catch(e){device_owner=gettext('None');}
var network_id='';try{network_id=port.network_id;}catch(e){network_id=gettext('None');}
object.network_id=network_id;object.ip_address=ip_address;object.device_owner=device_owner;object.is_interface=(device_owner==='router_interface'||device_owner==='router_gateway'||device_owner==='ha_router_replicated_interface');ports.push(object);});var html;var html_data={balloon_id:balloon_id,id:d.id,url:d.url,name:d.name,type:d.type,delete_label:gettext("Delete"),status:d.status,status_class:(d.original_status==="ACTIVE")?'active':'down',status_label:gettext("STATUS"),id_label:gettext("ID"),interfaces_label:gettext("Interfaces"),delete_interface_label:gettext("Delete Interface"),open_console_label:gettext("Open Console"),view_details_label:gettext("View Details")};if(d.type==='router'){html_data.delete_label=gettext("Delete Router");html_data.view_details_label=gettext("View Router Details");html_data.port=ports;html_data.add_interface_url=d.url+'addinterface';html_data.add_interface_label=gettext("Add Interface");html=balloon_tmpl.render(html_data,{table1:device_tmpl,table2:(ports.length>0)?port_tmpl:null});}else if(d.type==='instance'){html_data.delete_label=gettext("Delete Instance");html_data.view_details_label=gettext("View Instance Details");html_data.console_id=d.id;html_data.console=d.console;html=balloon_tmpl.render(html_data,{table1:device_tmpl});}else{return;}
$(self.svg_container).append(html);var device_position=element.find('.frame');var sidebar_width=$("#sidebar").width();var navbar_height=$(".navbar").height();var breadcrumb_height=$(".breadcrumb").outerHeight(true);var pageheader_height=$(".page-header").outerHeight(true);var launchbuttons_height=$(".launchButtons").height();var height_offset=navbar_height+breadcrumb_height+pageheader_height+launchbuttons_height;var device_offset=device_position.offset();var x=Math.round(device_offset.left+element_properties.device_width+element_properties.balloon_margin.x-sidebar_width);var y=Math.round(device_offset.top+element_properties.balloon_margin.y-height_offset+15);var $balloon=$('#'+balloon_id);$balloon.css({'left':'0px','top':y+'px'});var balloon_width=$balloon.outerWidth();var left_x=device_offset.left-balloon_width-element_properties.balloon_margin.x-sidebar_width;var right_x=x+balloon_width+element_properties.balloon_margin.x+sidebar_width;if(left_x>0&&right_x>$(window).outerWidth()){x=left_x;$balloon.addClass('leftPosition');}
$balloon.css({'left':x+'px'}).show();$balloon.find('.delete-device').click(function(){var $this=$(this);var delete_modal=horizon.datatables.confirm($this);delete_modal.find('.btn.btn-danger').click(function(){$this.prop('disabled',true);d3.select('#id_'+$this.data('device-id')).classed('loading',true);self.delete_device($this.data('type'),$this.data('device-id'));horizon.modals.spinner.modal('hide');});});$balloon.find('.delete-port').click(function(){var $this=$(this);var delete_modal=horizon.datatables.confirm($this);delete_modal.find('.btn.btn-danger').click(function(){$this.prop('disabled',true);self.delete_port($this.data('router-id'),$this.data('port-id'),$this.data('network-id'));horizon.modals.spinner.modal('hide');});});self.balloon_id=balloon_id;},delete_balloon:function(){var self=this;if(self.balloon_id){$('#'+self.balloon_id).remove();self.balloon_id=null;}}};function Network(data){for(var key in data){if({}.hasOwnProperty.call(data,key)){this[key]=data[key];}}
this.iconType='text';this.icon='\uf0c2';this.collapsed=false;this.type='network';this.instances=0;}
function ExternalNetwork(data){for(var key in data){if({}.hasOwnProperty.call(data,key)){this[key]=data[key];}}
this.collapsed=false;this.iconType='text';this.icon='\uf0ac';this.instances=0;}
function Router(data){for(var key in data){if({}.hasOwnProperty.call(data,key)){this[key]=data[key];}}
this.iconType='path';this.svg='router';this.networks=[];this.ports=[];this.type='router';}
function Server(data){for(var key in data){if({}.hasOwnProperty.call(data,key)){this[key]=data[key];}}
this.iconType='text';this.icon='\uf108';this.networks=[];this.type='instance';this.ip_addresses=[];}
function listContains(obj,list){for(var i=0;i<list.length;i++){if(angular.equals(list[i],obj)){return true;}}
return false;}
horizon.network_topology={fa_globe_glyph:'\uf0ac',fa_globe_glyph_width:15,svg:'#topology_canvas',nodes:[],links:[],data:[],zoom:d3.behavior.zoom(),data_loaded:false,svg_container:'#topologyCanvasContainer',balloonTmpl:null,balloon_deviceTmpl:null,balloon_portTmpl:null,balloon_netTmpl:null,balloon_instanceTmpl:null,network_index:{},balloonID:null,network_height:0,init:function(){var self=this;self.$loading_template=horizon.networktopologyloader.setup_loader($(self.svg_container));if(angular.element('#networktopology').length===0){return;}
self.data={};self.data.networks={};self.data.routers={};self.data.servers={};self.data.ports={};self.balloonTmpl=Hogan.compile(angular.element('#balloon_container').html());self.balloon_deviceTmpl=Hogan.compile(angular.element('#balloon_device').html());self.balloon_portTmpl=Hogan.compile(angular.element('#balloon_port').html());self.balloon_netTmpl=Hogan.compile(angular.element('#balloon_net').html());self.balloon_instanceTmpl=Hogan.compile(angular.element('#balloon_instance').html());angular.element(document).on('click','a.closeTopologyBalloon',function(e){e.preventDefault();self.delete_balloon();}).on('click','.topologyBalloon',function(e){e.stopPropagation();}).on('click','a.vnc_window',function(e){e.preventDefault();var vncWindow=window.open(angular.element(this).attr('href'),vncWindow,'width=760,height=560');self.delete_balloon();});angular.element('#toggle_labels').change(function(){horizon.cookies.put('show_labels',this.checked);self.refresh_labels();});angular.element('#toggle_networks').change(function(){horizon.cookies.put('are_networks_collapsed',this.checked);self.refresh_networks();self.refresh_labels();});angular.element('#center_topology').click(function(){this.blur();self.delete_balloon();self.vis.transition().duration(1500).attr('transform','translate(0,0)scale(1)');self.zoom.translate([0,0]);self.zoom.scale(1);self.translate=null;});angular.element(window).on('message',function(e){var message=angular.element.parseJSON(e.originalEvent.data);if(self.previous_message!==message.message){horizon.alert(message.type,message.message);self.previous_message=message.message;self.delete_post_message(message.iframe_id);if(message.type=='success'&&self.deleting_device){self.remove_node_on_delete();}
self.retrieve_network_info();setTimeout(function(){self.previous_message=null;},10000);}});self.$loading_template.show();self.create_vis();self.force_direction(0.05,70,-700);if(horizon.networktopologyloader.model!==null){self.retrieve_network_info(true);}
d3.select(window).on('resize',function(){var width=angular.element('#topologyCanvasContainer').width();var height=angular.element('#topologyCanvasContainer').height();self.force.size([width,height]).resume();});angular.element('#networktopology').on('change',function(){self.retrieve_network_info(true);if(angular.equals(self.data.networks,{})&&angular.equals(self.data.routers,{})&&angular.equals(self.data.servers,{})){$('.loader-inline').remove();angular.element('#topologyCanvasContainer').find('svg').remove();$(self.svg_container).addClass('noinfo');return;}});horizon.networktopologymessager.addMessageHandler(this.handleMessage,this);},refresh_labels:function(){var show_labels=horizon.cookies.get('show_labels')=='true';angular.element('.nodeLabel').toggle(show_labels);},refresh_networks:function(){var self=this;var are_collapsed=horizon.cookies.get('are_networks_collapsed')=='true';for(var n in self.nodes){if({}.hasOwnProperty.call(self.nodes,n)){if(self.nodes[n].data instanceof Network||self.nodes[n].data instanceof ExternalNetwork){self.collapse_network(self.nodes[n],are_collapsed);}}}},load_config:function(){var self=this;var labels=horizon.cookies.get('show_labels')=='true';var networks=horizon.cookies.get('are_networks_collapsed')=='true';if(networks){angular.element('#toggle_networks_label').addClass('active');angular.element('#toggle_networks').prop('checked',networks);self.refresh_networks();}
if(labels){angular.element('#toggle_labels_label').addClass('active');angular.element('#toggle_labels').prop('checked',labels);self.refresh_labels();}},handleMessage:function(message){var self=this;var deleteData=horizon.networktopologymessager.delete_data;horizon.modals.spinner.modal('hide');if(message.type=='success'){self.remove_node_on_delete(deleteData);}},retrieve_network_info:function(force_start){var self=this;self.data_loaded=true;self.load_topology(horizon.networktopologyloader.model);if(force_start){var i=0;self.force.start();while(i<=100){self.force.tick();i++;}}},getScreenCoords:function(x,y){var self=this;if(self.translate){var xn=self.translate[0]+x*self.zoom.scale();var yn=self.translate[1]+y*self.zoom.scale();return{x:xn,y:yn};}else{return{x:x,y:y};}},create_vis:function(){var self=this;angular.element('#topologyCanvasContainer').find('svg').remove();self.outer_group=d3.select('#topologyCanvasContainer').append('svg').attr('width','100%').attr('height',angular.element(document).height()-270+"px").attr('pointer-events','all').append('g').call(self.zoom.scaleExtent([0.1,1.5]).on('zoom',function(){self.delete_balloon();self.vis.attr('transform','translate('+d3.event.translate+')scale('+
self.zoom.scale()+')');self.translate=d3.event.translate;})).on('dblclick.zoom',null);self.outer_group.append('rect').attr('width','100%').attr('height','100%').attr('fill','white').on('click',function(){self.delete_balloon();});self.vis=self.outer_group.append('g');},convex_hulls:function(nodes){var net,_i,_len,_ref,_h,i;var hulls={};var networkids={};var k=0;var offset=40;while(k<nodes.length){var n=nodes[k];if(n.data!==undefined){if(n.data instanceof Server){_ref=n.data.networks;for(_i=0,_len=_ref.length;_i<_len;_i++){net=_ref[_i];if(net instanceof Network){_h=hulls[net.id]||(hulls[net.id]=[]);_h.push([n.x-offset,n.y-offset]);_h.push([n.x-offset,n.y+offset]);_h.push([n.x+offset,n.y-offset]);_h.push([n.x+offset,n.y+offset]);}}}else if(n.data instanceof Network){net=n.data;networkids[net.id]=n;_h=hulls[net.id]||(hulls[net.id]=[]);_h.push([n.x-offset,n.y-offset]);_h.push([n.x-offset,n.y+offset]);_h.push([n.x+offset,n.y-offset]);_h.push([n.x+offset,n.y+offset]);}}
++k;}
var hullset=[];for(i in hulls){if({}.hasOwnProperty.call(hulls,i)){hullset.push({group:i,network:networkids[i],path:d3.geom.hull(hulls[i])});}}
return hullset;},force_direction:function(grav,dist,ch){var self=this;angular.element('[data-toggle="tooltip"]').tooltip({container:'body'});self.curve=d3.svg.line().interpolate('cardinal-closed').tension(0.85);self.fill=d3.scale.category10();self.force=d3.layout.force().gravity(grav).linkDistance(function(d){if(d.source.data instanceof Server||d.target.data instanceof Server){if(d.source.data.networks){return(dist*d.source.data.networks.length)+(5*d.target.data.instances)+20;}else if(d.target.data.networks){return(dist*d.target.data.networks.length)+(5*d.source.data.instances)+20;}}else if(d.source.data instanceof Router||d.target.data instanceof Router){if(d.source.data.networks){if(d.source.data.networks.length===0){return dist+20;}else if(d.target.data.instances){return dist*d.source.data.networks.length+(10*d.target.data.instances)+20;}
return dist*d.source.data.networks.length+20;}else if(d.target.data.networks){if(d.target.data.networks.length===0){return dist+20;}else if(d.source.data.instances){return dist*d.target.data.networks.length+(10*d.source.data.instances)+20;}
return dist*d.source.data.networks.length+20;}}else{return dist;}}).charge(ch).size([angular.element('#topologyCanvasContainer').width(),angular.element('#topologyCanvasContainer').height()]).nodes(self.nodes).links(self.links).on('tick',function(){self.vis.selectAll('g.node').attr('transform',function(d){return'translate('+d.x+','+d.y+')';});self.vis.selectAll('line.link').attr('x1',function(d){return d.source.x;}).attr('y1',function(d){return d.source.y;}).attr('x2',function(d){return d.target.x;}).attr('y2',function(d){return d.target.y;});self.vis.selectAll('path.hulls').data(self.convex_hulls(self.vis.selectAll('g.node').data())).attr('d',function(d){return self.curve(d.path);}).enter().insert('path','g').attr('class','hulls').style('fill',function(d){return self.fill(d.group);}).style('stroke',function(d){return self.fill(d.group);}).style('stroke-linejoin','round').style('stroke-width',10).style('opacity',0.2);});},new_node:function(data,x,y){var self=this;data={data:data};if(x&&y){data.x=x;data.y=y;}
self.nodes.push(data);var node=self.vis.selectAll('g.node').data(self.nodes);var nodeEnter=node.enter().append('g').attr('class','node').style('fill','white').call(self.force.drag);nodeEnter.append('circle').attr('class','frame').attr('r',function(d){switch(Object.getPrototypeOf(d.data)){case ExternalNetwork.prototype:return 35;case Network.prototype:return 30;case Router.prototype:return 25;case Server.prototype:return 20;}}).style('fill','white').style('stroke','black').style('stroke-width',3);switch(data.data.iconType){case'text':nodeEnter.append('text').style('fill','black').style('font','20px FontAwesome').attr('text-anchor','middle').attr('dominant-baseline','central').text(function(d){return d.data.icon;}).attr('transform',function(d){switch(Object.getPrototypeOf(d.data)){case ExternalNetwork.prototype:return'scale(2.5)';case Network.prototype:return'scale(1.5)';case Server.prototype:return'scale(1)';}});break;case'path':nodeEnter.append('path').attr('class','svgpath').style('fill','black').attr('d',function(d){return self.svgs(d.data.svg);}).attr('transform',function(){return'scale(1.2)translate(-16,-15)';});break;}
nodeEnter.append('text').attr('class','nodeLabel').style('display',function(){var labels=horizon.cookies.get('topology_labels');if(labels){return'inline';}else{return'none';}}).style('fill','black').text(function(d){return d.data.name;}).attr('transform',function(d){switch(Object.getPrototypeOf(d.data)){case ExternalNetwork.prototype:return'translate(40,3)';case Network.prototype:return'translate(35,3)';case Router.prototype:return'translate(30,3)';case Server.prototype:return'translate(25,3)';}});if(data.data instanceof Network||data.data instanceof ExternalNetwork){nodeEnter.append('svg:text').attr('class','vmCount').style('fill','black').style('font-size','20').text('').attr('transform','translate(26,38)');}
nodeEnter.on('click',function(d){self.show_balloon(d.data,d,angular.element(this));});nodeEnter.on('mouseover',function(d){self.vis.selectAll('line.link').filter(function(z){if(z.source===d||z.target===d){return true;}else{return false;}}).style('stroke-width','3px');});nodeEnter.on('mouseout',function(){self.vis.selectAll('line.link').style('stroke-width','1px');});},collapse_network:function(d,only_collapse){var self=this;var server,vm;var filterNode=function(obj){return function(d){return obj==d.data;};};if(!d.data.collapsed){var vmCount=0;for(vm in self.data.servers){if(self.data.servers[vm]!==undefined){if(self.data.servers[vm].networks.length==1){if(self.data.servers[vm].networks[0].id==d.data.id){vmCount+=1;self.removeNode(self.data.servers[vm]);}}}}
d.data.collapsed=true;if(vmCount>0){self.vis.selectAll('.vmCount').filter(filterNode(d.data))[0][0].textContent=vmCount;}}else if(!only_collapse){for(server in self.data.servers){if({}.hasOwnProperty.call(self.data.servers,server)){var _vm=self.data.servers[server];if(_vm!==undefined){if(_vm.networks.length===1){if(_vm.networks[0].id==d.data.id){self.new_node(_vm,d.x,d.y);self.new_link(self.find_by_id(_vm.id),self.find_by_id(d.data.id));self.force.start();}}}}}
d.data.collapsed=false;self.vis.selectAll('.vmCount').filter(filterNode(d.data))[0][0].textContent='';var i=0;while(i<=100){self.force.tick();i++;}}},new_link:function(source,target){var self=this;self.links.push({source:source,target:target});var line=self.vis.selectAll('line.link').data(self.links);line.enter().insert('line','g.node').attr('class','link').attr('x1',function(d){return d.source.x;}).attr('y1',function(d){return d.source.y;}).attr('x2',function(d){return d.target.x;}).attr('y2',function(d){return d.target.y;}).style('stroke','black').style('stroke-width',2);},find_by_id:function(id){var self=this;var obj,_i,_len,_ref;_ref=self.vis.selectAll('g.node').data();for(_i=0,_len=_ref.length;_i<_len;_i++){obj=_ref[_i];if(obj.data.id==id){return obj;}}
return undefined;},already_in_graph:function(data,node){if(data==this.data.ports){for(var p in data){if(JSON.stringify(data[p])==JSON.stringify(node)){return true;}}
return false;}
for(var n in data){if(n==node.id){return true;}}
return false;},load_topology:function(data){var self=this;var net,_i,_netlen,_netref,rou,_j,_roulen,_rouref,port,_l,_portlen,_portref,ser,_k,_serlen,_serref,obj,vmCount;var change=false;var filterNode=function(obj){return function(d){return obj==d.data;};};_netref=data.networks;for(_i=0,_netlen=_netref.length;_i<_netlen;_i++){net=_netref[_i];var network=null;if(net['router:external']===true){network=new ExternalNetwork(net);}else{network=new Network(net);}
if(!self.already_in_graph(self.data.networks,network)){self.new_node(network);change=true;}else{obj=self.find_by_id(network.id);if(obj){network.collapsed=obj.data.collapsed;network.instances=obj.data.instances;obj.data=network;}}
self.data.networks[network.id]=network;}
_rouref=data.routers;for(_j=0,_roulen=_rouref.length;_j<_roulen;_j++){rou=_rouref[_j];var router=new Router(rou);if(!self.already_in_graph(self.data.routers,router)){self.new_node(router);change=true;}else{obj=self.find_by_id(router.id);if(obj){router.networks=obj.data.networks;router.ports=obj.data.ports;obj.data=router;}}
self.data.routers[router.id]=router;}
_serref=data.servers;for(_k=0,_serlen=_serref.length;_k<_serlen;_k++){ser=_serref[_k];var server=new Server(ser);if(!self.already_in_graph(self.data.servers,server)){self.new_node(server);change=true;}else{obj=self.find_by_id(server.id);if(obj){server.networks=obj.data.networks;server.ip_addresses=obj.data.ip_addresses;obj.data=server;}else if(self.data.servers[server.id]!==undefined){server.networks=self.data.servers[server.id].networks;server.ip_addresses=self.data.servers[server.id].ip_addresses;}}
self.data.servers[server.id]=server;}
_portref=data.ports;for(_l=0,_portlen=_portref.length;_l<_portlen;_l++){port=_portref[_l];if(!self.already_in_graph(self.data.ports,port)){var device=self.find_by_id(port.device_id);var _network=self.find_by_id(port.network_id);if(angular.isDefined(device)&&angular.isDefined(_network)){if(port.device_owner&&port.device_owner.startsWith('compute:')){_network.data.instances++;device.data.networks.push(_network.data);if(port.fixed_ips){for(var ip in port.fixed_ips){if(!listContains(port.fixed_ips[ip],device.data.ip_addresses)){device.data.ip_addresses.push(port.fixed_ips[ip]);}}}
if(_network.data.collapsed){if(device.data.networks.length==1){self.data.servers[device.data.id].networks=device.data.networks;self.data.servers[device.data.id].ip_addresses=device.data.ip_addresses;self.removeNode(self.data.servers[port.device_id]);vmCount=Number(self.vis.selectAll('.vmCount').filter(filterNode(_network.data))[0][0].textContent);self.vis.selectAll('.vmCount').filter(filterNode(_network.data))[0][0].textContent=vmCount+1;continue;}}}else if(port.device_owner=='network:router_interface'){device.data.networks.push(_network.data);device.data.ports.push(port);}else if(device.data.ports){device.data.ports.push(port);}
self.new_link(self.find_by_id(port.device_id),self.find_by_id(port.network_id));change=true;}else if(angular.isDefined(_network)&&port.device_owner&&port.device_owner.startsWith('compute:')){if(_network.data.collapsed){server=self.data.servers[port.device_id];server.networks.push(_network.data);if(port.fixed_ips){for(var ip in port.fixed_ips){server.ip_addresses.push(port.fixed_ips[ip]);}}
self.new_node(server);vmCount=Number(self.vis.selectAll('.vmCount').filter(filterNode(server.networks[0]))[0][0].textContent);if(vmCount==1){self.vis.selectAll('.vmCount').filter(filterNode(server.networks[0]))[0][0].textContent='';}else{self.vis.selectAll('.vmCount').filter(filterNode(server.networks[0]))[0][0].textContent=vmCount-1;}
self.new_link(self.find_by_id(port.device_id),self.find_by_id(server.networks[0].id));self.new_link(self.find_by_id(port.device_id),self.find_by_id(port.network_id));change=true;}}}
self.data.ports[port.id+port.device_id+port.network_id]=port;}
if(change){self.force.start();}
self.load_config();self.$loading_template.hide();},removeNode:function(obj){var filterNetwork,filterNode,n,node,_i,_len,_ref;_ref=this.nodes;for(_i=0,_len=_ref.length;_i<_len;_i++){n=_ref[_i];if(n.data===obj){node=n;break;}}
if(node){this.nodes.splice(this.nodes.indexOf(node),1);filterNode=function(obj){return function(d){return obj===d.data;};};filterNetwork=function(obj){return function(d){return obj===d.network.data;};};if(obj instanceof Network){this.vis.selectAll('.hulls').filter(filterNetwork(obj)).remove();}
this.vis.selectAll('g.node').filter(filterNode(obj)).remove();return this.removeNodesLinks(obj);}},removeNodesLinks:function(node){var l,linksToRemove,_i,_j,_len,_len1,_ref;linksToRemove=[];_ref=this.links;for(_i=0,_len=_ref.length;_i<_len;_i++){l=_ref[_i];if(l.source.data===node){linksToRemove.push(l);}else if(l.target.data===node){linksToRemove.push(l);}}
for(_j=0,_len1=linksToRemove.length;_j<_len1;_j++){l=linksToRemove[_j];this.removeLink(l);}
return this.force.resume();},removeLink:function(link){var i,index,l,_i,_len,_ref;index=-1;_ref=this.links;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){l=_ref[i];if(l===link){index=i;break;}}
if(index!==-1){this.links.splice(index,1);}
return this.vis.selectAll('line.link').data(this.links).exit().remove();},delete_device:function(device_type,deviceId){var message={id:deviceId};var target=device_type==='instance'?'instance?id='+deviceId:device_type;horizon.networktopologymessager.post_message(deviceId,target,message,device_type,'delete',data={});},remove_node_on_delete:function(deleteData){var self=this;var deviceId=deleteData.device_id;switch(deleteData.device_type){case'router':self.removeNode(self.data.routers[deviceId]);break;case'instance':self.removeNode(self.data.servers[deviceId]);this.data.servers[deviceId]=undefined;break;case'network':self.removeNode(self.data.networks[deviceId]);break;case'port':self.removePortOrSubnet(deviceId,deleteData.device_data);break;}
self.delete_balloon();},removePortOrSubnet:function(portId,deviceData){var self=this;var routerId=deviceData.router_id;var networkId=deviceData.network_id;if(routerId){for(var l in self.links){var data=null;if(self.links[l].source.data.id==routerId&&self.links[l].target.data.id==networkId){data=self.links[l].source.data;}else if(self.links[l].target.data.id==routerId&&self.links[l].source.data.id==networkId){data=self.links[l].target.data;}
if(data){for(var p in data.ports){if((data.ports[p].id==portId)&&(data.ports[p].network_id==networkId)){self.removeLink(self.links[l]);var router=self.find_by_id(routerId);router.data.ports.splice(router.data.ports.indexOf(data.ports[p]),1);self.force.start();return;}}}}}else{var networkData=self.find_by_id(networkId).data;var subnets=networkData.subnets;for(var subnet in subnets){if(subnets[subnet].id===portId){if(subnets.length==1){delete(networkData.subnets);}else{subnets.splice(subnet,1);}
self.force.start();break;}}}},delete_port:function(routerId,portId,networkId){var message={id:portId};var data={network_id:networkId,router_id:routerId};if(routerId){horizon.networktopologymessager.post_message(portId,'router/'+routerId+'/',message,'port','delete',data);}else{horizon.networktopologymessager.post_message(portId,'network/'+networkId+'/?tab=network_tabs__subnets_tab',message,'port','delete',data);}},show_balloon:function(d,d2,element){var self=this;var balloonTmpl=self.balloonTmpl;var deviceTmpl=self.balloon_deviceTmpl;var portTmpl=self.balloon_portTmpl;var netTmpl=self.balloon_netTmpl;var instanceTmpl=self.balloon_instanceTmpl;var balloonID='bl_'+d.id;var ports=[];var subnets=[];if(self.balloonID){if(self.balloonID==balloonID){self.delete_balloon();return;}
self.delete_balloon();}
self.force.stop();if(d.hasOwnProperty('ports')){angular.element.each(d.ports,function(i,port){var object={};object.id=port.id;object.router_id=port.device_id;object.url=port.url;object.port_status=port.status;object.port_status_class=(port.original_status==='ACTIVE')?'active':'down';var ipAddress='';try{for(var ip in port.fixed_ips){ipAddress+=port.fixed_ips[ip].ip_address+' ';}}catch(e){ipAddress=gettext('None');}
var deviceOwner='';try{deviceOwner=port.device_owner.replace('network:','');}catch(e){deviceOwner=gettext('None');}
var networkId='';try{networkId=port.network_id;}catch(e){networkId=gettext('None');}
object.ip_address=ipAddress;object.device_owner=deviceOwner;object.network_id=networkId;object.is_interface=(deviceOwner==='router_interface'||deviceOwner==='router_gateway'||deviceOwner==='ha_router_replicated_interface');ports.push(object);});}else if(d.hasOwnProperty('subnets')){angular.element.each(d.subnets,function(i,snet){var object={};object.id=snet.id;object.cidr=snet.cidr;object.url=snet.url;subnets.push(object);});}
var htmlData={balloon_id:balloonID,id:d.id,url:d.url,name:d.name,type:d.type,delete_label:gettext('Delete'),status:d.status,status_class:(d.original_status==='ACTIVE')?'active':'down',status_label:gettext('STATUS'),id_label:gettext('ID'),interfaces_label:gettext('Interfaces'),subnets_label:gettext('Subnets'),delete_interface_label:gettext('Delete Interface'),delete_subnet_label:gettext('Delete Subnet'),open_console_label:gettext('Open Console'),view_details_label:gettext('View Details'),ips_label:gettext('IP Addresses')};var html;if(d instanceof Router){htmlData.delete_label=gettext('Delete Router');htmlData.view_details_label=gettext('View Router Details');htmlData.port=ports;htmlData.add_interface_url='router/'+d.id+'/addinterface';htmlData.add_interface_label=gettext('Add Interface');html=balloonTmpl.render(htmlData,{table1:deviceTmpl,table2:portTmpl});}else if(d instanceof Server){htmlData.delete_label=gettext('Delete Instance');htmlData.view_details_label=gettext('View Instance Details');htmlData.console_id=d.id;htmlData.ips=d.ip_addresses;htmlData.console=d.console;html=balloonTmpl.render(htmlData,{table1:deviceTmpl,table2:instanceTmpl});}else if(d instanceof Network||d instanceof ExternalNetwork){for(var s in subnets){subnets[s].network_id=d.id;}
htmlData.subnet=subnets;if(d instanceof Network){htmlData.delete_label=gettext('Delete Network');if(d.allow_delete_subnet){htmlData.allow_delete_subnet=d.allow_delete_subnet;}}
htmlData.add_subnet_url='network/'+d.id+'/subnet/create';htmlData.add_subnet_label=gettext('Create Subnet');html=balloonTmpl.render(htmlData,{table1:deviceTmpl,table2:netTmpl});}else{return;}
angular.element(self.svg_container).append(html);var devicePosition=self.getScreenCoords(d2.x,d2.y);var x=devicePosition.x;var y=devicePosition.y;var xoffset=100;var yoffset=95;angular.element('#'+balloonID).css({'left':x+xoffset+'px','top':y+yoffset+'px'}).show();var _balloon=angular.element('#'+balloonID);if(element.x+_balloon.outerWidth()>angular.element(window).outerWidth()){_balloon.css({'left':0+'px'}).css({'left':(x-_balloon.outerWidth()+'px')}).addClass('leftPosition');}
_balloon.find('.delete-device').click(function(){var _this=angular.element(this);var delete_modal=horizon.datatables.confirm(_this);delete_modal.find('.btn.btn-danger').click(function(){_this.prop('disabled',true);d3.select('#id_'+_this.data('device-id')).classed('loading',true);self.delete_device(_this.data('type'),_this.data('device-id'));});});_balloon.find('.delete-port').click(function(){var _this=angular.element(this);var delete_modal=horizon.datatables.confirm(_this);delete_modal.find('.btn.btn-danger').click(function(){_this.prop('disabled',true);self.delete_port(_this.data('router-id'),_this.data('port-id'),_this.data('network-id'));});});self.balloonID=balloonID;},delete_balloon:function(){var self=this;if(self.balloonID){angular.element('#'+self.balloonID).remove();self.balloonID=null;self.force.start();}},svgs:function(name){switch(name){case'router':return'm 26.628571,16.08 -8.548572,0 0,8.548571 2.08,-2.079998 6.308572,6.30857 4.38857,-4.388572 -6.308571,-6.30857 z m -21.2571429,-4.159999 8.5485709,0 0,-8.5485723 -2.08,2.08 L 5.5314281,-0.85714307 1.1428571,3.5314287 7.4514281,9.84 z m -3.108571,7.268571 0,8.548571 8.5485709,0 L 8.7314281,25.657144 15.039999,19.325715 10.674285,14.96 4.3428571,21.268573 z M 29.737142,8.8114288 l 0,-8.54857147 -8.548572,0 2.08,2.07999987 -6.308571,6.3085716 4.388572,4.3885722 6.308571,-6.3085723 z';default:return'';}}};horizon.Volumes={selected_volume_type:null,volume_types:[],initWithTypes:function(volume_types){this.volume_types=volume_types;this._attachInputHandlers();this.getSelectedType();this.showTypeDescription();$("#id_volume_source_type").change(this._toggleTypeSelector);},getSelectedType:function(){this.selected_volume_type=$.grep(this.volume_types,function(type){var selected_name=$("#id_type").children(":selected").val();return type.name===selected_name;})[0];return this.selected_volume_type;},showTypeDescription:function(){this.getSelectedType();if(this.selected_volume_type){var description=this.selected_volume_type.description;var name=this.selected_volume_type.name;$("#id_show_volume_type_name").html(name);if(description){$("#id_show_volume_type_desc").html(description);}else{$("#id_show_volume_type_desc").html(gettext('No description available.'));}}else{this.toggleTypeDescription(true);}},toggleTypeDescription:function(hide){var selected_volume_source=$("#id_volume_source_type").children(":selected").val();if(hide||selected_volume_source==='volume_source'||selected_volume_source==='snapshot_source'){$("#id_show_volume_type_desc_div").hide();}
else{$("#id_show_volume_type_desc_div").show();}},_attachInputHandlers:function(){var scope=this;var eventCallback_type=function(){scope.showTypeDescription();};$('#id_type').on('change',eventCallback_type);var eventCallback_volume_source_type=function(){scope.toggleTypeDescription();};$('#id_volume_source_type').on('change',eventCallback_volume_source_type);},_toggleTypeSelector:function(){var createFromSnapshot=$("#id_volume_source_type").children(":selected").val()==='snapshot_source';$("#id_type").closest(".form-group").toggleClass("hidden",createFromSnapshot);}};(function(){'use strict';angular.module('horizon.auth',['horizon.auth.login']);})();(function(){'use strict';angular.module('horizon.auth.login',[],config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'auth/login/';$provide.constant('horizon.auth.login.basePath',path);}})();(function(){'use strict';angular.module('horizon.framework',['ngRoute','horizon.framework.conf','horizon.framework.util','horizon.framework.widgets']).config(config).run(run).factory('horizon.framework.redirect',redirect).config(registerNotFound).constant('horizon.framework.events',{AUTH_ERROR:'AUTH_ERROR'});config.$inject=['$injector','$provide','$interpolateProvider','$httpProvider','$windowProvider'];function config($injector,$provide,$interpolateProvider,$httpProvider,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/';$provide.constant('horizon.framework.basePath',path);$interpolateProvider.startSymbol('{$');$interpolateProvider.endSymbol('$}');$httpProvider.defaults.xsrfHeaderName='X-CSRFToken';$httpProvider.defaults.xsrfCookieName='csrftoken';$httpProvider.defaults.headers.common['X-Requested-With']='XMLHttpRequest';$httpProvider.defaults.headers.common['Content-Type']='application/json;charset=utf-8';if($injector.has('dropdownToggleDirective')){$provide.decorator('dropdownToggleDirective',patchDropdowns);}
patchDropdowns.$inject=['$delegate'];function patchDropdowns($delegate){var directive=$delegate[0];directive.restrict='A';return $delegate;}
$httpProvider.interceptors.push(redirect);$httpProvider.interceptors.push(stripAjaxHeaderForCORS);stripAjaxHeaderForCORS.$inject=[];function stripAjaxHeaderForCORS(){return{request:function(config){if('X-Auth-Token'in config.headers){delete config.headers['X-Requested-With'];}
return config;}};}}
run.$inject=['$window','$rootScope'];function run($window,$rootScope){$window.recompileAngularContent=recompileAngularContent;function recompileAngularContent($element){function explicit($compile){$element.find('[ng-click]').off('click');$compile($element)($rootScope);}
explicit.$inject=['$compile'];$element.injector().invoke(explicit);}}
redirect.$inject=['$q','$rootScope','$window','horizon.framework.events','horizon.framework.widgets.toast.service'];function redirect($q,$rootScope,$window,frameworkEvents,toastService){return{responseError:function(error){if(error.status===401){var msg=gettext('Unauthorized. Redirecting to login');handleRedirectMessage(msg,$rootScope,$window,frameworkEvents,toastService,true);}
if(error.status===403){var msg2=gettext('Forbidden. Insufficient permissions of the requested operation');handleRedirectMessage(msg2,$rootScope,$window,frameworkEvents,toastService,false);}
return $q.reject(error);},notFound:function(){$window.location.href=$window.WEBROOT+'not_found';}};}
function handleRedirectMessage(msg,$rootScope,$window,frameworkEvents,toastService,forceLogout){var toast=toastService.find('error',msg);if(!toast){toastService.add('error',msg);$rootScope.$broadcast(frameworkEvents.AUTH_ERROR,msg);}
if(forceLogout){$window.location.replace($window.WEBROOT+'auth/logout');}}
registerNotFound.$inject=['$routeProvider'];function registerNotFound($routeProvider){$routeProvider.when('/ngdetails/:resourceType',{redirectTo:"/not_found"});}})();(function(){'use strict';angular.module('horizon.framework.util.actions',[]);})();(function(){'use strict';angular.module('horizon.framework.util.bind-scope',[]);})();(function(){'use strict';angular.module('horizon.framework.util.extensible',[]);})();(function(){'use strict';angular.module('horizon.framework.util.file',[]);})();(function(){'use strict';angular.module('horizon.framework.util.filters',['horizon.framework.util.i18n']);})();(function(){'use strict';angular.module('horizon.framework.util.navigations',[]);})();(function(){'use strict';angular.module('horizon.framework.util.promise-toggle',[]);})();(function(){'use strict';angular.module('horizon.framework.util.q',[]);})();(function(){'use strict';angular.module('horizon.framework.util.tech-debt',[]);})();(function(){'use strict';angular.module('horizon.framework.util',['horizon.framework.util.actions','horizon.framework.util.bind-scope','horizon.framework.util.file','horizon.framework.util.filters','horizon.framework.util.http','horizon.framework.util.i18n','horizon.framework.util.navigations','horizon.framework.util.promise-toggle','horizon.framework.util.q','horizon.framework.util.tech-debt','horizon.framework.util.uuid','horizon.framework.util.workflow','horizon.framework.util.validators','horizon.framework.util.extensible']).config(config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/util/';$provide.constant('horizon.framework.util.basePath',path);}})();(function(){'use strict';angular.module('horizon.framework.util.validators',[]);})();(function(){'use strict';angular.module('horizon.framework.util.workflow',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.action-list',[]).constant('horizon.framework.widgets.action-list.tooltipConfig',{defaultTemplate:'<div>{$ ::message $}</div>',defaultMessage:{message:gettext('The action cannot be performed. The contents of this row have errors or are missing information.')}});})();(function(){'use strict';angular.module('horizon.framework.widgets.charts',[]).constant('horizon.framework.widgets.charts.donutChartSettings',{innerRadius:24,outerRadius:36,titleClass:'pie-chart-title-medium',showTitle:true,showLabel:true,showLegend:true,tooltipIcon:'fa-square'}).constant('horizon.framework.widgets.charts.pieChartSettings',{innerRadius:0,outerRadius:30,titleClass:'pie-chart-title-medium',showTitle:true,showLabel:true,showLegend:true,tooltipIcon:'fa-square'}).constant('horizon.framework.widgets.charts.quotaChartDefaults',{usageLabel:gettext('Current Usage'),usageColorClass:'usage',addedLabel:gettext('Added'),addedColorClass:'added',remainingLabel:gettext('Remaining'),remainingColorClass:'remaining'}).filter('showKeyFilter',showKeyFilter);function showKeyFilter(){return function(items){return items.filter(function(item){return!item.hideKey;});};}})();(function(){'use strict';angular.module('horizon.framework.widgets.contenteditable',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.details',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.form',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.headers',[]).config(config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/widgets/headers/';$provide.constant('horizon.framework.widgets.headers.basePath',path);}})();(function(){'use strict';angular.module('horizon.framework.widgets.help-panel',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.load-edit',[]).config(config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/widgets/load-edit/';$provide.constant('horizon.framework.widgets.load-edit.basePath',path);}})();(function(){'use strict';angular.module('horizon.framework.widgets.magic-search',['ui.bootstrap']).constant('horizon.framework.widgets.magic-search.events',{TEXT_SEARCH:'textSearch',SEARCH_UPDATED:'searchUpdated',CHECK_FACETS:'checkFacets',FACETS_CHANGED:'facetsChanged',SERVER_SEARCH_UPDATED:'serverSearchUpdated',INIT_SEARCH:'initSearch'});})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.display',[],config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/widgets/metadata/display/';$provide.constant('horizon.framework.widgets.metadata.display.basePath',path);}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata',['horizon.framework.widgets.metadata.tree','horizon.framework.widgets.metadata.display'],config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/widgets/metadata/';$provide.constant('horizon.framework.widgets.metadata.basePath',path);}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.tree',[],config).constant('horizon.framework.widgets.metadata.tree.defaults',{text:{help:gettext('You can specify resource metadata by moving items from the left column to the right column. In the left column there are metadata definitions from the Glance Metadata Catalog. Use the "Custom" option to add metadata with the key of your choice.'),item_help:gettext('Click each item to get its description here.'),min:gettext('Min'),max:gettext('Max'),minLength:gettext('Min length'),maxLength:gettext('Max length'),patternMismatch:gettext('Pattern mismatch'),integerRequired:gettext('Integer required'),decimalRequired:gettext('Decimal required'),required:gettext('Required'),duplicate:gettext('Duplicate keys are not allowed'),filter:gettext('Filter'),available:gettext('Available Metadata'),existing:gettext('Existing Metadata'),custom:gettext('Custom'),noAvailable:gettext('No available metadata'),noExisting:gettext('No existing metadata')}});config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/widgets/metadata/tree/';$provide.constant('horizon.framework.widgets.metadata.tree.basePath',path);}})();(function(){'use strict';angular.module('horizon.framework.widgets.modal-wait-spinner',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.modal',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.panel',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.property',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.table',['smart-table']).constant('horizon.framework.widgets.table.expandSettings',{expandIconClasses:'fa-chevron-right fa-chevron-down',duration:100}).constant('horizon.framework.widgets.table.filterPlaceholderText',gettext('Filter')).constant('horizon.framework.widgets.table.events',{CLEAR_SELECTIONS:'hzTable:clearSelections',ROW_SELECTED:'hzTable:rowSelected',ROW_EXPANDED:'hzTable:rowExpanded'}).config(['stConfig','$windowProvider',function(stConfig,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/widgets/table/';stConfig.pagination.template=path+'pagination.html';}]);})();(function(){'use strict';angular.module('horizon.framework.widgets.toast',[]);})();(function(){'use strict';angular.module('horizon.framework.widgets.transfer-table',[]).constant('horizon.framework.widgets.transfer-table.helpText',{allocTitle:gettext('Allocated'),availTitle:gettext('Available'),availHelpText:gettext('Select one'),noneAllocText:gettext('Select an item from Available items below'),noneAvailText:gettext('No available items'),allocHiddenText:gettext('Expand to see allocated items'),availHiddenText:gettext('Expand to see available items'),sectionToggleText:gettext('Click to show or hide'),orderText:gettext('Re-order items using drag and drop'),expandDetailsText:gettext('Click to see more details')}).constant('horizon.framework.widgets.transfer-table.limits',{maxAllocation:1}).constant('horizon.framework.widgets.transfer-table.events',events());function events(){return{TABLES_CHANGED:'horizon.framework.widgets.transfer-table.TABLES_CHANGED'};}})();(function(){'use strict';angular.module('horizon.framework.widgets',['horizon.framework.widgets.headers','horizon.framework.widgets.contenteditable','horizon.framework.widgets.details','horizon.framework.widgets.form','horizon.framework.widgets.help-panel','horizon.framework.widgets.wizard','horizon.framework.widgets.property','horizon.framework.widgets.table','horizon.framework.widgets.modal','horizon.framework.widgets.modal-wait-spinner','horizon.framework.widgets.panel','horizon.framework.widgets.transfer-table','horizon.framework.widgets.charts','horizon.framework.widgets.action-list','horizon.framework.widgets.metadata','horizon.framework.widgets.toast','horizon.framework.widgets.magic-search','horizon.framework.widgets.load-edit']).config(config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'framework/widgets/';$provide.constant('horizon.framework.widgets.basePath',path);}})();(function(){'use strict';angular.module('horizon.framework.widgets.wizard',[]).constant('horizon.framework.widgets.wizard.labels',{cancel:gettext('Cancel'),back:gettext('Back'),next:gettext('Next'),finish:gettext('Finish')}).constant('horizon.framework.widgets.wizard.events',{ON_INIT_SUCCESS:'ON_INIT_SUCCESS',ON_INIT_ERROR:'ON_INIT_ERROR',ON_SWITCH:'ON_SWITCH',BEFORE_SUBMIT:'BEFORE_SUBMIT',AFTER_SUBMIT:'AFTER_SUBMIT'});})();(function(){'use strict';angular.module('horizon.auth.login').directive('hzLoginFinder',hzLoginFinder);hzLoginFinder.$inject=['$timeout'];function hzLoginFinder($timeout){return{restrict:'A',controller:'hzLoginController',link:function(scope,element,attrs,ctrl){var authType=element.find('#id_auth_type');var userInput=element.find("#id_username").parents('.form-group');var passwordInput=element.find("#id_password").parents('.form-group');var domainInput=element.find('#id_domain').parents('.form-group');var regionInput=element.find('#id_region').parents('.form-group');var helpText=element.parent().find('.help_text');helpText.hide();function onChange(){$timeout(function(){ctrl.auth_type=authType.val();switch(ctrl.auth_type){case'credentials':userInput.show();passwordInput.show();domainInput.show();regionInput.show();break;default:userInput.hide();passwordInput.hide();domainInput.hide();regionInput.hide();}});}
if(authType.length>0){authType.after(helpText);helpText.show();onChange();authType.change(onChange);}}};}})();(function(){'use strict';angular.module('horizon.auth.login').controller('hzLoginController',function(){var ctrl=this;ctrl.auth_type='credentials';});})();(function(){'use strict';angular.module('horizon.framework.conf',[]).value('horizon.framework.conf.toastOptions',{'delay':3000,'dimissible':['alert-success','alert-info']}).value('horizon.framework.conf.tableOptions',{'pageSize':20});})();(function(){'use strict';angular.module('horizon.framework.conf').service('horizon.framework.conf.permissions.service',Permissions);Permissions.$inject=['$q'];function Permissions($q){var service={checkAllowed:checkAllowed,checkAll:checkAll,extendedPermissions:extendedPermissions};return service;function checkAllowed(configItem){if(angular.isFunction(configItem.allowed)){return configItem.allowed();}else{return $q.when(true);}}
function checkAll(configItem){var promises=[];promises=promises.concat(getConfigurationPromises(configItem));promises.push(checkAllowed(configItem));return $q.all(promises);}
function extendedPermissions(){return{};}
function getConfigurationPromises(configItem){var promises=[];angular.forEach(service.extendedPermissions,checkPermissions);function checkPermissions(permissionResolver,permissionName){var permissionInput=configItem[permissionName];if(angular.isArray(permissionInput)){angular.forEach(permissionInput,function addPermissionCheck(singlePermissionInput){promises.push(permissionResolver(singlePermissionInput));});}else if(angular.isDefined(permissionInput)){promises.push(permissionResolver(permissionInput));}}
return promises;}}})();(function(){'use strict';angular.module('horizon.framework.conf').factory('horizon.framework.conf.resource-type-registry.service',registryService);registryService.$inject=['horizon.framework.util.extensible.service','$log'];function registryService(extensibleService,$log){function ResourceType(typeCode){var self=this;var names=[];var properties={};self.type=typeCode;self.initActions=initActions;self.setProperty=setProperty;self.setProperties=setProperties;self.getProperties=getProperties;self.getName=getName;self.setNames=setNames;self.label=label;self.load=defaultLoadFunction;self.setLoadFunction=setLoadFunction;self.isLoadFunctionSet=isLoadFunctionSet;self.list=defaultListFunction;self.setListFunction=setListFunction;self.isListFunctionSet=isListFunctionSet;self.itemInTransitionFunction=defaultItemInTransitionFunction;self.setItemInTransitionFunction=setItemInTransitionFunction;self.itemName=itemName;self.setItemNameFunction=setItemNameFunction;self.setPathParser=setPathParser;self.parsePath=parsePath;self.setPathGenerator=setPathGenerator;self.path=path;self.needsFilterFirstFunction=defaultNeedsFilterFirstFunction;self.setNeedsFilterFirstFunction=setNeedsFilterFirstFunction;self.itemActions=[];extensibleService(self.itemActions,self.itemActions);self.batchActions=[];extensibleService(self.batchActions,self.batchActions);self.globalActions=[];extensibleService(self.globalActions,self.globalActions);self.detailsViews=[];extensibleService(self.detailsViews,self.detailsViews);self.tableColumns=[];extensibleService(self.tableColumns,self.tableColumns);self.getTableColumns=getTableColumns;self.filterFacets=[];extensibleService(self.filterFacets,self.filterFacets);self.summaryTemplateUrl=false;self.setSummaryTemplateUrl=setSummaryTemplateUrl;self.defaultIndexUrl=false;self.setDefaultIndexUrl=setDefaultIndexUrl;self.getDefaultIndexUrl=getDefaultIndexUrl;function initActions(){angular.forEach(self.itemActions,setActionScope);angular.forEach(self.batchActions,setActionScope);angular.forEach(self.globalActions,setActionScope);function setActionScope(action){if(action.service.initAction){action.service.initAction();}}}
function setProperty(name,prop){properties[name]=prop;return self;}
function setProperties(properties){angular.forEach(properties,function(value,key){var prop=angular.isString(value)?{label:value}:value;setProperty(key,prop);});return this;}
function getProperties(){return angular.copy(properties);}
function setListFunction(func){self.list=func;return self;}
function isListFunctionSet(){return self.list!==defaultListFunction;}
function defaultListFunction(){$log.error('No list function defined for',typeCode);return Promise.reject({data:{items:[]}});}
function defaultItemInTransitionFunction(){return false;}
function setItemInTransitionFunction(func){self.itemInTransitionFunction=func;return self;}
function getTableColumns(){return self.tableColumns.map(mapTableInfo);function mapTableInfo(x){var tableInfo=x;tableInfo.title=x.title||label(x.id);if(properties[x.id]&&properties[x.id].values){tableInfo.values=properties[x.id].values;}
if(properties[x.id]&&properties[x.id].filters){tableInfo.filters=properties[x.id].filters;}
return tableInfo;}}
function setPathParser(func){self.parsePath=func;return self;}
function parsePath(subpath){return subpath;}
function setLoadFunction(func){self.load=func;return self;}
function isLoadFunctionSet(){return self.load!==defaultLoadFunction;}
function defaultLoadFunction(spec){$log.error('No load function defined for',typeCode,'with spec',spec);return Promise.reject({data:{}});}
function setPathGenerator(func){self.path=func;return self;}
function path(item){return''+item.id;}
function setSummaryTemplateUrl(url){self.summaryTemplateUrl=url;return self;}
function setDefaultIndexUrl(url){self.defaultIndexUrl=url;return self;}
function getDefaultIndexUrl(){return self.defaultIndexUrl;}
function setItemNameFunction(func){self.itemName=func;return self;}
function itemName(item){return item.name;}
function getName(count){if(names){return ngettext.apply(null,names.concat([count]));}}
function setNames(singular,plural){names=[singular,plural];return self;}
function label(name){var prop=properties[name];if(angular.isDefined(prop)&&angular.isDefined(prop.label)){return prop.label;}
return name;}
function defaultNeedsFilterFirstFunction(){return Promise.resolve(false);}
function setNeedsFilterFirstFunction(func){self.needsFilterFirstFunction=func;return self;}}
var registry={resourceTypes:{},defaultSummaryTemplateUrl:false,defaultDetailsTemplateUrl:false,getResourceType:getResourceType,getGlobalActions:getGlobalActions,setDefaultSummaryTemplateUrl:setDefaultSummaryTemplateUrl,getDefaultSummaryTemplateUrl:getDefaultSummaryTemplateUrl,setDefaultDetailsTemplateUrl:setDefaultDetailsTemplateUrl,getDefaultDetailsTemplateUrl:getDefaultDetailsTemplateUrl};function getDefaultSummaryTemplateUrl(){return registry.defaultSummaryTemplateUrl;}
function setDefaultSummaryTemplateUrl(url){registry.defaultSummaryTemplateUrl=url;return registry;}
function getDefaultDetailsTemplateUrl(){return registry.defaultDetailsTemplateUrl;}
function setDefaultDetailsTemplateUrl(url){registry.defaultDetailsTemplateUrl=url;return registry;}
function getGlobalActions(){var actions=[];angular.forEach(registry.resourceTypes,appendActions);return actions;function appendActions(type){actions=actions.concat(type.globalActions);}}
function getResourceType(typeCode){if(!registry.resourceTypes.hasOwnProperty(typeCode)){registry.resourceTypes[typeCode]=new ResourceType(typeCode);}
return registry.resourceTypes[typeCode];}
return registry;}})();(function(){'use strict';angular.module('horizon.framework.util.actions').factory('horizon.framework.util.actions.action-result.service',factory);function factory(){return{getActionResult:getActionResult,getIdsOfType:getIdsOfType};function getIdsOfType(items,type){return items?items.reduce(typeIdReduce,[]):[];function typeIdReduce(accumulator,item){if(angular.isUndefined(type)||item.type===type){accumulator.push(item.id);}
return accumulator;}}
function getActionResult(){return new ActionResult();}
function ActionResult(){this.result={created:[],updated:[],deleted:[],failed:[]};this.created=created;this.updated=updated;this.deleted=deleted;this.failed=failed;function created(type,id){this.result.created.push({type:type,id:id});return this;}
function updated(type,id){this.result.updated.push({type:type,id:id});return this;}
function deleted(type,id){this.result.deleted.push({type:type,id:id});return this;}
function failed(type,id){this.result.failed.push({type:type,id:id});return this;}}}})();(function(){'use strict';angular.module('horizon.framework.util.bind-scope').directive('bindScope',bindScope);function bindScope(){var directive={restrict:'A',link:link};return directive;function link(scope,element,attrs,ctrl,transclude){if(transclude){transclude(scope,function(clone){var detailElt=element.find('[bind-scope-target]');if(detailElt.length){detailElt.append(clone);}});}}}})();(function(){'use strict';var $controller;angular.module('horizon.framework.util.extensible').factory('horizon.framework.util.extensible.service',extensibleService);extensibleService.$inject=['$controller'];function extensibleService(_$controller_){$controller=_$controller_;return makeExtensible;}
function makeExtensible(container,items){container.append=function(item,priority){if(!angular.isNumber(priority)){priority=Infinity;}
var itemsByPosition=getItemsByPosition(items,'last').reverse();var index=items.length;for(var i=0;i<itemsByPosition.length;i++){if(priority>itemsByPosition[i]._ext.priority){index=getItemIndex(items,itemsByPosition[i].id);break;}}
item._ext={position:'last',priority:priority};items.splice(index,0,item);return container;};container.prepend=function(item,priority){if(!angular.isNumber(priority)){priority=Infinity;}
var itemsByPosition=getItemsByPosition(items,'first');var index=itemsByPosition.length;for(var i=0;i<itemsByPosition.length;i++){if(priority<=itemsByPosition[i]._ext.priority){index=getItemIndex(items,itemsByPosition[i].id);break;}}
item._ext={position:'first',priority:priority};items.splice(index,0,item);return container;};container.after=function(id,item,priority){if(!angular.isNumber(priority)){priority=Infinity;}
var itemsByPosition=getItemsByPosition(items,'after-'+id);var index=getItemIndex(items,id)+itemsByPosition.length+1;for(var i=0;i<itemsByPosition.length;i++){if(priority<=itemsByPosition[i]._ext.priority){index=getItemIndex(items,itemsByPosition[i].id);break;}}
item._ext={position:'after-'+id,priority:priority};items.splice(index,0,item);return container;};container.remove=function(id){var index=getItemIndex(items,id);items.splice(index,1);return container;};container.replace=function(id,item){var index=getItemIndex(items,id);container.remove(id);items.splice(index,0,item);return container;};container.controllers=[];container.initControllers=function($scope){angular.forEach(container.controllers,function(ctrl){$controller(ctrl,{$scope:$scope});});};container.addController=function(ctrl){container.controllers.push(ctrl);return container;};}
function getItemsByPosition(items,position){return items.filter(function filterItems(item){return item._ext&&item._ext.position===position;}).sort(function sortItems(a,b){return a._ext.priority-b._ext.priority||1;});}
function getItemIndex(items,id){for(var i=0;i<items.length;i++){if(items[i].id===id){return i;}}
throw new Error(interpolate('Item with id %(id)s not found.',{id:id},true));}})();(function(){'use strict';angular.module('horizon.framework.util.file').factory('horizon.framework.util.file.file-reader',fileReaderService);fileReaderService.$inject=['$q'];function fileReaderService($q){var service={readTextFile:readTextFile};return service;function readTextFile(file,fileReader){var reader=fileReader||new FileReader();var deferred=$q.defer();reader.onloadend=loadEnd;reader.readAsArrayBuffer(file.slice(0,file.size));return deferred.promise;function loadEnd(e){var charArray=new Uint8Array(e.target.result);var textContent=[].map.call(charArray,strFromCharCode).join('');deferred.resolve(textContent);function strFromCharCode(char){return String.fromCharCode(char);}}}}})();(function(){'use strict';angular.module('horizon.framework.util.file').factory('horizon.framework.util.file.text-download',textDownloadService);textDownloadService.$inject=['$q','$timeout'];function textDownloadService($q,$timeout){var service={downloadTextFile:downloadTextFile};return service;function downloadTextFile(text,filename){var blob=new Blob([text],{"type":"text/plain"});window.URL=window.URL||window.webkitURL;var fileUrl=window.URL.createObjectURL(blob);var a=angular.element('<a></a>');a.attr("href",fileUrl);a.attr("download",filename);angular.element(document.body).append(a);var deferred=$q.defer();$timeout(startDownload,0);return deferred.promise;function startDownload(){a[0].click();a.remove();deferred.resolve(filename);}}}})();(function(){'use strict';angular.module('horizon.framework.util.filters').filter('yesno',yesNoFilter).filter('simpleDate',simpleDateFilter).filter('mediumDate',mediumDateFilter).filter('gb',gbFilter).filter('mb',mbFilter).filter('title',titleFilter).filter('noUnderscore',noUnderscoreFilter).filter('noValue',noValueFilter).filter('noName',noNameFilter).filter('decode',decodeFilter).filter('bytes',bytesFilter).filter('itemCount',itemCountFilter).filter('toIsoDate',toIsoDateFilter).filter('limit',limitFilter);yesNoFilter.$inject=['horizon.framework.util.i18n.gettext'];function yesNoFilter(gettext){return function(input){return input?gettext("Yes"):gettext("No");};}
simpleDateFilter.$inject=['$filter'];function simpleDateFilter($filter){return function(input){return $filter('noValue')($filter('date')(input,'short'));};}
mediumDateFilter.$inject=['$filter'];function mediumDateFilter($filter){return function(input){return $filter('noValue')($filter('date')(input,'medium'));};}
function gbFilter(){return function(input){var tb=1024;if(isNaN(input)||null===input){return'';}else if(input>=tb){return interpolate(gettext("%s TB"),[parseFloat(Number(input/tb).toFixed(2))]);}else if(input===''){return interpolate(gettext("0 GB"));}else{return interpolate(gettext("%s GB"),[input.toString()]);}};}
function mbFilter(){return function(input){var gb=1024;if(isNaN(input)||null===input){return'';}else if(input>=gb){return interpolate(gettext("%s GB"),[parseFloat(Number(input/gb).toFixed(2))]);}else if(input===''){return interpolate(gettext("0 MB"));}else{return interpolate(gettext("%s MB"),[input.toString()]);}};}
function titleFilter(){return function(input){if(!angular.isString(input)){return input;}
return input.replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase();});};}
function noUnderscoreFilter(){return function(input){if(!angular.isString(input)){return input;}
return input.replace(/_/g,' ');};}
function noValueFilter(){return function(input,def){if(input===null||angular.isUndefined(input)||angular.isString(input)&&''===input.trim()){return def||gettext('-');}else{return input;}};}
function noNameFilter(){return function(input){return input&&angular.isString(input)?input:gettext('None');};}
function decodeFilter(){return function(input,mapping){var val=mapping[input];return angular.isDefined(val)?val:input;};}
function bytesFilter(){return function(input){var kb=1024;var mb=kb*1024;var gb=mb*1024;var tb=gb*1024;if(isNaN(input)||null===input||input<0){return'';}else if(input>=tb){return interpolate(gettext("%s TB"),[Number(input/tb).toFixed(2)]);}else if(input>=gb){return interpolate(gettext("%s GB"),[Number(input/gb).toFixed(2)]);}else if(input>=mb){return interpolate(gettext("%s MB"),[Number(input/mb).toFixed(2)]);}else if(input>=kb){return interpolate(gettext("%s KB"),[Number(input/kb).toFixed(2)]);}else{return interpolate(gettext("%s bytes"),[Math.floor(input)]);}};}
function itemCountFilter(){function ensureNonNegative(input){var isNumeric=input!==null&&isFinite(input);var number=isNumeric?Math.round(input):0;return number>0?number:0;}
return function(input,totalInput){var format;var count=ensureNonNegative(input);if(angular.isUndefined(totalInput)){format=ngettext('Displaying %s item','Displaying %s items',count);return interpolate(format,[count]);}else{var total=ensureNonNegative(totalInput);format=gettext('Displaying %(count)s of %(total)s items');return interpolate(format,{count:count,total:total},true);}};}
function toIsoDateFilter(){return function(input){return new Date(input).toISOString();};}
limitFilter.$inject=['horizon.framework.util.i18n.gettext'];function limitFilter(gettext){return function(input,value){return angular.isNumber(input)&&input>=0?input:value||gettext('Unlimited');};}})();(function(){'use strict';angular.module('horizon.framework.util.filters').factory('horizon.framework.util.filters.$memoize',$memoize);function $memoize(){return function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=''+(hasher?hasher.apply(this,arguments):key);if(!cache.hasOwnProperty(address)){cache[address]=func.apply(this,arguments);}
return cache[address];};memoize.cache={};return memoize;};}}());(function(){'use strict';angular.module('horizon.framework.util.http',['ngFileUpload']).service('horizon.framework.util.http.service',ApiService);ApiService.$inject=['$http','$window','Upload'];function ApiService($http,$window,uploadService){var httpCall=function(method,url,data,config){var backend=$http;var external=pop(config,'external');if(!external){url=$window.WEBROOT+url;url=url.replace(/\/+/g,'/');}
if(angular.isUndefined(config)){config={};}
config.method=method;config.url=url;if(angular.isDefined(data)){config.data=data;}
if(uploadService.isFile(config.data)){backend=uploadService.http;}else if(angular.isObject(config.data)){for(var key in config.data){if(config.data.hasOwnProperty(key)&&uploadService.isFile(config.data[key])){backend=uploadService.upload;config.data.$$originalJSON=JSON.stringify(config.data);break;}}}
return backend(config);};this.get=function(url,config){return httpCall('GET',url,null,config);};this.post=function(url,data,config){return httpCall('POST',url,data,config);};this.patch=function(url,data,config){return httpCall('PATCH',url,data,config);};this.put=function(url,data,config){return httpCall('PUT',url,data,config);};this.delete=function(url,data,config){return httpCall('DELETE',url,data,config);};}
function pop(obj,key){if(!angular.isObject(obj)){return undefined;}
var value=obj[key];delete obj[key];return value;}}());(function(){'use strict';angular.module('horizon.framework.util.i18n',[]).factory('horizon.framework.util.i18n.gettext',getText).factory('horizon.framework.util.i18n.ngettext',nGetText);getText.$inject=['$window'];function getText($window){var gettextFunc=$window.gettext||function(x){return x;};return function(){return gettextFunc.apply(this,arguments);};}
nGetText.$inject=['$window'];function nGetText($window){var nGettextFunc=$window.ngettext||function(x){return x;};return function(){return nGettextFunc.apply(this,arguments);};}})();(function(){'use strict';angular.module('horizon.framework.util.navigations').factory('horizon.framework.util.navigations.service',navigationsService);function navigationsService(){return{getActivePanelUrl:getActivePanelUrl,collapseAllNavigation:collapseAllNavigation,expandNavigationByUrl:expandNavigationByUrl,setBreadcrumb:setBreadcrumb,isNavigationExists:isNavigationExists};function getActivePanelUrl(){return angular.element('a.openstack-panel.active').attr('href');}
function collapseAllNavigation(){var dashboards=angular.element(".openstack-dashboard").children("a");dashboards.addClass("collapsed").attr("aria-expanded",false);dashboards.siblings("ul").removeClass("in").attr("style","height: 0px");var panelgroups=angular.element(".openstack-panel-group").children("a");panelgroups.addClass("collapsed").attr("aria-expanded",false);panelgroups.siblings("div").removeClass("in").attr("style","height: 0px");angular.element("a.openstack-panel").removeClass("active");}
function expandNavigationByUrl(url){collapseAllNavigation();var labels=[];var panel=angular.element("a.openstack-panel[href='"+url+"']");var panelgroup=panel.parents(".openstack-panel-group").children("a");var dashboard=panel.parents(".openstack-dashboard").children("a");dashboard.removeClass("collapsed").attr("aria-expanded",true);dashboard.siblings("ul").addClass("in").attr("style",null);labels.push(dashboard.text().trim());if(panelgroup.length){panelgroup.removeClass("collapsed").attr("aria-expanded",true);labels.push(panelgroup.text().trim());}
panel.parent().addClass("in").attr("style",null);panel.addClass("active");labels.push(panel.text().trim());return labels;}
function setBreadcrumb(items){var breadcrumb=angular.element("div.page-breadcrumb ol.breadcrumb");breadcrumb.empty();items.forEach(function(item,index,array){var newItem=angular.element("<li>").addClass("breadcrumb-item-truncate");if(array.length-1===index){newItem.addClass("active");}
newItem.text(item);breadcrumb.append(newItem);});}
function isNavigationExists(url){return angular.element("a.openstack-panel[href='"+url+"']").length?true:false;}}})();(function(){'use strict';angular.module('horizon.framework.util.promise-toggle').directive('hzPromiseToggleTemplate',hzPromiseToggleTemplate);hzPromiseToggleTemplate.$inject=['$q','$parse'];function hzPromiseToggleTemplate($q,$parse){var directive={name:null,singlePromiseResolver:null,transclude:'element',priority:2000,terminal:true,restrict:'A',compile:compile,$$tlb:true};return directive;function compile(element,attrs,linker){var input=$parse(attrs[this.name]);var singlePromiseResolver=this.singlePromiseResolver;return resolvePromises;function resolvePromises(scope,iterStartElement){var resolvedInput=input(scope);var promiseResolver=angular.isArray(resolvedInput)?multiPromiseResolver(singlePromiseResolver,resolvedInput):singlePromiseResolver(resolvedInput);promiseResolver.then(linkContent,removeContent);function linkContent(){linker(scope,function(clone){iterStartElement.after(clone);});}
function removeContent(){element.remove();}
function multiPromiseResolver(resolver,arrayInput){return $q.all(arrayInput.map(function(singleInput){return resolver(singleInput);}));}}}}})();(function(){'use strict';angular.module('horizon.framework.util.q').factory('horizon.framework.util.q.extensions',qExtensions);qExtensions.$inject=['$q'];function qExtensions($q){var service={allSettled:allSettled,booleanAsPromise:booleanAsPromise};return service;function allSettled(promiseList){var deferred=$q.defer();var passList=[];var failList=[];var promises=promiseList.map(resolveSingle);$q.all(promises).then(onComplete);return deferred.promise;function resolveSingle(singlePromise,index){var deferredInner=$q.defer();singlePromise.promise.then(onResolve,onReject);return deferredInner.promise;function onResolve(response){passList[index]=formatResponse(response,singlePromise.context);deferredInner.resolve();}
function onReject(response){failList[index]=formatResponse(response,singlePromise.context);deferredInner.resolve();}
function formatResponse(response,context){return{data:response,context:context};}}
function onComplete(){deferred.resolve({pass:condense(passList),fail:condense(failList)});}
function condense(promiseList){return promiseList.filter(function removeEmpty(promise){return!!promise;});}}
function booleanAsPromise(value){var deferred=$q.defer();if(value===true){deferred.resolve();}else{deferred.reject();}
return deferred.promise;}}})();(function(){'use strict';angular.module('horizon.framework.util.tech-debt').controller('DummyController',angular.noop);})();(function(){'use strict';angular.module('horizon.framework.util.tech-debt').factory('horizon.framework.util.tech-debt.helper-functions',helperFunctionsService);helperFunctionsService.$inject=['$rootScope','$compile'];function helperFunctionsService($rootScope,$compile){var service={loadAngular:loadAngular};return service;function loadAngular(element){$compile(element)($rootScope);$rootScope.$apply();}}})();(function(){'use strict';angular.module('horizon.framework.util.tech-debt').directive('imageFileOnChange',imageFileOnChange);function imageFileOnChange(){var directive={require:'ngModel',restrict:'A',link:link};return directive;function link($scope,element,attrs,ngModel){element.bind('change',function(event){var files=event.target.files;var file=files[0];ngModel.$setViewValue(file);$scope.$apply();});}}})();(function(){'use strict';angular.module('horizon.framework.util.uuid',[]).factory('horizon.framework.util.uuid.service',uuidService);function uuidService(){var service={generate:generate};return service;function generate(){var d=new Date().getTime();var uuid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==='x'?r:(r&0x3|0x8)).toString(16);});return uuid;}}})();(function(){'use strict';angular.module('horizon.framework.util.validators').directive('hzPasswordMatch',hzPasswordMatch);function hzPasswordMatch(){return{restrict:'A',require:'ngModel',link:link};function link(scope,element,attr,ngModelCtrl){scope.$watch(attr.hzPasswordMatch,function(value){scope.passwordConfirm=value;ngModelCtrl.$validate();});ngModelCtrl.$validators.check=function(modelValue,viewValue){var value=modelValue||viewValue;return value===scope.passwordConfirm;};}}})();(function(){'use strict';angular.module('horizon.framework.util.validators').directive('validateNumberMax',validateNumberMax);function validateNumberMax(){var directive={require:'ngModel',restrict:'A',link:link};return directive;function link(scope,element,attrs,ctrl){if(!ctrl){return;}
ctrl.$parsers.push(maxValidator);ctrl.$formatters.push(maxValidator);attrs.$observe('validateNumberMax',function(){maxValidator(ctrl.$modelValue);});function maxValidator(value){var max=scope.$eval(attrs.validateNumberMax);if(angular.isDefined(max)&&!ctrl.$isEmpty(value)&&value>max){ctrl.$setValidity('validateNumberMax',false);}else{ctrl.$setValidity('validateNumberMax',true);}
return value;}}}})();(function(){'use strict';angular.module('horizon.framework.util.validators').directive('validateNumberMin',validateNumberMin);function validateNumberMin(){var directive={require:'ngModel',restrict:'A',link:link};return directive;function link(scope,element,attrs,ctrl){if(!ctrl){return;}
ctrl.$parsers.push(minValidator);ctrl.$formatters.push(minValidator);attrs.$observe('validateNumberMin',function(){minValidator(ctrl.$modelValue);});function minValidator(value){var min=scope.$eval(attrs.validateNumberMin);if(angular.isDefined(min)&&!ctrl.$isEmpty(value)&&value<min){ctrl.$setValidity('validateNumberMin',false);}else{ctrl.$setValidity('validateNumberMin',true);}
return value;}}}})();(function(){'use strict';angular.module('horizon.framework.util.validators').directive('validateUnique',validateUnique);function validateUnique(){var directive={require:'ngModel',restrict:'A',link:link};return directive;function link(scope,element,attrs,ctrl){ctrl.$parsers.push(validate);ctrl.$formatters.push(validate);attrs.$observe('validateUnique',function(){validate(ctrl.$modelValue);});function validate(value){var param=scope.$eval(attrs.validateUnique);var unique=true;if(angular.isArray(param)&&param.length>0){unique=param.indexOf(value)<0;}else if(angular.isFunction(param)){unique=param(value);}
ctrl.$setValidity('unique',unique);return value;}}}})();(function(){'use strict';angular.module('horizon.framework.util.workflow').factory('horizon.framework.util.workflow.service',workflowService);workflowService.$inject=['horizon.framework.util.extensible.service'];function workflowService(extensibleService){return function createWorkflow(spec,decorators){angular.forEach(decorators,function decorate(decorator){decorator(spec);});extensibleService(spec,spec.steps);return spec;};}})();(function(){'use strict';angular.module('horizon.framework.widgets.action-list').directive('actionList',actionList);function actionList(){var directive={link:link,restrict:'E'};return directive;function link(scope,element){element.addClass('btn-group');}}})();(function(){'use strict';angular.module('horizon.framework.widgets.action-list').directive('action',action);action.$inject=['horizon.framework.widgets.basePath'];function action(path){var directive={link:link,restrict:'E',scope:{actionClasses:'=?',callback:'=?',disabled:'=?',item:'=?'},templateUrl:templateUrl,transclude:true};return directive;function link(scope,element){element.children().first().unwrap();}
function templateUrl(element,attrs){var buttonType=attrs.buttonType||'action';return path+'action-list/'+buttonType+'.html';}}})();(function(){'use strict';angular.module('horizon.framework.widgets.action-list').controller('horizon.framework.widgets.action-list.ActionsController',ActionsController);ActionsController.$inject=['$q','$scope'];function ActionsController($q,$scope){var ctrl=this;ctrl.disabled=false;ctrl.passThroughCallbacks={};ctrl.generateDynamicCallback=generateDynamicCallback;function generateDynamicCallback(service,index,resultHandler){var dynCallbackName="callback"+index;ctrl.passThroughCallbacks[dynCallbackName]=function genPassThroughCallback(item){if(ctrl.disabled){return undefined;}
preAction();var result=service.perform(item,$scope.$new());$q.when(result).then(postAction,postAction);return resultHandler?resultHandler(result):result;};return'actionsCtrl.passThroughCallbacks.'+dynCallbackName;}
function preAction(){ctrl.disabled=true;}
function postAction(){ctrl.disabled=false;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.action-list').directive('actions',actions);actions.$inject=['$parse','horizon.framework.widgets.action-list.actions.service'];function actions($parse,actionsService){var directive={link:link,restrict:'E',scope:true,controller:'horizon.framework.widgets.action-list.ActionsController as actionsCtrl'};return directive;function link(scope,element,attrs,actionsController){var listType=attrs.type;var item=attrs.item;var allowedActions;var resultHandler=$parse(attrs.resultHandler)(scope);var actionsParam=$parse(attrs.allowed)(scope);if(angular.isFunction(actionsParam)){allowedActions=actionsParam();}else{allowedActions=actionsParam;}
var service=actionsService({scope:scope,element:element,ctrl:actionsController,listType:listType,item:item,resultHandler:resultHandler});service.renderActions(allowedActions);}}})();(function(){'use strict';var dangerTypes={'delete':1,'danger':1,'delete-selected':1};angular.module('horizon.framework.widgets.action-list').factory('horizon.framework.widgets.action-list.actions.service',actionsService);actionsService.$inject=['$compile','$http','$parse','$q','$templateCache','horizon.framework.widgets.basePath','horizon.framework.util.q.extensions'];function actionsService($compile,$http,$parse,$q,$templateCache,basePath,$qExtensions){return function(spec){return createService(spec.scope,spec.element,spec.ctrl,spec.listType,spec.item,spec.resultHandler);};function createService(scope,element,ctrl,listType,item,resultHandler){var service={renderActions:renderActions};return service;function renderActions(allowedActions){allowedActions.forEach(function(allowedAction){allowedAction.promise=getPermissions(allowedAction);allowedAction.context=allowedAction;});$qExtensions.allSettled(allowedActions).then(renderPermittedActions);function getPermissions(allowedAction){if(listType==='batch'){return allowedAction.service.allowed();}else{var itemVal=$parse(item)(scope);return allowedAction.service.allowed(itemVal);}}}
function renderPermittedActions(permittedActions){if(permittedActions.pass.length>0){var templateFetch=$q.all(permittedActions.pass.map(getTemplate));if(listType==='detail'){templateFetch.then(addDetailActions);}else if(listType==='batch'||permittedActions.pass.length===1){element.addClass('btn-addon');templateFetch.then(addButtons);}else{templateFetch.then(addDropdown);}}}
function addDetailActions(templates){var row=angular.element('<div class="row"></div>');element.append(row);templates.forEach(function renderDetailAction(template){var templateElement=angular.element(template.template);templateElement.find('action').attr('callback',template.callback);row.append($compile(templateElement)(scope));});}
function addButtons(templates){templates.forEach(addTemplate);}
function addTemplate(template){element.append(renderButton(template,scope));}
function addDropdown(templates){var splitButton=getSplitButton(templates[0]);var actionList=[];for(var iCnt=1;iCnt<templates.length;iCnt++){actionList.push(getMenuButton(templates[iCnt]));}
var actionListElem=renderList(actionList,splitButton,scope);element.append($compile(actionListElem)(scope));}
function renderButton(actionTemplate,scope){var actionElement=angular.element(actionTemplate.template);actionElement.attr('callback',actionTemplate.callback);var actionListElem=angular.element('<action-list>');actionListElem.addClass('btn-addon');actionListElem.append(actionElement);return $compile(actionListElem)(scope);}
function renderList(actionList,splitButton,scope){var actionListElem=angular.element('<action-list uib-dropdown>');actionListElem.attr('dropdown','true');actionListElem.append(splitButton);actionListElem.append(getMenu(actionList,scope));return actionListElem;}
function getSplitButton(actionTemplate){var actionElement=angular.element(actionTemplate.template);actionElement.attr('button-type','split-button');actionElement.attr('action-classes',actionElement.attr('action-classes'));actionElement.attr('callback',actionTemplate.callback);return actionElement;}
function getMenu(actionList){var menuElem=angular.element('<menu>');menuElem.append(actionList);return menuElem;}
function getMenuButton(actionTemplate){var actionElement=angular.element(actionTemplate.template);actionElement.attr('button-type','menu-item');actionElement.attr('callback',actionTemplate.callback);return actionElement;}
function getTemplate(permittedAction,index,permittedActions){var defered=$q.defer();var action=permittedAction.context;var url=getTemplateUrl(action,permittedActions.length);$http.get(url,{cache:$templateCache}).then(onTemplateGet);return defered.promise;function onTemplateGet(response){var callback=ctrl.generateDynamicCallback(action.service,index,resultHandler);var template=response.data.replace('$action-classes$',getActionClasses(action,index,permittedActions.length)).replace('$icon$',action.template.icon).replace('$text$',action.template.text).replace('$title$',action.template.title).replace('$description$',action.template.description).replace('$panel-classes$',action.template.type in dangerTypes?'panel-danger':'panel-info').replace('$item$',item);defered.resolve({template:template,type:action.template.type||'button',callback:callback});}}
function getActionClasses(action,index,numPermittedActions){var actionClassesParam=action.template.actionClasses||"";var actionClasses='btn ';if(listType==='row'){if(numPermittedActions===1||index===0){if(action.template.type in dangerTypes){actionClasses+='btn-danger ';}else{actionClasses+='btn-default ';}
return actionClasses+actionClassesParam;}else{if(action.template.type in dangerTypes){return'text-danger'+actionClassesParam;}else{return actionClassesParam;}}}else if(listType==='detail'){if(action.template.type in dangerTypes){actionClasses+='btn-danger';}else{actionClasses+='btn-primary';}
return actionClasses;}else{return actionClassesParam;}}
function getTemplateUrl(action){if(angular.isDefined(action.template.url)){return action.template.url;}else if(angular.isDefined(action.template.type)&&listType!=='detail'){return basePath+'action-list/actions-'+action.template.type+'.template.html';}else{return basePath+'action-list/actions-'+listType+'.template.html';}}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.action-list').directive('buttonTooltip',buttonTooltip);buttonTooltip.$inject=['$compile','$http','$templateCache','horizon.framework.widgets.action-list.tooltipConfig'];function buttonTooltip($compile,$http,$templateCache,tooltipConfig){var directive={link:link,restrict:'A',scope:{btDisabled:'=?',btMessage:'=buttonTooltip',btModel:'=?',btPlacement:'=?'}};return directive;function link(scope,element){var tooltip=scope.btModel||{};var template=tooltip.template||tooltipConfig.defaultTemplate;if(tooltip.templateUrl){$http.get(tooltip.templateUrl,{cache:$templateCache}).then(function(response){template=response.data;});}
element.on('blur','button',btnBlur);element.on('mousedown',btnMouseDown);element.on('mouseup',btnMouseUp);function btnBlur(){element.popover('destroy');}
function btnMouseDown(){if(!scope.btDisabled){var popoverElt=element.next('.popover');if(popoverElt.length){element.popover('destroy');}else{createTooltip();}
return false;}}
function btnMouseUp(){if(!scope.btDisabled){element.find('button').first().focus();}}
function createTooltip(){var tooltipData=angular.extend({},tooltip.data);tooltipData.message=scope.btMessage||tooltipConfig.defaultMessage.message;var tooltipScope=scope.$new(true);angular.extend(tooltipScope,tooltipData);tooltipScope.element=element;var compiledTemplate=$compile(template)(tooltipScope);tooltipScope.$apply();var options={content:compiledTemplate,html:true,placement:scope.btPlacement||'left',trigger:'manual'};element.popover(options);element.popover('show');}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.action-list').factory('horizon.framework.widgets.action-list.button-tooltip.row-warning.service',tooltip);tooltip.$inject=['$timeout','horizon.framework.widgets.basePath'];function tooltip($timeout,path){var service={templateUrl:path+'action-list/warning-tooltip.html',data:{clickMessage:gettext('Click here to expand the row and view the errors.'),expandDetail:expandDetail}};return service;function expandDetail(){var row=this.element.closest('tr');if(!row.hasClass('expanded')){$timeout(function(){row.find('[hz-expand-detail]').click();},0,false);}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.action-list').directive('menu',menu);menu.$inject=['horizon.framework.widgets.basePath'];function menu(path){var directive={link:link,restrict:'E',templateUrl:path+'action-list/menu.html',transclude:true};return directive;function link(scope,element,attrs,ctrl,transclude){var menu=element.find('ul');transclude(scope,function(clone){menu.append(clone);});menu.unwrap();}}})();(function(){'use strict';angular.module('horizon.framework.widgets.charts').directive('chartTooltip',chartTooltip);chartTooltip.$inject=['horizon.framework.widgets.basePath'];function chartTooltip(path){var directive={restrict:'E',scope:{tooltip:'=tooltipData'},templateUrl:path+'charts/chart-tooltip.html'};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.charts').directive('pieChart',pieChart);pieChart.$inject=['horizon.framework.widgets.basePath','horizon.framework.widgets.charts.donutChartSettings'];function pieChart(path,donutChartSettings){var directive={link:link,replace:true,restrict:'E',scope:{chartData:'=',chartSettings:'='},templateUrl:path+'charts/pie-chart.html'};return directive;function link(scope,element){var d3Elt,arc,pie;function updateChartVisibility(){var showChart=scope.chartData.maxLimit!==Infinity;scope.chartData.showChart=showChart;scope.chartData.chartless=showChart?'':'chartless';return showChart;}
var settings={};var showChart=updateChartVisibility();if(angular.isObject(scope.chartSettings)){settings=scope.chartSettings;}else{settings=angular.extend({},donutChartSettings,scope.chartSettings);}
settings.diameter=settings.outerRadius*2;var model={settings:settings,tooltipData:{enabled:false,icon:settings.tooltipIcon,style:angular.extend({},settings.tooltip)}};if(showChart){d3Elt=d3.select(element[0]);arc=d3.svg.arc().outerRadius(settings.outerRadius).innerRadius(settings.innerRadius);pie=d3.layout.pie().sort(null).value(function(d){return d.value;});}
var unwatch=scope.$watch('chartData',updateChart);scope.$on('$destroy',unwatch);scope.model=model;function updateChart(){var showChart=updateChartVisibility();angular.forEach(scope.chartData.data,function(item){if(item.value===Infinity){item.hideKey=true;}});function getChartLabel(type,total,unit){if(unit){var totalWithUnit=total+" "+unit;}
return interpolate(gettext('%(total)s %(type)s'),{total:totalWithUnit||total,type:type},true);}
if(!showChart){scope.model.total=null;scope.model.totalLabel=gettext('No Limit');}else if(angular.isDefined(scope.chartData.maxLimit)){scope.model.total=scope.chartData.maxLimit;scope.model.totalLabel=getChartLabel("Max",scope.model.total,scope.chartData.unit);}else{scope.model.total=d3.sum(scope.chartData.data,function(d){return d.value;});scope.model.totalLabel=getChartLabel("Total",scope.model.total,scope.chartData.unit);}
scope.model.tooltipData.enabled=false;if(showChart){var chart=d3Elt.select('.slices').selectAll('path.slice').data(pie(scope.chartData.data));chart.enter().append('path').attr('class','slice').attr('d',arc);chart.each(function(d){var slice=d3.select(this);if(d.data.color){slice.style('fill',d.data.color);}else if(d.data.colorClass){slice.classed(d.data.colorClass,true);}});chart.on('mouseenter',function(d){showTooltip(d,this);}).on('mouseleave',clearTooltip);chart.transition().duration(500).attrTween('d',function animate(d){this.lastAngle=this.lastAngle||{startAngle:0,endAngle:0};var interpolate=d3.interpolate(this.lastAngle,d);this.lastAngle=interpolate(0);return function(t){return arc(interpolate(t));};});chart.exit().remove();}}
function showTooltip(d,elt){scope.$apply(function(){var chartElt=element[0];var eltHeight=chartElt.getBoundingClientRect().height;var titleHeight=chartElt.querySelector('div.pie-chart-title').getBoundingClientRect().height;var point=d3.mouse(elt);var outerRadius=scope.model.settings.outerRadius;var x=point[0]+outerRadius;var y=eltHeight-point[1]-outerRadius-titleHeight;var newTooltipData={label:d.data.label,value:d.data.value,enabled:true,iconColor:d.data.color,iconClass:d.data.colorClass,style:{left:x+'px',bottom:y+'px'}};angular.extend(scope.model.tooltipData,newTooltipData);});}
function clearTooltip(){scope.$apply(function(){scope.model.tooltipData.enabled=false;});}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.contenteditable').directive('contenteditable',contenteditable);function contenteditable(){var directive={restrict:'A',require:'?ngModel',link:link};return directive;function link(scope,element,attrs,ngModel){if(!ngModel){return;}
ngModel.$render=function(){element.html(ngModel.$viewValue||'');};element.on('blur keyup change',function(){scope.$evalAsync(read);});read();function read(){ngModel.$setViewValue(element.html());}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.details').directive('hzDetails',hzDetails);hzDetails.$inject=['$window'];function hzDetails($window){var directive={restrict:'E',scope:{views:'=',context:'=',defaultTemplateUrl:'='},templateUrl:$window.STATIC_URL+'framework/widgets/details/details.html'};return directive;}})();(function(){"use strict";angular.module('horizon.framework.widgets.details').controller('RoutedDetailsViewController',controller);controller.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.framework.redirect','horizon.framework.util.actions.action-result.service','horizon.framework.util.navigations.service','horizon.framework.widgets.modal-wait-spinner.service','$location','$q','$routeParams'];function controller(registry,redirect,resultService,navigationsService,spinnerService,$location,$q,$routeParams){var ctrl=this;if(!registry.resourceTypes[$routeParams.type]){redirect.notFound();}
ctrl.resourceType=registry.getResourceType($routeParams.type);ctrl.context={};ctrl.context.identifier=ctrl.resourceType.parsePath($routeParams.path);ctrl.context.loadPromise=ctrl.resourceType.load(ctrl.context.identifier);ctrl.context.loadPromise.then(loadData,loadDataError);ctrl.defaultTemplateUrl=registry.getDefaultDetailsTemplateUrl();ctrl.resultHandler=actionResultHandler;ctrl.pageNotFound=redirect.notFound;checkRoutedByDjango(ctrl.resourceType);function checkRoutedByDjango(resourceType){var routedByDjango=angular.element("ngdetails").attr("routed-by-django");if(routedByDjango==="True"){var url=resourceType.getDefaultIndexUrl();var query=$location.search();if(query.hasOwnProperty("nav")){url=query.nav;}
if(!navigationsService.isNavigationExists(url)){pageNotFound();}
var labels=navigationsService.expandNavigationByUrl(url);navigationsService.setBreadcrumb(labels);angular.element("ngdetails").removeAttr("routed-by-django");}}
function actionResultHandler(returnValue){return $q.when(returnValue,actionSuccessHandler);}
function loadData(response){spinnerService.hideModalSpinner();ctrl.showDetails=true;ctrl.resourceType.initActions();ctrl.itemData=response.data;ctrl.itemName=ctrl.resourceType.itemName(response.data);}
function loadDataError(error){if(error.status===404){redirect.notFound();}}
function loadIndexView(){spinnerService.hideModalSpinner();ctrl.showDetails=false;var url=navigationsService.getActivePanelUrl();$location.url(url);}
function actionSuccessHandler(result){if(result.failed&&result.deleted&&result.failed.length===0&&result.deleted.length>0){loadIndexView();}else if(result){spinnerService.showModalSpinner(gettext('Please Wait'));ctrl.showDetails=false;ctrl.context.loadPromise=ctrl.resourceType.load(ctrl.context.identifier);return ctrl.context.loadPromise.then(loadData);}}}})();(function(){'use strict';angular.module('schemaForm').provider('hzBuilder',provider);function provider(){var builders={tabsBuilder:tabsBuilder};this.$get=function(){return builders;};function tabsBuilder(args){if(args.form.tabs&&args.form.tabs.length>0){var tabLi=args.fieldFrag.querySelector('li');tabLi.setAttribute('ng-if','!tab.condition ? true : evalExpr(tab.condition, { model: model, "arrayIndex": $index })');var tabContent=args.fieldFrag.querySelector('.tab-content');args.form.tabs.forEach(function(tab,index){tab.items.forEach(function(item){if(item.required){tab.required=true;}});var div=document.createElement('div');div.setAttribute('ng-show','model.tabs.selected === '+index);div.setAttribute('ng-if',tab.condition||true);var childFrag=args.build(tab.items,args.path+'.tabs['+index+'].items',args.state);div.appendChild(childFrag);tabContent.appendChild(div);});}}}})();(function(){'use strict';angular.module('schemaForm').config(config);config.$inject=['schemaFormDecoratorsProvider','sfBuilderProvider','sfPathProvider','sfErrorMessageProvider','$windowProvider','hzBuilderProvider'];function config(decoratorsProvider,sfBuilderProvider,sfPathProvider,sfErrorMessageProvider,$windowProvider,hzBuilderProvider){var base=$windowProvider.$get().STATIC_URL+'framework/widgets/form/fields/';var simpleTransclusion=sfBuilderProvider.builders.simpleTransclusion;var ngModelOptions=sfBuilderProvider.builders.ngModelOptions;var ngModel=sfBuilderProvider.builders.ngModel;var sfField=sfBuilderProvider.builders.sfField;var condition=sfBuilderProvider.builders.condition;var array=sfBuilderProvider.builders.array;var tabs=hzBuilderProvider.$get().tabsBuilder;var defaults=[sfField,ngModel,ngModelOptions,condition];decoratorsProvider.defineDecorator('bootstrapDecorator',{textarea:{template:base+'textarea.html',builder:defaults},fieldset:{template:base+'fieldset.html',builder:[sfField,simpleTransclusion,condition]},array:{template:base+'array.html',builder:[sfField,ngModelOptions,ngModel,array,condition]},tabarray:{template:base+'tabarray.html',builder:[sfField,ngModelOptions,ngModel,array,condition]},tabs:{template:base+'tabs.html',builder:[sfField,ngModelOptions,tabs,condition]},section:{template:base+'section.html',builder:[sfField,simpleTransclusion,condition]},conditional:{template:base+'section.html',builder:[sfField,simpleTransclusion,condition]},select:{template:base+'select.html',builder:defaults},checkbox:{template:base+'checkbox.html',builder:defaults},checkboxes:{template:base+'checkboxes.html',builder:[sfField,ngModelOptions,ngModel,array,condition]},number:{template:base+'default.html',builder:defaults},password:{template:base+'default.html',builder:defaults},submit:{template:base+'submit.html',builder:defaults},button:{template:base+'submit.html',builder:defaults},radios:{template:base+'radios.html',builder:defaults},'radios-inline':{template:base+'radios-inline.html',builder:defaults},radiobuttons:{template:base+'radio-buttons.html',builder:defaults},'password-confirm':{template:base+'password-confirm.html',builder:defaults},help:{template:base+'help.html',builder:defaults},'default':{template:base+'default.html',builder:defaults}},[]);var defaultMessages={"default":gettext("The data in this field is invalid"),0:gettext("Invalid type, expected {$schema.type$}"),1:gettext("No enum match for: {$viewValue$}"),10:gettext("Data does not match any schemas from 'anyOf'"),11:gettext("Data does not match any schemas from 'oneOf'"),12:gettext("Data is valid against more than one schema from 'oneOf'"),13:gettext("Data matches schema from 'not'"),100:gettext("{$viewValue$} is not a multiple of {$schema.multipleOf$}"),101:gettext("{$viewValue$} is less than the allowed minimum of {$schema.minimum$}"),102:gettext("{$viewValue$} is equal to the exclusive minimum {$schema.minimum$}"),103:gettext("{$viewValue$} is greater than the allowed maximum of {$schema.maximum$}"),104:gettext("{$viewValue$} is equal to the exclusive maximum {$schema.maximum$}"),105:gettext("{$viewValue$} is not a valid number"),200:gettext("{$schema.title$} is too short ({$viewValue.length$} characters), minimum {$schema.minLength$}"),201:gettext("{$schema.title$} is too long ({$viewValue.length$} characters), maximum {$schema.maxLength$}"),202:gettext("{$schema.title$} is formatted incorrectly"),300:gettext("Too few properties defined, minimum {$schema.minProperties$}"),301:gettext("Too many properties defined, maximum {$schema.maxProperties$}"),302:gettext("{$schema.title$} is a required field"),303:gettext("Additional properties not allowed"),304:gettext("Dependency failed - key must exist"),400:gettext("Array is too short ({$value.length$} items), minimum {$schema.minItems$}"),401:gettext("Array is too long ({$value.length$} items), maximum {$schema.maxItems$}"),402:gettext("Array items must be unique"),403:gettext("Additional items not allowed"),500:gettext("Format validation failed"),501:gettext("Keyword failed: '{$title$}'"),600:gettext("Circular $refs"),1000:gettext("Unknown property (not in schema)")};sfErrorMessageProvider.setDefaultMessages(defaultMessages);}})();(function(){'use strict';angular.module('horizon.framework.widgets.form').controller('horizon.framework.widgets.form.ModalFormController',controller);controller.$inject=['$uibModalInstance','context'];function controller($uibModalInstance,context){var ctrl=this;ctrl.formTitle=context.schema.title||context.title;ctrl.form=context.form;ctrl.schema=context.schema;ctrl.model=context.model;ctrl.submit=submit;ctrl.submitText=context.submitText;ctrl.submitIcon=context.submitIcon;ctrl.cancel=cancel;ctrl.helpUrl=context.helpUrl;function submit($event,schemaForm){$event.preventDefault();$event.stopPropagation();if(!schemaForm.$invalid){return $uibModalInstance.close(context);}}
function cancel(){return $uibModalInstance.dismiss(context);}
return ctrl;}})();(function(){'use strict';angular.module('horizon.framework.widgets.form').factory('horizon.framework.widgets.form.ModalFormService',service);service.$inject=['$uibModal','horizon.framework.widgets.basePath'];function service($uibModal,widgetsBasePath){var service={open:open};return service;function open(config){var modalConfig={backdrop:'static',size:config.size||'lg',resolve:{context:function(){return{title:config.title,submitText:config.submitText||gettext("Submit"),submitIcon:config.submitIcon||"check",schema:config.schema,form:config.form,model:config.model,helpUrl:config.helpUrl};}},controller:'horizon.framework.widgets.form.ModalFormController as ctrl',templateUrl:widgetsBasePath+'form/modal-form.html'};return $uibModal.open(modalConfig).result;}}})();(function(){'use strict';angular.module("horizon.framework.widgets.headers").directive('hzPageHeader',hzPageHeader);hzPageHeader.$inject=['horizon.framework.widgets.headers.basePath'];function hzPageHeader(basePath){var directive={restrict:'E',scope:{header:'@',description:'@'},templateUrl:basePath+'hz-page-header.html',transclude:true};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.help-panel').directive('helpPanel',helpPanel);helpPanel.$inject=['horizon.framework.widgets.basePath','horizon.framework.util.uuid.service'];function helpPanel(path,uuid){var link=function(scope){scope.uuid=uuid.generate();};var directive={templateUrl:path+'help-panel/help-panel.html',link:link,transclude:true};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.load-edit').directive('loadEdit',loadEdit);loadEdit.$inject=['$timeout','horizon.framework.util.file.file-reader','horizon.framework.widgets.load-edit.basePath'];function loadEdit($timeout,fileReader,basePath){var directive={restrict:'E',scope:{title:'@',model:'=',maxBytes:'@',key:'@',required:'=',rows:'@',onTextareaChange:'&'},link:link,templateUrl:basePath+'load-edit.html'};return directive;function link($scope,$element){var textarea=$element.find('textarea');var fileInput=$element.find('input[type="file"]');$scope.textContent='';$scope.fileApiSupported=!!FileReader;textarea.on('input propertychange',onTextareaChange);fileInput.on('change',onFileLoad);var textContentWatcher=$scope.$watch(function(){return $scope.textContent;},function(){if(fileInput.val()!==""){fileInput.val(null);}},true);$scope.$on('$destroy',function(){textContentWatcher();});function onTextareaChange(){$scope.$applyAsync(function(){$scope.textBytes=getStrByte(textarea.val());$scope.model=$scope.textContent;if($scope.textBytes>0){$scope.textModified=true;}else{$scope.textModified=false;}
$scope.onTextareaChange({textContent:$scope.textContent});});}
function onFileLoad(event){var file=event.originalEvent.target.files[0];if(file){fileReader.readTextFile(file).then(updateTextArea);}}
function updateTextArea(fileContents){$scope.textContent=fileContents;$timeout(function(){onTextareaChange();$scope.textModified=false;},250,false);textarea.focus();}
function getStrByte(str){return(new Blob([str],{type:"text/plain"})).size;}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.magic-search').directive('hzMagicSearchBar',hzMagicSearchBar);hzMagicSearchBar.$inject=['horizon.framework.widgets.basePath'];function hzMagicSearchBar(basePath){var directive={compile:compile,restrict:'E',scope:true,templateUrl:basePath+'magic-search/hz-magic-search-bar.html'};return directive;function link(){}
function compile(element){var templateUrl=basePath+'magic-search/magic-search.html';element.find('magic-search').attr('template',templateUrl);element.addClass('hz-magic-search-bar');return link;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.magic-search').directive('hzMagicSearchContext',hzMagicSearchContext);hzMagicSearchContext.$inject=['$parse','horizon.framework.widgets.magic-search.events'];function hzMagicSearchContext($parse,magicSearchEvents){var directive={link:link,restrict:'E',scope:true};return directive;function link(scope,element,attrs){var filterStrings=$parse(attrs.filterStrings)(scope);var clientFullTextSearch=$parse(attrs.clientFullTextSearch)(scope);var searchSettingsCallback=$parse(attrs.searchSettingsCallback)(scope);scope.searchSettingsCallback=searchSettingsCallback;scope.clientFullTextSearch=angular.isDefined(clientFullTextSearch)?clientFullTextSearch:true;var defaultFilterStrings={cancel:gettext('Cancel'),prompt:gettext('Click here for filters or full text search.'),remove:gettext('Remove'),text:scope.clientFullTextSearch?gettext('Search in current results'):gettext('Full Text Search')};scope.filterStrings=filterStrings||defaultFilterStrings;if(angular.isDefined(searchSettingsCallback)){scope.showSettings=true;}else{scope.showSettings=false;}
scope.$on(magicSearchEvents.SEARCH_UPDATED,resend);scope.$on(magicSearchEvents.TEXT_SEARCH,resend);scope.$on(magicSearchEvents.CHECK_FACETS,resend);scope.$on(magicSearchEvents.FACETS_CHANGED,resend);scope.$on(magicSearchEvents.SERVER_SEARCH_UPDATED,resend);if(angular.isUndefined(scope.filterFacets)){scope.$watch(attrs.filterFacets,function(newValue){scope.filterFacets=newValue;});}
function resend(event,data){scope.$broadcast(event.name+'-ms-context',data);}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.magic-search').controller('MagicSearchController',magicSearchController);magicSearchController.$inject=['$scope','$element','$timeout','$window','horizon.framework.widgets.magic-search.service','horizon.framework.widgets.magic-search.events'];function magicSearchController($scope,$element,$timeout,$window,service,magicSearchEvents){var ctrl=this;var searchInput=$element.find('.search-input');ctrl.mainPromptString=$scope.strings.prompt;ctrl.currentSearch=[];ctrl.isMenuOpen=false;searchInput.on('keydown',keyDownHandler);searchInput.on('keyup',keyUpHandler);searchInput.on('keypress',keyPressHandler);$element.find('.search-main-area').on('click',searchMainClickHandler);ctrl.facetClicked=facetClickHandler;ctrl.optionClicked=optionClickHandler;ctrl.removeFacet=removeFacet;ctrl.clearSearch=clearSearch;ctrl.isMatchLabel=function(label){return angular.isArray(label);};ctrl.unusedFacetChoices=[];ctrl.facetChoices=[];initSearch(service.getSearchTermsFromQueryString($window.location.search));emitQuery();$scope.$on(magicSearchEvents.INIT_SEARCH,function(event,data){if(data){if(data.textSearch){ctrl.textSearch=data.textSearch;}else{ctrl.textSearch=undefined;searchInput.val('');}
initSearch(data.magicSearchQuery||[]);}});function initSearch(initialSearchTerms){ctrl.facetChoices=service.getFacetChoicesFromFacetsParam($scope.facets_param);initFacets(initialSearchTerms);}
function keyDownHandler($event){var key=service.getEventCode($event);if(key===9){$event.preventDefault();}else if(key===8){backspaceKeyDown();}}
function tabKeyUp(){if(angular.isUndefined(ctrl.facetSelected)){if(ctrl.filteredObj.length!==1){return;}
ctrl.facetClicked(0,'',ctrl.filteredObj[0].name);}else{if(angular.isUndefined(ctrl.filteredOptions)||ctrl.filteredOptions.length!==1){return;}
ctrl.optionClicked(0,'',ctrl.filteredOptions[0].key);resetState();}}
function escapeKeyUp(){if(angular.isDefined(ctrl.facetSelected)){setMenuOpen(true);}else{setMenuOpen(false);}
resetState();var textFilter=ctrl.textSearch;if(angular.isUndefined(textFilter)){textFilter='';}
emitTextSearch(textFilter);}
function enterKeyUp(){var searchVal=searchInput.val();if(searchVal!==''){if(ctrl.facetSelected){var curr=ctrl.facetSelected;curr.name=curr.name.split('=')[0]+'='+searchVal;curr.label[1]=searchVal;ctrl.currentSearch.push(curr);resetState();emitQuery();setMenuOpen(true);}else{ctrl.currentSearch=ctrl.currentSearch.filter(notTextSearch);ctrl.currentSearch.push(service.getTextFacet(searchVal,$scope.strings.text));$scope.$apply();setMenuOpen(true);setSearchInput('');emitTextSearch(searchVal);ctrl.textSearch=searchVal;}}else if(ctrl.isMenuOpen){setMenuOpen(false);}else{setMenuOpen(true);}
ctrl.filteredObj=ctrl.unusedFacetChoices;}
function backspaceKeyDown(){var searchVal=searchInput.val();if(searchVal===''){if(ctrl.currentSearch.length>0&&angular.isUndefined(ctrl.facetSelected)){ctrl.removeFacet(ctrl.currentSearch.length-1);setMenuOpen(true);}else{escapeKeyUp();}}}
function backspaceKeyUp(){var searchVal=searchInput.val();if(searchVal===''&&angular.isUndefined(ctrl.facetSelected)){if(ctrl.currentSearch.length===0){ctrl.clearSearch();}else{resetState();emitTextSearch(ctrl.textSearch||'');}}else{filterFacets(searchVal);}}
function deleteKeyUp(){return backspaceKeyUp();}
function notTextSearch(item){return item.name.indexOf('text')!==0;}
function defaultKeyUp(){var searchVal=searchInput.val();filterFacets(searchVal);}
function keyUpHandler($event){if($event.metaKey===true){return;}
var key=service.getEventCode($event);var handlers={8:backspaceKeyUp,9:tabKeyUp,27:escapeKeyUp,13:enterKeyUp,46:deleteKeyUp};if(handlers[key]){handlers[key]();}else{defaultKeyUp();}}
function keyPressHandler($event){var searchVal=searchInput.val();var key=service.getEventCode($event);if(key!==8&&key!==46&&key!==13&&key!==9&&key!==27){searchVal=searchVal+String.fromCharCode(key).toLowerCase();}
if(searchVal===' '){setMenuOpen(true);setSearchInput('');return;}
if(searchVal===''){return;}
if(key!==8&&key!==46&&!(key>=37&&key<=40)){filterFacets(searchVal);}}
function filterFacets(searchVal){var filtered=[];var isTextSearch=angular.isUndefined(ctrl.facetSelected);if(isTextSearch){ctrl.filteredObj=ctrl.unusedFacetChoices;filtered=service.getMatchingFacets(ctrl.filteredObj,searchVal);}else{ctrl.filteredOptions=ctrl.facetOptions;if(angular.isUndefined(ctrl.facetOptions)){return;}
filtered=service.getMatchingOptions(ctrl.filteredOptions,searchVal);}
if(filtered.length>0){setMenuOpen(true);$timeout(function(){ctrl.filteredObj=filtered;},0.1);}else if(isTextSearch){emitTextSearch(searchVal);setMenuOpen(false);}}
function searchMainClickHandler($event){var target=angular.element($event.target);if(target.is('.search-main-area')){searchInput.trigger('focus');setMenuOpen(true);}}
function facetClickHandler($index){var facet=ctrl.filteredObj[$index];var label=facet.label;if(angular.isArray(label)){label=label.join('');}
var facetParts=facet.name&&facet.name.split('=');ctrl.facetSelected=service.getFacet(facetParts[0],facetParts[1],label,'');if(angular.isDefined(facet.options)){ctrl.filteredOptions=ctrl.facetOptions=facet.options;setMenuOpen(true);}else{setMenuOpen(false);}
setSearchInput('');setPrompt('');$timeout(function(){searchInput.focus();});}
function optionClickHandler($index,$event,name){setMenuOpen(false);var curr=ctrl.facetSelected;curr.name=curr.name.split('=')[0]+'='+name;curr.label[1]=ctrl.filteredOptions[$index].label;if(angular.isArray(curr.label[1])){curr.label[1]=curr.label[1].join('');}
ctrl.currentSearch.push(curr);resetState();emitQuery();}
function emitTextSearch(val){$scope.$emit(magicSearchEvents.TEXT_SEARCH,val,$scope.filter_keys);}
function emitQuery(removed){var query=service.getQueryPattern(ctrl.currentSearch);if(angular.isDefined(removed)&&removed.indexOf('text')===0){emitTextSearch('');delete ctrl.textSearch;}else{$scope.$emit(magicSearchEvents.SEARCH_UPDATED,query);if(ctrl.currentSearch.length>0){var newFacet=ctrl.currentSearch[ctrl.currentSearch.length-1].name;var facetParts=service.getSearchTermObject(newFacet);service.removeChoice(facetParts,ctrl.facetChoices,ctrl.unusedFacetChoices);}}}
function clearSearch(){ctrl.currentSearch=[];delete ctrl.textSearch;ctrl.unusedFacetChoices=ctrl.facetChoices.map(service.getFacetChoice);resetState();$scope.$emit(magicSearchEvents.SEARCH_UPDATED,'');emitTextSearch('');}
function resetState(){setSearchInput('');ctrl.filteredObj=ctrl.unusedFacetChoices;delete ctrl.facetSelected;delete ctrl.facetOptions;delete ctrl.filteredOptions;if(ctrl.currentSearch.length===0){setPrompt(ctrl.mainPromptString);}}
function setMenuOpen(bool){$timeout(function setMenuOpenTimeout(){ctrl.isMenuOpen=bool;});}
function setSearchInput(val){$timeout(function setSearchInputTimeout(){searchInput.val(val);});}
function setPrompt(str){$timeout(function setPromptTimeout(){$scope.strings.prompt=str;});}
var facetsChangedWatcher=$scope.$on(magicSearchEvents.FACETS_CHANGED,function(event,data){$timeout(function(){if(data&&data.magicSearchQuery){initSearch(data.magicSearchQuery.split('&'));}else{initSearch(ctrl.currentSearch.map(function(x){return x.name;}));}});});$scope.$on('$destroy',function(){facetsChangedWatcher();});function initFacets(searchTerms){var tmpFacetChoices=ctrl.facetChoices.map(service.getFacetChoice);if(searchTerms.length>1||searchTerms[0]&&searchTerms[0].length>0){setPrompt('');}
ctrl.currentSearch=service.getFacetsFromSearchTerms(searchTerms,ctrl.textSearch,$scope.strings.text,tmpFacetChoices);ctrl.filteredObj=ctrl.unusedFacetChoices=service.getUnusedFacetChoices(tmpFacetChoices,searchTerms);$scope.$emit(magicSearchEvents.CHECK_FACETS,ctrl.currentSearch);}
function removeFacet(index){var removed=ctrl.currentSearch[index].name;ctrl.currentSearch.splice(index,1);if(angular.isUndefined(ctrl.facetSelected)){emitQuery(removed);}else{resetState();}
if(ctrl.currentSearch.length===0){setPrompt(ctrl.mainPromptString);}
initFacets(ctrl.currentSearch.map(service.getName));}}})();(function(){'use strict';angular.module('horizon.framework.widgets.magic-search').directive('magicSearch',magicSearch);magicSearch.$inject=[];function magicSearch(){return{restrict:'E',scope:{facets_param:'@facets',filter_keys:'=filterKeys',strings:'=strings'},templateUrl:function(scope,elem){return elem.template;},controller:'MagicSearchController',controllerAs:'ctrl'};}})();(function(){'use strict';angular.module('horizon.framework.widgets.magic-search').factory('horizon.framework.widgets.magic-search.service',magicSearchService);magicSearchService.$inject=[];function magicSearchService(){var service={getFacetChoice:getFacetChoice,removeOptionChoice:removeOptionChoice,removeFacetChoice:removeFacetChoice,removeChoice:removeChoice,getEventCode:getEventCode,getFacet:getFacet,getSearchTermsFromQueryString:getSearchTermsFromQueryString,getFacetChoicesFromFacetsParam:getFacetChoicesFromFacetsParam,getFacetsFromSearchTerms:getFacetsFromSearchTerms,getSearchTermObject:getSearchTermObject,getMatchingFacets:getMatchingFacets,getMatchingOptions:getMatchingOptions,getName:getName,getTextFacet:getTextFacet,getUnusedFacetChoices:getUnusedFacetChoices,getQueryPattern:getQueryPattern,getQueryObject:getQueryObject};return service;function objectify(obj){return Object.create(obj);}
function hasOptions(item){return angular.isDefined(item.options);}
function getTextFacet(searchVal,label){return getFacet('text',searchVal,label,searchVal);}
function getFacet(field,value,typeLabel,searchLabel){return{'name':field+'='+value,'label':[typeLabel,searchLabel]};}
function getSearchTermsFromQueryString(queryString){return queryString.replace(/^\?/,'').split('&');}
function getName(obj){return obj.name;}
function getQueryPattern(searchTermList){return searchTermList.filter(isNotTextSearch).map(getName).join('&');function isNotTextSearch(item){return item.name.indexOf('text')!==0;}}
function matchesName(name){return function(facet){return name===facet.name;};}
function matchesKey(name){return function(option){return name===option.key;};}
function hasLabel(item){return angular.isDefined(item.label);}
function getSearchTermObject(str){var parts=str.split('=');return{type:parts[0],value:parts[1]};}
function itemToLabel(item,search){var idx=item.label.toLowerCase().indexOf(search);if(idx>-1){return[item.label.substring(0,idx),item.label.substring(idx,idx+search.length),item.label.substring(idx+search.length)];}}
function execForMatchingChoice(facetChoices,name,func){facetChoices.filter(matchesName(name)).forEach(func);}
function getEventCode(evt){return evt.which||evt.keyCode||evt.charCode;}
function getFacetChoice(orig){var facetChoice=objectify(orig);if(angular.isDefined(orig.options)){facetChoice.options=orig.options.map(objectify);}
return facetChoice;}
function getMatchingOptions(list,search){return list.map(processOption).filter(hasLabel);function processOption(option){return{'key':option.key,'label':itemToLabel(option,search)};}}
function getMatchingFacets(list,search){return list.map(processFacet).filter(hasLabel);function processFacet(facet){return{'name':facet.name,'label':itemToLabel(facet,search),'options':facet.options};}}
function getFacetChoicesFromFacetsParam(param){if(angular.isString(param)){var tmp=param.replace(/__apos__/g,"\'").replace(/__dquote__/g,'\\"').replace(/__bslash__/g,"\\");return angular.fromJson(tmp);}
return param;}
function getFacetsFromSearchTerms(searchTerms,textSearch,textSearchLabel,facetChoices){var buff=[];searchTerms.map(getSearchTermObject).forEach(getFacetFromObj);if(angular.isDefined(textSearch)){var currentTextSearch=searchTerms.filter(function(searchField){return searchField.indexOf(textSearch)===0;});if(currentTextSearch.length===0){buff.push(getTextFacet(textSearch,textSearchLabel));}}
return buff;function getFacetFromObj(searchTermObj){execForMatchingChoice(facetChoices,searchTermObj.type,addFacet);function addFacet(facetChoice){if(angular.isUndefined(facetChoice.options)){buff.push(getFacet(searchTermObj.type,searchTermObj.value,facetChoice.label,searchTermObj.value));}else{facetChoice.options.filter(matchesKey(searchTermObj.value)).forEach(function(option){buff.push(getFacet(searchTermObj.type,searchTermObj.value,facetChoice.label,option.label));});}}}}
function getUnusedFacetChoices(facetChoices,facets){var unused=angular.copy(facetChoices);facets.map(getSearchTermObject).forEach(processSearchTerm);return unused;function processSearchTerm(searchTerm){execForMatchingChoice(unused,searchTerm.type,removeFoundChoice);function removeFoundChoice(choice){if(angular.isUndefined(choice.options)){removeFacetChoice(searchTerm.type,unused);}else if(choice.options.some(matchesKey(searchTerm.value))){removeSingleChoice(choice,searchTerm,unused);}}}}
function removeFacetChoice(type,target){execForMatchingChoice(target.slice(),type,removeFacet);function removeFacet(facet){target.splice(target.indexOf(facet),1);}}
function removeSingleChoice(facetChoice,searchTermObj,target){if(facetChoice.singleton===true){removeFacetChoice(searchTermObj.type,target);}else{removeOptionChoice(searchTermObj,target);}}
function removeChoice(searchTerm,src,target){execForMatchingChoice(src,searchTerm.type,removeFacetOrOption);function removeFacetOrOption(facet){removeSingleChoice(facet,searchTerm,target);}}
function removeOptionChoice(searchTermObj,target){execForMatchingChoice(target.slice().filter(hasOptions),searchTermObj.type,removeOption);function removeOption(choice){choice.options=choice.options.filter(keyNotMatch(searchTermObj.value));if(choice.options.length===0){target.splice(target.indexOf(choice),1);}
function keyNotMatch(value){return function keyNotMatchBool(option){return option.key!==value;};}}}
function getQueryObject(data){return getSearchTermsFromQueryString(data).map(getSearchTermObject).reduce(addToObject,{});function addToObject(orig,curr){orig[curr.type]=curr.value;return orig;}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.magic-search').directive('stMagicSearch',stMagicSearch);stMagicSearch.$inject=['$timeout','horizon.framework.widgets.magic-search.events'];function stMagicSearch($timeout,magicSearchEvents){var directive={link:link,require:'stTable',restrict:'A',scope:true};return directive;function link(scope,element,attr,tableCtrl){scope.currentServerSearchParams={"magicSearchQuery":""};function setPredObj(predicates,predObj,input){var lastPred=predicates.pop();angular.forEach(predicates,function(pred){predObj=predObj[pred]={};});predObj[lastPred]=input;}
function setServerFacetSearch(scope,query){var currentServerSearchParams=angular.copy(scope.currentServerSearchParams);currentServerSearchParams.magicSearchQuery=query;checkAndEmit(scope,currentServerSearchParams);}
function setServerTextSearch(scope,text){var currentServerSearchParams=angular.copy(scope.currentServerSearchParams);currentServerSearchParams.queryString=text;checkAndEmit(scope,currentServerSearchParams);}
function checkAndEmit(scope,serverSearchParams){if(serverSearchParams!==scope.currentServerSearchParams){serverSearchParams.magicSearchQueryChanged=!angular.equals(scope.currentServerSearchParams.magicSearchQuery,serverSearchParams.magicSearchQuery);serverSearchParams.queryStringChanged=!angular.equals(scope.currentServerSearchParams.queryString,serverSearchParams.queryString);scope.currentServerSearchParams=serverSearchParams;if(serverSearchParams.queryStringChanged||serverSearchParams.magicSearchQueryChanged){scope.$emit(magicSearchEvents.SERVER_SEARCH_UPDATED,angular.copy(scope.currentServerSearchParams));}}}
var textSearchWatcher=scope.$on('textSearch-ms-context',function(event,text){$timeout(function(){if(scope.clientFullTextSearch){tableCtrl.search(text);}else{setServerTextSearch(scope,text);}});});var searchUpdatedWatcher=scope.$on('searchUpdated-ms-context',function(event,query){setServerFacetSearch(scope,query);tableCtrl.tableState().search={};query.split('&').forEach(function(x){$timeout(function(){var arr=x.split('=');var predString=arr[0];var predicates=predString.split('.');if(scope.filterFacets){var isServerFacet=scope.filterFacets.some(function checkIsServer(facet){return facet.name===predString&&facet.isServer;});if(isServerFacet){return;}}
if(predicates.length>1){var firstPred=predicates[0];var predicateObj={};setPredObj(predicates,predicateObj,arr[1]);tableCtrl.search(predicateObj[firstPred],firstPred);}else{tableCtrl.search(arr[1],predString);}});});});scope.$on('$destroy',function(){textSearchWatcher();searchUpdatedWatcher();});}}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.display').controller('MetadataDisplayController',MetadataDisplayController);MetadataDisplayController.$inject=['horizon.framework.widgets.metadata.tree.service'];function MetadataDisplayController(metadataTreeService){var ctrl=this;ctrl.tree=null;ctrl.selected=null;ctrl.hide=true;ctrl.onSelect=function(item){ctrl.selected.collapse();item.expand(true);ctrl.selected=item;};ctrl.childrenFilter=function(item){return item.visible&&item.leaf&&item.added;};ctrl.listFilter=function(item){return item.addedCount>0;};init();function init(){ctrl.tree=new metadataTreeService.Tree(ctrl.available,ctrl.existing);angular.forEach(ctrl.tree.flatTree,function(item){if(item.added){if(!item.leaf){item.added=false;if(item.parent){item.parent.addedCount-=1;}}else if(!item.custom){ctrl.hide=false;}}});ctrl.tree.flatTree.some(function(item){if(ctrl.listFilter(item)){ctrl.selected=item;item.expand(true);return true;}});ctrl.count=0;ctrl.tree.flatTree.some(function(i){if(ctrl.listFilter(i)){ctrl.count+=1;}});}}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.display').directive('metadataDisplay',metadataDisplay);metadataDisplay.$inject=['horizon.framework.widgets.metadata.display.basePath'];function metadataDisplay(path){var directive={bindToController:true,controller:'MetadataDisplayController as ctrl',restrict:'E',scope:{available:'=',existing:'=',text:'=?'},templateUrl:path+'metadata-display.html'};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.tree').controller('MetadataTreeItemController',MetadataTreeItemController);function MetadataTreeItemController(){var ctrl=this;ctrl.formatErrorMessage=formatErrorMessage;ctrl.opened=false;if('item'in ctrl&&'leaf'in ctrl.item&&ctrl.item.leaf.type==='array'){ctrl.values=ctrl.item.leaf.items.enum.filter(filter).sort();if(!ctrl.item.leaf.readonly){ctrl.addValue=addValue;ctrl.removeValue=removeValue;ctrl.switchOpened=switchOpened;ctrl.opened=ctrl.item.leaf.value.length===0;}}
function formatErrorMessage(item,error){if(error.min){return ctrl.text.min+' '+item.leaf.minimum;}
if(error.max){return ctrl.text.max+' '+item.leaf.maximum;}
if(error.minlength){return ctrl.text.minLength+' '+item.leaf.minLength;}
if(error.maxlength){return ctrl.text.maxLength+' '+item.leaf.maxLength;}
if(error.pattern){if(item.leaf.type==='integer'){return ctrl.text.integerRequired;}else{return ctrl.text.patternMismatch;}}
if(error.number){if(item.leaf.type==='integer'){return ctrl.text.integerRequired;}else{return ctrl.text.decimalRequired;}}
if(error.required){return ctrl.text.required;}}
function filter(i){return ctrl.item.leaf.value.indexOf(i)<0;}
function remove(array,value){var index=array.indexOf(value);if(index>-1){array.splice(index,1);}
return array;}
function addValue(val){ctrl.item.leaf.value.push(val);ctrl.item.leaf.value.sort();remove(ctrl.values,val);}
function removeValue(val){remove(ctrl.item.leaf.value,val);ctrl.values.push(val);ctrl.values.sort();if(ctrl.item.leaf.value.length===0){ctrl.opened=true;}}
function switchOpened(){ctrl.opened=!ctrl.opened;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.tree').directive('metadataTreeItem',metadataTreeItem);metadataTreeItem.$inject=['horizon.framework.widgets.metadata.tree.basePath'];function metadataTreeItem(path){var directive={bindToController:true,controller:'MetadataTreeItemController as ctrl',restrict:'E',scope:{action:'&',item:'=',text:'='},templateUrl:path+'metadata-tree-item.html'};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.tree').controller('MetadataTreeController',MetadataTreeController);MetadataTreeController.$inject=['horizon.framework.widgets.metadata.tree.service','horizon.framework.widgets.metadata.tree.defaults'];function MetadataTreeController(metadataTreeService,defaults){var ctrl=this;ctrl.availableFilter=availableFilter;ctrl.quickFilter=quickFilter;ctrl.checkNameUnique=checkNameUnique;ctrl.text=angular.extend({},defaults.text,ctrl.text);if(!ctrl.tree){ctrl.tree=new metadataTreeService.Tree(ctrl.available,ctrl.existing);}
ctrl.customItem='';ctrl.filterText={available:'',existing:''};function availableFilter(item){return!item.added&&item.visible;}
function quickFilter(item){var text=ctrl.filterText.available;if(!text){return true;}
if(item.children.length>0){return item.children.filter(quickFilter).length>0;}
return item.label.indexOf(text)>-1||item.leaf.name.indexOf(text)>-1;}
function checkNameUnique(name){return!ctrl.tree.flatTree.some(function(item){return item.leaf&&item.leaf.name===name;});}}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.tree').directive('metadataTree',metadataTree);metadataTree.$inject=['horizon.framework.widgets.metadata.tree.basePath'];function metadataTree(path){var directive={bindToController:true,controller:'MetadataTreeController as ctrl',restrict:'E',scope:{tree:'=*?model',available:'=?',existing:'=?',text:'=?',metadataForm:'=?form'},templateUrl:path+'metadata-tree.html'};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.metadata.tree').factory('horizon.framework.widgets.metadata.tree.service',metadataTreeService);function metadataTreeService(){var service={Item:Item,Property:Property,Tree:Tree};function Property(name,json){this.name=name;this.title=name;this.description='';this.value=null;this.default=null;this.type='string';this.readonly=false;this.operators=['<in>'];angular.extend(this,json);this.operator=this.operators[0];this.setValue(this.default);}
Property.prototype.setValue=function(value){if(value===null){this.value=this.type!=='array'?null:[];return;}
switch(this.type){case'integer':this.value=parseInt(value,10);break;case'number':this.value=parseFloat(value);break;case'array':var data=/^(<.*?>) (.*)$/.exec(value);if(data&&data.length>2){this.operator=data[1];this.value=data[2].split(',');}
break;case'boolean':this.value=parseBool(value);break;default:this.value=value;}};Property.prototype.getValue=function(){switch(this.type){case'array':return this.operator+' '+this.value.join(',');default:return''+this.value;}};function Item(parent){Object.defineProperty(this,'parent',{value:parent||null});this.children=[];this.visible=false;this.expanded=false;this.label='';this.description='';this.level=parent?parent.level+1:0;this.addedCount=0;this.custom=false;this.leaf=false;this.added=false;}
Item.prototype.fromNamespace=function(namespace){this.label=namespace.display_name;this.description=namespace.description;if(namespace.objects){angular.forEach(namespace.objects,function(object){this.children.push(new Item(this).fromObject(object));},this);}
if(namespace.properties){angular.forEach(namespace.properties,function(property,key){this.children.push(new Item(this).fromProperty(key,property));},this);}
this.sortChildren();return this;};Item.prototype.fromObject=function(object){this.label=object.name;this.description=object.description;if(object.properties){angular.forEach(object.properties,function(property,key){this.children.push(new Item(this).fromProperty(key,property));},this);}
this.sortChildren();return this;};Item.prototype.fromProperty=function(name,property){this.leaf=new Property(name,property);this.label=this.leaf.title;this.description=this.leaf.description;return this;};Item.prototype.customProperty=function(name,property){this.fromProperty(name,property);this.custom=true;return this;};Item.prototype.expand=function(deep){this.expanded=true;angular.forEach(this.children,function(child){if(deep){child.expand(deep);}
child.visible=true;},this);};Item.prototype.collapse=function(){this.expanded=false;angular.forEach(this.children,function(child){child.collapse();child.visible=false;},this);};Item.prototype.sortChildren=function(){this.children.sort(function(a,b){return a.label.localeCompare(b.label);});};Item.prototype.markAsAdded=function(caller){if(this.parent&&!this.added){this.parent.addedCount+=1;if(this.parent.addedCount===this.parent.children.length){this.parent.markAsAdded(this);}}
this.added=true;if(!caller){angular.forEach(this.children,function(item){item.markAsAdded();},this);}};Item.prototype.unmarkAsAdded=function(expand,caller){if(this.parent){if(expand){this.parent.expand();}
if(this.added){this.parent.addedCount-=1;this.parent.unmarkAsAdded(expand,this);}}
this.added=false;if(!caller){angular.forEach(this.children,function(item){item.unmarkAsAdded(expand);},this);}};Item.prototype.path=function(path){path=angular.isDefined(path)?path:[];if(this.parent){this.parent.path(path);}
path.push(this);return path;};Item.prototype.breadcrumb=function(){return this.path().map(function(item){return item.label;}).join(' › ');};Item.prototype.setLeafValue=function(value){if(this.leaf){this.leaf.setValue(value);}};Item.prototype.getLeafValue=function(){if(this.leaf){return this.leaf.getValue();}};function Tree(available,existing){this.tree=[];this.loadNamespaces(available);this.flatTree=this.flatten(this.tree);this.selected=null;this.loadExisting(existing);}
Tree.prototype.loadNamespaces=function(namespaces){angular.forEach(namespaces,function(namespace){var item=new Item().fromNamespace(namespace);item.visible=true;this.tree.push(item);},this);this.tree.sort(function(a,b){return a.label.localeCompare(b.label);});return this;};Tree.prototype.flatten=function(branch,items){items=angular.isDefined(items)?items:[];angular.forEach(branch,function(item){items.push(item);this.flatten(item.children,items);},this);return items;};Tree.prototype.loadExisting=function(existing){var itemsMapping={};angular.forEach(this.flatTree,function(item){if(item.leaf){angular.forEach(existing,function caseInsensitiveCompare(value,key){var caseInsensitiveLeafName=item.leaf.name.toLocaleLowerCase();if(caseInsensitiveLeafName===key.toLocaleLowerCase()){itemsMapping[caseInsensitiveLeafName]=item;}});}});angular.forEach(existing,function(value,key){var item=itemsMapping[key.toLocaleLowerCase()];if(angular.isUndefined(item)){item=new Item().customProperty(key);this.flatTree.push(item);}
item.setLeafValue(value);item.markAsAdded();},this);};Tree.prototype.getExisting=function(){var existing={};angular.forEach(this.flatTree,function(item){if(item.added&&item.leaf){if(item.leaf.type==='array'&&item.leaf.value.length===0){}else{existing[item.leaf.name]=item.getLeafValue();}}});return existing;};Tree.prototype.select=function(item){this.selected=item;if(!item.expanded){item.expand();}else{item.collapse();}};Tree.prototype.markAsAdded=function(item){this.selected=item;item.markAsAdded();};Tree.prototype.unmarkAsAdded=function(item){if(!item.custom){this.selected=item;item.unmarkAsAdded(true);}else{this.selected=null;var i=this.flatTree.indexOf(item);if(i>-1){this.flatTree.splice(i,1);}}};Tree.prototype.addCustom=function(name){var item=new Item().customProperty(name);item.markAsAdded();this.flatTree.push(item);this.selected=item;};function parseBool(value){if(value===true||value===false){return value;}else if(angular.isString(value)){value=value.toLowerCase();if(value==='true'){return true;}else if(value==='false'){return false;}}
return null;}
return service;}})();(function(){'use strict';angular.module('horizon.framework.widgets.modal-wait-spinner').directive('waitSpinner',waitSpinner);waitSpinner.$inject=['horizon.framework.widgets.basePath'];function waitSpinner(basePath){var directive={scope:{text:'@text'},templateUrl:basePath+'modal-wait-spinner/modal-wait-spinner.template.html',restrict:'A'};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.modal-wait-spinner').factory('horizon.framework.widgets.modal-wait-spinner.service',WaitSpinnerService);WaitSpinnerService.$inject=['$interpolate','$templateCache','horizon.framework.widgets.basePath','$uibModal'];function WaitSpinnerService($interpolate,$templateCache,basePath,$uibModal){var spinner=this;var service={showModalSpinner:showModalSpinner,hideModalSpinner:hideModalSpinner};return service;function showModalSpinner(spinnerText){var templateUrl=basePath+'modal-wait-spinner/modal-wait-spinner.template.html';var html=$templateCache.get(templateUrl);var modalOptions={backdrop:'static',template:$interpolate(html)({text:spinnerText}),windowClass:'modal-wait-spinner'};spinner.modalInstance=$uibModal.open(modalOptions);}
function hideModalSpinner(){if(spinner.modalInstance){spinner.modalInstance.dismiss();delete spinner.modalInstance;}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.modal').factory('horizon.framework.widgets.modal.deleteModalService',deleteModalService);deleteModalService.$inject=['$q','horizon.framework.widgets.modal.simple-modal.service','horizon.framework.widgets.toast.service','horizon.framework.util.q.extensions'];function deleteModalService($q,simpleModalService,toast,$qExtensions){var service={open:open};return service;function open(scope,entities,context){var options={title:context.labels.title,body:interpolate(context.labels.message,[entities.map(getName).join("\", \"")]),submit:context.labels.submit};return simpleModalService.modal(options).result.then(onModalSubmit);function onModalSubmit(){return $qExtensions.allSettled(entities.map(deleteEntityPromise)).then(notify);}
function deleteEntityPromise(entity){return{promise:context.deleteEntity(entity.id,entity),context:entity};}
function notify(result){if(result.pass.length>0){var passEntities=result.pass.map(getEntities);scope.$emit(context.successEvent,passEntities.map(getId));toast.add('success',getMessage(context.labels.success,passEntities));}
if(result.fail.length>0){var failEntities=result.fail.map(getEntities);scope.$emit(context.failedEvent,failEntities.map(getId));toast.add('error',getMessage(context.labels.error,failEntities));}
return result;}}
function getEntities(passResponse){return passResponse.context;}
function getMessage(message,entities){return interpolate(message,[entities.map(getName).join(", ")]);}
function getName(entity){return entity.name||entity.id;}
function getId(entity){return entity.id;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.modal').controller('SimpleModalController',SimpleModalController);SimpleModalController.$inject=['$uibModalInstance','context'];function SimpleModalController($uibModalInstance,context){var ctrl=this;ctrl.context=context;ctrl.submit=function(){$uibModalInstance.close();};ctrl.cancel=function(){$uibModalInstance.dismiss('cancel');};}})();(function(){'use strict';angular.module('horizon.framework.widgets.modal').factory('horizon.framework.widgets.modal.simple-modal.service',modalService);modalService.$inject=['$uibModal','horizon.framework.widgets.basePath','horizon.framework.util.i18n.gettext'];function modalService($uibModal,path,gettext){var service={modal:modal};return service;function modal(params){if(params&&params.title&&params.body){var options={backdrop:'static',controller:'SimpleModalController as modalCtrl',templateUrl:path+'modal/simple-modal.html',resolve:{context:function(){return{title:params.title,body:params.body,submit:params.submit||gettext('Submit'),cancel:params.cancel||gettext('Cancel'),confirmCssClass:params.confirmCssClass||"btn-danger"};}}};return $uibModal.open(options);}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.modal').factory('horizon.framework.widgets.modal.wizard-modal.service',WizardModalService);WizardModalService.$inject=['$log','$uibModal'];function WizardModalService($log,$uibModal){var service={modal:modal};return service;function modal(params){if(params&&params.workflow&&params.submit){var options={size:'lg',controller:'WizardModalController as modalCtrl',template:'<wizard></wizard>',backdrop:'static',windowClass:'modal-dialog-wizard',resolve:{workflow:function(){return params.workflow;},submit:function(){return params.submit;},data:function(){return params.data;}}};return $uibModal.open(options);}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.modal').controller('WizardModalController',WizardModalController);WizardModalController.$inject=['$uibModalInstance','$scope','workflow','submit','data'];function WizardModalController($uibModalInstance,$scope,workflow,submit,data){$scope.close=close;$scope.cancel=cancel;$scope.submit=submit;$scope.workflow=workflow;angular.forEach(data,function copy(value,key){$scope[key]=value;});function close(args){$uibModalInstance.close(args);}
function cancel(){$uibModalInstance.dismiss('cancel');}}})();(function(){'use strict';angular.module('horizon.framework.widgets.panel').controller('horizon.framework.widgets.panel.HzResourcePanelController',controller);controller.$inject=['horizon.framework.conf.resource-type-registry.service'];function controller(registry){var ctrl=this;ctrl.resourceType=registry.getResourceType(ctrl.resourceTypeName);ctrl.pageName=ctrl.resourceType.getName();}})();(function(){'use strict';angular.module('horizon.framework.widgets.panel').directive('hzResourcePanel',directive);directive.$inject=['horizon.framework.widgets.basePath'];function directive(basePath){var directive={restrict:'E',scope:{resourceTypeName:'@'},transclude:true,bindToController:true,templateUrl:basePath+'panel/hz-resource-panel.html',controller:"horizon.framework.widgets.panel.HzResourcePanelController as ctrl"};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.property').directive('hzField',hzField);hzField.$inject=['$filter'];function hzField($filter){var directive={restrict:'E',scope:{config:"=",item:"="},link:link};return directive;function link(scope,element){scope.$watch('item',function(){filterItem(scope,element);});}
function filterItem(scope,element){var config=scope.config;var item=scope.item;var propValue=item[config.id];var output=applyFilters(config,propValue);if(output&&output.then){output.then(postFilterFormatting);}else{postFilterFormatting(output);}
function postFilterFormatting(output){if(config&&config.values){output=config.values[output];}
var url;if(config&&config.urlFunction){url=config.urlFunction(item);}
if(url){element.replaceWith(angular.element('<a>').attr('href',url).text(output));}else{element.text(output);}}}
function applyFilters(config,propValue){var output=propValue;if(config&&config.filters){for(var i=0;i<config.filters.length;i++){var filter=config.filters[i];if(angular.isFunction(filter)){output=filter(output);}else{output=$filter(filter)(output);}}}
return output;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.property').directive('hzResourcePropertyList',directive);directive.$inject=['horizon.framework.widgets.basePath'];function directive(basePath){var directiveConf={restrict:'E',scope:{resourceTypeName:"@",propertyGroups:"=",cls:"@?",item:"="},link:link,templateUrl:basePath+'property/hz-resource-property-list.html'};return directiveConf;function link(scope){scope.getBootstrapColumnSpan=getBootstrapColumnSpan;function getBootstrapColumnSpan(columns){return Math.floor(12/columns.length);}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.property').controller('horizon.framework.widgets.property.hzResourcePropertyController',controller);controller.$inject=['horizon.framework.conf.resource-type-registry.service'];function controller(registry){var ctrl=this;ctrl.config=registry.getResourceType(ctrl.resourceTypeName).getProperties()[ctrl.propName];ctrl.config.id=ctrl.propName;angular.forEach(registry.getResourceType(ctrl.resourceTypeName).getTableColumns(),function(column){if(column.id===ctrl.propName){ctrl.config.priority=column.priority;}});}})();(function(){'use strict';angular.module('horizon.framework.widgets.property').directive('hzResourceProperty',hzResourceProperty);hzResourceProperty.$inject=['$log','horizon.framework.widgets.basePath'];function hzResourceProperty($log,basePath){var directiveConf={restrict:'E',scope:{resourceTypeName:"@",propName:"@",item:"="},bindToController:true,controller:'horizon.framework.widgets.property.hzResourcePropertyController as ctrl',templateUrl:basePath+'property/hz-resource-property.html',link:link};return directiveConf;function link(scope,element){var config=scope.ctrl.config;var priority=config.priority?config.priority:1;if(!angular.isNumber(priority)||priority<1){priority=1;$log.warn("Please set an integer of 1 or more for priority of hz-resource-property. "+"Otherwise priority is set 1, 1 is the highest priority and will not be hidden "+"from table row due to window narrowing.");}
var style=priority>1?'rsp-alt-p':'rsp-p';element.addClass(style+priority);}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzCell',hzCell);hzCell.$inject=['$compile'];function hzCell($compile){var directive={restrict:'E',scope:{table:'=',column:'=',item:'='},link:link};return directive;function link(scope,element){var column=scope.column;var html;var progressBarHtml='';if(column&&column.template){html=$compile(column.template)(scope);}else{if(column.itemInTransitionFunction&&column.itemInTransitionFunction(scope.item)){progressBarHtml='<div class="progress-text horizon-loading-bar">'+'<div class="progress progress-striped active">'+'<div class="progress-bar"></div>'+'</div>'+'</div>';}
html=$compile(progressBarHtml+'<hz-field config="column" item="item"></hz-field>')(scope);}
element.append(html);}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzDetailRow',hzDetailRow);hzDetailRow.$inject=['horizon.framework.widgets.basePath','$http','$compile','$templateCache'];function hzDetailRow(basePath,$http,$compile,$templateCache){var directive={restrict:'E',scope:false,link:link};return directive;function link(scope,element,attrs){scope.$watch(attrs.templateUrl,function(templateUrl){if(!templateUrl){templateUrl=basePath+'table/hz-detail-row.html';}
$http.get(templateUrl,{cache:$templateCache}).then(function(response){var template=response.data;element.append($compile(template)(scope));});});}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').controller('horizon.framework.widgets.table.HzDynamicTableController',controller);controller.$inject=['$scope','horizon.framework.conf.permissions.service'];function controller($scope,permissionsService){$scope.items=[];$scope.columnAllowed=columnAllowed;var allowedColumns={};$scope.$watch("config",onConfigChange,true);function onConfigChange(newConfig){if(angular.isDefined(newConfig)){if(angular.isUndefined(newConfig.selectAll)){newConfig.selectAll=true;}
if(angular.isUndefined(newConfig.expand)){newConfig.expand=true;}
allowedColumns={};angular.forEach(newConfig.columns,checkPermissions);}}
function checkPermissions(column){permissionsService.checkAll(column).then(allow,disallow);function allow(){allowedColumns[column.id]=true;}
function disallow(){allowedColumns[column.id]=false;}}
function columnAllowed(column){return allowedColumns[column.id]||false;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzDynamicTable',hzDynamicTable);hzDynamicTable.$inject=['horizon.framework.widgets.basePath'];function hzDynamicTable(basePath){var directive={restrict:'E',scope:{config:'=',safeSrcItems:'=items',table:'=',batchActions:'=?',itemActions:'=?',filterFacets:'=?',resultHandler:'=?',itemInTransitionFunction:'=?'},controller:'horizon.framework.widgets.table.HzDynamicTableController',templateUrl:basePath+'table/hz-dynamic-table.html'};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzExpandDetail',hzExpandDetail);hzExpandDetail.$inject=['horizon.framework.widgets.table.expandSettings'];function hzExpandDetail(settings){var directive={restrict:'A',require:'?^hzTable',scope:{icons:'@hzExpandDetail',duration:'@',item:'=?'},link:link};return directive;function link(scope,element,attrs,hzTableCtrl){element.on('click',onClick);function onClick(){var iconClasses=scope.icons||settings.expandIconClasses;element.toggleClass(iconClasses);var summaryRow=element.closest('tr');var detailCell=summaryRow.next('tr').find('.detail');var duration=scope.duration?parseInt(scope.duration,10):settings.duration;if(summaryRow.hasClass('expanded')){var options={duration:duration,complete:function(){summaryRow.toggleClass('expanded');}};detailCell.find('.detail-expanded').slideUp(options);}else{summaryRow.toggleClass('expanded');if(detailCell.find('.detail-expanded').length===0){detailCell.wrapInner('<div class="detail-expanded"></div>');}
if(scope.item&&hzTableCtrl){hzTableCtrl.broadcastExpansion(scope.item);}
detailCell.find('.detail-expanded').slideDown(duration);}}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzNoItems',hzNoItems);hzNoItems.$inject=['horizon.framework.widgets.basePath'];function hzNoItems(basePath){var directive={restrict:'A',require:'^hzTable',templateUrl:basePath+'table/hz-no-items.html',scope:{items:'=',message:'=?'}};return directive;}}());(function(){'use strict';angular.module('horizon.framework.widgets.table').controller('horizon.framework.widgets.table.ResourceTableController',controller);controller.$inject=['$q','$scope','horizon.framework.widgets.table.events','horizon.framework.widgets.magic-search.events','horizon.framework.widgets.magic-search.service','horizon.framework.util.actions.action-result.service','horizon.framework.conf.resource-type-registry.service','horizon.app.core.openstack-service-api.settings'];function controller($q,$scope,hzTableEvents,magicSearchEvents,searchService,actionResultService,registry,settings){var ctrl=this;var lastSearchQuery={};var timerRunning=false;ctrl.actionResultHandler=actionResultHandler;ctrl.searchFacets=[];ctrl.config={};ctrl.batchActions=[];ctrl.items=[];ctrl.itemsSrc=[];ctrl.itemInTransitionFunction=itemInTransitionFunction;ctrl.ajaxPollInterval=2500;settings.getSetting('AJAX_POLL_INTERVAL').then(function(response){ctrl.ajaxPollInterval=response;});$scope.$on(magicSearchEvents.SERVER_SEARCH_UPDATED,handleServerSearch);$scope.$watch("ctrl.resourceTypeName",onResourceTypeNameChange);$scope.$watch("ctrl.listFunctionExtraParams",onListFunctionExtraParamsChange);function onResourceTypeNameChange(newValue){if(angular.isDefined(newValue)){ctrl.resourceType=registry.getResourceType(newValue);ctrl.resourceType.initActions($scope);ctrl.searchFacets=ctrl.resourceType.filterFacets;ctrl.config={detailsTemplateUrl:ctrl.resourceType.summaryTemplateUrl,selectAll:!!ctrl.resourceType.batchActions.length,expand:ctrl.resourceType.summaryTemplateUrl,trackId:ctrl.trackBy||'id',columns:ctrl.resourceType.getTableColumns()};ctrl.batchActions=ctrl.resourceType.globalActions.concat(ctrl.resourceType.batchActions);checkForFilterFirstAndListResources();}}
function onListFunctionExtraParamsChange(newValue){if(angular.isDefined(newValue)){checkForFilterFirstAndListResources();}}
function checkForFilterFirstAndListResources(){if(ctrl.resourceType){ctrl.resourceType.needsFilterFirstFunction().then(resolve);}
function resolve(result){ctrl.config.needsFilterFirst=false;if(result){if(checkForFiltersInSearchQuery()){listResources();}
else{ctrl.config.needsFilterFirst=true;ctrl.itemsSrc=[];}}
else{listResources();}}
function checkForFiltersInSearchQuery(){var filters=ctrl.searchFacets.filter(function(facet){var queryParams=Object.keys(lastSearchQuery);return queryParams.indexOf(facet.name)>-1;});return filters.length>0;}}
function listResources(){if(ctrl.resourceType){ctrl.resourceType.list(angular.extend({},lastSearchQuery,ctrl.listFunctionExtraParams)).then(onLoad);}}
function handleServerSearch(evt,magicSearchQueryObj){lastSearchQuery=searchService.getSearchTermsFromQueryString(magicSearchQueryObj.magicSearchQuery).reduce(queryToObject,{});checkForFilterFirstAndListResources();function queryToObject(orig,curr){var fields=searchService.getSearchTermObject(curr);orig[fields.type]=fields.value;return orig;}}
function onLoad(response){ctrl.itemsSrc=response.data.items;timerRunning=false;}
function actionResultHandler(returnValue){return $q.when(returnValue,actionSuccessHandler);}
function actionSuccessHandler(result){var deletedIds,updatedIds,createdIds,failedIds;if(result){deletedIds=actionResultService.getIdsOfType(result.deleted,ctrl.resourceType.type);updatedIds=actionResultService.getIdsOfType(result.updated,ctrl.resourceType.type);createdIds=actionResultService.getIdsOfType(result.created,ctrl.resourceType.type);failedIds=actionResultService.getIdsOfType(result.failed,ctrl.resourceType.type);if(deletedIds.length){ctrl.itemsSrc=difference(ctrl.itemsSrc,deletedIds,'id');$scope.$broadcast(hzTableEvents.CLEAR_SELECTIONS);}
if(updatedIds.length||createdIds.length){checkForFilterFirstAndListResources();}
if(failedIds.length){}}else{checkForFilterFirstAndListResources();}}
function difference(currentList,otherList,key){return currentList.filter(filter);function filter(elem){return otherList.filter(function filterDeletedItem(deletedItem){return deletedItem===elem[key];}).length===0;}}
function itemInTransitionFunction(item){var itemInTransition=ctrl.resourceType.itemInTransitionFunction(item);if(ctrl.ajaxPollInterval&&itemInTransition&&!timerRunning){timerRunning=true;setTimeout(listResources,ctrl.ajaxPollInterval);}
return itemInTransition;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzResourceTable',directive);directive.$inject=['horizon.framework.widgets.basePath'];function directive(basePath){var directive={restrict:'E',scope:{resourceTypeName:'@',trackBy:'@?',listFunctionExtraParams:'=?'},bindToController:true,templateUrl:basePath+'table/hz-resource-table.html',controller:"horizon.framework.widgets.table.ResourceTableController as ctrl"};return directive;}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzSearchBar',hzSearchBar);hzSearchBar.$inject=['horizon.framework.widgets.table.filterPlaceholderText','horizon.framework.widgets.basePath'];function hzSearchBar(FILTER_PLACEHOLDER_TEXT,basePath){var directive={restrict:'E',templateUrl:basePath+'table/search-bar.html',transclude:true,link:link};return directive;function link(scope,element,attrs,ctrl,transclude){if(angular.isDefined(attrs.groupClasses)){element.find('.input-group').addClass(attrs.groupClasses);}
if(angular.isDefined(attrs.iconClasses)){element.find('.fa').addClass(attrs.iconClasses);}
var searchInput=element.find('[st-search]');if(angular.isDefined(attrs.inputClasses)){searchInput.addClass(attrs.inputClasses);}
var placeholderText=attrs.placeholder||FILTER_PLACEHOLDER_TEXT;searchInput.attr('placeholder',placeholderText);transclude(scope,function(clone){element.find('.input-group').append(clone);});}}}());(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzSelectAll',hzSelectAll);hzSelectAll.$inject=['horizon.framework.widgets.table.events'];function hzSelectAll(events){var directive={restrict:'A',require:['^hzTable','^stTable'],scope:{rows:'=hzSelectAll'},link:link};return directive;function link(scope,element,attrs,ctrls){var hzTableCtrl=ctrls[0];var stTableCtrl=ctrls[1];element.click(clickHandler);var unWatchTableState=scope.$watch(function(){return stTableCtrl.tableState();},updateSelectAll,true);var unWatchRowsLength=scope.$watch('rows.length',updateSelectAll);var unWatchRowSelected=scope.$on(events.ROW_SELECTED,updateSelectAll);scope.$on('$destroy',function(){unWatchTableState();unWatchRowsLength();unWatchRowSelected();});function clickHandler(){scope.$apply(function(){scope.$evalAsync(function(){var checkedState=element.prop('checked');angular.forEach(scope.rows,function(row){var selected=hzTableCtrl.isSelected(row);if(selected!==checkedState){hzTableCtrl.toggleSelect(row,checkedState);}});});});}
function updateSelectAll(){var visibleRows=scope.rows;var numVisibleRows=visibleRows.length;var checkedCnt=visibleRows.filter(hzTableCtrl.isSelected).length;element.prop('checked',numVisibleRows>0&&numVisibleRows===checkedCnt);}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzSelect',hzSelect);function hzSelect(){var directive={restrict:'A',require:'^hzTable',scope:{row:'=hzSelect'},link:link};return directive;function link(scope,element,attrs,hzTableCtrl){element.click(clickHandler);function clickHandler(){scope.$apply(function(){scope.$evalAsync(function(){var checkedState=element.prop('checked');hzTableCtrl.toggleSelect(scope.row,checkedState,true);});});}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').controller('HzTableFooterController',HzTableFooterController);HzTableFooterController.$inject=['horizon.framework.conf.tableOptions'];function HzTableFooterController(tableOptions){var ctrl=this;ctrl.pageSize=horizon.cookies.get('API_RESULT_PAGE_SIZE')||tableOptions.pageSize;}})();(function(){'use strict';angular.module("horizon.framework.widgets.table").directive('hzTableFooter',hzTableFooter);hzTableFooter.$inject=['horizon.framework.widgets.basePath','$compile'];function hzTableFooter(basePath,$compile){var directive={controller:'HzTableFooterController as ctrl',restrict:'A',scope:{items:'='},templateUrl:basePath+'table/hz-table-footer.html',transclude:true,link:link};return directive;function link(scope,element,attrs){if(attrs.message){element.find('.display').replaceWith($compile(attrs.message)(scope));}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').directive('hzTable',hzTable);function hzTable(){return{restrict:'A',require:'stTable',scope:true,controller:'TableController',controllerAs:'tCtrl',link:link};function link(scope,element,attrs){scope.$watch(attrs.trackRowsBy,function(newValue){if(angular.isDefined(newValue)){scope.tCtrl.trackId=newValue;}});}}})();(function(){'use strict';angular.module('horizon.framework.widgets.table').controller('TableController',TableController);TableController.$inject=['$scope','horizon.framework.widgets.table.events'];function TableController($scope,events){var ctrl=this;ctrl.trackId='id';ctrl.isSelected=isSelected;ctrl.toggleSelect=toggleSelect;ctrl.broadcastExpansion=broadcastExpansion;clearSelected();var clearWatcher=$scope.$on(events.CLEAR_SELECTIONS,clearSelected);$scope.$on('$destroy',function(){clearWatcher();});function isSelected(row){var rowState=ctrl.selections[row[ctrl.trackId]];return angular.isDefined(rowState)&&rowState.checked;}
function clearSelected(){ctrl.selected=[];ctrl.selections={};}
function getSelected(map){return Object.keys(map).filter(function isChecked(k){return map[k].checked;}).map(function getItem(k){return map[k].item;});}
function toggleSelect(row,checkedState,broadcast){var key=row[ctrl.trackId];ctrl.selections[key]={checked:checkedState,item:row};ctrl.selected=getSelected(ctrl.selections);if(broadcast){var rowObj={row:row,checkedState:checkedState};$scope.$broadcast(events.ROW_SELECTED,rowObj);}}
function broadcastExpansion(item){$scope.$broadcast(events.ROW_EXPANDED,item);}}})();(function(){'use strict';angular.module('horizon.framework.widgets.toast').directive('toast',toast);toast.$inject=['horizon.framework.widgets.toast.service','horizon.framework.widgets.basePath'];function toast(toastService,path){var directive={restrict:'EA',templateUrl:path+'toast/toast.html',scope:{},link:link};return directive;function link(scope){scope.toast=toastService;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.toast').factory('horizon.framework.widgets.toast.service',toastService);toastService.$inject=['$timeout','horizon.framework.conf.toastOptions'];function toastService($timeout,toastOptions){var toasts=[];var service={types:{},add:add,get:get,find:find,cancel:cancel,clearAll:clearAll,clearErrors:clearErrors,clearSuccesses:clearSuccesses};service.types={danger:gettext('Danger'),warning:gettext('Warning'),info:gettext('Info'),success:gettext('Success'),error:gettext('Error')};return service;function clear(type){for(var i=toasts.length-1;i>=0;i--){if(toasts[i].type===type){toasts.splice(i,1);}}}
function autoDismiss(toast){$timeout(function dismiss(){var index=toasts.indexOf(toast);var dismissible=toastOptions.dimissible.indexOf('alert-'+toast.type);if(index>-1&&dismissible>-1){toasts.splice(index,1);}},toastOptions.delay);}
function cancel(index){toasts.splice(index,1);}
function add(type,msg){var toast={type:type==='error'?'danger':type,typeMsg:this.types[type],msg:msg,cancel:cancel};autoDismiss(toast);toasts.push(toast);}
function get(){return toasts;}
function find(type,msg){return toasts.find(function(toast){var toastType=(type==='error'?'danger':type);return(toast.type===toastType&&toast.msg.localeCompare(msg)===0);});}
function clearAll(){toasts=[];}
function clearErrors(){clear('danger');}
function clearSuccesses(){clear('success');}}})();(function(){'use strict';angular.module('horizon.framework.widgets.transfer-table').filter('filterAvailable',filterAvailable);filterAvailable.$inject=['horizon.framework.util.filters.$memoize'];function filterAvailable($memoize){return $memoize($filterAvailable,$hasher);function $idKeyOrDefault(primaryKey){return primaryKey||'id';}
function arrayIsEmpty(array){return angular.isUndefined(array)||!array.length;}
function emptyObj(obj){return angular.isUndefined(obj)||!Object.keys(obj).length;}
function $hasher(available,allocatedIds,primaryKey){if(arrayIsEmpty(available)){return'';}
primaryKey=$idKeyOrDefault(primaryKey);var key=available.map(function(item){return item[primaryKey];}).sort().join('_');return key+'_'+Object.keys(allocatedIds).sort().join('_');}
function $filterAvailable(available,allocatedKeys,primaryKey){if(arrayIsEmpty(available)){return[];}else if(emptyObj(allocatedKeys)){return available;}
primaryKey=$idKeyOrDefault(primaryKey);return available.filter(function isItemAvailable(item){return!(item[primaryKey]in allocatedKeys);});}}})();(function(){'use strict';angular.module('horizon.framework.widgets.transfer-table').controller('transferTableController',TransferTableController);TransferTableController.$inject=['$scope','$timeout','$parse','$attrs','$log','horizon.framework.widgets.transfer-table.events','horizon.framework.widgets.transfer-table.helpText','horizon.framework.widgets.transfer-table.limits','horizon.framework.util.q.extensions'];function TransferTableController($scope,$timeout,$parse,$attrs,$log,events,helpText,limits,qExtensions){var trModel=$parse($attrs.trModel)($scope);var trHelpText=$parse($attrs.helpText)($scope);var trLimits=$parse($attrs.limits)($scope);var ctrl=this;ctrl.allocate=allocate;ctrl.deallocate=deallocate;ctrl.itemActions=getItemActions();ctrl.toggleView=toggleView;ctrl.updateAllocated=updateAllocated;ctrl.numAllocated=numAllocated;ctrl.helpText=angular.extend({},helpText,trHelpText);ctrl.limits=angular.extend({},limits,trLimits);ctrl.numAvailable=numAvailable;ctrl.views={allocated:true,available:true};var tablesChangedWatcher=$scope.$on(events.TABLES_CHANGED,onTablesChanged);$scope.$on('$destroy',function(){tablesChangedWatcher();});init(trModel);function getItemActions(){return[{template:{text:'',actionClasses:'fa fa-arrow-up'},service:{allowed:function allocationAllowed(item){var allocatable=item&&!ctrl.allocatedIds[item.id];return qExtensions.booleanAsPromise(allocatable);},perform:function performAllocation(item){allocate(item);return qExtensions.booleanAsPromise(true);}}},{template:{text:'',actionClasses:'fa fa-arrow-down'},service:{allowed:function deallocationAllowed(item){var deallocatable=item&&ctrl.allocatedIds[item.id];return qExtensions.booleanAsPromise(deallocatable);},perform:function performDeallocation(item){deallocate(item);return qExtensions.booleanAsPromise(true);}}}];}
function init(model){if(!angular.isArray(model.available)){$log.error('Available is not an array.');}
if(model.allocated&&!angular.isArray(model.allocated)){$log.error('Allocated is not an array.');}
ctrl.available={sourceItems:model.available,displayedItems:model.displayedAvailable?model.displayedAvailable:[]};ctrl.allocated={sourceItems:model.allocated?model.allocated:[],displayedItems:model.displayedAllocated?model.displayedAllocated:[]};ctrl.allocatedIds={};markAllocatedItems();$scope.$watchCollection(getAllocated,markAllocatedItems);}
function getAllocated(){return ctrl.allocated.sourceItems;}
function markAllocatedItems(){angular.forEach(ctrl.allocated.sourceItems,function flag(item){ctrl.allocatedIds[item.id]=true;});}
function allocate(item){if(ctrl.limits.maxAllocation<0||ctrl.limits.maxAllocation>ctrl.allocated.sourceItems.length){ctrl.allocated.sourceItems.push(item);ctrl.allocatedIds[item.id]=true;}else if(ctrl.limits.maxAllocation===1){var temp=ctrl.allocated.sourceItems.pop();delete ctrl.allocatedIds[temp.id];$timeout(function(){ctrl.allocated.sourceItems.push(item);ctrl.allocatedIds[item.id]=true;$scope.$apply();},0,false);}}
function deallocate(item){var index=ctrl.allocated.sourceItems.indexOf(item);if(index>=0){ctrl.allocated.sourceItems.splice(index,1);delete ctrl.allocatedIds[item.id];}}
function updateAllocated(event,item,orderedItems){ctrl.allocated.sourceItems.splice(0,ctrl.allocated.sourceItems.length);Array.prototype.push.apply(ctrl.allocated.sourceItems,orderedItems);}
function onTablesChanged(e,args){if(args.data.available){ctrl.available.sourceItems=args.data.available;}
if(args.data.displayedAvailable){ctrl.available.displayedItems=args.data.displayedAvailable;}
if(args.data.allocated){ctrl.allocated.sourceItems=args.data.allocated;ctrl.allocatedIds={};ctrl.allocated.sourceItems.forEach(function(item){ctrl.allocatedIds[item.id]=true;});}
if(args.data.displayedAllocated){ctrl.allocated.displayedItems=args.data.displayedAllocated;}}
function toggleView(view){ctrl.views[view]=!ctrl.views[view];}
function numAllocated(){return ctrl.allocated.sourceItems.length;}
function numAvailable(){return ctrl.available.sourceItems.length-ctrl.allocated.sourceItems.length;}}})();(function(){'use strict';angular.module('horizon.framework.widgets.transfer-table').directive('transferTable',transferTable);transferTable.$inject=['horizon.framework.widgets.basePath'];function transferTable(path){return{controller:'transferTableController',controllerAs:'trCtrl',restrict:' E',scope:true,transclude:true,templateUrl:path+'transfer-table/transfer-table.html',link:link};function link(scope,element,attrs,ctrl,transclude){var allocated=element.find('.transfer-allocated');var available=element.find('.transfer-available');if('cloneContent'in attrs){var allocatedScope=scope.$new();allocatedScope.$displayedItems=ctrl.allocated.displayedItems;allocatedScope.$sourceItems=ctrl.allocated.sourceItems;allocatedScope.$isAllocatedTable=true;transclude(allocatedScope,function(clone){allocated.append(extractClonableTable(clone));});var availableScope=scope.$new();availableScope.$displayedItems=ctrl.available.displayedItems;availableScope.$sourceItems=ctrl.available.sourceItems;availableScope.$isAvailableTable=true;transclude(availableScope,function(clone){available.append(extractClonableTable(clone));});}else{transclude(scope,function(clone){allocated.append(clone.filter('allocated'));available.append(clone.filter('available'));});}
function extractClonableTable(element){var table=element.filter('hz-dynamic-table');if(!table.length){table=element.filter('table');}
return table;}}}})();(function(){'use strict';angular.module('horizon.framework.widgets.wizard').controller('ModalContainerController',ModalContainerController);ModalContainerController.$inject=['$scope','$uibModalInstance','launchContext'];function ModalContainerController($scope,$uibModalInstance,launchContext){$scope.launchContext=launchContext;$scope.close=function(args){$uibModalInstance.close(args);};$scope.cancel=function(){$uibModalInstance.dismiss();};}})();(function(){'use strict';var extend=angular.extend;var forEach=angular.forEach;angular.module('horizon.framework.widgets.wizard').controller('WizardController',WizardController);WizardController.$inject=['$scope','$q','horizon.framework.widgets.wizard.labels','horizon.framework.widgets.wizard.events','horizon.framework.events'];function WizardController($scope,$q,wizardLabels,wizardEvents,frameworkEvents){var ctrl=this;var viewModel=$scope.viewModel={};var initTask=$q.defer();$scope.initPromise=initTask.promise;$scope.currentIndex=-1;$scope.workflow=$scope.workflow||{};if($scope.workflow.initControllers){$scope.workflow.initControllers($scope);}
var steps=$scope.steps=$scope.workflow.steps||[];$scope.wizardForm={};$scope.stepModels={};$scope.switchTo=switchTo;$scope.showError=showError;ctrl.toggleHelpBtn=toggleHelpBtn;ctrl.onInitSuccess=onInitSuccess;ctrl.onInitError=onInitError;viewModel.btnText=extend({},wizardLabels,$scope.workflow.btnText);viewModel.btnIcon=$scope.workflow.btnIcon||{};viewModel.showSpinner=false;viewModel.hasError=false;viewModel.onClickFinishBtn=onClickFinishBtn;viewModel.isSubmitting=false;$scope.initPromise.then(onInitSuccess,onInitError);checkAllReadiness().finally(function(){initTask.resolve();viewModel.ready=true;switchToFirstReadyStep();});function switchTo(index){$scope.$broadcast(wizardEvents.ON_SWITCH,{from:$scope.currentIndex,to:index});ctrl.toggleHelpBtn(index);$scope.currentIndex=index;$scope.openHelp=false;}
function showError(errorMessage){viewModel.showSpinner=false;viewModel.hasError=true;if(errorMessage&&angular.isString(errorMessage.data)){viewModel.errorMessage=errorMessage.data;}else{viewModel.errorMessage=errorMessage;}
viewModel.isSubmitting=false;}
function beforeSubmit(){$scope.$broadcast(wizardEvents.BEFORE_SUBMIT);}
function afterSubmit(args){$scope.$broadcast(wizardEvents.AFTER_SUBMIT);$scope.close(args);}
function onClickFinishBtn(){viewModel.isSubmitting=true;beforeSubmit();$scope.submit($scope.stepModels).then(afterSubmit,showError);}
function onInitSuccess(){if(viewModel.hasError){return;}
$scope.$broadcast(wizardEvents.ON_INIT_SUCCESS);if(steps.length>0){ctrl.toggleHelpBtn(0);}}
function onInitError(){$scope.$broadcast(wizardEvents.ON_INIT_ERROR);}
$scope.$on(frameworkEvents.AUTH_ERROR,function(evt,arg){viewModel.hasError=true;viewModel.errorMessage=arg;return;});function toggleHelpBtn(index){if(angular.isUndefined(steps[index].helpUrl)){$scope.hideHelpBtn=true;}else{$scope.hideHelpBtn=false;}}
function checkAllReadiness(){var stepReadyPromises=[];forEach(steps,function(step){step.ready=!step.checkReadiness;if(step.checkReadiness){var promise=step.checkReadiness();stepReadyPromises.push(promise);promise.then(function(isReady){step.ready=isReady;});}});viewModel.ready=stepReadyPromises.length===0;return $q.all(stepReadyPromises).finally(function(){$scope.steps=$scope.steps.filter(function(step){return step.ready;});});}
function switchToFirstReadyStep(){forEach(steps,function(step,index){if($scope.currentIndex<0&&step.ready){$scope.currentIndex=index;return;}});}}})();(function(){'use strict';angular.module('horizon.framework.widgets.wizard').directive('wizard',wizard);wizard.$inject=['horizon.framework.widgets.basePath'];function wizard(basePath){var directive={controller:'WizardController',templateUrl:basePath+'wizard/wizard.html'};return directive;}})();(function(){'use strict';var libraryModules=['gettext','lrDragNDrop','ngCookies','ngSanitize','schemaForm','smart-table','ui.bootstrap'];var horizonBuiltInModules=['horizon.app.core','horizon.app.resources','horizon.app.tech-debt','horizon.auth','horizon.framework'];angular.module('horizon.app',['ngRoute'].concat(libraryModules).concat(horizonBuiltInModules).concat(horizonPlugInModules)).config(configHorizon).run(updateHorizon);configHorizon.$inject=['$locationProvider','$routeProvider'];function configHorizon($locationProvider,$routeProvider){if(angular.element('base').length===1){$locationProvider.html5Mode(true).hashPrefix('!');$routeProvider.otherwise({template:'',controller:'RedirectController'});}}
updateHorizon.$inject=['gettextCatalog','horizon.framework.util.tech-debt.helper-functions','horizon.framework.widgets.toast.service','$cookieStore','$http','$cookies','$route'];function updateHorizon(gettextCatalog,hzUtils,toastService,$cookieStore,$http,$cookies,$route){$http.defaults.headers.post['X-CSRFToken']=$cookies.csrftoken||$('input[name="csrfmiddlewaretoken"]').val();horizon.utils=hzUtils;horizon.toast=toastService;if(angular.version.major===1&&angular.version.minor<4){horizon.cookies=angular.extend({},$cookieStore,{getObject:$cookieStore.get,put:put,putObject:put,getRaw:getRaw});}else{horizon.cookies=$cookies;}
gettextCatalog.setCurrentLanguage(horizon.languageCode);gettextCatalog.setStrings(horizon.languageCode,django.catalog);$route.reload();function put(key,value){angular.element('body').scope().$apply(function(){$cookieStore.put(key,value);});}
function getRaw(key){return $cookies[key];}}}());(function(){'use strict';angular.module('horizon.app.core.cloud-services',[]);}());(function(){'use strict';angular.module('horizon.app.core.conf',['horizon.framework.conf']).config(permissionsDecorator);permissionsDecorator.$inject=['$provide'];function permissionsDecorator($provide){$provide.decorator('horizon.framework.conf.permissions.service',['$delegate','horizon.app.core.openstack-service-api.policy','horizon.app.core.openstack-service-api.serviceCatalog','horizon.app.core.openstack-service-api.settings',decorator]);function decorator($delegate,policy,serviceCatalog,settings){var permissionsService=$delegate;permissionsService.extendedPermissions={policies:policy.ifAllowed,services:serviceCatalog.ifTypeEnabled,settings:settings.ifEnabled};return $delegate;}}})();(function(){'use strict';angular.module('horizon.app.core.constants',[]).constant('horizon.app.core.detailRoute','ngdetails/');})();(function(){'use strict';var VOLUME_RESOURCE_TYPE='OS::Cinder::Volume';angular.module('horizon.app.core',['horizon.app.core.conf','horizon.app.core.constants','horizon.app.core.cloud-services','horizon.app.core.flavors','horizon.app.core.images','horizon.app.core.keypairs','horizon.app.core.metadata','horizon.app.core.network_qos','horizon.app.core.openstack-service-api','horizon.app.core.server_groups','horizon.app.core.trunks','horizon.app.core.workflow','horizon.framework.conf','horizon.framework.util','horizon.framework.widgets','horizon.dashboard.project.workflow'],config).constant('horizon.app.core.volumes.resourceType',VOLUME_RESOURCE_TYPE);config.$inject=['$provide','$windowProvider','$routeProvider','horizon.app.core.detailRoute'];function config($provide,$windowProvider,$routeProvider,detailRoute){var path=$windowProvider.$get().STATIC_URL+'app/core/';$provide.constant('horizon.app.core.basePath',path);$routeProvider.when('/'+detailRoute+':type/:path*',{templateUrl:$windowProvider.$get().STATIC_URL+'framework/widgets/details/routed-details-view.html'});}})();(function(){'use strict';angular.module('horizon.app.core.flavors.actions',['horizon.framework.conf','horizon.app.core.flavors']).run(registerFlavorActions);registerFlavorActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.flavors.actions.delete-flavor.service','horizon.app.core.flavors.actions.update-metadata.service','horizon.app.core.flavors.resourceType'];function registerFlavorActions(registry,deleteFlavorService,updateMetadataService,flavorResourceTypeCode){var flavorResourceType=registry.getResourceType(flavorResourceTypeCode);flavorResourceType.itemActions.append({id:'updateMetadataService',service:updateMetadataService,template:{text:gettext('Update Metadata')}}).append({id:'deleteFlavorAction',service:deleteFlavorService,template:{type:'delete',text:gettext('Delete Flavor')}});flavorResourceType.batchActions.append({id:'batchDeleteFlavorAction',service:deleteFlavorService,template:{type:'delete-selected',text:gettext('Delete Flavors')}});}})();(function(){'use strict';angular.module('horizon.app.core.flavors',['ngRoute','horizon.framework.conf','horizon.app.core','horizon.app.core.flavors.actions']).constant('horizon.app.core.flavors.resourceType','OS::Nova::Flavor').run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.framework.util.i18n.gettext','horizon.app.core.flavors.basePath','horizon.app.core.flavors.service','horizon.app.core.flavors.resourceType'];function run(registry,gettext,basePath,flavorsService,flavorResourceType){registry.getResourceType(flavorResourceType).setNames(gettext('Flavor'),gettext('Flavors')).setSummaryTemplateUrl(basePath+'summary.html').setProperties(flavorProperties()).setListFunction(flavorsService.getFlavorsPromise).tableColumns.append({id:'name',priority:1}).append({id:'vcpus',priority:2}).append({id:'ram',priority:1,sortDefault:true}).append({id:'disk',priority:2}).append({id:'id',priority:1}).append({id:'os-flavor-access:is_public',priority:2});registry.getResourceType(flavorResourceType).filterFacets.append({label:gettext('Name'),name:'name',singleton:true}).append({label:gettext('VCPUs'),name:'vcpus',singleton:true}).append({label:gettext('RAM'),name:'ram',singleton:true}).append({label:gettext('Root Disk'),name:'disk',singleton:true}).append({label:gettext('Public'),name:'os-flavor-access:is_public',singleton:true,options:[{label:gettext('Yes'),key:'true'},{label:gettext('No'),key:'false'}]});function flavorProperties(){return{name:gettext('Flavor Name'),vcpus:gettext('VCPUs'),ram:{label:gettext('RAM'),filters:['mb']},disk:{label:gettext('Root Disk'),filters:['gb']},'OS-FLV-EXT-DATA:ephemeral':{label:gettext('Ephemeral Disk'),filters:['gb']},swap:{label:gettext('Swap Disk'),filters:['gb']},rxtx_factor:gettext('RX/TX Factor'),id:gettext('ID'),'os-flavor-access:is_public':{label:gettext('Public'),filters:['yesno']},metadata:gettext('Metadata')};}}
config.$inject=['$provide','$windowProvider','$routeProvider'];function config($provide,$windowProvider,$routeProvider){var path=$windowProvider.$get().STATIC_URL+'app/core/flavors/';$provide.constant('horizon.app.core.flavors.basePath',path);$routeProvider.when('/admin/flavors',{templateUrl:path+'panel.html'});}})();(function(){'use strict';angular.module('horizon.app.core.images.actions',['horizon.framework.conf','horizon.app.core.images']).run(registerImageActions);registerImageActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.images.actions.edit.service','horizon.app.core.images.actions.create.service','horizon.app.core.images.actions.create-volume.service','horizon.app.core.images.actions.delete-image.service','horizon.app.core.images.actions.launch-instance.service','horizon.app.core.images.actions.update-metadata.service','horizon.app.core.images.resourceType','horizon.app.core.images.basePath'];function registerImageActions(registry,editService,createService,createVolumeService,deleteImageService,launchInstanceService,updateMetadataService,imageResourceTypeCode,basePath){var imageResourceType=registry.getResourceType(imageResourceTypeCode);imageResourceType.itemActions.append({id:'launchInstanceService',service:launchInstanceService,template:{text:gettext('Launch')}}).append({id:'createVolumeAction',service:createVolumeService,template:{text:gettext('Create Volume')}}).append({id:'editAction',service:editService,template:{text:gettext('Edit Image')}}).append({id:'updateMetadataService',service:updateMetadataService,template:{text:gettext('Update Metadata')}}).append({id:'deleteImageAction',service:deleteImageService,template:{text:gettext('Delete Image'),type:'delete'}});imageResourceType.globalActions.append({id:'createImageAction',service:createService,template:{text:gettext('Create Image'),type:'create'}});imageResourceType.batchActions.append({id:'batchDeleteImageAction',service:deleteImageService,template:{url:basePath+"/actions/delete-image-selected-button.template.html"}});}})();(function(){'use strict';angular.module('horizon.app.core.images.details',['horizon.framework.conf','horizon.app.core']).run(registerImageDetails);registerImageDetails.$inject=['horizon.app.core.images.basePath','horizon.app.core.images.resourceType','horizon.app.core.images.service','horizon.framework.conf.resource-type-registry.service'];function registerImageDetails(basePath,imageResourceType,imageService,registry){registry.getResourceType(imageResourceType).setLoadFunction(imageService.getImagePromise).detailsViews.append({id:'imageDetailsOverview',name:gettext('Overview'),template:basePath+'details/overview.html'});}})();(function(){'use strict';angular.module('horizon.app.core.images',['ngRoute','horizon.app.core.images.actions','horizon.app.core.images.details']).constant('horizon.app.core.images.events',events()).constant('horizon.app.core.images.non_bootable_image_types',['aki','ari']).constant('horizon.app.core.images.validationRules',validationRules()).constant('horizon.app.core.images.imageFormats',imageFormats()).constant('horizon.app.core.images.resourceType','OS::Glance::Image').constant('horizon.app.core.images.statuses',{'active':gettext('Active'),'saving':gettext('Saving'),'queued':gettext('Queued'),'pending_delete':gettext('Pending Delete'),'killed':gettext('Killed'),'deactivated':gettext('Deactivated'),'deleted':gettext('Deleted')}).constant('horizon.app.core.images.transitional-statuses',["saving","queued","pending_delete"]).run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.images.basePath','horizon.app.core.images.service','horizon.app.core.images.statuses','horizon.app.core.images.resourceType','horizon.framework.util.filters.$memoize','horizon.app.core.openstack-service-api.keystone'];function run(registry,basePath,imagesService,statuses,imageResourceType,$memoize,keystone){registry.getResourceType(imageResourceType).setNames(gettext('Image'),gettext('Images')).setSummaryTemplateUrl(basePath+'details/drawer.html').setDefaultIndexUrl('/project/images/').setItemInTransitionFunction(imagesService.isInTransition).setProperties(imageProperties(imagesService,statuses)).setListFunction(imagesService.getImagesPromise).setNeedsFilterFirstFunction(imagesService.getFilterFirstSettingPromise).tableColumns.append({id:'owner',priority:1,filters:[$memoize(keystone.getProjectName)],policies:[{rules:[['identity','identity:get_project']]}]}).append({id:'name',priority:1,sortDefault:true,classes:"word-wrap",urlFunction:imagesService.getDetailsPath}).append({id:'type',priority:1}).append({id:'status',priority:1,itemInTransitionFunction:imagesService.isInTransition}).append({id:'visibility',priority:1}).append({id:'protected',priority:1}).append({id:'disk_format',priority:2}).append({id:'size',priority:2});registry.getResourceType(imageResourceType).filterFacets.append({label:gettext('Name'),name:'name',isServer:true,singleton:true,persistent:true}).append({label:gettext('Status'),name:'status',isServer:true,singleton:true,options:[{label:gettext('Active'),key:'active'},{label:gettext('Saving'),key:'saving'},{label:gettext('Queued'),key:'queued'},{label:gettext('Pending Delete'),key:'pending_delete'},{label:gettext('Killed'),key:'killed'},{label:gettext('Deactivated'),key:'deactivated'},{label:gettext('Deleted'),key:'deleted'}]}).append({label:gettext('Visibility'),name:'visibility',isServer:true,singleton:true,options:[{label:gettext('Public'),key:'public'},{label:gettext('Private'),key:'private'},{label:gettext('Shared With Project'),key:'shared'},{label:gettext('Community'),key:'community'}]}).append({label:gettext('Protected'),name:'protected',isServer:true,singleton:true,options:[{label:gettext('Yes'),key:'true'},{label:gettext('No'),key:'false'}]}).append({label:gettext('Format'),name:'disk_format',isServer:true,singleton:true,options:[{label:gettext('AKI'),key:'aki'},{label:gettext('AMI'),key:'ami'},{label:gettext('ARI'),key:'ari'},{label:gettext('Docker'),key:'docker'},{label:gettext('ISO'),key:'iso'},{label:gettext('OVA'),key:'ova'},{label:gettext('PLOOP'),key:'ploop'},{label:gettext('QCOW2'),key:'qcow2'},{label:gettext('Raw'),key:'raw'},{label:gettext('VDI'),key:'vdi'},{label:gettext('VHD'),key:'vhd'},{label:gettext('VMDK'),key:'vmdk'}]}).append({label:gettext('Min. Size (bytes)'),name:'size_min',isServer:true,singleton:true}).append({label:gettext('Max. Size (bytes)'),name:'size_max',isServer:true,singleton:true});}
function validationRules(){return{integer:/^[0-9]+$/,fieldMaxLength:255};}
function imageFormats(){return{iso:gettext('ISO - Optical Disk Image'),ova:gettext('OVA - Open Virtual Appliance'),ploop:gettext('PLOOP - Virtuozzo/Parallels Loopback Disk'),qcow2:gettext('QCOW2 - QEMU Emulator'),raw:gettext('Raw'),vdi:gettext('VDI - Virtual Disk Image'),vhd:gettext('VHD - Virtual Hard Disk'),vmdk:gettext('VMDK - Virtual Machine Disk'),aki:gettext('AKI - Amazon Kernel Image'),ami:gettext('AMI - Amazon Machine Image'),ari:gettext('ARI - Amazon Ramdisk Image'),docker:gettext('Docker')};}
function imageProperties(imagesService,statuses){return{id:gettext('ID'),checksum:gettext('Checksum'),members:gettext('Members'),min_disk:gettext('Min. Disk'),min_ram:gettext('Min. RAM'),name:gettext('Name'),owner:gettext('Owner'),tags:gettext('Tags'),'updated_at':{label:gettext('Updated At'),filters:['simpleDate']},virtual_size:gettext('Virtual Size'),visibility:gettext('Visibility'),description:gettext('Description'),architecture:gettext('Architecture'),kernel_id:gettext('Kernel ID'),ramdisk_id:gettext('Ramdisk ID'),'created_at':{label:gettext('Created At'),filters:['simpleDate']},container_format:{label:gettext('Container Format'),filters:['uppercase']},disk_format:{label:gettext('Disk Format'),filters:['noValue','uppercase']},is_public:{label:gettext('Is Public'),filters:['yesno']},type:{label:gettext('Type')},'protected':{label:gettext('Protected'),filters:['yesno']},size:{label:gettext('Size'),filters:['bytes']},status:{label:gettext('Status'),values:statuses}};}
function events(){return{IMAGE_UPLOAD_PROGRESS:'horizon.app.core.images.IMAGE_UPLOAD_PROGRESS'};}
config.$inject=['$provide','$windowProvider','$routeProvider','horizon.app.core.detailRoute'];function config($provide,$windowProvider,$routeProvider,detailRoute){var path=$windowProvider.$get().STATIC_URL+'app/core/images/';$provide.constant('horizon.app.core.images.basePath',path);$routeProvider.when('/project/images/:id',{redirectTo:goToAngularDetails});$routeProvider.when('/admin/images/:id/detail',{redirectTo:goToAngularDetails});$routeProvider.when('/project/images',{templateUrl:path+'panel.html'});$routeProvider.when('/admin/images',{templateUrl:path+'admin-panel.html'});function goToAngularDetails(params){return detailRoute+'OS::Glance::Image/'+params.id;}}})();(function(){'use strict';angular.module('horizon.app.core.keypairs.actions',['horizon.framework.conf','horizon.app.core.keypairs']).run(registerKeypairActions);registerKeypairActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.keypairs.actions.create.service','horizon.app.core.keypairs.actions.import.service','horizon.app.core.keypairs.actions.delete.service','horizon.app.core.keypairs.resourceType'];function registerKeypairActions(registry,createKeypairService,importKeypairService,deleteKeypairService,resourceType){var keypairResourceType=registry.getResourceType(resourceType);keypairResourceType.globalActions.append({id:'createKeypairService',service:createKeypairService,template:{type:'create',text:gettext('Create Key Pair')}}).append({id:'importKeypairService',service:importKeypairService,template:{text:gettext('Import Public Key'),icon:'upload'}});keypairResourceType.batchActions.append({id:'batchDeleteKeypairAction',service:deleteKeypairService,template:{type:'delete-selected',text:gettext('Delete Key Pairs')}});keypairResourceType.itemActions.append({id:'deleteKeypairAction',service:deleteKeypairService,template:{type:'delete',text:gettext('Delete Key Pair')}});}})();(function(){'use strict';angular.module('horizon.app.core.keypairs.details',['horizon.framework.conf','horizon.app.core']).run(registerKeypairDetails);registerKeypairDetails.$inject=['horizon.app.core.keypairs.basePath','horizon.app.core.keypairs.resourceType','horizon.app.core.keypairs.service','horizon.framework.conf.resource-type-registry.service'];function registerKeypairDetails(basePath,resourceType,keypairService,registry){registry.getResourceType(resourceType).setLoadFunction(keypairService.getKeypairPromise).detailsViews.append({id:'keypairDetails',name:gettext('Details'),template:basePath+'details/details.html'});}})();(function(){'use strict';angular.module('horizon.app.core.keypairs',['ngRoute','horizon.app.core.keypairs.actions','horizon.app.core.keypairs.details']).constant('horizon.app.core.keypairs.resourceType','OS::Nova::Keypair').run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.openstack-service-api.nova','horizon.app.core.keypairs.basePath','horizon.app.core.keypairs.resourceType','horizon.app.core.keypairs.service'];function run(registry,nova,basePath,resourceType,keypairsService){registry.getResourceType(resourceType).setNames(gettext('Key Pair'),gettext('Key Pairs')).setSummaryTemplateUrl(basePath+'details/drawer.html').setDefaultIndexUrl('/project/key_pairs/').setProperties(keypairProperties()).setListFunction(keypairsService.getKeypairsPromise).tableColumns.append({id:'name',priority:1,sortDefault:true,classes:"word-wrap",urlFunction:keypairsService.urlFunction}).append({id:'type',priority:2}).append({id:'fingerprint',priority:3});registry.getResourceType(resourceType).filterFacets.append({'label':gettext('Name'),'name':'name','singleton':true});}
function keypairProperties(){return{'id':{},'keypair_id':{label:gettext('ID'),filters:['noValue']},'name':{label:gettext('Name'),filters:['noName']},'type':{label:gettext('Type'),filters:['noValue']},'fingerprint':{label:gettext('Fingerprint'),filters:['noValue']},'created_at':{label:gettext('Created'),filters:['mediumDate']},'user_id':{label:gettext('User ID'),filters:['noValue']},'public_key':{label:gettext('Public Key'),filters:['noValue']}};}
config.$inject=['$provide','$windowProvider','$routeProvider','horizon.app.core.detailRoute'];function config($provide,$windowProvider,$routeProvider,detailRoute){var path=$windowProvider.$get().STATIC_URL+'app/core/keypairs/';$provide.constant('horizon.app.core.keypairs.basePath',path);$routeProvider.when('/project/key_pairs',{templateUrl:path+'panel.html'}).when('/project/key_pairs/:id',{redirectTo:goToAngularDetails});function goToAngularDetails(params){return detailRoute+'OS::Nova::Keypair/'+params.id;}}})();(function(){'use strict';angular.module('horizon.app.core.metadata',['horizon.app.core.metadata.modal']);})();(function(){'use strict';angular.module('horizon.app.core.metadata.modal',[]).constant('horizon.app.core.metadata.modal.constants',{backdrop:'static',controller:'MetadataModalController as modal',windowClass:'modal-dialog-metadata'});})();(function(){'use strict';angular.module('horizon.app.core.network_qos.actions',['horizon.framework.conf','horizon.app.core.network_qos']).run(registerQosActions);registerQosActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.network_qos.actions.delete.service','horizon.app.core.network_qos.resourceType'];function registerQosActions(registry,deleteService,qosResourceTypeCode){var qosResourceType=registry.getResourceType(qosResourceTypeCode);qosResourceType.itemActions.append({id:'deletePolicyAction',service:deleteService,template:{text:gettext('Delete Policy'),type:'delete'}});qosResourceType.batchActions.append({id:'batchDeletePolicyAction',service:deleteService,template:{text:gettext('Delete Policies'),type:'delete-selected'}});}})();(function(){'use strict';angular.module('horizon.app.core.network_qos.details',['horizon.framework.conf','horizon.app.core']).run(registerPolicyDetails);registerPolicyDetails.$inject=['horizon.app.core.network_qos.basePath','horizon.app.core.network_qos.resourceType','horizon.app.core.network_qos.service','horizon.framework.conf.resource-type-registry.service'];function registerPolicyDetails(basePath,qosResourceType,qosService,registry){registry.getResourceType(qosResourceType).setLoadFunction(qosService.getPolicyPromise).detailsViews.append({id:'policyDetailsOverview',name:gettext('Overview'),template:basePath+'details/overview.html'});}})();(function(){'use strict';angular.module('horizon.app.core.network_qos',['ngRoute','horizon.framework.conf','horizon.app.core.network_qos.actions','horizon.app.core.network_qos.details','horizon.app.core']).constant('horizon.app.core.network_qos.resourceType','OS::Neutron::QoSPolicy').run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.framework.util.i18n.gettext','horizon.app.core.network_qos.basePath','horizon.app.core.network_qos.service','horizon.app.core.network_qos.resourceType'];function run(registry,gettext,basePath,qosService,qosResourceType){registry.getResourceType(qosResourceType).setNames(gettext('QoS Policy'),gettext('QoS Policies')).setSummaryTemplateUrl(basePath+'details/drawer.html').setDefaultIndexUrl('/project/network_qos/').setProperties(qosProperties(qosService)).setListFunction(qosService.getPoliciesPromise).tableColumns.append({id:'name',priority:1,sortDefault:true,urlFunction:qosService.getDetailsPath}).append({id:'description',priority:1}).append({id:'shared',priority:1});registry.getResourceType(qosResourceType).filterFacets.append({label:gettext('Policy Name'),name:'name',singleton:true,persistent:true}).append({label:gettext('Description'),name:'description',singleton:true}).append({label:gettext('Shared'),name:'shared',singleton:true,options:[{label:gettext('Yes'),key:'true'},{label:gettext('No'),key:'false'}]});}
function qosProperties(){return{'name':{label:gettext('Policy Name'),filters:['noName']},'id':{label:gettext('Policy ID'),filters:['noValue']},'description':{label:gettext('Description'),filters:['noName']},'shared':{label:gettext('Shared'),filters:['yesno']},'tenant_id':{label:gettext('Tenant ID'),filters:['noValue']},'project_id':{label:gettext('Project ID'),filters:['noValue']},'created_at':{label:gettext('Created At'),filters:['simpleDate']},'updated_at':{label:gettext('Updated At'),filters:['simpleDate']},'rules':{label:gettext('Rules'),filters:['noValue']},'revision_number':{label:gettext('Revision Number'),filters:['noValue']}};}
config.$inject=['$provide','$windowProvider','$routeProvider','horizon.app.core.detailRoute'];function config($provide,$windowProvider,$routeProvider,detailRoute){var path=$windowProvider.$get().STATIC_URL+'app/core/network_qos/';$provide.constant('horizon.app.core.network_qos.basePath',path);$routeProvider.when('/project/network_qos',{templateUrl:path+'panel.html'}).when('/project/network_qos/:id',{redirectTo:goToAngularDetails});function goToAngularDetails(params){return detailRoute+'OS::Neutron::QoSPolicy/'+params.id;}}})();(function(){'use strict';angular.module('horizon.app.core.openstack-service-api',['ngFileUpload']);}());(function(){'use strict';angular.module('horizon.app.core.server_groups.actions',['horizon.framework.conf','horizon.app.core.server_groups']).run(registerServerGroupActions);registerServerGroupActions.$inject=['horizon.app.core.server_groups.actions.create.service','horizon.app.core.server_groups.actions.delete.service','horizon.app.core.server_groups.resourceType','horizon.framework.conf.resource-type-registry.service'];function registerServerGroupActions(createService,deleteService,serverGroupResourceTypeCode,registry){var serverGroupResourceType=registry.getResourceType(serverGroupResourceTypeCode);serverGroupResourceType.itemActions.append({id:'deleteServerGroupAction',service:deleteService,template:{type:'delete',text:gettext('Delete Server Group')}});serverGroupResourceType.batchActions.append({id:'batchDeleteServerGroupAction',service:deleteService,template:{type:'delete-selected',text:gettext('Delete Server Groups')}});serverGroupResourceType.globalActions.append({id:'createServerGroupAction',service:createService,template:{type:'create',text:gettext('Create Server Group')}});}})();(function(){'use strict';angular.module('horizon.app.core.server_groups.details',['horizon.framework.conf','horizon.app.core']).run(registerServerGroupDetails);registerServerGroupDetails.$inject=['horizon.app.core.server_groups.basePath','horizon.app.core.server_groups.resourceType','horizon.app.core.server_groups.service','horizon.framework.conf.resource-type-registry.service'];function registerServerGroupDetails(basePath,serverGroupResourceType,serverGroupService,registry){registry.getResourceType(serverGroupResourceType).setLoadFunction(serverGroupService.getServerGroupPromise).detailsViews.append({id:'serverGroupDetailsOverview',name:gettext('Overview'),template:basePath+'details/overview.html'});}})();(function(){'use strict';angular.module('horizon.app.core.server_groups',['horizon.framework.conf','horizon.app.core','horizon.app.core.server_groups.actions','horizon.app.core.server_groups.details']).constant('horizon.app.core.server_groups.resourceType','OS::Nova::ServerGroup').run(run).config(config);run.$inject=['horizon.app.core.server_groups.resourceType','horizon.app.core.server_groups.service','horizon.framework.conf.resource-type-registry.service'];function run(serverGroupResourceType,serverGroupsService,registry){registry.getResourceType(serverGroupResourceType).setNames(gettext('Server Group'),gettext('Server Groups')).setProperties(serverGroupProperties()).setListFunction(serverGroupsService.getServerGroupsPromise).tableColumns.append({id:'name',priority:1,sortDefault:true,classes:"word-wrap",urlFunction:serverGroupsService.getDetailsPath}).append({id:'id',priority:1}).append({id:'policy',priority:1});registry.getResourceType(serverGroupResourceType).filterFacets.append({label:gettext('Name'),name:'name',singleton:true}).append({label:gettext('ID'),name:'id',singleton:true}).append({label:gettext('Policy'),name:'policy',singleton:true});}
function serverGroupProperties(){return{name:gettext('Name'),id:gettext('ID'),policy:gettext('Policy'),project_id:gettext('Project ID'),user_id:gettext('User ID')};}
config.$inject=['$provide','$windowProvider','$routeProvider','horizon.app.core.detailRoute'];function config($provide,$windowProvider,$routeProvider,detailRoute){var path=$windowProvider.$get().STATIC_URL+'app/core/server_groups/';$provide.constant('horizon.app.core.server_groups.basePath',path);$routeProvider.when('/project/server_groups',{templateUrl:path+'panel.html'});$routeProvider.when('/project/server_groups/:id',{redirectTo:goToAngularDetails});function goToAngularDetails(params){return detailRoute+'OS::Nova::ServerGroup/'+params.id;}}})();(function(){'use strict';angular.module('horizon.app.core.trunks.actions',['horizon.framework.conf','horizon.app.core.trunks']).run(registerTrunkActions);registerTrunkActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.trunks.actions.create.service','horizon.app.core.trunks.actions.edit.service','horizon.app.core.trunks.actions.delete.service','horizon.app.core.trunks.resourceType'];function registerTrunkActions(registry,createService,editService,deleteService,trunkResourceTypeCode){var trunkResourceType=registry.getResourceType(trunkResourceTypeCode);trunkResourceType.globalActions.append({id:'createTrunkAction',service:createService,template:{text:gettext('Create Trunk'),type:'create'}});trunkResourceType.itemActions.append({id:'editTrunkAction',service:editService,template:{text:gettext('Edit Trunk')}}).append({id:'deleteTrunkAction',service:deleteService,template:{text:gettext('Delete Trunk'),type:'delete'}});trunkResourceType.batchActions.append({id:'batchDeleteTrunkAction',service:deleteService,template:{text:gettext('Delete Trunks'),type:'delete-selected'}});}})();(function(){'use strict';angular.module('horizon.app.core.trunks.details',['horizon.framework.conf','horizon.app.core']).run(registerTrunkDetails);registerTrunkDetails.$inject=['horizon.app.core.trunks.basePath','horizon.app.core.trunks.resourceType','horizon.app.core.trunks.service','horizon.framework.conf.resource-type-registry.service'];function registerTrunkDetails(basePath,trunkResourceType,trunkService,registry){registry.getResourceType(trunkResourceType).setLoadFunction(trunkService.getTrunkPromise).detailsViews.append({id:'trunkDetailsOverview',name:gettext('Overview'),template:basePath+'details/overview.html'});}})();(function(){'use strict';angular.module('horizon.app.core.trunks',['ngRoute','horizon.framework.conf','horizon.app.core.trunks.actions','horizon.app.core.trunks.details','horizon.app.core']).constant('horizon.app.core.trunks.resourceType','OS::Neutron::Trunk').constant('horizon.app.core.trunks.portConstants',portConstants()).run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.framework.util.i18n.gettext','horizon.app.core.trunks.basePath','horizon.app.core.trunks.service','horizon.app.core.trunks.resourceType'];function run(registry,gettext,basePath,trunksService,trunkResourceType){registry.getResourceType(trunkResourceType).setNames(gettext('Trunk'),gettext('Trunks')).setSummaryTemplateUrl(basePath+'summary.html').setDefaultIndexUrl('/project/trunks/').setProperties(trunkProperties()).setListFunction(trunksService.getTrunksPromise).tableColumns.append({id:'name_or_id',priority:1,sortDefault:true,classes:"word-wrap",urlFunction:trunksService.getDetailsPath}).append({id:'port_id',priority:1,urlFunction:trunksService.getPortDetailsPath}).append({id:'subport_count',priority:1}).append({id:'admin_state',priority:1}).append({id:'status',priority:1});registry.getResourceType(trunkResourceType).filterFacets.append({label:gettext('Name'),name:'name',singleton:true}).append({label:gettext('Parent Port'),name:'port_id',singleton:true}).append({label:gettext('Status'),name:'status',singleton:true,options:[{label:gettext('Active'),key:'ACTIVE'},{label:gettext('Down'),key:'DOWN'},{label:gettext('Build'),key:'BUILD'},{label:gettext('Degraded'),key:'DEGRADED'},{label:gettext('Error'),key:'ERROR'}]}).append({label:gettext('Admin State'),name:'admin_state_up',singleton:true,options:[{label:gettext('Up'),key:'true'},{label:gettext('Down'),key:'false'}]});}
function trunkProperties(){return{admin_state:gettext('Admin State'),created_at:gettext('Created at'),description:gettext('Description'),id:gettext('ID'),name:gettext('Name'),name_or_id:gettext('Name/ID'),port_id:gettext('Parent Port'),project_id:gettext('Project ID'),status:gettext('Status'),subport_count:gettext('Subport Count'),updated_at:gettext('Updated at')};}
function portConstants(){return{statuses:{'ACTIVE':gettext('Active'),'DOWN':gettext('Down')},adminStates:{'UP':gettext('Up'),'DOWN':gettext('Down')},vnicTypes:{'normal':gettext('Normal'),'direct':gettext('Direct'),'direct-physical':gettext('Direct Physical'),'macvtap':gettext('MacVTap'),'baremetal':gettext('Bare Metal')}};}
config.$inject=['$provide','$windowProvider','$routeProvider'];function config($provide,$windowProvider,$routeProvider){var path=$windowProvider.$get().STATIC_URL+'app/core/trunks/';$provide.constant('horizon.app.core.trunks.basePath',path);$routeProvider.when('/project/trunks',{templateUrl:path+'panel.html'});$routeProvider.when('/project/trunks/:id',{redirectTo:goToAngularDetails});$routeProvider.when('/admin/trunks',{templateUrl:path+'panel.html'});$routeProvider.when('/admin/trunk/:id/detail',{redirectTo:goToAngularDetails});function goToAngularDetails(params){return detailRoute+'OS::Neutron::Trunk/'+params.id;}}})();(function(){'use strict';angular.module('horizon.app.core.workflow',[]);})();(function(){'use strict';angular.module('horizon.app.resources',[]).run(performRegistrations);performRegistrations.$inject=['horizon.framework.conf.resource-type-registry.service'];function performRegistrations(registry){registry.getResourceType('OS::Glance::Metadef').setNames(gettext('Metadata Definition'),gettext('Metadata Definitions'));registry.getResourceType('OS::Nova::Server').setNames(gettext('Instance'),gettext('Instances'));registry.getResourceType('OS::Nova::Flavor').setNames(gettext('Flavor'),gettext('Flavors'));registry.getResourceType('OS::Nova::Hypervisor').setNames(gettext('Hypervisor'),gettext('Hypervisors'));registry.getResourceType('OS::Nova::Keypair').setNames(gettext('Key Pair'),gettext('Key Pairs'));registry.getResourceType('OS::Designate::Zone').setNames(gettext('DNS Domain'),gettext('DNS Domains'));registry.getResourceType('OS::Designate::RecordSet').setNames(gettext('DNS Record'),gettext('DNS Records'));registry.getResourceType('OS::Cinder::Backup').setNames(gettext('Volume Backup'),gettext('Volume Backups'));registry.getResourceType('OS::Cinder::Snapshot').setNames(gettext('Volume Snapshot'),gettext('Volume Snapshots'));registry.getResourceType('OS::Cinder::Volume').setNames(gettext('Volume'),gettext('Volumes'));registry.getResourceType('OS::Neutron::HealthMonitor').setNames(gettext('Network Health Monitor'),gettext('Network Health Monitors'));registry.getResourceType('OS::Neutron::Net').setNames(gettext('Network'),gettext('Networks'));registry.getResourceType('OS::Neutron::Pool').setNames(gettext('Load Balancer Pool'),gettext('Load Balancer Pools'));registry.getResourceType('OS::Neutron::PoolMember').setNames(gettext('Load Balancer Pool Member'),gettext('Load Balancer Pool Members'));registry.getResourceType('OS::Neutron::Port').setNames(gettext('Network Port'),gettext('Network Ports'));registry.getResourceType('OS::Neutron::Router').setNames(gettext('Network Router'),gettext('Network Routers'));registry.getResourceType('OS::Neutron::Subnet').setNames(gettext('Network Subnet'),gettext('Network Subnets'));registry.getResourceType('OS::Neutron::FloatingIP').setNames(gettext('Floating IP'),gettext('Floating IPs'));registry.getResourceType('OS::Neutron::SecurityGroup').setNames(gettext('Security Group'),gettext('Security Groups'));registry.getResourceType('OS::Neutron::Trunk').setNames(gettext('Trunk'),gettext('Trunks'));registry.getResourceType('OS::Keystone::User').setNames(gettext('User'),gettext('Users'));registry.getResourceType('OS::Keystone::Group').setNames(gettext('Group'),gettext('Groups'));registry.getResourceType('OS::Keystone::Project').setNames(gettext('Project'),gettext('Projects'));registry.getResourceType('OS::Keystone::Role').setNames(gettext('Role'),gettext('Roles'));}})();(function(){'use strict';angular.module('horizon.app.tech-debt',[]);})();(function(){'use strict';angular.module('horizon.app.core.cloud-services').directive('hzIfCinderExtensions',hzCinderExtensions);hzCinderExtensions.$inject=['hzPromiseToggleTemplateDirective','horizon.app.core.openstack-service-api.cinderExtensions'];function hzCinderExtensions(hzPromiseToggleTemplateDirective,cinderExtensions){return angular.extend(hzPromiseToggleTemplateDirective[0],{singlePromiseResolver:cinderExtensions.ifNameEnabled,name:'hzIfCinderExtensions'});}})();(function(){'use strict';angular.module('horizon.app.core.cloud-services').directive('hzIfNeutronExtensions',hzNeutronExtensions);hzNeutronExtensions.$inject=['hzPromiseToggleTemplateDirective','horizon.app.core.openstack-service-api.neutronExtensions'];function hzNeutronExtensions(hzPromiseToggleTemplateDirective,neutronExtensions){return angular.extend(hzPromiseToggleTemplateDirective[0],{singlePromiseResolver:neutronExtensions.ifNameEnabled,name:'hzIfNeutronExtensions'});}})();(function(){'use strict';angular.module('horizon.app.core.cloud-services').directive('hzIfNovaExtensions',hzNovaExtensions);hzNovaExtensions.$inject=['hzPromiseToggleTemplateDirective','horizon.app.core.openstack-service-api.novaExtensions'];function hzNovaExtensions(hzPromiseToggleTemplateDirective,novaExtensions){return angular.extend(hzPromiseToggleTemplateDirective[0],{singlePromiseResolver:novaExtensions.ifNameEnabled,name:'hzIfNovaExtensions'});}})();(function(){'use strict';angular.module('horizon.app.core.cloud-services').directive('hzIfPolicies',hzIfPolicies);hzIfPolicies.$inject=['hzPromiseToggleTemplateDirective','horizon.app.core.openstack-service-api.policy'];function hzIfPolicies(hzPromiseToggle,policy){return angular.extend(hzPromiseToggle[0],{singlePromiseResolver:policy.ifAllowed,name:'hzIfPolicies'});}})();(function(){'use strict';angular.module('horizon.app.core.cloud-services').directive('hzIfServices',hzIfServices);hzIfServices.$inject=['hzPromiseToggleTemplateDirective','horizon.app.core.openstack-service-api.serviceCatalog'];function hzIfServices(hzPromiseToggleTemplateDirective,serviceCatalog){return angular.extend(hzPromiseToggleTemplateDirective[0],{singlePromiseResolver:serviceCatalog.ifTypeEnabled,name:'hzIfServices'});}})();(function(){'use strict';angular.module('horizon.app.core.cloud-services').directive('hzIfSettings',hzSettingsToggle);hzSettingsToggle.$inject=['hzPromiseToggleTemplateDirective','horizon.app.core.openstack-service-api.settings'];function hzSettingsToggle(hzPromiseToggleTemplate,settingsService){return angular.extend(hzPromiseToggleTemplate[0],{singlePromiseResolver:settingsService.ifEnabled,name:'hzIfSettings'});}})();(function(){'use strict';angular.module('horizon.app.core.cloud-services').directive('hzIfApiVersion',hzIfApiVersion);hzIfApiVersion.$inject=['$q','hzPromiseToggleTemplateDirective','horizon.app.core.openstack-service-api.glance','horizon.app.core.openstack-service-api.keystone'];function hzIfApiVersion($q,hzPromiseToggle,glance,keystone){return angular.extend(hzPromiseToggle[0],{singlePromiseResolver:ifVersionEnabled,name:'hzIfApiVersion'});function ifVersionEnabled(expected){var deferred=$q.defer();var type=Object.keys(expected)[0];var operator=expected[Object.keys(expected)[1]];switch(type){case"glance":glance.getVersion().then(onSuccess);break;case"keystone":keystone.getVersion().then(onSuccess);break;}
function onSuccess(actual){var actualVersion=actual.data.version;var expectedVersion=expected[type];var isVersion=false;if(operator){if(angular.isNumber(actualVersion)&&angular.isNumber(expectedVersion)&&["<=","<","==",">",">="].indexOf(operator)>-1){var expr=actualVersion+operator+expectedVersion;isVersion=eval(expr);}}else{if(angular.equals(actualVersion,expectedVersion)){isVersion=true;}}
if(isVersion){deferred.resolve();}else{deferred.reject();}}
return deferred.promise;}}})();(function(){'use strict';angular.module('horizon.app.core.flavors').factory('horizon.app.core.flavors.actions.delete-flavor.service',deleteFlavorService);deleteFlavorService.$inject=['horizon.app.core.openstack-service-api.nova','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.gettext','horizon.framework.util.q.extensions','horizon.framework.widgets.modal.deleteModalService','horizon.app.core.flavors.resourceType'];function deleteFlavorService(nova,actionResultService,gettext,$qExtensions,deleteModal,flavorsResourceType){var service={allowed:allowed,perform:perform};return service;function allowed(){return $qExtensions.booleanAsPromise(true);}
function perform(items,scope){var flavors=angular.isArray(items)?items:[items];var context={labels:labelize(flavors.length),deleteEntity:deleteFlavor};return deleteModal.open(scope,flavors,context).then(deleteResult);}
function deleteResult(deleteModalResult){var actionResult=actionResultService.getActionResult();deleteModalResult.pass.forEach(function markDeleted(item){actionResult.deleted(flavorsResourceType,item.context.id);});deleteModalResult.fail.forEach(function markFailed(item){actionResult.failed(flavorsResourceType,item.context.id);});return actionResult.result;}
function labelize(count){return{title:ngettext('Confirm Delete Flavor','Confirm Delete Flavors',count),message:ngettext('You have selected "%s". Deleted flavor is not recoverable.','You have selected "%s". Deleted flavors are not recoverable.',count),submit:ngettext('Delete Flavor','Delete Flavors',count),success:ngettext('Deleted Flavor: %s.','Deleted Flavors: %s.',count),error:ngettext('Unable to delete Flavor: %s.','Unable to delete Flavors: %s.',count)};}
function deleteFlavor(flavor){return nova.deleteFlavor(flavor,true);}}})();(function(){'use strict';angular.module('horizon.app.core.flavors').factory('horizon.app.core.flavors.actions.update-metadata.service',updateMetadataService);updateMetadataService.$inject=['horizon.app.core.metadata.modal.service','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','horizon.app.core.flavors.resourceType'];function updateMetadataService(metadataModalService,actionResultService,$qExtensions,flavorResourceType){var service={perform:perform,allowed:allowed};return service;function perform(flavor){return metadataModalService.open('flavor',flavor.id).result.then(onSuccess);function onSuccess(){return actionResultService.getActionResult().updated(flavorResourceType,flavor.id).result;}}
function allowed(){return $qExtensions.booleanAsPromise(true);}}})();(function(){"use strict";angular.module('horizon.app.core.flavors').factory('horizon.app.core.flavors.service',flavorsService);flavorsService.$inject=['horizon.app.core.openstack-service-api.nova'];function flavorsService(nova){return{getFlavorsPromise:getFlavorsPromise};function getFlavorsPromise(params){var fullParams=angular.extend({},params,{get_extras:true});return nova.getFlavors(fullParams);}}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.actions.create-volume.service',createVolumeService);createVolumeService.$inject=['$q','horizon.app.core.openstack-service-api.cinder','horizon.app.core.openstack-service-api.policy','horizon.app.core.openstack-service-api.serviceCatalog','horizon.app.core.images.events','horizon.app.core.images.non_bootable_image_types','horizon.app.core.images.workflows.create-volume.service','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','horizon.framework.widgets.modal.wizard-modal.service','horizon.framework.widgets.toast.service','horizon.app.core.volumes.resourceType'];function createVolumeService($q,cinder,policy,serviceCatalog,events,nonBootableImageTypes,createVolumeWorkflowService,actionResultService,$qExtensions,wizardModalService,toast,volumeResourceType){var createVolumePromise,volumeServiceEnabledPromise;var message={info:gettext('Creating volume %s')};var service={initAction:initAction,allowed:allowed,perform:perform};return service;function initAction(){createVolumePromise=policy.ifAllowed({rules:[['volume','volume:create']]});if(serviceCatalog.ifTypeEnabled('volumev2')||serviceCatalog.ifTypeEnabled('volumev3')){volumeServiceEnabledPromise=true;}else{volumeServiceEnabledPromise=false;}}
function allowed(image){return $q.all([imageBootable(image),createVolumePromise,volumeServiceEnabledPromise,imageActive(image)]);}
function perform(image){return wizardModalService.modal({data:{image:image},workflow:createVolumeWorkflowService,submit:submit}).result;}
function submit(stepModels){return cinder.createVolume(stepModels.volumeForm).then(showSuccessMessage);}
function showSuccessMessage(response){var volume=response.data;toast.add('info',interpolate(message.info,[volume.name]));return actionResultService.getActionResult().created(volumeResourceType,volume.id).result;}
function imageBootable(image){return $qExtensions.booleanAsPromise(nonBootableImageTypes.indexOf(image.container_format)<0);}
function imageActive(image){return $qExtensions.booleanAsPromise(image.status==='active');}}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.actions.create.service',createService);createService.$inject=['$q','horizon.app.core.images.events','horizon.app.core.images.resourceType','horizon.app.core.images.actions.createWorkflow','horizon.app.core.metadata.service','horizon.app.core.openstack-service-api.glance','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.modal.wizard-modal.service','horizon.framework.widgets.toast.service'];function createService($q,events,resourceType,createWorkflow,metadataService,glance,policy,actionResultService,wizardModalService,toast){var message={success:gettext('Image %s was successfully created.')};var scope;var service={perform:perform,allowed:allowed};return service;function allowed(){return policy.ifAllowed({rules:[['image','add_image']]});}
function perform(selected,$scope){scope=$scope;return wizardModalService.modal({workflow:createWorkflow,submit:submit}).result;}
function submit(stepModels){var finalModel=angular.extend({},stepModels.imageForm,stepModels.updateMetadataForm);if(finalModel.source_type==='url'){delete finalModel.data;}else{delete finalModel.image_url;}
function onProgress(progress){scope.$broadcast(events.IMAGE_UPLOAD_PROGRESS,progress);}
return glance.createImage(finalModel,onProgress).then(onCreateImage);}
function onCreateImage(response){var newImage=response.data;toast.add('success',interpolate(message.success,[newImage.name]));return actionResultService.getActionResult().created(resourceType,newImage.id).result;}}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.actions.createWorkflow',createWorkflow);createWorkflow.$inject=['horizon.app.core.images.basePath','horizon.app.core.workflow.factory','horizon.framework.util.i18n.gettext'];function createWorkflow(basePath,workflowService,gettext){var workflow=workflowService({title:gettext('Create Image'),btnText:{finish:gettext('Create Image')},steps:[{title:gettext('Image Details'),templateUrl:basePath+'steps/create-image/create-image.html',helpUrl:basePath+'steps/create-image/create-image.help.html',formName:'imageForm'},{title:gettext('Metadata'),templateUrl:basePath+'steps/update-metadata/update-metadata.html',helpUrl:basePath+'steps/update-metadata/update-metadata.help.html',formName:'updateMetadataForm'}]});return workflow;}})();(function(){'use strict';angular.module('horizon.app.core.images.actions').component('deleteImageSelected',{controller:controller,templateUrl:templateUrl,bindings:{callback:'=?',selected:'<'}});controller.$inject=['horizon.app.core.images.actions.delete-image.service','$q'];function controller(deleteImageService,$q){var ctrl=this;ctrl.$onInit=function(){ctrl.text=gettext('Delete Images');ctrl._disable();};ctrl.$onChanges=function(){ctrl._disable();};ctrl._disable=function(){if(ctrl.selected.length===0){ctrl.disabled=true;}else{var promises=$.map(ctrl.selected,function(image){return deleteImageService.allowed(image);});$q.all(promises).then(function(){ctrl.disabled=false;},function(){ctrl.disabled=true;});}};}
templateUrl.$inject=['horizon.app.core.images.basePath'];function templateUrl(basePath){return basePath+'actions/delete-image-selected.template.html';}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.actions.delete-image.service',deleteImageService);deleteImageService.$inject=['$q','horizon.app.core.openstack-service-api.glance','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.gettext','horizon.framework.util.q.extensions','horizon.framework.widgets.modal.deleteModalService','horizon.framework.widgets.toast.service','horizon.app.core.images.resourceType'];function deleteImageService($q,glance,policy,actionResultService,gettext,$qExtensions,deleteModal,toast,imagesResourceType){var notAllowedMessage=gettext("You are not allowed to delete images: %s");var service={allowed:allowed,perform:perform};return service;function perform(items,newScope){var scope=newScope;var context={};var images=angular.isArray(items)?items:[items];context.labels=labelize(images.length);context.deleteEntity=deleteImage;return $qExtensions.allSettled(images.map(checkPermission)).then(afterCheck);function checkPermission(image){return{promise:allowed(image),context:image};}
function afterCheck(result){var outcome=$q.reject();if(result.fail.length>0){toast.add('error',getMessage(notAllowedMessage,result.fail));outcome=$q.reject(result.fail);}
if(result.pass.length>0){outcome=deleteModal.open(scope,result.pass.map(getEntity),context).then(createResult);}
return outcome;}}
function allowed(image){if(image){return $q.all([notProtected(image),policy.ifAllowed({rules:[['image','delete_image']]}),notDeleted(image)]);}else{return policy.ifAllowed({rules:[['image','delete_image']]});}}
function createResult(deleteModalResult){var actionResult=actionResultService.getActionResult();deleteModalResult.pass.forEach(function markDeleted(item){actionResult.deleted(imagesResourceType,getEntity(item).id);});deleteModalResult.fail.forEach(function markFailed(item){actionResult.failed(imagesResourceType,getEntity(item).id);});return actionResult.result;}
function labelize(count){return{title:ngettext('Confirm Delete Image','Confirm Delete Images',count),message:ngettext('You have selected "%s". Deleted image is not recoverable.','You have selected "%s". Deleted images are not recoverable.',count),submit:ngettext('Delete Image','Delete Images',count),success:ngettext('Deleted Image: %s.','Deleted Images: %s.',count),error:ngettext('Unable to delete Image: %s.','Unable to delete Images: %s.',count)};}
function notDeleted(image){return $qExtensions.booleanAsPromise(image.status!=='deleted');}
function notProtected(image){return $qExtensions.booleanAsPromise(!image.protected);}
function deleteImage(image){return glance.deleteImage(image,true);}
function getMessage(message,entities){return interpolate(message,[entities.map(getName).join(", ")]);}
function getName(result){return getEntity(result).name;}
function getEntity(result){return result.context;}}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.actions.edit.service',editService);editService.$inject=['$q','horizon.app.core.images.events','horizon.app.core.images.resourceType','horizon.app.core.images.actions.editWorkflow','horizon.app.core.metadata.service','horizon.app.core.openstack-service-api.glance','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','horizon.framework.widgets.modal.wizard-modal.service','horizon.framework.widgets.toast.service'];function editService($q,events,imageResourceType,editWorkflow,metadataService,glance,policy,actionResultService,$qExtensions,wizardModalService,toast){var message={success:gettext('Image %s was successfully updated.')};var service={allowed:allowed,perform:perform};return service;function allowed(image){return $q.all([policy.ifAllowed({rules:[['image','modify_image']]}),isActive(image)]);}
function perform(image){var deferred=glance.getImage(image.id);deferred.then(onLoad);var data={};data.imagePromise=deferred;function onLoad(response){var localImage=response.data;data.image=localImage;}
return wizardModalService.modal({data:data,workflow:editWorkflow,submit:submit}).result;}
function submit(stepModels){var image=stepModels.imageForm;var metadata=stepModels.updateMetadataForm;return updateMetadata().then(updateImage,onUpdateImageFail);function updateMetadata(){return metadataService.getMetadata('image',image.id).then(onMetadataGet);function onMetadataGet(response){var updated=metadata||Object();updated.description=image.properties.description;var removed=angular.copy(response.data);angular.forEach(updated,function(value,key){delete removed[key];});return metadataService.editMetadata('image',image.id,updated,Object.keys(removed));}}
function updateImage(){return glance.updateImage(image).then(onUpdateImageSuccess,onUpdateImageFail);}
function onUpdateImageSuccess(){toast.add('success',interpolate(message.success,[image.name]));return actionResultService.getActionResult().updated(imageResourceType,image.id).result;}
function onUpdateImageFail(){return actionResultService.getActionResult().failed(imageResourceType,image.id).result;}}
function isActive(image){return $qExtensions.booleanAsPromise(image.status==='active');}}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.actions.editWorkflow',editWorkflow);editWorkflow.$inject=['horizon.app.core.images.basePath','horizon.app.core.workflow.factory','horizon.framework.util.i18n.gettext'];function editWorkflow(basePath,workflowService,gettext){var workflow=workflowService({title:gettext('Edit Image'),btnText:{finish:gettext('Update Image')},steps:[{title:gettext('Image Details'),templateUrl:basePath+'steps/edit-image/edit-image.html',helpUrl:basePath+'steps/edit-image/edit-image.help.html',formName:'imageForm'},{title:gettext('Metadata'),templateUrl:basePath+'steps/update-metadata/update-metadata.html',helpUrl:basePath+'steps/update-metadata/update-metadata.help.html',formName:'updateMetadataForm'}]});return workflow;}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.actions.launch-instance.service',launchInstanceService);launchInstanceService.$inject=['$q','horizon.app.core.images.non_bootable_image_types','horizon.app.core.openstack-service-api.policy','horizon.dashboard.project.workflow.launch-instance.modal.service','horizon.framework.util.q.extensions'];function launchInstanceService($q,nonBootableImageTypes,policy,launchInstanceModal,$qExtensions){var service={perform:perform,allowed:allowed};return service;function perform(image){return launchInstanceModal.open({'imageId':image.id});}
function allowed(image){return $q.all([isBootable(image),isActive(image),policy.ifAllowed({rules:[['compute','compute:create']]})]);}
function isActive(image){return $qExtensions.booleanAsPromise(image.status==='active');}
function isBootable(image){return $qExtensions.booleanAsPromise(nonBootableImageTypes.indexOf(image.container_format)<0);}}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.actions.update-metadata.service',updateMetadataService);updateMetadataService.$inject=['$q','horizon.app.core.metadata.modal.service','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','horizon.app.core.images.resourceType'];function updateMetadataService($q,metadataModalService,policy,actionResultService,$qExtensions,imageResourceType){var service={perform:perform,allowed:allowed};return service;function perform(image){return metadataModalService.open('image',image.id).result.then(onSuccess);function onSuccess(){return actionResultService.getActionResult().updated(imageResourceType,image.id).result;}}
function allowed(image){return $q.all([policy.ifAllowed({rules:[['image','modify_metadef_object']]}),isActive(image)]);}
function isActive(image){return $qExtensions.booleanAsPromise(image.status==='active');}}})();(function(){"use strict";angular.module('horizon.app.core.images').controller('ImageOverviewController',ImageOverviewController);ImageOverviewController.$inject=['horizon.app.core.images.resourceType','horizon.framework.conf.resource-type-registry.service','horizon.app.core.openstack-service-api.userSession','$scope'];function ImageOverviewController(imageResourceTypeCode,registry,userSession,$scope){var ctrl=this;ctrl.resourceType=registry.getResourceType(imageResourceTypeCode);$scope.context.loadPromise.then(onGetImage);function onGetImage(image){ctrl.image=image.data;ctrl.image.properties=Object.keys(ctrl.image.properties).map(function mapProps(prop){var propValue=ctrl.image.properties[prop];if(angular.isArray(propValue)&&propValue.length===0){propValue='';}
return{name:prop,value:propValue};});userSession.get().then(setProject);function setProject(session){ctrl.projectId=session.project_id;}}}})();(function(){'use strict';angular.module('horizon.app.core.images').filter('imageVisibility',imageVisibilityFilter);imageVisibilityFilter.$inject=['horizon.framework.util.i18n.gettext'];function imageVisibilityFilter(gettext){var imageVisibility={'public':gettext('Public'),'private':gettext('Private'),'shared':gettext('Shared'),'community':gettext('Community'),'other':null,'unknown':gettext('Unknown')};return function getVisibility(image,currentProjectId){imageVisibility.other=gettext('Image from Other Project - Non-Public');if(null!==image&&angular.isDefined(image)){if(image.apiVersion<2){imageVisibility.other=gettext('Shared with Project');}
return evaluateImageProperties(image,currentProjectId);}else{return imageVisibility.unknown;}};function evaluateImageProperties(image,currentProjectId){var translatedVisibility;if(angular.isDefined(image.visibility)){translatedVisibility=safeTranslateVisibility(image.visibility);}else if(angular.isDefined(image.is_public)){translatedVisibility=translateIsPublic(image.is_public);}else{translatedVisibility=imageVisibility.unknown;}
return deriveSharingStatus(image,currentProjectId,translatedVisibility);}
function safeTranslateVisibility(visibility){var translation=imageVisibility[visibility];if(angular.isDefined(translation)){return translation;}else{return visibility;}}
function translateIsPublic(isPublic){if(isPublic){return imageVisibility.public;}else{return imageVisibility.private;}}
function deriveSharingStatus(image,currentProjectId,translatedVisibility){if(angular.equals(translatedVisibility,imageVisibility.public)){return translatedVisibility;}else if(angular.equals(translatedVisibility,imageVisibility.community)){return translatedVisibility;}else if(angular.isDefined(currentProjectId)&&!angular.equals(image.owner,currentProjectId)){return imageVisibility.other;}else{return translatedVisibility;}}}}());(function(){"use strict";angular.module('horizon.app.core.images').factory('horizon.app.core.images.service',imageService);imageService.$inject=['$filter','$location','horizon.app.core.openstack-service-api.glance','horizon.app.core.openstack-service-api.userSession','horizon.app.core.images.transitional-statuses','horizon.app.core.openstack-service-api.settings','horizon.app.core.detailRoute'];function imageService($filter,$location,glance,userSession,transitionalStatuses,settings,detailRoute){var version;return{getDetailsPath:getDetailsPath,getImagePromise:getImagePromise,getImagesPromise:getImagesPromise,imageType:imageType,isInTransition:isInTransition,getFilterFirstSettingPromise:getFilterFirstSettingPromise};function getDetailsPath(item){var detailsPath=detailRoute+'OS::Glance::Image/'+item.id;if($location.url()==='/admin/images'){detailsPath=detailsPath+"?nav=/admin/images/";}
return detailsPath;}
function imageType(item){if(null!==item&&angular.isDefined(item)&&angular.isDefined(item.properties)&&(item.properties.image_type==='snapshot'||angular.isDefined(item.properties.block_device_mapping))){return gettext('Snapshot');}else{return gettext('Image');}}
function isInTransition(item){if(item&&angular.isString(item.status)){return transitionalStatuses.indexOf(item.status.toLowerCase())>-1;}
return false;}
function getImagesPromise(params){var projectId;return userSession.get().then(getImages);function getImages(userSession){glance.getVersion().then(setVersion);projectId=userSession.project_id;return glance.getImages(params).then(modifyResponse);}
function modifyResponse(response){return{data:{items:response.data.items.map(modifyImage)}};function modifyImage(image){image.trackBy=image.id+image.updated_at+image.status;image.apiVersion=version;image.visibility=$filter('imageVisibility')(image,projectId);image.name=image.name||image.id;image.type=imageType(image);return image;}}}
function getImagePromise(identifier){glance.getVersion().then(setVersion);return glance.getImage(identifier).then(modifyResponse);function modifyResponse(response){response.data.apiVersion=version;return{data:response.data};}}
function setVersion(response){version=response.data.version;}
function getFilterFirstSettingPromise(){return settings.getSetting('FILTER_DATA_FIRST',{'admin.images':false}).then(resolve);function resolve(result){if($location.url()==='/admin/images'){return result['admin.images'];}
return false;}}}})();(function(){'use strict';angular.module('horizon.app.core.images').controller('horizon.app.core.images.steps.CreateImageController',CreateImageController);CreateImageController.$inject=['$scope','horizon.app.core.openstack-service-api.glance','horizon.app.core.images.events','horizon.app.core.images.imageFormats','horizon.app.core.images.validationRules','horizon.app.core.openstack-service-api.settings','horizon.app.core.openstack-service-api.policy'];function CreateImageController($scope,glance,events,imageFormats,validationRules,settings,policyAPI){var ctrl=this;settings.getSettings().then(getConfiguredFormatsAndModes);ctrl.validationRules=validationRules;ctrl.imageFormats=imageFormats;ctrl.diskFormats=[];ctrl.prepareUpload=prepareUpload;ctrl.apiVersion=0;$scope.stepModels.imageForm=ctrl.image={source_type:'',image_url:'',data:{},is_copying:false,protected:false,min_disk:0,min_ram:0,container_format:'',disk_format:'',visibility:'shared'};ctrl.uploadProgress=-1;ctrl.imageProtectedOptions=[{label:gettext('Yes'),value:true},{label:gettext('No'),value:false}];ctrl.imageCopyOptions=[{label:gettext('Yes'),value:true},{label:gettext('No'),value:false}];ctrl.imageSourceOptions=[];ctrl.imageVisibilityOptions=[{label:gettext('Private'),value:'private'},{label:gettext('Shared'),value:'shared'}];ctrl.kernelImages=[];ctrl.ramdiskImages=[];ctrl.setFormats=setFormats;ctrl.isLocalFileUpload=isLocalFileUpload;init();var watchUploadProgress=$scope.$on(events.IMAGE_UPLOAD_PROGRESS,watchImageUpload);$scope.$on('$destroy',function(){watchUploadProgress();});function prepareUpload(file){ctrl.image.data=file;}
function watchImageUpload(event,progress){ctrl.uploadProgress=progress;}
function getConfiguredFormatsAndModes(response){ctrl.apiVersion=response.HORIZON_ACTIVE_IMAGE_VERSION;var settingsFormats=response.OPENSTACK_IMAGE_FORMATS;var uploadMode=response.HORIZON_IMAGES_UPLOAD_MODE;var dupe=angular.copy(imageFormats);var imageDefaults=response.CREATE_IMAGE_DEFAULTS;angular.forEach(dupe,function stripUnknown(name,key){if(settingsFormats.indexOf(key)===-1){delete dupe[key];}});if(uploadMode!=='off'){var uploadValue='file-'+uploadMode;ctrl.imageSourceOptions.push({label:gettext('File'),value:uploadValue});ctrl.image.source_type=uploadValue;}
if(ctrl.apiVersion<2||response.IMAGES_ALLOW_LOCATION){ctrl.imageSourceOptions.push({label:gettext('URL'),value:'url'});ctrl.image.source_type='url';}
ctrl.imageFormats=dupe;if(imageDefaults&&imageDefaults.image_visibility==="private"){ctrl.image.visibility="private";}}
function isLocalFileUpload(){var type=ctrl.image.source_type;return(type==='file-legacy'||type==='file-direct');}
function init(){glance.getImages({paginate:false}).success(onGetImages);policyAPI.ifAllowed({rules:[['image','communitize_image']]}).then(function(){ctrl.imageVisibilityOptions.push({label:gettext('Community'),value:'community'});});policyAPI.ifAllowed({rules:[['image','publicize_image']]}).then(function(){ctrl.imageVisibilityOptions.push({label:gettext('Public'),value:'public'});});}
function onGetImages(response){ctrl.kernelImages=response.items.filter(function(elem){return elem.disk_format==='aki';});ctrl.ramdiskImages=response.items.filter(function(elem){return elem.disk_format==='ari';});}
function setFormats(){ctrl.image.container_format='bare';if(['aki','ami','ari'].indexOf(ctrl.image_format)>-1){ctrl.image.container_format=ctrl.image_format;}
ctrl.image.disk_format=ctrl.image_format;if(ctrl.image_format==='docker'){ctrl.image.container_format='docker';ctrl.image.disk_format='raw';}}}})();(function(){'use strict';angular.module('horizon.app.core.images').constant('BYTE_TO_GIB',9.3132e-10).controller('horizon.app.core.images.steps.CreateVolumeController',CreateVolumeController);CreateVolumeController.$inject=['$scope','$filter','horizon.app.core.openstack-service-api.cinder','horizon.app.core.openstack-service-api.nova','horizon.framework.widgets.charts.quotaChartDefaults','horizon.app.core.images.validationRules','BYTE_TO_GIB'];function CreateVolumeController($scope,$filter,cinder,nova,quotaChartDefaults,validationRules,BYTE_TO_GIB){var ctrl=this;ctrl.volumeType={};ctrl.volumeTypes=[];ctrl.availabilityZones=[];ctrl.image=$scope.image;ctrl.sourceImage=getSourceImage(ctrl.image);ctrl.validationRules=validationRules;ctrl.maxTotalVolumeGigabytes=100;ctrl.totalGigabytesUsed=0;ctrl.maxTotalVolumes=1;ctrl.totalVolumesUsed=0;var numberOfVolumesToAdd=1;$scope.stepModels.volumeForm=ctrl.volume={size:Math.ceil(Math.max(ctrl.image.min_disk,ctrl.image.size*BYTE_TO_GIB))||1,name:ctrl.image.name,description:'',volume_type:'',availability_zone:'',metadata:{},image_id:ctrl.image.id,snapshot_id:null,source_volid:null};ctrl.storageQuota={title:gettext('Volume and Snapshot Quota (GiB)'),maxLimit:ctrl.maxTotalVolumeGigabytes,label:getPercentUsed(ctrl.volume.size,ctrl.maxTotalVolumeGigabytes),data:[{label:quotaChartDefaults.usageLabel,value:ctrl.totalGigabytesUsed,colorClass:quotaChartDefaults.usageColorClass},{label:quotaChartDefaults.addedLabel,value:ctrl.volume.size,colorClass:quotaChartDefaults.addedColorClass},{label:quotaChartDefaults.remainingLabel,value:ctrl.maxTotalVolumeGigabytes-ctrl.volume.size,colorClass:quotaChartDefaults.remainingColorClass}]};ctrl.volumeQuota={title:gettext('Volume Quota'),maxLimit:ctrl.maxTotalVolumes,label:getPercentUsed(ctrl.totalVolumesUsed,ctrl.maxTotalVolumes),data:[{label:quotaChartDefaults.usageLabel,value:ctrl.totalVolumesUsed,colorClass:quotaChartDefaults.usageColorClass},{label:quotaChartDefaults.addedLabel,value:numberOfVolumesToAdd,colorClass:quotaChartDefaults.addedColorClass},{label:quotaChartDefaults.remainingLabel,value:ctrl.maxTotalVolumes-ctrl.totalVolumesUsed,colorClass:quotaChartDefaults.remainingColorClass}]};var capacityWatcher=$scope.$watch(function(){return ctrl.volume.size;},updateStorageGraph);var volumeTypeWatcher=$scope.$watch(function(){return ctrl.volumeType;},updateVolumeType,true);$scope.$on('$destroy',deregisterWatchers);init();function init(){cinder.getVolumeTypes().success(onGetVolumeTypes);cinder.getAbsoluteLimits().success(onGetAbsoluteLimits);cinder.getAvailabilityZones().success(onGetAvailabilityZones);}
function onGetVolumeTypes(response){ctrl.volumeTypes=response.items;cinder.getDefaultVolumeType().success(onGetDefaultVolumeType);}
function onGetDefaultVolumeType(response){ctrl.volumeTypes.forEach(function(volumeType){if(volumeType.name===response.name){ctrl.volumeType=volumeType;}});}
function onGetAvailabilityZones(response){ctrl.availabilityZones=response.items.map(justNames);if(ctrl.availabilityZones.length>0){ctrl.volume.availability_zone=ctrl.availabilityZones[0];}
function justNames(item){return item.zoneName;}}
function onGetAbsoluteLimits(response){ctrl.maxTotalVolumeGigabytes=response.maxTotalVolumeGigabytes;ctrl.totalGigabytesUsed=response.totalGigabytesUsed;updateStorageGraph();ctrl.totalVolumesUsed=response.totalVolumesUsed;ctrl.maxTotalVolumes=response.maxTotalVolumes;updateInstanceGraph();}
function updateStorageGraph(){if(ctrl.volume.size>=0){var totalGigabytesAllocated=ctrl.volume.size+ctrl.totalGigabytesUsed;ctrl.storageQuota.data[0].value=ctrl.totalGigabytesUsed;ctrl.storageQuota.data[1].value=ctrl.volume.size;ctrl.storageQuota.data[2].value=Math.max(ctrl.maxTotalVolumeGigabytes-totalGigabytesAllocated,0);ctrl.storageQuota.label=getPercentUsed(totalGigabytesAllocated,ctrl.maxTotalVolumeGigabytes);ctrl.storageQuota.maxLimit=ctrl.maxTotalVolumeGigabytes;ctrl.storageQuota.overMax=totalGigabytesAllocated>ctrl.storageQuota.maxLimit;ctrl.storageQuota=angular.extend({},ctrl.storageQuota);$scope.volumeForm.$setValidity('volumeSize',!ctrl.storageQuota.overMax);}}
function updateInstanceGraph(){ctrl.volumeQuota.data[0].value=ctrl.totalVolumesUsed;ctrl.volumeQuota.data[2].value=Math.max(ctrl.maxTotalVolumes-ctrl.totalVolumesUsed-numberOfVolumesToAdd,0);ctrl.volumeQuota.label=getPercentUsed(ctrl.totalVolumesUsed+numberOfVolumesToAdd,ctrl.maxTotalVolumes);ctrl.volumeQuota.maxLimit=ctrl.maxTotalVolumes;ctrl.volumeQuota.overMax=ctrl.totalVolumesUsed===ctrl.volumeQuota.maxLimit;ctrl.volumeQuota=angular.extend({},ctrl.volumeQuota);}
function getPercentUsed(used,total){return Math.round(used/total*100)+'%';}
function getSourceImage(image){return image.name+' ('+$filter('bytes')(image.size)+')';}
function updateVolumeType(){ctrl.volume.volume_type=ctrl.volumeType.name||'';}
function deregisterWatchers(){capacityWatcher();volumeTypeWatcher();}}})();(function(){'use strict';angular.module('horizon.app.core.images').controller('horizon.app.core.images.steps.EditImageController',EditImageController);EditImageController.$inject=['$scope','horizon.app.core.images.imageFormats','horizon.app.core.images.validationRules','horizon.app.core.openstack-service-api.settings','horizon.app.core.openstack-service-api.policy'];function EditImageController($scope,imageFormats,validationRules,settings,policy){var ctrl=this;settings.getSettings().then(getConfiguredFormats);ctrl.diskFormats=[];ctrl.validationRules=validationRules;ctrl.imageProtectedOptions=[{label:gettext('Yes'),value:true},{label:gettext('No'),value:false}];ctrl.imageVisibilityOptions=[{label:gettext('Private'),value:'private'},{label:gettext('Shared'),value:'shared'}];ctrl.setFormats=setFormats;$scope.imagePromise.then(init);function getConfiguredFormats(response){var settingsFormats=response.OPENSTACK_IMAGE_FORMATS;var dupe=angular.copy(imageFormats);angular.forEach(dupe,function stripUnknown(name,key){if(settingsFormats.indexOf(key)===-1){delete dupe[key];}});ctrl.imageFormats=dupe;}
function init(response){$scope.stepModels.imageForm=ctrl.image=response.data;ctrl.image.kernel=ctrl.image.properties.kernel_id;ctrl.image.ramdisk=ctrl.image.properties.ramdisk_id;ctrl.image.architecture=ctrl.image.properties.architecture;ctrl.image_format=ctrl.image.disk_format;if(ctrl.image.container_format==='docker'){ctrl.image_format='docker';ctrl.image.disk_format='raw';}
setFormats();getVisibilities();}
function getVisibilities(){policy.ifAllowed({rules:[['image','communitize_image']]}).then(function(){ctrl.imageVisibilityOptions.push({label:gettext('Community'),value:'community'});});policy.ifAllowed({rules:[['image','publicize_image']]}).then(function(){ctrl.imageVisibilityOptions.push({label:gettext('Public'),value:'public'});});}
function setFormats(){ctrl.image.container_format='bare';if(['aki','ami','ari'].indexOf(ctrl.image_format)>-1){ctrl.image.container_format=ctrl.image_format;}
ctrl.image.disk_format=ctrl.image_format;if(ctrl.image_format==='docker'){ctrl.image.container_format='docker';ctrl.image.disk_format='raw';}
if(ctrl.image_format==='vhd'){ctrl.image.container_format='ovf';}}}})();(function(){'use strict';angular.module('horizon.app.core.images').controller('horizon.app.core.images.steps.UpdateMetadataController',UpdateMetadataController);UpdateMetadataController.$inject=['$scope','$q','horizon.app.core.images.events','horizon.app.core.metadata.service','horizon.framework.widgets.metadata.tree.service'];function UpdateMetadataController($scope,$q,events,metadataService,metadataTreeService){var ctrl=this;ctrl.tree=new metadataTreeService.Tree([],[]);$scope.$watchCollection(getTree,onMetadataChanged);if($scope.imagePromise){$scope.imagePromise.then(init);}else{$q.all({available:metadataService.getNamespaces('image'),existing:getExistingMetdataPromise({})}).then(onMetadataGet);}
function init(response){var image=response.data;$q.all({available:metadataService.getNamespaces('image'),existing:getExistingMetdataPromise(image)}).then(onMetadataGet);}
function onMetadataGet(response){ctrl.tree=new metadataTreeService.Tree(response.available.data.items,response.existing.data);}
function getTree(){return ctrl.tree.getExisting();}
function getExistingMetdataPromise(image){if(angular.isDefined(image.id)){return metadataService.getMetadata('image',image.id);}else{var deferred=$q.defer();deferred.resolve({data:[]});return deferred.promise;}}
function onMetadataChanged(newValue,oldValue){if(newValue!==oldValue){$scope.stepModels.updateMetadataForm=newValue;}}}})();(function(){'use strict';angular.module('horizon.app.core.images').controller('horizon.app.core.images.DrawerController',controller);controller.$inject=['horizon.app.core.openstack-service-api.glance','horizon.app.core.images.resourceType'];var metadataDefs;function controller(glance,imageResourceType){var ctrl=this;ctrl.metadataDefs=metadataDefs;if(!ctrl.metadataDefs){applyMetadataDefinitions();}
function applyMetadataDefinitions(){glance.getNamespaces({resource_type:imageResourceType},true).then(function setMetadefs(data){ctrl.metadataDefs=data.data.items;});}}})();(function(){'use strict';angular.module('horizon.app.core.images').factory('horizon.app.core.images.workflows.create-volume.service',createVolumeService);createVolumeService.$inject=['horizon.app.core.images.basePath','horizon.app.core.workflow.factory','horizon.framework.util.i18n.gettext'];function createVolumeService(basePath,workflowService,gettext){var workflow=workflowService({title:gettext('Create Volume'),btnText:{finish:gettext('Create Volume')},steps:[{title:gettext('Volume Details'),templateUrl:basePath+'steps/create-volume/create-volume.html',helpUrl:basePath+'steps/create-volume/create-volume.help.html',formName:'volumeForm'}]});return workflow;}})();(function(){'use strict';angular.module('horizon.app.core.keypairs.actions').controller('horizon.app.core.keypairs.actions.CreateKeypairController',createKeypairController);createKeypairController.$inject=['$scope'];function createKeypairController($scope){var ctrl=this;ctrl.key_types={'ssh':gettext("SSH Key"),'x509':gettext("X509 Certificate")};ctrl.onKeyTypeChange=function(keyType){$scope.model.key_type=keyType;};}})();(function(){'use strict';angular.module('horizon.app.core.keypairs.actions').factory('horizon.app.core.keypairs.actions.create.service',createService);createService.$inject=['horizon.app.core.keypairs.basePath','horizon.app.core.keypairs.resourceType','horizon.app.core.openstack-service-api.nova','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.file.text-download','horizon.framework.widgets.form.ModalFormService','horizon.framework.widgets.toast.service'];function createService(basePath,resourceType,nova,policy,actionResult,download,modal,toast){var keypairs=[];var caption=gettext("Create Key Pair");var invalidMsg=gettext("Key pair already exists.");var schema={type:"object",properties:{"name":{title:gettext("Key Pair Name"),type:"string",pattern:"^[A-Za-z0-9 -_]+$"},"key_type":{title:gettext("Key Type"),type:"string"}}};var form=[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-sm-12",items:[{key:"name",validationMessage:{keypairExists:invalidMsg},$validators:{keypairExists:function(name){return(keypairs.indexOf(name)===-1);}},required:true},{type:"template",templateUrl:basePath+"actions/create.key-type.html"}]}]}];var model;var service={perform:perform,allowed:allowed,getKeypairs:getKeypairs};return service;function allowed(){return policy.ifAllowed({rules:[['compute','os_compute_api:os-keypairs:create']]});}
function perform(){getKeypairs();model={key_type:'ssh'};var config={"title":caption,"submitText":caption,"schema":schema,"form":form,"model":model,"submitIcon":"plus","size":"md","helpUrl":basePath+"actions/create.description.html"};return modal.open(config).then(submit);}
function submit(context){return nova.createKeypair(context.model).then(success);}
function success(response){var successMsg=gettext('Key pair %(name)s was successfully created.');toast.add('success',interpolate(successMsg,{name:response.data.name},true));download.downloadTextFile(response.data.private_key,response.data.name+'.pem');var result=actionResult.getActionResult().created(resourceType,response.data.name);return result.result;}
function getKeypairs(){nova.getKeypairs().then(function(response){keypairs=response.data.items.map(getName);});}
function getName(item){return item.keypair.name;}}})();(function(){'use strict';angular.module('horizon.app.core.keypairs').factory('horizon.app.core.keypairs.actions.delete.service',deleteService);deleteService.$inject=['$location','horizon.app.core.keypairs.resourceType','horizon.app.core.openstack-service-api.nova','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.gettext','horizon.framework.widgets.modal.deleteModalService'];function deleteService($location,resourceType,nova,policy,actionResultService,gettext,deleteModal){var service={allowed:allowed,perform:perform};return service;function allowed(){return policy.ifAllowed({rules:[['compute','os_compute_api:os-keypairs:delete']]});}
function perform(items,scope){var keypairs=angular.isArray(items)?items:[items];var context={labels:labelize(keypairs.length),deleteEntity:deleteKeypair};return deleteModal.open(scope,keypairs,context).then(deleteResult);}
function deleteResult(deleteModalResult){var actionResult=actionResultService.getActionResult();deleteModalResult.pass.forEach(function markDeleted(item){actionResult.deleted(resourceType,item.context.id);});deleteModalResult.fail.forEach(function markFailed(item){actionResult.failed(resourceType,item.context.id);});var path='/project/key_pairs';if($location.url()!==path&&actionResult.result.failed.length===0&&actionResult.result.deleted.length>0){$location.path(path);}else{return actionResult.result;}}
function labelize(count){return{title:ngettext('Confirm Delete Key Pair','Confirm Delete Key Pairs',count),message:ngettext('You have selected "%s". Deleted key pair is not recoverable.','You have selected "%s". Deleted key pairs are not recoverable.',count),submit:ngettext('Delete Key Pair','Delete Key Pairs',count),success:ngettext('Deleted Key Pair: %s.','Deleted Key Pairs: %s.',count),error:ngettext('Unable to delete Key Pair: %s.','Unable to delete Key Pairs: %s.',count)};}
function deleteKeypair(keypair){return nova.deleteKeypair(keypair,true);}}})();(function(){'use strict';angular.module('horizon.app.core.keypairs.actions').controller('horizon.app.core.keypairs.actions.ImportPublicKeyController',importPublicKeyController);importPublicKeyController.$inject=['$scope'];function importPublicKeyController($scope){var ctrl=this;ctrl.title=$scope.schema.properties.public_key.title;ctrl.key_types={'ssh':gettext("SSH Key"),'x509':gettext("X509 Certificate")};ctrl.public_key="";ctrl.onKeyTypeChange=function(keyType){$scope.model.key_type=keyType;};ctrl.onPublicKeyChange=function(publicKey){$scope.model.public_key=publicKey;};}})();(function(){'use strict';angular.module('horizon.app.core.keypairs.actions').factory('horizon.app.core.keypairs.actions.import.service',importService);importService.$inject=['horizon.app.core.keypairs.basePath','horizon.app.core.keypairs.resourceType','horizon.app.core.openstack-service-api.nova','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.form.ModalFormService','horizon.framework.widgets.toast.service'];function importService(basePath,resourceType,nova,policy,actionResult,modal,toast){var keypairs=[];var caption=gettext("Import Public Key");var invalidMsg=gettext("Key pair already exists.");var schema={type:"object",properties:{"name":{title:gettext("Key Pair Name"),type:"string",pattern:"^[A-Za-z0-9 _-]+$"},"key_type":{title:gettext("Key Type"),type:"string"},"public_key":{title:gettext("Public Key"),type:"string"}}};var form=[{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-sm-12",items:[{key:"name",validationMessage:{keypairExists:invalidMsg},$validators:{keypairExists:function(name){return(keypairs.indexOf(name)===-1);}},required:true},{type:"template",templateUrl:basePath+"actions/import.public-key.html"}]}]}];var model;var service={perform:perform,allowed:allowed};return service;function allowed(){return policy.ifAllowed({rules:[['compute','os_compute_api:os-keypairs:create']]});}
function perform(){getKeypairs();model={key_type:"ssh",public_key:""};var config={"title":caption,"submitText":caption,"schema":schema,"form":form,"model":model,"submitIcon":"upload","size":"md","helpUrl":basePath+"actions/import.description.html"};return modal.open(config).then(submit);}
function submit(context){return nova.createKeypair(context.model).then(success);}
function success(response){var successMsg=gettext('Successfully imported key pair %(name)s.');toast.add('success',interpolate(successMsg,{name:response.data.name},true));var result=actionResult.getActionResult().created(resourceType,response.data.name);return result.result;}
function getKeypairs(){nova.getKeypairs().then(function(response){keypairs=response.data.items.map(getName);});}
function getName(item){return item.keypair.name;}}})();(function(){"use strict";angular.module('horizon.app.core.keypairs').controller('horizon.app.core.keypairs.DetailsController',KeypairDetailsController);KeypairDetailsController.$inject=['$scope'];function KeypairDetailsController($scope){var ctrl=this;ctrl.keypair={};$scope.context.loadPromise.then(onGetKeypair);function onGetKeypair(response){ctrl.keypair=response.data;ctrl.keypair.keypair_id=ctrl.keypair.id;ctrl.keypair.id=ctrl.keypair.name;}}})();(function(){'use strict';angular.module('horizon.app.core.keypairs').controller('KeypairController',KeypairController);KeypairController.$inject=['horizon.dashboard.project.workflow.launch-instance.basePath','horizon.app.core.openstack-service-api.nova','horizon.framework.widgets.modal-wait-spinner.service','$window','$uibModal'];function KeypairController(basePath,nova,spinnerService,$window,$uibModal){var ctrl=this;ctrl.createKeyPair=createKeyPair;function setKeyPairs(config){return function(response){var keyPairs=response.data.items.map(getName);$uibModal.open({templateUrl:basePath+'keypair/create-keypair.html',controller:'LaunchInstanceCreateKeyPairController as ctrl',windowClass:'modal-dialog-wizard',resolve:{existingKeypairs:getKeypairs}}).result.then(go(config.successUrl));function getName(item){return item.keypair.name;}
function getKeypairs(){return keyPairs;}};}
function createKeyPair(config){nova.getKeypairs().then(setKeyPairs(config));}
function go(url){return function changeUrl(){spinnerService.showModalSpinner(gettext('Please Wait'));$window.location.href=url;};}}})();(function(){"use strict";angular.module('horizon.app.core.keypairs').factory('horizon.app.core.keypairs.service',keypairsService);keypairsService.$inject=['horizon.app.core.detailRoute','horizon.app.core.openstack-service-api.nova'];function keypairsService(detailRoute,nova){return{getKeypairsPromise:getKeypairsPromise,getKeypairPromise:getKeypairPromise,urlFunction:urlFunction};function getKeypairsPromise(params){return nova.getKeypairs(params).then(modifyResponse);function modifyResponse(response){return{data:{items:response.data.items.map(modifyItem)}};function modifyItem(item){item=item.keypair;item.id=item.name;item.trackBy=item.name+item.fingerprint;return item;}}}
function getKeypairPromise(name){return nova.getKeypair(name);}
function urlFunction(item){return detailRoute+'OS::Nova::Keypair/'+item.name;}}})();(function(){'use strict';angular.module('horizon.app.core.metadata').factory('horizon.app.core.metadata.service',metadataService);metadataService.$inject=['horizon.app.core.openstack-service-api.nova','horizon.app.core.openstack-service-api.glance','horizon.app.core.openstack-service-api.cinder'];function metadataService(nova,glance,cinder){var service={getMetadata:getMetadata,editMetadata:editMetadata,getNamespaces:getNamespaces};return service;function getMetadata(resource,id){return{aggregate:nova.getAggregateExtraSpecs,flavor:nova.getFlavorExtraSpecs,image:glance.getImageProps,instance:nova.getInstanceMetadata,volume:cinder.getVolumeMetadata,volume_snapshot:cinder.getVolumeSnapshotMetadata,volume_type:cinder.getVolumeTypeMetadata}[resource](id);}
function editMetadata(resource,id,updated,removed){return{aggregate:nova.editAggregateExtraSpecs,flavor:nova.editFlavorExtraSpecs,image:glance.editImageProps,instance:nova.editInstanceMetadata,volume:cinder.editVolumeMetadata,volume_snapshot:cinder.editVolumeSnapshotMetadata,volume_type:cinder.editVolumeTypeMetadata}[resource](id,updated,removed);}
function getNamespaces(resource,propertiesTarget){var params={resource_type:{aggregate:'OS::Nova::Aggregate',flavor:'OS::Nova::Flavor',image:'OS::Glance::Image',instance:'OS::Nova::Server',volume:'OS::Cinder::Volume',volume_snapshot:'OS::Cinder::Snapshot',volume_type:'OS:Cinder::VolumeType'}[resource]};if(propertiesTarget){params.properties_target=propertiesTarget;}
return glance.getNamespaces(params,false);}}})();(function(){'use strict';angular.module('horizon.app.core.metadata.modal').controller('MetadataModalHelperController',MetadataModalHelperController);MetadataModalHelperController.$inject=['$window','horizon.app.core.metadata.modal.service'];function MetadataModalHelperController($window,metadataModalService){var ctrl=this;ctrl.openMetadataModal=openMetadataModal;function openMetadataModal(resource,id,requireReload,propertiesTarget){metadataModalService.open(resource,id,propertiesTarget).result.then(onOpened);function onOpened(){if(requireReload){$window.location.reload();}}}}})();(function(){'use strict';angular.module('horizon.app.core.metadata.modal').controller('MetadataModalController',MetadataModalController);MetadataModalController.$inject=['$uibModalInstance','horizon.app.core.metadata.service','horizon.framework.widgets.metadata.tree.service','horizon.framework.widgets.toast.service','available','existing','params'];function MetadataModalController($uibModalInstance,metadataService,metadataTreeService,toastService,available,existing,params){var ctrl=this;ctrl.cancel=cancel;ctrl.resourceType=params.resource;ctrl.save=save;ctrl.saving=false;ctrl.tree=new metadataTreeService.Tree(available.data.items,existing.data);function save(){ctrl.saving=true;var updated=ctrl.tree.getExisting();var removed=angular.copy(existing.data);angular.forEach(removed,function bug1606988(value,removedKey){angular.forEach(ctrl.tree.flatTree,function compareToDefinitions(item){if(item.leaf&&removedKey.toLocaleLowerCase()===item.leaf.name.toLocaleLowerCase()){delete removed[removedKey];removed[item.leaf.name]=value;}});});angular.forEach(updated,function(value,key){delete removed[key];});metadataService.editMetadata(params.resource,params.id,updated,Object.keys(removed)).then(onEditSuccess,onEditFailure);}
function cancel(){$uibModalInstance.dismiss('cancel');}
function onEditSuccess(){toastService.add('success',gettext('Metadata was successfully updated.'));$uibModalInstance.close();}
function onEditFailure(){toastService.add('error',gettext('Unable to update metadata.'));ctrl.saving=false;}}})();(function(){'use strict';angular.module('horizon.app.core.metadata.modal').factory('horizon.app.core.metadata.modal.service',modalService);modalService.$inject=['$uibModal','horizon.app.core.basePath','horizon.app.core.metadata.service','horizon.app.core.metadata.modal.constants'];function modalService($uibModal,path,metadataService,modalConstants){var service={open:open};return service;function open(resource,id,propertiesTarget){function resolveAvailable(){return metadataService.getNamespaces(resource,propertiesTarget);}
function resolveExisting(){return metadataService.getMetadata(resource,id);}
function resolveParams(){return{resource:resource,id:id};}
var resolve={available:resolveAvailable,existing:resolveExisting,params:resolveParams};var modalParams={resolve:resolve,templateUrl:path+'metadata/modal/modal.html'};return $uibModal.open(angular.extend(modalParams,modalConstants));}}})();(function(){'use strict';angular.module('horizon.app.core.network_qos').factory('horizon.app.core.network_qos.actions.delete.service',deleteService);deleteService.$inject=['$q','horizon.app.core.openstack-service-api.neutron','horizon.app.core.openstack-service-api.policy','horizon.app.core.network_qos.resourceType','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.modal.deleteModalService'];function deleteService($q,neutron,policy,resourceType,actionResultService,deleteModal){var service={allowed:allowed,perform:perform};return service;function allowed(){return policy.ifAllowed({rules:[['network','delete_qos_policy']]});}
function perform(items,scope){var policies=angular.isArray(items)?items:[items];return openModal().then(onComplete);function openModal(){return deleteModal.open(scope,policies,{labels:labelize(policies.length),deleteEntity:neutron.deletePolicy});}
function onComplete(result){var actionResult=actionResultService.getActionResult();result.pass.forEach(function markDeleted(item){actionResult.deleted(resourceType,item.context.id);});result.fail.forEach(function markFailed(item){actionResult.failed(resourceType,item.context.id);});return actionResult.result;}}
function labelize(count){return{title:ngettext('Confirm Delete Policy','Confirm Delete Policies',count),message:ngettext('You have selected "%s". Deleted policy is not recoverable.','You have selected "%s". Deleted policies are not recoverable.',count),submit:ngettext('Delete Policy','Delete Policies',count),success:ngettext('Deleted policy: %s.','Deleted policies: %s.',count),error:ngettext('Unable to delete policy: %s.','Unable to delete policies: %s.',count)};}}})();(function(){"use strict";angular.module('horizon.app.core.network_qos').controller('NetworkQoSOverviewController',NetworkQoSOverviewController);NetworkQoSOverviewController.$inject=['horizon.app.core.network_qos.resourceType','horizon.framework.conf.resource-type-registry.service','horizon.app.core.openstack-service-api.userSession','$scope'];function NetworkQoSOverviewController(qosResourceTypeCode,registry,userSession,$scope){var ctrl=this;ctrl.resourceType=registry.getResourceType(qosResourceTypeCode);ctrl.tableConfig={selectAll:false,expand:false,trackId:'id',columns:[{id:'id',title:gettext('Rule ID'),priority:1,sortDefault:true},{id:'type',title:gettext('Type'),priority:1},{id:'direction',title:gettext('Direction'),priority:1},{id:'max_kbps',title:gettext('Max Kbps'),priority:1},{id:'max_burst_kbps',title:gettext('Max Burst Kbits'),priority:1},{id:'min_kbps',title:gettext('Min Kbps'),priority:1},{id:'dscp_mark',title:gettext('DSCP Mark'),priority:1}]};$scope.context.loadPromise.then(onGetPolicy);function onGetPolicy(response){ctrl.policy=response.data;userSession.get().then(setProject);function setProject(session){ctrl.projectId=session.project_id;}}}})();(function(){"use strict";angular.module('horizon.app.core.network_qos').factory('horizon.app.core.network_qos.service',qosService);qosService.$inject=['horizon.app.core.openstack-service-api.neutron','horizon.app.core.openstack-service-api.userSession','horizon.app.core.detailRoute'];function qosService(neutron,userSession,detailRoute){var version;return{getDetailsPath:getDetailsPath,getPoliciesPromise:getPoliciesPromise,getPolicyPromise:getPolicyPromise};function getDetailsPath(item){return detailRoute+'OS::Neutron::QoSPolicy/'+item.id;}
function getPoliciesPromise(params){return userSession.get().then(getQoSPolicies);function getQoSPolicies(){return neutron.getQoSPolicies(params).then(modifyResponse);}
function modifyResponse(response){return{data:{items:response.data.items.map(modifyQos)}};function modifyQos(policy){policy.trackBy=policy.id;policy.apiVersion=version;policy.name=policy.name||policy.id;return policy;}}}
function getPolicyPromise(identifier){return neutron.getQosPolicy(identifier);}}})();(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.cinderExtensions',cinderExtensionsAPI);cinderExtensionsAPI.$inject=['$cacheFactory','horizon.app.core.openstack-service-api.extensions','horizon.app.core.openstack-service-api.cinder'];function cinderExtensionsAPI($cacheFactory,extensionsAPI,cinderAPI){return extensionsAPI({cacheFactory:$cacheFactory('horizon.app.core.openstack-service-api.cinderExtensions',{capacity:1}),serviceAPI:cinderAPI});}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.cinder',cinderAPI);cinderAPI.$inject=['horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function cinderAPI(apiService,toastService){var service={getVolumes:getVolumes,getVolume:getVolume,getVolumeTypes:getVolumeTypes,getVolumeMetadata:getVolumeMetadata,getVolumeSnapshotMetadata:getVolumeSnapshotMetadata,getVolumeTypeMetadata:getVolumeTypeMetadata,getVolumeType:getVolumeType,getDefaultVolumeType:getDefaultVolumeType,getVolumeSnapshots:getVolumeSnapshots,getExtensions:getExtensions,getQoSSpecs:getQoSSpecs,getAvailabilityZones:getAvailabilityZones,createVolume:createVolume,getAbsoluteLimits:getAbsoluteLimits,getServices:getServices,getDefaultQuotaSets:getDefaultQuotaSets,setDefaultQuotaSets:setDefaultQuotaSets,updateProjectQuota:updateProjectQuota,editVolumeMetadata:editVolumeMetadata,editVolumeSnapshotMetadata:editVolumeSnapshotMetadata,editVolumeTypeMetadata:editVolumeTypeMetadata};return service;function getVolumes(params){var config=params?{'params':params}:{};return apiService.get('/api/cinder/volumes/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the volumes.'));});}
function getVolume(id){return apiService.get('/api/cinder/volumes/'+id).error(function(){toastService.add('error',gettext('Unable to retrieve the volume.'));});}
function createVolume(newVolume){return apiService.post('/api/cinder/volumes/',newVolume).error(function(){toastService.add('error',gettext('Unable to create the volume.'));});}
function getVolumeTypes(){return apiService.get('/api/cinder/volumetypes/').error(function(){toastService.add('error',gettext('Unable to retrieve the volume types.'));});}
function getVolumeMetadata(id){return apiService.get('/api/cinder/volumes/'+id+'/metadata').error(function(){toastService.add('error',gettext('Unable to retrieve the volume metadata.'));});}
function getVolumeSnapshotMetadata(id){return apiService.get('/api/cinder/volumesnapshots/'+id+'/metadata').error(function(){toastService.add('error',gettext('Unable to retrieve the snapshot metadata.'));});}
function getVolumeTypeMetadata(id){return apiService.get('/api/cinder/volumetypes/'+id+'/metadata').error(function(){toastService.add('error',gettext('Unable to retrieve the volume type metadata.'));});}
function editVolumeMetadata(id,updated,removed){return apiService.patch('/api/cinder/volumes/'+id+'/metadata',{updated:updated,removed:removed}).error(function(){toastService.add('error',gettext('Unable to edit volume metadata.'));});}
function editVolumeSnapshotMetadata(id,updated,removed){return apiService.patch('/api/cinder/volumesnapshots/'+id+'/metadata',{updated:updated,removed:removed}).error(function(){toastService.add('error',gettext('Unable to edit snapshot metadata.'));});}
function editVolumeTypeMetadata(id,updated,removed){return apiService.patch('/api/cinder/volumetypes/'+id+'/metadata',{updated:updated,removed:removed}).error(function(){toastService.add('error',gettext('Unable to edit volume type metadata.'));});}
function getVolumeType(id){return apiService.get('/api/cinder/volumetypes/'+id).error(function(){toastService.add('error',gettext('Unable to retrieve the volume type.'));});}
function getDefaultVolumeType(){return apiService.get('/api/cinder/volumetypes/default').error(function(){toastService.add('error',gettext('Unable to retrieve the default volume type.'));});}
function getVolumeSnapshots(params){var config=params?{'params':params}:{};return apiService.get('/api/cinder/volumesnapshots/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the volume snapshots.'));});}
function getExtensions(config){return apiService.get('/api/cinder/extensions/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the extensions.'));});}
function getServices(){return apiService.get('/api/cinder/services/').error(function(){toastService.add('error',gettext('Unable to retrieve the cinder services.'));});}
function getQoSSpecs(params){var config=params?{'params':params}:{};return apiService.get('/api/cinder/qosspecs/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the QoS Specs.'));});}
function getAbsoluteLimits(){return apiService.get('/api/cinder/tenantabsolutelimits/').error(function(){toastService.add('error',gettext('Unable to retrieve the Absolute Limits.'));});}
function getDefaultQuotaSets(){return apiService.get('/api/cinder/quota-sets/defaults/').error(function(){toastService.add('error',gettext('Unable to retrieve the default quotas.'));});}
function setDefaultQuotaSets(quotas){return apiService.patch('/api/cinder/quota-sets/defaults/',quotas).error(function(){toastService.add('error',gettext('Unable to set the default quotas.'));});}
function updateProjectQuota(quota,projectId){var url='/api/cinder/quota-sets/'+projectId;return apiService.patch(url,quota).error(function(){toastService.add('error',gettext('Unable to update project quota data.'));});}
function getAvailabilityZones(){return apiService.get('/api/cinder/availzones/').error(function(){toastService.add('error',gettext('Unable to retrieve the volume availability zones.'));});}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.extensions',extensions);extensions.$inject=['$q'];function extensions($q){return function(spec){return createService(spec.serviceAPI,spec.cacheFactory);};function createService(serviceAPI,cacheFactory){var service={cache:cacheFactory,get:get,ifNameEnabled:ifNameEnabled};return service;function get(){return serviceAPI.getExtensions({cache:service.cache}).then(onGetExtensions);}
function onGetExtensions(data){return data.data.items;}
function ifNameEnabled(desired){var deferred=$q.defer();service.get().then(onDataLoaded,onDataFailure);function onDataLoaded(extensions){if(enabled(extensions,'name',desired)){deferred.resolve();}else{deferred.reject(interpolate(gettext('Extension is not enabled: %(extension)s.'),{extension:desired},true));}}
function onDataFailure(){deferred.reject(gettext('Cannot get the extension list.'));}
return deferred.promise;}
function enabled(resources,key,desired){if(resources){return resources.some(function matchResource(resource){return resource[key]===desired;});}else{return false;}}}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.glance',glanceAPI);glanceAPI.$inject=['horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function glanceAPI(apiService,toastService){var service={getVersion:getVersion,getImage:getImage,createImage:createImage,updateImage:updateImage,deleteImage:deleteImage,getImageProps:getImageProps,editImageProps:editImageProps,getImages:getImages,getNamespaces:getNamespaces,getResourceTypes:getResourceTypes};return service;function getVersion(){return apiService.get('/api/glance/version/').error(function(){toastService.add('error',gettext('Unable to get the Glance service version.'));});}
function getImage(id){return apiService.get('/api/glance/images/'+id+'/').error(function(){toastService.add('error',gettext('Unable to retrieve the image.'));});}
function createImage(image,onProgress){var localFile;var method=image.source_type==='file-legacy'?'post':'put';if(image.source_type==='file-direct'&&'data'in image){localFile=image.data;image=angular.extend({},image);image.data=localFile.name;}
function onImageQueued(response){var image=response.data;if('upload_url'in image){return apiService.put(image.upload_url,localFile,{headers:{'Content-Type':'application/octet-stream','X-Auth-Token':image.token_id},external:true}).then(function success(){return response;},onError,notify);}else{return response;}}
function notify(event){onProgress(Math.round(event.loaded/event.total*100));}
function onError(error){if(error&&error.data){throw error;}else{throw gettext('Unable to create the image.');}}
return apiService[method]('/api/glance/images/',image).then(onImageQueued,onError,notify);}
function updateImage(image){return apiService.patch('/api/glance/images/'+image.id+'/',image).error(function(){toastService.add('error',gettext('Unable to update the image.'));});}
function deleteImage(imageId,suppressError){var promise=apiService.delete('/api/glance/images/'+imageId+'/');return suppressError?promise:promise.error(function(){var msg=gettext('Unable to delete the image with id: %(id)s');toastService.add('error',interpolate(msg,{id:imageId},true));});}
function getImageProps(id){return apiService.get('/api/glance/images/'+id+'/properties/').error(function(){toastService.add('error',gettext('Unable to retrieve the image custom properties.'));});}
function editImageProps(id,updated,removed){return apiService.patch('/api/glance/images/'+id+'/properties/',{updated:updated,removed:removed}).error(function(){toastService.add('error',gettext('Unable to edit the image custom properties.'));});}
function getImages(params){var config=params?{'params':params}:{};return apiService.get('/api/glance/images/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the images.'));});}
function getNamespaces(params,suppressError){var config=params?{'params':params}:{};config.cache=true;var promise=apiService.get('/api/glance/metadefs/namespaces/',config);return suppressError?promise:promise.error(function(){toastService.add('error',gettext('Unable to retrieve the namespaces.'));});}
function getResourceTypes(){var config={cache:true};return apiService.get('/api/glance/metadefs/resourcetypes/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the resource types.'));});}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.keystone',keystoneAPI);keystoneAPI.$inject=['$q','horizon.app.core.openstack-service-api.settings','horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function keystoneAPI($q,settingAPI,apiService,toastService){var service={getVersion:getVersion,getUsers:getUsers,createUser:createUser,deleteUsers:deleteUsers,getCurrentUserSession:getCurrentUserSession,getUser:getUser,editUser:editUser,deleteUser:deleteUser,getRoles:getRoles,createRole:createRole,deleteRoles:deleteRoles,getRole:getRole,editRole:editRole,deleteRole:deleteRole,getDefaultDomain:getDefaultDomain,getDomains:getDomains,createDomain:createDomain,deleteDomains:deleteDomains,getDomain:getDomain,editDomain:editDomain,deleteDomain:deleteDomain,getProjects:getProjects,createProject:createProject,deleteProjects:deleteProjects,getProject:getProject,getProjectName:getProjectName,editProject:editProject,deleteProject:deleteProject,grantRole:grantRole,serviceCatalog:serviceCatalog,getServices:getServices,getGroups:getGroups,createGroup:createGroup,getGroup:getGroup,editGroup:editGroup,deleteGroup:deleteGroup,deleteGroups:deleteGroups,canEditIdentity:canEditIdentity};return service;function getVersion(){return apiService.get('/api/keystone/version/').error(function(){toastService.add('error',gettext('Unable to get the Keystone service version.'));});}
function getUsers(params){var config=params?{'params':params}:{};return apiService.get('/api/keystone/users/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the users.'));});}
function createUser(newUser){return apiService.post('/api/keystone/users/',newUser).error(function(){toastService.add('error',gettext('Unable to create the user.'));});}
function deleteUsers(userIds){return apiService.delete('/api/keystone/users/',userIds).error(function(){toastService.add('error',gettext('Unable to delete the users.'));});}
function getServices(){return apiService.get('/api/keystone/services/').error(function(){toastService.add('error',gettext('Unable to fetch the services.'));});}
function getGroups(){return apiService.get('/api/keystone/groups/').error(function(){toastService.add('error',gettext('Unable to fetch the groups.'));});}
function createGroup(newGroup){return apiService.post('/api/keystone/groups/',newGroup).error(function(){toastService.add('error',gettext('Unable to create the group.'));});}
function getGroup(groupId){return apiService.get('/api/keystone/groups/'+groupId).error(function(){toastService.add('error',gettext('Unable to retrieve the group.'));});}
function editGroup(updatedGroup){var url='/api/keystone/groups/'+updatedGroup.id;return apiService.patch(url,updatedGroup).error(function(){toastService.add('error',gettext('Unable to edit the group.'));});}
function deleteGroup(groupId){return apiService.delete('/api/keystone/groups/'+groupId).error(function(){toastService.add('error',gettext('Unable to delete the group.'));});}
function deleteGroups(groupIds){return apiService.delete('/api/keystone/groups/',groupIds).error(function(){toastService.add('error',gettext('Unable to delete the groups.'));});}
function getCurrentUserSession(config){return apiService.get('/api/keystone/user-session/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the current user session.'));});}
function getUser(userId){return apiService.get('/api/keystone/users/'+userId).error(function(){toastService.add('error',gettext('Unable to retrieve the user.'));});}
function editUser(updatedUser){var url='/api/keystone/users/'+updatedUser.id;return apiService.patch(url,updatedUser).error(function(){toastService.add('error',gettext('Unable to edit the user.'));});}
function deleteUser(userId){return apiService.delete('/api/keystone/users/'+userId).error(function(){toastService.add('error',gettext('Unable to delete the user.'));});}
function getRoles(){return apiService.get('/api/keystone/roles/').error(function(){toastService.add('error',gettext('Unable to retrieve the roles.'));});}
function createRole(newRole){return apiService.post('/api/keystone/roles/',newRole).error(function(){toastService.add('error',gettext('Unable to create the role.'));});}
function deleteRoles(roleIds){return apiService.delete('/api/keystone/roles/',roleIds).error(function(){toastService.add('error',gettext('Unable to delete the roles.'));});}
function getRole(roleId){return apiService.get('/api/keystone/roles/'+roleId).error(function(){toastService.add('error',gettext('Unable to retrieve the role.'));});}
function editRole(updatedRole){var url='/api/keystone/roles/'+updatedRole.id;return apiService.patch(url,updatedRole).error(function(){toastService.add('error',gettext('Unable to edit the role.'));});}
function deleteRole(roleId){return apiService.delete('/api/keystone/roles/'+roleId).error(function(){toastService.add('error',gettext('Unable to delete the role.'));});}
function getDefaultDomain(){return apiService.get('/api/keystone/default_domain/').error(function(){toastService.add('error',gettext('Unable to retrieve the default domain.'));});}
function getDomains(){return apiService.get('/api/keystone/domains/').error(function(){toastService.add('error',gettext('Unable to retrieve the domains.'));});}
function createDomain(newDomain){return apiService.post('/api/keystone/domains/',newDomain).error(function(){toastService.add('error',gettext('Unable to create the domain.'));});}
function deleteDomains(domainIds){return apiService.delete('/api/keystone/domains/',domainIds).error(function(){toastService.add('error',gettext('Unable to delete the domains.'));});}
function getDomain(domainId){return apiService.get('/api/keystone/domains/'+domainId).error(function(){toastService.add('error',gettext('Unable to retrieve the domain.'));});}
function editDomain(updatedDomain){var url='/api/keystone/domains/'+updatedDomain.id;return apiService.patch(url,updatedDomain).error(function(){toastService.add('error',gettext('Unable to edit the domain.'));});}
function deleteDomain(domainId){return apiService.delete('/api/keystone/domains/'+domainId).error(function(){toastService.add('error',gettext('Unable to delete the domain.'));});}
function getProjects(params){var config=params?{'params':params}:{};return apiService.get('/api/keystone/projects/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the projects.'));});}
function createProject(newProject){return apiService.post('/api/keystone/projects/',newProject).error(function(){toastService.add('error',gettext('Unable to create the project.'));});}
function deleteProjects(projectIds){return apiService.delete('/api/keystone/projects/',projectIds).error(function(){toastService.add('error',gettext('Unable to delete the projects.'));});}
function getProject(projectId){return apiService.get('/api/keystone/projects/'+projectId).error(function(){toastService.add('error',gettext('Unable to retrieve the project.'));});}
function getProjectName(projectId){var deferred=$q.defer();service.getProject(projectId).then(onSuccess,onFailure);function onSuccess(response){deferred.resolve(response.data.name||response.data.id);}
function onFailure(message){deferred.reject(message);}
return deferred.promise;}
function editProject(updatedProject){var url='/api/keystone/projects/'+updatedProject.id;return apiService.patch(url,updatedProject).error(function(){toastService.add('error',gettext('Unable to edit the project.'));});}
function deleteProject(projectId){return apiService.delete('/api/keystone/projects/'+projectId).error(function(){toastService.add('error',gettext('Unable to delete the project.'));});}
function grantRole(projectId,roleId,userId){return apiService.put('/api/keystone/projects/'+projectId+'/'+
roleId+'/'+userId).error(function(){toastService.add('error',gettext('Unable to grant the role.'));});}
function canEditIdentity(type){var deferred=$q.defer();settingAPI.getSetting('OPENSTACK_KEYSTONE_BACKEND',false).then(success);return deferred.promise;function success(response){if(response["can_edit_"+type]){deferred.resolve();}else{deferred.reject();}}}
function serviceCatalog(config){return apiService.get('/api/keystone/svc-catalog/',config).error(function(){toastService.add('error',gettext('Unable to fetch the service catalog.'));});}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.network',networkAPI);networkAPI.$inject=['horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function networkAPI(apiService,toastService){var service={getFloatingIps:getFloatingIps,getFloatingIpPools:getFloatingIpPools,allocateFloatingIp:allocateFloatingIp,associateFloatingIp:associateFloatingIp,disassociateFloatingIp:disassociateFloatingIp};return service;function getFloatingIps(){return apiService.get('/api/network/floatingips/').error(function(){toastService.add('error',gettext('Unable to retrieve floating IPs.'));});}
function getFloatingIpPools(){return apiService.get('/api/network/floatingippools/').error(function(){toastService.add('error',gettext('Unable to retrieve floating IP pools.'));});}
function allocateFloatingIp(poolId){return apiService.post('/api/network/floatingip/',{pool_id:poolId}).error(function(){toastService.add('error',gettext('Unable to allocate new floating IP address.'));});}
function associateFloatingIp(addressId,portId){var params={address_id:addressId,port_id:portId};return apiService.patch('/api/network/floatingip/',params).error(function(){toastService.add('error',gettext('Unable to associate floating IP address.'));});}
function disassociateFloatingIp(addressId){return apiService.patch('/api/network/floatingip/',{address_id:addressId}).error(function(){toastService.add('error',gettext('Unable to disassociate floating IP address.'));});}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.neutronExtensions',neutronExtensionsAPI);neutronExtensionsAPI.$inject=['$cacheFactory','horizon.app.core.openstack-service-api.extensions','horizon.app.core.openstack-service-api.neutron'];function neutronExtensionsAPI($cacheFactory,extensions,neutron){return extensions({cacheFactory:$cacheFactory('horizon.app.core.openstack-service-api.neutronExtensions',{capacity:1}),serviceAPI:neutron});}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.neutron',neutronAPI);neutronAPI.$inject=['horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function neutronAPI(apiService,toastService){var service={createNetwork:createNetwork,createSubnet:createSubnet,createTrunk:createTrunk,deletePolicy:deletePolicy,deleteTrunk:deleteTrunk,getAgents:getAgents,getDefaultQuotaSets:getDefaultQuotaSets,getExtensions:getExtensions,getNetworks:getNetworks,getPorts:getPorts,getQosPolicy:getQosPolicy,getQoSPolicies:getQoSPolicies,getSubnets:getSubnets,getTrunk:getTrunk,getTrunks:getTrunks,updateProjectQuota:updateProjectQuota,updateTrunk:updateTrunk};return service;function convertDatesHumanReadable(apidict){apidict.created_at=new Date(apidict.created_at);apidict.updated_at=new Date(apidict.updated_at);}
function getAgents(){return apiService.get('/api/neutron/agents/').error(function(){toastService.add('error',gettext('Unable to retrieve the agents.'));});}
function getNetworks(){return apiService.get('/api/neutron/networks/').error(function(){toastService.add('error',gettext('Unable to retrieve the networks.'));});}
function createNetwork(newNetwork){return apiService.post('/api/neutron/networks/',newNetwork).error(function(){toastService.add('error',gettext('Unable to create the network.'));});}
function getSubnets(networkId){return apiService.get('/api/neutron/subnets/',networkId).error(function(){toastService.add('error',gettext('Unable to retrieve the subnets.'));});}
function createSubnet(newSubnet){return apiService.post('/api/neutron/subnets/',newSubnet).error(function(){toastService.add('error',gettext('Unable to create the subnet.'));});}
function getPorts(params){var config=params?{'params':params}:{};return apiService.get('/api/neutron/ports/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the ports.'));});}
function getExtensions(){return apiService.get('/api/neutron/extensions/').error(function(){toastService.add('error',gettext('Unable to retrieve the extensions.'));});}
function getDefaultQuotaSets(){return apiService.get('/api/neutron/quota-sets/defaults/').error(function(){toastService.add('error',gettext('Unable to retrieve the default quotas.'));});}
function updateProjectQuota(quota,projectId){var url='/api/neutron/quotas-sets/'+projectId;return apiService.patch(url,quota).error(function(){toastService.add('error',gettext('Unable to update project quota data.'));});}
function getQosPolicy(id,suppressError){var promise=apiService.get('/api/neutron/qos_policies/'+id+'/').success(function(policy){convertDatesHumanReadable(policy);});promise=suppressError?promise:promise.error(function(){var msg=gettext('Unable to retrieve the policy with ID %(id)s');toastService.add('error',interpolate(msg,{id:id},true));});return promise;}
function getQoSPolicies(params){var config=params?{'params':params}:{};return apiService.get('/api/neutron/qos_policies/',config).success(function(policies){policies.items.forEach(function(policy){convertDatesHumanReadable(policy);});}).error(function(){toastService.add('error',gettext('Unable to retrieve the qos policies.'));});}
function deletePolicy(policyId,suppressError){var promise=apiService.delete('/api/neutron/qos_policies/'+policyId+'/');promise=suppressError?promise:promise.error(function(){var msg=gettext('Unable to delete qos policy %(id)s');toastService.add('error',interpolate(msg,{id:policyId},true));});return promise;}
function getTrunk(id,suppressError){var promise=apiService.get('/api/neutron/trunks/'+id+'/').success(function(trunk){convertDatesHumanReadable(trunk);});promise=suppressError?promise:promise.error(function(){var msg=gettext('Unable to retrieve the trunk with id: %(id)s');toastService.add('error',interpolate(msg,{id:id},true));});return promise;}
function getTrunks(params){var config=params?{'params':params}:{};return apiService.get('/api/neutron/trunks/',config).success(function(trunks){trunks.items.forEach(function(trunk){convertDatesHumanReadable(trunk);});}).error(function(){toastService.add('error',gettext('Unable to retrieve the trunks.'));});}
function createTrunk(newTrunk){return apiService.post('/api/neutron/trunks/',newTrunk).error(function(){toastService.add('error',gettext('Unable to create the trunk.'));});}
function deleteTrunk(trunkId,suppressError){var promise=apiService.delete('/api/neutron/trunks/'+trunkId+'/');promise=suppressError?promise:promise.error(function(){var msg=gettext('Unable to delete trunk: %(id)s');toastService.add('error',interpolate(msg,{id:trunkId},true));});return promise;}
function updateTrunk(oldTrunk,newTrunk){return apiService.patch('/api/neutron/trunks/'+oldTrunk.id+'/',[oldTrunk,newTrunk]).error(function(){toastService.add('error',gettext('Unable to update the trunk.'));});}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.novaExtensions',novaExtensionsAPI);novaExtensionsAPI.$inject=['$cacheFactory','horizon.app.core.openstack-service-api.extensions','horizon.app.core.openstack-service-api.nova'];function novaExtensionsAPI($cacheFactory,extensionsAPI,novaAPI){return extensionsAPI({cacheFactory:$cacheFactory('horizon.app.core.openstack-service-api.novaExtensions',{capacity:1}),serviceAPI:novaAPI});}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.nova',novaAPI);novaAPI.$inject=['horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function novaAPI(apiService,toastService){var service={getActionList:getActionList,getConsoleLog:getConsoleLog,getConsoleInfo:getConsoleInfo,getServerVolumes:getServerVolumes,getServerSecurityGroups:getServerSecurityGroups,isFeatureSupported:isFeatureSupported,getKeypairs:getKeypairs,createKeypair:createKeypair,getKeypair:getKeypair,deleteKeypair:deleteKeypair,getAvailabilityZones:getAvailabilityZones,getLimits:getLimits,createServer:createServer,getServer:getServer,getServers:getServers,getServerGroup:getServerGroup,getServerGroups:getServerGroups,createServerGroup:createServerGroup,deleteServerGroup:deleteServerGroup,deleteServer:deleteServer,pauseServer:pauseServer,unpauseServer:unpauseServer,suspendServer:suspendServer,resumeServer:resumeServer,softRebootServer:softRebootServer,hardRebootServer:hardRebootServer,startServer:startServer,stopServer:stopServer,getExtensions:getExtensions,getFlavors:getFlavors,getFlavor:getFlavor,getFlavorExtraSpecs:getFlavorExtraSpecs,editFlavorExtraSpecs:editFlavorExtraSpecs,getAggregateExtraSpecs:getAggregateExtraSpecs,editAggregateExtraSpecs:editAggregateExtraSpecs,getServices:getServices,getInstanceMetadata:getInstanceMetadata,editInstanceMetadata:editInstanceMetadata,createFlavor:createFlavor,updateFlavor:updateFlavor,deleteFlavor:deleteFlavor,getDefaultQuotaSets:getDefaultQuotaSets,setDefaultQuotaSets:setDefaultQuotaSets,getEditableQuotas:getEditableQuotas,updateProjectQuota:updateProjectQuota,createServerSnapshot:createServerSnapshot};return service;function isFeatureSupported(feature){return apiService.get('/api/nova/features/'+feature).error(function(){toastService.add('error',gettext('Unable to check the Nova service feature.'));});}
function getServices(){return apiService.get('/api/nova/services/').error(function(){toastService.add('error',gettext('Unable to retrieve the nova services.'));});}
function getKeypairs(){return apiService.get('/api/nova/keypairs/').error(function(){toastService.add('error',gettext('Unable to retrieve the keypairs.'));});}
function createKeypair(newKeypair){return apiService.post('/api/nova/keypairs/',newKeypair).error(function(){if(angular.isDefined(newKeypair.public_key)){toastService.add('error',gettext('Unable to import the keypair.'));}else{toastService.add('error',gettext('Unable to create the keypair.'));}});}
function getKeypair(name){return apiService.get('/api/nova/keypairs/'+name).error(function(){toastService.add('error',gettext('Unable to retrieve the keypair.'));});}
function deleteKeypair(name,suppressError){var promise=apiService.delete('/api/nova/keypairs/'+name);return suppressError?promise:promise.error(function(){var msg=gettext('Unable to delete the keypair with name: %(name)s');toastService.add('error',interpolate(msg,{name:name},true));});}
function getAvailabilityZones(){return apiService.get('/api/nova/availzones/').error(function(){toastService.add('error',gettext('Unable to retrieve the availability zones.'));});}
function getLimits(reserved){var params={params:{reserved:reserved}};return apiService.get('/api/nova/limits/',params).error(function(){toastService.add('error',gettext('Unable to retrieve the limits.'));});}
function createServer(newServer){return apiService.post('/api/nova/servers/',newServer).error(function(){toastService.add('error',gettext('Unable to create the server.'));});}
function getServer(id){return apiService.get('/api/nova/servers/'+id).error(function(){toastService.add('error',gettext('Unable to retrieve the server.'));});}
function getServers(){return apiService.get('/api/nova/servers/').error(function(){toastService.add('error',gettext('Unable to retrieve instances.'));});}
function getServerGroup(id){return apiService.get('/api/nova/servergroups/'+id).error(function(){toastService.add('error',gettext('Unable to retrieve the server group.'));});}
function getServerGroups(){return apiService.get('/api/nova/servergroups/').error(function(){toastService.add('error',gettext('Unable to retrieve server groups.'));});}
function createServerGroup(newServerGroup){return apiService.post('/api/nova/servergroups/',newServerGroup).error(function(){toastService.add('error',gettext('Unable to create the server group.'));});}
function deleteServerGroup(serverGroupId,suppressError){var promise=apiService.delete('/api/nova/servergroups/'+serverGroupId+'/');return suppressError?promise:promise.error(function(){var msg=gettext('Unable to delete the server group with id %(id)s');toastService.add('error',interpolate(msg,{id:serverGroupId},true));});}
function deleteServer(serverId,suppressError){var promise=apiService.delete('/api/nova/servers/'+serverId);return suppressError?promise:promise.error(function(){var msg=gettext('Unable to delete the server with id: %(id)s');toastService.add('error',interpolate(msg,{id:serverId},true));});}
function serverStateOperation(operation,serverId,suppressError,errMsg){var instruction={"operation":operation};var promise=apiService.post('/api/nova/servers/'+serverId,instruction);return suppressError?promise:promise.error(function(){toastService.add('error',interpolate(errMsg,{id:serverId},true));});}
function startServer(serverId,suppressError){return serverStateOperation('start',serverId,suppressError,gettext('Unable to start the server with id: %(id)s'));}
function pauseServer(serverId,suppressError){return serverStateOperation('pause',serverId,suppressError,gettext('Unable to pause the server with id: %(id)s'));}
function unpauseServer(serverId,suppressError){return serverStateOperation('unpause',serverId,suppressError,gettext('Unable to unpause the server with id: %(id)s'));}
function suspendServer(serverId,suppressError){return serverStateOperation('suspend',serverId,suppressError,gettext('Unable to suspend the server with id: %(id)s'));}
function resumeServer(serverId,suppressError){return serverStateOperation('resume',serverId,suppressError,gettext('Unable to resume the server with id: %(id)s'));}
function softRebootServer(serverId,suppressError){return serverStateOperation('soft_reboot',serverId,suppressError,gettext('Unable to soft-reboot the server with id: %(id)s'));}
function hardRebootServer(serverId,suppressError){return serverStateOperation('hard_reboot',serverId,suppressError,gettext('Unable to hard-reboot the server with id: %(id)s'));}
function stopServer(serverId,suppressError){return serverStateOperation('stop',serverId,suppressError,gettext('Unable to stop the server with id: %(id)s'));}
function getExtensions(config){return apiService.get('/api/nova/extensions/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the extensions.'));});}
function getFlavors(params){var config=params?{'params':params}:{'params':{}};return apiService.get('/api/nova/flavors/',config).success(function(data){if(data&&data.items){data.items.map(function(item){if(item.hasOwnProperty('OS-FLV-EXT-DATA:ephemeral')){item.ephemeral=item['OS-FLV-EXT-DATA:ephemeral'];}
if(item.hasOwnProperty('OS-FLV-DISABLED:disabled')){item.disabled=item['OS-FLV-DISABLED:disabled'];}
if(item.hasOwnProperty('os-flavor-access:is_public')){item.is_public=item['os-flavor-access:is_public'];}});}}).error(function(){toastService.add('error',gettext('Unable to retrieve the flavors.'));});}
function getFlavor(id,getExtras,getAccessList){var config={'params':{}};if(getExtras){config.params.get_extras='true';}
if(getAccessList){config.params.get_access_list='true';}
return apiService.get('/api/nova/flavors/'+id+'/',config).error(function(){toastService.add('error',gettext('Unable to retrieve the flavor.'));});}
function createFlavor(flavor){return apiService.post('/api/nova/flavors/',flavor).error(function(){toastService.add('error',gettext('Unable to create the flavor.'));});}
function updateFlavor(flavor){return apiService.patch('/api/nova/flavors/'+flavor.id+'/',flavor).error(function(){toastService.add('error',gettext('Unable to update the flavor.'));});}
function deleteFlavor(flavorId,suppressError){var promise=apiService.delete('/api/nova/flavors/'+flavorId+'/');return suppressError?promise:promise.error(function(){var msg=gettext('Unable to delete the flavor with id: %(id)s');toastService.add('error',interpolate(msg,{id:flavorId},true));});}
function getFlavorExtraSpecs(id){return apiService.get('/api/nova/flavors/'+id+'/extra-specs/').error(function(){toastService.add('error',gettext('Unable to retrieve the flavor extra specs.'));});}
function editFlavorExtraSpecs(id,updated,removed){return apiService.patch('/api/nova/flavors/'+id+'/extra-specs/',{updated:updated,removed:removed}).error(function(){toastService.add('error',gettext('Unable to edit the flavor extra specs.'));});}
function getAggregateExtraSpecs(id){return apiService.get('/api/nova/aggregates/'+id+'/extra-specs/').error(function(){toastService.add('error',gettext('Unable to retrieve the aggregate extra specs.'));});}
function editAggregateExtraSpecs(id,updated,removed){return apiService.patch('/api/nova/aggregates/'+id+'/extra-specs/',{updated:updated,removed:removed}).error(function(){toastService.add('error',gettext('Unable to edit the aggregate extra specs.'));});}
function getInstanceMetadata(id){return apiService.get('/api/nova/servers/'+id+'/metadata').error(function(){toastService.add('error',gettext('Unable to retrieve instance metadata.'));});}
function editInstanceMetadata(id,updated,removed){return apiService.patch('/api/nova/servers/'+id+'/metadata',{updated:updated,removed:removed}).error(function(){toastService.add('error',gettext('Unable to edit instance metadata.'));});}
function getDefaultQuotaSets(){return apiService.get('/api/nova/quota-sets/defaults/').error(function(){toastService.add('error',gettext('Unable to retrieve the default quotas.'));});}
function setDefaultQuotaSets(quotas){return apiService.patch('/api/nova/quota-sets/defaults/',quotas).error(function(){toastService.add('error',gettext('Unable to set the default quotas.'));});}
function getEditableQuotas(){return apiService.get('/api/nova/quota-sets/editable/').error(function(){toastService.add('error',gettext('Unable to retrieve the editable quotas.'));});}
function updateProjectQuota(quota,projectId){var url='/api/nova/quota-sets/'+projectId;return apiService.patch(url,quota).error(function(){toastService.add('error',gettext('Unable to update project quota data.'));});}
function createServerSnapshot(newSnapshot){return apiService.post('/api/nova/snapshots/',newSnapshot).error(function(){toastService.add('error',gettext('Unable to create the server snapshot.'));});}
function getActionList(instanceId){return apiService.get('/api/nova/servers/'+instanceId+'/actions/').error(function(){toastService.add('error',gettext('Unable to load the server actions.'));});}
function getConsoleLog(instanceId,length){var config={};if(length){config.length=length;}
return apiService.post('/api/nova/servers/'+instanceId+'/console-output/',config).error(function(){toastService.add('error',gettext('Unable to load the server console log.'));});}
function getConsoleInfo(instanceId,type){var config={};if(type){config.console_type=type;}
return apiService.post('/api/nova/servers/'+instanceId+'/console-info/',config).error(function(){toastService.add('error',gettext('Unable to load the server console info.'));});}
function getServerVolumes(instanceId){return apiService.get('/api/nova/servers/'+instanceId+'/volumes/').error(function(){toastService.add('error',gettext('Unable to load the server volumes.'));});}
function getServerSecurityGroups(instanceId){return apiService.get('/api/nova/servers/'+instanceId+'/security-groups/').error(function(){toastService.add('error',gettext('Unable to load the server security groups.'));});}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.policy',PolicyService);PolicyService.$inject=['$q','horizon.framework.util.filters.$memoize','horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function PolicyService($q,memoize,apiService,toastService){var service={check:memoize(check,memoizeHasher),ifAllowed:memoize(ifAllowed,memoizeHasher)};return service;function check(policyRules){var deferred=$q.defer();apiService.post('/api/policy/',policyRules).success(function successPath(result){deferred.resolve(result);}).error(function failurePath(result){toastService.add('warning',gettext('Policy check failed.'));deferred.reject(result);});deferred.promise.success=deferred.promise.then;return deferred.promise;}
function ifAllowed(policyRules){var deferred=$q.defer();service.check(policyRules).then(success);return deferred.promise;function success(response){if(response.allowed){deferred.resolve();}else{deferred.reject();}}}
function memoizeHasher(policyRules){return angular.toJson(policyRules);}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.security-group',securityGroupAPI);securityGroupAPI.$inject=['horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function securityGroupAPI(apiService,toastService){var service={query:query};return service;function query(){return apiService.get('/api/network/securitygroups/').error(function(){toastService.add('error',gettext('Unable to retrieve the security groups.'));});}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.serviceCatalog',serviceCatalog);serviceCatalog.$inject=['$cacheFactory','$q','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.userSession'];function serviceCatalog($cacheFactory,$q,keystoneAPI,userSession){var service={cache:$cacheFactory('horizon.app.core.openstack-service-api.serviceCatalog',{capacity:1}),get:get,ifTypeEnabled:ifTypeEnabled};return service;function get(){return keystoneAPI.serviceCatalog({cache:service.cache}).then(onGetCatalog);}
function onGetCatalog(response){return response.data;}
function ifTypeEnabled(desiredType){var deferred=$q.defer();$q.all({session:userSession.get(),catalog:service.get()}).then(onDataLoaded,onDataFailure);function onDataLoaded(d){if(typeHasEndpointsInRegion(d.catalog,desiredType,d.session.services_region)){deferred.resolve();}else{deferred.reject(interpolate(gettext('Service type is not enabled: %(desiredType)s'),{desiredType:desiredType},true));}}
function onDataFailure(){deferred.reject(gettext('Cannot get service catalog from keystone.'));}
return deferred.promise;}
function typeHasEndpointsInRegion(catalog,desiredType,desiredRegion){var matchingSvcs=catalog.filter(function filterByType(svc){return svc.type===desiredType;});if(desiredType==='identity'&&matchingSvcs.length>0){return true;}else{return matchingSvcs.some(function matchService(svc){return svc.endpoints.some(function matchEndpoint(endpoint){return getEndpointRegion(endpoint)===desiredRegion;});});}}
function getEndpointRegion(endpoint){return endpoint.region_id||endpoint.region;}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.settings',settingsService);settingsService.$inject=['$q','horizon.framework.util.http.service'];function settingsService($q,apiService){var service={getSettings:getSettings,getSetting:getSetting,ifEnabled:ifEnabled};return service;function getSettings(suppressError){function onError(){var message=gettext('Unable to retrieve settings.');if(!suppressError&&horizon.toast){horizon.toast.add('error',message);}
return message;}
return apiService.get('/api/settings/',{cache:true}).error(onError).then(function(response){return response.data;});}
function getSetting(path,defaultSetting){var deferred=$q.defer();var pathElements=path.split(".");var settingAtRequestedPath;function onSettingsLoaded(settings){settingAtRequestedPath=pathElements.reduce(function(setting,nextPathElement){return setting?setting[nextPathElement]:undefined;},settings);if(angular.isUndefined(settingAtRequestedPath)&&angular.isDefined(defaultSetting)){settingAtRequestedPath=defaultSetting;}
deferred.resolve(settingAtRequestedPath);}
function onSettingsFailure(message){deferred.reject(message);}
service.getSettings().then(onSettingsLoaded,onSettingsFailure);return deferred.promise;}
function ifEnabled(setting,expected,defaultSetting){var deferred=$q.defer();expected=angular.isUndefined(expected)?true:expected;function onSettingLoaded(setting){if(angular.equals(expected,setting)){deferred.resolve();}else{deferred.reject(interpolate(gettext('Setting is not enabled: %(setting)s'),{setting:setting},true));}
deferred.resolve(setting);}
function onSettingFailure(message){deferred.reject(message);}
service.getSetting(setting,defaultSetting).then(onSettingLoaded,onSettingFailure);return deferred.promise;}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.swift',swiftAPI);swiftAPI.$inject=['horizon.framework.util.http.service','horizon.framework.widgets.toast.service'];function swiftAPI(apiService,toastService){var service={copyObject:copyObject,createContainer:createContainer,createFolder:createFolder,deleteContainer:deleteContainer,deleteObject:deleteObject,getContainer:getContainer,getContainers:getContainers,getInfo:getInfo,getContainerURL:getContainerURL,getObjectDetails:getObjectDetails,getObjects:getObjects,getObjectURL:getObjectURL,setContainerAccess:setContainerAccess,uploadObject:uploadObject};return service;function getContainerURL(container){return'/api/swift/containers/'+encodeURIComponent(container);}
function getObjectURL(container,object,type){var urlType=type||'object';var objectUrl=encodeURIComponent(object).replace(/%2F/g,'/');return getContainerURL(container)+'/'+urlType+'/'+objectUrl;}
function getInfo(){return apiService.get('/api/swift/info/').error(function(){toastService.add('error',gettext('Unable to get the Swift service info.'));});}
function getContainers(params){var config=params?{'params':params}:{};return apiService.get('/api/swift/containers/',config).error(function(){toastService.add('error',gettext('Unable to get the Swift container listing.'));});}
function getContainer(container,ignoreError){var promise=apiService.get(service.getContainerURL(container)+'/metadata/');if(ignoreError){return promise.error(angular.noop);}
return promise.error(function(){toastService.add('error',gettext('Unable to get the container details.'));});}
function createContainer(container,isPublic){var data={is_public:false};if(isPublic){data.is_public=true;}
return apiService.post(service.getContainerURL(container)+'/metadata/',data).error(function(response){if(response.status===409){toastService.add('error',response);}else{toastService.add('error',gettext('Unable to create the container.'));}});}
function deleteContainer(container){return apiService.delete(service.getContainerURL(container)+'/metadata/').error(function(response,status){if(status===409){toastService.add('error',response);}else{toastService.add('error',gettext('Unable to delete the container.'));}});}
function setContainerAccess(container,isPublic){var data={is_public:isPublic};return apiService.put(service.getContainerURL(container)+'/metadata/',data).error(function(){toastService.add('error',gettext('Unable to change the container access.'));});}
function getObjects(container,params){var options={};if(params){options.params=params;}
return apiService.get(service.getContainerURL(container)+'/objects/',options).error(function(){toastService.add('error',gettext('Unable to get the objects in container.'));});}
function uploadObject(container,objectName,file){return apiService.post(service.getObjectURL(container,objectName),{file:file}).error(function(){toastService.add('error',gettext('Unable to upload the object.'));});}
function deleteObject(container,objectName){return apiService.delete(service.getObjectURL(container,objectName)).error(function(response){if(response.status===409){toastService.add('error',gettext('Unable to delete the folder because it is not empty.'));}else{toastService.add('error',gettext('Unable to delete the object.'));}});}
function getObjectDetails(container,objectName,ignoreError){var promise=apiService.get(service.getObjectURL(container,objectName,'metadata'));if(ignoreError){return promise.error(angular.noop);}
return promise.error(function(){toastService.add('error',gettext('Unable to get details of the object.'));});}
function createFolder(container,folderName){return apiService.post(service.getObjectURL(container,folderName)+'/',{}).error(function(response,status){if(status===409){toastService.add('error',response);}else{toastService.add('error',gettext('Unable to create the folder.'));}});}
function copyObject(container,objectName,destContainer,destName){return apiService.post(service.getObjectURL(container,objectName,'copy'),{dest_container:destContainer,dest_name:destName}).error(function(response,status){if(status===409){toastService.add('error',response);}else{toastService.add('error',gettext('Unable to copy the object.'));}});}}}());(function(){'use strict';angular.module('horizon.app.core.openstack-service-api').factory('horizon.app.core.openstack-service-api.userSession',userSession);userSession.$inject=['$cacheFactory','$q','horizon.app.core.openstack-service-api.keystone'];function userSession($cacheFactory,$q,keystoneAPI){var service={cache:$cacheFactory('horizon.app.core.openstack-service-api.userSession',{capacity:1}),get:get,isCurrentProject:isCurrentProject};return service;function get(){return keystoneAPI.getCurrentUserSession({cache:service.cache}).then(onGetUserSession);}
function onGetUserSession(response){return response.data;}
function isCurrentProject(projectId){var deferred=$q.defer();get().then(onUserSessionGet);return deferred.promise;function onUserSessionGet(userSession){if(userSession.project_id===projectId){deferred.resolve();}else{deferred.reject();}}}}}());(function(){'use strict';angular.module('horizon.app.core.server_groups').factory('horizon.app.core.server_groups.actions.create.service',createService);createService.$inject=['horizon.app.core.openstack-service-api.nova','horizon.app.core.openstack-service-api.policy','horizon.app.core.server_groups.actions.workflow.service','horizon.app.core.server_groups.resourceType','horizon.framework.widgets.form.ModalFormService','horizon.framework.widgets.toast.service','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.gettext'];function createService(novaAPI,policy,workflow,resourceType,modalFormService,toast,actionResultService,gettext){var service={allowed:allowed,perform:perform,submit:submit};return service;function allowed(){return policy.ifAllowed({rules:[['compute','os_compute_api:os-server-groups:create']]});}
function perform(){var config=workflow.init();config.title=gettext("Create Server Group");return modalFormService.open(config).then(submit);}
function submit(context){var data={name:context.model.name};data.policies=[context.model.policy];return novaAPI.createServerGroup(data).then(onSuccess);}
function onSuccess(response){var servergroup=response.data;toast.add('success',interpolate(gettext('Server Group %s was successfully created.'),[servergroup.name]));return actionResultService.getActionResult().created(resourceType,servergroup.id).result;}}})();(function(){'use strict';angular.module('horizon.app.core.server_groups').factory('horizon.app.core.server_groups.actions.delete.service',deleteServerGroupService);deleteServerGroupService.$inject=['$location','horizon.app.core.openstack-service-api.nova','horizon.app.core.openstack-service-api.policy','horizon.app.core.server_groups.resourceType','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.ngettext','horizon.framework.widgets.modal.deleteModalService'];function deleteServerGroupService($location,nova,policy,serverGroupResourceType,actionResultService,ngettext,deleteModal){return{allowed:allowed,perform:perform};function allowed(){return policy.ifAllowed({rules:[['compute','os_compute_api:os-server-groups:delete']]});}
function perform(items,scope){var servergroups=angular.isArray(items)?items:[items];var context={labels:labelize(servergroups.length),deleteEntity:deleteServerGroup};return deleteModal.open(scope,servergroups,context).then(deleteResult);}
function deleteResult(deleteModalResult){var actionResult=actionResultService.getActionResult();deleteModalResult.pass.forEach(function markDeleted(item){actionResult.deleted(serverGroupResourceType,item.context.id);});deleteModalResult.fail.forEach(function markFailed(item){actionResult.failed(serverGroupResourceType,item.context.id);});var path='/project/server_groups';if($location.url()!==path&&actionResult.result.failed.length===0&&actionResult.result.deleted.length>0){$location.path(path);}else{return actionResult.result;}}
function labelize(count){return{title:ngettext('Confirm Delete Server Group','Confirm Delete Server Groups',count),message:ngettext('You have selected "%s". Deleted Server Group is not recoverable.','You have selected "%s". Deleted Server Groups are not recoverable.',count),submit:ngettext('Delete Server Group','Delete Server Groups',count),success:ngettext('Deleted Server Group: %s.','Deleted Server Groups: %s.',count),error:ngettext('Unable to delete Server Group: %s.','Unable to delete Server Groups: %s.',count)};}
function deleteServerGroup(servergroup){return nova.deleteServerGroup(servergroup,true);}}})();(function(){'use strict';angular.module('horizon.app.core.server_groups.actions').factory('horizon.app.core.server_groups.actions.workflow.service',ServerGroupWorkflow);ServerGroupWorkflow.$inject=['horizon.app.core.server_groups.service'];function ServerGroupWorkflow(serverGroupsService){var workflow={init:init};function init(){var schema={type:'object',properties:{name:{title:gettext('Name'),type:'string'},policy:{title:gettext('Policy'),type:'string'}},required:['name','policy']};var form=["name",{key:"policy",type:"select",titleMap:[]}];var model={};var config={schema:schema,form:form,model:model};serverGroupsService.getServerGroupPolicies().then(modifyPolicies);function modifyPolicies(policies){var policyField=config.form[1];angular.forEach(policies,function(k,v){this.push({name:k,value:v});},policyField.titleMap);}
return config;}
return workflow;}})();(function(){"use strict";angular.module('horizon.app.core.server_groups').controller('ServerGroupOverviewController',ServerGroupOverviewController);ServerGroupOverviewController.$inject=['$scope','horizon.app.core.openstack-service-api.nova','horizon.app.core.openstack-service-api.userSession','horizon.app.core.server_groups.resourceType','horizon.app.core.server_groups.service','horizon.framework.conf.resource-type-registry.service'];function ServerGroupOverviewController($scope,nova,userSession,serverGroupResourceTypeCode,serverGroupsService,registry){var ctrl=this;nova.isFeatureSupported('servergroup_user_info').then(onGetServerGroupProperties);function onGetServerGroupProperties(response){var properties=['id','name','policy'];if(response.data){properties.splice(2,0,'project_id','user_id');}
ctrl.properties=properties;}
ctrl.resourceType=registry.getResourceType(serverGroupResourceTypeCode);ctrl.tableConfig={selectAll:false,expand:false,trackId:'id',columns:[{id:'name',title:gettext('Instance Name'),priority:1,sortDefault:true,urlFunction:serverGroupsService.getInstanceDetailsPath},{id:'id',title:gettext('Instance ID'),priority:1}]};$scope.context.loadPromise.then(onGetServerGroup);function onGetServerGroup(servergroup){ctrl.servergroup=servergroup.data;if(ctrl.servergroup.members.length){nova.getServers().then(function getServer(servers){var members=[];ctrl.servergroup.members.forEach(function(member){for(var i=0;i<servers.data.items.length;i++){var server=servers.data.items[i];if(member===server.id){members.push(server);break;}}});ctrl.members=members;});}else{ctrl.members=[];}
userSession.get().then(setProject);function setProject(session){ctrl.projectId=session.project_id;}}}})();(function(){"use strict";angular.module('horizon.app.core.server_groups').factory('horizon.app.core.server_groups.service',serverGroupsService);serverGroupsService.$inject=['$window','horizon.app.core.detailRoute','horizon.app.core.openstack-service-api.nova'];function serverGroupsService($window,detailRoute,nova){return{getDetailsPath:getDetailsPath,getInstanceDetailsPath:getInstanceDetailsPath,getServerGroupPolicies:getServerGroupPolicies,getServerGroupPromise:getServerGroupPromise,getServerGroupsPromise:getServerGroupsPromise};function getDetailsPath(item){return detailRoute+'OS::Nova::ServerGroup/'+item.id;}
function getInstanceDetailsPath(item){return $window.WEBROOT+'project/instances/'+item.id+'/';}
function getServerGroupPolicies(){return nova.isFeatureSupported('servergroup_soft_policies').then(isSoftPoliciesSupported);function isSoftPoliciesSupported(response){var policies={'affinity':gettext('Affinity'),'anti-affinity':gettext('Anti Affinity')};if(response.data){policies['soft-anti-affinity']=gettext('Soft Anti Affinity');policies['soft-affinity']=gettext('Soft Affinity');}
return policies;}}
function getServerGroupPromise(identifier){return nova.getServerGroup(identifier).then(modifyResponse);function modifyResponse(response){return getServerGroupPolicies().then(modifyItem);function modifyItem(policies){response.data.policy=policies[response.data.policies[0]];return{data:response.data};}}}
function getServerGroupsPromise(){return nova.getServerGroups().then(modifyResponse);function modifyResponse(response){return getServerGroupPolicies().then(modifyItems);function modifyItems(policies){response.data.items.map(function(item){item.policy=policies[item.policies[0]];});return{data:{items:response.data.items}};}}}}})();(function(){'use strict';angular.module('horizon.app.core.trunks').factory('horizon.app.core.trunks.actions.create.service',createService);createService.$inject=['$q','horizon.app.core.openstack-service-api.neutron','horizon.app.core.openstack-service-api.policy','horizon.app.core.openstack-service-api.userSession','horizon.app.core.trunks.actions.createWorkflow','horizon.app.core.trunks.actions.ports-extra.service','horizon.app.core.trunks.resourceType','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.modal.wizard-modal.service','horizon.framework.widgets.toast.service','$location'];function createService($q,neutron,policy,userSession,createWorkflow,portsExtra,resourceType,actionResultService,wizardModalService,toast,$location){var service={perform:perform,allowed:allowed};return service;function allowed(){var fromNonAdminUrl=($location.url().indexOf('admin')===-1);var deferred=$q.defer();policy.ifAllowed({rules:[['network','create_trunk']]}).then(function(result){if(fromNonAdminUrl){deferred.resolve(result);}else{deferred.reject();}});return deferred.promise;}
function perform(){var trunk={admin_state_up:true,description:'',name:'',port_id:undefined,sub_ports:[]};return wizardModalService.modal({workflow:createWorkflow,submit:submit,data:{initTrunk:trunk,getTrunk:$q.when(trunk),getPortsWithNets:$q.all({getNetworks:neutron.getNetworks(),getPorts:userSession.get().then(function(session){return neutron.getPorts({project_id:session.project_id});})}).then(function(responses){var networks=responses.getNetworks.data.items;var ports=responses.getPorts.data.items;return portsExtra.addNetworkAndSubnetInfo(ports,networks).sort(portsExtra.cmpPortsByNameAndId);})}}).result;}
function submit(stepModels){var trunk={};var stepName,getTrunkSlice;for(stepName in stepModels.trunkSlices){if(stepModels.trunkSlices.hasOwnProperty(stepName)){getTrunkSlice=stepModels.trunkSlices[stepName];angular.extend(trunk,getTrunkSlice());}}
return neutron.createTrunk(trunk).then(onSuccess);function onSuccess(response){var trunk=response.data;toast.add('success',interpolate(gettext('Trunk %s was successfully created.'),[trunk.name]));return actionResultService.getActionResult().created(resourceType,trunk.id).result;}}}})();(function(){'use strict';angular.module('horizon.app.core.trunks').factory('horizon.app.core.trunks.actions.createWorkflow',createWorkflow);createWorkflow.$inject=['horizon.app.core.trunks.basePath','horizon.app.core.workflow.factory','horizon.framework.util.i18n.gettext'];function createWorkflow(basePath,workflowService,gettext){var workflow=workflowService({title:gettext('Create Trunk'),btnText:{finish:gettext('Create Trunk')},steps:[{title:gettext('Details'),templateUrl:basePath+'steps/trunk-details.html',helpUrl:basePath+'steps/trunk-details.help.html',formName:'detailsForm'},{title:gettext('Parent Port'),templateUrl:basePath+'steps/trunk-parent-port.html',helpUrl:basePath+'steps/trunk-parent-port.help.html',formName:'parentPortForm'},{title:gettext('Subports'),templateUrl:basePath+'steps/trunk-subports.html',helpUrl:basePath+'steps/trunk-subports.help.html',formName:'subportsForm'}]});return workflow;}})();(function(){'use strict';angular.module('horizon.app.core.trunks').factory('horizon.app.core.trunks.actions.delete.service',deleteService);deleteService.$inject=['$q','$location','horizon.app.core.openstack-service-api.neutron','horizon.app.core.openstack-service-api.policy','horizon.app.core.trunks.resourceType','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.modal.deleteModalService'];function deleteService($q,$location,neutron,policy,resourceType,actionResultService,deleteModal){var service={allowed:allowed,perform:perform};return service;function allowed(){return policy.ifAllowed({rules:[['network','delete_trunk']]});}
function perform(items,scope){var trunks=angular.isArray(items)?items:[items];return openModal().then(onComplete);function openModal(){return deleteModal.open(scope,trunks,{labels:labelize(trunks.length),deleteEntity:neutron.deleteTrunk});}
function onComplete(result){var actionResult=actionResultService.getActionResult();result.pass.forEach(function markDeleted(item){actionResult.deleted(resourceType,item.context.id);});result.fail.forEach(function markFailed(item){actionResult.failed(resourceType,item.context.id);});var path="admin/trunks";if($location.url().indexOf("admin")===-1){path="project/trunks";}
if($location.url()!==path&&actionResult.result.failed.length===0&&actionResult.result.deleted.length>0){$location.path(path);}else{return actionResult.result;}}}
function labelize(count){return{title:ngettext('Confirm Delete Trunk','Confirm Delete Trunks',count),message:ngettext('You have selected "%s". Deleted Trunk is not recoverable.','You have selected "%s". Deleted Trunks are not recoverable.',count),submit:ngettext('Delete Trunk','Delete Trunks',count),success:ngettext('Deleted Trunk: %s.','Deleted Trunks: %s.',count),error:ngettext('Unable to delete Trunk: %s.','Unable to delete Trunks: %s.',count)};}}})();(function(){'use strict';angular.module('horizon.app.core.trunks').factory('horizon.app.core.trunks.actions.edit.service',editService);editService.$inject=['$q','$location','horizon.app.core.openstack-service-api.neutron','horizon.app.core.openstack-service-api.policy','horizon.app.core.openstack-service-api.userSession','horizon.app.core.trunks.actions.editWorkflow','horizon.app.core.trunks.actions.ports-extra.service','horizon.app.core.trunks.resourceType','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.modal.wizard-modal.service','horizon.framework.widgets.toast.service','$rootScope'];function editService($q,$location,neutron,policy,userSession,editWorkflow,portsExtra,resourceType,actionResultService,wizardModalService,toast,$rootScope){var urlFromLocationChangeNonAdmin=true;$rootScope.$on('$locationChangeSuccess',function(event,newUrl,oldUrl){urlFromLocationChangeNonAdmin=(oldUrl.indexOf('admin')===-1);});var service={perform:perform,allowed:allowed};return service;function allowed(){var fromNonAdminUrl=($location.url().indexOf('admin')===-1);var deferred=$q.defer();policy.ifAllowed({rules:[['network','add_subports'],['network','remove_subports']]}).then(function(result){if(fromNonAdminUrl&&urlFromLocationChangeNonAdmin){deferred.resolve(result);}else{deferred.reject();}});return deferred.promise;}
function perform(selected){var params={};if(($location.url().indexOf('admin')===-1)&&urlFromLocationChangeNonAdmin){params={project_id:userSession.project_id};}
return wizardModalService.modal({workflow:editWorkflow,submit:submit,data:{initTrunk:selected,getTrunk:neutron.getTrunk(selected.id).then(function(response){return response.data;}),getPortsWithNets:$q.all({getNetworks:neutron.getNetworks(params),getPorts:neutron.getPorts(params)}).then(function(responses){var networks=responses.getNetworks.data.items;var ports=responses.getPorts.data.items;return portsExtra.addNetworkAndSubnetInfo(ports,networks).sort(portsExtra.cmpPortsByNameAndId);})}}).result;}
function submit(stepModels){var oldTrunk=stepModels.initTrunk;var trunk=angular.copy(oldTrunk);var stepName,getTrunkSlice;for(stepName in stepModels.trunkSlices){if(stepModels.trunkSlices.hasOwnProperty(stepName)){getTrunkSlice=stepModels.trunkSlices[stepName];angular.extend(trunk,getTrunkSlice());}}
return neutron.updateTrunk(oldTrunk,trunk).then(onSuccess);function onSuccess(response){var trunk=response.data;toast.add('success',interpolate(gettext('Trunk %s was successfully edited.'),[trunk.name]));return actionResultService.getActionResult().updated(resourceType,trunk.id).result;}}}})();(function(){'use strict';angular.module('horizon.app.core.trunks').factory('horizon.app.core.trunks.actions.editWorkflow',editWorkflow);editWorkflow.$inject=['horizon.app.core.trunks.basePath','horizon.app.core.workflow.factory','horizon.framework.util.i18n.gettext'];function editWorkflow(basePath,workflowService,gettext){var workflow=workflowService({title:gettext('Edit Trunk'),btnText:{finish:gettext('Edit Trunk')},steps:[{title:gettext('Details'),templateUrl:basePath+'steps/trunk-details.html',helpUrl:basePath+'steps/trunk-details.help.html',formName:'detailsForm'},{title:gettext('Subports'),templateUrl:basePath+'steps/trunk-subports.html',helpUrl:basePath+'steps/trunk-subports.help.html',formName:'subportsForm'}]});return workflow;}})();(function(){'use strict';angular.module('horizon.app.core.trunks').factory('horizon.app.core.trunks.actions.ports-extra.service',portsExtra);function portsExtra(){var service={addNetworkAndSubnetInfo:addNetworkAndSubnetInfo,cmpPortsByNameAndId:cmpPortsByNameAndId,cmpSubportsBySegmentationTypeAndId:cmpSubportsBySegmentationTypeAndId,isParentPortCandidate:isParentPortCandidate,isSubportCandidate:isSubportCandidate,isSubportOfTrunk:isSubportOfTrunk};return service;function isParentPortCandidate(port){return(port.admin_state_up&&(port.device_owner===''||port.device_owner.indexOf('compute:')===0)&&!port.trunk_details&&!port.trunk_id);}
function isSubportCandidate(port){return(port.admin_state_up&&port.device_owner===''&&!port.trunk_details&&!port.trunk_id);}
function isSubportOfTrunk(trunkId,port){return(port.trunk_id&&port.trunk_id===trunkId);}
function cmpPortsByNameAndId(a,b){return((a.name==='')-(b.name==='')||a.name.localeCompare(b.name)||a.id.localeCompare(b.id));}
function cmpSubportsBySegmentationTypeAndId(a,b){return(a.segmentation_type.localeCompare(b.segmentation_type)||(a.segmentation_id-b.segmentation_id));}
function addNetworkAndSubnetInfo(inPorts,networks){var networksDict={};networks.forEach(function(network){networksDict[network.id]=network;});var outPorts=[];inPorts.forEach(function(inPort){var network,outPort;outPort=angular.copy(inPort);if(inPort.network_id in networksDict){network=networksDict[inPort.network_id];outPort.network_name=network.name;outPort.subnet_names=getSubnetsForPort(inPort,network.subnets);}
outPorts.push(outPort);});return outPorts;}
function getSubnetsForPort(port,subnets){var subnetNames={};port.fixed_ips.forEach(function(ip){subnets.forEach(function(subnet){if(ip.subnet_id===subnet.id){subnetNames[ip.ip_address]=subnet.name;}});});return subnetNames;}}})();(function(){"use strict";angular.module('horizon.app.core.trunks').controller('TrunkOverviewController',TrunkOverviewController);TrunkOverviewController.$inject=['horizon.app.core.trunks.resourceType','horizon.framework.conf.resource-type-registry.service','horizon.app.core.openstack-service-api.userSession','horizon.app.core.trunks.service','$scope'];function TrunkOverviewController(trunkResourceTypeCode,registry,userSession,trunksService,$scope){var ctrl=this;ctrl.resourceType=registry.getResourceType(trunkResourceTypeCode);ctrl.tableConfig={selectAll:false,expand:false,trackId:'segmentation_id',columns:[{id:'segmentation_type',title:gettext('Segmentation Type'),priority:1,sortDefault:true},{id:'segmentation_id',title:gettext('Segmentation ID'),priority:1,sortDefault:true},{id:'port_id',title:gettext('Port ID'),priority:1,urlFunction:trunksService.getPortDetailsPath}]};$scope.context.loadPromise.then(onGetTrunk);function onGetTrunk(trunk){ctrl.trunk=trunk.data;userSession.get().then(setProject);function setProject(session){ctrl.projectId=session.project_id;}}}})();(function(){'use strict';angular.module('horizon.app.core.trunks.actions').controller('TrunkDetailsController',TrunkDetailsController);TrunkDetailsController.$inject=['$scope'];function TrunkDetailsController($scope){var ctrl=this;ctrl.trunkAdminStateOptions=[{label:gettext('Enabled'),value:true},{label:gettext('Disabled'),value:false}];$scope.getTrunk.then(function(trunk){ctrl.trunk={admin_state_up:trunk.admin_state_up,description:trunk.description,name:trunk.name};$scope.stepModels.trunkSlices=$scope.stepModels.trunkSlices||{};$scope.stepModels.trunkSlices.getDetails=function(){return ctrl.trunk;};$scope.stepModels.initTrunk=$scope.initTrunk;ctrl.trunkLoaded=true;});}})();(function(){'use strict';angular.module('horizon.app.core.trunks.actions').controller('TrunkParentPortController',TrunkParentPortController);TrunkParentPortController.$inject=['$scope','horizon.app.core.trunks.actions.ports-extra.service','horizon.app.core.trunks.portConstants','horizon.framework.widgets.action-list.button-tooltip.row-warning.service','horizon.framework.widgets.transfer-table.events'];function TrunkParentPortController($scope,portsExtra,portConstants,tooltipService,ttevents){var ctrl=this;var parentPortCandidates;ctrl.portStatuses=portConstants.statuses;ctrl.portAdminStates=portConstants.adminStates;ctrl.vnicTypes=portConstants.vnicTypes;ctrl.tableHelpText={allocHelpText:gettext('Select from the list of available ports below.')};ctrl.tooltipModel=tooltipService;ctrl.nameOrID=function nameOrId(data){return angular.isDefined(data.name)&&data.name!==''?data.name:data.id;};ctrl.tableLimits={maxAllocation:1};$scope.getPortsWithNets.then(function(portsWithNets){parentPortCandidates=portsWithNets.filter(portsExtra.isParentPortCandidate);ctrl.parentTables={available:parentPortCandidates,allocated:[],displayedAvailable:[],displayedAllocated:[]};$scope.stepModels.trunkSlices=$scope.stepModels.trunkSlices||{};$scope.stepModels.trunkSlices.getParentPort=function(){var trunk={port_id:$scope.initTrunk.port_id};if(ctrl.parentTables.allocated.length in[0,1]){trunk.port_id=ctrl.parentTables.allocated[0].id;}else{throw new Error('Allocating multiple parent ports is meaningless.');}
return trunk;};$scope.stepModels.allocated=$scope.stepModels.allocated||{};$scope.stepModels.allocated.parentPort=ctrl.parentTables.allocated;var deregisterAllocatedWatcher=$scope.$watchCollection('stepModels.allocated.subports',hideAllocated);$scope.$on('$destroy',function(){deregisterAllocatedWatcher();});function hideAllocated(allocatedList){if(!ctrl.portsLoaded||!allocatedList){return;}
var allocatedDict={};var availableList;allocatedList.forEach(function(port){allocatedDict[port.id]=true;});availableList=parentPortCandidates.filter(function(port){return!(port.id in allocatedDict);});ctrl.parentTables.available=availableList;$scope.$broadcast(ttevents.TABLES_CHANGED,{data:{available:availableList}});}
ctrl.portsLoaded=true;});}})();(function(){'use strict';angular.module('horizon.app.core.trunks.actions').controller('TrunkSubPortsController',TrunkSubPortsController);TrunkSubPortsController.$inject=['$scope','horizon.app.core.trunks.actions.ports-extra.service','horizon.app.core.trunks.portConstants','horizon.framework.widgets.action-list.button-tooltip.row-warning.service','horizon.framework.widgets.transfer-table.events'];function TrunkSubPortsController($scope,portsExtra,portConstants,tooltipService,ttevents){var ctrl=this;var subportCandidates;ctrl.portStatuses=portConstants.statuses;ctrl.portAdminStates=portConstants.adminStates;ctrl.vnicTypes=portConstants.vnicTypes;ctrl.tableHelpText={allocHelpText:gettext('Select from the list of available ports below.'),availHelpText:gettext('Select many')};ctrl.tooltipModel=tooltipService;ctrl.nameOrID=function nameOrId(data){return angular.isDefined(data.name)&&data.name!==''?data.name:data.id;};ctrl.tableLimits={maxAllocation:-1};ctrl.segmentationTypesDict={'vlan':[1,4094],'inherit':null};ctrl.segmentationTypes=Object.keys(ctrl.segmentationTypesDict);ctrl.subportsDetails={};$scope.getTrunk.then(function(trunk){trunk.sub_ports.forEach(function(subport){ctrl.subportsDetails[subport.port_id]={segmentation_type:subport.segmentation_type,segmentation_id:subport.segmentation_id};});ctrl.trunkLoaded=true;});$scope.getPortsWithNets.then(function(portsWithNets){var subportsOfInitTrunk=portsWithNets.filter(portsExtra.isSubportOfTrunk.bind(null,$scope.initTrunk.id));subportCandidates=portsWithNets.filter(portsExtra.isSubportCandidate);ctrl.subportsTables={available:[].concat(subportsOfInitTrunk,subportCandidates),allocated:[].concat(subportsOfInitTrunk),displayedAvailable:[],displayedAllocated:[]};$scope.stepModels.trunkSlices=$scope.stepModels.trunkSlices||{};$scope.stepModels.trunkSlices.getSubports=function(){var trunk={sub_ports:[]};ctrl.subportsTables.allocated.forEach(function(port){if(port.id in ctrl.subportsDetails){trunk.sub_ports.push({port_id:port.id,segmentation_id:ctrl.subportsDetails[port.id].segmentation_id,segmentation_type:ctrl.subportsDetails[port.id].segmentation_type});}});return trunk;};$scope.stepModels.allocated=$scope.stepModels.allocated||{};$scope.stepModels.allocated.subports=ctrl.subportsTables.allocated;var deregisterAllocatedWatcher=$scope.$watchCollection('stepModels.allocated.parentPort',hideAllocated);$scope.$on('$destroy',function(){deregisterAllocatedWatcher();});function hideAllocated(allocatedList){if(!ctrl.portsLoaded||!allocatedList){return;}
var allocatedDict={};var availableList;allocatedList.forEach(function(port){allocatedDict[port.id]=true;});availableList=subportCandidates.filter(function(port){return!(port.id in allocatedDict);});ctrl.subportsTables.available=availableList;$scope.$broadcast(ttevents.TABLES_CHANGED,{data:{available:availableList}});}
ctrl.portsLoaded=true;});}})();(function(){"use strict";angular.module('horizon.app.core.trunks').factory('horizon.app.core.trunks.service',trunksService);trunksService.$inject=['horizon.app.core.openstack-service-api.neutron','horizon.app.core.openstack-service-api.userSession','horizon.app.core.detailRoute','$location','$window'];function trunksService(neutron,userSession,detailRoute,$location,$window){return{getDetailsPath:getDetailsPath,getPortDetailsPath:getPortDetailsPath,getTrunksPromise:getTrunksPromise,getTrunkPromise:getTrunkPromise};function getDetailsPath(item){var detailsPath=detailRoute+'OS::Neutron::Trunk/'+item.id;if($location.url()==='/admin/trunks'){detailsPath=detailsPath+"?nav=/admin/trunks/";}
return detailsPath;}
function getPortDetailsPath(item){var isAdminFromLocation=$location.url().indexOf('admin')>=1;var dashboardUrl=isAdminFromLocation?'admin':'project';var webRoot=$window.WEBROOT;return webRoot+dashboardUrl+'/networks/ports/'+item.port_id+'/detail';}
function getTrunksPromise(params){return userSession.get().then(getTrunksForProject);function getTrunksForProject(userSession){var locationURLNotAdmin=($location.url().indexOf('admin')===-1);if(locationURLNotAdmin){params.project_id=userSession.project_id;}else{delete params.project_id;}
return neutron.getTrunks(params).then(addTrackBy);}
function addTrackBy(response){return{data:{items:response.data.items.map(function(trunk){trunk.trackBy=[trunk.id,trunk.revision_number,trunk.updated_at.toISOString()].join('/');return trunk;})}};}}
function getTrunkPromise(identifier){return neutron.getTrunk(identifier).catch(getTrunkError);function getTrunkError(trunk){$window.history.back();return trunk;}}}})();(function(){'use strict';var forEach=angular.forEach;angular.module('horizon.app.core.workflow').factory('horizon.app.core.workflow.decorator',dashboardWorkflowDecorator);dashboardWorkflowDecorator.$inject=['$q','horizon.app.core.openstack-service-api.serviceCatalog','horizon.app.core.openstack-service-api.policy','horizon.app.core.openstack-service-api.settings','horizon.app.core.openstack-service-api.novaExtensions'];function dashboardWorkflowDecorator($q,serviceCatalog,policy,settings,novaExtensions){return decorator;function decorator(spec){decorate(spec);return spec;}
function decorate(spec){forEach(spec.steps,decorateStep);}
function decorateStep(step){var promises=[];var types=step.requiredServiceTypes;if(types&&types.length>0){promises=promises.concat(types.map(function checkServiceEnabled(type){return serviceCatalog.ifTypeEnabled(type);}));}
if(step.policy){promises.push(policy.ifAllowed(step.policy));}
if(step.setting){promises.push(settings.ifEnabled(step.setting,true,true));}
if(step.novaExtension){promises.push(novaExtensions.ifNameEnabled(step.novaExtension));}
if(promises.length>0){step.checkReadiness=function(){return $q.all(promises).then(function(){return true;},function(){return false;});};}}}})();(function(){'use strict';angular.module('horizon.app.core.workflow').factory('horizon.app.core.workflow.factory',dashboardWorkflow);dashboardWorkflow.$inject=['horizon.framework.util.workflow.service','horizon.app.core.workflow.decorator'];function dashboardWorkflow(workflow,dashboardWorkflowDecorator){var decorators=[dashboardWorkflowDecorator];return function(spec){return workflow(spec,decorators);};}})();(function(){'use strict';angular.module('horizon.app').controller('RedirectController',RedirectController);RedirectController.$inject=['$window','$location','horizon.framework.util.i18n.gettext','horizon.framework.widgets.modal-wait-spinner.service'];function RedirectController($window,$location,gettext,waitSpinnerService){waitSpinnerService.showModalSpinner(gettext('Loading'));$window.location.href=$location.absUrl();}}());(function(){'use strict';angular.module('horizon.app.tech-debt').controller('hzNamespaceResourceTypeFormController',hzNamespaceResourceTypeFormController);hzNamespaceResourceTypeFormController.$inject=['$window'];function hzNamespaceResourceTypeFormController($window){var ctrl=this;ctrl.resource_types=$window.resource_types;ctrl.saveResourceTypes=function(){ctrl.resource_types=angular.toJson(ctrl.resource_types);};}})();(function(){'use strict';angular.module('horizon.app.tech-debt').controller('ImageFormController',ImageFormController);function ImageFormController(){var ctrl=this;ctrl.copyFrom=angular.element('#id_image_url').val();ctrl.diskFormat=angular.element('#id_disk_format option:selected').val();ctrl.selectTitle=$('#id_disk_format').parents('.themable-select').find('.dropdown-title');ctrl.selectImageFormat=function(path){if(!path){return;}
var format=path.substr(path.lastIndexOf(".")+1).toLowerCase().replace(/[^a-z0-9]+/gi,"");if($('#id_disk_format').find('[value='+format+']').length!==0){ctrl.diskFormat=format;ctrl.selectTitle.text($('#id_disk_format').find('[value='+format+']').text());}else{ctrl.diskFormat="";ctrl.selectTitle.text($('#id_disk_format').find('option').first().text());}};}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers',['ngRoute','horizon.framework','horizon.app.core.openstack-service-api']).constant('horizon.dashboard.project.containers.account.resourceType','OS::Swift::Account').constant('horizon.dashboard.project.containers.container.resourceType','OS::Swift::Container').constant('horizon.dashboard.project.containers.object.resourceType','OS::Swift::Object').config(config).run(run);config.$inject=['$provide','$routeProvider','$windowProvider'];function config($provide,$routeProvider,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/project/containers/';$provide.constant('horizon.dashboard.project.containers.basePath',path);var baseRoute='project/containers/';$provide.constant('horizon.dashboard.project.containers.baseRoute',baseRoute);var containerRoute=baseRoute+'container/';$provide.constant('horizon.dashboard.project.containers.containerRoute',containerRoute);$routeProvider.when('/'+baseRoute,{templateUrl:path+'select-container.html'}).when('/'+containerRoute,{templateUrl:path+'select-container.html'}).when('/'+containerRoute+':container',{templateUrl:path+'objects.html'}).when('/'+containerRoute+':container/:folder*',{templateUrl:path+'objects.html'});}
run.$inject=['horizon.dashboard.project.containers.account.resourceType','horizon.dashboard.project.containers.container.resourceType','horizon.dashboard.project.containers.object.resourceType','horizon.framework.conf.resource-type-registry.service'];function run(accountResCode,containerResCode,objectResCode,registryService){registryService.getResourceType(accountResCode).setNames(gettext('Swift Account'),gettext('Swift Accounts'));registryService.getResourceType(containerResCode).setNames(gettext('Swift Container'),gettext('Swift Containers'));var objectResourceType=registryService.getResourceType(objectResCode);objectResourceType.setNames(gettext('Object'),gettext('Objects')).setProperty('name',{label:gettext('Name')}).setProperty('size',{label:gettext('Size')});objectResourceType.tableColumns.append({id:'name',priority:1,sortDefault:true,template:'<a ng-if="item.is_subdir" ng-href="{$ table.objectURL(item) $}">'+'{$ item.name $}</a><span ng-if="item.is_object">{$ item.name $}</span>'}).append({id:'bytes',priority:1,title:gettext('Size'),template:'<span ng-if="item.is_object">{$item.bytes | bytes$}</span>'+'<span ng-if="item.is_subdir" translate>Folder</span>'});objectResourceType.filterFacets.append({label:gettext('Name'),name:'name',singleton:true});}})();(function(){'use strict';angular.module('horizon.dashboard.project',['horizon.dashboard.project.containers','horizon.dashboard.project.workflow']).config(config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/project/';$provide.constant('horizon.dashboard.project.basePath',path);}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance',[]).config(config).constant('horizon.dashboard.project.workflow.launch-instance.modal-spec',{backdrop:'static',size:'lg',controller:'ModalContainerController',template:'<wizard class="wizard" ng-controller="LaunchInstanceWizardController"></wizard>'}).constant('horizon.dashboard.project.workflow.launch-instance.boot-source-types',{IMAGE:'image',INSTANCE_SNAPSHOT:'snapshot',VOLUME:'volume',VOLUME_SNAPSHOT:'volume_snapshot',NON_BOOTABLE_IMAGE_TYPES:['aki','ari']}).constant('horizon.dashboard.project.workflow.launch-instance.non_bootable_image_types',['aki','ari']).constant('horizon.dashboard.project.workflow.launch-instance.step-policy',{schedulerHints:{rules:[['compute','os_compute_api:os-scheduler-hints:discoverable']]},serverGroups:{rules:[['compute','os_compute_api:os-server-groups:discoverable']]}}).filter('diskFormat',diskFormat);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/project/workflow/launch-instance/';$provide.constant('horizon.dashboard.project.workflow.launch-instance.basePath',path);}
function diskFormat(){return filter;function filter(input){if(input===null||!angular.isObject(input)||angular.isUndefined(input.disk_format)||input.disk_format===null){return'';}else{var diskFormat=input.disk_format;var containerFormat=input.container_format;return containerFormat==='docker'&&diskFormat==='raw'?'docker':diskFormat;}}}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow',['horizon.dashboard.project.workflow.launch-instance']);})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').directive('checkCopyDestination',CheckCopyDestination);CheckCopyDestination.$inject=['horizon.app.core.openstack-service-api.swift','horizon.dashboard.project.containers.containers-model','$q'];function CheckCopyDestination(swiftAPI,model,$q){function checkContainer(container){var def=$q.defer();swiftAPI.getContainer(container,true).then(def.resolve,def.reject);return def.promise;}
function checkObject(container,object){var def=$q.defer();swiftAPI.getObjectDetails(container,object,true).then(def.resolve,def.reject);return def.promise;}
return{restrict:'A',require:'ngModel',link:function(scope,element,attrs,ngModel){var ctrl=scope.ctrl;scope.$watch(function(){var destContainer=(ctrl.model.dest_container===undefined||ctrl.model.dest_container===null)?"":ctrl.model.dest_container;var destName=(ctrl.model.dest_name===undefined||ctrl.model.dest_name===null)?"":ctrl.model.dest_name;return[destContainer,destName];},function(value){var destContainer=value[0];var destName=value[1];ngModel.$setValidity('containerNotFound',true);ngModel.$setValidity('objectExists',true);if(destContainer===""){return value;}
checkContainer(destContainer).then(function success(){ngModel.$setValidity('containerNotFound',true);return value;},function error(){ngModel.$setValidity('containerNotFound',false);return;});if(destName!==""){checkObject(destContainer,destName).then(function success(){ngModel.$setValidity('objectExists',false);return;},function error(){ngModel.$setValidity('objectExists',true);return value;});}},true);}};}})();(function(){'use strict';var push=Array.prototype.push;angular.module('horizon.dashboard.project.containers').factory('horizon.dashboard.project.containers.containers-model',ContainersModel);ContainersModel.$inject=['horizon.app.core.openstack-service-api.swift','horizon.framework.util.http.service','$q'];function ContainersModel(swiftAPI,apiService,$q){var model={info:{},containers:[],container:null,objects:[],folder:'',pseudo_folder_hierarchy:[],DELIMETER:'/',initialize:initialize,selectContainer:selectContainer,fullPath:fullPath,fetchContainerDetail:fetchContainerDetail,deleteObject:deleteObject,updateContainer:updateContainer,recursiveCollect:recursiveCollect,recursiveDelete:recursiveDelete,getContainers:getContainers,_recursiveDeleteFiles:recursiveDeleteFiles,_recursiveDeleteFolders:recursiveDeleteFolders};model.intialiseDeferred=$q.defer();model.getContainersDeferred=$q.defer();return model;function initialize(){$q.all([swiftAPI.getContainers().then(function onContainers(data){model.containers.length=0;push.apply(model.containers,data.data.items);}),swiftAPI.getInfo().then(function onInfo(data){model.swift_info=data.info;})]).then(function resolve(){model.intialiseDeferred.resolve();});}
function selectContainer(name,folder){for(var i=0;i<model.containers.length;i++){if(model.containers[i].name===name){model.container=model.containers[i];break;}}
model.objects.length=0;model.pseudo_folder_hierarchy.length=0;model.folder=folder;var spec={delimiter:model.DELIMETER};if(folder){spec.path=encodeURIComponent(folder)+model.DELIMETER;}
return swiftAPI.getObjects(name,spec).then(function onObjects(response){push.apply(model.objects,response.data.items);angular.forEach(model.objects,function setId(object){object.url=swiftAPI.getObjectURL(name,model.fullPath(object.name));});if(folder){push.apply(model.pseudo_folder_hierarchy,folder.split(model.DELIMETER)||[folder]);}});}
function fullPath(name){if(model.folder){return model.folder+model.DELIMETER+name;}
return name;}
function updateContainer(){return model.fetchContainerDetail(model.container,true);}
function fetchContainerDetail(container,force){if(container.is_fetched&&!force){var deferred=$q.defer();deferred.resolve();return deferred.promise;}
return swiftAPI.getContainer(container.name).then(function success(response){angular.extend(container,response.data);container.bytes=parseInt(container.container_bytes_used,10);container.count=parseInt(container.container_object_count,10);container.is_fetched=true;var milliseconds=Date.parse(container.timestamp);if(!isNaN(milliseconds)){container.timestamp=new Date(milliseconds);}});}
function deleteObject(object){var path=model.fullPath(object.name);if(object.is_subdir){path+=model.DELIMETER;}
return swiftAPI.deleteObject(model.container.name,path).then(function success(){for(var i=model.objects.length-1;i>=0;i--){if(model.objects[i].name===object.name){model.objects.splice(i,1);}}});}
function recursiveCollect(state,items,result){return $q.all(items.map(function each(item){if(item.is_object){state.counted.files++;result.push(item.path);return null;}else{var folder={folder:item.path,tree:[]};if(state.cancel){return null;}
result.push(folder);state.counted.folders++;var spec={delimiter:model.DELIMETER,path:encodeURIComponent(item.path).replace(/%2F/g,'/')};return swiftAPI.getObjects(model.container.name,spec).then(function objects(response){return recursiveCollect(state,response.data.items,folder.tree);});}}));}
function recursiveDelete(state,node){return model._recursiveDeleteFiles(state,node).then(function(){return model._recursiveDeleteFolders(state,node);});}
function recursiveDeleteFiles(state,node){if(angular.isObject(node)){return $q.all(node.tree.map(function each(subnode){return recursiveDeleteFiles(state,subnode);}));}else{return swiftAPI.deleteObject(model.container.name,node).then(function done(){state.deleted.files++;});}}
function recursiveDeleteFolders(state,node){if(!angular.isObject(node)){return null;}
if(!node.tree.length){return deleteFolder(node.folder);}
function deleteFolder(folderName){if(angular.isUndefined(folderName)){return null;}
var path=folderName+model.DELIMETER;var url=swiftAPI.getObjectURL(model.container.name,path);return apiService.delete(url).then(done,fail);function done(){state.deleted.folders++;}
function fail(response){if(response.status===404){done();}else{state.deleted.failures++;}}}
return $q.all(node.tree.map(function each(subnode){return recursiveDeleteFolders(state,subnode);})).then(function then(){return deleteFolder(node.folder);});}
function getContainers(params){swiftAPI.getContainers(params).then(function onContainers(data){model.containers.length=0;push.apply(model.containers,data.data.items);}).then(function resolve(){model.getContainersDeferred.resolve();});}}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').controller('horizon.dashboard.project.containers.ContainersController',ContainersController);ContainersController.$inject=['horizon.app.core.openstack-service-api.swift','horizon.dashboard.project.containers.containers-model','horizon.dashboard.project.containers.basePath','horizon.dashboard.project.containers.baseRoute','horizon.dashboard.project.containers.containerRoute','horizon.framework.widgets.form.ModalFormService','horizon.framework.widgets.modal.simple-modal.service','horizon.framework.widgets.toast.service','horizon.framework.widgets.magic-search.events','horizon.framework.widgets.magic-search.service','$scope','$location','$q'];function ContainersController(swiftAPI,containersModel,basePath,baseRoute,containerRoute,modalFormService,simpleModalService,toastService,magicSearchEvents,magicSearchService,$scope,$location,$q){var ctrl=this;ctrl.model=containersModel;ctrl.model.initialize();ctrl.baseRoute=baseRoute;ctrl.containerRoute=containerRoute;ctrl.filterFacets=[{name:'prefix',label:gettext('Prefix'),singleton:true,isServer:true}];ctrl.filterEventTrigeredBySearchBar=true;ctrl.checkContainerNameConflict=checkContainerNameConflict;ctrl.toggleAccess=toggleAccess;ctrl.deleteContainer=deleteContainer;ctrl.deleteContainerAction=deleteContainerAction;ctrl.createContainer=createContainer;ctrl.createContainerAction=createContainerAction;ctrl.selectContainer=selectContainer;function checkContainerNameConflict(containerName){if(!containerName){return $q.when();}
var def=$q.defer();swiftAPI.getContainer(containerName,true).then(def.reject,def.resolve);return def.promise;}
function selectContainer(container){if(!ctrl.model.container||container.name!==ctrl.model.container.name){ctrl.filterEventTrigeredBySearchBar=false;}
ctrl.model.container=container;$location.path(ctrl.containerRoute+container.name);return ctrl.model.fetchContainerDetail(container);}
function toggleAccess(container){swiftAPI.setContainerAccess(container.name,container.is_public).then(function updated(){var access='private';if(container.is_public){access='public';}
toastService.add('success',interpolate(gettext('Container %(name)s is now %(access)s.'),{name:container.name,access:access},true));ctrl.model.fetchContainerDetail(container,true);},function failure(){container.is_public=!container.is_public;});}
function deleteContainer(container){var options={title:gettext('Confirm Delete'),body:interpolate(gettext('Are you sure you want to delete container %(name)s?'),container,true),submit:gettext('Delete'),cancel:gettext('Cancel'),confirmCssClass:"btn-danger"};simpleModalService.modal(options).result.then(function confirmed(){return ctrl.deleteContainerAction(container);});}
function deleteContainerAction(container){swiftAPI.deleteContainer(container.name).then(function deleted(){toastService.add('success',interpolate(gettext('Container %(name)s deleted.'),container,true));for(var i=ctrl.model.containers.length-1;i>=0;i--){if(ctrl.model.containers[i].name===container.name){ctrl.model.containers.splice(i,1);break;}}
if(ctrl.model.container.name===container.name){$location.path(ctrl.baseRoute);}});}
var createContainerSchema={type:'object',properties:{name:{title:gettext('Container Name'),type:'string',pattern:'^[^/]+$',description:gettext('Container name must not contain "/".')},public:{title:gettext('Container Access'),type:'boolean',default:false,description:gettext('A Public Container will allow anyone with the Public URL to '+'gain access to your objects in the container.')}},required:['name']};var createContainerForm=[{type:'section',htmlClass:'row',items:[{type:'section',htmlClass:'col-sm-12',items:[{key:'name',validationMessage:{exists:gettext('A container with that name exists.')},$asyncValidators:{exists:checkContainerNameConflict}},{key:'public',type:'radiobuttons',disableSuccessState:true,titleMap:[{value:true,name:gettext('Public')},{value:false,name:gettext('Not public')}]}]}]}];function createContainer(){var model={public:false};var config={title:gettext('Create Container'),schema:createContainerSchema,form:createContainerForm,model:model,size:'md',helpUrl:basePath+'create-container.help.html'};return modalFormService.open(config).then(function then(){return ctrl.createContainerAction(model);});}
function createContainerAction(model){return swiftAPI.createContainer(model.name,model.public).then(function success(){toastService.add('success',interpolate(gettext('Container %(name)s created.'),model,true));ctrl.model.containers.push({name:model.name,count:0,bytes:0});});}
$scope.$on(magicSearchEvents.SEARCH_UPDATED,function(event,data){if(ctrl.filterEventTrigeredBySearchBar){ctrl.model.getContainers(magicSearchService.getQueryObject(data));}
else{ctrl.filterEventTrigeredBySearchBar=true;}});}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').controller('horizon.dashboard.project.containers.CopyObjectModalController',CopyObjectModalController);CopyObjectModalController.$inject=['fileDetails'];function CopyObjectModalController(fileDetails){var ctrl=this;ctrl.model={container:fileDetails.container,path:fileDetails.path,dest_container:"",dest_name:""};}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').controller('DeleteObjectsModalController',DeleteObjectsModalController);DeleteObjectsModalController.$inject=['horizon.dashboard.project.containers.containers-model','selected','$uibModalInstance'];function DeleteObjectsModalController(model,selected,$uibModalInstance){var ctrl=this;ctrl.model={container:model.container,collection:[],counted:{files:0,folders:0},deleted:{files:0,folders:0,failures:0},mode:'discovery',running:true,cancel:false};model.recursiveCollect(ctrl.model,selected,ctrl.model.collection).then(function complete(){ctrl.model.running=false;});ctrl.dismiss=function dismiss(){ctrl.model.cancel=true;$uibModalInstance.dismiss();};ctrl.action=function action(){if(ctrl.model.mode==='discovery'){ctrl.model.mode='deletion';ctrl.model.running=true;return model.recursiveDelete(ctrl.model,{tree:ctrl.model.collection}).then(function done(){ctrl.model.running=false;});}else{$uibModalInstance.close();}};}}());(function(){'use strict';angular.module('horizon.dashboard.project.containers').controller('horizon.dashboard.project.containers.EditObjectModalController',EditObjectModalController);EditObjectModalController.$inject=['fileDetails'];function EditObjectModalController(fileDetails){var ctrl=this;ctrl.model={container:fileDetails.container,path:fileDetails.path,view_file:null,edit_file:null};ctrl.changeFile=changeFile;function changeFile(files){if(files.length){ctrl.model.edit_file=files[0];}}}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').directive('onFileChange',OnFileChange);OnFileChange.$inject=[];function OnFileChange(){return{restrict:'A',require:'ngModel',link:function link(scope,element,attrs,ngModel){var onFileChangeHandler=scope.$eval(attrs.onFileChange);element.on('change',function change(event){onFileChangeHandler(event.target.files);scope.$apply(function expression(){var files=event.target.files;var filename=files&&files.length>0?files[0].name:null;ngModel.$setViewValue(filename);ngModel.$render();});});}};}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').directive('objectNameExists',ObjectNameExists);ObjectNameExists.$inject=['horizon.app.core.openstack-service-api.swift','horizon.dashboard.project.containers.containers-model','$q'];function ObjectNameExists(swiftAPI,model,$q){return{restrict:'A',require:'ngModel',link:function(scope,element,attrs,ngModel){ngModel.$asyncValidators.exists=function exists(modelValue){if(ngModel.$isEmpty(modelValue)){return $q.when();}
var def=$q.defer();swiftAPI.getObjectDetails(model.container.name,model.fullPath(modelValue),true).then(def.reject,def.resolve);return def.promise;};}};}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').factory('horizon.dashboard.project.containers.objects-batch-actions.create-folder',createFolderService).factory('horizon.dashboard.project.containers.objects-batch-actions.delete',deleteService).factory('horizon.dashboard.project.containers.objects-batch-actions.upload',uploadService).run(registerActions);registerActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.project.containers.object.resourceType','horizon.dashboard.project.containers.objects-batch-actions.create-folder','horizon.dashboard.project.containers.objects-batch-actions.delete','horizon.dashboard.project.containers.objects-batch-actions.upload'];function registerActions(registryService,objectResCode,createFolderService,deleteService,uploadService){registryService.getResourceType(objectResCode).batchActions.append({service:uploadService,template:{text:'<span class="fa fa-upload"></span>'}}).append({service:createFolderService,template:{text:'<span class="fa fa-plus"></span>&nbsp;'+gettext('Folder')}}).append({service:deleteService,template:{text:'',type:'delete-selected'}});}
function uploadModal(html,$uibModal){var localSpec={backdrop:'static',controller:'horizon.dashboard.project.containers.UploadObjectModalController as ctrl',templateUrl:html};return $uibModal.open(localSpec).result;}
uploadService.$inject=['horizon.app.core.openstack-service-api.swift','horizon.dashboard.project.containers.basePath','horizon.dashboard.project.containers.containers-model','horizon.framework.util.q.extensions','horizon.framework.widgets.modal-wait-spinner.service','horizon.framework.widgets.toast.service','$uibModal'];function uploadService(swiftAPI,basePath,model,$qExtensions,modalWaitSpinnerService,toastService,$uibModal){var service={allowed:function allowed(){return $qExtensions.booleanAsPromise(true);},perform:function perform(){uploadModal(basePath+'upload-object-modal.html',$uibModal).then(service.uploadObjectCallback);},uploadObjectCallback:uploadObjectCallback};return service;function uploadObjectCallback(uploadInfo){modalWaitSpinnerService.showModalSpinner(gettext("Uploading"));swiftAPI.uploadObject(model.container.name,model.fullPath(uploadInfo.name),uploadInfo.upload_file).then(function success(){modalWaitSpinnerService.hideModalSpinner();toastService.add('success',interpolate(gettext('File %(name)s uploaded.'),uploadInfo,true));model.updateContainer();model.selectContainer(model.container.name,model.folder);},function error(){modalWaitSpinnerService.hideModalSpinner();});}}
createFolderService.$inject=['horizon.app.core.openstack-service-api.swift','horizon.dashboard.project.containers.basePath','horizon.dashboard.project.containers.containers-model','horizon.framework.util.q.extensions','horizon.framework.widgets.toast.service','$uibModal'];function createFolderService(swiftAPI,basePath,model,$qExtensions,toastService,$uibModal){var service={allowed:function allowed(){return $qExtensions.booleanAsPromise(true);},perform:function perform(){uploadModal(basePath+'create-folder-modal.html',$uibModal).then(service.createFolderCallback);},createFolderCallback:createFolderCallback};return service;function createFolderCallback(name){swiftAPI.createFolder(model.container.name,model.fullPath(name)).then(function success(){toastService.add('success',interpolate(gettext('Folder %(name)s created.'),{name:name},true));model.updateContainer();model.selectContainer(model.container.name,model.folder);});}}
deleteService.$inject=['horizon.dashboard.project.containers.basePath','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','$uibModal'];function deleteService(basePath,actionResultService,$qExtensions,$uibModal){return{allowed:function allowed(){return $qExtensions.booleanAsPromise(true);},perform:function perform(files){var localSpec={backdrop:'static',controller:'DeleteObjectsModalController as ctrl',templateUrl:basePath+'delete-objects-modal.html',resolve:{selected:function(){return files;}}};return $uibModal.open(localSpec).result.then(function finished(){return actionResultService.getActionResult().deleted('OS::Swift::Object','DELETED').result;});}};}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').factory('horizon.dashboard.project.containers.objects-actions.delete',deleteService).factory('horizon.dashboard.project.containers.objects-actions.download',downloadService).factory('horizon.dashboard.project.containers.objects-actions.edit',editService).factory('horizon.dashboard.project.containers.objects-actions.view',viewService).factory('horizon.dashboard.project.containers.objects-actions.copy',copyService).run(registerActions);registerActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.project.containers.object.resourceType','horizon.dashboard.project.containers.objects-actions.delete','horizon.dashboard.project.containers.objects-actions.download','horizon.dashboard.project.containers.objects-actions.edit','horizon.dashboard.project.containers.objects-actions.view','horizon.dashboard.project.containers.objects-actions.copy','horizon.framework.util.i18n.gettext'];function registerActions(registryService,objectResCode,deleteService,downloadService,editService,viewService,copyService,gettext){registryService.getResourceType(objectResCode).itemActions.append({service:downloadService,template:{text:gettext('Download')}}).append({service:viewService,template:{text:gettext('View Details')}}).append({service:editService,template:{text:gettext('Edit')}}).append({service:copyService,template:{text:gettext('Copy')}}).append({service:deleteService,template:{text:gettext('Delete'),type:'delete'}});}
downloadService.$inject=['horizon.framework.util.q.extensions','$window'];function downloadService($qExtensions,$window){return{allowed:allowed,perform:perform};function allowed(file){return $qExtensions.booleanAsPromise(file.is_object);}
function perform(file){$window.location.href=file.url.replace(/^\//,'');}}
viewService.$inject=['horizon.app.core.openstack-service-api.swift','horizon.dashboard.project.containers.basePath','horizon.dashboard.project.containers.containers-model','horizon.framework.util.q.extensions','$uibModal'];function viewService(swiftAPI,basePath,model,$qExtensions,$uibModal){return{allowed:allowed,perform:perform};function allowed(file){return $qExtensions.booleanAsPromise(file.is_object);}
function perform(file){var objectPromise=swiftAPI.getObjectDetails(model.container.name,model.fullPath(file.name)).then(function received(response){return response.data;});var localSpec={backdrop:'static',controller:'SimpleModalController as ctrl',templateUrl:basePath+'object-details-modal.html',resolve:{context:function context(){return objectPromise;}}};$uibModal.open(localSpec);}}
editService.$inject=['horizon.app.core.openstack-service-api.swift','horizon.dashboard.project.containers.basePath','horizon.dashboard.project.containers.containers-model','horizon.framework.util.q.extensions','horizon.framework.widgets.modal-wait-spinner.service','horizon.framework.widgets.toast.service','$uibModal'];function editService(swiftAPI,basePath,model,$qExtensions,modalWaitSpinnerService,toastService,$uibModal){return{allowed:allowed,perform:perform};function allowed(file){return $qExtensions.booleanAsPromise(file.is_object);}
function perform(file){var localSpec={backdrop:'static',controller:'horizon.dashboard.project.containers.EditObjectModalController as ctrl',templateUrl:basePath+'edit-object-modal.html',resolve:{fileDetails:function fileDetails(){return{path:file.path,container:model.container.name};}}};return $uibModal.open(localSpec).result.then(editObjectCallback);}
function editObjectCallback(uploadInfo){modalWaitSpinnerService.showModalSpinner(gettext("Uploading"));swiftAPI.uploadObject(model.container.name,uploadInfo.path,uploadInfo.edit_file).then(success,error);function success(){modalWaitSpinnerService.hideModalSpinner();toastService.add('success',interpolate(gettext('File %(path)s uploaded.'),uploadInfo,true));model.updateContainer();model.selectContainer(model.container.name,model.folder);}
function error(){modalWaitSpinnerService.hideModalSpinner();}}}
deleteService.$inject=['horizon.dashboard.project.containers.basePath','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','$uibModal'];function deleteService(basePath,actionResultService,$qExtensions,$uibModal){return{allowed:allowed,perform:perform};function allowed(){return $qExtensions.booleanAsPromise(true);}
function perform(file){var localSpec={backdrop:'static',controller:'DeleteObjectsModalController as ctrl',templateUrl:basePath+'delete-objects-modal.html',resolve:{selected:function(){return[file];}}};return $uibModal.open(localSpec).result.then(function finished(){return actionResultService.getActionResult().deleted('OS::Swift::Object',file.name).result;});}}
copyService.$inject=['horizon.app.core.openstack-service-api.swift','horizon.dashboard.project.containers.basePath','horizon.dashboard.project.containers.containerRoute','horizon.dashboard.project.containers.containers-model','horizon.framework.util.q.extensions','horizon.framework.widgets.modal-wait-spinner.service','horizon.framework.widgets.toast.service','$uibModal','$location'];function copyService(swiftAPI,basePath,containerRoute,model,$qExtensions,modalWaitSpinnerService,toastService,$uibModal,$location){return{allowed:allowed,perform:perform};function allowed(file){var objectCheck=file.is_object;var capacityCheck=(file.bytes>0);var result=(objectCheck&&capacityCheck);return $qExtensions.booleanAsPromise(result);}
function perform(file){var localSpec={backdrop:'static',keyboard:false,controller:'horizon.dashboard.project.containers.CopyObjectModalController as ctrl',templateUrl:basePath+'copy-object-modal.html',resolve:{fileDetails:function fileDetails(){return{path:file.path,container:model.container.name};}}};return $uibModal.open(localSpec).result.then(copyObjectCallback);}
function copyObjectCallback(copyInfo){modalWaitSpinnerService.showModalSpinner(gettext("Copying"));swiftAPI.copyObject(model.container.name,copyInfo.path,copyInfo.dest_container,copyInfo.dest_name).then(success,error);function success(){var dstNameArray=copyInfo.dest_name.split('/');dstNameArray.pop();var dstFolder=dstNameArray.join('/');modalWaitSpinnerService.hideModalSpinner();toastService.add('success',interpolate(gettext('Object %(path)s has copied.'),copyInfo,true));model.updateContainer();model.selectContainer(copyInfo.dest_container,dstFolder).then(function openDest(){var path=containerRoute+copyInfo.dest_container+'/'+dstFolder;$location.path(path);});}
function error(){modalWaitSpinnerService.hideModalSpinner();}}}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').controller('horizon.dashboard.project.containers.ObjectsController',ObjectsController);ObjectsController.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.project.containers.containers-model','horizon.dashboard.project.containers.containerRoute','horizon.dashboard.project.containers.object.resourceType','horizon.framework.widgets.table.events','$q','$routeParams','$scope'];function ObjectsController(registryService,containersModel,containerRoute,objectResCode,hzTableEvents,$q,$routeParams,$scope){var ctrl=this;var objectResourceType=registryService.getResourceType(objectResCode);ctrl.rowActions=objectResourceType.itemActions;ctrl.batchActions=objectResourceType.batchActions;ctrl.model=containersModel;ctrl.numSelected=0;ctrl.containerURL=containerRoute+encodeURIComponent($routeParams.container)+
ctrl.model.DELIMETER;if(angular.isDefined($routeParams.folder)){ctrl.currentURL=ctrl.containerURL+encodeURIComponent($routeParams.folder)+
ctrl.model.DELIMETER;}else{ctrl.currentURL=ctrl.containerURL;}
ctrl.breadcrumbs=[];ctrl.model.intialiseDeferred.promise.then(function afterInitialise(){ctrl.model.selectContainer($routeParams.container,$routeParams.folder).then(function then(){ctrl.breadcrumbs=ctrl.getBreadcrumbs();});});ctrl.filterFacets=objectResourceType.filterFacets;ctrl.tableConfig={selectAll:true,expand:false,trackId:'path',columns:objectResourceType.getTableColumns()};ctrl.getBreadcrumbs=getBreadcrumbs;ctrl.objectURL=objectURL;ctrl.actionResultHandler=function actionResultHandler(returnValue){return $q.when(returnValue,actionSuccessHandler);};function getBreadcrumbs(){var crumbs=[];var encoded=ctrl.model.pseudo_folder_hierarchy.map(encodeURIComponent);for(var i=0;i<encoded.length;i++){crumbs.push({label:ctrl.model.pseudo_folder_hierarchy[i],url:ctrl.containerURL+encoded.slice(0,i+1).join(ctrl.model.DELIMETER)});}
return crumbs;}
function objectURL(file){return ctrl.currentURL+encodeURIComponent(file.name);}
function actionSuccessHandler(result){if(angular.isUndefined(result)){return;}
if(result.deleted.length>0){$scope.$broadcast(hzTableEvents.CLEAR_SELECTIONS);ctrl.model.updateContainer();ctrl.model.selectContainer(ctrl.model.container.name,ctrl.model.folder);}}}})();(function(){'use strict';angular.module('horizon.dashboard.project.containers').controller('horizon.dashboard.project.containers.UploadObjectModalController',UploadObjectModalController);UploadObjectModalController.$inject=['horizon.dashboard.project.containers.containers-model'];function UploadObjectModalController(model){var ctrl=this;ctrl.model={name:'',container:model.container,folder:model.folder,view_file:null,upload_file:null,DELIMETER:model.DELIMETER};ctrl.form=null;ctrl.changeFile=changeFile;function changeFile(files){if(files.length){ctrl.model.upload_file=files[0];ctrl.model.name=files[0].name;ctrl.form.name.$setDirty();}}}})();(function(){'use strict';var MAX_SCRIPT_SIZE=16*1024;angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceConfigurationController',LaunchInstanceConfigurationController);function LaunchInstanceConfigurationController(){var ctrl=this;ctrl.title=gettext("Customization Script");ctrl.MAX_SCRIPT_SIZE=MAX_SCRIPT_SIZE;ctrl.diskConfigOptions=[{value:'AUTO',text:gettext('Automatic')},{value:'MANUAL',text:gettext('Manual')}];}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceDetailsController',LaunchInstanceDetailsController);LaunchInstanceDetailsController.$inject=['$scope','horizon.framework.widgets.charts.donutChartSettings','horizon.framework.widgets.charts.quotaChartDefaults','horizon.app.core.openstack-service-api.nova'];function LaunchInstanceDetailsController($scope,donutChartSettings,quotaChartDefaults,novaAPI){var ctrl=this;novaAPI.isFeatureSupported('instance_description').then(isDescriptionSupported);ctrl.instanceNameError=gettext('A name is required for your instance.');ctrl.instanceCountError=gettext('Instance count is required and must be an integer of at least 1');ctrl.maxInstanceCount=1;ctrl.chartSettings=donutChartSettings;ctrl.maxInstances=1;ctrl.totalInstancesUsed=0;if($scope.model.novaLimits&&$scope.model.novaLimits.maxTotalInstances){ctrl.maxInstances=$scope.model.novaLimits.maxTotalInstances;}
if($scope.model.novaLimits&&$scope.model.novaLimits.totalInstancesUsed){ctrl.totalInstancesUsed=$scope.model.novaLimits.totalInstancesUsed;}
ctrl.instanceStats={title:gettext('Total Instances'),maxLimit:ctrl.maxInstances,label:'100%',data:[{label:quotaChartDefaults.usageLabel,value:1,colorClass:quotaChartDefaults.usageColorClass},{label:quotaChartDefaults.addedLabel,value:1,colorClass:quotaChartDefaults.addedColorClass},{label:quotaChartDefaults.remainingLabel,value:1,colorClass:quotaChartDefaults.remainingColorClass}]};syncInstanceChartAndLimits();var specifiedInstancesWatcher=createWatcher(getInstanceCount,updateChart);var maxInstancesWatcher=createWatcher(getMaxInstances,resetMaxInstances);var instancesUsedWatcher=createWatcher(getTotalInstancesUsed,resetTotalInstancesUsed);$scope.$on('$destroy',function(){specifiedInstancesWatcher();maxInstancesWatcher();instancesUsedWatcher();});function isDescriptionSupported(data){ctrl.isDescriptionSupported=data.data;}
function getMaxInstances(){return $scope.model.novaLimits.maxTotalInstances;}
function resetMaxInstances(newMaxInstances){ctrl.maxInstances=Math.max(1,newMaxInstances);syncInstanceChartAndLimits();}
function getTotalInstancesUsed(){return $scope.model.novaLimits.totalInstancesUsed;}
function resetTotalInstancesUsed(){ctrl.totalInstancesUsed=$scope.model.novaLimits.totalInstancesUsed;syncInstanceChartAndLimits();}
function getInstanceCount(){return $scope.model.newInstanceSpec.instance_count;}
function createWatcher(watchExpression,listener){return $scope.$watch(watchExpression,function(newValue,oldValue){if(newValue!==oldValue){listener(newValue);}});}
function syncInstanceChartAndLimits(){updateChart();updateMaxInstanceCount();}
function updateChart(){if($scope.model.newInstanceSpec.instance_count<=0){$scope.model.newInstanceSpec.instance_count=1;}
var data=ctrl.instanceStats.data;var added=$scope.model.newInstanceSpec.instance_count||1;var remaining=Math.max(0,ctrl.maxInstances-ctrl.totalInstancesUsed-added);ctrl.instanceStats.maxLimit=ctrl.maxInstances;data[0].value=ctrl.totalInstancesUsed;data[1].value=added;data[2].value=remaining;var quotaCalc=Math.round((ctrl.totalInstancesUsed+added)/ctrl.maxInstances*100);ctrl.instanceStats.overMax=quotaCalc>100;ctrl.instanceStats.label=quotaCalc+'%';ctrl.instanceStats=angular.extend({},ctrl.instanceStats);}
function updateMaxInstanceCount(){ctrl.maxInstanceCount=ctrl.maxInstances-ctrl.totalInstancesUsed;var instanceCountText=gettext('The instance count must not exceed your quota available of %(maxInstanceCount)s instances');var instanceCountObj={maxInstanceCount:ctrl.maxInstanceCount};ctrl.instanceCountMaxError=interpolate(instanceCountText,instanceCountObj,true);}}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceFlavorController',LaunchInstanceFlavorController);LaunchInstanceFlavorController.$inject=['$scope','horizon.framework.widgets.charts.quotaChartDefaults','launchInstanceModel'];function LaunchInstanceFlavorController($scope,quotaChartDefaults,launchInstanceModel){var ctrl=this;ctrl.defaultIfUndefined=defaultIfUndefined;ctrl.validateFlavor=validateFlavor;ctrl.buildFlavorFacades=buildFlavorFacades;ctrl.updateFlavorFacades=updateFlavorFacades;ctrl.getChartData=getChartData;ctrl.getErrors=getErrors;ctrl.chartTotalInstancesLabel=gettext('Total Instances');ctrl.chartTotalVcpusLabel=gettext('Total VCPUs');ctrl.chartTotalRamLabel=gettext('Total RAM');ctrl.chartTotalVolumeLabel=gettext('Total Volumes');ctrl.chartTotalVolumeStorageLabel=gettext('Total Volume Storage');ctrl.filterFacets=[{label:gettext('Name'),name:'name',singleton:true},{label:gettext('VCPUs'),name:'vcpus',singleton:true},{label:gettext('RAM'),name:'ram',singleton:true},{label:gettext('Public'),name:'isPublic',singleton:true,options:[{label:gettext('No'),key:false},{label:gettext('Yes'),key:true}]}];ctrl.sourcesLabel={image:gettext('image'),snapshot:gettext('snapshot'),volume:gettext('volume')};ctrl.availableFlavorFacades=[];ctrl.displayedAvailableFlavorFacades=[];ctrl.allocatedFlavorFacades=[];ctrl.displayedAllocatedFlavorFacades=[];ctrl.flavors=[];ctrl.metadataDefs=launchInstanceModel.metadataDefs;ctrl.novaLimits={};ctrl.instanceCount=1;ctrl.transferTableModel={allocated:ctrl.allocatedFlavorFacades,displayedAllocated:ctrl.displayedAllocatedFlavorFacades,available:ctrl.availableFlavorFacades,displayedAvailable:ctrl.displayedAvailableFlavorFacades};ctrl.instancesChartData={};ctrl.allocationLimits={maxAllocation:1};var novaLimitsWatcher=$scope.$watch(function(){return launchInstanceModel.novaLimits;},function(newValue,oldValue,scope){var ctrl=scope.selectFlavorCtrl;ctrl.novaLimits=newValue;ctrl.updateFlavorFacades();},true);var flavorsWatcher=$scope.$watchCollection(function(){return launchInstanceModel.flavors;},function(newValue,oldValue,scope){var ctrl=scope.selectFlavorCtrl;ctrl.flavors=newValue;ctrl.updateFlavorFacades();});var instanceCountWatcher=$scope.$watch(function(){return launchInstanceModel.newInstanceSpec.instance_count;},function(newValue,oldValue,scope){if(angular.isDefined(newValue)){var ctrl=scope.selectFlavorCtrl;ctrl.instanceCount=Math.max(1,newValue);ctrl.updateFlavorFacades();ctrl.validateFlavor();}});var facadesWatcher=$scope.$watchCollection("selectFlavorCtrl.allocatedFlavorFacades",function(newValue,oldValue,scope){if(newValue&&newValue.length>0){launchInstanceModel.newInstanceSpec.flavor=newValue[0].flavor;scope.selectFlavorCtrl.validateFlavor();}else{delete launchInstanceModel.newInstanceSpec.flavor;}});var sourceWatcher=$scope.$watchCollection(function(){return launchInstanceModel.newInstanceSpec.source;},function(newValue,oldValue,scope){var ctrl=scope.selectFlavorCtrl;ctrl.source=newValue&&newValue.length?newValue[0]:null;ctrl.updateFlavorFacades();ctrl.validateFlavor();});var cinderLimitsWatcher=$scope.$watch(function(){return launchInstanceModel.cinderLimits;},function(newValue,oldValue,scope){var ctrl=scope.selectFlavorCtrl;ctrl.cinderLimits=newValue;ctrl.updateFlavorFacades();},true);var volumeSizeWatcher=$scope.$watchCollection(function(){return[launchInstanceModel.newInstanceSpec.source_type,launchInstanceModel.newInstanceSpec.vol_size,launchInstanceModel.newInstanceSpec.vol_create];},function(newValue,oldValue){if(!angular.equals(newValue,oldValue)){ctrl.updateFlavorFacades();ctrl.validateFlavor();}});$scope.$on('$destroy',function(){novaLimitsWatcher();flavorsWatcher();instanceCountWatcher();facadesWatcher();sourceWatcher();cinderLimitsWatcher();volumeSizeWatcher();});function defaultIfUndefined(value,defaultValue){return angular.isUndefined(value)?defaultValue:value;}
function validateFlavor(){var allocatedFlavors=ctrl.allocatedFlavorFacades;if(allocatedFlavors&&allocatedFlavors.length>0){var allocatedFlavorFacade=allocatedFlavors[0];var isValid=allocatedFlavorFacade.enabled;$scope.launchInstanceFlavorForm['allocated-flavor'].$setValidity('flavor',isValid);}}
function buildFlavorFacades(){var facade,flavor;for(var i=0;i<ctrl.flavors.length;i++){flavor=ctrl.flavors[i];facade={flavor:flavor,id:flavor.id,name:flavor.name,vcpus:flavor.vcpus,ram:flavor.ram,totalDisk:flavor.disk+flavor['OS-FLV-EXT-DATA:ephemeral'],rootDisk:flavor.disk,ephemeralDisk:flavor['OS-FLV-EXT-DATA:ephemeral'],isPublic:flavor['os-flavor-access:is_public'],extras:flavor.extras};ctrl.availableFlavorFacades.push(facade);}}
function updateFlavorFacades(){if(ctrl.availableFlavorFacades.length!==ctrl.flavors.length){ctrl.buildFlavorFacades();}
var instancesChartData=ctrl.getChartData(ctrl.chartTotalInstancesLabel,ctrl.instanceCount,launchInstanceModel.novaLimits.totalInstancesUsed,launchInstanceModel.novaLimits.maxTotalInstances);for(var i=0;i<ctrl.availableFlavorFacades.length;i++){var facade=ctrl.availableFlavorFacades[i];var createVolume=launchInstanceModel.newInstanceSpec.vol_create;facade.instancesChartData=instancesChartData;facade.vcpusChartData=ctrl.getChartData(ctrl.chartTotalVcpusLabel,ctrl.instanceCount*facade.vcpus,launchInstanceModel.novaLimits.totalCoresUsed,launchInstanceModel.novaLimits.maxTotalCores);facade.ramChartData=ctrl.getChartData(ctrl.chartTotalRamLabel,ctrl.instanceCount*facade.ram,launchInstanceModel.novaLimits.totalRAMUsed,launchInstanceModel.novaLimits.maxTotalRAMSize,"MB");if(launchInstanceModel.cinderLimits){facade.volumeChartData=ctrl.getChartData(ctrl.chartTotalVolumeLabel,createVolume?ctrl.instanceCount:0,launchInstanceModel.cinderLimits.totalVolumesUsed,launchInstanceModel.cinderLimits.maxTotalVolumes);facade.volumeStorageChartData=ctrl.getChartData(ctrl.chartTotalVolumeStorageLabel,createVolume?(ctrl.instanceCount*Math.max(facade.totalDisk,launchInstanceModel.newInstanceSpec.vol_size)):0,launchInstanceModel.cinderLimits.totalGigabytesUsed,launchInstanceModel.cinderLimits.maxTotalVolumeGigabytes,"GiB");}
var errors=ctrl.getErrors(facade.flavor);facade.errors=errors;facade.enabled=Object.keys(errors).length===0;}}
function getChartData(title,added,totalUsed,maxAllowed,unit){var used=ctrl.defaultIfUndefined(totalUsed,0);var allowed=ctrl.defaultIfUndefined(maxAllowed,1);var quotaCalc=Math.round((used+added)/allowed*100);var overMax=quotaCalc>100;var usageData={label:quotaChartDefaults.usageLabel,value:used,colorClass:quotaChartDefaults.usageColorClass};var addedData={label:quotaChartDefaults.addedLabel,value:added,colorClass:quotaChartDefaults.addedColorClass};var remainingData={label:quotaChartDefaults.remainingLabel,value:Math.max(0,allowed-used-added),colorClass:quotaChartDefaults.remainingColorClass};var chartData={title:title,maxLimit:allowed,label:quotaCalc+'%',overMax:overMax,data:[usageData,addedData,remainingData],unit:unit};return chartData;}
function getErrors(flavor){var messages={};var source=ctrl.source;var instanceCount=ctrl.instanceCount;var totalRamUsed=ctrl.defaultIfUndefined(ctrl.novaLimits.totalRAMUsed,0);var maxTotalRam=ctrl.defaultIfUndefined(ctrl.novaLimits.maxTotalRAMSize,0);var availableRam=maxTotalRam-totalRamUsed;var ramRequired=instanceCount*flavor.ram;if(ramRequired>availableRam){messages.ram=gettext('This flavor requires more RAM than your quota allows. Please select a smaller flavor or decrease the instance count.');}
var totalCoresUsed=ctrl.defaultIfUndefined(ctrl.novaLimits.totalCoresUsed,0);var maxTotalCores=ctrl.defaultIfUndefined(ctrl.novaLimits.maxTotalCores,0);var availableCores=maxTotalCores-totalCoresUsed;var coresRequired=instanceCount*flavor.vcpus;if(coresRequired>availableCores){messages.vcpus=gettext('This flavor requires more VCPUs than your quota allows. Please select a smaller flavor or decrease the instance count.');}
var sourceType=launchInstanceModel.newInstanceSpec.source_type;if(source&&sourceType&&(sourceType.type==='image'||sourceType.type==='snapshot'||sourceType.type==='volume')){if(sourceType.type==='volume'&&source.volume_image_metadata){source.min_disk=source.volume_image_metadata.min_disk;source.min_ram=source.volume_image_metadata.min_ram;}
if(source.min_disk>0&&flavor.disk>0&&source.min_disk>flavor.disk){var srcMinDiskMsg=gettext('The selected %(sourceType)s source requires a flavor with at least %(minDisk)s GB of root disk. Select a flavor with a larger root disk or use a different %(sourceType)s source.');messages.disk=interpolate(srcMinDiskMsg,{minDisk:source.min_disk,sourceType:ctrl.sourcesLabel[sourceType.type]},true);}
if(source.min_ram>0&&source.min_ram>flavor.ram){var srcMinRamMsg=gettext('The selected %(sourceType)s source requires a flavor with at least %(minRam)s MB of RAM. Select a flavor with more RAM or use a different %(sourceType)s source.');messages.ram=interpolate(srcMinRamMsg,{minRam:source.min_ram,sourceType:ctrl.sourcesLabel[sourceType.type]},true);}}
return messages;}}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceCreateKeyPairController',LaunchInstanceCreateKeyPairController);LaunchInstanceCreateKeyPairController.$inject=['$uibModalInstance','existingKeypairs','horizon.app.core.openstack-service-api.nova'];function LaunchInstanceCreateKeyPairController($uibModalInstance,existingKeypairs,nova){var ctrl=this;ctrl.submit=submit;ctrl.cancel=cancel;ctrl.doesKeypairExist=doesKeypairExist;ctrl.generate=generate;ctrl.keypair='';ctrl.key_types={'ssh':gettext("SSH Key"),'x509':gettext("X509 Certificate")};ctrl.key_type='ssh';ctrl.keypairExistsError=gettext('Keypair already exists or name contains bad characters.');ctrl.copyPrivateKey=copyPrivateKey;ctrl.onKeyTypeChange=function(keyType){ctrl.key_type=keyType;};function doesKeypairExist(){return exists(ctrl.keypair);}
function generate(){nova.createKeypair({name:ctrl.keypair,key_type:ctrl.key_type}).then(onKeypairCreated);function onKeypairCreated(data){ctrl.createdKeypair=data.data;ctrl.privateKey=ctrl.createdKeypair.private_key;ctrl.publicKey=ctrl.createdKeypair.public_key;}}
function copyPrivateKey(){angular.element('textarea').select();document.execCommand('copy');}
function exists(keypair){return existingKeypairs.indexOf(keypair)!==-1;}
function submit(){$uibModalInstance.close(ctrl.createdKeypair);}
function cancel(){$uibModalInstance.dismiss();}}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceImportKeyPairController',LaunchInstanceImportKeyPairController);LaunchInstanceImportKeyPairController.$inject=['$uibModalInstance','horizon.app.core.openstack-service-api.nova','horizon.framework.widgets.toast.service','horizon.dashboard.project.workflow.launch-instance.basePath'];function LaunchInstanceImportKeyPairController($uibModalInstance,novaAPI,toastService,basePath){var ctrl=this;ctrl.submit=submit;ctrl.cancel=cancel;ctrl.model={name:'',public_key:'',key_type:'ssh'};ctrl.path=basePath+'keypair/';ctrl.title=gettext('Public Key');ctrl.key_types={'ssh':gettext("SSH Key"),'x509':gettext("X509 Certificate")};ctrl.onKeyTypeChange=function(keyType){ctrl.model.key_type=keyType;};function submit(){novaAPI.createKeypair(ctrl.model).then(successCallback);}
function successCallback(data){$uibModalInstance.close(data.data);var successMsg=gettext('Successfully imported key pair %(name)s.');toastService.add('success',interpolate(successMsg,{name:data.data.name},true));}
function cancel(){$uibModalInstance.dismiss();}}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceKeypairController',LaunchInstanceKeypairController);LaunchInstanceKeypairController.$inject=['horizon.dashboard.project.workflow.launch-instance.basePath','launchInstanceModel','$uibModal','horizon.framework.widgets.toast.service','horizon.app.core.openstack-service-api.settings'];function LaunchInstanceKeypairController(basePath,launchInstanceModel,$uibModal,toastService,settingsService){var ctrl=this;ctrl.isKeypairCreated=false;ctrl.createdKeypair={name:"",regenerateUrl:""};ctrl.allocateNewKeyPair=allocateNewKeyPair;ctrl.createKeyPair=createKeyPair;ctrl.importKeyPair=importKeyPair;ctrl.setKeypairRequired=setKeypairRequired;ctrl.tableData={available:launchInstanceModel.keypairs,allocated:launchInstanceModel.newInstanceSpec.key_pair};ctrl.availableTableConfig={selectAll:false,trackId:'id',detailsTemplateUrl:basePath+'keypair/keypair-details.html',columns:[{id:'name',title:gettext('Name'),priority:1},{id:'type',title:gettext('Type'),priority:2},{id:'fingerprint',title:gettext('Fingerprint'),priority:3}]};ctrl.allocatedTableConfig=angular.copy(ctrl.availableTableConfig);ctrl.allocatedTableConfig.noItemsMessage=gettext('Select a key pair from the available key pairs below.');ctrl.filterFacets=[{label:gettext('Name'),name:'name',singleton:true},{label:gettext('Fingerprint'),name:'fingerprint',singleton:true},{label:gettext('Type'),name:'type',singleton:true}];ctrl.tableLimits={maxAllocation:1};ctrl.isKeypairRequired=0;settingsService.getSetting('OPENSTACK_HYPERVISOR_FEATURES.requires_keypair').then(setKeypairRequired);function allocateNewKeyPair(newKeyPair){if(ctrl.tableData.allocated.length===0){ctrl.tableData.allocated.push(newKeyPair);}}
function createKeyPair(){$uibModal.open({templateUrl:basePath+'keypair/create-keypair.html',controller:'LaunchInstanceCreateKeyPairController as ctrl',windowClass:'modal-dialog-wizard',resolve:{existingKeypairs:getKeypairs}}).result.then(notifyUserAndAssign);}
function notifyUserAndAssign(newKeypair){toastService.add('success',interpolate(gettext('Created keypair: %s'),[newKeypair.name]));assignKeypair(newKeypair);ctrl.createdKeypair=newKeypair;ctrl.isKeypairCreated=true;}
function importKeyPair(){$uibModal.open({templateUrl:basePath+'keypair/import-keypair.html',controller:'LaunchInstanceImportKeyPairController as ctrl',windowClass:'modal-dialog-wizard'}).result.then(assignKeypair);}
function assignKeypair(keypair){keypair.id=keypair.name;launchInstanceModel.keypairs.push(keypair);ctrl.allocateNewKeyPair(keypair);}
function getKeypairs(){return launchInstanceModel.keypairs.map(getName);}
function getName(item){return item.name;}
function setKeypairRequired(setting){ctrl.isKeypairRequired=setting?1:0;}}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceModalController',LaunchInstanceModalController);LaunchInstanceModalController.$inject=['horizon.dashboard.project.workflow.launch-instance.modal.service'];function LaunchInstanceModalController(modalService){var ctrl=this;ctrl.openLaunchInstanceWizard=openLaunchInstanceWizard;function openLaunchInstanceWizard(launchContext){modalService.open(launchContext);}}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').factory('horizon.dashboard.project.workflow.launch-instance.modal.service',LaunchInstanceModalService);LaunchInstanceModalService.$inject=['$uibModal','$window','horizon.dashboard.project.workflow.launch-instance.modal-spec'];function LaunchInstanceModalService($uibModal,$window,modalSpec){var service={open:open};return service;function open(launchContext){var localSpec={resolve:{launchContext:function(){return launchContext;}}};angular.extend(localSpec,modalSpec);var launchInstanceModal=$uibModal.open(localSpec);var handleModalClose=function(redirectPropertyName){return function(){if(launchContext&&launchContext[redirectPropertyName]){$window.location.href=launchContext[redirectPropertyName];}};};return launchInstanceModal.result.then(handleModalClose('successUrl'),handleModalClose('dismissUrl'));}}})();(function(){'use strict';var push=Array.prototype.push;var noop=angular.noop;angular.module('horizon.dashboard.project.workflow.launch-instance').factory('launchInstanceModel',launchInstanceModel);launchInstanceModel.$inject=['$q','$log','horizon.app.core.openstack-service-api.cinder','horizon.app.core.openstack-service-api.glance','horizon.app.core.openstack-service-api.neutron','horizon.app.core.openstack-service-api.nova','horizon.app.core.openstack-service-api.novaExtensions','horizon.app.core.openstack-service-api.security-group','horizon.app.core.openstack-service-api.serviceCatalog','horizon.app.core.openstack-service-api.settings','horizon.dashboard.project.workflow.launch-instance.boot-source-types','horizon.framework.widgets.toast.service','horizon.app.core.openstack-service-api.policy','horizon.dashboard.project.workflow.launch-instance.step-policy'];function launchInstanceModel($q,$log,cinderAPI,glanceAPI,neutronAPI,novaAPI,novaExtensions,securityGroup,serviceCatalog,settings,bootSourceTypes,toast,policy,stepPolicy){var initPromise;var model={initializing:false,initialized:false,newInstanceSpec:{},availabilityZones:[],flavors:[],allowedBootSources:[],images:[],allowCreateVolumeFromImage:false,imageSnapshots:[],keypairs:[],metadataDefs:{flavor:null,image:null,volume:null,instance:null,hints:null},networks:[],ports:[],neutronEnabled:false,novaLimits:{},securityGroups:[],serverGroups:[],volumeBootable:false,volumes:[],volumeSnapshots:[],metadataTree:null,hintsTree:null,loaded:{availabilityZones:false},initialize:initialize,createInstance:createInstance};function initializeNewInstanceSpec(){model.newInstanceSpec={availability_zone:null,admin_pass:null,config_drive:false,description:null,user_data:'',disk_config:'AUTO',flavor:null,instance_count:1,key_pair:[],name:null,networks:[],ports:[],scheduler_hints:{},security_groups:[],server_groups:[],source_type:null,source:[],create_volume_default:true,hide_create_volume:false,vol_create:false,vol_delete_on_instance_delete:false,vol_size:1};}
function initializeLoadStatus(){angular.forEach(model.loaded,function(val,key){model.loaded[key]=false;});}
function initialize(deep){var deferred,promise;initializeNewInstanceSpec();initializeLoadStatus();if(model.initializing){promise=initPromise;}else if(model.initialized&&!deep){deferred=$q.defer();promise=deferred.promise;deferred.resolve();}else{model.initializing=true;model.allowedBootSources.length=0;var launchInstanceDefaults=settings.getSetting('LAUNCH_INSTANCE_DEFAULTS');promise=$q.all([novaAPI.getAvailabilityZones().then(onGetAvailabilityZones).finally(onGetAvailabilityZonesComplete),novaAPI.getFlavors({is_public:true,get_extras:true}).then(onGetFlavors,noop),novaAPI.getKeypairs().then(onGetKeypairs,noop),novaAPI.getLimits(true).then(onGetNovaLimits,noop),securityGroup.query().then(onGetSecurityGroups,noop),serviceCatalog.ifTypeEnabled('network').then(getNetworks,noop),launchInstanceDefaults.then(addImageSourcesIfEnabled,noop),launchInstanceDefaults.then(setDefaultValues,noop),launchInstanceDefaults.then(addVolumeSourcesIfEnabled,noop)]);promise.then(onInitSuccess,onInitFail);}
return promise;}
function onInitSuccess(){model.initializing=false;model.initialized=true;getServerGroups();getMetadataDefinitions();}
function onInitFail(){model.initializing=false;model.initialized=false;}
function setDefaultValues(defaults){if(!defaults){return;}
if('config_drive'in defaults){model.newInstanceSpec.config_drive=defaults.config_drive;}
if('create_volume'in defaults){model.newInstanceSpec.create_volume_default=defaults.create_volume;}
if('hide_create_volume'in defaults){model.newInstanceSpec.hide_create_volume=defaults.hide_create_volume;}}
function createInstance(){var finalSpec=angular.copy(model.newInstanceSpec);cleanNullProperties(finalSpec);setFinalSpecBootsource(finalSpec);setFinalSpecFlavor(finalSpec);setFinalSpecNetworks(finalSpec);setFinalSpecPorts(finalSpec);setFinalSpecKeyPairs(finalSpec);setFinalSpecSecurityGroups(finalSpec);setFinalSpecServerGroup(finalSpec);setFinalSpecSchedulerHints(finalSpec);setFinalSpecMetadata(finalSpec);return novaAPI.createServer(finalSpec).then(successMessage);}
function successMessage(){var numberInstances=model.newInstanceSpec.instance_count;var message=ngettext('Scheduled creation of %s instance.','Scheduled creation of %s instances.',numberInstances);toast.add('info',interpolate(message,[numberInstances]));}
function cleanNullProperties(finalSpec){for(var key in finalSpec){if(finalSpec.hasOwnProperty(key)&&finalSpec[key]===null){delete finalSpec[key];}}}
function onGetAvailabilityZones(data){model.availabilityZones.length=0;push.apply(model.availabilityZones,data.data.items.filter(function(zone){return zone.zoneState&&zone.zoneState.available;}).map(function(zone){return{label:zone.zoneName,value:zone.zoneName};}));if(model.availabilityZones.length===1){model.newInstanceSpec.availability_zone=model.availabilityZones[0].value;}else if(model.availabilityZones.length>1){model.availabilityZones.unshift({label:gettext("Any Availability Zone"),value:""});model.newInstanceSpec.availability_zone=model.availabilityZones[0].value;}}
function onGetAvailabilityZonesComplete(){model.loaded.availabilityZones=true;}
function onGetFlavors(data){model.flavors.length=0;push.apply(model.flavors,data.data.items);}
function setFinalSpecFlavor(finalSpec){if(finalSpec.flavor){finalSpec.flavor_id=finalSpec.flavor.id;}else{delete finalSpec.flavor_id;}
delete finalSpec.flavor;}
function onGetKeypairs(data){angular.extend(model.keypairs,data.data.items.map(function(e){e.keypair.id='li_keypair:'+e.keypair.name;return e.keypair;}));if(data.data.items.length===1){model.newInstanceSpec.key_pair.push(data.data.items[0].keypair);}}
function setFinalSpecKeyPairs(finalSpec){if(!finalSpec.key_name&&finalSpec.key_pair.length===1){finalSpec.key_name=finalSpec.key_pair[0].name;}else if(!finalSpec.key_name){finalSpec.key_name=null;}
delete finalSpec.key_pair;}
function onGetSecurityGroups(data){model.securityGroups.length=0;angular.forEach(data.data.items,function addDefault(item){if(item.name==='default'){model.newInstanceSpec.security_groups.push(item);}});push.apply(model.securityGroups,data.data.items);}
function setFinalSpecSecurityGroups(finalSpec){var securityGroupIds=[];finalSpec.security_groups.forEach(function(securityGroup){if(model.neutronEnabled){securityGroupIds.push(securityGroup.id);}else{securityGroupIds.push(securityGroup.name);}});finalSpec.security_groups=securityGroupIds;}
function getServerGroups(){policy.ifAllowed(stepPolicy.serverGroups).then(function(){novaAPI.getServerGroups().then(onGetServerGroups,noop);},noop);}
function onGetServerGroups(data){model.serverGroups.length=0;push.apply(model.serverGroups,data.data.items);}
function setFinalSpecServerGroup(finalSpec){if(finalSpec.server_groups.length>0){finalSpec.scheduler_hints.group=finalSpec.server_groups[0].id;}
delete finalSpec.server_groups;}
function getNetworks(){return neutronAPI.getNetworks().then(onGetNetworks,noop).then(getPorts,noop);}
function onGetNetworks(data){model.neutronEnabled=true;model.networks.length=0;push.apply(model.networks,data.data.items.filter(function(net){return net.subnets.length>0;}));if(model.networks.length===1){model.newInstanceSpec.networks.push(model.networks[0]);}
return data;}
function setFinalSpecNetworks(finalSpec){finalSpec.nics=[];finalSpec.networks.forEach(function(network){finalSpec.nics.push({"net-id":network.id,"v4-fixed-ip":""});});delete finalSpec.networks;}
function getPorts(networks){model.ports.length=0;networks.data.items.forEach(function(network){return neutronAPI.getPorts({network_id:network.id}).then(function(ports){onGetPorts(ports,network);},noop);});}
function onGetPorts(networkPorts,network){var ports=[];networkPorts.data.items.forEach(function(port){if(port.device_owner===""&&port.admin_state==="UP"){port.subnet_names=getPortSubnets(port,network.subnets);port.network_name=network.name;if(!port.hasOwnProperty("trunk_id")){ports.push(port);}}});push.apply(model.ports,ports);}
function getPortSubnets(port,subnets){var subnetNames={};port.fixed_ips.forEach(function(ip){subnets.forEach(function(subnet){if(ip.subnet_id===subnet.id){subnetNames[ip.ip_address]=subnet.name;}});});return subnetNames;}
function setFinalSpecPorts(finalSpec){finalSpec.ports.forEach(function(port){finalSpec.nics.push({"port-id":port.id});});delete finalSpec.ports;}
function addImageSourcesIfEnabled(config){var allEnabled=!config;var enabledImage=allEnabled||!config.disable_image;var enabledSnapshot=allEnabled||!config.disable_instance_snapshot;if(enabledImage||enabledSnapshot){var filter={status:'active',sort_key:'name',sort_dir:'asc'};glanceAPI.getImages(filter).then(function(data){onGetImageSources(data,enabledImage,enabledSnapshot);});}}
function addVolumeSourcesIfEnabled(config){var volumeDeferred=$q.defer();var volumeSnapshotDeferred=$q.defer();var absoluteLimitsDeferred=$q.defer();serviceCatalog.ifTypeEnabled('volumev2').then(onVolumeServiceEnabled,onCheckVolumeV3);function onCheckVolumeV3(){serviceCatalog.ifTypeEnabled('volumev3').then(onVolumeServiceEnabled,resolvePromises);}
function onVolumeServiceEnabled(){model.volumeBootable=true;novaExtensions.ifNameEnabled('BlockDeviceMappingV2Boot').then(onBootToVolumeSupported);if(!config||!config.disable_volume){getVolumes().then(resolveVolumes,failVolumes);getAbsoluteLimits().then(resolveAbsoluteLimitsDeferred,resolveAbsoluteLimitsDeferred);}else{resolveVolumes();resolveAbsoluteLimitsDeferred();}
if(!config||!config.disable_volume_snapshot){getVolumeSnapshots().then(resolveVolumeSnapshots,failVolumeSnapshots);}else{resolveVolumeSnapshots();}}
function onBootToVolumeSupported(){model.allowCreateVolumeFromImage=true;}
function getVolumes(){return cinderAPI.getVolumes({status:'available',bootable:1}).then(onGetVolumes);}
function getAbsoluteLimits(){return cinderAPI.getAbsoluteLimits().then(onGetCinderLimits);}
function getVolumeSnapshots(){return cinderAPI.getVolumeSnapshots({status:'available'}).then(onGetVolumeSnapshots);}
function resolvePromises(){volumeDeferred.resolve();volumeSnapshotDeferred.resolve();absoluteLimitsDeferred.resolve();}
function resolveVolumes(){volumeDeferred.resolve();}
function failVolumes(){volumeDeferred.resolve();}
function resolveVolumeSnapshots(){volumeSnapshotDeferred.resolve();}
function failVolumeSnapshots(){volumeSnapshotDeferred.resolve();}
function resolveAbsoluteLimitsDeferred(){absoluteLimitsDeferred.resolve();}
return $q.all([volumeDeferred.promise,volumeSnapshotDeferred.promise,absoluteLimitsDeferred.promise]);}
function isBootableImageType(image){return bootSourceTypes.NON_BOOTABLE_IMAGE_TYPES.indexOf(image.container_format)<0;}
function getImageType(image){if(image===null||!angular.isDefined(image.properties)||!(angular.isDefined(image.properties.image_type)||angular.isDefined(image.properties.block_device_mapping))){return'image';}
return image.properties.image_type||angular.fromJson(image.properties.block_device_mapping)[0].source_type||'image';}
function isValidImage(image){return isBootableImageType(image)&&(!image.properties||image.properties.image_type!=='snapshot');}
function isValidSnapshot(image){return getImageType(image)==='snapshot'&&isBootableImageType(image);}
function onGetImageSources(data,enabledImage,enabledSnapshot){model.imageSnapshots.length=0;model.images.length=0;angular.forEach(data.data.items,function(image){if(isValidSnapshot(image)&&enabledSnapshot){model.imageSnapshots.push(image);}else if(isValidImage(image)&&enabledImage){model.images.push(image);}});if(enabledImage){addAllowedBootSource(model.images,bootSourceTypes.IMAGE,gettext('Image'));}
if(enabledSnapshot){addAllowedBootSource(model.imageSnapshots,bootSourceTypes.INSTANCE_SNAPSHOT,gettext('Instance Snapshot'));}}
function onGetVolumes(data){model.volumes.length=0;push.apply(model.volumes,data.data.items);addAllowedBootSource(model.volumes,bootSourceTypes.VOLUME,gettext('Volume'));}
function onGetVolumeSnapshots(data){cinderAPI.getVolumes({bootable:1}).then(function(volumes){onGetBootableVolumeSnapshots(volumes.data.items,data.data.items);});}
function onGetBootableVolumeSnapshots(bootableVolumes,volumeSnapshots){var bootableVolumeIds=[];bootableVolumes.forEach(function(volume){bootableVolumeIds.push(volume.id);});model.volumeSnapshots.length=0;push.apply(model.volumeSnapshots,volumeSnapshots.filter(function(volumeSnapshot){return bootableVolumeIds.indexOf(volumeSnapshot.volume_id)!==-1;}));addAllowedBootSource(model.volumeSnapshots,bootSourceTypes.VOLUME_SNAPSHOT,gettext('Volume Snapshot'));}
function addAllowedBootSource(rawTypes,type,label){if(rawTypes){model.allowedBootSources.push({type:type,label:label});model.allowedBootSources.sort(function(a,b){return a.type>b.type;});}}
function setFinalSpecBootsource(finalSpec){finalSpec.source_id=finalSpec.source&&finalSpec.source[0]&&finalSpec.source[0].id;delete finalSpec.source;switch(finalSpec.source_type.type){case bootSourceTypes.IMAGE:setFinalSpecBootImageToVolume(finalSpec);break;case bootSourceTypes.INSTANCE_SNAPSHOT:setFinalSpecBootImageToVolume(finalSpec);break;case bootSourceTypes.VOLUME:setFinalSpecBootFromVolumeDevice(finalSpec,'volume');break;case bootSourceTypes.VOLUME_SNAPSHOT:setFinalSpecBootFromVolumeDevice(finalSpec,'snapshot');break;default:$log.error("Unknown source type: "+finalSpec.source_type);}
delete finalSpec.source_type;delete finalSpec.vol_create;delete finalSpec.vol_delete_on_instance_delete;delete finalSpec.vol_size;}
function setFinalSpecBootImageToVolume(finalSpec){if(finalSpec.vol_create){finalSpec.block_device_mapping_v2=[];finalSpec.block_device_mapping_v2.push({'source_type':bootSourceTypes.IMAGE,'destination_type':bootSourceTypes.VOLUME,'delete_on_termination':finalSpec.vol_delete_on_instance_delete,'uuid':finalSpec.source_id,'boot_index':'0','volume_size':finalSpec.vol_size});finalSpec.source_id=null;}}
function setFinalSpecBootFromVolumeDevice(finalSpec,sourceType){finalSpec.block_device_mapping_v2=[];finalSpec.block_device_mapping_v2.push({'source_type':sourceType,'destination_type':bootSourceTypes.VOLUME,'delete_on_termination':finalSpec.vol_delete_on_instance_delete,'uuid':finalSpec.source_id,'boot_index':'0'});finalSpec.source_id='';}
function onGetCinderLimits(response){model.cinderLimits=response.data;}
function onGetNovaLimits(data){angular.extend(model.novaLimits,data.data);}
function setFinalSpecSchedulerHints(finalSpec){if(model.hintsTree){var hints=model.hintsTree.getExisting();if(!angular.equals({},hints)){angular.forEach(hints,function(value,key){finalSpec.scheduler_hints[key]=value+'';});}}}
function setFinalSpecMetadata(finalSpec){if(model.metadataTree){var meta=model.metadataTree.getExisting();if(!angular.equals({},meta)){angular.forEach(meta,function(value,key){meta[key]=value+'';});finalSpec.meta=meta;}}}
function getMetadataDefinitions(){var resourceTypes={flavor:['OS::Nova::Flavor',''],image:['OS::Glance::Image',''],volume:['OS::Cinder::Volumes',''],instance:['OS::Nova::Server','metadata']};angular.forEach(resourceTypes,applyForResourceType);$q.all([settings.ifEnabled('LAUNCH_INSTANCE_DEFAULTS.enable_scheduler_hints',true,true),policy.ifAllowed(stepPolicy.schedulerHints)]).then(function getSchedulerHints(){applyForResourceType(['OS::Nova::Server','scheduler_hints'],'hints');});}
function applyForResourceType(resourceType,key){glanceAPI.getNamespaces({resource_type:resourceType[0],properties_target:resourceType[1]},true).then(function(data){var namespaces=data.data.items;model.metadataDefs[key]=namespaces;});}
return model;}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceWizardController',LaunchInstanceWizardController);LaunchInstanceWizardController.$inject=['$scope','launchInstanceModel','horizon.dashboard.project.workflow.launch-instance.workflow'];function LaunchInstanceWizardController($scope,launchInstanceModel,launchInstanceWorkflow){$scope.workflow=launchInstanceWorkflow;$scope.model=launchInstanceModel;$scope.model.initialize(true);$scope.submit=$scope.model.createInstance;}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').factory('horizon.dashboard.project.workflow.launch-instance.workflow',launchInstanceWorkflow);launchInstanceWorkflow.$inject=['horizon.dashboard.project.workflow.launch-instance.basePath','horizon.dashboard.project.workflow.launch-instance.step-policy','horizon.app.core.workflow.factory'];function launchInstanceWorkflow(basePath,stepPolicy,dashboardWorkflow){return dashboardWorkflow({title:gettext('Launch Instance'),steps:[{id:'details',title:gettext('Details'),templateUrl:basePath+'details/details.html',helpUrl:basePath+'details/details.help.html',formName:'launchInstanceDetailsForm'},{id:'source',title:gettext('Source'),templateUrl:basePath+'source/source.html',helpUrl:basePath+'source/source.help.html',formName:'launchInstanceSourceForm'},{id:'flavor',title:gettext('Flavor'),templateUrl:basePath+'flavor/flavor.html',helpUrl:basePath+'flavor/flavor.help.html',formName:'launchInstanceFlavorForm'},{id:'networks',title:gettext('Networks'),templateUrl:basePath+'network/network.html',helpUrl:basePath+'network/network.help.html',formName:'launchInstanceNetworkForm',requiredServiceTypes:['network']},{id:'ports',title:gettext('Network Ports'),templateUrl:basePath+'networkports/ports.html',helpUrl:basePath+'networkports/ports.help.html',formName:'launchInstanceNetworkPortForm',requiredServiceTypes:['network']},{id:'secgroups',title:gettext('Security Groups'),templateUrl:basePath+'security-groups/security-groups.html',helpUrl:basePath+'security-groups/security-groups.help.html',formName:'launchInstanceAccessAndSecurityForm',requiredServiceTypes:['network']},{id:'keypair',title:gettext('Key Pair'),templateUrl:basePath+'keypair/keypair.html',helpUrl:basePath+'keypair/keypair.help.html',formName:'launchInstanceKeypairForm',novaExtension:'Keypairs'},{id:'configuration',title:gettext('Configuration'),templateUrl:basePath+'configuration/configuration.html',helpUrl:basePath+'configuration/configuration.help.html',formName:'launchInstanceConfigurationForm'},{id:'servergroups',title:gettext('Server Groups'),templateUrl:basePath+'server-groups/server-groups.html',helpUrl:basePath+'server-groups/server-groups.help.html',formName:'launchInstanceServerGroupsForm',policy:stepPolicy.serverGroups,novaExtension:'ServerGroups'},{id:'hints',title:gettext('Scheduler Hints'),templateUrl:basePath+'scheduler-hints/scheduler-hints.html',helpUrl:basePath+'scheduler-hints/scheduler-hints.help.html',formName:'launchInstanceSchedulerHintsForm',policy:stepPolicy.schedulerHints,setting:'LAUNCH_INSTANCE_DEFAULTS.enable_scheduler_hints',novaExtension:'SchedulerHints'},{id:'metadata',title:gettext('Metadata'),templateUrl:basePath+'metadata/metadata.html',helpUrl:basePath+'metadata/metadata.help.html',formName:'launchInstanceMetadataForm'}],btnText:{finish:gettext('Launch Instance')},btnIcon:{finish:'fa-cloud-upload'}});}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceNetworkController',LaunchInstanceNetworkController);LaunchInstanceNetworkController.$inject=['$scope','horizon.framework.widgets.action-list.button-tooltip.row-warning.service','launchInstanceModel'];function LaunchInstanceNetworkController($scope,tooltipService,launchInstanceModel){var ctrl=this;ctrl.networkStatuses={'ACTIVE':gettext('Active'),'DOWN':gettext('Down')};ctrl.networkAdminStates={'UP':gettext('Up'),'DOWN':gettext('Down')};ctrl.tableDataMulti={available:$scope.model.networks,allocated:$scope.model.newInstanceSpec.networks,displayedAvailable:[],displayedAllocated:[],minItems:1};ctrl.tableLimits={maxAllocation:-1};ctrl.tableHelpText={allocHelpText:gettext('Select networks from those listed below.'),availHelpText:gettext('Select at least one network')};ctrl.tooltipModel=tooltipService;ctrl.networkFacets=[{label:gettext('Name'),name:'name',singleton:true},{label:gettext('Shared'),name:'shared',singleton:true,options:[{label:gettext('No'),key:false},{label:gettext('Yes'),key:true}]},{label:gettext('Admin State'),name:'admin_state',singleton:true,options:[{label:gettext('Up'),key:"UP"},{label:gettext('Down'),key:"DOWN"}]},{label:gettext('Status'),name:'status',singleton:true,options:[{label:gettext('Active'),key:"ACTIVE"},{label:gettext('Down'),key:"DOWN"}]}];function getPorts(){return launchInstanceModel.newInstanceSpec.ports;}
function toggleNetworksRequirement(newValue){if(newValue.length>0){ctrl.tableDataMulti.minItems=0;}
if(newValue.length===0){ctrl.tableDataMulti.minItems=1;}}
var portWatcher=$scope.$watch(getPorts,toggleNetworksRequirement,true);$scope.$on('$destroy',function(){portWatcher();});}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceNetworkPortController',LaunchInstanceNetworkPortController);LaunchInstanceNetworkPortController.$inject=['$scope','horizon.framework.widgets.action-list.button-tooltip.row-warning.service'];function LaunchInstanceNetworkPortController($scope,tooltipService){var ctrl=this;ctrl.portStatuses={'ACTIVE':gettext('Active'),'DOWN':gettext('Down')};ctrl.portAdminStates={'UP':gettext('Up'),'DOWN':gettext('Down')};ctrl.vnicTypes={'normal':gettext('Normal'),'direct':gettext('Direct'),'direct-physical':gettext('Direct Physical'),'macvtap':gettext('MacVTap'),'baremetal':gettext('Bare Metal'),'virtio-forwarder':gettext('Virtio Forwarder')};ctrl.tableDataMulti={available:$scope.model.ports,allocated:$scope.model.newInstanceSpec.ports,displayedAvailable:[],displayedAllocated:[]};ctrl.tableLimits={maxAllocation:-1};ctrl.tableHelpText={allocHelpText:gettext('Select ports from those listed below.')};ctrl.tooltipModel=tooltipService;ctrl.nameOrID=function nameOrId(data){return angular.isDefined(data.name)&&data.name!==''?data.name:data.id;};}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceSchedulerHintsController',LaunchInstanceSchedulerHintsController);LaunchInstanceSchedulerHintsController.$inject=['horizon.framework.util.i18n.gettext'];function LaunchInstanceSchedulerHintsController(gettext){var ctrl=this;ctrl.text={help:gettext('You can specify scheduler hints by moving items from the left column to the right column. In the left column there are scheduler hint definitions from the Glance Metadata Catalog. Use the "Custom" option to add scheduler hints with the key of your choice.'),available:gettext('Available Scheduler Hints'),existing:gettext('Existing Scheduler Hints'),noAvailable:gettext('No available scheduler hints'),noExisting:gettext('No existing scheduler hints')};}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceSecurityGroupsController',LaunchInstanceSecurityGroupsController);LaunchInstanceSecurityGroupsController.$inject=['launchInstanceModel','horizon.dashboard.project.workflow.launch-instance.basePath'];function LaunchInstanceSecurityGroupsController(launchInstanceModel,basePath){var ctrl=this;ctrl.tableData={available:launchInstanceModel.securityGroups,allocated:launchInstanceModel.newInstanceSpec.security_groups,displayedAvailable:[],displayedAllocated:[]};ctrl.tableDetails=basePath+'security-groups/security-group-details.html';ctrl.tableHelp={noneAllocText:gettext('Select one or more security groups from the available groups below.'),availHelpText:gettext('Select one or more')};ctrl.tableLimits={maxAllocation:-1};ctrl.filterFacets=[{label:gettext('Name'),name:'name',singleton:true},{label:gettext('Description'),name:'description',singleton:true}];}})();(function(){'use strict';angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceServerGroupsController',LaunchInstanceServerGroupsController);LaunchInstanceServerGroupsController.$inject=['launchInstanceModel'];function LaunchInstanceServerGroupsController(launchInstanceModel){var ctrl=this;ctrl.policies={'affinity':gettext('Affinity'),'anti-affinity':gettext('Anti Affinity'),'soft-anti-affinity':gettext('Soft Anti Affinity'),'soft-affinity':gettext('Soft Affinity')};ctrl.tableData={available:launchInstanceModel.serverGroups,allocated:launchInstanceModel.newInstanceSpec.server_groups,displayedAvailable:[],displayedAllocated:[]};ctrl.tableHelp={noneAllocText:gettext('Select a server group from the available groups below.'),availHelpText:gettext('Select one')};ctrl.tableLimits={maxAllocation:1};}})();(function(){'use strict';var push=[].push;angular.module('horizon.dashboard.project.workflow.launch-instance').controller('LaunchInstanceSourceController',LaunchInstanceSourceController);LaunchInstanceSourceController.$inject=['$scope','horizon.dashboard.project.workflow.launch-instance.boot-source-types','bytesFilter','dateFilter','decodeFilter','diskFormatFilter','gbFilter','horizon.dashboard.project.workflow.launch-instance.basePath','horizon.framework.widgets.transfer-table.events','horizon.framework.widgets.magic-search.events'];function LaunchInstanceSourceController($scope,bootSourceTypes,bytesFilter,dateFilter,decodeFilter,diskFormatFilter,gbFilter,basePath,events,magicSearchEvents){var ctrl=this;ctrl.volumeSizeError=gettext('Volume size is required and must be an integer');ctrl.bootSourceTypeError=gettext('Volumes can only be attached to 1 active instance at a time. Please either set your instance count to 1 or select a different source type.');ctrl.toggleButtonOptions=[{label:gettext('Yes'),value:true},{label:gettext('No'),value:false}];ctrl.updateBootSourceSelection=updateBootSourceSelection;var selection=ctrl.selection=$scope.model.newInstanceSpec.source;ctrl.tableHeadCells=[];ctrl.tableBodyCells=[];ctrl.tableData={available:[],allocated:selection,displayedAvailable:[],displayedAllocated:[]};ctrl.helpText={};ctrl.sourceDetails=basePath+'source/source-details.html';var bootSources={image:{available:$scope.model.images,allocated:selection,displayedAvailable:$scope.model.images,displayedAllocated:selection},snapshot:{available:$scope.model.imageSnapshots,allocated:selection,displayedAvailable:[],displayedAllocated:selection},volume:{available:$scope.model.volumes,allocated:selection,displayedAvailable:[],displayedAllocated:selection},volume_snapshot:{available:$scope.model.volumeSnapshots,allocated:selection,displayedAvailable:[],displayedAllocated:selection}};var diskFormats=[{label:gettext('AKI'),key:'aki'},{label:gettext('AMI'),key:'ami'},{label:gettext('ARI'),key:'ari'},{label:gettext('Docker'),key:'docker'},{label:gettext('ISO'),key:'iso'},{label:gettext('OVA'),key:'ova'},{label:gettext('QCOW2'),key:'qcow2'},{label:gettext('RAW'),key:'raw'},{label:gettext('VDI'),key:'vdi'},{label:gettext('VHD'),key:'vhd'},{label:gettext('VMDK'),key:'vmdk'}];var tableHeadCellsMap={image:[{text:gettext('Name')},{text:gettext('Updated')},{text:gettext('Size')},{text:gettext('Type')},{text:gettext('Visibility')}],snapshot:[{text:gettext('Name')},{text:gettext('Updated')},{text:gettext('Size')},{text:gettext('Type')},{text:gettext('Visibility')}],volume:[{text:gettext('Name')},{text:gettext('Description')},{text:gettext('Size')},{text:gettext('Type')},{text:gettext('Availability Zone')}],volume_snapshot:[{text:gettext('Name')},{text:gettext('Description')},{text:gettext('Size')},{text:gettext('Created')},{text:gettext('Status')}]};var _visibilitymap={'public':gettext('Public'),'private':gettext('Private'),'shared':gettext('Shared'),'community':gettext('Community')};var tableBodyCellsMap={image:[{key:'name',classList:['hi-light','word-break']},{key:'updated_at',filter:dateFilter,filterArg:'short'},{key:'size',filter:bytesFilter,classList:['number']},{key:'disk_format',filter:diskFormatFilter,filterRawData:true},{key:'visibility',filter:decodeFilter,filterArg:_visibilitymap}],snapshot:[{key:'name',classList:['hi-light','word-break']},{key:'updated_at',filter:dateFilter,filterArg:'short'},{key:'size',filter:bytesFilter,classList:['number']},{key:'disk_format',filter:diskFormatFilter,filterRawData:true},{key:'visibility',filter:decodeFilter,filterArg:_visibilitymap}],volume:[{key:'name',classList:['hi-light','word-break']},{key:'description'},{key:'size',filter:gbFilter,classList:['number']},{key:'volume_image_metadata',filter:diskFormatFilter},{key:'availability_zone'}],volume_snapshot:[{key:'name',classList:['hi-light','word-break']},{key:'description'},{key:'size',filter:gbFilter,classList:['number']},{key:'created_at',filter:dateFilter,filterArg:'short'},{key:'status'}]};ctrl.sortByField=[];var sortFunction=function(columnIndex,comparedObject){var cell=tableBodyCellsMap[ctrl.currentBootSource];var key=cell[columnIndex].key;return comparedObject[key];};for(var i=0;i<5;++i){ctrl.sortByField.push(sortFunction.bind(null,i));}
ctrl.sourceFacets=[];var facets={created:{label:gettext('Created'),name:'created_at',singleton:true},description:{label:gettext('Description'),name:'description',singleton:true},encrypted:{label:gettext('Encrypted'),name:'encrypted',singleton:true,options:[{label:gettext('Yes'),key:'true'},{label:gettext('No'),key:'false'}]},name:{label:gettext('Name'),name:'name',singleton:true},size:{label:gettext('Size'),name:'size',singleton:true},status:{label:gettext('Status'),name:'status',singleton:true,options:[{label:gettext('Available'),key:'available'},{label:gettext('Creating'),key:'creating'},{label:gettext('Deleting'),key:'deleting'},{label:gettext('Error'),key:'error'},{label:gettext('Error Deleting'),key:'error_deleting'}]},type:{label:gettext('Type'),name:'disk_format',singleton:true,options:diskFormats},updated:{label:gettext('Updated'),name:'updated_at',singleton:true},visibility:{label:gettext('Visibility'),name:'visibility',singleton:true,options:[{label:gettext('Public'),key:'public'},{label:gettext('Private'),key:'private'},{label:gettext('Shared With Project'),key:'shared'},{label:gettext('Community'),key:'community'}]},volumeType:{label:gettext('Type'),name:'volume_image_metadata.disk_format',singleton:true,options:diskFormats}};var sourceTypeFacets={image:[facets.name,facets.updated,facets.size,facets.type,facets.visibility],snapshot:[facets.name,facets.updated,facets.size,facets.type,facets.visibility],volume:[facets.name,facets.description,facets.size,facets.volumeType,facets.encrypted],volume_snapshot:[facets.name,facets.description,facets.size,facets.created,facets.status]};var newSpecWatcher=$scope.$watch(function(){return $scope.model.newInstanceSpec.instance_count;},function(newValue,oldValue){if(newValue!==oldValue){validateBootSourceType();}});var allocatedWatcher=$scope.$watch(function(){return ctrl.tableData.allocated.length;},function(newValue){checkVolumeForImage(newValue);});var bootSourceWatcher=$scope.$watch(function getBootSource(){return ctrl.currentBootSource;},function onBootSourceChange(newValue,oldValue){if(newValue!==oldValue){$scope.$broadcast(events.TABLES_CHANGED,{'data':bootSources[newValue]});}});var imagesWatcher=$scope.$watchCollection(function getImages(){return $scope.model.images;},function onImagesChange(){$scope.initPromise.then(function(){$scope.$applyAsync(function(){if($scope.launchContext.imageId){setSourceImageWithId($scope.launchContext.imageId);}});});});var imageSnapshotsWatcher=$scope.$watchCollection(function getImageSnapshots(){return $scope.model.imageSnapshots;},function onImageSnapshotsChange(){$scope.initPromise.then(function(){$scope.$applyAsync(function(){if($scope.launchContext.imageId){setSourceImageSnapshotWithId($scope.launchContext.imageId);}});});});var volumeWatcher=$scope.$watchCollection(function getVolumes(){return $scope.model.volumes;},function onVolumesChange(){$scope.initPromise.then(function onInit(){$scope.$applyAsync(function setDefaultVolume(){if($scope.launchContext.volumeId){setSourceVolumeWithId($scope.launchContext.volumeId);}});});});var snapshotWatcher=$scope.$watchCollection(function getSnapshots(){return $scope.model.volumeSnapshots;},function onSnapshotsChange(){$scope.initPromise.then(function onInit(){$scope.$applyAsync(function setDefaultSnapshot(){if($scope.launchContext.snapshotId){setSourceSnapshotWithId($scope.launchContext.snapshotId);}});});});var allowedBootSourcesWatcher=$scope.$watchCollection(function getAllowedBootSources(){return $scope.model.allowedBootSources;},function changeBootSource(newValue){if(angular.isArray(newValue)&&newValue.length>0){if(!$scope.model.newInstanceSpec.source_type||newValue.filter(function(value){return value.type===$scope.model.newInstanceSpec.source_type.type;}).length===0){updateBootSourceSelection(newValue[0].type);$scope.model.newInstanceSpec.source_type=newValue[0];}}});var flavorWatcher=$scope.$watchCollection(function(){return $scope.model.newInstanceSpec.flavor;},function setVolumeSize(){var newInstanceSpec=$scope.model.newInstanceSpec;var flavor=newInstanceSpec.flavor;if(flavor&&(newInstanceSpec.vol_size<flavor.disk)){newInstanceSpec.vol_size=flavor.disk;}});$scope.$on('$destroy',function(){allowedBootSourcesWatcher();newSpecWatcher();allocatedWatcher();bootSourceWatcher();imagesWatcher();imageSnapshotsWatcher();volumeWatcher();snapshotWatcher();flavorWatcher();});function updateBootSourceSelection(selectedSource,preSelection){if(ctrl.currentBootSource!==selectedSource){ctrl.selection.length=0;ctrl.currentBootSource=selectedSource;}
if((selectedSource===bootSourceTypes.IMAGE||selectedSource===bootSourceTypes.INSTANCE_SNAPSHOT)&&$scope.model.volumeBootable){$scope.model.newInstanceSpec.vol_create=$scope.model.newInstanceSpec.create_volume_default;}else{$scope.model.newInstanceSpec.vol_create=false;}
$scope.model.newInstanceSpec.vol_delete_on_instance_delete=false;changeBootSource(selectedSource,preSelection);validateBootSourceType();}
function changeBootSource(key,preSelection){updateDataSource(key,preSelection);updateHelpText(key);updateTableHeadCells(key);updateTableBodyCells(key);updateFacets(key);}
function updateDataSource(key,preSelection){if(preSelection){ctrl.selection.length=0;push.apply(selection,preSelection);}
angular.extend(ctrl.tableData,bootSources[key]);}
function updateHelpText(){angular.extend(ctrl.helpText,{noneAllocText:gettext('Select a source from those listed below.'),availHelpText:gettext('Select one'),volumeAZHelpText:gettext('When selecting volume as boot source, please ensure the instance\'s availability zone is compatible with your volume\'s availability zone.')});}
function updateTableHeadCells(key){refillArray(ctrl.tableHeadCells,tableHeadCellsMap[key]);}
function updateTableBodyCells(key){refillArray(ctrl.tableBodyCells,tableBodyCellsMap[key]);}
function updateFacets(key){refillArray(ctrl.sourceFacets,sourceTypeFacets[key]);$scope.$broadcast(magicSearchEvents.FACETS_CHANGED);}
function refillArray(arrayToRefill,contentArray){arrayToRefill.length=0;Array.prototype.push.apply(arrayToRefill,contentArray);}
function checkVolumeForImage(){var source=selection[0];if(source&&ctrl.currentBootSource===bootSourceTypes.IMAGE||source&&ctrl.currentBootSource===bootSourceTypes.INSTANCE_SNAPSHOT){var imageGb=source.size/1073741824.0;var imageDisk=source.min_disk;ctrl.minVolumeSize=Math.ceil(Math.max(imageGb,imageDisk));if($scope.model.newInstanceSpec.vol_size<ctrl.minVolumeSize){$scope.model.newInstanceSpec.vol_size=ctrl.minVolumeSize;}
var volumeSizeText=gettext('The volume size must be at least %(minVolumeSize)s GB');var volumeSizeObj={minVolumeSize:ctrl.minVolumeSize};ctrl.minVolumeSizeError=interpolate(volumeSizeText,volumeSizeObj,true);}else{ctrl.minVolumeSize=0;ctrl.minVolumeSizeError=gettext('Volume size is required and must be an integer');}}
function validateBootSourceType(){var bootSourceType=ctrl.currentBootSource;var instanceCount=$scope.model.newInstanceSpec.instance_count;var isValid=bootSourceType!==bootSourceTypes.VOLUME||!instanceCount||instanceCount===1;$scope.launchInstanceSourceForm['boot-source-type'].$setValidity('bootSourceType',isValid);}
function findSourceById(sources,id){var len=sources.length;var source;for(var i=0;i<len;i++){source=sources[i];if(source.id===id){return source;}}}
function setSourceImageWithId(id){var pre=findSourceById($scope.model.images,id);if(pre){updateBootSourceSelection(bootSourceTypes.IMAGE,[pre]);$scope.model.newInstanceSpec.source_type={type:bootSourceTypes.IMAGE,label:gettext('Image')};}}
function setSourceImageSnapshotWithId(id){var pre=findSourceById($scope.model.imageSnapshots,id);if(pre){updateBootSourceSelection(bootSourceTypes.INSTANCE_SNAPSHOT,[pre]);$scope.model.newInstanceSpec.source_type={type:bootSourceTypes.INSTANCE_SNAPSHOT,label:gettext('Snapshot')};}}
function setSourceVolumeWithId(id){var pre=findSourceById($scope.model.volumes,id);if(pre){updateBootSourceSelection(bootSourceTypes.VOLUME,[pre]);$scope.model.newInstanceSpec.source_type={type:bootSourceTypes.VOLUME,label:gettext('Volume')};}}
function setSourceSnapshotWithId(id){var pre=findSourceById($scope.model.volumeSnapshots,id);if(pre){updateBootSourceSelection(bootSourceTypes.VOLUME_SNAPSHOT,[pre]);$scope.model.newInstanceSpec.source_type={type:bootSourceTypes.VOLUME_SNAPSHOT,label:gettext('Snapshot')};}}}})();(function(){'use strict';var ck=angular.module('horizon.dashboard.cloudkitty',['horizon.dashboard.project.workflow']).config(config)
config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){$provide.decorator("horizon.dashboard.project.workflow.launch-instance.workflow",['$delegate',function($delegate){var workflow=$delegate;var static_path=$windowProvider.$get().STATIC_URL;workflow.append({formName:'CloudkittyForm',templateUrl:static_path+'cloudkitty/templates/cloudkitty-step.html',helpUrl:static_path+'cloudkitty/templates/cloudkitty-help.html',title:'Price'});return workflow;}]);}})();(function(){'use strict';angular.module('horizon.dashboard.cloudkitty').controller('CloudkittyStepController',CloudkittyStepController);CloudkittyStepController.$inject=['$scope','horizon.framework.widgets.wizard.events','$http','$window'];function CloudkittyStepController($scope,wizardEvents,$http,$window){var onSwitch=$scope.$on(wizardEvents.ON_SWITCH,function(evt,args){if(!$scope.model.newInstanceSpec.flavor)return false;var disk_total=$scope.model.newInstanceSpec.flavor.ephemeral+$scope.model.newInstanceSpec.flavor.disk;var desc_form={'flavor_name':$scope.model.newInstanceSpec.flavor.name,'flavor_id':$scope.model.newInstanceSpec.flavor.id,'vcpus':$scope.model.newInstanceSpec.flavor.vcpus,'disk':$scope.model.newInstanceSpec.flavor.disk,'ephemeral':$scope.model.newInstanceSpec.flavor.ephemeral,'disk_total':disk_total,'disk_total_display':disk_total,'ram':$scope.model.newInstanceSpec.flavor.ram,'source_type':$scope.model.newInstanceSpec.source_type.type,'source_val':$scope.model.newInstanceSpec.source[0].id,'image_id':$scope.model.newInstanceSpec.source[0].id,}
var form_data=[{"desc":desc_form,"volume":$scope.model.newInstanceSpec.instance_count}];$http.post($window.WEBROOT+'project/rating/quote',form_data).then(function(res,status){$scope.price=res.data;});});}})();pricing={is_price:false,init:function(){this._attachInputHandlers();},init_work:function(){this.is_price=true;this.init();this.work();},_attachInputHandlers:function(){var scope=this;if(this.is_price){var eventCallback=function(evt){scope.work();};$('#id_flavor').on('change',eventCallback);$('#id_count').on('change',eventCallback);$('#id_image_id').on('change',eventCallback);}},work:function(){if(horizon.Quota.selected_flavor){_image=horizon.Quota.getSelectedImageOrSnapshot();var flavor=horizon.Quota.selected_flavor.name;var vcpus=horizon.Quota.selected_flavor.vcpus;var disk=horizon.Quota.selected_flavor.disk;var ephemeral=horizon.Quota.selected_flavor["OS-FLV-EXT-DATA:ephemeral"];var disk_total=horizon.Quota.selected_flavor.disk+horizon.Quota.selected_flavor["OS-FLV-EXT-DATA:ephemeral"];var disk_total_display=disk_total;var ram=horizon.Quota.selected_flavor.ram;var source_type=$('#id_source_type option:selected').val();var source_val=$('#id_'+source_type+' option:selected').val();var instance_count=parseInt($("#id_count").val());desc_form={'flavor':flavor,'source_type':source_type,'source_val':source_val,'vcpus':vcpus,'disk':disk,'ephemeral':ephemeral,'disk_total':disk_total,'disk_total_display':disk_total_display,'ram':ram}
if(_image!=undefined){desc_form['image_id']=_image.id}
var form_data=[{"desc":desc_form,"volume":instance_count}];var url_data=['/dashboard/project/rating/quote','/project/rating/quote']
this.sendPost(form_data,url_data);}},sendPost:function(form_data,url_data){var url=url_data.shift();$.ajax({type:"post",url:url,dataType:'json',data:JSON.stringify(form_data),contentType:'application/json; charset=utf-8',success:function(data){$("#price").text(data);},error:function(){if(url_data)
pricing.sendPost(form_data,url_data);},beforeSend:function(xhr,settings){$.ajaxSettings.beforeSend(xhr,settings);}});}};function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}
$.ajaxSetup({beforeSend:function(xhr,settings){if(!(/^http:.*/.test(settings.url)||/^https:.*/.test(settings.url))){xhr.setRequestHeader("X-CSRFToken",getCookie('csrftoken'));}}});if(typeof horizon.Quota!=='undefined'){pricing.init_work();}else{addHorizonLoadEvent(function(){pricing.init_work();});}
(function(){'use strict';angular.module('horizon.dashboard.identity.domains.actions',['horizon.dashboard.identity.domains']).run(registerDomainActions);registerDomainActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.identity.domains.actions.create.service','horizon.dashboard.identity.domains.actions.delete.service','horizon.dashboard.identity.domains.resourceType'];function registerDomainActions(registry,createDomainService,deleteDomainService,domainResourceType){var resourceType=registry.getResourceType(domainResourceType);resourceType.globalActions.append({id:'createDomainAction',service:createDomainService,template:{text:gettext('Create Domain'),type:'create'}});resourceType.batchActions.append({id:'deleteDomainsAction',service:deleteDomainService,template:{text:gettext('Delete Domains'),type:'delete-selected'}});resourceType.itemActions.append({id:'deleteDomainAction',service:deleteDomainService,template:{text:gettext('Delete Domain'),type:'delete'}});}})();(function(){'use strict';angular.module('horizon.dashboard.identity.domains.details',['horizon.framework.conf','horizon.app.core']).run(registerDomainDetails);registerDomainDetails.$inject=['horizon.dashboard.identity.domains.basePath','horizon.dashboard.identity.domains.resourceType','horizon.app.core.openstack-service-api.keystone','horizon.framework.conf.resource-type-registry.service'];function registerDomainDetails(basePath,domainResourceType,keystone,registry){registry.getResourceType(domainResourceType).setLoadFunction(loadFunction).detailsViews.append({id:'domainDetailsOverview',name:gettext('Overview'),template:basePath+'details/overview.html'});function loadFunction(identifier){return keystone.getDomain(identifier);}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.domains',['ngRoute','horizon.dashboard.identity.domains.details','horizon.dashboard.identity.domains.actions']).constant('horizon.dashboard.identity.domains.resourceType','OS::Keystone::Domain').run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.identity.domains.service','horizon.dashboard.identity.domains.basePath','horizon.dashboard.identity.domains.resourceType'];function run(registry,domainService,basePath,domainResourceType){registry.getResourceType(domainResourceType).setNames(gettext('Domain'),gettext('Domains')).setSummaryTemplateUrl(basePath+'details/drawer.html').setDefaultIndexUrl('/identity/domains/').setProperties(domainProperties()).setListFunction(domainService.listDomains).tableColumns.append({id:'name',priority:1,sortDefault:true,urlFunction:domainService.getDetailsPath}).append({id:'description',priority:1}).append({id:'id',priority:1}).append({id:'enabled',priority:1});}
function domainProperties(){return{name:{label:gettext('Name'),filters:['noName']},description:{label:gettext('Description'),filters:['noValue']},id:{label:gettext('ID'),filters:['noValue']},enabled:{label:gettext('Enabled'),filters:['yesno']}};}
config.$inject=['$provide','$windowProvider','$routeProvider'];function config($provide,$windowProvider,$routeProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/identity/domains/';$provide.constant('horizon.dashboard.identity.domains.basePath',path);$routeProvider.when('/identity/domains',{templateUrl:path+'panel.html'});}})();(function(){'use strict';angular.module('horizon.dashboard.identity.groups.actions',['horizon.framework.conf']).run(registerGroupActions);registerGroupActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.identity.groups.actions.create.service','horizon.dashboard.identity.groups.actions.delete.service','horizon.dashboard.identity.groups.actions.edit.service','horizon.dashboard.identity.groups.resourceType'];function registerGroupActions(registry,createService,deleteService,editService,groupResourceTypeCode){var groupResourceType=registry.getResourceType(groupResourceTypeCode);groupResourceType.itemActions.append({id:'editAction',service:editService,template:{text:gettext('Edit Group')}}).append({id:'deleteAction',service:deleteService,template:{text:gettext('Delete Group'),type:'delete'}});groupResourceType.batchActions.append({id:'batchDeleteAction',service:deleteService,template:{type:'delete-selected',text:gettext('Delete Groups')}});groupResourceType.globalActions.append({id:'createGroupAction',service:createService,template:{type:'create',text:gettext('Create Group')}});}})();(function(){'use strict';angular.module('horizon.dashboard.identity.groups',['ngRoute','horizon.dashboard.identity.groups.actions']).constant('horizon.dashboard.identity.groups.resourceType','OS::Keystone::Group').run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.openstack-service-api.keystone','horizon.dashboard.identity.groups.basePath','horizon.dashboard.identity.groups.resourceType'];function run(registry,keystone,basePath,groupResourceType){registry.getResourceType(groupResourceType).setNames(gettext('Group'),gettext('Groups')).setProperties(groupProperties()).setListFunction(listFunction).tableColumns.append({id:'name',priority:1,sortDefault:true}).append({id:'description',priority:1}).append({id:'id',priority:1});registry.getResourceType(groupResourceType).filterFacets.append({label:gettext('Name'),name:'name',singleton:true}).append({label:gettext('ID'),name:'id',singleton:true});function listFunction(){return keystone.getGroups().then(modifyResponse);}
function modifyResponse(response){return{data:{items:response.data.items.map(modifyItem)}};function modifyItem(item){item.trackBy=item.id+item.domain_id+item.name+item.description;return item;}}
function groupProperties(){return{name:{label:gettext('Name'),filters:['noName']},description:{label:gettext('Description'),filters:['noValue']},id:{label:gettext('ID'),filters:['noValue']}};}}
config.$inject=['$provide','$windowProvider','$routeProvider'];function config($provide,$windowProvider,$routeProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/identity/groups/';$provide.constant('horizon.dashboard.identity.groups.basePath',path);$routeProvider.when('/identity/groups',{templateUrl:path+'panel.html'});}})();(function(){'use strict';angular.module('horizon.dashboard.identity',['horizon.dashboard.identity.domains','horizon.dashboard.identity.projects','horizon.dashboard.identity.users','horizon.dashboard.identity.groups','horizon.dashboard.identity.roles']).config(config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/identity/';$provide.constant('horizon.dashboard.identity.basePath',path);}})();(function(){'use strict';angular.module('horizon.dashboard.identity.projects',[]).config(config);config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/identity/projects/';$provide.constant('horizon.dashboard.identity.projects.basePath',path);}})();(function(){'use strict';angular.module('horizon.dashboard.identity.roles.actions',['horizon.framework.conf']).run(registerRoleActions);registerRoleActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.identity.roles.actions.create.service','horizon.dashboard.identity.roles.actions.delete.service','horizon.dashboard.identity.roles.actions.edit.service','horizon.dashboard.identity.roles.resourceType'];function registerRoleActions(registry,createService,deleteService,editService,roleResourceTypeCode){var roleResourceType=registry.getResourceType(roleResourceTypeCode);roleResourceType.itemActions.append({id:'editRoleAction',service:editService,template:{text:gettext('Edit Role')}}).append({id:'deleteAction',service:deleteService,template:{text:gettext('Delete Role'),type:'delete'}});roleResourceType.batchActions.append({id:'batchDeleteAction',service:deleteService,template:{type:'delete-selected',text:gettext('Delete Roles')}});roleResourceType.globalActions.append({id:'createRoleAction',service:createService,template:{type:'create',text:gettext('Create Role')}});}})();(function(){'use strict';angular.module('horizon.dashboard.identity.roles',['ngRoute','horizon.dashboard.identity.roles.actions']).constant('horizon.dashboard.identity.roles.resourceType','OS::Keystone::Role').run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.app.core.openstack-service-api.keystone','horizon.dashboard.identity.roles.resourceType'];function run(registry,keystone,roleResourceType){registry.getResourceType(roleResourceType).setNames(gettext('Role'),gettext('Roles')).setProperties(roleProperties()).setListFunction(listFunction).tableColumns.append({id:'name',priority:1,sortDefault:true,classes:"word-wrap"}).append({id:'id',priority:1});function listFunction(){return keystone.getRoles().then(addTrackBy);}
function addTrackBy(response){return{data:{items:response.data.items.map(function(role){role.trackBy=[role.id,role.domain_id,role.name].join('/');return role;})}};}
function roleProperties(){return{name:{label:gettext('Name'),filters:['noName']},id:{label:gettext('ID'),filters:['noValue']}};}}
config.$inject=['$provide','$windowProvider','$routeProvider'];function config($provide,$windowProvider,$routeProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/identity/roles/';$provide.constant('horizon.dashboard.identity.roles.basePath',path);$routeProvider.when('/identity/roles',{templateUrl:path+'panel.html'});}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users.actions',['horizon.framework.conf']).run(registerUserActions).config(config);registerUserActions.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.identity.users.actions.create.service','horizon.dashboard.identity.users.actions.update.service','horizon.dashboard.identity.users.actions.password.service','horizon.dashboard.identity.users.actions.enable.service','horizon.dashboard.identity.users.actions.disable.service','horizon.dashboard.identity.users.actions.delete.service','horizon.dashboard.identity.users.resourceType'];function registerUserActions(registry,createService,updateService,passwordService,enableService,disableService,deleteService,userResourceTypeCode){var userResourceType=registry.getResourceType(userResourceTypeCode);userResourceType.itemActions.append({id:'updateAction',service:updateService,template:{text:gettext('Edit User'),type:'row'}}).append({id:'passwordAction',service:passwordService,template:{text:gettext('Change Password'),type:'row'}}).append({id:'enableAction',service:enableService,template:{text:gettext('Enable User'),type:'row'}}).append({id:'disableAction',service:disableService,template:{text:gettext('Disable User'),type:'row'}}).append({id:'deleteAction',service:deleteService,template:{text:gettext('Delete User'),type:'delete'}});userResourceType.batchActions.append({id:'batchDeleteAction',service:deleteService,template:{type:'delete-selected',text:gettext('Delete Users')}});userResourceType.globalActions.append({id:'createUserAction',service:createService,template:{type:'create',text:gettext('Create User')}});}
config.$inject=['$provide','$windowProvider'];function config($provide,$windowProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/identity/users/actions/';$provide.constant('horizon.dashboard.identity.users.actions.basePath',path);}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users.details',['horizon.framework.conf','horizon.app.core']).run(registerUserDetails);registerUserDetails.$inject=['horizon.dashboard.identity.users.basePath','horizon.dashboard.identity.users.resourceType','horizon.framework.conf.resource-type-registry.service','horizon.dashboard.identity.users.service'];function registerUserDetails(basePath,userResourceType,registry,usersService){registry.getResourceType(userResourceType).setLoadFunction(usersService.getUserPromise).detailsViews.append({id:'userDetailsOverview',name:gettext('Overview'),template:basePath+'details/overview.html'});}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users',['ngRoute','horizon.dashboard.identity.users.details','horizon.dashboard.identity.users.actions']).constant('horizon.dashboard.identity.users.resourceType','OS::Keystone::User').constant('horizon.dashboard.identity.users.validationRules',validationRules()).run(run).config(config);run.$inject=['horizon.framework.conf.resource-type-registry.service','horizon.dashboard.identity.users.basePath','horizon.dashboard.identity.users.resourceType','horizon.dashboard.identity.users.service'];function run(registry,basePath,userResourceType,usersService){registry.getResourceType(userResourceType).setNames(gettext('User'),gettext('Users')).setSummaryTemplateUrl(basePath+'details/drawer.html').setDefaultIndexUrl('/identity/users/').setProperties(userProperties()).setListFunction(usersService.getUsersPromise).setNeedsFilterFirstFunction(usersService.getFilterFirstSettingPromise).tableColumns.append({id:'name',priority:1,sortDefault:true,urlFunction:usersService.getDetailsPath}).append({id:'email',priority:2,filters:['noValue'],template:'<a ng-href="mailto:{$ item.email $}">{$ item.email $}</a>'}).append({id:'id',priority:1}).append({id:'enabled',priority:2,filters:['yesno']});registry.getResourceType(userResourceType).filterFacets.append({label:gettext('Name'),name:'name',singleton:true,isServer:true}).append({label:gettext('Email'),name:'email',singleton:true}).append({label:gettext('ID'),name:'id',singleton:true,isServer:true}).append({label:gettext('Enabled'),name:'enabled',singleton:true,isServer:true,options:[{label:gettext('Yes'),key:'true'},{label:gettext('No'),key:'false'}]});function userProperties(){return{name:gettext('Name'),email:{label:gettext('Email'),filters:['noValue']},id:gettext('ID'),enabled:{label:gettext('Enabled'),filters:['yesno']},domain_id:{label:gettext('Domain ID'),filters:['noValue']},domain_name:{label:gettext('Domain Name'),filters:['noValue']},description:{label:gettext('Description'),filters:['noValue']},default_project_id:{label:gettext('Primary Project ID'),filters:['noValue']},project_name:{label:gettext('Primary Project Name'),filters:['noValue']}};}}
function validationRules(){return{integer:/^[0-9]+$/,validatePassword:/.*/,fieldMaxLength:255};}
config.$inject=['$provide','$windowProvider','$routeProvider'];function config($provide,$windowProvider,$routeProvider){var path=$windowProvider.$get().STATIC_URL+'dashboard/identity/users/';$provide.constant('horizon.dashboard.identity.users.basePath',path);$routeProvider.when('/identity/users',{templateUrl:path+'panel.html'});}})();(function(){'use strict';angular.module('horizon.dashboard.identity.domains.actions').factory('horizon.dashboard.identity.domains.actions.create.service',createService);createService.$inject=['$q','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.dashboard.identity.domains.actions.workflow.service','horizon.dashboard.identity.domains.resourceType','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.form.ModalFormService','horizon.framework.widgets.toast.service'];function createService($q,keystone,policy,workflow,resourceType,actionResult,modal,toast){var service={allowed:allowed,perform:perform};return service;function allowed(){return $q.all([keystone.canEditIdentity('domain'),policy.ifAllowed({rules:[['identity','create_domain']]})]);}
function perform(){var config=workflow.init();config.title=gettext("Create Domain");return modal.open(config).then(submit);}
function submit(context){return keystone.createDomain(context.model).then(success);}
function success(response){var domain=response.data;var message=gettext('Domain %s was successfully created.');toast.add('success',interpolate(message,[domain.name]));return actionResult.getActionResult().created(resourceType,domain.id).result;}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.domains.actions').factory('horizon.dashboard.identity.domains.actions.delete.service',deleteService);deleteService.$inject=['$q','$location','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.dashboard.identity.domains.resourceType','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','horizon.framework.widgets.modal.deleteModalService','horizon.framework.widgets.toast.service'];function deleteService($q,$location,keystone,policy,domainsResourceType,actionResultService,$qExtensions,deleteModal,toast){var service={allowed:allowed,perform:perform};return service;function perform(items,scope){var domains=angular.isArray(items)?items:[items];var context={labels:labelize(domains.length),deleteEntity:deleteDomain};return $qExtensions.allSettled(domains.map(checkPermission)).then(afterCheck);function checkPermission(domain){return{promise:allowed(),context:domain};}
function afterCheck(result){var outcome=$q.reject();if(result.fail.length>0){var notAllowedMessage=gettext("You are not allowed to delete domains: %s");toast.add('error',getMessage(notAllowedMessage,result.fail));outcome=$q.reject(result.fail);}
if(result.pass.length>0){outcome=deleteModal.open(scope,result.pass.map(getEntity),context).then(createResult);}
return outcome;}}
function allowed(){return $q.all([keystone.canEditIdentity('domain'),policy.ifAllowed({rules:[['identity','delete_domain']]})]);}
function createResult(deleteModalResult){var result=actionResultService.getActionResult();deleteModalResult.pass.forEach(function markDeleted(item){result.deleted(domainsResourceType,getEntity(item).id);});deleteModalResult.fail.forEach(function markFailed(item){result.failed(domainsResourceType,getEntity(item).id);});if(result.result.failed.length===0&&result.result.deleted.length>0){$location.path('/identity/domains');}else{return result.result;}}
function labelize(count){return{title:ngettext('Confirm Delete Domain','Confirm Delete Domains',count),message:ngettext('You have selected "%s". Deleted domain is not recoverable.','You have selected "%s". Deleted domains are not recoverable.',count),submit:ngettext('Delete Domain','Delete Domains',count),success:ngettext('Deleted domain: %s.','Deleted domains: %s.',count),error:ngettext('Unable to delete domain: %s.','Unable to delete domains: %s.',count)};}
function deleteDomain(domain){return keystone.deleteDomain(domain);}
function getMessage(message,entities){return interpolate(message,[entities.map(getName).join(", ")]);}
function getName(result){return getEntity(result).name;}
function getEntity(result){return result.context;}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.domains.actions').factory('horizon.dashboard.identity.domains.actions.workflow.service',DomainWorkflow);DomainWorkflow.$inject=['horizon.dashboard.identity.domains.basePath'];function DomainWorkflow(basePath){var workflow={init:init};function init(){var schema={type:"object",properties:{name:{title:gettext('Domain Name'),type:'string'},description:{title:gettext('Description'),type:'string'},enabled:{title:gettext('Enabled'),type:'boolean',default:true}},required:['name']};var form=[{type:'section',htmlClass:'row',items:[{type:'section',htmlClass:'col-sm-6',items:[{key:"name"},{key:"description",type:"textarea"},{key:"enabled",type:"radiobuttons",titleMap:[{value:true,name:gettext("Yes")},{value:false,name:gettext("No")}]}]},{type:'template',templateUrl:basePath+"actions/workflow/info.help.html"}]}];var model={name:"",description:"",enabled:true};var config={schema:schema,form:form,model:model};return config;}
return workflow;}})();(function(){"use strict";angular.module('horizon.dashboard.identity.domains').controller('DomainOverviewController',DomainOverviewController);DomainOverviewController.$inject=['horizon.dashboard.identity.domains.resourceType','horizon.framework.conf.resource-type-registry.service','$scope'];function DomainOverviewController(domainResourceType,registry,$scope){var ctrl=this;ctrl.domain={};ctrl.resourceType=registry.getResourceType(domainResourceType);$scope.context.loadPromise.then(onGetDomain);function onGetDomain(domain){ctrl.domain=domain.data;}}})();(function(){"use strict";angular.module('horizon.dashboard.identity.domains').factory('horizon.dashboard.identity.domains.service',domainService);domainService.$inject=['$q','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.app.core.openstack-service-api.settings','horizon.app.core.detailRoute'];function domainService($q,keystone,policy,settingsService,detailRoute){return{getDetailsPath:getDetailsPath,getDomainPromise:getDomainPromise,listDomains:listDomains};function getDetailsPath(item){return detailRoute+'OS::Keystone::Domain/'+item.id;}
function listDomains(){var defaultDomain=null;var KEYSTONE_DEFAULT_DOMAIN=null;return $q.all([keystone.getDomain('default'),settingsService.getSetting('OPENSTACK_KEYSTONE_DEFAULT_DOMAIN')]).then(allowed);function allowed(results){defaultDomain=results[0].data;KEYSTONE_DEFAULT_DOMAIN=results[1];var rules=[['identity','identity:list_domains']];return policy.ifAllowed({rules:rules}).then(policySuccess,policyFailed);}
function policySuccess(){if(isDefaultDomain()){return keystone.getDomains().then(getDomainSuccess);}else{return keystone.getDomain(defaultDomain.id).then(getDomainSuccess);}}
function policyFailed(){return keystone.getDomain(defaultDomain.id).then(getDomainSuccess);}
function getDomainSuccess(response){if(!angular.isArray(response.data.items)){response.data.items=[response.data];}
return{data:{items:response.data.items.map(modifyDomain)}};function modifyDomain(domain){domain.trackBy=domain.id;return domain;}}
function isDefaultDomain(){return defaultDomain.name===KEYSTONE_DEFAULT_DOMAIN;}}
function getDomainPromise(identifier){return keystone.getDomain(identifier);}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.groups').factory('horizon.dashboard.identity.groups.actions.create.service',createService);createService.$inject=['$q','horizon.dashboard.identity.groups.resourceType','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.widgets.form.ModalFormService','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.gettext','horizon.framework.widgets.toast.service'];function createService($q,resourceType,keystoneAPI,policy,modalFormService,actionResultService,gettext,toast){var service={allowed:allowed,perform:perform,submit:submit};return service;function allowed(){return $q.all([keystoneAPI.canEditIdentity('group'),policy.ifAllowed({rules:[['identity','identity:create_group']]})]);}
function perform(){var model={name:'',description:''};var schema={type:'object',properties:{name:{title:gettext('Name'),type:'string'},description:{title:gettext('Description'),type:'string'}},required:['name']};var config={title:gettext('Create Group'),schema:schema,form:['*'],model:model};return modalFormService.open(config).then(submit);}
function submit(context){return keystoneAPI.createGroup(context.model).then(onSuccess);}
function onSuccess(response){var group=response.data;toast.add('success',interpolate(gettext('Group %s was successfully created.'),[group.name]));return actionResultService.getActionResult().created(resourceType,group.id).result;}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.groups').factory('horizon.dashboard.identity.groups.actions.delete.service',deleteGroupService);deleteGroupService.$inject=['$q','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.modal.deleteModalService','horizon.dashboard.identity.groups.resourceType'];function deleteGroupService($q,keystone,policy,actionResultService,deleteModal,groupResourceType){var service={allowed:allowed,perform:perform,deleteResult:deleteResult};return service;function allowed(){return $q.all([keystone.canEditIdentity('group'),policy.ifAllowed({rules:[['identity','identity:delete_group']]})]);}
function perform(items,scope){var groups=angular.isArray(items)?items:[items];var context={labels:labelize(groups.length),deleteEntity:deleteGroup};return deleteModal.open(scope,groups,context).then(deleteResult);}
function deleteResult(deleteModalResult){var actionResult=actionResultService.getActionResult();deleteModalResult.pass.forEach(function markDeleted(item){actionResult.deleted(groupResourceType,item.context.id);});deleteModalResult.fail.forEach(function markFailed(item){actionResult.failed(groupResourceType,item.context.id);});return actionResult.result;}
function labelize(count){return{title:ngettext('Confirm Delete Group','Confirm Delete Groups',count),message:ngettext('You have selected "%s". Deleted group is not recoverable.','You have selected "%s". Deleted groups are not recoverable.',count),submit:ngettext('Delete Group','Delete Groups',count),success:ngettext('Deleted Group: %s.','Deleted Groups: %s.',count),error:ngettext('Unable to delete Group: %s.','Unable to delete Groups: %s.',count)};}
function deleteGroup(group){return keystone.deleteGroup(group);}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.groups').factory('horizon.dashboard.identity.groups.actions.edit.service',editService);editService.$inject=['$q','horizon.dashboard.identity.groups.resourceType','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.widgets.form.ModalFormService','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.toast.service'];function editService($q,resourceType,keystoneAPI,policy,modalFormService,actionResultService,toast){var service={allowed:allowed,perform:perform,onLoad:onLoad,submit:submit,onSuccess:onSuccess};return service;function allowed(){return $q.all([keystoneAPI.canEditIdentity('group'),policy.ifAllowed({rules:[['identity','identity:update_group']]})]);}
function perform(group){return keystoneAPI.getGroup(group.id).then(service.onLoad);}
function onLoad(response){var schema={type:'object',properties:{name:{title:gettext('Name'),type:'string'},description:{title:gettext('Description'),type:'string'}},required:['name']};var config={title:gettext('Edit Group'),schema:schema,form:['*'],model:response.data};return modalFormService.open(config).then(service.submit);}
function submit(context){return keystoneAPI.editGroup(context.model).then(service.onSuccess);}
function onSuccess(response){toast.add('success',gettext('Group updated successfully.'));return actionResultService.getActionResult().updated(resourceType,response.config.data.id).result;}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.roles').factory('horizon.dashboard.identity.roles.actions.create.service',createService);createService.$inject=['$q','horizon.dashboard.identity.roles.basePath','horizon.dashboard.identity.roles.resourceType','horizon.dashboard.identity.roles.role-schema','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.widgets.form.ModalFormService','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.gettext','horizon.framework.widgets.toast.service'];function createService($q,basePath,resourceType,schema,keystoneAPI,policy,modalFormService,actionResultService,gettext,toast){var invalidMsg=gettext("Role already exists.");var roles=[];var form=[{key:"name",validationMessage:{rolesExists:invalidMsg},$validators:{rolesExists:function(name){return(roles.indexOf(name)===-1);}}}];var service={allowed:allowed,perform:perform,submit:submit};return service;function allowed(){return $q.all([keystoneAPI.canEditIdentity('role'),policy.ifAllowed({rules:[['identity','identity:create_role']]})]);}
function perform(){getRoles();var model={};var config={title:gettext('Create Role'),schema:schema,form:form,model:model,size:'md'};return modalFormService.open(config).then(submit);}
function submit(context){return keystoneAPI.createRole({name:context.model.name}).then(onSuccess);}
function onSuccess(response){var role=response.data;toast.add('success',interpolate(gettext('Role %s was successfully created.'),[role.name]));return actionResultService.getActionResult().created(resourceType,role.id).result;}
function getRoles(){keystoneAPI.getRoles().then(function(response){roles=response.data.items.map(getName);});}
function getName(item){return item.name;}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.roles').factory('horizon.dashboard.identity.roles.actions.delete.service',deleteRoleService);deleteRoleService.$inject=['$q','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.ngettext','horizon.framework.widgets.modal.deleteModalService','horizon.dashboard.identity.roles.resourceType'];function deleteRoleService($q,keystone,policy,actionResultService,ngettext,deleteModal,roleResourceType){return{allowed:allowed,perform:perform,deleteResult:deleteResult};function allowed(){return $q.all([keystone.canEditIdentity('role'),policy.ifAllowed({rules:[['identity','identity:delete_role']]})]);}
function perform(items,scope){var roles=angular.isArray(items)?items:[items];var context={labels:labelize(roles.length),deleteEntity:function deleteRole(role){return keystone.deleteRole(role);}};return deleteModal.open(scope,roles,context).then(deleteResult);}
function deleteResult(deleteModalResult){var actionResult=actionResultService.getActionResult();deleteModalResult.pass.forEach(function markDeleted(item){actionResult.deleted(roleResourceType,item.context.id);});deleteModalResult.fail.forEach(function markFailed(item){actionResult.failed(roleResourceType,item.context.id);});return actionResult.result;}
function labelize(count){return{title:ngettext('Confirm Delete Role','Confirm Delete Roles',count),message:ngettext('You have selected "%s". Deleted role is not recoverable.','You have selected "%s". Deleted roles are not recoverable.',count),submit:ngettext('Delete Role','Delete Roles',count),success:ngettext('Deleted Role: %s.','Deleted Roles: %s.',count),error:ngettext('Unable to delete Role: %s.','Unable to delete Roles: %s.',count)};}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.roles').factory('horizon.dashboard.identity.roles.actions.edit.service',editService);editService.$inject=['$q','horizon.dashboard.identity.roles.basePath','horizon.dashboard.identity.roles.resourceType','horizon.dashboard.identity.roles.role-schema','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.widgets.form.ModalFormService','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.toast.service'];function editService($q,basePath,resourceType,schema,keystoneAPI,policy,modalFormService,actionResultService,toast){var service={allowed:allowed,perform:perform,onLoad:onLoad,submit:submit,onSuccess:onSuccess};return service;function allowed(){return $q.all([keystoneAPI.canEditIdentity('role'),policy.ifAllowed({rules:[['identity','identity:update_role']]})]);}
function perform(role){return keystoneAPI.getRole(role.id).then(service.onLoad);}
function onLoad(response){var config={title:gettext('Edit Role'),schema:schema,form:['*'],model:response.data,size:'md'};return modalFormService.open(config).then(service.submit);}
function submit(context){return keystoneAPI.editRole(context.model).then(service.onSuccess);}
function onSuccess(response){toast.add('success',gettext('Role updated successfully.'));return actionResultService.getActionResult().updated(resourceType,response.config.data.id).result;}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.roles').factory('horizon.dashboard.identity.roles.role-schema',schema);schema.$inject=['horizon.framework.util.i18n.gettext'];function schema(gettext){return{type:'object',properties:{name:{title:gettext('Name'),type:'string'}},required:['name']};}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users').factory('horizon.dashboard.identity.users.actions.create.service',createService);createService.$inject=['$q','horizon.dashboard.identity.users.resourceType','horizon.dashboard.identity.users.actions.basePath','horizon.dashboard.identity.users.actions.workflow.service','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.form.ModalFormService','horizon.framework.widgets.toast.service'];function createService($q,resourceType,basePath,workflow,keystone,policy,actionResultService,modal,toast){var message={success:gettext('User %s was successfully created.')};return{allowed:allowed,perform:perform,submit:submit};function allowed(){return $q.all([keystone.canEditIdentity('user'),policy.ifAllowed({rules:[['identity','identity:create_user']]})]);}
function perform(){var config=workflow.init("create");config.title=gettext("Create User");return modal.open(config).then(submit);}
function submit(context){return keystone.createUser(context.model).then(success);function success(response){var user=response.data;toast.add('success',interpolate(message.success,[user.name]));keystone.grantRole(user.default_project_id,context.model.role,user.id);return actionResultService.getActionResult().created(resourceType,user.id).result;}}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users').factory('horizon.dashboard.identity.users.actions.delete.service',deleteUserService);deleteUserService.$inject=['$q','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.i18n.gettext','horizon.framework.widgets.modal.deleteModalService','horizon.framework.widgets.toast.service','horizon.dashboard.identity.users.resourceType'];function deleteUserService($q,keystone,policy,actionResultService,gettext,deleteModal,toast,userResourceType){var service={allowed:allowed,perform:perform,deleteResult:deleteResult};return service;function allowed(){return $q.all([keystone.canEditIdentity('user'),policy.ifAllowed({rules:[['identity','identity:delete_user']]})]);}
function perform(items,scope){var users=angular.isArray(items)?items:[items];var context={labels:labelize(users.length),deleteEntity:deleteUser};return deleteModal.open(scope,users,context).then(deleteResult);}
function deleteResult(deleteModalResult){var actionResult=actionResultService.getActionResult();deleteModalResult.pass.forEach(function markDeleted(item){actionResult.deleted(userResourceType,item.context.id);});deleteModalResult.fail.forEach(function markFailed(item){actionResult.failed(userResourceType,item.context.id);});return actionResult.result;}
function labelize(count){return{title:ngettext('Confirm Delete User','Confirm Delete Users',count),message:ngettext('You have selected "%s". Deleted user is not recoverable.','You have selected "%s". Deleted users are not recoverable.',count),submit:ngettext('Delete User','Delete Users',count),success:ngettext('Deleted User: %s.','Deleted Users: %s.',count),error:ngettext('Unable to delete User: %s.','Unable to delete Users: %s.',count)};}
function deleteUser(user){return keystone.deleteUser(user);}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users').factory('horizon.dashboard.identity.users.actions.disable.service',disableService);disableService.$inject=['$q','horizon.dashboard.identity.users.resourceType','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','horizon.framework.widgets.toast.service'];function disableService($q,resourceType,keystone,policy,actionResultService,$qExtensions,toast){var message={success:gettext('User %s was successfully disabled.')};var service={allowed:allowed,perform:perform};return service;function allowed(selected){return $q.all([keystone.canEditIdentity('user'),$qExtensions.booleanAsPromise(selected.enabled),policy.ifAllowed({rules:[['identity','identity:update_user']]})]);}
function perform(selected){return keystone.editUser({id:selected.id,enabled:false}).then(success);function success(){toast.add('success',interpolate(message.success,[selected.name]));return actionResultService.getActionResult().updated(resourceType,selected.id).result;}}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users').factory('horizon.dashboard.identity.users.actions.enable.service',enableService);enableService.$inject=['$q','horizon.dashboard.identity.users.resourceType','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.util.q.extensions','horizon.framework.widgets.toast.service'];function enableService($q,resourceType,keystone,policy,actionResultService,$qExtensions,toast){var message={success:gettext('User %s was successfully enabled.')};var service={allowed:allowed,perform:perform};return service;function allowed(selected){return $q.all([keystone.canEditIdentity('user'),$qExtensions.booleanAsPromise(!selected.enabled),policy.ifAllowed({rules:[['identity','identity:update_user']]})]);}
function perform(selected){return keystone.editUser({id:selected.id,enabled:true}).then(success);function success(){toast.add('success',interpolate(message.success,[selected.name]));return actionResultService.getActionResult().updated(resourceType,selected.id).result;}}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users').factory('horizon.dashboard.identity.users.actions.password.service',passwordService);passwordService.$inject=['$q','horizon.dashboard.identity.users.resourceType','horizon.dashboard.identity.users.actions.basePath','horizon.dashboard.identity.users.actions.workflow.service','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.app.core.openstack-service-api.settings','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.form.ModalFormService','horizon.framework.widgets.toast.service'];function passwordService($q,resourceType,basePath,workflow,keystone,policy,settings,actionResultService,modal,toast){var message={success:gettext('User password has been updated successfully.')};return{allowed:allowed,perform:perform,submit:submit};function allowed(){return $q.all([keystone.canEditIdentity('user'),policy.ifAllowed({rules:[['identity','identity:update_user']]})]);}
function perform(selected,scope,errorCode){return settings.getSetting('ENFORCE_PASSWORD_CHECK',false).then(function(response){var adminPassword=response;return keystone.getUser(selected.id).then(function(response){var config=workflow.init("password",adminPassword,errorCode);config.title=gettext("Change Password");config.model={};config.model.id=response.data.id;config.model.domain_name=response.data.domain_name;config.model.domain_id=response.data.domain_id;config.model.name=response.data.name;return modal.open(config).then(submit);});});}
function submit(context){delete context.model.domain_name;delete context.model.domain_id;delete context.model.enabled;return keystone.editUser(context.model).then(success,error);function success(){toast.add('success',message.success);return actionResultService.getActionResult().updated(resourceType,context.model.id).result;}
function error(response){if(response.status===400){perform(context.model,null,response.data);}else{return actionResultService.getActionResult().updated(resourceType,context.model.id).result;}}}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users').factory('horizon.dashboard.identity.users.actions.update.service',updateService);updateService.$inject=['$q','horizon.dashboard.identity.users.resourceType','horizon.dashboard.identity.users.actions.basePath','horizon.dashboard.identity.users.actions.workflow.service','horizon.app.core.openstack-service-api.keystone','horizon.app.core.openstack-service-api.policy','horizon.framework.util.actions.action-result.service','horizon.framework.widgets.form.ModalFormService','horizon.framework.widgets.toast.service'];function updateService($q,resourceType,basePath,workflow,keystone,policy,actionResultService,modal,toast){var message={success:gettext('User %s was successfully updated.')};return{allowed:allowed,perform:perform,submit:submit};function allowed(){return $q.all([keystone.canEditIdentity('user'),policy.ifAllowed({rules:[['identity','identity:update_user']]})]);}
function perform(selected){return keystone.getUser(selected.id).then(function(response){var config=workflow.init("update");config.title=gettext("Edit User");config.model={};config.model.id=response.data.id;config.model.domain_name=response.data.domain_name;config.model.domain_id=response.data.domain_id;config.model.name=response.data.name;config.model.email=response.data.email;config.model.description=response.data.description;config.model.project=response.data.default_project_id;return modal.open(config).then(submit);});}
function submit(context){delete context.model.domain_name;delete context.model.domain_id;delete context.model.enabled;return keystone.editUser(context.model).then(success);function success(){toast.add('success',interpolate(message.success,[context.model.name]));return actionResultService.getActionResult().updated(resourceType,context.model.id).result;}}}})();(function(){'use strict';angular.module('horizon.dashboard.identity.users.actions').factory('horizon.dashboard.identity.users.actions.workflow.service',UserWorkflow);UserWorkflow.$inject=['horizon.app.core.openstack-service-api.keystone','horizon.dashboard.identity.users.basePath'];function UserWorkflow(keystone,basePath){var workflow={init:init};function init(action,adminPassword,errorCode){var errorTemplate=typeof errorCode==="string"?errorCode.toLowerCase().replace(/_/g,"-"):"default";var schema={type:'object',properties:{domain_name:{title:gettext('Domain Name'),type:'string',readOnly:true},domain_id:{title:gettext('Domain Id'),type:'string',readOnly:true},name:{title:gettext('User Name'),type:'string'},email:{title:gettext('Email'),type:'string'},password:{title:gettext('Password'),type:'string'},admin_password:{title:gettext('Admin Password'),type:'string'},project:{title:gettext('Primary Project'),type:'string'},role:{title:gettext('Role'),type:'string'},description:{title:gettext('Description'),type:'string'},enabled:{title:gettext('Enabled'),type:'boolean',default:true}},required:['name','password','project','role','enabled']};if(adminPassword){schema.required.push('admin_password');}
var form=[{type:'section',htmlClass:'row',items:[{type:'section',htmlClass:'col-sm-12',items:[{type:'template',templateUrl:basePath+"actions/workflow/error."+errorTemplate+".html",condition:errorTemplate==="default"}]},{type:'section',htmlClass:'col-sm-4',items:[{key:'domain_name'},{key:'email',condition:action==='password'},{key:'password',type:'password',condition:action==='update'}]},{type:'section',htmlClass:'col-sm-4',items:[{key:'domain_id'},{key:'project',type:'select',titleMap:[],condition:action==='password'},{key:'confirm',type:'password-confirm',title:gettext('Confirm Password'),match:'model.password',condition:action==='update'}]},{type:'section',htmlClass:'col-sm-4',items:[{key:'name',readonly:action==='password'},{key:'role',type:'select',titleMap:[],condition:action==='update'||action==='password'},{key:'admin_password',type:'password',condition:!(action==='password'&&adminPassword)}]},{type:'section',htmlClass:'col-sm-12',items:[{key:'description',condition:action==='password'},{key:'enabled',condition:action==='update'||action==='password'}]}]}];var model={};var config={schema:schema,form:form,model:model,size:'md',helpUrl:basePath+"actions/workflow/info."+action+".help.html"};keystone.getVersion().then(function(response){var apiVersion=response.data.version;var domainName=config.form[0].items[1].items[0];var domainId=config.form[0].items[2].items[0];if(apiVersion!=="3"){domainName.condition=true;domainId.condition=true;}
return apiVersion;});keystone.getDefaultDomain().then(function(response){config.model.domain_name=response.data.name;config.model.domain_id=response.data.id;return response.data;});keystone.getProjects().then(function(response){var projectField=config.form[0].items[2].items[1];projectField.titleMap=response.data.items.map(function each(item){return{value:item.id,name:item.name};});});keystone.getRoles().then(function(response){var roleField=config.form[0].items[3].items[1];roleField.titleMap=response.data.items.map(function each(item){return{value:item.id,name:item.name};});});return config;}
return workflow;}})();(function(){"use strict";angular.module('horizon.dashboard.identity.users').controller('UserOverviewController',UserOverviewController);UserOverviewController.$inject=['horizon.dashboard.identity.users.resourceType','horizon.framework.conf.resource-type-registry.service','$scope'];function UserOverviewController(userResourceType,registry,$scope){var ctrl=this;ctrl.user={};ctrl.resourceType=registry.getResourceType(userResourceType);$scope.context.loadPromise.then(onGetUser);function onGetUser(user){ctrl.user=user.data;}}})();(function(){"use strict";angular.module('horizon.dashboard.identity.users').factory('horizon.dashboard.identity.users.service',userService);userService.$inject=['$q','horizon.app.core.openstack-service-api.keystone','horizon.app.core.detailRoute','horizon.app.core.openstack-service-api.policy','horizon.app.core.openstack-service-api.settings'];function userService($q,keystone,detailRoute,policy,settings){return{getDetailsPath:getDetailsPath,getUserPromise:getUserPromise,getUsersPromise:getUsersPromise,getFilterFirstSettingPromise:getFilterFirstSettingPromise};function getDetailsPath(item){return detailRoute+'OS::Keystone::User/'+item.id;}
function getUsersPromise(params){var rules=[['identity','identity:list_users']];return policy.ifAllowed({rules:rules}).then(policySuccess,policyFailed);function policySuccess(){return keystone.getUsers(params).then(modifyResponse);}
function policyFailed(){return keystone.getUser('current').then(modifyResponse);}
function modifyResponse(response){if(!angular.isArray(response.data.items)){response.data.items=[angular.copy(response.data)];}
return{data:{items:response.data.items.map(modifyItem)}};function modifyItem(item){item.trackBy=item.id+item.name+item.email+item.project+
item.description+item.enabled;return item;}}}
function getUserPromise(identifier){return $q.all([keystone.getVersion(),keystone.getUser(identifier)]).then(getUserDetails);}
function getUserDetails(response){var version=response[0].data.version;var user=response[1];if(user.data.default_project_id){keystone.getProject(user.data.default_project_id).then(addProjectName);}
if(version&&version>=3){return keystone.getDomain(user.data.domain_id).then(modifyResponse);}else{return user;}
function addProjectName(project){user.data.project_name=project.data.name;return user;}
function modifyResponse(domain){user.data.domain_name=domain.data.name;return user;}}
function getFilterFirstSettingPromise(){return settings.getSetting('FILTER_DATA_FIRST',{'identity.users':false}).then(resolve);function resolve(result){return result['identity.users'];}}}})();/*!
 * AngularJS Material Design
 * https://github.com/angular/material
 * @license MIT
 * v1.1.5
 */(function(window,angular,undefined){"use strict";(function(){"use strict";angular.module('ngMaterial',["ng","ngAnimate","ngAria","material.core","material.core.gestures","material.core.interaction","material.core.layout","material.core.meta","material.core.theming.palette","material.core.theming","material.core.animate","material.components.autocomplete","material.components.backdrop","material.components.bottomSheet","material.components.button","material.components.card","material.components.chips","material.components.checkbox","material.components.colors","material.components.content","material.components.datepicker","material.components.dialog","material.components.divider","material.components.fabActions","material.components.fabShared","material.components.fabSpeedDial","material.components.fabToolbar","material.components.icon","material.components.gridList","material.components.input","material.components.list","material.components.menu","material.components.menuBar","material.components.navBar","material.components.panel","material.components.progressCircular","material.components.progressLinear","material.components.radioButton","material.components.select","material.components.showHide","material.components.sidenav","material.components.slider","material.components.sticky","material.components.subheader","material.components.swipe","material.components.switch","material.components.tabs","material.components.toast","material.components.toolbar","material.components.tooltip","material.components.truncate","material.components.virtualRepeat","material.components.whiteframe"]);})();(function(){"use strict";DetectNgTouch.$inject=["$log","$injector"];MdCoreConfigure.$inject=["$provide","$mdThemingProvider"];rAFDecorator.$inject=["$delegate"];qDecorator.$inject=["$delegate"];angular.module('material.core',['ngAnimate','material.core.animate','material.core.layout','material.core.interaction','material.core.gestures','material.core.theming']).config(MdCoreConfigure).run(DetectNgTouch);function DetectNgTouch($log,$injector){if($injector.has('$swipe')){var msg=""+"You are using the ngTouch module. \n"+"AngularJS Material already has mobile click, tap, and swipe support... \n"+"ngTouch is not supported with AngularJS Material!";$log.warn(msg);}}
function MdCoreConfigure($provide,$mdThemingProvider){$provide.decorator('$$rAF',['$delegate',rAFDecorator]);$provide.decorator('$q',['$delegate',qDecorator]);$mdThemingProvider.theme('default').primaryPalette('indigo').accentPalette('pink').warnPalette('deep-orange').backgroundPalette('grey');}
function rAFDecorator($delegate){$delegate.throttle=function(cb){var queuedArgs,alreadyQueued,queueCb,context;return function debounced(){queuedArgs=arguments;context=this;queueCb=cb;if(!alreadyQueued){alreadyQueued=true;$delegate(function(){queueCb.apply(context,Array.prototype.slice.call(queuedArgs));alreadyQueued=false;});}};};return $delegate;}
function qDecorator($delegate){if(!$delegate.resolve){$delegate.resolve=$delegate.when;}
return $delegate;}})();(function(){"use strict";MdAutofocusDirective.$inject=["$parse"];angular.module('material.core').directive('mdAutofocus',MdAutofocusDirective).directive('mdAutoFocus',MdAutofocusDirective).directive('mdSidenavFocus',MdAutofocusDirective);function MdAutofocusDirective($parse){return{restrict:'A',link:{pre:preLink}};function preLink(scope,element,attr){var attrExp=attr.mdAutoFocus||attr.mdAutofocus||attr.mdSidenavFocus;updateExpression($parse(attrExp)(scope));if(attrExp){scope.$watch(attrExp,updateExpression);}
function updateExpression(value){if(angular.isUndefined(value)){value=true;}
element.toggleClass('md-autofocus',!!value);}}}})();(function(){"use strict";angular.module('material.core').factory('$mdColorUtil',ColorUtilFactory);function ColorUtilFactory(){function hexToRgba(color){var hex=color[0]==='#'?color.substr(1):color,dig=hex.length/3,red=hex.substr(0,dig),green=hex.substr(dig,dig),blue=hex.substr(dig*2);if(dig===1){red+=red;green+=green;blue+=blue;}
return'rgba('+parseInt(red,16)+','+parseInt(green,16)+','+parseInt(blue,16)+',0.1)';}
function rgbaToHex(color){color=color.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);var hex=(color&&color.length===4)?"#"+
("0"+parseInt(color[1],10).toString(16)).slice(-2)+
("0"+parseInt(color[2],10).toString(16)).slice(-2)+
("0"+parseInt(color[3],10).toString(16)).slice(-2):'';return hex.toUpperCase();}
function rgbToRgba(color){return color.replace(')',', 0.1)').replace('(','a(');}
function rgbaToRgb(color){return color?color.replace('rgba','rgb').replace(/,[^\),]+\)/,')'):'rgb(0,0,0)';}
return{rgbaToHex:rgbaToHex,hexToRgba:hexToRgba,rgbToRgba:rgbToRgba,rgbaToRgb:rgbaToRgb};}})();(function(){"use strict";angular.module('material.core').factory('$mdConstant',MdConstantFactory);function MdConstantFactory(){var prefixTestEl=document.createElement('div');var vendorPrefix=getVendorPrefix(prefixTestEl);var isWebkit=/webkit/i.test(vendorPrefix);var SPECIAL_CHARS_REGEXP=/([:\-_]+(.))/g;function vendorProperty(name){var prefixedName=vendorPrefix+'-'+name;var ucPrefix=camelCase(prefixedName);var lcPrefix=ucPrefix.charAt(0).toLowerCase()+ucPrefix.substring(1);return hasStyleProperty(prefixTestEl,name)?name:hasStyleProperty(prefixTestEl,ucPrefix)?ucPrefix:hasStyleProperty(prefixTestEl,lcPrefix)?lcPrefix:name;}
function hasStyleProperty(testElement,property){return angular.isDefined(testElement.style[property]);}
function camelCase(input){return input.replace(SPECIAL_CHARS_REGEXP,function(matches,separator,letter,offset){return offset?letter.toUpperCase():letter;});}
function getVendorPrefix(testElement){var prop,match;var vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/;for(prop in testElement.style){if(match=vendorRegex.exec(prop)){return match[0];}}}
var self={isInputKey:function(e){return(e.keyCode>=31&&e.keyCode<=90);},isNumPadKey:function(e){return(3===e.location&&e.keyCode>=97&&e.keyCode<=105);},isMetaKey:function(e){return(e.keyCode>=91&&e.keyCode<=93);},isFnLockKey:function(e){return(e.keyCode>=112&&e.keyCode<=145);},isNavigationKey:function(e){var kc=self.KEY_CODE,NAVIGATION_KEYS=[kc.SPACE,kc.ENTER,kc.UP_ARROW,kc.DOWN_ARROW];return(NAVIGATION_KEYS.indexOf(e.keyCode)!=-1);},hasModifierKey:function(e){return e.ctrlKey||e.metaKey||e.altKey;},ELEMENT_MAX_PIXELS:1533917,BEFORE_NG_ARIA:210,KEY_CODE:{COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},CSS:{TRANSITIONEND:'transitionend'+(isWebkit?' webkitTransitionEnd':''),ANIMATIONEND:'animationend'+(isWebkit?' webkitAnimationEnd':''),TRANSFORM:vendorProperty('transform'),TRANSFORM_ORIGIN:vendorProperty('transformOrigin'),TRANSITION:vendorProperty('transition'),TRANSITION_DURATION:vendorProperty('transitionDuration'),ANIMATION_PLAY_STATE:vendorProperty('animationPlayState'),ANIMATION_DURATION:vendorProperty('animationDuration'),ANIMATION_NAME:vendorProperty('animationName'),ANIMATION_TIMING:vendorProperty('animationTimingFunction'),ANIMATION_DIRECTION:vendorProperty('animationDirection')},MEDIA:{'xs':'(max-width: 599px)','gt-xs':'(min-width: 600px)','sm':'(min-width: 600px) and (max-width: 959px)','gt-sm':'(min-width: 960px)','md':'(min-width: 960px) and (max-width: 1279px)','gt-md':'(min-width: 1280px)','lg':'(min-width: 1280px) and (max-width: 1919px)','gt-lg':'(min-width: 1920px)','xl':'(min-width: 1920px)','landscape':'(orientation: landscape)','portrait':'(orientation: portrait)','print':'print'},MEDIA_PRIORITY:['xl','gt-lg','lg','gt-md','md','gt-sm','sm','gt-xs','xs','landscape','portrait','print']};return self;}})();(function(){"use strict";angular.module('material.core').config(["$provide",function($provide){$provide.decorator('$mdUtil',['$delegate',function($delegate){$delegate.iterator=MdIterator;return $delegate;}]);}]);function MdIterator(items,reloop){var trueFn=function(){return true;};if(items&&!angular.isArray(items)){items=Array.prototype.slice.call(items);}
reloop=!!reloop;var _items=items||[];return{items:getItems,count:count,inRange:inRange,contains:contains,indexOf:indexOf,itemAt:itemAt,findBy:findBy,add:add,remove:remove,first:first,last:last,next:angular.bind(null,findSubsequentItem,false),previous:angular.bind(null,findSubsequentItem,true),hasPrevious:hasPrevious,hasNext:hasNext};function getItems(){return[].concat(_items);}
function count(){return _items.length;}
function inRange(index){return _items.length&&(index>-1)&&(index<_items.length);}
function hasNext(item){return item?inRange(indexOf(item)+1):false;}
function hasPrevious(item){return item?inRange(indexOf(item)-1):false;}
function itemAt(index){return inRange(index)?_items[index]:null;}
function findBy(key,val){return _items.filter(function(item){return item[key]===val;});}
function add(item,index){if(!item)return-1;if(!angular.isNumber(index)){index=_items.length;}
_items.splice(index,0,item);return indexOf(item);}
function remove(item){if(contains(item)){_items.splice(indexOf(item),1);}}
function indexOf(item){return _items.indexOf(item);}
function contains(item){return item&&(indexOf(item)>-1);}
function first(){return _items.length?_items[0]:null;}
function last(){return _items.length?_items[_items.length-1]:null;}
function findSubsequentItem(backwards,item,validate,limit){validate=validate||trueFn;var curIndex=indexOf(item);while(true){if(!inRange(curIndex))return null;var nextIndex=curIndex+(backwards?-1:1);var foundItem=null;if(inRange(nextIndex)){foundItem=_items[nextIndex];}else if(reloop){foundItem=backwards?last():first();nextIndex=indexOf(foundItem);}
if((foundItem===null)||(nextIndex===limit))return null;if(validate(foundItem))return foundItem;if(angular.isUndefined(limit))limit=nextIndex;curIndex=nextIndex;}}}})();(function(){"use strict";mdMediaFactory.$inject=["$mdConstant","$rootScope","$window"];angular.module('material.core').factory('$mdMedia',mdMediaFactory);function mdMediaFactory($mdConstant,$rootScope,$window){var queries={};var mqls={};var results={};var normalizeCache={};$mdMedia.getResponsiveAttribute=getResponsiveAttribute;$mdMedia.getQuery=getQuery;$mdMedia.watchResponsiveAttributes=watchResponsiveAttributes;return $mdMedia;function $mdMedia(query){var validated=queries[query];if(angular.isUndefined(validated)){validated=queries[query]=validate(query);}
var result=results[validated];if(angular.isUndefined(result)){result=add(validated);}
return result;}
function validate(query){return $mdConstant.MEDIA[query]||((query.charAt(0)!=='(')?('('+query+')'):query);}
function add(query){var result=mqls[query];if(!result){result=mqls[query]=$window.matchMedia(query);}
result.addListener(onQueryChange);return(results[result.media]=!!result.matches);}
function onQueryChange(query){$rootScope.$evalAsync(function(){results[query.media]=!!query.matches;});}
function getQuery(name){return mqls[name];}
function getResponsiveAttribute(attrs,attrName){for(var i=0;i<$mdConstant.MEDIA_PRIORITY.length;i++){var mediaName=$mdConstant.MEDIA_PRIORITY[i];if(!mqls[queries[mediaName]].matches){continue;}
var normalizedName=getNormalizedName(attrs,attrName+'-'+mediaName);if(attrs[normalizedName]){return attrs[normalizedName];}}
return attrs[getNormalizedName(attrs,attrName)];}
function watchResponsiveAttributes(attrNames,attrs,watchFn){var unwatchFns=[];attrNames.forEach(function(attrName){var normalizedName=getNormalizedName(attrs,attrName);if(angular.isDefined(attrs[normalizedName])){unwatchFns.push(attrs.$observe(normalizedName,angular.bind(void 0,watchFn,null)));}
for(var mediaName in $mdConstant.MEDIA){normalizedName=getNormalizedName(attrs,attrName+'-'+mediaName);if(angular.isDefined(attrs[normalizedName])){unwatchFns.push(attrs.$observe(normalizedName,angular.bind(void 0,watchFn,mediaName)));}}});return function unwatch(){unwatchFns.forEach(function(fn){fn();});};}
function getNormalizedName(attrs,attrName){return normalizeCache[attrName]||(normalizeCache[attrName]=attrs.$normalize(attrName));}}})();(function(){"use strict";angular.module('material.core').config(["$provide",function($provide){$provide.decorator('$mdUtil',['$delegate',function($delegate){$delegate.prefixer=MdPrefixer;return $delegate;}]);}]);function MdPrefixer(initialAttributes,buildSelector){var PREFIXES=['data','x'];if(initialAttributes){return buildSelector?_buildSelector(initialAttributes):_buildList(initialAttributes);}
return{buildList:_buildList,buildSelector:_buildSelector,hasAttribute:_hasAttribute,removeAttribute:_removeAttribute};function _buildList(attributes){attributes=angular.isArray(attributes)?attributes:[attributes];attributes.forEach(function(item){PREFIXES.forEach(function(prefix){attributes.push(prefix+'-'+item);});});return attributes;}
function _buildSelector(attributes){attributes=angular.isArray(attributes)?attributes:[attributes];return _buildList(attributes).map(function(item){return'['+item+']';}).join(',');}
function _hasAttribute(element,attribute){element=_getNativeElement(element);if(!element){return false;}
var prefixedAttrs=_buildList(attribute);for(var i=0;i<prefixedAttrs.length;i++){if(element.hasAttribute(prefixedAttrs[i])){return true;}}
return false;}
function _removeAttribute(element,attribute){element=_getNativeElement(element);if(!element){return;}
_buildList(attribute).forEach(function(prefixedAttribute){element.removeAttribute(prefixedAttribute);});}
function _getNativeElement(element){element=element[0]||element;if(element.nodeType){return element;}}}})();(function(){"use strict";UtilFactory.$inject=["$document","$timeout","$compile","$rootScope","$$mdAnimate","$interpolate","$log","$rootElement","$window","$$rAF"];var nextUniqueId=0;angular.module('material.core').factory('$mdUtil',UtilFactory);function UtilFactory($document,$timeout,$compile,$rootScope,$$mdAnimate,$interpolate,$log,$rootElement,$window,$$rAF){var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),usesStandardSymbols=((startSymbol==='{{')&&(endSymbol==='}}'));var hasComputedStyle=function(target,key,expectedVal){var hasValue=false;if(target&&target.length){var computedStyles=$window.getComputedStyle(target[0]);hasValue=angular.isDefined(computedStyles[key])&&(expectedVal?computedStyles[key]==expectedVal:true);}
return hasValue;};function validateCssValue(value){return!value?'0':hasPx(value)||hasPercent(value)?value:value+'px';}
function hasPx(value){return String(value).indexOf('px')>-1;}
function hasPercent(value){return String(value).indexOf('%')>-1;}
var $mdUtil={dom:{},now:window.performance&&window.performance.now?angular.bind(window.performance,window.performance.now):Date.now||function(){return new Date().getTime();},getModelOption:function(ngModelCtrl,optionName){if(!ngModelCtrl.$options){return;}
var $options=ngModelCtrl.$options;return $options.getOption?$options.getOption(optionName):$options[optionName]},bidi:function(element,property,lValue,rValue){var ltr=!($document[0].dir=='rtl'||$document[0].body.dir=='rtl');if(arguments.length==0)return ltr?'ltr':'rtl';var elem=angular.element(element);if(ltr&&angular.isDefined(lValue)){elem.css(property,validateCssValue(lValue));}
else if(!ltr&&angular.isDefined(rValue)){elem.css(property,validateCssValue(rValue));}},bidiProperty:function(element,lProperty,rProperty,value){var ltr=!($document[0].dir=='rtl'||$document[0].body.dir=='rtl');var elem=angular.element(element);if(ltr&&angular.isDefined(lProperty)){elem.css(lProperty,validateCssValue(value));elem.css(rProperty,'');}
else if(!ltr&&angular.isDefined(rProperty)){elem.css(rProperty,validateCssValue(value));elem.css(lProperty,'');}},clientRect:function(element,offsetParent,isOffsetRect){var node=getNode(element);offsetParent=getNode(offsetParent||node.offsetParent||document.body);var nodeRect=node.getBoundingClientRect();var offsetRect=isOffsetRect?offsetParent.getBoundingClientRect():{left:0,top:0,width:0,height:0};return{left:nodeRect.left-offsetRect.left,top:nodeRect.top-offsetRect.top,width:nodeRect.width,height:nodeRect.height};},offsetRect:function(element,offsetParent){return $mdUtil.clientRect(element,offsetParent,true);},nodesToArray:function(nodes){nodes=nodes||[];var results=[];for(var i=0;i<nodes.length;++i){results.push(nodes.item(i));}
return results;},getViewportTop:function(){return window.scrollY||window.pageYOffset||0;},findFocusTarget:function(containerEl,attributeVal){var AUTO_FOCUS=this.prefixer('md-autofocus',true);var elToFocus;elToFocus=scanForFocusable(containerEl,attributeVal||AUTO_FOCUS);if(!elToFocus&&attributeVal!=AUTO_FOCUS){elToFocus=scanForFocusable(containerEl,this.prefixer('md-auto-focus',true));if(!elToFocus){elToFocus=scanForFocusable(containerEl,AUTO_FOCUS);}}
return elToFocus;function scanForFocusable(target,selector){var elFound,items=target[0].querySelectorAll(selector);if(items&&items.length){items.length&&angular.forEach(items,function(it){it=angular.element(it);var isFocusable=it.hasClass('md-autofocus');if(isFocusable)elFound=it;});}
return elFound;}},disableScrollAround:function(element,parent,options){options=options||{};$mdUtil.disableScrollAround._count=Math.max(0,$mdUtil.disableScrollAround._count||0);$mdUtil.disableScrollAround._count++;if($mdUtil.disableScrollAround._restoreScroll){return $mdUtil.disableScrollAround._restoreScroll;}
var body=$document[0].body;var restoreBody=disableBodyScroll();var restoreElement=disableElementScroll(parent);return $mdUtil.disableScrollAround._restoreScroll=function(){if(--$mdUtil.disableScrollAround._count<=0){restoreBody();restoreElement();delete $mdUtil.disableScrollAround._restoreScroll;}};function disableElementScroll(element){element=angular.element(element||body);var scrollMask;if(options.disableScrollMask){scrollMask=element;}else{scrollMask=angular.element('<div class="md-scroll-mask">'+'  <div class="md-scroll-mask-bar"></div>'+'</div>');element.append(scrollMask);}
scrollMask.on('wheel',preventDefault);scrollMask.on('touchmove',preventDefault);return function restoreElementScroll(){scrollMask.off('wheel');scrollMask.off('touchmove');if(!options.disableScrollMask&&scrollMask[0].parentNode){scrollMask[0].parentNode.removeChild(scrollMask[0]);}};function preventDefault(e){e.preventDefault();}}
function disableBodyScroll(){var documentElement=$document[0].documentElement;var prevDocumentStyle=documentElement.style.cssText||'';var prevBodyStyle=body.style.cssText||'';var viewportTop=$mdUtil.getViewportTop();var clientWidth=body.clientWidth;var hasVerticalScrollbar=body.scrollHeight>body.clientHeight+1;var scrollElement=documentElement.scrollTop>0?documentElement:body;if(hasVerticalScrollbar){angular.element(body).css({position:'fixed',width:'100%',top:-viewportTop+'px'});}
if(body.clientWidth<clientWidth){body.style.overflow='hidden';}
if(hasVerticalScrollbar){documentElement.style.overflowY='scroll';}
return function restoreScroll(){body.style.cssText=prevBodyStyle;documentElement.style.cssText=prevDocumentStyle;scrollElement.scrollTop=viewportTop;};}},enableScrolling:function(){var restoreFn=this.disableScrollAround._restoreScroll;restoreFn&&restoreFn();},floatingScrollbars:function(){if(this.floatingScrollbars.cached===undefined){var tempNode=angular.element('<div><div></div></div>').css({width:'100%','z-index':-1,position:'absolute',height:'35px','overflow-y':'scroll'});tempNode.children().css('height','60px');$document[0].body.appendChild(tempNode[0]);this.floatingScrollbars.cached=(tempNode[0].offsetWidth==tempNode[0].childNodes[0].offsetWidth);tempNode.remove();}
return this.floatingScrollbars.cached;},forceFocus:function(element){var node=element[0]||element;document.addEventListener('click',function focusOnClick(ev){if(ev.target===node&&ev.$focus){node.focus();ev.stopImmediatePropagation();ev.preventDefault();node.removeEventListener('click',focusOnClick);}},true);var newEvent=document.createEvent('MouseEvents');newEvent.initMouseEvent('click',false,true,window,{},0,0,0,0,false,false,false,false,0,null);newEvent.$material=true;newEvent.$focus=true;node.dispatchEvent(newEvent);},createBackdrop:function(scope,addClass){return $compile($mdUtil.supplant('<md-backdrop class="{0}">',[addClass]))(scope);},supplant:function(template,values,pattern){pattern=pattern||/\{([^\{\}]*)\}/g;return template.replace(pattern,function(a,b){var p=b.split('.'),r=values;try{for(var s in p){if(p.hasOwnProperty(s)){r=r[p[s]];}}}catch(e){r=a;}
return(typeof r==='string'||typeof r==='number')?r:a;});},fakeNgModel:function(){return{$fake:true,$setTouched:angular.noop,$setViewValue:function(value){this.$viewValue=value;this.$render(value);this.$viewChangeListeners.forEach(function(cb){cb();});},$isEmpty:function(value){return(''+value).length===0;},$parsers:[],$formatters:[],$viewChangeListeners:[],$render:angular.noop};},debounce:function(func,wait,scope,invokeApply){var timer;return function debounced(){var context=scope,args=Array.prototype.slice.call(arguments);$timeout.cancel(timer);timer=$timeout(function(){timer=undefined;func.apply(context,args);},wait||10,invokeApply);};},throttle:function throttle(func,delay){var recent;return function throttled(){var context=this;var args=arguments;var now=$mdUtil.now();if(!recent||(now-recent>delay)){func.apply(context,args);recent=now;}};},time:function time(cb){var start=$mdUtil.now();cb();return $mdUtil.now()-start;},valueOnUse:function(scope,key,getter){var value=null,args=Array.prototype.slice.call(arguments);var params=(args.length>3)?args.slice(3):[];Object.defineProperty(scope,key,{get:function(){if(value===null)value=getter.apply(scope,params);return value;}});},nextUid:function(){return''+nextUniqueId++;},disconnectScope:function disconnectScope(scope){if(!scope)return;if(scope.$root===scope)return;if(scope.$$destroyed)return;var parent=scope.$parent;scope.$$disconnected=true;if(parent.$$childHead===scope)parent.$$childHead=scope.$$nextSibling;if(parent.$$childTail===scope)parent.$$childTail=scope.$$prevSibling;if(scope.$$prevSibling)scope.$$prevSibling.$$nextSibling=scope.$$nextSibling;if(scope.$$nextSibling)scope.$$nextSibling.$$prevSibling=scope.$$prevSibling;scope.$$nextSibling=scope.$$prevSibling=null;},reconnectScope:function reconnectScope(scope){if(!scope)return;if(scope.$root===scope)return;if(!scope.$$disconnected)return;var child=scope;var parent=child.$parent;child.$$disconnected=false;child.$$prevSibling=parent.$$childTail;if(parent.$$childHead){parent.$$childTail.$$nextSibling=child;parent.$$childTail=child;}else{parent.$$childHead=parent.$$childTail=child;}},getClosest:function getClosest(el,validateWith,onlyParent){if(angular.isString(validateWith)){var tagName=validateWith.toUpperCase();validateWith=function(el){return el.nodeName.toUpperCase()===tagName;};}
if(el instanceof angular.element)el=el[0];if(onlyParent)el=el.parentNode;if(!el)return null;do{if(validateWith(el)){return el;}}while(el=el.parentNode);return null;},elementContains:function(node,child){var hasContains=(window.Node&&window.Node.prototype&&Node.prototype.contains);var findFn=hasContains?angular.bind(node,node.contains):angular.bind(node,function(arg){return(node===child)||!!(this.compareDocumentPosition(arg)&16)});return findFn(child);},extractElementByName:function(element,nodeName,scanDeep,warnNotFound){var found=scanTree(element);if(!found&&!!warnNotFound){$log.warn($mdUtil.supplant("Unable to find node '{0}' in element '{1}'.",[nodeName,element[0].outerHTML]));}
return angular.element(found||element);function scanTree(element){return scanLevel(element)||(!!scanDeep?scanChildren(element):null);}
function scanLevel(element){if(element){for(var i=0,len=element.length;i<len;i++){if(element[i].nodeName.toLowerCase()===nodeName){return element[i];}}}
return null;}
function scanChildren(element){var found;if(element){for(var i=0,len=element.length;i<len;i++){var target=element[i];if(!found){for(var j=0,numChild=target.childNodes.length;j<numChild;j++){found=found||scanTree([target.childNodes[j]]);}}}}
return found;}},initOptionalProperties:function(scope,attr,defaults){defaults=defaults||{};angular.forEach(scope.$$isolateBindings,function(binding,key){if(binding.optional&&angular.isUndefined(scope[key])){var attrIsDefined=angular.isDefined(attr[binding.attrName]);scope[key]=angular.isDefined(defaults[key])?defaults[key]:attrIsDefined;}});},nextTick:function(callback,digest,scope){var nextTick=$mdUtil.nextTick;var timeout=nextTick.timeout;var queue=nextTick.queue||[];queue.push({scope:scope,callback:callback});if(digest==null)digest=true;nextTick.digest=nextTick.digest||digest;nextTick.queue=queue;return timeout||(nextTick.timeout=$timeout(processQueue,0,false));function processQueue(){var queue=nextTick.queue;var digest=nextTick.digest;nextTick.queue=[];nextTick.timeout=null;nextTick.digest=false;queue.forEach(function(queueItem){var skip=queueItem.scope&&queueItem.scope.$$destroyed;if(!skip){queueItem.callback();}});if(digest)$rootScope.$digest();}},processTemplate:function(template){if(usesStandardSymbols){return template;}else{if(!template||!angular.isString(template))return template;return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol);}},getParentWithPointerEvents:function(element){var parent=element.parent();while(hasComputedStyle(parent,'pointer-events','none')){parent=parent.parent();}
return parent;},getNearestContentElement:function(element){var current=element.parent()[0];while(current&&current!==$rootElement[0]&&current!==document.body&&current.nodeName.toUpperCase()!=='MD-CONTENT'){current=current.parentNode;}
return current;},checkStickySupport:function(){var stickyProp;var testEl=angular.element('<div>');$document[0].body.appendChild(testEl[0]);var stickyProps=['sticky','-webkit-sticky'];for(var i=0;i<stickyProps.length;++i){testEl.css({position:stickyProps[i],top:0,'z-index':2});if(testEl.css('position')==stickyProps[i]){stickyProp=stickyProps[i];break;}}
testEl.remove();return stickyProp;},parseAttributeBoolean:function(value,negatedCheck){return value===''||!!value&&(negatedCheck===false||value!=='false'&&value!=='0');},hasComputedStyle:hasComputedStyle,isParentFormSubmitted:function(element){var parent=$mdUtil.getClosest(element,'form');var form=parent?angular.element(parent).controller('form'):null;return form?form.$submitted:false;},animateScrollTo:function(element,scrollEnd,duration){var scrollStart=element.scrollTop;var scrollChange=scrollEnd-scrollStart;var scrollingDown=scrollStart<scrollEnd;var startTime=$mdUtil.now();$$rAF(scrollChunk);function scrollChunk(){var newPosition=calculateNewPosition();element.scrollTop=newPosition;if(scrollingDown?newPosition<scrollEnd:newPosition>scrollEnd){$$rAF(scrollChunk);}}
function calculateNewPosition(){var easeDuration=duration||1000;var currentTime=$mdUtil.now()-startTime;return ease(currentTime,scrollStart,scrollChange,easeDuration);}
function ease(currentTime,start,change,duration){if(currentTime>duration){return start+change;}
var ts=(currentTime/=duration)*currentTime;var tc=ts*currentTime;return start+change*(-2*tc+3*ts);}},uniq:function(array){if(!array){return;}
return array.filter(function(value,index,self){return self.indexOf(value)===index;});}};$mdUtil.dom.animator=$$mdAnimate($mdUtil);return $mdUtil;function getNode(el){return el[0]||el;}}
angular.element.prototype.focus=angular.element.prototype.focus||function(){if(this.length){this[0].focus();}
return this;};angular.element.prototype.blur=angular.element.prototype.blur||function(){if(this.length){this[0].blur();}
return this;};})();(function(){"use strict";MdAriaService.$inject=["$$rAF","$log","$window","$interpolate"];angular.module('material.core').provider('$mdAria',MdAriaProvider);function MdAriaProvider(){var config={showWarnings:true};return{disableWarnings:disableWarnings,$get:["$$rAF","$log","$window","$interpolate",function($$rAF,$log,$window,$interpolate){return MdAriaService.apply(config,arguments);}]};function disableWarnings(){config.showWarnings=false;}}
function MdAriaService($$rAF,$log,$window,$interpolate){var showWarnings=this.showWarnings;return{expect:expect,expectAsync:expectAsync,expectWithText:expectWithText,expectWithoutText:expectWithoutText,getText:getText,hasAriaLabel:hasAriaLabel,parentHasAriaLabel:parentHasAriaLabel};function expect(element,attrName,defaultValue){var node=angular.element(element)[0]||element;if(node&&((!node.hasAttribute(attrName)||node.getAttribute(attrName).length===0)&&!childHasAttribute(node,attrName))){defaultValue=angular.isString(defaultValue)?defaultValue.trim():'';if(defaultValue.length){element.attr(attrName,defaultValue);}else if(showWarnings){$log.warn('ARIA: Attribute "',attrName,'", required for accessibility, is missing on node:',node);}}}
function expectAsync(element,attrName,defaultValueGetter){$$rAF(function(){expect(element,attrName,defaultValueGetter());});}
function expectWithText(element,attrName){var content=getText(element)||"";var hasBinding=content.indexOf($interpolate.startSymbol())>-1;if(hasBinding){expectAsync(element,attrName,function(){return getText(element);});}else{expect(element,attrName,content);}}
function expectWithoutText(element,attrName){var content=getText(element);var hasBinding=content.indexOf($interpolate.startSymbol())>-1;if(!hasBinding&&!content){expect(element,attrName,content);}}
function getText(element){element=element[0]||element;var walker=document.createTreeWalker(element,NodeFilter.SHOW_TEXT,null,false);var text='';var node;while(node=walker.nextNode()){if(!isAriaHiddenNode(node)){text+=node.textContent;}}
return text.trim()||'';function isAriaHiddenNode(node){while(node.parentNode&&(node=node.parentNode)!==element){if(node.getAttribute&&node.getAttribute('aria-hidden')==='true'){return true;}}}}
function childHasAttribute(node,attrName){var hasChildren=node.hasChildNodes(),hasAttr=false;function isHidden(el){var style=el.currentStyle?el.currentStyle:$window.getComputedStyle(el);return(style.display==='none');}
if(hasChildren){var children=node.childNodes;for(var i=0;i<children.length;i++){var child=children[i];if(child.nodeType===1&&child.hasAttribute(attrName)){if(!isHidden(child)){hasAttr=true;}}}}
return hasAttr;}
function hasAriaLabel(element){var node=angular.element(element)[0]||element;if(!node.hasAttribute){return false;}
return node.hasAttribute('aria-label')||node.hasAttribute('aria-labelledby')||node.hasAttribute('aria-describedby');}
function parentHasAriaLabel(element,level){level=level||1;var node=angular.element(element)[0]||element;if(!node.parentNode){return false;}
if(performCheck(node.parentNode)){return true;}
level--;if(level){return parentHasAriaLabel(node.parentNode,level);}
return false;function performCheck(parentNode){if(!hasAriaLabel(parentNode)){return false;}
if(parentNode.hasAttribute('role')){switch(parentNode.getAttribute('role').toLowerCase()){case'command':case'definition':case'directory':case'grid':case'list':case'listitem':case'log':case'marquee':case'menu':case'menubar':case'note':case'presentation':case'separator':case'scrollbar':case'status':case'tablist':return false;}}
switch(parentNode.tagName.toLowerCase()){case'abbr':case'acronym':case'address':case'applet':case'audio':case'b':case'bdi':case'bdo':case'big':case'blockquote':case'br':case'canvas':case'caption':case'center':case'cite':case'code':case'col':case'data':case'dd':case'del':case'dfn':case'dir':case'div':case'dl':case'em':case'embed':case'fieldset':case'figcaption':case'font':case'h1':case'h2':case'h3':case'h4':case'h5':case'h6':case'hgroup':case'html':case'i':case'ins':case'isindex':case'kbd':case'keygen':case'label':case'legend':case'li':case'map':case'mark':case'menu':case'object':case'ol':case'output':case'pre':case'presentation':case'q':case'rt':case'ruby':case'samp':case'small':case'source':case'span':case'status':case'strike':case'strong':case'sub':case'sup':case'svg':case'tbody':case'td':case'th':case'thead':case'time':case'tr':case'track':case'tt':case'ul':case'var':return false;}
return true;}}}})();(function(){"use strict";angular.module('material.core').provider('$mdCompiler',MdCompilerProvider);MdCompilerProvider.$inject=['$compileProvider'];function MdCompilerProvider($compileProvider){var provider=this;var respectPreAssignBindingsEnabled=false;this.respectPreAssignBindingsEnabled=function(respected){if(angular.isDefined(respected)){respectPreAssignBindingsEnabled=respected;return this;}
return respectPreAssignBindingsEnabled;};function getPreAssignBindingsEnabled(){if(!respectPreAssignBindingsEnabled){return true;}
if(typeof $compileProvider.preAssignBindingsEnabled==='function'){return $compileProvider.preAssignBindingsEnabled();}
if(angular.version.major===1&&angular.version.minor<6){return true;}
return false;}
this.$get=["$q","$templateRequest","$injector","$compile","$controller",function($q,$templateRequest,$injector,$compile,$controller){return new MdCompilerService($q,$templateRequest,$injector,$compile,$controller);}];function MdCompilerService($q,$templateRequest,$injector,$compile,$controller){this.$q=$q;this.$templateRequest=$templateRequest;this.$injector=$injector;this.$compile=$compile;this.$controller=$controller;}
MdCompilerService.prototype.compile=function(options){if(options.contentElement){return this._prepareContentElement(options);}else{return this._compileTemplate(options);}};MdCompilerService.prototype._prepareContentElement=function(options){var contentElement=this._fetchContentElement(options);return this.$q.resolve({element:contentElement.element,cleanup:contentElement.restore,locals:{},link:function(){return contentElement.element;}});};MdCompilerService.prototype._compileTemplate=function(options){var self=this;var templateUrl=options.templateUrl;var template=options.template||'';var resolve=angular.extend({},options.resolve);var locals=angular.extend({},options.locals);var transformTemplate=options.transformTemplate||angular.identity;angular.forEach(resolve,function(value,key){if(angular.isString(value)){resolve[key]=self.$injector.get(value);}else{resolve[key]=self.$injector.invoke(value);}});angular.extend(resolve,locals);if(templateUrl){resolve.$$ngTemplate=this.$templateRequest(templateUrl);}else{resolve.$$ngTemplate=this.$q.when(template);}
return this.$q.all(resolve).then(function(locals){var template=transformTemplate(locals.$$ngTemplate,options);var element=options.element||angular.element('<div>').html(template.trim()).contents();return self._compileElement(locals,element,options);});};MdCompilerService.prototype._compileElement=function(locals,element,options){var self=this;var ngLinkFn=this.$compile(element);var compileData={element:element,cleanup:element.remove.bind(element),locals:locals,link:linkFn};function linkFn(scope){locals.$scope=scope;if(options.controller){var injectLocals=angular.extend({},locals,{$element:element});var ctrl=self._createController(options,injectLocals,locals);element.data('$ngControllerController',ctrl);element.children().data('$ngControllerController',ctrl);compileData.controller=ctrl;}
return ngLinkFn(scope);}
return compileData;};MdCompilerService.prototype._createController=function(options,injectLocals,locals){var invokeCtrl=this.$controller(options.controller,injectLocals,true,options.controllerAs);if(getPreAssignBindingsEnabled()&&options.bindToController){angular.extend(invokeCtrl.instance,locals);}
var ctrl=invokeCtrl();if(!getPreAssignBindingsEnabled()&&options.bindToController){angular.extend(invokeCtrl.instance,locals);}
angular.isFunction(ctrl.$onInit)&&ctrl.$onInit();return ctrl;};MdCompilerService.prototype._fetchContentElement=function(options){var contentEl=options.contentElement;var restoreFn=null;if(angular.isString(contentEl)){contentEl=document.querySelector(contentEl);restoreFn=createRestoreFn(contentEl);}else{contentEl=contentEl[0]||contentEl;if(document.contains(contentEl)){restoreFn=createRestoreFn(contentEl);}else{restoreFn=function(){if(contentEl.parentNode){contentEl.parentNode.removeChild(contentEl);}}}}
return{element:angular.element(contentEl),restore:restoreFn};function createRestoreFn(element){var parent=element.parentNode;var nextSibling=element.nextElementSibling;return function(){if(!nextSibling){parent.appendChild(element);}else{parent.insertBefore(element,nextSibling);}}}};}})();(function(){"use strict";MdGesture.$inject=["$$MdGestureHandler","$$rAF","$timeout"];attachToDocument.$inject=["$mdGesture","$$MdGestureHandler"];var HANDLERS={};var pointer,lastPointer,forceSkipClickHijack=false,maxClickDistance=6;var lastLabelClickPos=null;var isInitialized=false;angular.module('material.core.gestures',[]).provider('$mdGesture',MdGestureProvider).factory('$$MdGestureHandler',MdGestureHandler).run(attachToDocument);function MdGestureProvider(){}
MdGestureProvider.prototype={skipClickHijack:function(){return forceSkipClickHijack=true;},setMaxClickDistance:function(clickDistance){maxClickDistance=parseInt(clickDistance);},$get:["$$MdGestureHandler","$$rAF","$timeout",function($$MdGestureHandler,$$rAF,$timeout){return new MdGesture($$MdGestureHandler,$$rAF,$timeout);}]};function MdGesture($$MdGestureHandler,$$rAF,$timeout){var userAgent=navigator.userAgent||navigator.vendor||window.opera;var isIos=userAgent.match(/ipad|iphone|ipod/i);var isAndroid=userAgent.match(/android/i);var touchActionProperty=getTouchAction();var hasJQuery=(typeof window.jQuery!=='undefined')&&(angular.element===window.jQuery);var self={handler:addHandler,register:register,isHijackingClicks:(isIos||isAndroid)&&!hasJQuery&&!forceSkipClickHijack};if(self.isHijackingClicks){self.handler('click',{options:{maxDistance:maxClickDistance},onEnd:checkDistanceAndEmit('click')});self.handler('focus',{options:{maxDistance:maxClickDistance},onEnd:function(ev,pointer){if(pointer.distance<this.state.options.maxDistance&&canFocus(ev.target)){this.dispatchEvent(ev,'focus',pointer);ev.target.focus();}}});self.handler('mouseup',{options:{maxDistance:maxClickDistance},onEnd:checkDistanceAndEmit('mouseup')});self.handler('mousedown',{onStart:function(ev){this.dispatchEvent(ev,'mousedown');}});}
function checkDistanceAndEmit(eventName){return function(ev,pointer){if(pointer.distance<this.state.options.maxDistance){this.dispatchEvent(ev,eventName,pointer);}};}
function register(element,handlerName,options){var handler=HANDLERS[handlerName.replace(/^\$md./,'')];if(!handler){throw new Error('Failed to register element with handler '+handlerName+'. '+'Available handlers: '+Object.keys(HANDLERS).join(', '));}
return handler.registerElement(element,options);}
function addHandler(name,definition){var handler=new $$MdGestureHandler(name);angular.extend(handler,definition);HANDLERS[name]=handler;return self;}
return self.handler('press',{onStart:function(ev,pointer){this.dispatchEvent(ev,'$md.pressdown');},onEnd:function(ev,pointer){this.dispatchEvent(ev,'$md.pressup');}}).handler('hold',{options:{maxDistance:6,delay:500},onCancel:function(){$timeout.cancel(this.state.timeout);},onStart:function(ev,pointer){if(!this.state.registeredParent)return this.cancel();this.state.pos={x:pointer.x,y:pointer.y};this.state.timeout=$timeout(angular.bind(this,function holdDelayFn(){this.dispatchEvent(ev,'$md.hold');this.cancel();}),this.state.options.delay,false);},onMove:function(ev,pointer){if(!touchActionProperty&&ev.type==='touchmove')ev.preventDefault();var dx=this.state.pos.x-pointer.x;var dy=this.state.pos.y-pointer.y;if(Math.sqrt(dx*dx+dy*dy)>this.options.maxDistance){this.cancel();}},onEnd:function(){this.onCancel();}}).handler('drag',{options:{minDistance:6,horizontal:true,cancelMultiplier:1.5},onSetup:function(element,options){if(touchActionProperty){this.oldTouchAction=element[0].style[touchActionProperty];element[0].style[touchActionProperty]=options.horizontal?'pan-y':'pan-x';}},onCleanup:function(element){if(this.oldTouchAction){element[0].style[touchActionProperty]=this.oldTouchAction;}},onStart:function(ev){if(!this.state.registeredParent)this.cancel();},onMove:function(ev,pointer){var shouldStartDrag,shouldCancel;if(!touchActionProperty&&ev.type==='touchmove')ev.preventDefault();if(!this.state.dragPointer){if(this.state.options.horizontal){shouldStartDrag=Math.abs(pointer.distanceX)>this.state.options.minDistance;shouldCancel=Math.abs(pointer.distanceY)>this.state.options.minDistance*this.state.options.cancelMultiplier;}else{shouldStartDrag=Math.abs(pointer.distanceY)>this.state.options.minDistance;shouldCancel=Math.abs(pointer.distanceX)>this.state.options.minDistance*this.state.options.cancelMultiplier;}
if(shouldStartDrag){this.state.dragPointer=makeStartPointer(ev);updatePointerState(ev,this.state.dragPointer);this.dispatchEvent(ev,'$md.dragstart',this.state.dragPointer);}else if(shouldCancel){this.cancel();}}else{this.dispatchDragMove(ev);}},dispatchDragMove:$$rAF.throttle(function(ev){if(this.state.isRunning){updatePointerState(ev,this.state.dragPointer);this.dispatchEvent(ev,'$md.drag',this.state.dragPointer);}}),onEnd:function(ev,pointer){if(this.state.dragPointer){updatePointerState(ev,this.state.dragPointer);this.dispatchEvent(ev,'$md.dragend',this.state.dragPointer);}}}).handler('swipe',{options:{minVelocity:0.65,minDistance:10},onEnd:function(ev,pointer){var eventType;if(Math.abs(pointer.velocityX)>this.state.options.minVelocity&&Math.abs(pointer.distanceX)>this.state.options.minDistance){eventType=pointer.directionX=='left'?'$md.swipeleft':'$md.swiperight';this.dispatchEvent(ev,eventType);}
else if(Math.abs(pointer.velocityY)>this.state.options.minVelocity&&Math.abs(pointer.distanceY)>this.state.options.minDistance){eventType=pointer.directionY=='up'?'$md.swipeup':'$md.swipedown';this.dispatchEvent(ev,eventType);}}});function getTouchAction(){var testEl=document.createElement('div');var vendorPrefixes=['','webkit','Moz','MS','ms','o'];for(var i=0;i<vendorPrefixes.length;i++){var prefix=vendorPrefixes[i];var property=prefix?prefix+'TouchAction':'touchAction';if(angular.isDefined(testEl.style[property])){return property;}}}}
function GestureHandler(name){this.name=name;this.state={};}
function MdGestureHandler(){var hasJQuery=(typeof window.jQuery!=='undefined')&&(angular.element===window.jQuery);GestureHandler.prototype={options:{},dispatchEvent:hasJQuery?jQueryDispatchEvent:nativeDispatchEvent,onSetup:angular.noop,onCleanup:angular.noop,onStart:angular.noop,onMove:angular.noop,onEnd:angular.noop,onCancel:angular.noop,start:function(ev,pointer){if(this.state.isRunning)return;var parentTarget=this.getNearestParent(ev.target);var parentTargetOptions=parentTarget&&parentTarget.$mdGesture[this.name]||{};this.state={isRunning:true,options:angular.extend({},this.options,parentTargetOptions),registeredParent:parentTarget};this.onStart(ev,pointer);},move:function(ev,pointer){if(!this.state.isRunning)return;this.onMove(ev,pointer);},end:function(ev,pointer){if(!this.state.isRunning)return;this.onEnd(ev,pointer);this.state.isRunning=false;},cancel:function(ev,pointer){this.onCancel(ev,pointer);this.state={};},getNearestParent:function(node){var current=node;while(current){if((current.$mdGesture||{})[this.name]){return current;}
current=current.parentNode;}
return null;},registerElement:function(element,options){var self=this;element[0].$mdGesture=element[0].$mdGesture||{};element[0].$mdGesture[this.name]=options||{};element.on('$destroy',onDestroy);self.onSetup(element,options||{});return onDestroy;function onDestroy(){delete element[0].$mdGesture[self.name];element.off('$destroy',onDestroy);self.onCleanup(element,options||{});}}};return GestureHandler;function jQueryDispatchEvent(srcEvent,eventType,eventPointer){eventPointer=eventPointer||pointer;var eventObj=new angular.element.Event(eventType);eventObj.$material=true;eventObj.pointer=eventPointer;eventObj.srcEvent=srcEvent;angular.extend(eventObj,{clientX:eventPointer.x,clientY:eventPointer.y,screenX:eventPointer.x,screenY:eventPointer.y,pageX:eventPointer.x,pageY:eventPointer.y,ctrlKey:srcEvent.ctrlKey,altKey:srcEvent.altKey,shiftKey:srcEvent.shiftKey,metaKey:srcEvent.metaKey});angular.element(eventPointer.target).trigger(eventObj);}
function nativeDispatchEvent(srcEvent,eventType,eventPointer){eventPointer=eventPointer||pointer;var eventObj;if(eventType==='click'||eventType=='mouseup'||eventType=='mousedown'){eventObj=document.createEvent('MouseEvents');eventObj.initMouseEvent(eventType,true,true,window,srcEvent.detail,eventPointer.x,eventPointer.y,eventPointer.x,eventPointer.y,srcEvent.ctrlKey,srcEvent.altKey,srcEvent.shiftKey,srcEvent.metaKey,srcEvent.button,srcEvent.relatedTarget||null);}else{eventObj=document.createEvent('CustomEvent');eventObj.initCustomEvent(eventType,true,true,{});}
eventObj.$material=true;eventObj.pointer=eventPointer;eventObj.srcEvent=srcEvent;eventPointer.target.dispatchEvent(eventObj);}}
function attachToDocument($mdGesture,$$MdGestureHandler){document.contains||(document.contains=function(node){return document.body.contains(node);});if(!isInitialized&&$mdGesture.isHijackingClicks){document.addEventListener('click',clickHijacker,true);document.addEventListener('mouseup',mouseInputHijacker,true);document.addEventListener('mousedown',mouseInputHijacker,true);document.addEventListener('focus',mouseInputHijacker,true);isInitialized=true;}
function mouseInputHijacker(ev){var isKeyClick=!ev.clientX&&!ev.clientY;if(!isKeyClick&&!ev.$material&&!ev.isIonicTap&&!isInputEventFromLabelClick(ev)&&(ev.type!=='mousedown'||(!canFocus(ev.target)&&!canFocus(document.activeElement)))){ev.preventDefault();ev.stopPropagation();}}
function clickHijacker(ev){var isKeyClick=ev.clientX===0&&ev.clientY===0;var isSubmitEvent=ev.target&&ev.target.type==='submit';if(!isKeyClick&&!ev.$material&&!ev.isIonicTap&&!isInputEventFromLabelClick(ev)&&!isSubmitEvent){ev.preventDefault();ev.stopPropagation();lastLabelClickPos=null;}else{lastLabelClickPos=null;if(ev.target.tagName.toLowerCase()=='label'){lastLabelClickPos={x:ev.x,y:ev.y};}}}
var START_EVENTS='mousedown touchstart pointerdown';var MOVE_EVENTS='mousemove touchmove pointermove';var END_EVENTS='mouseup mouseleave touchend touchcancel pointerup pointercancel';angular.element(document).on(START_EVENTS,gestureStart).on(MOVE_EVENTS,gestureMove).on(END_EVENTS,gestureEnd).on('$$mdGestureReset',function gestureClearCache(){lastPointer=pointer=null;});function runHandlers(handlerEvent,event){var handler;for(var name in HANDLERS){handler=HANDLERS[name];if(handler instanceof $$MdGestureHandler){if(handlerEvent==='start'){handler.cancel();}
handler[handlerEvent](event,pointer);}}}
function gestureStart(ev){if(pointer)return;var now=+Date.now();if(lastPointer&&!typesMatch(ev,lastPointer)&&(now-lastPointer.endTime<1500)){return;}
pointer=makeStartPointer(ev);runHandlers('start',ev);}
function gestureMove(ev){if(!pointer||!typesMatch(ev,pointer))return;updatePointerState(ev,pointer);runHandlers('move',ev);}
function gestureEnd(ev){if(!pointer||!typesMatch(ev,pointer))return;updatePointerState(ev,pointer);pointer.endTime=+Date.now();if(ev.type!=='pointercancel'){runHandlers('end',ev);}
lastPointer=pointer;pointer=null;}}
function makeStartPointer(ev){var point=getEventPoint(ev);var startPointer={startTime:+Date.now(),target:ev.target,type:ev.type.charAt(0)};startPointer.startX=startPointer.x=point.pageX;startPointer.startY=startPointer.y=point.pageY;return startPointer;}
function typesMatch(ev,pointer){return ev&&pointer&&ev.type.charAt(0)===pointer.type;}
function isInputEventFromLabelClick(event){return lastLabelClickPos&&lastLabelClickPos.x==event.x&&lastLabelClickPos.y==event.y;}
function updatePointerState(ev,pointer){var point=getEventPoint(ev);var x=pointer.x=point.pageX;var y=pointer.y=point.pageY;pointer.distanceX=x-pointer.startX;pointer.distanceY=y-pointer.startY;pointer.distance=Math.sqrt(pointer.distanceX*pointer.distanceX+pointer.distanceY*pointer.distanceY);pointer.directionX=pointer.distanceX>0?'right':pointer.distanceX<0?'left':'';pointer.directionY=pointer.distanceY>0?'down':pointer.distanceY<0?'up':'';pointer.duration=+Date.now()-pointer.startTime;pointer.velocityX=pointer.distanceX/pointer.duration;pointer.velocityY=pointer.distanceY/pointer.duration;}
function getEventPoint(ev){ev=ev.originalEvent||ev;return(ev.touches&&ev.touches[0])||(ev.changedTouches&&ev.changedTouches[0])||ev;}
function canFocus(element){return(!!element&&element.getAttribute('tabindex')!='-1'&&!element.hasAttribute('disabled')&&(element.hasAttribute('tabindex')||element.hasAttribute('href')||element.isContentEditable||['INPUT','SELECT','BUTTON','TEXTAREA','VIDEO','AUDIO'].indexOf(element.nodeName)!=-1));}})();(function(){"use strict";MdInteractionService.$inject=["$timeout","$mdUtil"];angular.module('material.core.interaction',[]).service('$mdInteraction',MdInteractionService);function MdInteractionService($timeout,$mdUtil){this.$timeout=$timeout;this.$mdUtil=$mdUtil;this.bodyElement=angular.element(document.body);this.isBuffering=false;this.bufferTimeout=null;this.lastInteractionType=null;this.lastInteractionTime=null;this.inputEventMap={'keydown':'keyboard','mousedown':'mouse','mouseenter':'mouse','touchstart':'touch','pointerdown':'pointer','MSPointerDown':'pointer'};this.iePointerMap={2:'touch',3:'touch',4:'mouse'};this.initializeEvents();}
MdInteractionService.prototype.initializeEvents=function(){var pointerEvent='MSPointerEvent'in window?'MSPointerDown':'PointerEvent'in window?'pointerdown':null;this.bodyElement.on('keydown mousedown',this.onInputEvent.bind(this));if('ontouchstart'in document.documentElement){this.bodyElement.on('touchstart',this.onBufferInputEvent.bind(this));}
if(pointerEvent){this.bodyElement.on(pointerEvent,this.onInputEvent.bind(this));}};MdInteractionService.prototype.onInputEvent=function(event){if(this.isBuffering){return;}
var type=this.inputEventMap[event.type];if(type==='pointer'){type=this.iePointerMap[event.pointerType]||event.pointerType;}
this.lastInteractionType=type;this.lastInteractionTime=this.$mdUtil.now();};MdInteractionService.prototype.onBufferInputEvent=function(event){this.$timeout.cancel(this.bufferTimeout);this.onInputEvent(event);this.isBuffering=true;this.bufferTimeout=this.$timeout(function(){this.isBuffering=false;}.bind(this),650,false);};MdInteractionService.prototype.getLastInteractionType=function(){return this.lastInteractionType;};MdInteractionService.prototype.isUserInvoked=function(checkDelay){var delay=angular.isNumber(checkDelay)?checkDelay:15;return this.lastInteractionTime>=this.$mdUtil.now()-delay;};})();(function(){"use strict";angular.module('material.core').provider('$$interimElement',InterimElementProvider);function InterimElementProvider(){InterimElementFactory.$inject=["$document","$q","$rootScope","$timeout","$rootElement","$animate","$mdUtil","$mdCompiler","$mdTheming","$injector","$exceptionHandler"];createInterimElementProvider.$get=InterimElementFactory;return createInterimElementProvider;function createInterimElementProvider(interimFactoryName){factory.$inject=["$$interimElement","$injector"];var EXPOSED_METHODS=['onHide','onShow','onRemove'];var customMethods={};var providerConfig={presets:{}};var provider={setDefaults:setDefaults,addPreset:addPreset,addMethod:addMethod,$get:factory};provider.addPreset('build',{methods:['controller','controllerAs','resolve','multiple','template','templateUrl','themable','transformTemplate','parent','contentElement']});return provider;function setDefaults(definition){providerConfig.optionsFactory=definition.options;providerConfig.methods=(definition.methods||[]).concat(EXPOSED_METHODS);return provider;}
function addMethod(name,fn){customMethods[name]=fn;return provider;}
function addPreset(name,definition){definition=definition||{};definition.methods=definition.methods||[];definition.options=definition.options||function(){return{};};if(/^cancel|hide|show$/.test(name)){throw new Error("Preset '"+name+"' in "+interimFactoryName+" is reserved!");}
if(definition.methods.indexOf('_options')>-1){throw new Error("Method '_options' in "+interimFactoryName+" is reserved!");}
providerConfig.presets[name]={methods:definition.methods.concat(EXPOSED_METHODS),optionsFactory:definition.options,argOption:definition.argOption};return provider;}
function addPresetMethod(presetName,methodName,method){providerConfig.presets[presetName][methodName]=method;}
function factory($$interimElement,$injector){var defaultMethods;var defaultOptions;var interimElementService=$$interimElement();var publicService={hide:interimElementService.hide,cancel:interimElementService.cancel,show:showInterimElement,destroy:destroyInterimElement};defaultMethods=providerConfig.methods||[];defaultOptions=invokeFactory(providerConfig.optionsFactory,{});angular.forEach(customMethods,function(fn,name){publicService[name]=fn;});angular.forEach(providerConfig.presets,function(definition,name){var presetDefaults=invokeFactory(definition.optionsFactory,{});var presetMethods=(definition.methods||[]).concat(defaultMethods);angular.extend(presetDefaults,{$type:name});function Preset(opts){this._options=angular.extend({},presetDefaults,opts);}
angular.forEach(presetMethods,function(name){Preset.prototype[name]=function(value){this._options[name]=value;return this;};});if(definition.argOption){var methodName='show'+name.charAt(0).toUpperCase()+name.slice(1);publicService[methodName]=function(arg){var config=publicService[name](arg);return publicService.show(config);};}
publicService[name]=function(arg){if(arguments.length&&definition.argOption&&!angular.isObject(arg)&&!angular.isArray(arg)){return(new Preset())[definition.argOption](arg);}else{return new Preset(arg);}};});return publicService;function showInterimElement(opts){opts=opts||{};if(opts._options)opts=opts._options;return interimElementService.show(angular.extend({},defaultOptions,opts));}
function destroyInterimElement(opts){return interimElementService.destroy(opts);}
function invokeFactory(factory,defaultVal){var locals={};locals[interimFactoryName]=publicService;return $injector.invoke(factory||function(){return defaultVal;},{},locals);}}}
function InterimElementFactory($document,$q,$rootScope,$timeout,$rootElement,$animate,$mdUtil,$mdCompiler,$mdTheming,$injector,$exceptionHandler){return function createInterimElementService(){var SHOW_CANCELLED=false;var service;var showPromises=[];var hidePromises=[];var showingInterims=[];return service={show:show,hide:waitForInterim(hide),cancel:waitForInterim(cancel),destroy:destroy,$injector_:$injector};function show(options){options=options||{};var interimElement=new InterimElement(options||{});var hideAction=options.multiple?$q.resolve():$q.all(showPromises);if(!options.multiple){hideAction=hideAction.then(function(){var promiseArray=hidePromises.concat(showingInterims.map(service.cancel));return $q.all(promiseArray);});}
var showAction=hideAction.then(function(){return interimElement.show().catch(function(reason){return reason;}).finally(function(){showPromises.splice(showPromises.indexOf(showAction),1);showingInterims.push(interimElement);});});showPromises.push(showAction);interimElement.deferred.promise.catch(function(fault){if(fault instanceof Error){$exceptionHandler(fault);}
return fault;});return interimElement.deferred.promise;}
function hide(reason,options){options=options||{};if(options.closeAll){return $q.all(showingInterims.slice().reverse().map(closeElement));}else if(options.closeTo!==undefined){return $q.all(showingInterims.slice(options.closeTo).map(closeElement));}
return closeElement(showingInterims[showingInterims.length-1]);function closeElement(interim){var hideAction=interim.remove(reason,false,options||{}).catch(function(reason){return reason;}).finally(function(){hidePromises.splice(hidePromises.indexOf(hideAction),1);});showingInterims.splice(showingInterims.indexOf(interim),1);hidePromises.push(hideAction);return interim.deferred.promise;}}
function cancel(reason,options){var interim=showingInterims.pop();if(!interim){return $q.when(reason);}
var cancelAction=interim.remove(reason,true,options||{}).catch(function(reason){return reason;}).finally(function(){hidePromises.splice(hidePromises.indexOf(cancelAction),1);});hidePromises.push(cancelAction);return interim.deferred.promise.catch(angular.noop);}
function waitForInterim(callbackFn){return function(){var fnArguments=arguments;if(!showingInterims.length){if(showPromises.length){return showPromises[0].finally(function(){return callbackFn.apply(service,fnArguments);});}
return $q.when("No interim elements currently showing up.");}
return callbackFn.apply(service,fnArguments);};}
function destroy(targetEl){var interim=!targetEl?showingInterims.shift():null;var parentEl=angular.element(targetEl).length&&angular.element(targetEl)[0].parentNode;if(parentEl){var filtered=showingInterims.filter(function(entry){return entry.options.element[0]===parentEl;});if(filtered.length){interim=filtered[0];showingInterims.splice(showingInterims.indexOf(interim),1);}}
return interim?interim.remove(SHOW_CANCELLED,false,{'$destroy':true}):$q.when(SHOW_CANCELLED);}
function InterimElement(options){var self,element,showAction=$q.when(true);options=configureScopeAndTransitions(options);return self={options:options,deferred:$q.defer(),show:createAndTransitionIn,remove:transitionOutAndRemove};function createAndTransitionIn(){return $q(function(resolve,reject){options.onCompiling&&options.onCompiling(options);compileElement(options).then(function(compiledData){element=linkElement(compiledData,options);options.cleanupElement=compiledData.cleanup;showAction=showElement(element,options,compiledData.controller).then(resolve,rejectAll);}).catch(rejectAll);function rejectAll(fault){self.deferred.reject(fault);reject(fault);}});}
function transitionOutAndRemove(response,isCancelled,opts){if(!element)return $q.when(false);options=angular.extend(options||{},opts||{});options.cancelAutoHide&&options.cancelAutoHide();options.element.triggerHandler('$mdInterimElementRemove');if(options.$destroy===true){return hideElement(options.element,options).then(function(){(isCancelled&&rejectAll(response))||resolveAll(response);});}else{$q.when(showAction).finally(function(){hideElement(options.element,options).then(function(){isCancelled?rejectAll(response):resolveAll(response);},rejectAll);});return self.deferred.promise;}
function resolveAll(response){self.deferred.resolve(response);}
function rejectAll(fault){self.deferred.reject(fault);}}
function configureScopeAndTransitions(options){options=options||{};if(options.template){options.template=$mdUtil.processTemplate(options.template);}
return angular.extend({preserveScope:false,cancelAutoHide:angular.noop,scope:options.scope||$rootScope.$new(options.isolateScope),onShow:function transitionIn(scope,element,options){return $animate.enter(element,options.parent);},onRemove:function transitionOut(scope,element){return element&&$animate.leave(element)||$q.when();}},options);}
function compileElement(options){var compiled=!options.skipCompile?$mdCompiler.compile(options):null;return compiled||$q(function(resolve){resolve({locals:{},link:function(){return options.element;}});});}
function linkElement(compileData,options){angular.extend(compileData.locals,options);var element=compileData.link(options.scope);options.element=element;options.parent=findParent(element,options);if(options.themable)$mdTheming(element);return element;}
function findParent(element,options){var parent=options.parent;if(angular.isFunction(parent)){parent=parent(options.scope,element,options);}else if(angular.isString(parent)){parent=angular.element($document[0].querySelector(parent));}else{parent=angular.element(parent);}
if(!(parent||{}).length){var el;if($rootElement[0]&&$rootElement[0].querySelector){el=$rootElement[0].querySelector(':not(svg) > body');}
if(!el)el=$rootElement[0];if(el.nodeName=='#comment'){el=$document[0].body;}
return angular.element(el);}
return parent;}
function startAutoHide(){var autoHideTimer,cancelAutoHide=angular.noop;if(options.hideDelay){autoHideTimer=$timeout(service.hide,options.hideDelay);cancelAutoHide=function(){$timeout.cancel(autoHideTimer);};}
options.cancelAutoHide=function(){cancelAutoHide();options.cancelAutoHide=undefined;};}
function showElement(element,options,controller){var notifyShowing=options.onShowing||angular.noop;var notifyComplete=options.onComplete||angular.noop;try{notifyShowing(options.scope,element,options,controller);}catch(e){return $q.reject(e);}
return $q(function(resolve,reject){try{$q.when(options.onShow(options.scope,element,options,controller)).then(function(){notifyComplete(options.scope,element,options);startAutoHide();resolve(element);},reject);}catch(e){reject(e.message);}});}
function hideElement(element,options){var announceRemoving=options.onRemoving||angular.noop;return $q(function(resolve,reject){try{var action=$q.when(options.onRemove(options.scope,element,options)||true);announceRemoving(element,action);if(options.$destroy){resolve(element);if(!options.preserveScope&&options.scope){action.then(function(){options.scope.$destroy();});}}else{action.then(function(){if(!options.preserveScope&&options.scope){options.scope.$destroy();}
resolve(element);},reject);}}catch(e){reject(e.message);}});}}};}}})();(function(){"use strict";(function(){'use strict';var $mdUtil,$interpolate,$log;var SUFFIXES=/(-gt)?-(sm|md|lg|print)/g;var WHITESPACE=/\s+/g;var FLEX_OPTIONS=['grow','initial','auto','none','noshrink','nogrow'];var LAYOUT_OPTIONS=['row','column'];var ALIGNMENT_MAIN_AXIS=["","start","center","end","stretch","space-around","space-between"];var ALIGNMENT_CROSS_AXIS=["","start","center","end","stretch"];var config={enabled:true,breakpoints:[]};registerLayoutAPI(angular.module('material.core.layout',['ng']));function registerLayoutAPI(module){var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i;var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g;var BREAKPOINTS=["","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl","print"];var API_WITH_VALUES=["layout","flex","flex-order","flex-offset","layout-align"];var API_NO_VALUES=["show","hide","layout-padding","layout-margin"];angular.forEach(BREAKPOINTS,function(mqb){angular.forEach(API_WITH_VALUES,function(name){var fullName=mqb?name+"-"+mqb:name;module.directive(directiveNormalize(fullName),attributeWithObserve(fullName));});angular.forEach(API_NO_VALUES,function(name){var fullName=mqb?name+"-"+mqb:name;module.directive(directiveNormalize(fullName),attributeWithoutValue(fullName));});});module.provider('$$mdLayout',function(){return{$get:angular.noop,validateAttributeValue:validateAttributeValue,validateAttributeUsage:validateAttributeUsage,disableLayouts:function(isDisabled){config.enabled=(isDisabled!==true);}};}).directive('mdLayoutCss',disableLayoutDirective).directive('ngCloak',buildCloakInterceptor('ng-cloak')).directive('layoutWrap',attributeWithoutValue('layout-wrap')).directive('layoutNowrap',attributeWithoutValue('layout-nowrap')).directive('layoutNoWrap',attributeWithoutValue('layout-no-wrap')).directive('layoutFill',attributeWithoutValue('layout-fill')).directive('layoutLtMd',warnAttrNotSupported('layout-lt-md',true)).directive('layoutLtLg',warnAttrNotSupported('layout-lt-lg',true)).directive('flexLtMd',warnAttrNotSupported('flex-lt-md',true)).directive('flexLtLg',warnAttrNotSupported('flex-lt-lg',true)).directive('layoutAlignLtMd',warnAttrNotSupported('layout-align-lt-md')).directive('layoutAlignLtLg',warnAttrNotSupported('layout-align-lt-lg')).directive('flexOrderLtMd',warnAttrNotSupported('flex-order-lt-md')).directive('flexOrderLtLg',warnAttrNotSupported('flex-order-lt-lg')).directive('offsetLtMd',warnAttrNotSupported('flex-offset-lt-md')).directive('offsetLtLg',warnAttrNotSupported('flex-offset-lt-lg')).directive('hideLtMd',warnAttrNotSupported('hide-lt-md')).directive('hideLtLg',warnAttrNotSupported('hide-lt-lg')).directive('showLtMd',warnAttrNotSupported('show-lt-md')).directive('showLtLg',warnAttrNotSupported('show-lt-lg')).config(detectDisabledLayouts);function directiveNormalize(name){return name.replace(PREFIX_REGEXP,'').replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter;});}}
function detectDisabledLayouts(){var isDisabled=!!document.querySelector('[md-layouts-disabled]');config.enabled=!isDisabled;}
function disableLayoutDirective(){config.enabled=false;return{restrict:'A',priority:'900'};}
function buildCloakInterceptor(className){return['$timeout',function($timeout){return{restrict:'A',priority:-10,compile:function(element){if(!config.enabled)return angular.noop;element.addClass(className);return function(scope,element){$timeout(function(){element.removeClass(className);},10,false);};}};}];}
function attributeWithObserve(className){return['$mdUtil','$interpolate',"$log",function(_$mdUtil_,_$interpolate_,_$log_){$mdUtil=_$mdUtil_;$interpolate=_$interpolate_;$log=_$log_;return{restrict:'A',compile:function(element,attr){var linkFn;if(config.enabled){validateAttributeUsage(className,attr,element,$log);validateAttributeValue(className,getNormalizedAttrValue(className,attr,""),buildUpdateFn(element,className,attr));linkFn=translateWithValueToCssClass;}
return linkFn||angular.noop;}};}];function translateWithValueToCssClass(scope,element,attrs){var updateFn=updateClassWithValue(element,className,attrs);var unwatch=attrs.$observe(attrs.$normalize(className),updateFn);updateFn(getNormalizedAttrValue(className,attrs,""));scope.$on("$destroy",function(){unwatch();});}}
function attributeWithoutValue(className){return['$mdUtil','$interpolate',"$log",function(_$mdUtil_,_$interpolate_,_$log_){$mdUtil=_$mdUtil_;$interpolate=_$interpolate_;$log=_$log_;return{restrict:'A',compile:function(element,attr){var linkFn;if(config.enabled){validateAttributeValue(className,getNormalizedAttrValue(className,attr,""),buildUpdateFn(element,className,attr));translateToCssClass(null,element);linkFn=translateToCssClass;}
return linkFn||angular.noop;}};}];function translateToCssClass(scope,element){element.addClass(className);}}
function updateClassWithValue(element,className){var lastClass;return function updateClassFn(newValue){var value=validateAttributeValue(className,newValue||"");if(angular.isDefined(value)){if(lastClass)element.removeClass(lastClass);lastClass=!value?className:className+"-"+value.trim().replace(WHITESPACE,"-");element.addClass(lastClass);}};}
function warnAttrNotSupported(className){var parts=className.split("-");return["$log",function($log){$log.warn(className+"has been deprecated. Please use a `"+parts[0]+"-gt-<xxx>` variant.");return angular.noop;}];}
function validateAttributeUsage(className,attr,element,$log){var message,usage,url;var nodeName=element[0].nodeName.toLowerCase();switch(className.replace(SUFFIXES,"")){case"flex":if((nodeName=="md-button")||(nodeName=="fieldset")){usage="<"+nodeName+" "+className+"></"+nodeName+">";url="https://github.com/philipwalton/flexbugs#9-some-html-elements-cant-be-flex-containers";message="Markup '{0}' may not work as expected in IE Browsers. Consult '{1}' for details.";$log.warn($mdUtil.supplant(message,[usage,url]));}}}
function validateAttributeValue(className,value,updateFn){var origValue;if(!needsInterpolation(value)){switch(className.replace(SUFFIXES,"")){case'layout':if(!findIn(value,LAYOUT_OPTIONS)){value=LAYOUT_OPTIONS[0];}
break;case'flex':if(!findIn(value,FLEX_OPTIONS)){if(isNaN(value)){value='';}}
break;case'flex-offset':case'flex-order':if(!value||isNaN(+value)){value='0';}
break;case'layout-align':var axis=extractAlignAxis(value);value=$mdUtil.supplant("{main}-{cross}",axis);break;case'layout-padding':case'layout-margin':case'layout-fill':case'layout-wrap':case'layout-nowrap':case'layout-nowrap':value='';break;}
if(value!=origValue){(updateFn||angular.noop)(value);}}
return value?value.trim():"";}
function buildUpdateFn(element,className,attrs){return function updateAttrValue(fallback){if(!needsInterpolation(fallback)){attrs[attrs.$normalize(className)]=fallback;}};}
function needsInterpolation(value){return(value||"").indexOf($interpolate.startSymbol())>-1;}
function getNormalizedAttrValue(className,attrs,defaultVal){var normalizedAttr=attrs.$normalize(className);return attrs[normalizedAttr]?attrs[normalizedAttr].trim().replace(WHITESPACE,"-"):defaultVal||null;}
function findIn(item,list,replaceWith){item=replaceWith&&item?item.replace(WHITESPACE,replaceWith):item;var found=false;if(item){list.forEach(function(it){it=replaceWith?it.replace(WHITESPACE,replaceWith):it;found=found||(it===item);});}
return found;}
function extractAlignAxis(attrValue){var axis={main:"start",cross:"stretch"},values;attrValue=(attrValue||"");if(attrValue.indexOf("-")===0||attrValue.indexOf(" ")===0){attrValue="none"+attrValue;}
values=attrValue.toLowerCase().trim().replace(WHITESPACE,"-").split("-");if(values.length&&(values[0]==="space")){values=[values[0]+"-"+values[1],values[2]];}
if(values.length>0)axis.main=values[0]||axis.main;if(values.length>1)axis.cross=values[1]||axis.cross;if(ALIGNMENT_MAIN_AXIS.indexOf(axis.main)<0)axis.main="start";if(ALIGNMENT_CROSS_AXIS.indexOf(axis.cross)<0)axis.cross="stretch";return axis;}})();})();(function(){"use strict";MdLiveAnnouncer.$inject=["$timeout"];angular.module('material.core').service('$mdLiveAnnouncer',MdLiveAnnouncer);function MdLiveAnnouncer($timeout){this._$timeout=$timeout;this._liveElement=this._createLiveElement();this._announceTimeout=100;}
MdLiveAnnouncer.prototype.announce=function(message,politeness){if(!politeness){politeness='polite';}
var self=this;self._liveElement.textContent='';self._liveElement.setAttribute('aria-live',politeness);self._$timeout(function(){self._liveElement.textContent=message;},self._announceTimeout,false);};MdLiveAnnouncer.prototype._createLiveElement=function(){var liveEl=document.createElement('div');liveEl.classList.add('md-visually-hidden');liveEl.setAttribute('role','status');liveEl.setAttribute('aria-atomic','true');liveEl.setAttribute('aria-live','polite');document.body.appendChild(liveEl);return liveEl;};})();(function(){"use strict";angular.module('material.core.meta',[]).provider('$$mdMeta',function(){var head=angular.element(document.head);var metaElements={};function mapExistingElement(name){if(metaElements[name]){return true;}
var element=document.getElementsByName(name)[0];if(!element){return false;}
metaElements[name]=angular.element(element);return true;}
function setMeta(name,content){mapExistingElement(name);if(!metaElements[name]){var newMeta=angular.element('<meta name="'+name+'" content="'+content+'"/>');head.append(newMeta);metaElements[name]=newMeta;}
else{metaElements[name].attr('content',content);}
return function(){metaElements[name].attr('content','');metaElements[name].remove();delete metaElements[name];};}
function getMeta(name){if(!mapExistingElement(name)){throw Error('$$mdMeta: could not find a meta tag with the name \''+name+'\'');}
return metaElements[name].attr('content');}
var module={setMeta:setMeta,getMeta:getMeta};return angular.extend({},module,{$get:function(){return module;}});});})();(function(){"use strict";ComponentRegistry.$inject=["$log","$q"];angular.module('material.core').factory('$mdComponentRegistry',ComponentRegistry);function ComponentRegistry($log,$q){var self;var instances=[];var pendings={};return self={notFoundError:function(handle,msgContext){$log.error((msgContext||"")+'No instance found for handle',handle);},getInstances:function(){return instances;},get:function(handle){if(!isValidID(handle))return null;var i,j,instance;for(i=0,j=instances.length;i<j;i++){instance=instances[i];if(instance.$$mdHandle===handle){return instance;}}
return null;},register:function(instance,handle){if(!handle)return angular.noop;instance.$$mdHandle=handle;instances.push(instance);resolveWhen();return deregister;function deregister(){var index=instances.indexOf(instance);if(index!==-1){instances.splice(index,1);}}
function resolveWhen(){var dfd=pendings[handle];if(dfd){dfd.forEach(function(promise){promise.resolve(instance);});delete pendings[handle];}}},when:function(handle){if(isValidID(handle)){var deferred=$q.defer();var instance=self.get(handle);if(instance){deferred.resolve(instance);}else{if(pendings[handle]===undefined){pendings[handle]=[];}
pendings[handle].push(deferred);}
return deferred.promise;}
return $q.reject("Invalid `md-component-id` value.");}};function isValidID(handle){return handle&&(handle!=="");}}})();(function(){"use strict";(function(){'use strict';MdButtonInkRipple.$inject=["$mdInkRipple"];angular.module('material.core').factory('$mdButtonInkRipple',MdButtonInkRipple);function MdButtonInkRipple($mdInkRipple){return{attach:function attachRipple(scope,element,options){options=angular.extend(optionsForElement(element),options);return $mdInkRipple.attach(scope,element,options);}};function optionsForElement(element){if(element.hasClass('md-icon-button')){return{isMenuItem:element.hasClass('md-menu-item'),fitRipple:true,center:true};}else{return{isMenuItem:element.hasClass('md-menu-item'),dimBackground:true};}}}})();})();(function(){"use strict";(function(){'use strict';MdCheckboxInkRipple.$inject=["$mdInkRipple"];angular.module('material.core').factory('$mdCheckboxInkRipple',MdCheckboxInkRipple);function MdCheckboxInkRipple($mdInkRipple){return{attach:attach};function attach(scope,element,options){return $mdInkRipple.attach(scope,element,angular.extend({center:true,dimBackground:false,fitRipple:true},options));}}})();})();(function(){"use strict";(function(){'use strict';MdListInkRipple.$inject=["$mdInkRipple"];angular.module('material.core').factory('$mdListInkRipple',MdListInkRipple);function MdListInkRipple($mdInkRipple){return{attach:attach};function attach(scope,element,options){return $mdInkRipple.attach(scope,element,angular.extend({center:false,dimBackground:true,outline:false,rippleSize:'full'},options));}}})();})();(function(){"use strict";InkRippleCtrl.$inject=["$scope","$element","rippleOptions","$window","$timeout","$mdUtil","$mdColorUtil"];InkRippleDirective.$inject=["$mdButtonInkRipple","$mdCheckboxInkRipple"];angular.module('material.core').provider('$mdInkRipple',InkRippleProvider).directive('mdInkRipple',InkRippleDirective).directive('mdNoInk',attrNoDirective).directive('mdNoBar',attrNoDirective).directive('mdNoStretch',attrNoDirective);var DURATION=450;function InkRippleDirective($mdButtonInkRipple,$mdCheckboxInkRipple){return{controller:angular.noop,link:function(scope,element,attr){attr.hasOwnProperty('mdInkRippleCheckbox')?$mdCheckboxInkRipple.attach(scope,element):$mdButtonInkRipple.attach(scope,element);}};}
function InkRippleProvider(){var isDisabledGlobally=false;return{disableInkRipple:disableInkRipple,$get:["$injector",function($injector){return{attach:attach};function attach(scope,element,options){if(isDisabledGlobally||element.controller('mdNoInk'))return angular.noop;return $injector.instantiate(InkRippleCtrl,{$scope:scope,$element:element,rippleOptions:options});}}]};function disableInkRipple(){isDisabledGlobally=true;}}
function InkRippleCtrl($scope,$element,rippleOptions,$window,$timeout,$mdUtil,$mdColorUtil){this.$window=$window;this.$timeout=$timeout;this.$mdUtil=$mdUtil;this.$mdColorUtil=$mdColorUtil;this.$scope=$scope;this.$element=$element;this.options=rippleOptions;this.mousedown=false;this.ripples=[];this.timeout=null;this.lastRipple=null;$mdUtil.valueOnUse(this,'container',this.createContainer);this.$element.addClass('md-ink-ripple');($element.controller('mdInkRipple')||{}).createRipple=angular.bind(this,this.createRipple);($element.controller('mdInkRipple')||{}).setColor=angular.bind(this,this.color);this.bindEvents();}
function autoCleanup(self,cleanupFn){if(self.mousedown||self.lastRipple){self.mousedown=false;self.$mdUtil.nextTick(angular.bind(self,cleanupFn),false);}}
InkRippleCtrl.prototype.color=function(value){var self=this;if(angular.isDefined(value)){self._color=self._parseColor(value);}
return self._color||self._parseColor(self.inkRipple())||self._parseColor(getElementColor());function getElementColor(){var items=self.options&&self.options.colorElement?self.options.colorElement:[];var elem=items.length?items[0]:self.$element[0];return elem?self.$window.getComputedStyle(elem).color:'rgb(0,0,0)';}};InkRippleCtrl.prototype.calculateColor=function(){return this.color();};InkRippleCtrl.prototype._parseColor=function parseColor(color,multiplier){multiplier=multiplier||1;var colorUtil=this.$mdColorUtil;if(!color)return;if(color.indexOf('rgba')===0)return color.replace(/\d?\.?\d*\s*\)\s*$/,(0.1*multiplier).toString()+')');if(color.indexOf('rgb')===0)return colorUtil.rgbToRgba(color);if(color.indexOf('#')===0)return colorUtil.hexToRgba(color);};InkRippleCtrl.prototype.bindEvents=function(){this.$element.on('mousedown',angular.bind(this,this.handleMousedown));this.$element.on('mouseup touchend',angular.bind(this,this.handleMouseup));this.$element.on('mouseleave',angular.bind(this,this.handleMouseup));this.$element.on('touchmove',angular.bind(this,this.handleTouchmove));};InkRippleCtrl.prototype.handleMousedown=function(event){if(this.mousedown)return;if(event.hasOwnProperty('originalEvent'))event=event.originalEvent;this.mousedown=true;if(this.options.center){this.createRipple(this.container.prop('clientWidth')/2,this.container.prop('clientWidth')/2);}else{if(event.srcElement!==this.$element[0]){var layerRect=this.$element[0].getBoundingClientRect();var layerX=event.clientX-layerRect.left;var layerY=event.clientY-layerRect.top;this.createRipple(layerX,layerY);}else{this.createRipple(event.offsetX,event.offsetY);}}};InkRippleCtrl.prototype.handleMouseup=function(){autoCleanup(this,this.clearRipples);};InkRippleCtrl.prototype.handleTouchmove=function(){autoCleanup(this,this.deleteRipples);};InkRippleCtrl.prototype.deleteRipples=function(){for(var i=0;i<this.ripples.length;i++){this.ripples[i].remove();}};InkRippleCtrl.prototype.clearRipples=function(){for(var i=0;i<this.ripples.length;i++){this.fadeInComplete(this.ripples[i]);}};InkRippleCtrl.prototype.createContainer=function(){var container=angular.element('<div class="md-ripple-container"></div>');this.$element.append(container);return container;};InkRippleCtrl.prototype.clearTimeout=function(){if(this.timeout){this.$timeout.cancel(this.timeout);this.timeout=null;}};InkRippleCtrl.prototype.isRippleAllowed=function(){var element=this.$element[0];do{if(!element.tagName||element.tagName==='BODY')break;if(element&&angular.isFunction(element.hasAttribute)){if(element.hasAttribute('disabled'))return false;if(this.inkRipple()==='false'||this.inkRipple()==='0')return false;}}while(element=element.parentNode);return true;};InkRippleCtrl.prototype.inkRipple=function(){return this.$element.attr('md-ink-ripple');};InkRippleCtrl.prototype.createRipple=function(left,top){if(!this.isRippleAllowed())return;var ctrl=this;var colorUtil=ctrl.$mdColorUtil;var ripple=angular.element('<div class="md-ripple"></div>');var width=this.$element.prop('clientWidth');var height=this.$element.prop('clientHeight');var x=Math.max(Math.abs(width-left),left)*2;var y=Math.max(Math.abs(height-top),top)*2;var size=getSize(this.options.fitRipple,x,y);var color=this.calculateColor();ripple.css({left:left+'px',top:top+'px',background:'black',width:size+'px',height:size+'px',backgroundColor:colorUtil.rgbaToRgb(color),borderColor:colorUtil.rgbaToRgb(color)});this.lastRipple=ripple;this.clearTimeout();this.timeout=this.$timeout(function(){ctrl.clearTimeout();if(!ctrl.mousedown)ctrl.fadeInComplete(ripple);},DURATION*0.35,false);if(this.options.dimBackground)this.container.css({backgroundColor:color});this.container.append(ripple);this.ripples.push(ripple);ripple.addClass('md-ripple-placed');this.$mdUtil.nextTick(function(){ripple.addClass('md-ripple-scaled md-ripple-active');ctrl.$timeout(function(){ctrl.clearRipples();},DURATION,false);},false);function getSize(fit,x,y){return fit?Math.max(x,y):Math.sqrt(Math.pow(x,2)+Math.pow(y,2));}};InkRippleCtrl.prototype.fadeInComplete=function(ripple){if(this.lastRipple===ripple){if(!this.timeout&&!this.mousedown){this.removeRipple(ripple);}}else{this.removeRipple(ripple);}};InkRippleCtrl.prototype.removeRipple=function(ripple){var ctrl=this;var index=this.ripples.indexOf(ripple);if(index<0)return;this.ripples.splice(this.ripples.indexOf(ripple),1);ripple.removeClass('md-ripple-active');ripple.addClass('md-ripple-remove');if(this.ripples.length===0)this.container.css({backgroundColor:''});this.$timeout(function(){ctrl.fadeOutComplete(ripple);},DURATION,false);};InkRippleCtrl.prototype.fadeOutComplete=function(ripple){ripple.remove();this.lastRipple=null;};function attrNoDirective(){return{controller:angular.noop};}})();(function(){"use strict";(function(){'use strict';MdTabInkRipple.$inject=["$mdInkRipple"];angular.module('material.core').factory('$mdTabInkRipple',MdTabInkRipple);function MdTabInkRipple($mdInkRipple){return{attach:attach};function attach(scope,element,options){return $mdInkRipple.attach(scope,element,angular.extend({center:false,dimBackground:true,outline:false,rippleSize:'full'},options));}}})();})();(function(){"use strict";angular.module('material.core.theming.palette',[]).constant('$mdColorPalette',{'red':{'50':'#ffebee','100':'#ffcdd2','200':'#ef9a9a','300':'#e57373','400':'#ef5350','500':'#f44336','600':'#e53935','700':'#d32f2f','800':'#c62828','900':'#b71c1c','A100':'#ff8a80','A200':'#ff5252','A400':'#ff1744','A700':'#d50000','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 300 A100','contrastStrongLightColors':'400 500 600 700 A200 A400 A700'},'pink':{'50':'#fce4ec','100':'#f8bbd0','200':'#f48fb1','300':'#f06292','400':'#ec407a','500':'#e91e63','600':'#d81b60','700':'#c2185b','800':'#ad1457','900':'#880e4f','A100':'#ff80ab','A200':'#ff4081','A400':'#f50057','A700':'#c51162','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 A100','contrastStrongLightColors':'500 600 A200 A400 A700'},'purple':{'50':'#f3e5f5','100':'#e1bee7','200':'#ce93d8','300':'#ba68c8','400':'#ab47bc','500':'#9c27b0','600':'#8e24aa','700':'#7b1fa2','800':'#6a1b9a','900':'#4a148c','A100':'#ea80fc','A200':'#e040fb','A400':'#d500f9','A700':'#aa00ff','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 A100','contrastStrongLightColors':'300 400 A200 A400 A700'},'deep-purple':{'50':'#ede7f6','100':'#d1c4e9','200':'#b39ddb','300':'#9575cd','400':'#7e57c2','500':'#673ab7','600':'#5e35b1','700':'#512da8','800':'#4527a0','900':'#311b92','A100':'#b388ff','A200':'#7c4dff','A400':'#651fff','A700':'#6200ea','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 A100','contrastStrongLightColors':'300 400 A200'},'indigo':{'50':'#e8eaf6','100':'#c5cae9','200':'#9fa8da','300':'#7986cb','400':'#5c6bc0','500':'#3f51b5','600':'#3949ab','700':'#303f9f','800':'#283593','900':'#1a237e','A100':'#8c9eff','A200':'#536dfe','A400':'#3d5afe','A700':'#304ffe','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 A100','contrastStrongLightColors':'300 400 A200 A400'},'blue':{'50':'#e3f2fd','100':'#bbdefb','200':'#90caf9','300':'#64b5f6','400':'#42a5f5','500':'#2196f3','600':'#1e88e5','700':'#1976d2','800':'#1565c0','900':'#0d47a1','A100':'#82b1ff','A200':'#448aff','A400':'#2979ff','A700':'#2962ff','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 300 400 A100','contrastStrongLightColors':'500 600 700 A200 A400 A700'},'light-blue':{'50':'#e1f5fe','100':'#b3e5fc','200':'#81d4fa','300':'#4fc3f7','400':'#29b6f6','500':'#03a9f4','600':'#039be5','700':'#0288d1','800':'#0277bd','900':'#01579b','A100':'#80d8ff','A200':'#40c4ff','A400':'#00b0ff','A700':'#0091ea','contrastDefaultColor':'dark','contrastLightColors':'600 700 800 900 A700','contrastStrongLightColors':'600 700 800 A700'},'cyan':{'50':'#e0f7fa','100':'#b2ebf2','200':'#80deea','300':'#4dd0e1','400':'#26c6da','500':'#00bcd4','600':'#00acc1','700':'#0097a7','800':'#00838f','900':'#006064','A100':'#84ffff','A200':'#18ffff','A400':'#00e5ff','A700':'#00b8d4','contrastDefaultColor':'dark','contrastLightColors':'700 800 900','contrastStrongLightColors':'700 800 900'},'teal':{'50':'#e0f2f1','100':'#b2dfdb','200':'#80cbc4','300':'#4db6ac','400':'#26a69a','500':'#009688','600':'#00897b','700':'#00796b','800':'#00695c','900':'#004d40','A100':'#a7ffeb','A200':'#64ffda','A400':'#1de9b6','A700':'#00bfa5','contrastDefaultColor':'dark','contrastLightColors':'500 600 700 800 900','contrastStrongLightColors':'500 600 700'},'green':{'50':'#e8f5e9','100':'#c8e6c9','200':'#a5d6a7','300':'#81c784','400':'#66bb6a','500':'#4caf50','600':'#43a047','700':'#388e3c','800':'#2e7d32','900':'#1b5e20','A100':'#b9f6ca','A200':'#69f0ae','A400':'#00e676','A700':'#00c853','contrastDefaultColor':'dark','contrastLightColors':'500 600 700 800 900','contrastStrongLightColors':'500 600 700'},'light-green':{'50':'#f1f8e9','100':'#dcedc8','200':'#c5e1a5','300':'#aed581','400':'#9ccc65','500':'#8bc34a','600':'#7cb342','700':'#689f38','800':'#558b2f','900':'#33691e','A100':'#ccff90','A200':'#b2ff59','A400':'#76ff03','A700':'#64dd17','contrastDefaultColor':'dark','contrastLightColors':'700 800 900','contrastStrongLightColors':'700 800 900'},'lime':{'50':'#f9fbe7','100':'#f0f4c3','200':'#e6ee9c','300':'#dce775','400':'#d4e157','500':'#cddc39','600':'#c0ca33','700':'#afb42b','800':'#9e9d24','900':'#827717','A100':'#f4ff81','A200':'#eeff41','A400':'#c6ff00','A700':'#aeea00','contrastDefaultColor':'dark','contrastLightColors':'900','contrastStrongLightColors':'900'},'yellow':{'50':'#fffde7','100':'#fff9c4','200':'#fff59d','300':'#fff176','400':'#ffee58','500':'#ffeb3b','600':'#fdd835','700':'#fbc02d','800':'#f9a825','900':'#f57f17','A100':'#ffff8d','A200':'#ffff00','A400':'#ffea00','A700':'#ffd600','contrastDefaultColor':'dark'},'amber':{'50':'#fff8e1','100':'#ffecb3','200':'#ffe082','300':'#ffd54f','400':'#ffca28','500':'#ffc107','600':'#ffb300','700':'#ffa000','800':'#ff8f00','900':'#ff6f00','A100':'#ffe57f','A200':'#ffd740','A400':'#ffc400','A700':'#ffab00','contrastDefaultColor':'dark'},'orange':{'50':'#fff3e0','100':'#ffe0b2','200':'#ffcc80','300':'#ffb74d','400':'#ffa726','500':'#ff9800','600':'#fb8c00','700':'#f57c00','800':'#ef6c00','900':'#e65100','A100':'#ffd180','A200':'#ffab40','A400':'#ff9100','A700':'#ff6d00','contrastDefaultColor':'dark','contrastLightColors':'800 900','contrastStrongLightColors':'800 900'},'deep-orange':{'50':'#fbe9e7','100':'#ffccbc','200':'#ffab91','300':'#ff8a65','400':'#ff7043','500':'#ff5722','600':'#f4511e','700':'#e64a19','800':'#d84315','900':'#bf360c','A100':'#ff9e80','A200':'#ff6e40','A400':'#ff3d00','A700':'#dd2c00','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 300 400 A100 A200','contrastStrongLightColors':'500 600 700 800 900 A400 A700'},'brown':{'50':'#efebe9','100':'#d7ccc8','200':'#bcaaa4','300':'#a1887f','400':'#8d6e63','500':'#795548','600':'#6d4c41','700':'#5d4037','800':'#4e342e','900':'#3e2723','A100':'#d7ccc8','A200':'#bcaaa4','A400':'#8d6e63','A700':'#5d4037','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 A100 A200','contrastStrongLightColors':'300 400'},'grey':{'50':'#fafafa','100':'#f5f5f5','200':'#eeeeee','300':'#e0e0e0','400':'#bdbdbd','500':'#9e9e9e','600':'#757575','700':'#616161','800':'#424242','900':'#212121','A100':'#ffffff','A200':'#000000','A400':'#303030','A700':'#616161','contrastDefaultColor':'dark','contrastLightColors':'600 700 800 900 A200 A400 A700'},'blue-grey':{'50':'#eceff1','100':'#cfd8dc','200':'#b0bec5','300':'#90a4ae','400':'#78909c','500':'#607d8b','600':'#546e7a','700':'#455a64','800':'#37474f','900':'#263238','A100':'#cfd8dc','A200':'#b0bec5','A400':'#78909c','A700':'#455a64','contrastDefaultColor':'light','contrastDarkColors':'50 100 200 300 A100 A200','contrastStrongLightColors':'400 500 700'}});})();(function(){"use strict";(function(angular){'use strict';detectDisabledThemes.$inject=["$mdThemingProvider"];ThemingDirective.$inject=["$mdTheming","$interpolate","$parse","$mdUtil","$q","$log"];ThemableDirective.$inject=["$mdTheming"];ThemingProvider.$inject=["$mdColorPalette","$$mdMetaProvider"];generateAllThemes.$inject=["$injector","$mdTheming"];angular.module('material.core.theming',['material.core.theming.palette','material.core.meta']).directive('mdTheme',ThemingDirective).directive('mdThemable',ThemableDirective).directive('mdThemesDisabled',disableThemesDirective).provider('$mdTheming',ThemingProvider).config(detectDisabledThemes).run(generateAllThemes);function detectDisabledThemes($mdThemingProvider){var isDisabled=!!document.querySelector('[md-themes-disabled]');$mdThemingProvider.disableTheming(isDisabled);}
var GENERATED={};var PALETTES;var DARK_FOREGROUND={name:'dark','1':'rgba(0,0,0,0.87)','2':'rgba(0,0,0,0.54)','3':'rgba(0,0,0,0.38)','4':'rgba(0,0,0,0.12)'};var LIGHT_FOREGROUND={name:'light','1':'rgba(255,255,255,1.0)','2':'rgba(255,255,255,0.7)','3':'rgba(255,255,255,0.5)','4':'rgba(255,255,255,0.12)'};var DARK_SHADOW='1px 1px 0px rgba(0,0,0,0.4), -1px -1px 0px rgba(0,0,0,0.4)';var LIGHT_SHADOW='';var DARK_CONTRAST_COLOR=colorToRgbaArray('rgba(0,0,0,0.87)');var LIGHT_CONTRAST_COLOR=colorToRgbaArray('rgba(255,255,255,0.87)');var STRONG_LIGHT_CONTRAST_COLOR=colorToRgbaArray('rgb(255,255,255)');var THEME_COLOR_TYPES=['primary','accent','warn','background'];var DEFAULT_COLOR_TYPE='primary';var LIGHT_DEFAULT_HUES={'accent':{'default':'A200','hue-1':'A100','hue-2':'A400','hue-3':'A700'},'background':{'default':'50','hue-1':'A100','hue-2':'100','hue-3':'300'}};var DARK_DEFAULT_HUES={'background':{'default':'A400','hue-1':'800','hue-2':'900','hue-3':'A200'}};THEME_COLOR_TYPES.forEach(function(colorType){var defaultDefaultHues={'default':'500','hue-1':'300','hue-2':'800','hue-3':'A100'};if(!LIGHT_DEFAULT_HUES[colorType])LIGHT_DEFAULT_HUES[colorType]=defaultDefaultHues;if(!DARK_DEFAULT_HUES[colorType])DARK_DEFAULT_HUES[colorType]=defaultDefaultHues;});var VALID_HUE_VALUES=['50','100','200','300','400','500','600','700','800','900','A100','A200','A400','A700'];var themeConfig={disableTheming:false,generateOnDemand:false,registeredStyles:[],nonce:null};function ThemingProvider($mdColorPalette,$$mdMetaProvider){ThemingService.$inject=["$rootScope","$mdUtil","$q","$log"];PALETTES={};var THEMES={};var themingProvider;var alwaysWatchTheme=false;var defaultTheme='default';angular.extend(PALETTES,$mdColorPalette);var setBrowserColor=function(color){var removeChrome=$$mdMetaProvider.setMeta('theme-color',color);var removeWindows=$$mdMetaProvider.setMeta('msapplication-navbutton-color',color);return function(){removeChrome();removeWindows();};};var enableBrowserColor=function(options){options=angular.isObject(options)?options:{};var theme=options.theme||'default';var hue=options.hue||'800';var palette=PALETTES[options.palette]||PALETTES[THEMES[theme].colors[options.palette||'primary'].name];var color=angular.isObject(palette[hue])?palette[hue].hex:palette[hue];return setBrowserColor(color);};return themingProvider={definePalette:definePalette,extendPalette:extendPalette,theme:registerTheme,configuration:function(){return angular.extend({},themeConfig,{defaultTheme:defaultTheme,alwaysWatchTheme:alwaysWatchTheme,registeredStyles:[].concat(themeConfig.registeredStyles)});},disableTheming:function(isDisabled){themeConfig.disableTheming=angular.isUndefined(isDisabled)||!!isDisabled;},registerStyles:function(styles){themeConfig.registeredStyles.push(styles);},setNonce:function(nonceValue){themeConfig.nonce=nonceValue;},generateThemesOnDemand:function(onDemand){themeConfig.generateOnDemand=onDemand;},setDefaultTheme:function(theme){defaultTheme=theme;},alwaysWatchTheme:function(alwaysWatch){alwaysWatchTheme=alwaysWatch;},enableBrowserColor:enableBrowserColor,$get:ThemingService,_LIGHT_DEFAULT_HUES:LIGHT_DEFAULT_HUES,_DARK_DEFAULT_HUES:DARK_DEFAULT_HUES,_PALETTES:PALETTES,_THEMES:THEMES,_parseRules:parseRules,_rgba:rgba};function definePalette(name,map){map=map||{};PALETTES[name]=checkPaletteValid(name,map);return themingProvider;}
function extendPalette(name,map){return checkPaletteValid(name,angular.extend({},PALETTES[name]||{},map));}
function checkPaletteValid(name,map){var missingColors=VALID_HUE_VALUES.filter(function(field){return!map[field];});if(missingColors.length){throw new Error("Missing colors %1 in palette %2!".replace('%1',missingColors.join(', ')).replace('%2',name));}
return map;}
function registerTheme(name,inheritFrom){if(THEMES[name])return THEMES[name];inheritFrom=inheritFrom||'default';var parentTheme=typeof inheritFrom==='string'?THEMES[inheritFrom]:inheritFrom;var theme=new Theme(name);if(parentTheme){angular.forEach(parentTheme.colors,function(color,colorType){theme.colors[colorType]={name:color.name,hues:angular.extend({},color.hues)};});}
THEMES[name]=theme;return theme;}
function Theme(name){var self=this;self.name=name;self.colors={};self.dark=setDark;setDark(false);function setDark(isDark){isDark=arguments.length===0?true:!!isDark;if(isDark===self.isDark)return;self.isDark=isDark;self.foregroundPalette=self.isDark?LIGHT_FOREGROUND:DARK_FOREGROUND;self.foregroundShadow=self.isDark?DARK_SHADOW:LIGHT_SHADOW;var newDefaultHues=self.isDark?DARK_DEFAULT_HUES:LIGHT_DEFAULT_HUES;var oldDefaultHues=self.isDark?LIGHT_DEFAULT_HUES:DARK_DEFAULT_HUES;angular.forEach(newDefaultHues,function(newDefaults,colorType){var color=self.colors[colorType];var oldDefaults=oldDefaultHues[colorType];if(color){for(var hueName in color.hues){if(color.hues[hueName]===oldDefaults[hueName]){color.hues[hueName]=newDefaults[hueName];}}}});return self;}
THEME_COLOR_TYPES.forEach(function(colorType){var defaultHues=(self.isDark?DARK_DEFAULT_HUES:LIGHT_DEFAULT_HUES)[colorType];self[colorType+'Palette']=function setPaletteType(paletteName,hues){var color=self.colors[colorType]={name:paletteName,hues:angular.extend({},defaultHues,hues)};Object.keys(color.hues).forEach(function(name){if(!defaultHues[name]){throw new Error("Invalid hue name '%1' in theme %2's %3 color %4. Available hue names: %4".replace('%1',name).replace('%2',self.name).replace('%3',paletteName).replace('%4',Object.keys(defaultHues).join(', ')));}});Object.keys(color.hues).map(function(key){return color.hues[key];}).forEach(function(hueValue){if(VALID_HUE_VALUES.indexOf(hueValue)==-1){throw new Error("Invalid hue value '%1' in theme %2's %3 color %4. Available hue values: %5".replace('%1',hueValue).replace('%2',self.name).replace('%3',colorType).replace('%4',paletteName).replace('%5',VALID_HUE_VALUES.join(', ')));}});return self;};self[colorType+'Color']=function(){var args=Array.prototype.slice.call(arguments);console.warn('$mdThemingProviderTheme.'+colorType+'Color() has been deprecated. '+'Use $mdThemingProviderTheme.'+colorType+'Palette() instead.');return self[colorType+'Palette'].apply(self,args);};});}
function ThemingService($rootScope,$mdUtil,$q,$log){var applyTheme=function(scope,el){if(el===undefined){el=scope;scope=undefined;}
if(scope===undefined){scope=$rootScope;}
applyTheme.inherit(el,el);};Object.defineProperty(applyTheme,'THEMES',{get:function(){return angular.extend({},THEMES);}});Object.defineProperty(applyTheme,'PALETTES',{get:function(){return angular.extend({},PALETTES);}});Object.defineProperty(applyTheme,'ALWAYS_WATCH',{get:function(){return alwaysWatchTheme;}});applyTheme.inherit=inheritTheme;applyTheme.registered=registered;applyTheme.defaultTheme=function(){return defaultTheme;};applyTheme.generateTheme=function(name){generateTheme(THEMES[name],name,themeConfig.nonce);};applyTheme.defineTheme=function(name,options){options=options||{};var theme=registerTheme(name);if(options.primary){theme.primaryPalette(options.primary);}
if(options.accent){theme.accentPalette(options.accent);}
if(options.warn){theme.warnPalette(options.warn);}
if(options.background){theme.backgroundPalette(options.background);}
if(options.dark){theme.dark();}
this.generateTheme(name);return $q.resolve(name);};applyTheme.setBrowserColor=enableBrowserColor;return applyTheme;function registered(themeName){if(themeName===undefined||themeName==='')return true;return applyTheme.THEMES[themeName]!==undefined;}
function inheritTheme(el,parent){var ctrl=parent.controller('mdTheme')||el.data('$mdThemeController');updateThemeClass(lookupThemeName());if(ctrl){var watchTheme=alwaysWatchTheme||ctrl.$shouldWatch||$mdUtil.parseAttributeBoolean(el.attr('md-theme-watch'));var unwatch=ctrl.registerChanges(function(name){updateThemeClass(name);if(!watchTheme){unwatch();}
else{el.on('$destroy',unwatch);}});}
function lookupThemeName(){return ctrl&&ctrl.$mdTheme||(defaultTheme=='default'?'':defaultTheme);}
function updateThemeClass(theme){if(!theme)return;if(!registered(theme)){$log.warn('Attempted to use unregistered theme \''+theme+'\'. '+'Register it with $mdThemingProvider.theme().');}
var oldTheme=el.data('$mdThemeName');if(oldTheme)el.removeClass('md-'+oldTheme+'-theme');el.addClass('md-'+theme+'-theme');el.data('$mdThemeName',theme);if(ctrl){el.data('$mdThemeController',ctrl);}}}}}
function ThemingDirective($mdTheming,$interpolate,$parse,$mdUtil,$q,$log){return{priority:101,link:{pre:function(scope,el,attrs){var registeredCallbacks=[];var startSymbol=$interpolate.startSymbol();var endSymbol=$interpolate.endSymbol();var theme=attrs.mdTheme.trim();var hasInterpolation=theme.substr(0,startSymbol.length)===startSymbol&&theme.lastIndexOf(endSymbol)===theme.length-endSymbol.length;var oneTimeOperator='::';var oneTimeBind=attrs.mdTheme.split(startSymbol).join('').split(endSymbol).join('').trim().substr(0,oneTimeOperator.length)===oneTimeOperator;var ctrl={registerChanges:function(cb,context){if(context){cb=angular.bind(context,cb);}
registeredCallbacks.push(cb);return function(){var index=registeredCallbacks.indexOf(cb);if(index>-1){registeredCallbacks.splice(index,1);}};},$setTheme:function(theme){if(!$mdTheming.registered(theme)){$log.warn('attempted to use unregistered theme \''+theme+'\'');}
ctrl.$mdTheme=theme;for(var i=registeredCallbacks.length;i--;){registeredCallbacks[i](theme);}},$shouldWatch:$mdUtil.parseAttributeBoolean(el.attr('md-theme-watch'))||$mdTheming.ALWAYS_WATCH||(hasInterpolation&&!oneTimeBind)};el.data('$mdThemeController',ctrl);var getTheme=function(){var interpolation=$interpolate(attrs.mdTheme)(scope);return $parse(interpolation)(scope)||interpolation;};var setParsedTheme=function(theme){if(typeof theme==='string'){return ctrl.$setTheme(theme);}
$q.when(angular.isFunction(theme)?theme():theme).then(function(name){ctrl.$setTheme(name);});};setParsedTheme(getTheme());var unwatch=scope.$watch(getTheme,function(theme){if(theme){setParsedTheme(theme);if(!ctrl.$shouldWatch){unwatch();}}});}}};}
function disableThemesDirective(){themeConfig.disableTheming=true;return{restrict:'A',priority:'900'};}
function ThemableDirective($mdTheming){return $mdTheming;}
function parseRules(theme,colorType,rules){checkValidPalette(theme,colorType);rules=rules.replace(/THEME_NAME/g,theme.name);var generatedRules=[];var color=theme.colors[colorType];var themeNameRegex=new RegExp('\\.md-'+theme.name+'-theme','g');var hueRegex=new RegExp('(\'|")?{{\\s*('+colorType+')-(color|contrast)-?(\\d\\.?\\d*)?\\s*}}(\"|\')?','g');var simpleVariableRegex=/'?"?\{\{\s*([a-zA-Z]+)-(A?\d+|hue\-[0-3]|shadow|default)-?(\d\.?\d*)?(contrast)?\s*\}\}'?"?/g;var palette=PALETTES[color.name];rules=rules.replace(simpleVariableRegex,function(match,colorType,hue,opacity,contrast){if(colorType==='foreground'){if(hue=='shadow'){return theme.foregroundShadow;}else{return theme.foregroundPalette[hue]||theme.foregroundPalette['1'];}}
if(hue.indexOf('hue')===0||hue==='default'){hue=theme.colors[colorType].hues[hue];}
return rgba((PALETTES[theme.colors[colorType].name][hue]||'')[contrast?'contrast':'value'],opacity);});angular.forEach(color.hues,function(hueValue,hueName){var newRule=rules.replace(hueRegex,function(match,_,colorType,hueType,opacity){return rgba(palette[hueValue][hueType==='color'?'value':'contrast'],opacity);});if(hueName!=='default'){newRule=newRule.replace(themeNameRegex,'.md-'+theme.name+'-theme.md-'+hueName);}
if(theme.name=='default'){var themeRuleRegex=/((?:\s|>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)*)\.md-default-theme((?:\s|>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)*)/g;newRule=newRule.replace(themeRuleRegex,function(match,start,end){return match+', '+start+end;});}
generatedRules.push(newRule);});return generatedRules;}
var rulesByType={};function generateAllThemes($injector,$mdTheming){var head=document.head;var firstChild=head?head.firstElementChild:null;var themeCss=!themeConfig.disableTheming&&$injector.has('$MD_THEME_CSS')?$injector.get('$MD_THEME_CSS'):'';themeCss+=themeConfig.registeredStyles.join('');if(!firstChild)return;if(themeCss.length===0)return;angular.forEach(PALETTES,sanitizePalette);var rules=themeCss.split(/\}(?!(\}|'|"|;))/).filter(function(rule){return rule&&rule.trim().length;}).map(function(rule){return rule.trim()+'}';});var ruleMatchRegex=new RegExp('md-('+THEME_COLOR_TYPES.join('|')+')','g');THEME_COLOR_TYPES.forEach(function(type){rulesByType[type]='';});rules.forEach(function(rule){var match=rule.match(ruleMatchRegex);for(var i=0,type;type=THEME_COLOR_TYPES[i];i++){if(rule.indexOf('.md-'+type)>-1){return rulesByType[type]+=rule;}}
for(i=0;type=THEME_COLOR_TYPES[i];i++){if(rule.indexOf(type)>-1){return rulesByType[type]+=rule;}}
return rulesByType[DEFAULT_COLOR_TYPE]+=rule;});if(themeConfig.generateOnDemand)return;angular.forEach($mdTheming.THEMES,function(theme){if(!GENERATED[theme.name]&&!($mdTheming.defaultTheme()!=='default'&&theme.name==='default')){generateTheme(theme,theme.name,themeConfig.nonce);}});function sanitizePalette(palette,name){var defaultContrast=palette.contrastDefaultColor;var lightColors=palette.contrastLightColors||[];var strongLightColors=palette.contrastStrongLightColors||[];var darkColors=palette.contrastDarkColors||[];if(typeof lightColors==='string')lightColors=lightColors.split(' ');if(typeof strongLightColors==='string')strongLightColors=strongLightColors.split(' ');if(typeof darkColors==='string')darkColors=darkColors.split(' ');delete palette.contrastDefaultColor;delete palette.contrastLightColors;delete palette.contrastStrongLightColors;delete palette.contrastDarkColors;angular.forEach(palette,function(hueValue,hueName){if(angular.isObject(hueValue))return;var rgbValue=colorToRgbaArray(hueValue);if(!rgbValue){throw new Error("Color %1, in palette %2's hue %3, is invalid. Hex or rgb(a) color expected.".replace('%1',hueValue).replace('%2',palette.name).replace('%3',hueName));}
palette[hueName]={hex:palette[hueName],value:rgbValue,contrast:getContrastColor()};function getContrastColor(){if(defaultContrast==='light'){if(darkColors.indexOf(hueName)>-1){return DARK_CONTRAST_COLOR;}else{return strongLightColors.indexOf(hueName)>-1?STRONG_LIGHT_CONTRAST_COLOR:LIGHT_CONTRAST_COLOR;}}else{if(lightColors.indexOf(hueName)>-1){return strongLightColors.indexOf(hueName)>-1?STRONG_LIGHT_CONTRAST_COLOR:LIGHT_CONTRAST_COLOR;}else{return DARK_CONTRAST_COLOR;}}}});}}
function generateTheme(theme,name,nonce){var head=document.head;var firstChild=head?head.firstElementChild:null;if(!GENERATED[name]){THEME_COLOR_TYPES.forEach(function(colorType){var styleStrings=parseRules(theme,colorType,rulesByType[colorType]);while(styleStrings.length){var styleContent=styleStrings.shift();if(styleContent){var style=document.createElement('style');style.setAttribute('md-theme-style','');if(nonce){style.setAttribute('nonce',nonce);}
style.appendChild(document.createTextNode(styleContent));head.insertBefore(style,firstChild);}}});GENERATED[theme.name]=true;}}
function checkValidPalette(theme,colorType){if(!PALETTES[(theme.colors[colorType]||{}).name]){throw new Error("You supplied an invalid color palette for theme %1's %2 palette. Available palettes: %3".replace('%1',theme.name).replace('%2',colorType).replace('%3',Object.keys(PALETTES).join(', ')));}}
function colorToRgbaArray(clr){if(angular.isArray(clr)&&clr.length==3)return clr;if(/^rgb/.test(clr)){return clr.replace(/(^\s*rgba?\(|\)\s*$)/g,'').split(',').map(function(value,i){return i==3?parseFloat(value,10):parseInt(value,10);});}
if(clr.charAt(0)=='#')clr=clr.substring(1);if(!/^([a-fA-F0-9]{3}){1,2}$/g.test(clr))return;var dig=clr.length/3;var red=clr.substr(0,dig);var grn=clr.substr(dig,dig);var blu=clr.substr(dig*2);if(dig===1){red+=red;grn+=grn;blu+=blu;}
return[parseInt(red,16),parseInt(grn,16),parseInt(blu,16)];}
function rgba(rgbArray,opacity){if(!rgbArray)return"rgb('0,0,0')";if(rgbArray.length==4){rgbArray=angular.copy(rgbArray);opacity?rgbArray.pop():opacity=rgbArray.pop();}
return opacity&&(typeof opacity=='number'||(typeof opacity=='string'&&opacity.length))?'rgba('+rgbArray.join(',')+','+opacity+')':'rgb('+rgbArray.join(',')+')';}})(window.angular);})();(function(){"use strict";angular.module('material.core').factory('$$mdAnimate',["$q","$timeout","$mdConstant","$animateCss",function($q,$timeout,$mdConstant,$animateCss){return function($mdUtil){return AnimateDomUtils($mdUtil,$q,$timeout,$mdConstant,$animateCss);};}]);function AnimateDomUtils($mdUtil,$q,$timeout,$mdConstant,$animateCss){var self;return self={translate3d:function(target,from,to,options){return $animateCss(target,{from:from,to:to,addClass:options.transitionInClass,removeClass:options.transitionOutClass,duration:options.duration}).start().then(function(){return reverseTranslate;});function reverseTranslate(newFrom){return $animateCss(target,{to:newFrom||from,addClass:options.transitionOutClass,removeClass:options.transitionInClass,duration:options.duration}).start();}},waitTransitionEnd:function(element,opts){var TIMEOUT=3000;return $q(function(resolve,reject){opts=opts||{};if(noTransitionFound(opts.cachedTransitionStyles)){TIMEOUT=0;}
var timer=$timeout(finished,opts.timeout||TIMEOUT);element.on($mdConstant.CSS.TRANSITIONEND,finished);function finished(ev){if(ev&&ev.target!==element[0])return;if(ev)$timeout.cancel(timer);element.off($mdConstant.CSS.TRANSITIONEND,finished);resolve();}
function noTransitionFound(styles){styles=styles||window.getComputedStyle(element[0]);return styles.transitionDuration=='0s'||(!styles.transition&&!styles.transitionProperty);}});},calculateTransformValues:function(element,originator){var origin=originator.element;var bounds=originator.bounds;if(origin||bounds){var originBnds=origin?self.clientRect(origin)||currentBounds():self.copyRect(bounds);var dialogRect=self.copyRect(element[0].getBoundingClientRect());var dialogCenterPt=self.centerPointFor(dialogRect);var originCenterPt=self.centerPointFor(originBnds);return{centerX:originCenterPt.x-dialogCenterPt.x,centerY:originCenterPt.y-dialogCenterPt.y,scaleX:Math.round(100*Math.min(0.5,originBnds.width/dialogRect.width))/100,scaleY:Math.round(100*Math.min(0.5,originBnds.height/dialogRect.height))/100};}
return{centerX:0,centerY:0,scaleX:0.5,scaleY:0.5};function currentBounds(){var cntr=element?element.parent():null;var parent=cntr?cntr.parent():null;return parent?self.clientRect(parent):null;}},calculateZoomToOrigin:function(element,originator){var zoomTemplate="translate3d( {centerX}px, {centerY}px, 0 ) scale( {scaleX}, {scaleY} )";var buildZoom=angular.bind(null,$mdUtil.supplant,zoomTemplate);return buildZoom(self.calculateTransformValues(element,originator));},calculateSlideToOrigin:function(element,originator){var slideTemplate="translate3d( {centerX}px, {centerY}px, 0 )";var buildSlide=angular.bind(null,$mdUtil.supplant,slideTemplate);return buildSlide(self.calculateTransformValues(element,originator));},toCss:function(raw){var css={};var lookups='left top right bottom width height x y min-width min-height max-width max-height';angular.forEach(raw,function(value,key){if(angular.isUndefined(value))return;if(lookups.indexOf(key)>=0){css[key]=value+'px';}else{switch(key){case'transition':convertToVendor(key,$mdConstant.CSS.TRANSITION,value);break;case'transform':convertToVendor(key,$mdConstant.CSS.TRANSFORM,value);break;case'transformOrigin':convertToVendor(key,$mdConstant.CSS.TRANSFORM_ORIGIN,value);break;case'font-size':css['font-size']=value;break;}}});return css;function convertToVendor(key,vendor,value){angular.forEach(vendor.split(' '),function(key){css[key]=value;});}},toTransformCss:function(transform,addTransition,transition){var css={};angular.forEach($mdConstant.CSS.TRANSFORM.split(' '),function(key){css[key]=transform;});if(addTransition){transition=transition||"all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important";css.transition=transition;}
return css;},copyRect:function(source,destination){if(!source)return null;destination=destination||{};angular.forEach('left top right bottom width height'.split(' '),function(key){destination[key]=Math.round(source[key]);});destination.width=destination.width||(destination.right-destination.left);destination.height=destination.height||(destination.bottom-destination.top);return destination;},clientRect:function(element){var bounds=angular.element(element)[0].getBoundingClientRect();var isPositiveSizeClientRect=function(rect){return rect&&(rect.width>0)&&(rect.height>0);};return isPositiveSizeClientRect(bounds)?self.copyRect(bounds):null;},centerPointFor:function(targetRect){return targetRect?{x:Math.round(targetRect.left+(targetRect.width/2)),y:Math.round(targetRect.top+(targetRect.height/2))}:{x:0,y:0};}};}})();(function(){"use strict";if(angular.version.minor>=4){angular.module('material.core.animate',[]);}else{(function(){"use strict";var forEach=angular.forEach;var WEBKIT=angular.isDefined(document.documentElement.style.WebkitAppearance);var TRANSITION_PROP=WEBKIT?'WebkitTransition':'transition';var ANIMATION_PROP=WEBKIT?'WebkitAnimation':'animation';var PREFIX=WEBKIT?'-webkit-':'';var TRANSITION_EVENTS=(WEBKIT?'webkitTransitionEnd ':'')+'transitionend';var ANIMATION_EVENTS=(WEBKIT?'webkitAnimationEnd ':'')+'animationend';var $$ForceReflowFactory=['$document',function($document){return function(){return $document[0].body.clientWidth+1;};}];var $$rAFMutexFactory=['$$rAF',function($$rAF){return function(){var passed=false;$$rAF(function(){passed=true;});return function(fn){passed?fn():$$rAF(fn);};};}];var $$AnimateRunnerFactory=['$q','$$rAFMutex',function($q,$$rAFMutex){var INITIAL_STATE=0;var DONE_PENDING_STATE=1;var DONE_COMPLETE_STATE=2;function AnimateRunner(host){this.setHost(host);this._doneCallbacks=[];this._runInAnimationFrame=$$rAFMutex();this._state=0;}
AnimateRunner.prototype={setHost:function(host){this.host=host||{};},done:function(fn){if(this._state===DONE_COMPLETE_STATE){fn();}else{this._doneCallbacks.push(fn);}},progress:angular.noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){status===false?reject():resolve();});});}
return this.promise;},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler);},'catch':function(handler){return this.getPromise()['catch'](handler);},'finally':function(handler){return this.getPromise()['finally'](handler);},pause:function(){if(this.host.pause){this.host.pause();}},resume:function(){if(this.host.resume){this.host.resume();}},end:function(){if(this.host.end){this.host.end();}
this._resolve(true);},cancel:function(){if(this.host.cancel){this.host.cancel();}
this._resolve(false);},complete:function(response){var self=this;if(self._state===INITIAL_STATE){self._state=DONE_PENDING_STATE;self._runInAnimationFrame(function(){self._resolve(response);});}},_resolve:function(response){if(this._state!==DONE_COMPLETE_STATE){forEach(this._doneCallbacks,function(fn){fn(response);});this._doneCallbacks.length=0;this._state=DONE_COMPLETE_STATE;}}};AnimateRunner.all=function(runners,callback){var count=0;var status=true;forEach(runners,function(runner){runner.done(onProgress);});function onProgress(response){status=status&&response;if(++count===runners.length){callback(status);}}};return AnimateRunner;}];angular.module('material.core.animate',[]).factory('$$forceReflow',$$ForceReflowFactory).factory('$$AnimateRunner',$$AnimateRunnerFactory).factory('$$rAFMutex',$$rAFMutexFactory).factory('$animateCss',['$window','$$rAF','$$AnimateRunner','$$forceReflow','$$jqLite','$timeout','$animate',function($window,$$rAF,$$AnimateRunner,$$forceReflow,$$jqLite,$timeout,$animate){function init(element,options){var temporaryStyles=[];var node=getDomNode(element);var areAnimationsAllowed=node&&$animate.enabled();var hasCompleteStyles=false;var hasCompleteClasses=false;if(areAnimationsAllowed){if(options.transitionStyle){temporaryStyles.push([PREFIX+'transition',options.transitionStyle]);}
if(options.keyframeStyle){temporaryStyles.push([PREFIX+'animation',options.keyframeStyle]);}
if(options.delay){temporaryStyles.push([PREFIX+'transition-delay',options.delay+'s']);}
if(options.duration){temporaryStyles.push([PREFIX+'transition-duration',options.duration+'s']);}
hasCompleteStyles=options.keyframeStyle||(options.to&&(options.duration>0||options.transitionStyle));hasCompleteClasses=!!options.addClass||!!options.removeClass;blockTransition(element,true);}
var hasCompleteAnimation=areAnimationsAllowed&&(hasCompleteStyles||hasCompleteClasses);applyAnimationFromStyles(element,options);var animationClosed=false;var events,eventFn;return{close:$window.close,start:function(){var runner=new $$AnimateRunner();waitUntilQuiet(function(){blockTransition(element,false);if(!hasCompleteAnimation){return close();}
forEach(temporaryStyles,function(entry){var key=entry[0];var value=entry[1];node.style[camelCase(key)]=value;});applyClasses(element,options);var timings=computeTimings(element);if(timings.duration===0){return close();}
var moreStyles=[];if(options.easing){if(timings.transitionDuration){moreStyles.push([PREFIX+'transition-timing-function',options.easing]);}
if(timings.animationDuration){moreStyles.push([PREFIX+'animation-timing-function',options.easing]);}}
if(options.delay&&timings.animationDelay){moreStyles.push([PREFIX+'animation-delay',options.delay+'s']);}
if(options.duration&&timings.animationDuration){moreStyles.push([PREFIX+'animation-duration',options.duration+'s']);}
forEach(moreStyles,function(entry){var key=entry[0];var value=entry[1];node.style[camelCase(key)]=value;temporaryStyles.push(entry);});var maxDelay=timings.delay;var maxDelayTime=maxDelay*1000;var maxDuration=timings.duration;var maxDurationTime=maxDuration*1000;var startTime=Date.now();events=[];if(timings.transitionDuration){events.push(TRANSITION_EVENTS);}
if(timings.animationDuration){events.push(ANIMATION_EVENTS);}
events=events.join(' ');eventFn=function(event){event.stopPropagation();var ev=event.originalEvent||event;var timeStamp=ev.timeStamp||Date.now();var elapsedTime=parseFloat(ev.elapsedTime.toFixed(3));if(Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration){close();}};element.on(events,eventFn);applyAnimationToStyles(element,options);$timeout(close,maxDelayTime+maxDurationTime*1.5,false);});return runner;function close(){if(animationClosed)return;animationClosed=true;if(events&&eventFn){element.off(events,eventFn);}
applyClasses(element,options);applyAnimationStyles(element,options);forEach(temporaryStyles,function(entry){node.style[camelCase(entry[0])]='';});runner.complete(true);return runner;}}};}
function applyClasses(element,options){if(options.addClass){$$jqLite.addClass(element,options.addClass);options.addClass=null;}
if(options.removeClass){$$jqLite.removeClass(element,options.removeClass);options.removeClass=null;}}
function computeTimings(element){var node=getDomNode(element);var cs=$window.getComputedStyle(node);var tdr=parseMaxTime(cs[prop('transitionDuration')]);var adr=parseMaxTime(cs[prop('animationDuration')]);var tdy=parseMaxTime(cs[prop('transitionDelay')]);var ady=parseMaxTime(cs[prop('animationDelay')]);adr*=(parseInt(cs[prop('animationIterationCount')],10)||1);var duration=Math.max(adr,tdr);var delay=Math.max(ady,tdy);return{duration:duration,delay:delay,animationDuration:adr,transitionDuration:tdr,animationDelay:ady,transitionDelay:tdy};function prop(key){return WEBKIT?'Webkit'+key.charAt(0).toUpperCase()+key.substr(1):key;}}
function parseMaxTime(str){var maxValue=0;var values=(str||"").split(/\s*,\s*/);forEach(values,function(value){if(value.charAt(value.length-1)=='s'){value=value.substring(0,value.length-1);}
value=parseFloat(value)||0;maxValue=maxValue?Math.max(value,maxValue):value;});return maxValue;}
var cancelLastRAFRequest;var rafWaitQueue=[];function waitUntilQuiet(callback){if(cancelLastRAFRequest){cancelLastRAFRequest();}
rafWaitQueue.push(callback);cancelLastRAFRequest=$$rAF(function(){cancelLastRAFRequest=null;var pageWidth=$$forceReflow();for(var i=0;i<rafWaitQueue.length;i++){rafWaitQueue[i](pageWidth);}
rafWaitQueue.length=0;});}
function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options);applyAnimationToStyles(element,options);}
function applyAnimationFromStyles(element,options){if(options.from){element.css(options.from);options.from=null;}}
function applyAnimationToStyles(element,options){if(options.to){element.css(options.to);options.to=null;}}
function getDomNode(element){for(var i=0;i<element.length;i++){if(element[i].nodeType===1)return element[i];}}
function blockTransition(element,bool){var node=getDomNode(element);var key=camelCase(PREFIX+'transition-delay');node.style[key]=bool?'-9999s':'';}
return init;}]);function camelCase(str){return str.replace(/-[a-z]/g,function(str){return str.charAt(1).toUpperCase();});}})();}})();(function(){"use strict";angular.module('material.components.autocomplete',['material.core','material.components.icon','material.components.virtualRepeat']);})();(function(){"use strict";angular.module('material.components.backdrop',['material.core']).directive('mdBackdrop',["$mdTheming","$mdUtil","$animate","$rootElement","$window","$log","$$rAF","$document",function BackdropDirective($mdTheming,$mdUtil,$animate,$rootElement,$window,$log,$$rAF,$document){var ERROR_CSS_POSITION='<md-backdrop> may not work properly in a scrolled, static-positioned parent container.';return{restrict:'E',link:postLink};function postLink(scope,element,attrs){if($animate.pin)$animate.pin(element,$rootElement);var bodyStyles;$$rAF(function(){bodyStyles=$window.getComputedStyle($document[0].body);if(bodyStyles.position==='fixed'){var resizeHandler=$mdUtil.debounce(function(){bodyStyles=$window.getComputedStyle($document[0].body);resize();},60,null,false);resize();angular.element($window).on('resize',resizeHandler);scope.$on('$destroy',function(){angular.element($window).off('resize',resizeHandler);});}
var parent=element.parent();if(parent.length){if(parent[0].nodeName==='BODY'){element.css('position','fixed');}
var styles=$window.getComputedStyle(parent[0]);if(styles.position==='static'){$log.warn(ERROR_CSS_POSITION);}
$mdTheming.inherit(element,parent);}});function resize(){var viewportHeight=parseInt(bodyStyles.height,10)+Math.abs(parseInt(bodyStyles.top,10));element.css('height',viewportHeight+'px');}}}]);})();(function(){"use strict";MdBottomSheetDirective.$inject=["$mdBottomSheet"];MdBottomSheetProvider.$inject=["$$interimElementProvider"];angular.module('material.components.bottomSheet',['material.core','material.components.backdrop']).directive('mdBottomSheet',MdBottomSheetDirective).provider('$mdBottomSheet',MdBottomSheetProvider);function MdBottomSheetDirective($mdBottomSheet){return{restrict:'E',link:function postLink(scope,element){element.addClass('_md');scope.$on('$destroy',function(){$mdBottomSheet.destroy();});}};}
function MdBottomSheetProvider($$interimElementProvider){bottomSheetDefaults.$inject=["$animate","$mdConstant","$mdUtil","$mdTheming","$mdBottomSheet","$rootElement","$mdGesture","$log"];var CLOSING_VELOCITY=0.5;var PADDING=80;return $$interimElementProvider('$mdBottomSheet').setDefaults({methods:['disableParentScroll','escapeToClose','clickOutsideToClose'],options:bottomSheetDefaults});function bottomSheetDefaults($animate,$mdConstant,$mdUtil,$mdTheming,$mdBottomSheet,$rootElement,$mdGesture,$log){var backdrop;return{themable:true,onShow:onShow,onRemove:onRemove,disableBackdrop:false,escapeToClose:true,clickOutsideToClose:true,disableParentScroll:true};function onShow(scope,element,options,controller){element=$mdUtil.extractElementByName(element,'md-bottom-sheet');element.attr('tabindex',"-1");if(element.hasClass('ng-cloak')){var message='$mdBottomSheet: using `<md-bottom-sheet ng-cloak >` will affect the bottom-sheet opening animations.';$log.warn(message,element[0]);}
if(!options.disableBackdrop){backdrop=$mdUtil.createBackdrop(scope,"md-bottom-sheet-backdrop md-opaque");backdrop[0].tabIndex=-1;if(options.clickOutsideToClose){backdrop.on('click',function(){$mdUtil.nextTick($mdBottomSheet.cancel,true);});}
$mdTheming.inherit(backdrop,options.parent);$animate.enter(backdrop,options.parent,null);}
var bottomSheet=new BottomSheet(element,options.parent);options.bottomSheet=bottomSheet;$mdTheming.inherit(bottomSheet.element,options.parent);if(options.disableParentScroll){options.restoreScroll=$mdUtil.disableScrollAround(bottomSheet.element,options.parent);}
return $animate.enter(bottomSheet.element,options.parent,backdrop).then(function(){var focusable=$mdUtil.findFocusTarget(element)||angular.element(element[0].querySelector('button')||element[0].querySelector('a')||element[0].querySelector($mdUtil.prefixer('ng-click',true)))||backdrop;if(options.escapeToClose){options.rootElementKeyupCallback=function(e){if(e.keyCode===$mdConstant.KEY_CODE.ESCAPE){$mdUtil.nextTick($mdBottomSheet.cancel,true);}};$rootElement.on('keyup',options.rootElementKeyupCallback);focusable&&focusable.focus();}});}
function onRemove(scope,element,options){var bottomSheet=options.bottomSheet;if(!options.disableBackdrop)$animate.leave(backdrop);return $animate.leave(bottomSheet.element).then(function(){if(options.disableParentScroll){options.restoreScroll();delete options.restoreScroll;}
bottomSheet.cleanup();});}
function BottomSheet(element,parent){var deregister=$mdGesture.register(parent,'drag',{horizontal:false});parent.on('$md.dragstart',onDragStart).on('$md.drag',onDrag).on('$md.dragend',onDragEnd);return{element:element,cleanup:function cleanup(){deregister();parent.off('$md.dragstart',onDragStart);parent.off('$md.drag',onDrag);parent.off('$md.dragend',onDragEnd);}};function onDragStart(ev){element.css($mdConstant.CSS.TRANSITION_DURATION,'0ms');}
function onDrag(ev){var transform=ev.pointer.distanceY;if(transform<5){transform=Math.max(-PADDING,transform/2);}
element.css($mdConstant.CSS.TRANSFORM,'translate3d(0,'+(PADDING+transform)+'px,0)');}
function onDragEnd(ev){if(ev.pointer.distanceY>0&&(ev.pointer.distanceY>20||Math.abs(ev.pointer.velocityY)>CLOSING_VELOCITY)){var distanceRemaining=element.prop('offsetHeight')-ev.pointer.distanceY;var transitionDuration=Math.min(distanceRemaining/ev.pointer.velocityY*0.75,500);element.css($mdConstant.CSS.TRANSITION_DURATION,transitionDuration+'ms');$mdUtil.nextTick($mdBottomSheet.cancel,true);}else{element.css($mdConstant.CSS.TRANSITION_DURATION,'');element.css($mdConstant.CSS.TRANSFORM,'');}}}}}})();(function(){"use strict";MdButtonDirective.$inject=["$mdButtonInkRipple","$mdTheming","$mdAria","$mdInteraction"];MdAnchorDirective.$inject=["$mdTheming"];angular.module('material.components.button',['material.core']).directive('mdButton',MdButtonDirective).directive('a',MdAnchorDirective);function MdAnchorDirective($mdTheming){return{restrict:'E',link:function postLink(scope,element){$mdTheming(element);}};}
function MdButtonDirective($mdButtonInkRipple,$mdTheming,$mdAria,$mdInteraction){return{restrict:'EA',replace:true,transclude:true,template:getTemplate,link:postLink};function isAnchor(attr){return angular.isDefined(attr.href)||angular.isDefined(attr.ngHref)||angular.isDefined(attr.ngLink)||angular.isDefined(attr.uiSref);}
function getTemplate(element,attr){if(isAnchor(attr)){return'<a class="md-button" ng-transclude></a>';}else{var btnType=(typeof attr.type==='undefined')?'button':attr.type;return'<button class="md-button" type="'+btnType+'" ng-transclude></button>';}}
function postLink(scope,element,attr){$mdTheming(element);$mdButtonInkRipple.attach(scope,element);$mdAria.expectWithoutText(element,'aria-label');if(isAnchor(attr)&&angular.isDefined(attr.ngDisabled)){scope.$watch(attr.ngDisabled,function(isDisabled){element.attr('tabindex',isDisabled?-1:0);});}
element.on('click',function(e){if(attr.disabled===true){e.preventDefault();e.stopImmediatePropagation();}});if(!element.hasClass('md-no-focus')){element.on('focus',function(){if(!$mdInteraction.isUserInvoked()||$mdInteraction.getLastInteractionType()==='keyboard'){element.addClass('md-focused');}});element.on('blur',function(){element.removeClass('md-focused');});}}}})();(function(){"use strict";mdCardDirective.$inject=["$mdTheming"];angular.module('material.components.card',['material.core']).directive('mdCard',mdCardDirective);function mdCardDirective($mdTheming){return{restrict:'E',link:function($scope,$element,attr){$element.addClass('_md');$mdTheming($element);}};}})();(function(){"use strict";angular.module('material.components.chips',['material.core','material.components.autocomplete']);})();(function(){"use strict";MdCheckboxDirective.$inject=["inputDirective","$mdAria","$mdConstant","$mdTheming","$mdUtil","$mdInteraction"];angular.module('material.components.checkbox',['material.core']).directive('mdCheckbox',MdCheckboxDirective);function MdCheckboxDirective(inputDirective,$mdAria,$mdConstant,$mdTheming,$mdUtil,$mdInteraction){inputDirective=inputDirective[0];return{restrict:'E',transclude:true,require:['^?mdInputContainer','?ngModel','?^form'],priority:$mdConstant.BEFORE_NG_ARIA,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox>'+'<div class="md-icon"></div>'+'</div>'+'<div ng-transclude class="md-label"></div>',compile:compile};function compile(tElement,tAttrs){tAttrs.$set('tabindex',tAttrs.tabindex||'0');tAttrs.$set('type','checkbox');tAttrs.$set('role',tAttrs.type);return{pre:function(scope,element){element.on('click',function(e){if(this.hasAttribute('disabled')){e.stopImmediatePropagation();}});},post:postLink};function postLink(scope,element,attr,ctrls){var isIndeterminate;var containerCtrl=ctrls[0];var ngModelCtrl=ctrls[1]||$mdUtil.fakeNgModel();var formCtrl=ctrls[2];if(containerCtrl){var isErrorGetter=containerCtrl.isErrorGetter||function(){return ngModelCtrl.$invalid&&(ngModelCtrl.$touched||(formCtrl&&formCtrl.$submitted));};containerCtrl.input=element;scope.$watch(isErrorGetter,containerCtrl.setInvalid);}
$mdTheming(element);element.children().on('focus',function(){element.focus();});if($mdUtil.parseAttributeBoolean(attr.mdIndeterminate)){setIndeterminateState();scope.$watch(attr.mdIndeterminate,setIndeterminateState);}
if(attr.ngChecked){scope.$watch(scope.$eval.bind(scope,attr.ngChecked),function(value){ngModelCtrl.$setViewValue(value);ngModelCtrl.$render();});}
$$watchExpr('ngDisabled','tabindex',{true:'-1',false:attr.tabindex});$mdAria.expectWithText(element,'aria-label');inputDirective.link.pre(scope,{on:angular.noop,0:{}},attr,[ngModelCtrl]);element.on('click',listener).on('keypress',keypressHandler).on('focus',function(){if($mdInteraction.getLastInteractionType()==='keyboard'){element.addClass('md-focused');}}).on('blur',function(){element.removeClass('md-focused');});ngModelCtrl.$render=render;function $$watchExpr(expr,htmlAttr,valueOpts){if(attr[expr]){scope.$watch(attr[expr],function(val){if(valueOpts[val]){element.attr(htmlAttr,valueOpts[val]);}});}}
function keypressHandler(ev){var keyCode=ev.which||ev.keyCode;if(keyCode===$mdConstant.KEY_CODE.SPACE||keyCode===$mdConstant.KEY_CODE.ENTER){ev.preventDefault();element.addClass('md-focused');listener(ev);}}
function listener(ev){if(element[0].hasAttribute('disabled')||scope.skipToggle){return;}
scope.$apply(function(){var viewValue=attr.ngChecked&&attr.ngClick?attr.checked:!ngModelCtrl.$viewValue;ngModelCtrl.$setViewValue(viewValue,ev&&ev.type);ngModelCtrl.$render();});}
function render(){element.toggleClass('md-checked',!!ngModelCtrl.$viewValue&&!isIndeterminate);}
function setIndeterminateState(newValue){isIndeterminate=newValue!==false;if(isIndeterminate){element.attr('aria-checked','mixed');}
element.toggleClass('md-indeterminate',isIndeterminate);}}}}})();(function(){"use strict";(function(){"use strict";MdColorsDirective.$inject=["$mdColors","$mdUtil","$log","$parse"];MdColorsService.$inject=["$mdTheming","$mdUtil","$log"];var STATIC_COLOR_EXPRESSION=/^{((\s|,)*?["'a-zA-Z-]+?\s*?:\s*?('|")[a-zA-Z0-9-.]*('|"))+\s*}$/;var colorPalettes=null;angular.module('material.components.colors',['material.core']).directive('mdColors',MdColorsDirective).service('$mdColors',MdColorsService);function MdColorsService($mdTheming,$mdUtil,$log){colorPalettes=colorPalettes||Object.keys($mdTheming.PALETTES);return{applyThemeColors:applyThemeColors,getThemeColor:getThemeColor,hasTheme:hasTheme};function applyThemeColors(element,colorExpression){try{if(colorExpression){element.css(interpolateColors(colorExpression));}}catch(e){$log.error(e.message);}}
function getThemeColor(expression){var color=extractColorOptions(expression);return parseColor(color);}
function parseColor(color,contrast){contrast=contrast||false;var rgbValues=$mdTheming.PALETTES[color.palette][color.hue];rgbValues=contrast?rgbValues.contrast:rgbValues.value;return $mdUtil.supplant('rgba({0}, {1}, {2}, {3})',[rgbValues[0],rgbValues[1],rgbValues[2],rgbValues[3]||color.opacity]);}
function interpolateColors(themeColors){var rgbColors={};var hasColorProperty=themeColors.hasOwnProperty('color');angular.forEach(themeColors,function(value,key){var color=extractColorOptions(value);var hasBackground=key.indexOf('background')>-1;rgbColors[key]=parseColor(color);if(hasBackground&&!hasColorProperty){rgbColors.color=parseColor(color,true);}});return rgbColors;}
function hasTheme(expression){return angular.isDefined($mdTheming.THEMES[expression.split('-')[0]]);}
function extractColorOptions(expression){var parts=expression.split('-');var hasTheme=angular.isDefined($mdTheming.THEMES[parts[0]]);var theme=hasTheme?parts.splice(0,1)[0]:$mdTheming.defaultTheme();return{theme:theme,palette:extractPalette(parts,theme),hue:extractHue(parts,theme),opacity:parts[2]||1};}
function extractPalette(parts,theme){var isTwoWord=parts.length>1&&colorPalettes.indexOf(parts[1])!==-1;var palette=parts[0].replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase();if(isTwoWord)palette=parts[0]+'-'+parts.splice(1,1);if(colorPalettes.indexOf(palette)===-1){var scheme=$mdTheming.THEMES[theme].colors[palette];if(!scheme){throw new Error($mdUtil.supplant('mdColors: couldn\'t find \'{palette}\' in the palettes.',{palette:palette}));}
palette=scheme.name;}
return palette;}
function extractHue(parts,theme){var themeColors=$mdTheming.THEMES[theme].colors;if(parts[1]==='hue'){var hueNumber=parseInt(parts.splice(2,1)[0],10);if(hueNumber<1||hueNumber>3){throw new Error($mdUtil.supplant('mdColors: \'hue-{hueNumber}\' is not a valid hue, can be only \'hue-1\', \'hue-2\' and \'hue-3\'',{hueNumber:hueNumber}));}
parts[1]='hue-'+hueNumber;if(!(parts[0]in themeColors)){throw new Error($mdUtil.supplant('mdColors: \'hue-x\' can only be used with [{availableThemes}], but was used with \'{usedTheme}\'',{availableThemes:Object.keys(themeColors).join(', '),usedTheme:parts[0]}));}
return themeColors[parts[0]].hues[parts[1]];}
return parts[1]||themeColors[parts[0]in themeColors?parts[0]:'primary'].hues['default'];}}
function MdColorsDirective($mdColors,$mdUtil,$log,$parse){return{restrict:'A',require:['^?mdTheme'],compile:function(tElem,tAttrs){var shouldWatch=shouldColorsWatch();return function(scope,element,attrs,ctrl){var mdThemeController=ctrl[0];var lastColors={};var parseColors=function(theme){if(typeof theme!=='string'){theme='';}
if(!attrs.mdColors){attrs.mdColors='{}';}
var colors=$parse(attrs.mdColors)(scope);if(mdThemeController){Object.keys(colors).forEach(function(prop){var color=colors[prop];if(!$mdColors.hasTheme(color)){colors[prop]=(theme||mdThemeController.$mdTheme)+'-'+color;}});}
cleanElement(colors);return colors;};var cleanElement=function(colors){if(!angular.equals(colors,lastColors)){var keys=Object.keys(lastColors);if(lastColors.background&&!keys.color){keys.push('color');}
keys.forEach(function(key){element.css(key,'');});}
lastColors=colors;};var unregisterChanges=angular.noop;if(mdThemeController){unregisterChanges=mdThemeController.registerChanges(function(theme){$mdColors.applyThemeColors(element,parseColors(theme));});}
scope.$on('$destroy',function(){unregisterChanges();});try{if(shouldWatch){scope.$watch(parseColors,angular.bind(this,$mdColors.applyThemeColors,element),true);}
else{$mdColors.applyThemeColors(element,parseColors());}}
catch(e){$log.error(e.message);}};function shouldColorsWatch(){var rawColorExpression=tAttrs.mdColors;var bindOnce=rawColorExpression.indexOf('::')>-1;var isStatic=bindOnce?true:STATIC_COLOR_EXPRESSION.test(tAttrs.mdColors);tAttrs.mdColors=rawColorExpression.replace('::','');var hasWatchAttr=angular.isDefined(tAttrs.mdColorsWatch);return(bindOnce||isStatic)?false:hasWatchAttr?$mdUtil.parseAttributeBoolean(tAttrs.mdColorsWatch):true;}}};}})();})();(function(){"use strict";mdContentDirective.$inject=["$mdTheming"];angular.module('material.components.content',['material.core']).directive('mdContent',mdContentDirective);function mdContentDirective($mdTheming){return{restrict:'E',controller:['$scope','$element',ContentController],link:function(scope,element){element.addClass('_md');$mdTheming(element);scope.$broadcast('$mdContentLoaded',element);iosScrollFix(element[0]);}};function ContentController($scope,$element){this.$scope=$scope;this.$element=$element;}}
function iosScrollFix(node){angular.element(node).on('$md.pressdown',function(ev){if(ev.pointer.type!=='t')return;if(ev.$materialScrollFixed)return;ev.$materialScrollFixed=true;if(node.scrollTop===0){node.scrollTop=1;}else if(node.scrollHeight===node.scrollTop+node.offsetHeight){node.scrollTop-=1;}});}})();(function(){"use strict";angular.module('material.components.datepicker',['material.core','material.components.icon','material.components.virtualRepeat']);})();(function(){"use strict";MdDialogDirective.$inject=["$$rAF","$mdTheming","$mdDialog"];MdDialogProvider.$inject=["$$interimElementProvider"];angular.module('material.components.dialog',['material.core','material.components.backdrop']).directive('mdDialog',MdDialogDirective).provider('$mdDialog',MdDialogProvider);function MdDialogDirective($$rAF,$mdTheming,$mdDialog){return{restrict:'E',link:function(scope,element){element.addClass('_md');$mdTheming(element);$$rAF(function(){var images;var content=element[0].querySelector('md-dialog-content');if(content){images=content.getElementsByTagName('img');addOverflowClass();angular.element(images).on('load',addOverflowClass);}
scope.$on('$destroy',function(){$mdDialog.destroy(element);});function addOverflowClass(){element.toggleClass('md-content-overflow',content.scrollHeight>content.clientHeight);}});}};}
function MdDialogProvider($$interimElementProvider){MdDialogController.$inject=["$mdDialog","$mdConstant"];dialogDefaultOptions.$inject=["$mdDialog","$mdAria","$mdUtil","$mdConstant","$animate","$document","$window","$rootElement","$log","$injector","$mdTheming","$interpolate","$mdInteraction"];var topFocusTrap,bottomFocusTrap;return $$interimElementProvider('$mdDialog').setDefaults({methods:['disableParentScroll','hasBackdrop','clickOutsideToClose','escapeToClose','targetEvent','closeTo','openFrom','parent','fullscreen','multiple'],options:dialogDefaultOptions}).addPreset('alert',{methods:['title','htmlContent','textContent','content','ariaLabel','ok','theme','css'],options:advancedDialogOptions}).addPreset('confirm',{methods:['title','htmlContent','textContent','content','ariaLabel','ok','cancel','theme','css'],options:advancedDialogOptions}).addPreset('prompt',{methods:['title','htmlContent','textContent','initialValue','content','placeholder','ariaLabel','ok','cancel','theme','css','required'],options:advancedDialogOptions});function advancedDialogOptions(){return{template:['<md-dialog md-theme="{{ dialog.theme || dialog.defaultTheme }}" aria-label="{{ dialog.ariaLabel }}" ng-class="dialog.css">','  <md-dialog-content class="md-dialog-content" role="document" tabIndex="-1">','    <h2 class="md-title">{{ dialog.title }}</h2>','    <div ng-if="::dialog.mdHtmlContent" class="md-dialog-content-body" ','        ng-bind-html="::dialog.mdHtmlContent"></div>','    <div ng-if="::!dialog.mdHtmlContent" class="md-dialog-content-body">','      <p>{{::dialog.mdTextContent}}</p>','    </div>','    <md-input-container md-no-float ng-if="::dialog.$type == \'prompt\'" class="md-prompt-input-container">','      <input ng-keypress="dialog.keypress($event)" md-autofocus ng-model="dialog.result" '+'             placeholder="{{::dialog.placeholder}}" ng-required="dialog.required">','    </md-input-container>','  </md-dialog-content>','  <md-dialog-actions>','    <md-button ng-if="dialog.$type === \'confirm\' || dialog.$type === \'prompt\'"'+'               ng-click="dialog.abort()" class="md-primary md-cancel-button">','      {{ dialog.cancel }}','    </md-button>','    <md-button ng-click="dialog.hide()" class="md-primary md-confirm-button" md-autofocus="dialog.$type===\'alert\'"'+'               ng-disabled="dialog.required && !dialog.result">','      {{ dialog.ok }}','    </md-button>','  </md-dialog-actions>','</md-dialog>'].join('').replace(/\s\s+/g,''),controller:MdDialogController,controllerAs:'dialog',bindToController:true,};}
function MdDialogController($mdDialog,$mdConstant){this.$onInit=function(){var isPrompt=this.$type=='prompt';if(isPrompt&&this.initialValue){this.result=this.initialValue;}
this.hide=function(){$mdDialog.hide(isPrompt?this.result:true);};this.abort=function(){$mdDialog.cancel();};this.keypress=function($event){if($event.keyCode===$mdConstant.KEY_CODE.ENTER){$mdDialog.hide(this.result);}};};}
function dialogDefaultOptions($mdDialog,$mdAria,$mdUtil,$mdConstant,$animate,$document,$window,$rootElement,$log,$injector,$mdTheming,$interpolate,$mdInteraction){return{hasBackdrop:true,isolateScope:true,onCompiling:beforeCompile,onShow:onShow,onShowing:beforeShow,onRemove:onRemove,clickOutsideToClose:false,escapeToClose:true,targetEvent:null,closeTo:null,openFrom:null,focusOnOpen:true,disableParentScroll:true,autoWrap:true,fullscreen:false,transformTemplate:function(template,options){var startSymbol=$interpolate.startSymbol();var endSymbol=$interpolate.endSymbol();var theme=startSymbol+(options.themeWatch?'':'::')+'theme'+endSymbol;return'<div class="md-dialog-container" tabindex="-1" md-theme="'+theme+'">'+validatedTemplate(template)+'</div>';function validatedTemplate(template){if(options.autoWrap&&!/<\/md-dialog>/g.test(template)){return'<md-dialog>'+(template||'')+'</md-dialog>';}else{return template||'';}}}};function beforeCompile(options){options.defaultTheme=$mdTheming.defaultTheme();detectTheming(options);}
function beforeShow(scope,element,options,controller){if(controller){var mdHtmlContent=controller.htmlContent||options.htmlContent||'';var mdTextContent=controller.textContent||options.textContent||controller.content||options.content||'';if(mdHtmlContent&&!$injector.has('$sanitize')){throw Error('The ngSanitize module must be loaded in order to use htmlContent.');}
if(mdHtmlContent&&mdTextContent){throw Error('md-dialog cannot have both `htmlContent` and `textContent`');}
controller.mdHtmlContent=mdHtmlContent;controller.mdTextContent=mdTextContent;}}
function onShow(scope,element,options,controller){angular.element($document[0].body).addClass('md-dialog-is-showing');var dialogElement=element.find('md-dialog');if(dialogElement.hasClass('ng-cloak')){var message='$mdDialog: using `<md-dialog ng-cloak>` will affect the dialog opening animations.';$log.warn(message,element[0]);}
captureParentAndFromToElements(options);configureAria(dialogElement,options);showBackdrop(scope,element,options);activateListeners(element,options);return dialogPopIn(element,options).then(function(){lockScreenReader(element,options);warnDeprecatedActions();focusOnOpen();});function warnDeprecatedActions(){if(element[0].querySelector('.md-actions')){$log.warn('Using a class of md-actions is deprecated, please use <md-dialog-actions>.');}}
function focusOnOpen(){if(options.focusOnOpen){var target=$mdUtil.findFocusTarget(element)||findCloseButton()||dialogElement;target.focus();}
function findCloseButton(){return element[0].querySelector('.dialog-close, md-dialog-actions button:last-child');}}}
function onRemove(scope,element,options){options.deactivateListeners();options.unlockScreenReader();options.hideBackdrop(options.$destroy);if(topFocusTrap&&topFocusTrap.parentNode){topFocusTrap.parentNode.removeChild(topFocusTrap);}
if(bottomFocusTrap&&bottomFocusTrap.parentNode){bottomFocusTrap.parentNode.removeChild(bottomFocusTrap);}
return!!options.$destroy?detachAndClean():animateRemoval().then(detachAndClean);function animateRemoval(){return dialogPopOut(element,options);}
function detachAndClean(){angular.element($document[0].body).removeClass('md-dialog-is-showing');if(options.contentElement){options.reverseContainerStretch();}
options.cleanupElement();if(!options.$destroy&&options.originInteraction==='keyboard'){options.origin.focus();}}}
function detectTheming(options){var targetEl;if(options.targetEvent&&options.targetEvent.target){targetEl=angular.element(options.targetEvent.target);}
var themeCtrl=targetEl&&targetEl.controller('mdTheme');if(!themeCtrl){return;}
options.themeWatch=themeCtrl.$shouldWatch;var theme=options.theme||themeCtrl.$mdTheme;if(theme){options.scope.theme=theme;}
var unwatch=themeCtrl.registerChanges(function(newTheme){options.scope.theme=newTheme;if(!options.themeWatch){unwatch();}});}
function captureParentAndFromToElements(options){options.origin=angular.extend({element:null,bounds:null,focus:angular.noop},options.origin||{});options.parent=getDomElement(options.parent,$rootElement);options.closeTo=getBoundingClientRect(getDomElement(options.closeTo));options.openFrom=getBoundingClientRect(getDomElement(options.openFrom));if(options.targetEvent){options.origin=getBoundingClientRect(options.targetEvent.target,options.origin);options.originInteraction=$mdInteraction.getLastInteractionType();}
function getBoundingClientRect(element,orig){var source=angular.element((element||{}));if(source&&source.length){var bounds={top:0,left:0,height:0,width:0};var hasFn=angular.isFunction(source[0].getBoundingClientRect);return angular.extend(orig||{},{element:hasFn?source:undefined,bounds:hasFn?source[0].getBoundingClientRect():angular.extend({},bounds,source[0]),focus:angular.bind(source,source.focus),});}}
function getDomElement(element,defaultElement){if(angular.isString(element)){element=$document[0].querySelector(element);}
return angular.element(element||defaultElement);}}
function activateListeners(element,options){var window=angular.element($window);var onWindowResize=$mdUtil.debounce(function(){stretchDialogContainerToViewport(element,options);},60);var removeListeners=[];var smartClose=function(){var closeFn=(options.$type=='alert')?$mdDialog.hide:$mdDialog.cancel;$mdUtil.nextTick(closeFn,true);};if(options.escapeToClose){var parentTarget=options.parent;var keyHandlerFn=function(ev){if(ev.keyCode===$mdConstant.KEY_CODE.ESCAPE){ev.stopPropagation();ev.preventDefault();smartClose();}};element.on('keydown',keyHandlerFn);parentTarget.on('keydown',keyHandlerFn);removeListeners.push(function(){element.off('keydown',keyHandlerFn);parentTarget.off('keydown',keyHandlerFn);});}
window.on('resize',onWindowResize);removeListeners.push(function(){window.off('resize',onWindowResize);});if(options.clickOutsideToClose){var target=element;var sourceElem;var mousedownHandler=function(ev){sourceElem=ev.target;};var mouseupHandler=function(ev){if(sourceElem===target[0]&&ev.target===target[0]){ev.stopPropagation();ev.preventDefault();smartClose();}};target.on('mousedown',mousedownHandler);target.on('mouseup',mouseupHandler);removeListeners.push(function(){target.off('mousedown',mousedownHandler);target.off('mouseup',mouseupHandler);});}
options.deactivateListeners=function(){removeListeners.forEach(function(removeFn){removeFn();});options.deactivateListeners=null;};}
function showBackdrop(scope,element,options){if(options.disableParentScroll){options.restoreScroll=$mdUtil.disableScrollAround(element,options.parent);}
if(options.hasBackdrop){options.backdrop=$mdUtil.createBackdrop(scope,"md-dialog-backdrop md-opaque");$animate.enter(options.backdrop,options.parent);}
options.hideBackdrop=function hideBackdrop($destroy){if(options.backdrop){if(!!$destroy)options.backdrop.remove();else $animate.leave(options.backdrop);}
if(options.disableParentScroll){options.restoreScroll&&options.restoreScroll();delete options.restoreScroll;}
options.hideBackdrop=null;};}
function configureAria(element,options){var role=(options.$type==='alert')?'alertdialog':'dialog';var dialogContent=element.find('md-dialog-content');var existingDialogId=element.attr('id');var dialogContentId='dialogContent_'+(existingDialogId||$mdUtil.nextUid());element.attr({'role':role,'tabIndex':'-1'});if(dialogContent.length===0){dialogContent=element;if(existingDialogId){dialogContentId=existingDialogId;}}
dialogContent.attr('id',dialogContentId);element.attr('aria-describedby',dialogContentId);if(options.ariaLabel){$mdAria.expect(element,'aria-label',options.ariaLabel);}
else{$mdAria.expectAsync(element,'aria-label',function(){if(options.title){return options.title;}else{var words=dialogContent.text().split(/\s+/);if(words.length>3)words=words.slice(0,3).concat('...');return words.join(' ');}});}
topFocusTrap=document.createElement('div');topFocusTrap.classList.add('md-dialog-focus-trap');topFocusTrap.tabIndex=0;bottomFocusTrap=topFocusTrap.cloneNode(false);var focusHandler=function(){element.focus();};topFocusTrap.addEventListener('focus',focusHandler);bottomFocusTrap.addEventListener('focus',focusHandler);element[0].parentNode.insertBefore(topFocusTrap,element[0]);element.after(bottomFocusTrap);}
function lockScreenReader(element,options){var isHidden=true;walkDOM(element[0]);options.unlockScreenReader=function(){isHidden=false;walkDOM(element[0]);options.unlockScreenReader=null;};function walkDOM(element){while(element.parentNode){if(element===document.body){return;}
var children=element.parentNode.children;for(var i=0;i<children.length;i++){if(element!==children[i]&&!isNodeOneOf(children[i],['SCRIPT','STYLE'])&&!children[i].hasAttribute('aria-live')){children[i].setAttribute('aria-hidden',isHidden);}}
walkDOM(element=element.parentNode);}}}
function stretchDialogContainerToViewport(container,options){var isFixed=$window.getComputedStyle($document[0].body).position=='fixed';var backdrop=options.backdrop?$window.getComputedStyle(options.backdrop[0]):null;var height=backdrop?Math.min($document[0].body.clientHeight,Math.ceil(Math.abs(parseInt(backdrop.height,10)))):0;var previousStyles={top:container.css('top'),height:container.css('height')};var parentTop=Math.abs(options.parent[0].getBoundingClientRect().top);container.css({top:(isFixed?parentTop:0)+'px',height:height?height+'px':'100%'});return function(){container.css(previousStyles);};}
function dialogPopIn(container,options){options.parent.append(container);options.reverseContainerStretch=stretchDialogContainerToViewport(container,options);var dialogEl=container.find('md-dialog');var animator=$mdUtil.dom.animator;var buildTranslateToOrigin=animator.calculateZoomToOrigin;var translateOptions={transitionInClass:'md-transition-in',transitionOutClass:'md-transition-out'};var from=animator.toTransformCss(buildTranslateToOrigin(dialogEl,options.openFrom||options.origin));var to=animator.toTransformCss("");dialogEl.toggleClass('md-dialog-fullscreen',!!options.fullscreen);return animator.translate3d(dialogEl,from,to,translateOptions).then(function(animateReversal){options.reverseAnimate=function(){delete options.reverseAnimate;if(options.closeTo){translateOptions={transitionInClass:'md-transition-out',transitionOutClass:'md-transition-in'};from=to;to=animator.toTransformCss(buildTranslateToOrigin(dialogEl,options.closeTo));return animator.translate3d(dialogEl,from,to,translateOptions);}
return animateReversal(to=animator.toTransformCss(buildTranslateToOrigin(dialogEl,options.origin)));};options.clearAnimate=function(){delete options.clearAnimate;dialogEl.removeClass([translateOptions.transitionOutClass,translateOptions.transitionInClass].join(' '));return animator.translate3d(dialogEl,to,animator.toTransformCss(''),{});};return true;});}
function dialogPopOut(container,options){return options.reverseAnimate().then(function(){if(options.contentElement){options.clearAnimate();}});}
function isNodeOneOf(elem,nodeTypeArray){if(nodeTypeArray.indexOf(elem.nodeName)!==-1){return true;}}}}})();(function(){"use strict";MdDividerDirective.$inject=["$mdTheming"];angular.module('material.components.divider',['material.core']).directive('mdDivider',MdDividerDirective);function MdDividerDirective($mdTheming){return{restrict:'E',link:$mdTheming};}})();(function(){"use strict";(function(){'use strict';MdFabActionsDirective.$inject=["$mdUtil"];angular.module('material.components.fabActions',['material.core']).directive('mdFabActions',MdFabActionsDirective);function MdFabActionsDirective($mdUtil){return{restrict:'E',require:['^?mdFabSpeedDial','^?mdFabToolbar'],compile:function(element,attributes){var children=element.children();var hasNgRepeat=$mdUtil.prefixer().hasAttribute(children,'ng-repeat');if(hasNgRepeat){children.addClass('md-fab-action-item');}else{children.wrap('<div class="md-fab-action-item">');}}};}})();})();(function(){"use strict";(function(){'use strict';MdFabController.$inject=["$scope","$element","$animate","$mdUtil","$mdConstant","$timeout"];angular.module('material.components.fabShared',['material.core']).controller('MdFabController',MdFabController);function MdFabController($scope,$element,$animate,$mdUtil,$mdConstant,$timeout){var vm=this;var initialAnimationAttempts=0;vm.open=function(){$scope.$evalAsync("vm.isOpen = true");};vm.close=function(){$scope.$evalAsync("vm.isOpen = false");$element.find('md-fab-trigger')[0].focus();};vm.toggle=function(){$scope.$evalAsync("vm.isOpen = !vm.isOpen");};vm.$onInit=function(){setupDefaults();setupListeners();setupWatchers();fireInitialAnimations();};if(angular.version.major===1&&angular.version.minor<=4){this.$onInit();}
function setupDefaults(){vm.direction=vm.direction||'down';vm.isOpen=vm.isOpen||false;resetActionIndex();$element.addClass('md-animations-waiting');}
function setupListeners(){var eventTypes=['click','focusin','focusout'];angular.forEach(eventTypes,function(eventType){$element.on(eventType,parseEvents);});$scope.$on('$destroy',function(){angular.forEach(eventTypes,function(eventType){$element.off(eventType,parseEvents);});disableKeyboard();});}
var closeTimeout;function parseEvents(event){if(event.type=='click'){handleItemClick(event);}
if(event.type=='focusout'&&!closeTimeout){closeTimeout=$timeout(function(){vm.close();},100,false);}
if(event.type=='focusin'&&closeTimeout){$timeout.cancel(closeTimeout);closeTimeout=null;}}
function resetActionIndex(){vm.currentActionIndex=-1;}
function setupWatchers(){$scope.$watch('vm.direction',function(newDir,oldDir){$animate.removeClass($element,'md-'+oldDir);$animate.addClass($element,'md-'+newDir);resetActionIndex();});var trigger,actions;$scope.$watch('vm.isOpen',function(isOpen){resetActionIndex();if(!trigger||!actions){trigger=getTriggerElement();actions=getActionsElement();}
if(isOpen){enableKeyboard();}else{disableKeyboard();}
var toAdd=isOpen?'md-is-open':'';var toRemove=isOpen?'':'md-is-open';trigger.attr('aria-haspopup',true);trigger.attr('aria-expanded',isOpen);actions.attr('aria-hidden',!isOpen);$animate.setClass($element,toAdd,toRemove);});}
function fireInitialAnimations(){if($element[0].scrollHeight>0){$animate.addClass($element,'_md-animations-ready').then(function(){$element.removeClass('md-animations-waiting');});}
else if(initialAnimationAttempts<10){$timeout(fireInitialAnimations,100);initialAnimationAttempts=initialAnimationAttempts+1;}}
function enableKeyboard(){$element.on('keydown',keyPressed);$mdUtil.nextTick(function(){angular.element(document).on('click touchend',checkForOutsideClick);});}
function disableKeyboard(){$element.off('keydown',keyPressed);angular.element(document).off('click touchend',checkForOutsideClick);}
function checkForOutsideClick(event){if(event.target){var closestTrigger=$mdUtil.getClosest(event.target,'md-fab-trigger');var closestActions=$mdUtil.getClosest(event.target,'md-fab-actions');if(!closestTrigger&&!closestActions){vm.close();}}}
function keyPressed(event){switch(event.which){case $mdConstant.KEY_CODE.ESCAPE:vm.close();event.preventDefault();return false;case $mdConstant.KEY_CODE.LEFT_ARROW:doKeyLeft(event);return false;case $mdConstant.KEY_CODE.UP_ARROW:doKeyUp(event);return false;case $mdConstant.KEY_CODE.RIGHT_ARROW:doKeyRight(event);return false;case $mdConstant.KEY_CODE.DOWN_ARROW:doKeyDown(event);return false;}}
function doActionPrev(event){focusAction(event,-1);}
function doActionNext(event){focusAction(event,1);}
function focusAction(event,direction){var actions=resetActionTabIndexes();vm.currentActionIndex=vm.currentActionIndex+direction;vm.currentActionIndex=Math.min(actions.length-1,vm.currentActionIndex);vm.currentActionIndex=Math.max(0,vm.currentActionIndex);var focusElement=angular.element(actions[vm.currentActionIndex]).children()[0];angular.element(focusElement).attr('tabindex',0);focusElement.focus();event.preventDefault();event.stopImmediatePropagation();}
function resetActionTabIndexes(){var actions=getActionsElement()[0].querySelectorAll('.md-fab-action-item');angular.forEach(actions,function(action){angular.element(angular.element(action).children()[0]).attr('tabindex',-1);});return actions;}
function doKeyLeft(event){if(vm.direction==='left'){doActionNext(event);}else{doActionPrev(event);}}
function doKeyUp(event){if(vm.direction==='down'){doActionPrev(event);}else{doActionNext(event);}}
function doKeyRight(event){if(vm.direction==='left'){doActionPrev(event);}else{doActionNext(event);}}
function doKeyDown(event){if(vm.direction==='up'){doActionPrev(event);}else{doActionNext(event);}}
function isTrigger(element){return $mdUtil.getClosest(element,'md-fab-trigger');}
function isAction(element){return $mdUtil.getClosest(element,'md-fab-actions');}
function handleItemClick(event){if(isTrigger(event.target)){vm.toggle();}
if(isAction(event.target)){vm.close();}}
function getTriggerElement(){return $element.find('md-fab-trigger');}
function getActionsElement(){return $element.find('md-fab-actions');}}})();})();(function(){"use strict";(function(){'use strict';MdFabSpeedDialFlingAnimation.$inject=["$timeout"];MdFabSpeedDialScaleAnimation.$inject=["$timeout"];var cssAnimationDuration=300;angular.module('material.components.fabSpeedDial',['material.core','material.components.fabShared','material.components.fabActions']).directive('mdFabSpeedDial',MdFabSpeedDialDirective).animation('.md-fling',MdFabSpeedDialFlingAnimation).animation('.md-scale',MdFabSpeedDialScaleAnimation).service('mdFabSpeedDialFlingAnimation',MdFabSpeedDialFlingAnimation).service('mdFabSpeedDialScaleAnimation',MdFabSpeedDialScaleAnimation);function MdFabSpeedDialDirective(){return{restrict:'E',scope:{direction:'@?mdDirection',isOpen:'=?mdOpen'},bindToController:true,controller:'MdFabController',controllerAs:'vm',link:FabSpeedDialLink};function FabSpeedDialLink(scope,element){element.prepend('<div class="_md-css-variables"></div>');}}
function MdFabSpeedDialFlingAnimation($timeout){function delayDone(done){$timeout(done,cssAnimationDuration,false);}
function runAnimation(element){if(element.hasClass('md-animations-waiting')&&!element.hasClass('_md-animations-ready')){return;}
var el=element[0];var ctrl=element.controller('mdFabSpeedDial');var items=el.querySelectorAll('.md-fab-action-item');var triggerElement=el.querySelector('md-fab-trigger');var variablesElement=el.querySelector('._md-css-variables');var startZIndex=parseInt(window.getComputedStyle(variablesElement).zIndex);angular.forEach(items,function(item,index){var styles=item.style;styles.transform=styles.webkitTransform='';styles.transitionDelay='';styles.opacity=1;styles.zIndex=(items.length-index)+startZIndex;});triggerElement.style.zIndex=startZIndex+items.length+1;if(!ctrl.isOpen){angular.forEach(items,function(item,index){var newPosition,axis;var styles=item.style;var triggerItemHeightOffset=(triggerElement.clientHeight-item.clientHeight)/2;var triggerItemWidthOffset=(triggerElement.clientWidth-item.clientWidth)/2;switch(ctrl.direction){case'up':newPosition=(item.scrollHeight*(index+1)+triggerItemHeightOffset);axis='Y';break;case'down':newPosition=-(item.scrollHeight*(index+1)+triggerItemHeightOffset);axis='Y';break;case'left':newPosition=(item.scrollWidth*(index+1)+triggerItemWidthOffset);axis='X';break;case'right':newPosition=-(item.scrollWidth*(index+1)+triggerItemWidthOffset);axis='X';break;}
var newTranslate='translate'+axis+'('+newPosition+'px)';styles.transform=styles.webkitTransform=newTranslate;});}}
return{addClass:function(element,className,done){if(element.hasClass('md-fling')){runAnimation(element);delayDone(done);}else{done();}},removeClass:function(element,className,done){runAnimation(element);delayDone(done);}};}
function MdFabSpeedDialScaleAnimation($timeout){function delayDone(done){$timeout(done,cssAnimationDuration,false);}
var delay=65;function runAnimation(element){var el=element[0];var ctrl=element.controller('mdFabSpeedDial');var items=el.querySelectorAll('.md-fab-action-item');var variablesElement=el.querySelector('._md-css-variables');var startZIndex=parseInt(window.getComputedStyle(variablesElement).zIndex);angular.forEach(items,function(item,index){var styles=item.style,offsetDelay=index*delay;styles.opacity=ctrl.isOpen?1:0;styles.transform=styles.webkitTransform=ctrl.isOpen?'scale(1)':'scale(0)';styles.transitionDelay=(ctrl.isOpen?offsetDelay:(items.length-offsetDelay))+'ms';styles.zIndex=(items.length-index)+startZIndex;});}
return{addClass:function(element,className,done){runAnimation(element);delayDone(done);},removeClass:function(element,className,done){runAnimation(element);delayDone(done);}};}})();})();(function(){"use strict";(function(){'use strict';angular.module('material.components.fabToolbar',['material.core','material.components.fabShared','material.components.fabActions']).directive('mdFabToolbar',MdFabToolbarDirective).animation('.md-fab-toolbar',MdFabToolbarAnimation).service('mdFabToolbarAnimation',MdFabToolbarAnimation);function MdFabToolbarDirective(){return{restrict:'E',transclude:true,template:'<div class="md-fab-toolbar-wrapper">'+'  <div class="md-fab-toolbar-content" ng-transclude></div>'+'</div>',scope:{direction:'@?mdDirection',isOpen:'=?mdOpen'},bindToController:true,controller:'MdFabController',controllerAs:'vm',link:link};function link(scope,element,attributes){element.addClass('md-fab-toolbar');element.find('md-fab-trigger').find('button').prepend('<div class="md-fab-toolbar-background"></div>');}}
function MdFabToolbarAnimation(){function runAnimation(element,className,done){if(!className){return;}
var el=element[0];var ctrl=element.controller('mdFabToolbar');var backgroundElement=el.querySelector('.md-fab-toolbar-background');var triggerElement=el.querySelector('md-fab-trigger button');var toolbarElement=el.querySelector('md-toolbar');var iconElement=el.querySelector('md-fab-trigger button md-icon');var actions=element.find('md-fab-actions').children();if(triggerElement&&backgroundElement){var color=window.getComputedStyle(triggerElement).getPropertyValue('background-color');var width=el.offsetWidth;var height=el.offsetHeight;var scale=2*(width/triggerElement.offsetWidth);backgroundElement.style.backgroundColor=color;backgroundElement.style.borderRadius=width+'px';if(ctrl.isOpen){toolbarElement.style.pointerEvents='inherit';backgroundElement.style.width=triggerElement.offsetWidth+'px';backgroundElement.style.height=triggerElement.offsetHeight+'px';backgroundElement.style.transform='scale('+scale+')';backgroundElement.style.transitionDelay='0ms';iconElement&&(iconElement.style.transitionDelay='.3s');angular.forEach(actions,function(action,index){action.style.transitionDelay=(actions.length-index)*25+'ms';});}else{toolbarElement.style.pointerEvents='none';backgroundElement.style.transform='scale(1)';backgroundElement.style.top='0';if(element.hasClass('md-right')){backgroundElement.style.left='0';backgroundElement.style.right=null;}
if(element.hasClass('md-left')){backgroundElement.style.right='0';backgroundElement.style.left=null;}
backgroundElement.style.transitionDelay='200ms';iconElement&&(iconElement.style.transitionDelay='0ms');angular.forEach(actions,function(action,index){action.style.transitionDelay=200+(index*25)+'ms';});}}}
return{addClass:function(element,className,done){runAnimation(element,className,done);done();},removeClass:function(element,className,done){runAnimation(element,className,done);done();}};}})();})();(function(){"use strict";angular.module('material.components.icon',['material.core']);})();(function(){"use strict";GridListController.$inject=["$mdUtil"];GridLayoutFactory.$inject=["$mdUtil"];GridListDirective.$inject=["$interpolate","$mdConstant","$mdGridLayout","$mdMedia"];GridTileDirective.$inject=["$mdMedia"];angular.module('material.components.gridList',['material.core']).directive('mdGridList',GridListDirective).directive('mdGridTile',GridTileDirective).directive('mdGridTileFooter',GridTileCaptionDirective).directive('mdGridTileHeader',GridTileCaptionDirective).factory('$mdGridLayout',GridLayoutFactory);function GridListDirective($interpolate,$mdConstant,$mdGridLayout,$mdMedia){return{restrict:'E',controller:GridListController,scope:{mdOnLayout:'&'},link:postLink};function postLink(scope,element,attrs,ctrl){element.addClass('_md');element.attr('role','list');ctrl.layoutDelegate=layoutDelegate;var invalidateLayout=angular.bind(ctrl,ctrl.invalidateLayout),unwatchAttrs=watchMedia();scope.$on('$destroy',unwatchMedia);function watchMedia(){for(var mediaName in $mdConstant.MEDIA){$mdMedia(mediaName);$mdMedia.getQuery($mdConstant.MEDIA[mediaName]).addListener(invalidateLayout);}
return $mdMedia.watchResponsiveAttributes(['md-cols','md-row-height','md-gutter'],attrs,layoutIfMediaMatch);}
function unwatchMedia(){ctrl.layoutDelegate=angular.noop;unwatchAttrs();for(var mediaName in $mdConstant.MEDIA){$mdMedia.getQuery($mdConstant.MEDIA[mediaName]).removeListener(invalidateLayout);}}
function layoutIfMediaMatch(mediaName){if(mediaName==null){ctrl.invalidateLayout();}else if($mdMedia(mediaName)){ctrl.invalidateLayout();}}
var lastLayoutProps;function layoutDelegate(tilesInvalidated){var tiles=getTileElements();var props={tileSpans:getTileSpans(tiles),colCount:getColumnCount(),rowMode:getRowMode(),rowHeight:getRowHeight(),gutter:getGutter()};if(!tilesInvalidated&&angular.equals(props,lastLayoutProps)){return;}
var performance=$mdGridLayout(props.colCount,props.tileSpans,tiles).map(function(tilePositions,rowCount){return{grid:{element:element,style:getGridStyle(props.colCount,rowCount,props.gutter,props.rowMode,props.rowHeight)},tiles:tilePositions.map(function(ps,i){return{element:angular.element(tiles[i]),style:getTileStyle(ps.position,ps.spans,props.colCount,rowCount,props.gutter,props.rowMode,props.rowHeight)}})}}).reflow().performance();scope.mdOnLayout({$event:{performance:performance}});lastLayoutProps=props;}
var startSymbol=$interpolate.startSymbol();var endSymbol=$interpolate.endSymbol();function expr(exprStr){return startSymbol+exprStr+endSymbol;}
var UNIT=$interpolate(expr('share')+'% - ('+expr('gutter')+' * '+expr('gutterShare')+')');var POSITION=$interpolate('calc(('+expr('unit')+' + '+expr('gutter')+') * '+expr('offset')+')');var DIMENSION=$interpolate('calc(('+expr('unit')+') * '+expr('span')+' + ('+expr('span')+' - 1) * '+expr('gutter')+')');function getTileStyle(position,spans,colCount,rowCount,gutter,rowMode,rowHeight){var hShare=(1/colCount)*100;var hGutterShare=(colCount-1)/colCount;var hUnit=UNIT({share:hShare,gutterShare:hGutterShare,gutter:gutter});var ltr=document.dir!='rtl'&&document.body.dir!='rtl';var style=ltr?{left:POSITION({unit:hUnit,offset:position.col,gutter:gutter}),width:DIMENSION({unit:hUnit,span:spans.col,gutter:gutter}),paddingTop:'',marginTop:'',top:'',height:''}:{right:POSITION({unit:hUnit,offset:position.col,gutter:gutter}),width:DIMENSION({unit:hUnit,span:spans.col,gutter:gutter}),paddingTop:'',marginTop:'',top:'',height:''};switch(rowMode){case'fixed':style.top=POSITION({unit:rowHeight,offset:position.row,gutter:gutter});style.height=DIMENSION({unit:rowHeight,span:spans.row,gutter:gutter});break;case'ratio':var vShare=hShare/rowHeight;var vUnit=UNIT({share:vShare,gutterShare:hGutterShare,gutter:gutter});style.paddingTop=DIMENSION({unit:vUnit,span:spans.row,gutter:gutter});style.marginTop=POSITION({unit:vUnit,offset:position.row,gutter:gutter});break;case'fit':var vGutterShare=(rowCount-1)/rowCount;var vShare=(1/rowCount)*100;var vUnit=UNIT({share:vShare,gutterShare:vGutterShare,gutter:gutter});style.top=POSITION({unit:vUnit,offset:position.row,gutter:gutter});style.height=DIMENSION({unit:vUnit,span:spans.row,gutter:gutter});break;}
return style;}
function getGridStyle(colCount,rowCount,gutter,rowMode,rowHeight){var style={};switch(rowMode){case'fixed':style.height=DIMENSION({unit:rowHeight,span:rowCount,gutter:gutter});style.paddingBottom='';break;case'ratio':var hGutterShare=colCount===1?0:(colCount-1)/colCount,hShare=(1/colCount)*100,vShare=hShare*(1/rowHeight),vUnit=UNIT({share:vShare,gutterShare:hGutterShare,gutter:gutter});style.height='';style.paddingBottom=DIMENSION({unit:vUnit,span:rowCount,gutter:gutter});break;case'fit':break;}
return style;}
function getTileElements(){return[].filter.call(element.children(),function(ele){return ele.tagName=='MD-GRID-TILE'&&!ele.$$mdDestroyed;});}
function getTileSpans(tileElements){return[].map.call(tileElements,function(ele){var ctrl=angular.element(ele).controller('mdGridTile');return{row:parseInt($mdMedia.getResponsiveAttribute(ctrl.$attrs,'md-rowspan'),10)||1,col:parseInt($mdMedia.getResponsiveAttribute(ctrl.$attrs,'md-colspan'),10)||1};});}
function getColumnCount(){var colCount=parseInt($mdMedia.getResponsiveAttribute(attrs,'md-cols'),10);if(isNaN(colCount)){throw'md-grid-list: md-cols attribute was not found, or contained a non-numeric value';}
return colCount;}
function getGutter(){return applyDefaultUnit($mdMedia.getResponsiveAttribute(attrs,'md-gutter')||1);}
function getRowHeight(){var rowHeight=$mdMedia.getResponsiveAttribute(attrs,'md-row-height');if(!rowHeight){throw'md-grid-list: md-row-height attribute was not found';}
switch(getRowMode()){case'fixed':return applyDefaultUnit(rowHeight);case'ratio':var whRatio=rowHeight.split(':');return parseFloat(whRatio[0])/parseFloat(whRatio[1]);case'fit':return 0;}}
function getRowMode(){var rowHeight=$mdMedia.getResponsiveAttribute(attrs,'md-row-height');if(!rowHeight){throw'md-grid-list: md-row-height attribute was not found';}
if(rowHeight=='fit'){return'fit';}else if(rowHeight.indexOf(':')!==-1){return'ratio';}else{return'fixed';}}
function applyDefaultUnit(val){return/\D$/.test(val)?val:val+'px';}}}
function GridListController($mdUtil){this.layoutInvalidated=false;this.tilesInvalidated=false;this.$timeout_=$mdUtil.nextTick;this.layoutDelegate=angular.noop;}
GridListController.prototype={invalidateTiles:function(){this.tilesInvalidated=true;this.invalidateLayout();},invalidateLayout:function(){if(this.layoutInvalidated){return;}
this.layoutInvalidated=true;this.$timeout_(angular.bind(this,this.layout));},layout:function(){try{this.layoutDelegate(this.tilesInvalidated);}finally{this.layoutInvalidated=false;this.tilesInvalidated=false;}}};function GridLayoutFactory($mdUtil){var defaultAnimator=GridTileAnimator;GridLayout.animateWith=function(customAnimator){defaultAnimator=!angular.isFunction(customAnimator)?GridTileAnimator:customAnimator;};return GridLayout;function GridLayout(colCount,tileSpans){var self,layoutInfo,gridStyles,layoutTime,mapTime,reflowTime;layoutTime=$mdUtil.time(function(){layoutInfo=calculateGridFor(colCount,tileSpans);});return self={layoutInfo:function(){return layoutInfo;},map:function(updateFn){mapTime=$mdUtil.time(function(){var info=self.layoutInfo();gridStyles=updateFn(info.positioning,info.rowCount);});return self;},reflow:function(animatorFn){reflowTime=$mdUtil.time(function(){var animator=animatorFn||defaultAnimator;animator(gridStyles.grid,gridStyles.tiles);});return self;},performance:function(){return{tileCount:tileSpans.length,layoutTime:layoutTime,mapTime:mapTime,reflowTime:reflowTime,totalTime:layoutTime+mapTime+reflowTime};}};}
function GridTileAnimator(grid,tiles){grid.element.css(grid.style);tiles.forEach(function(t){t.element.css(t.style);})}
function calculateGridFor(colCount,tileSpans){var curCol=0,curRow=0,spaceTracker=newSpaceTracker();return{positioning:tileSpans.map(function(spans,i){return{spans:spans,position:reserveSpace(spans,i)};}),rowCount:curRow+Math.max.apply(Math,spaceTracker)};function reserveSpace(spans,i){if(spans.col>colCount){throw'md-grid-list: Tile at position '+i+' has a colspan '+'('+spans.col+') that exceeds the column count '+'('+colCount+')';}
var start=0,end=0;while(end-start<spans.col){if(curCol>=colCount){nextRow();continue;}
start=spaceTracker.indexOf(0,curCol);if(start===-1||(end=findEnd(start+1))===-1){start=end=0;nextRow();continue;}
curCol=end+1;}
adjustRow(start,spans.col,spans.row);curCol=start+spans.col;return{col:start,row:curRow};}
function nextRow(){curCol=0;curRow++;adjustRow(0,colCount,-1);}
function adjustRow(from,cols,by){for(var i=from;i<from+cols;i++){spaceTracker[i]=Math.max(spaceTracker[i]+by,0);}}
function findEnd(start){var i;for(i=start;i<spaceTracker.length;i++){if(spaceTracker[i]!==0){return i;}}
if(i===spaceTracker.length){return i;}}
function newSpaceTracker(){var tracker=[];for(var i=0;i<colCount;i++){tracker.push(0);}
return tracker;}}}
function GridTileDirective($mdMedia){return{restrict:'E',require:'^mdGridList',template:'<figure ng-transclude></figure>',transclude:true,scope:{},controller:["$attrs",function($attrs){this.$attrs=$attrs;}],link:postLink};function postLink(scope,element,attrs,gridCtrl){element.attr('role','listitem');var unwatchAttrs=$mdMedia.watchResponsiveAttributes(['md-colspan','md-rowspan'],attrs,angular.bind(gridCtrl,gridCtrl.invalidateLayout));gridCtrl.invalidateTiles();scope.$on('$destroy',function(){element[0].$$mdDestroyed=true;unwatchAttrs();gridCtrl.invalidateLayout();});if(angular.isDefined(scope.$parent.$index)){scope.$watch(function(){return scope.$parent.$index;},function indexChanged(newIdx,oldIdx){if(newIdx===oldIdx){return;}
gridCtrl.invalidateTiles();});}}}
function GridTileCaptionDirective(){return{template:'<figcaption ng-transclude></figcaption>',transclude:true};}})();(function(){"use strict";mdInputContainerDirective.$inject=["$mdTheming","$parse"];inputTextareaDirective.$inject=["$mdUtil","$window","$mdAria","$timeout","$mdGesture"];mdMaxlengthDirective.$inject=["$animate","$mdUtil"];placeholderDirective.$inject=["$compile"];ngMessageDirective.$inject=["$mdUtil"];mdSelectOnFocusDirective.$inject=["$timeout"];mdInputInvalidMessagesAnimation.$inject=["$$AnimateRunner","$animateCss","$mdUtil","$log"];ngMessagesAnimation.$inject=["$$AnimateRunner","$animateCss","$mdUtil","$log"];ngMessageAnimation.$inject=["$$AnimateRunner","$animateCss","$mdUtil","$log"];var inputModule=angular.module('material.components.input',['material.core']).directive('mdInputContainer',mdInputContainerDirective).directive('label',labelDirective).directive('input',inputTextareaDirective).directive('textarea',inputTextareaDirective).directive('mdMaxlength',mdMaxlengthDirective).directive('placeholder',placeholderDirective).directive('ngMessages',ngMessagesDirective).directive('ngMessage',ngMessageDirective).directive('ngMessageExp',ngMessageDirective).directive('mdSelectOnFocus',mdSelectOnFocusDirective).animation('.md-input-invalid',mdInputInvalidMessagesAnimation).animation('.md-input-messages-animation',ngMessagesAnimation).animation('.md-input-message-animation',ngMessageAnimation);if(window._mdMocksIncluded){inputModule.service('$$mdInput',function(){return{messages:{show:showInputMessages,hide:hideInputMessages,getElement:getMessagesElement}}}).service('mdInputInvalidAnimation',mdInputInvalidMessagesAnimation).service('mdInputMessagesAnimation',ngMessagesAnimation).service('mdInputMessageAnimation',ngMessageAnimation);}
function mdInputContainerDirective($mdTheming,$parse){ContainerCtrl.$inject=["$scope","$element","$attrs","$animate"];var INPUT_TAGS=['INPUT','TEXTAREA','SELECT','MD-SELECT'];var LEFT_SELECTORS=INPUT_TAGS.reduce(function(selectors,isel){return selectors.concat(['md-icon ~ '+isel,'.md-icon ~ '+isel]);},[]).join(",");var RIGHT_SELECTORS=INPUT_TAGS.reduce(function(selectors,isel){return selectors.concat([isel+' ~ md-icon',isel+' ~ .md-icon']);},[]).join(",");return{restrict:'E',compile:compile,controller:ContainerCtrl};function compile(tElement){var leftIcon=tElement[0].querySelector(LEFT_SELECTORS);var rightIcon=tElement[0].querySelector(RIGHT_SELECTORS);if(leftIcon){tElement.addClass('md-icon-left');}
if(rightIcon){tElement.addClass('md-icon-right');}
return function postLink(scope,element){$mdTheming(element);};}
function ContainerCtrl($scope,$element,$attrs,$animate){var self=this;self.isErrorGetter=$attrs.mdIsError&&$parse($attrs.mdIsError);self.delegateClick=function(){self.input.focus();};self.element=$element;self.setFocused=function(isFocused){$element.toggleClass('md-input-focused',!!isFocused);};self.setHasValue=function(hasValue){$element.toggleClass('md-input-has-value',!!hasValue);};self.setHasPlaceholder=function(hasPlaceholder){$element.toggleClass('md-input-has-placeholder',!!hasPlaceholder);};self.setInvalid=function(isInvalid){if(isInvalid){$animate.addClass($element,'md-input-invalid');}else{$animate.removeClass($element,'md-input-invalid');}};$scope.$watch(function(){return self.label&&self.input;},function(hasLabelAndInput){if(hasLabelAndInput&&!self.label.attr('for')){self.label.attr('for',self.input.attr('id'));}});}}
function labelDirective(){return{restrict:'E',require:'^?mdInputContainer',link:function(scope,element,attr,containerCtrl){if(!containerCtrl||attr.mdNoFloat||element.hasClass('md-container-ignore'))return;containerCtrl.label=element;scope.$on('$destroy',function(){containerCtrl.label=null;});}};}
function inputTextareaDirective($mdUtil,$window,$mdAria,$timeout,$mdGesture){return{restrict:'E',require:['^?mdInputContainer','?ngModel','?^form'],link:postLink};function postLink(scope,element,attr,ctrls){var containerCtrl=ctrls[0];var hasNgModel=!!ctrls[1];var ngModelCtrl=ctrls[1]||$mdUtil.fakeNgModel();var parentForm=ctrls[2];var isReadonly=angular.isDefined(attr.readonly);var mdNoAsterisk=$mdUtil.parseAttributeBoolean(attr.mdNoAsterisk);var tagName=element[0].tagName.toLowerCase();if(!containerCtrl)return;if(attr.type==='hidden'){element.attr('aria-hidden','true');return;}else if(containerCtrl.input){if(containerCtrl.input[0].contains(element[0])){return;}else{throw new Error("<md-input-container> can only have *one* <input>, <textarea> or <md-select> child element!");}}
containerCtrl.input=element;setupAttributeWatchers();var errorsSpacer=angular.element('<div class="md-errors-spacer">');element.after(errorsSpacer);var placeholderText=angular.isString(attr.placeholder)?attr.placeholder.trim():'';if(!containerCtrl.label&&!placeholderText.length){$mdAria.expect(element,'aria-label');}
element.addClass('md-input');if(!element.attr('id')){element.attr('id','input_'+$mdUtil.nextUid());}
if(tagName==='input'&&attr.type==='number'&&attr.min&&attr.max&&!attr.step){element.attr('step','any');}else if(tagName==='textarea'){setupTextarea();}
if(!hasNgModel){inputCheckValue();}
var isErrorGetter=containerCtrl.isErrorGetter||function(){return ngModelCtrl.$invalid&&(ngModelCtrl.$touched||(parentForm&&parentForm.$submitted));};scope.$watch(isErrorGetter,containerCtrl.setInvalid);if(attr.ngValue){attr.$observe('value',inputCheckValue);}
ngModelCtrl.$parsers.push(ngModelPipelineCheckValue);ngModelCtrl.$formatters.push(ngModelPipelineCheckValue);element.on('input',inputCheckValue);if(!isReadonly){element.on('focus',function(ev){$mdUtil.nextTick(function(){containerCtrl.setFocused(true);});}).on('blur',function(ev){$mdUtil.nextTick(function(){containerCtrl.setFocused(false);inputCheckValue();});});}
scope.$on('$destroy',function(){containerCtrl.setFocused(false);containerCtrl.setHasValue(false);containerCtrl.input=null;});function ngModelPipelineCheckValue(arg){containerCtrl.setHasValue(!ngModelCtrl.$isEmpty(arg));return arg;}
function setupAttributeWatchers(){if(containerCtrl.label){attr.$observe('required',function(value){containerCtrl.label.toggleClass('md-required',value&&!mdNoAsterisk);});}}
function inputCheckValue(){containerCtrl.setHasValue(element.val().length>0||(element[0].validity||{}).badInput);}
function setupTextarea(){var isAutogrowing=!attr.hasOwnProperty('mdNoAutogrow');attachResizeHandle();if(!isAutogrowing)return;var minRows=attr.hasOwnProperty('rows')?parseInt(attr.rows):NaN;var maxRows=attr.hasOwnProperty('maxRows')?parseInt(attr.maxRows):NaN;var scopeResizeListener=scope.$on('md-resize-textarea',growTextarea);var lineHeight=null;var node=element[0];$timeout(function(){$mdUtil.nextTick(growTextarea);},10,false);element.on('input',growTextarea);if(hasNgModel){ngModelCtrl.$formatters.push(formattersListener);}
if(!minRows){element.attr('rows',1);}
angular.element($window).on('resize',growTextarea);scope.$on('$destroy',disableAutogrow);function growTextarea(){element.attr('rows',1).css('height','auto').addClass('md-no-flex');var height=getHeight();if(!lineHeight){var originalPadding=element[0].style.padding||'';lineHeight=element.css('padding',0).prop('offsetHeight');element[0].style.padding=originalPadding;}
if(minRows&&lineHeight){height=Math.max(height,lineHeight*minRows);}
if(maxRows&&lineHeight){var maxHeight=lineHeight*maxRows;if(maxHeight<height){element.attr('md-no-autogrow','');height=maxHeight;}else{element.removeAttr('md-no-autogrow');}}
if(lineHeight){element.attr('rows',Math.round(height/lineHeight));}
element.css('height',height+'px').removeClass('md-no-flex');}
function getHeight(){var offsetHeight=node.offsetHeight;var line=node.scrollHeight-offsetHeight;return offsetHeight+Math.max(line,0);}
function formattersListener(value){$mdUtil.nextTick(growTextarea);return value;}
function disableAutogrow(){if(!isAutogrowing)return;isAutogrowing=false;angular.element($window).off('resize',growTextarea);scopeResizeListener&&scopeResizeListener();element.attr('md-no-autogrow','').off('input',growTextarea);if(hasNgModel){var listenerIndex=ngModelCtrl.$formatters.indexOf(formattersListener);if(listenerIndex>-1){ngModelCtrl.$formatters.splice(listenerIndex,1);}}}
function attachResizeHandle(){if(attr.hasOwnProperty('mdNoResize'))return;var handle=angular.element('<div class="md-resize-handle"></div>');var isDragging=false;var dragStart=null;var startHeight=0;var container=containerCtrl.element;var dragGestureHandler=$mdGesture.register(handle,'drag',{horizontal:false});element.wrap('<div class="md-resize-wrapper">').after(handle);handle.on('mousedown',onMouseDown);container.on('$md.dragstart',onDragStart).on('$md.drag',onDrag).on('$md.dragend',onDragEnd);scope.$on('$destroy',function(){handle.off('mousedown',onMouseDown).remove();container.off('$md.dragstart',onDragStart).off('$md.drag',onDrag).off('$md.dragend',onDragEnd);dragGestureHandler();handle=null;container=null;dragGestureHandler=null;});function onMouseDown(ev){ev.preventDefault();isDragging=true;dragStart=ev.clientY;startHeight=parseFloat(element.css('height'))||element.prop('offsetHeight');}
function onDragStart(ev){if(!isDragging)return;ev.preventDefault();disableAutogrow();container.addClass('md-input-resized');}
function onDrag(ev){if(!isDragging)return;element.css('height',(startHeight+ev.pointer.distanceY)+'px');}
function onDragEnd(ev){if(!isDragging)return;isDragging=false;container.removeClass('md-input-resized');}}
if(attr.hasOwnProperty('mdDetectHidden')){var handleHiddenChange=function(){var wasHidden=false;return function(){var isHidden=node.offsetHeight===0;if(isHidden===false&&wasHidden===true){growTextarea();}
wasHidden=isHidden;};}();scope.$watch(function(){$mdUtil.nextTick(handleHiddenChange,false);return true;});}}}}
function mdMaxlengthDirective($animate,$mdUtil){return{restrict:'A',require:['ngModel','^mdInputContainer'],link:postLink};function postLink(scope,element,attr,ctrls){var maxlength;var ngModelCtrl=ctrls[0];var containerCtrl=ctrls[1];var charCountEl,errorsSpacer;$mdUtil.nextTick(function(){errorsSpacer=angular.element(containerCtrl.element[0].querySelector('.md-errors-spacer'));charCountEl=angular.element('<div class="md-char-counter">');errorsSpacer.append(charCountEl);attr.$set('ngTrim','false');scope.$watch(attr.mdMaxlength,function(value){maxlength=value;if(angular.isNumber(value)&&value>0){if(!charCountEl.parent().length){$animate.enter(charCountEl,errorsSpacer);}
renderCharCount();}else{$animate.leave(charCountEl);}});ngModelCtrl.$validators['md-maxlength']=function(modelValue,viewValue){if(!angular.isNumber(maxlength)||maxlength<0){return true;}
renderCharCount();return(modelValue||element.val()||viewValue||'').length<=maxlength;};});function renderCharCount(value){if(!charCountEl.parent){return value;}
charCountEl.text(String(element.val()||value||'').length+' / '+maxlength);return value;}}}
function placeholderDirective($compile){return{restrict:'A',require:'^^?mdInputContainer',priority:200,link:{pre:preLink}};function preLink(scope,element,attr,inputContainer){if(!inputContainer)return;var label=inputContainer.element.find('label');var noFloat=inputContainer.element.attr('md-no-float');if((label&&label.length)||noFloat===''||scope.$eval(noFloat)){inputContainer.setHasPlaceholder(true);return;}
if(element[0].nodeName!='MD-SELECT'){var newLabel=angular.element('<label ng-click="delegateClick()" tabindex="-1">'+attr.placeholder+'</label>');attr.$set('placeholder',null);inputContainer.element.addClass('md-icon-float').prepend(newLabel);$compile(newLabel)(scope);}}}
function mdSelectOnFocusDirective($timeout){return{restrict:'A',link:postLink};function postLink(scope,element,attr){if(element[0].nodeName!=='INPUT'&&element[0].nodeName!=="TEXTAREA")return;var preventMouseUp=false;element.on('focus',onFocus).on('mouseup',onMouseUp);scope.$on('$destroy',function(){element.off('focus',onFocus).off('mouseup',onMouseUp);});function onFocus(){preventMouseUp=true;$timeout(function(){element[0].select();preventMouseUp=false;},1,false);}
function onMouseUp(event){if(preventMouseUp){event.preventDefault();}}}}
var visibilityDirectives=['ngIf','ngShow','ngHide','ngSwitchWhen','ngSwitchDefault'];function ngMessagesDirective(){return{restrict:'EA',link:postLink,require:'^^?mdInputContainer'};function postLink(scope,element,attrs,inputContainer){if(!inputContainer)return;element.toggleClass('md-input-messages-animation',true);element.toggleClass('md-auto-hide',true);if(attrs.mdAutoHide=='false'||hasVisibiltyDirective(attrs)){element.toggleClass('md-auto-hide',false);}}
function hasVisibiltyDirective(attrs){return visibilityDirectives.some(function(attr){return attrs[attr];});}}
function ngMessageDirective($mdUtil){return{restrict:'EA',compile:compile,priority:100};function compile(tElement){if(!isInsideInputContainer(tElement)){if(isInsideFragment()){return function(scope,element){if(isInsideInputContainer(element)){initMessageElement(tElement);}};}}else{initMessageElement(tElement);}
function isInsideFragment(){var nextNode=tElement[0];while(nextNode=nextNode.parentNode){if(nextNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){return true;}}
return false;}
function isInsideInputContainer(element){return!!$mdUtil.getClosest(element,"md-input-container");}
function initMessageElement(element){element.toggleClass('md-input-message-animation',true);}}}
var $$AnimateRunner,$animateCss,$mdUtil,$log;function mdInputInvalidMessagesAnimation($$AnimateRunner,$animateCss,$mdUtil,$log){saveSharedServices($$AnimateRunner,$animateCss,$mdUtil,$log);return{addClass:function(element,className,done){showInputMessages(element,done);}};}
function ngMessagesAnimation($$AnimateRunner,$animateCss,$mdUtil,$log){saveSharedServices($$AnimateRunner,$animateCss,$mdUtil,$log);return{enter:function(element,done){showInputMessages(element,done);},leave:function(element,done){hideInputMessages(element,done);},addClass:function(element,className,done){if(className=="ng-hide"){hideInputMessages(element,done);}else{done();}},removeClass:function(element,className,done){if(className=="ng-hide"){showInputMessages(element,done);}else{done();}}};}
function ngMessageAnimation($$AnimateRunner,$animateCss,$mdUtil,$log){saveSharedServices($$AnimateRunner,$animateCss,$mdUtil,$log);return{enter:function(element,done){var animator=showMessage(element);animator.start().done(done);},leave:function(element,done){var animator=hideMessage(element);animator.start().done(done);}};}
function showInputMessages(element,done){var animators=[],animator;var messages=getMessagesElement(element);var children=messages.children();if(messages.length==0||children.length==0){$log.warn('mdInput messages show animation called on invalid messages element: ',element);done();return;}
angular.forEach(children,function(child){animator=showMessage(angular.element(child));animators.push(animator.start());});$$AnimateRunner.all(animators,done);}
function hideInputMessages(element,done){var animators=[],animator;var messages=getMessagesElement(element);var children=messages.children();if(messages.length==0||children.length==0){$log.warn('mdInput messages hide animation called on invalid messages element: ',element);done();return;}
angular.forEach(children,function(child){animator=hideMessage(angular.element(child));animators.push(animator.start());});$$AnimateRunner.all(animators,done);}
function showMessage(element){var height=parseInt(window.getComputedStyle(element[0]).height);var topMargin=parseInt(window.getComputedStyle(element[0]).marginTop);var messages=getMessagesElement(element);var container=getInputElement(element);var alreadyVisible=(topMargin>-height);if(alreadyVisible||(messages.hasClass('md-auto-hide')&&!container.hasClass('md-input-invalid'))){return $animateCss(element,{});}
return $animateCss(element,{event:'enter',structural:true,from:{"opacity":0,"margin-top":-height+"px"},to:{"opacity":1,"margin-top":"0"},duration:0.3});}
function hideMessage(element){var height=element[0].offsetHeight;var styles=window.getComputedStyle(element[0]);if(parseInt(styles.opacity)===0){return $animateCss(element,{});}
return $animateCss(element,{event:'leave',structural:true,from:{"opacity":1,"margin-top":0},to:{"opacity":0,"margin-top":-height+"px"},duration:0.3});}
function getInputElement(element){var inputContainer=element.controller('mdInputContainer');return inputContainer.element;}
function getMessagesElement(element){if(element.hasClass('md-input-messages-animation')){return element;}
if(element.hasClass('md-input-message-animation')){return angular.element($mdUtil.getClosest(element,function(node){return node.classList.contains('md-input-messages-animation');}));}
return angular.element(element[0].querySelector('.md-input-messages-animation'));}
function saveSharedServices(_$$AnimateRunner_,_$animateCss_,_$mdUtil_,_$log_){$$AnimateRunner=_$$AnimateRunner_;$animateCss=_$animateCss_;$mdUtil=_$mdUtil_;$log=_$log_;}})();(function(){"use strict";MdListController.$inject=["$scope","$element","$mdListInkRipple"];mdListDirective.$inject=["$mdTheming"];mdListItemDirective.$inject=["$mdAria","$mdConstant","$mdUtil","$timeout"];angular.module('material.components.list',['material.core']).controller('MdListController',MdListController).directive('mdList',mdListDirective).directive('mdListItem',mdListItemDirective);function mdListDirective($mdTheming){return{restrict:'E',compile:function(tEl){tEl[0].setAttribute('role','list');return $mdTheming;}};}
function mdListItemDirective($mdAria,$mdConstant,$mdUtil,$timeout){var proxiedTypes=['md-checkbox','md-switch','md-menu'];return{restrict:'E',controller:'MdListController',compile:function(tEl,tAttrs){var secondaryItems=tEl[0].querySelectorAll('.md-secondary');var hasProxiedElement;var proxyElement;var itemContainer=tEl;tEl[0].setAttribute('role','listitem');if(tAttrs.ngClick||tAttrs.ngDblclick||tAttrs.ngHref||tAttrs.href||tAttrs.uiSref||tAttrs.ngAttrUiSref){wrapIn('button');}else if(!tEl.hasClass('md-no-proxy')){for(var i=0,type;type=proxiedTypes[i];++i){if(proxyElement=tEl[0].querySelector(type)){hasProxiedElement=true;break;}}
if(hasProxiedElement){wrapIn('div');}else{tEl.addClass('md-no-proxy');}}
wrapSecondaryItems();setupToggleAria();if(hasProxiedElement&&proxyElement.nodeName==="MD-MENU"){setupProxiedMenu();}
function setupToggleAria(){var toggleTypes=['md-switch','md-checkbox'];var toggle;for(var i=0,toggleType;toggleType=toggleTypes[i];++i){if(toggle=tEl.find(toggleType)[0]){if(!toggle.hasAttribute('aria-label')){var p=tEl.find('p')[0];if(!p)return;toggle.setAttribute('aria-label','Toggle '+p.textContent);}}}}
function setupProxiedMenu(){var menuEl=angular.element(proxyElement);var isEndAligned=menuEl.parent().hasClass('md-secondary-container')||proxyElement.parentNode.firstElementChild!==proxyElement;var xAxisPosition='left';if(isEndAligned){xAxisPosition='right';}
if(!menuEl.attr('md-position-mode')){menuEl.attr('md-position-mode',xAxisPosition+' target');}
var menuOpenButton=menuEl.children().eq(0);if(!hasClickEvent(menuOpenButton[0])){menuOpenButton.attr('ng-click','$mdMenu.open($event)');}
if(!menuOpenButton.attr('aria-label')){menuOpenButton.attr('aria-label','Open List Menu');}}
function wrapIn(type){if(type=='div'){itemContainer=angular.element('<div class="md-no-style md-list-item-inner">');itemContainer.append(tEl.contents());tEl.addClass('md-proxy-focus');}else{itemContainer=angular.element('<div class="md-button md-no-style">'+'   <div class="md-list-item-inner"></div>'+'</div>');var buttonWrap=angular.element('<md-button class="md-no-style"></md-button>');copyAttributes(tEl[0],buttonWrap[0]);if(!buttonWrap.attr('aria-label')){buttonWrap.attr('aria-label',$mdAria.getText(tEl));}
if(tEl.hasClass('md-no-focus')){buttonWrap.addClass('md-no-focus');}
itemContainer.prepend(buttonWrap);itemContainer.children().eq(1).append(tEl.contents());tEl.addClass('_md-button-wrap');}
tEl[0].setAttribute('tabindex','-1');tEl.append(itemContainer);}
function wrapSecondaryItems(){var secondaryItemsWrapper=angular.element('<div class="md-secondary-container">');angular.forEach(secondaryItems,function(secondaryItem){wrapSecondaryItem(secondaryItem,secondaryItemsWrapper);});itemContainer.append(secondaryItemsWrapper);}
function wrapSecondaryItem(secondaryItem,container){if(secondaryItem&&!isButton(secondaryItem)&&secondaryItem.hasAttribute('ng-click')){$mdAria.expect(secondaryItem,'aria-label');var buttonWrapper=angular.element('<md-button class="md-secondary md-icon-button">');copyAttributes(secondaryItem,buttonWrapper[0],['ng-if','ng-hide','ng-show']);secondaryItem.setAttribute('tabindex','-1');buttonWrapper.append(secondaryItem);secondaryItem=buttonWrapper[0];}
if(secondaryItem&&(!hasClickEvent(secondaryItem)||(!tAttrs.ngClick&&isProxiedElement(secondaryItem)))){angular.element(secondaryItem).removeClass('md-secondary');}
tEl.addClass('md-with-secondary');container.append(secondaryItem);}
function copyAttributes(source,destination,extraAttrs){var copiedAttrs=$mdUtil.prefixer(['ng-if','ng-click','ng-dblclick','aria-label','ng-disabled','ui-sref','href','ng-href','rel','target','ng-attr-ui-sref','ui-sref-opts']);if(extraAttrs){copiedAttrs=copiedAttrs.concat($mdUtil.prefixer(extraAttrs));}
angular.forEach(copiedAttrs,function(attr){if(source.hasAttribute(attr)){destination.setAttribute(attr,source.getAttribute(attr));source.removeAttribute(attr);}});}
function isProxiedElement(el){return proxiedTypes.indexOf(el.nodeName.toLowerCase())!=-1;}
function isButton(el){var nodeName=el.nodeName.toUpperCase();return nodeName=="MD-BUTTON"||nodeName=="BUTTON";}
function hasClickEvent(element){var attr=element.attributes;for(var i=0;i<attr.length;i++){if(tAttrs.$normalize(attr[i].name)==='ngClick')return true;}
return false;}
return postLink;function postLink($scope,$element,$attr,ctrl){$element.addClass('_md');var proxies=[],firstElement=$element[0].firstElementChild,isButtonWrap=$element.hasClass('_md-button-wrap'),clickChild=isButtonWrap?firstElement.firstElementChild:firstElement,hasClick=clickChild&&hasClickEvent(clickChild),noProxies=$element.hasClass('md-no-proxy');computeProxies();computeClickable();if(proxies.length){angular.forEach(proxies,function(proxy){proxy=angular.element(proxy);$scope.mouseActive=false;proxy.on('mousedown',function(){$scope.mouseActive=true;$timeout(function(){$scope.mouseActive=false;},100);}).on('focus',function(){if($scope.mouseActive===false){$element.addClass('md-focused');}
proxy.on('blur',function proxyOnBlur(){$element.removeClass('md-focused');proxy.off('blur',proxyOnBlur);});});});}
function computeProxies(){if(firstElement&&firstElement.children&&!hasClick&&!noProxies){angular.forEach(proxiedTypes,function(type){angular.forEach(firstElement.querySelectorAll(type+':not(.md-secondary)'),function(child){proxies.push(child);});});}}
function computeClickable(){if(proxies.length==1||hasClick){$element.addClass('md-clickable');if(!hasClick){ctrl.attachRipple($scope,angular.element($element[0].querySelector('.md-no-style')));}}}
function isEventFromControl(event){var forbiddenControls=['md-slider'];if(!event.path){return forbiddenControls.indexOf(event.target.tagName.toLowerCase())!==-1;}
var maxPath=event.path.indexOf($element.children()[0]);for(var i=0;i<maxPath;i++){if(forbiddenControls.indexOf(event.path[i].tagName.toLowerCase())!==-1){return true;}}}
var clickChildKeypressListener=function(e){if(e.target.nodeName!='INPUT'&&e.target.nodeName!='TEXTAREA'&&!e.target.isContentEditable){var keyCode=e.which||e.keyCode;if(keyCode==$mdConstant.KEY_CODE.SPACE){if(clickChild){clickChild.click();e.preventDefault();e.stopPropagation();}}}};if(!hasClick&&!proxies.length){clickChild&&clickChild.addEventListener('keypress',clickChildKeypressListener);}
$element.off('click');$element.off('keypress');if(proxies.length==1&&clickChild){$element.children().eq(0).on('click',function(e){if(isEventFromControl(e))return;var parentButton=$mdUtil.getClosest(e.target,'BUTTON');if(!parentButton&&clickChild.contains(e.target)){angular.forEach(proxies,function(proxy){if(e.target!==proxy&&!proxy.contains(e.target)){if(proxy.nodeName==='MD-MENU'){proxy=proxy.children[0];}
angular.element(proxy).triggerHandler('click');}});}});}
$scope.$on('$destroy',function(){clickChild&&clickChild.removeEventListener('keypress',clickChildKeypressListener);});}}};}
function MdListController($scope,$element,$mdListInkRipple){var ctrl=this;ctrl.attachRipple=attachRipple;function attachRipple(scope,element){var options={};$mdListInkRipple.attach(scope,element,options);}}})();(function(){"use strict";angular.module('material.components.menu',['material.core','material.components.backdrop']);})();(function(){"use strict";angular.module('material.components.menuBar',['material.core','material.components.icon','material.components.menu']);})();(function(){"use strict";MdNavBarController.$inject=["$element","$scope","$timeout","$mdConstant"];MdNavItem.$inject=["$mdAria","$$rAF"];MdNavItemController.$inject=["$element"];MdNavBar.$inject=["$mdAria","$mdTheming"];angular.module('material.components.navBar',['material.core']).controller('MdNavBarController',MdNavBarController).directive('mdNavBar',MdNavBar).controller('MdNavItemController',MdNavItemController).directive('mdNavItem',MdNavItem);function MdNavBar($mdAria,$mdTheming){return{restrict:'E',transclude:true,controller:MdNavBarController,controllerAs:'ctrl',bindToController:true,scope:{'mdSelectedNavItem':'=?','mdNoInkBar':'=?','navBarAriaLabel':'@?',},template:'<div class="md-nav-bar">'+'<nav role="navigation">'+'<ul class="_md-nav-bar-list" ng-transclude role="listbox"'+'tabindex="0"'+'ng-focus="ctrl.onFocus()"'+'ng-keydown="ctrl.onKeydown($event)"'+'aria-label="{{ctrl.navBarAriaLabel}}">'+'</ul>'+'</nav>'+'<md-nav-ink-bar ng-hide="ctrl.mdNoInkBar"></md-nav-ink-bar>'+'</div>',link:function(scope,element,attrs,ctrl){$mdTheming(element);if(!ctrl.navBarAriaLabel){$mdAria.expectAsync(element,'aria-label',angular.noop);}},};}
function MdNavBarController($element,$scope,$timeout,$mdConstant){this._$timeout=$timeout;this._$scope=$scope;this._$mdConstant=$mdConstant;this.mdSelectedNavItem;this.navBarAriaLabel;this._navBarEl=$element[0];this._inkbar;var self=this;var deregisterTabWatch=this._$scope.$watch(function(){return self._navBarEl.querySelectorAll('._md-nav-button').length;},function(newLength){if(newLength>0){self._initTabs();deregisterTabWatch();}});}
MdNavBarController.prototype._initTabs=function(){this._inkbar=angular.element(this._navBarEl.querySelector('md-nav-ink-bar'));var self=this;this._$timeout(function(){self._updateTabs(self.mdSelectedNavItem,undefined);});this._$scope.$watch('ctrl.mdSelectedNavItem',function(newValue,oldValue){self._$timeout(function(){self._updateTabs(newValue,oldValue);});});};MdNavBarController.prototype._updateTabs=function(newValue,oldValue){var self=this;var tabs=this._getTabs();if(!tabs)
return;var oldIndex=-1;var newIndex=-1;var newTab=this._getTabByName(newValue);var oldTab=this._getTabByName(oldValue);if(oldTab){oldTab.setSelected(false);oldIndex=tabs.indexOf(oldTab);}
if(newTab){newTab.setSelected(true);newIndex=tabs.indexOf(newTab);}
this._$timeout(function(){self._updateInkBarStyles(newTab,newIndex,oldIndex);});};MdNavBarController.prototype._updateInkBarStyles=function(tab,newIndex,oldIndex){this._inkbar.toggleClass('_md-left',newIndex<oldIndex).toggleClass('_md-right',newIndex>oldIndex);this._inkbar.css({display:newIndex<0?'none':''});if(tab){var tabEl=tab.getButtonEl();var left=tabEl.offsetLeft;this._inkbar.css({left:left+'px',width:tabEl.offsetWidth+'px'});}};MdNavBarController.prototype._getTabs=function(){var controllers=Array.prototype.slice.call(this._navBarEl.querySelectorAll('.md-nav-item')).map(function(el){return angular.element(el).controller('mdNavItem')});return controllers.indexOf(undefined)?controllers:null;};MdNavBarController.prototype._getTabByName=function(name){return this._findTab(function(tab){return tab.getName()==name;});};MdNavBarController.prototype._getSelectedTab=function(){return this._findTab(function(tab){return tab.isSelected();});};MdNavBarController.prototype.getFocusedTab=function(){return this._findTab(function(tab){return tab.hasFocus();});};MdNavBarController.prototype._findTab=function(fn){var tabs=this._getTabs();for(var i=0;i<tabs.length;i++){if(fn(tabs[i])){return tabs[i];}}
return null;};MdNavBarController.prototype.onFocus=function(){var tab=this._getSelectedTab();if(tab){tab.setFocused(true);}};MdNavBarController.prototype._moveFocus=function(oldTab,newTab){oldTab.setFocused(false);newTab.setFocused(true);};MdNavBarController.prototype.onKeydown=function(e){var keyCodes=this._$mdConstant.KEY_CODE;var tabs=this._getTabs();var focusedTab=this.getFocusedTab();if(!focusedTab)return;var focusedTabIndex=tabs.indexOf(focusedTab);switch(e.keyCode){case keyCodes.UP_ARROW:case keyCodes.LEFT_ARROW:if(focusedTabIndex>0){this._moveFocus(focusedTab,tabs[focusedTabIndex-1]);}
break;case keyCodes.DOWN_ARROW:case keyCodes.RIGHT_ARROW:if(focusedTabIndex<tabs.length-1){this._moveFocus(focusedTab,tabs[focusedTabIndex+1]);}
break;case keyCodes.SPACE:case keyCodes.ENTER:this._$timeout(function(){focusedTab.getButtonEl().click();});break;}};function MdNavItem($mdAria,$$rAF){return{restrict:'E',require:['mdNavItem','^mdNavBar'],controller:MdNavItemController,bindToController:true,controllerAs:'ctrl',replace:true,transclude:true,template:function(tElement,tAttrs){var hasNavClick=tAttrs.mdNavClick;var hasNavHref=tAttrs.mdNavHref;var hasNavSref=tAttrs.mdNavSref;var hasSrefOpts=tAttrs.srefOpts;var navigationAttribute;var navigationOptions;var buttonTemplate;if((hasNavClick?1:0)+(hasNavHref?1:0)+(hasNavSref?1:0)>1){throw Error('Must not specify more than one of the md-nav-click, md-nav-href, '+'or md-nav-sref attributes per nav-item directive.');}
if(hasNavClick){navigationAttribute='ng-click="ctrl.mdNavClick()"';}else if(hasNavHref){navigationAttribute='ng-href="{{ctrl.mdNavHref}}"';}else if(hasNavSref){navigationAttribute='ui-sref="{{ctrl.mdNavSref}}"';}
navigationOptions=hasSrefOpts?'ui-sref-opts="{{ctrl.srefOpts}}" ':'';if(navigationAttribute){buttonTemplate=''+'<md-button class="_md-nav-button md-accent" '+'ng-class="ctrl.getNgClassMap()" '+'ng-blur="ctrl.setFocused(false)" '+'tabindex="-1" '+
navigationOptions+
navigationAttribute+'>'+'<span ng-transclude class="_md-nav-button-text"></span>'+'</md-button>';}
return''+'<li class="md-nav-item" '+'role="option" '+'aria-selected="{{ctrl.isSelected()}}">'+
(buttonTemplate||'')+'</li>';},scope:{'mdNavClick':'&?','mdNavHref':'@?','mdNavSref':'@?','srefOpts':'=?','name':'@',},link:function(scope,element,attrs,controllers){$$rAF(function(){var mdNavItem=controllers[0];var mdNavBar=controllers[1];var navButton=angular.element(element[0].querySelector('._md-nav-button'));if(!mdNavItem.name){mdNavItem.name=angular.element(element[0].querySelector('._md-nav-button-text')).text().trim();}
navButton.on('click',function(){mdNavBar.mdSelectedNavItem=mdNavItem.name;scope.$apply();});$mdAria.expectWithText(element,'aria-label');});}};}
function MdNavItemController($element){this._$element=$element;this.mdNavClick;this.mdNavHref;this.mdNavSref;this.srefOpts;this.name;this._selected=false;this._focused=false;}
MdNavItemController.prototype.getNgClassMap=function(){return{'md-active':this._selected,'md-primary':this._selected,'md-unselected':!this._selected,'md-focused':this._focused,};};MdNavItemController.prototype.getName=function(){return this.name;};MdNavItemController.prototype.getButtonEl=function(){return this._$element[0].querySelector('._md-nav-button');};MdNavItemController.prototype.setSelected=function(isSelected){this._selected=isSelected;};MdNavItemController.prototype.isSelected=function(){return this._selected;};MdNavItemController.prototype.setFocused=function(isFocused){this._focused=isFocused;if(isFocused){this.getButtonEl().focus();}};MdNavItemController.prototype.hasFocus=function(){return this._focused;};})();(function(){"use strict";MdPanelService.$inject=["presets","$rootElement","$rootScope","$injector","$window"];angular.module('material.components.panel',['material.core','material.components.backdrop']).provider('$mdPanel',MdPanelProvider);var MD_PANEL_Z_INDEX=80;var MD_PANEL_HIDDEN='_md-panel-hidden';var FOCUS_TRAP_TEMPLATE=angular.element('<div class="_md-panel-focus-trap" tabindex="0"></div>');var _presets={};function MdPanelProvider(){return{'definePreset':definePreset,'getAllPresets':getAllPresets,'clearPresets':clearPresets,'$get':$getProvider()};}
function definePreset(name,preset){if(!name||!preset){throw new Error('mdPanelProvider: The panel preset definition is '+'malformed. The name and preset object are required.');}else if(_presets.hasOwnProperty(name)){throw new Error('mdPanelProvider: The panel preset you have requested '+'has already been defined.');}
delete preset.id;delete preset.position;delete preset.animation;_presets[name]=preset;}
function getAllPresets(){return angular.copy(_presets);}
function clearPresets(){_presets={};}
function $getProvider(){return['$rootElement','$rootScope','$injector','$window',function($rootElement,$rootScope,$injector,$window){return new MdPanelService(_presets,$rootElement,$rootScope,$injector,$window);}];}
function MdPanelService(presets,$rootElement,$rootScope,$injector,$window){this._defaultConfigOptions={bindToController:true,clickOutsideToClose:false,disableParentScroll:false,escapeToClose:false,focusOnOpen:true,fullscreen:false,hasBackdrop:false,propagateContainerEvents:false,transformTemplate:angular.bind(this,this._wrapTemplate),trapFocus:false,zIndex:MD_PANEL_Z_INDEX};this._config={};this._presets=presets;this._$rootElement=$rootElement;this._$rootScope=$rootScope;this._$injector=$injector;this._$window=$window;this._$mdUtil=this._$injector.get('$mdUtil');this._trackedPanels={};this._groups=Object.create(null);this.animation=MdPanelAnimation.animation;this.xPosition=MdPanelPosition.xPosition;this.yPosition=MdPanelPosition.yPosition;this.interceptorTypes=MdPanelRef.interceptorTypes;this.closeReasons=MdPanelRef.closeReasons;this.absPosition=MdPanelPosition.absPosition;}
MdPanelService.prototype.create=function(preset,config){if(typeof preset==='string'){preset=this._getPresetByName(preset);}else if(typeof preset==='object'&&(angular.isUndefined(config)||!config)){config=preset;preset={};}
preset=preset||{};config=config||{};if(angular.isDefined(config.id)&&this._trackedPanels[config.id]){var trackedPanel=this._trackedPanels[config.id];angular.extend(trackedPanel.config,config);return trackedPanel;}
this._config=angular.extend({id:config.id||'panel_'+this._$mdUtil.nextUid(),scope:this._$rootScope.$new(true),attachTo:this._$rootElement},this._defaultConfigOptions,config,preset);var panelRef=new MdPanelRef(this._config,this._$injector);this._trackedPanels[config.id]=panelRef;if(this._config.groupName){if(angular.isString(this._config.groupName)){this._config.groupName=[this._config.groupName];}
angular.forEach(this._config.groupName,function(group){panelRef.addToGroup(group);});}
this._config.scope.$on('$destroy',angular.bind(panelRef,panelRef.detach));return panelRef;};MdPanelService.prototype.open=function(preset,config){var panelRef=this.create(preset,config);return panelRef.open().then(function(){return panelRef;});};MdPanelService.prototype._getPresetByName=function(preset){if(!this._presets[preset]){throw new Error('mdPanel: The panel preset configuration that you '+'requested does not exist. Use the $mdPanelProvider to create a '+'preset before requesting one.');}
return this._presets[preset];};MdPanelService.prototype.newPanelPosition=function(){return new MdPanelPosition(this._$injector);};MdPanelService.prototype.newPanelAnimation=function(){return new MdPanelAnimation(this._$injector);};MdPanelService.prototype.newPanelGroup=function(groupName,config){if(!this._groups[groupName]){config=config||{};var group={panels:[],openPanels:[],maxOpen:config.maxOpen>0?config.maxOpen:Infinity};this._groups[groupName]=group;}
return this._groups[groupName];};MdPanelService.prototype.setGroupMaxOpen=function(groupName,maxOpen){if(this._groups[groupName]){this._groups[groupName].maxOpen=maxOpen;}else{throw new Error('mdPanel: Group does not exist yet. Call newPanelGroup().');}};MdPanelService.prototype._openCountExceedsMaxOpen=function(groupName){if(this._groups[groupName]){var group=this._groups[groupName];return group.maxOpen>0&&group.openPanels.length>group.maxOpen;}
return false;};MdPanelService.prototype._closeFirstOpenedPanel=function(groupName){this._groups[groupName].openPanels[0].close();};MdPanelService.prototype._wrapTemplate=function(origTemplate){var template=origTemplate||'';return''+'<div class="md-panel-outer-wrapper">'+'  <div class="md-panel _md-panel-offscreen">'+template+'</div>'+'</div>';};MdPanelService.prototype._wrapContentElement=function(contentElement){var wrapper=angular.element('<div class="md-panel-outer-wrapper">');contentElement.addClass('md-panel _md-panel-offscreen');wrapper.append(contentElement);return wrapper;};function MdPanelRef(config,$injector){this._$q=$injector.get('$q');this._$mdCompiler=$injector.get('$mdCompiler');this._$mdConstant=$injector.get('$mdConstant');this._$mdUtil=$injector.get('$mdUtil');this._$mdTheming=$injector.get('$mdTheming');this._$rootScope=$injector.get('$rootScope');this._$animate=$injector.get('$animate');this._$mdPanel=$injector.get('$mdPanel');this._$log=$injector.get('$log');this._$window=$injector.get('$window');this._$$rAF=$injector.get('$$rAF');this.id=config.id;this.config=config;this.panelContainer;this.panelEl;this.isAttached=false;this._removeListeners=[];this._topFocusTrap;this._bottomFocusTrap;this._backdropRef;this._restoreScroll=null;this._interceptors=Object.create(null);this._compilerCleanup=null;this._restoreCache={styles:'',classes:''};}
MdPanelRef.interceptorTypes={CLOSE:'onClose'};MdPanelRef.prototype.open=function(){var self=this;return this._$q(function(resolve,reject){var done=self._done(resolve,self);var show=self._simpleBind(self.show,self);var checkGroupMaxOpen=function(){if(self.config.groupName){angular.forEach(self.config.groupName,function(group){if(self._$mdPanel._openCountExceedsMaxOpen(group)){self._$mdPanel._closeFirstOpenedPanel(group);}});}};self.attach().then(show).then(checkGroupMaxOpen).then(done).catch(reject);});};MdPanelRef.prototype.close=function(closeReason){var self=this;return this._$q(function(resolve,reject){self._callInterceptors(MdPanelRef.interceptorTypes.CLOSE).then(function(){var done=self._done(resolve,self);var detach=self._simpleBind(self.detach,self);var onCloseSuccess=self.config['onCloseSuccess']||angular.noop;onCloseSuccess=angular.bind(self,onCloseSuccess,self,closeReason);self.hide().then(detach).then(done).then(onCloseSuccess).catch(reject);},reject);});};MdPanelRef.prototype.attach=function(){if(this.isAttached&&this.panelEl){return this._$q.when(this);}
var self=this;return this._$q(function(resolve,reject){var done=self._done(resolve,self);var onDomAdded=self.config['onDomAdded']||angular.noop;var addListeners=function(response){self.isAttached=true;self._addEventListeners();return response;};self._$q.all([self._createBackdrop(),self._createPanel().then(addListeners).catch(reject)]).then(onDomAdded).then(done).catch(reject);});};MdPanelRef.prototype.detach=function(){if(!this.isAttached){return this._$q.when(this);}
var self=this;var onDomRemoved=self.config['onDomRemoved']||angular.noop;var detachFn=function(){self._removeEventListeners();if(self._topFocusTrap&&self._topFocusTrap.parentNode){self._topFocusTrap.parentNode.removeChild(self._topFocusTrap);}
if(self._bottomFocusTrap&&self._bottomFocusTrap.parentNode){self._bottomFocusTrap.parentNode.removeChild(self._bottomFocusTrap);}
if(self._restoreCache.classes){self.panelEl[0].className=self._restoreCache.classes;}
self.panelEl[0].style.cssText=self._restoreCache.styles||'';self._compilerCleanup();self.panelContainer.remove();self.isAttached=false;return self._$q.when(self);};if(this._restoreScroll){this._restoreScroll();this._restoreScroll=null;}
return this._$q(function(resolve,reject){var done=self._done(resolve,self);self._$q.all([detachFn(),self._backdropRef?self._backdropRef.detach():true]).then(onDomRemoved).then(done).catch(reject);});};MdPanelRef.prototype.destroy=function(){var self=this;if(this.config.groupName){angular.forEach(this.config.groupName,function(group){self.removeFromGroup(group);});}
this.config.scope.$destroy();this.config.locals=null;this._interceptors=null;};MdPanelRef.prototype.show=function(){if(!this.panelContainer){return this._$q(function(resolve,reject){reject('mdPanel: Panel does not exist yet. Call open() or attach().');});}
if(!this.panelContainer.hasClass(MD_PANEL_HIDDEN)){return this._$q.when(this);}
var self=this;var animatePromise=function(){self.panelContainer.removeClass(MD_PANEL_HIDDEN);return self._animateOpen();};return this._$q(function(resolve,reject){var done=self._done(resolve,self);var onOpenComplete=self.config['onOpenComplete']||angular.noop;var addToGroupOpen=function(){if(self.config.groupName){angular.forEach(self.config.groupName,function(group){self._$mdPanel._groups[group].openPanels.push(self);});}};self._$q.all([self._backdropRef?self._backdropRef.show():self,animatePromise().then(function(){self._focusOnOpen();},reject)]).then(onOpenComplete).then(addToGroupOpen).then(done).catch(reject);});};MdPanelRef.prototype.hide=function(){if(!this.panelContainer){return this._$q(function(resolve,reject){reject('mdPanel: Panel does not exist yet. Call open() or attach().');});}
if(this.panelContainer.hasClass(MD_PANEL_HIDDEN)){return this._$q.when(this);}
var self=this;return this._$q(function(resolve,reject){var done=self._done(resolve,self);var onRemoving=self.config['onRemoving']||angular.noop;var hidePanel=function(){self.panelContainer.addClass(MD_PANEL_HIDDEN);};var removeFromGroupOpen=function(){if(self.config.groupName){var group,index;angular.forEach(self.config.groupName,function(group){group=self._$mdPanel._groups[group];index=group.openPanels.indexOf(self);if(index>-1){group.openPanels.splice(index,1);}});}};var focusOnOrigin=function(){var origin=self.config['origin'];if(origin){getElement(origin).focus();}};self._$q.all([self._backdropRef?self._backdropRef.hide():self,self._animateClose().then(onRemoving).then(hidePanel).then(removeFromGroupOpen).then(focusOnOrigin).catch(reject)]).then(done,reject);});};MdPanelRef.prototype.addClass=function(newClass,toElement){this._$log.warn('mdPanel: The addClass method is in the process of being deprecated. '+'Full deprecation is scheduled for the AngularJS Material 1.2 release. '+'To achieve the same results, use the panelContainer or panelEl '+'JQLite elements that are referenced in MdPanelRef.');if(!this.panelContainer){throw new Error('mdPanel: Panel does not exist yet. Call open() or attach().');}
if(!toElement&&!this.panelContainer.hasClass(newClass)){this.panelContainer.addClass(newClass);}else if(toElement&&!this.panelEl.hasClass(newClass)){this.panelEl.addClass(newClass);}};MdPanelRef.prototype.removeClass=function(oldClass,fromElement){this._$log.warn('mdPanel: The removeClass method is in the process of being deprecated. '+'Full deprecation is scheduled for the AngularJS Material 1.2 release. '+'To achieve the same results, use the panelContainer or panelEl '+'JQLite elements that are referenced in MdPanelRef.');if(!this.panelContainer){throw new Error('mdPanel: Panel does not exist yet. Call open() or attach().');}
if(!fromElement&&this.panelContainer.hasClass(oldClass)){this.panelContainer.removeClass(oldClass);}else if(fromElement&&this.panelEl.hasClass(oldClass)){this.panelEl.removeClass(oldClass);}};MdPanelRef.prototype.toggleClass=function(toggleClass,onElement){this._$log.warn('mdPanel: The toggleClass method is in the process of being deprecated. '+'Full deprecation is scheduled for the AngularJS Material 1.2 release. '+'To achieve the same results, use the panelContainer or panelEl '+'JQLite elements that are referenced in MdPanelRef.');if(!this.panelContainer){throw new Error('mdPanel: Panel does not exist yet. Call open() or attach().');}
if(!onElement){this.panelContainer.toggleClass(toggleClass);}else{this.panelEl.toggleClass(toggleClass);}};MdPanelRef.prototype._compile=function(){var self=this;return self._$mdCompiler.compile(self.config).then(function(compileData){var config=self.config;if(config.contentElement){var panelEl=compileData.element;self._restoreCache.styles=panelEl[0].style.cssText;self._restoreCache.classes=panelEl[0].className;self.panelContainer=self._$mdPanel._wrapContentElement(panelEl);self.panelEl=panelEl;}else{self.panelContainer=compileData.link(config['scope']);self.panelEl=angular.element(self.panelContainer[0].querySelector('.md-panel'));}
self._compilerCleanup=compileData.cleanup;getElement(self.config['attachTo']).append(self.panelContainer);return self;});};MdPanelRef.prototype._createPanel=function(){var self=this;return this._$q(function(resolve,reject){if(!self.config.locals){self.config.locals={};}
self.config.locals.mdPanelRef=self;self._compile().then(function(){if(self.config['disableParentScroll']){self._restoreScroll=self._$mdUtil.disableScrollAround(null,self.panelContainer,{disableScrollMask:true});}
if(self.config['panelClass']){self.panelEl.addClass(self.config['panelClass']);}
if(self.config['propagateContainerEvents']){self.panelContainer.css('pointer-events','none');self.panelEl.css('pointer-events','all');}
if(self._$animate.pin){self._$animate.pin(self.panelContainer,getElement(self.config['attachTo']));}
self._configureTrapFocus();self._addStyles().then(function(){resolve(self);},reject);},reject);});};MdPanelRef.prototype._addStyles=function(){var self=this;return this._$q(function(resolve){self.panelContainer.css('z-index',self.config['zIndex']);self.panelEl.css('z-index',self.config['zIndex']+1);var hideAndResolve=function(){self._setTheming();self.panelEl.removeClass('_md-panel-offscreen');self.panelContainer.addClass(MD_PANEL_HIDDEN);resolve(self);};if(self.config['fullscreen']){self.panelEl.addClass('_md-panel-fullscreen');hideAndResolve();return;}
var positionConfig=self.config['position'];if(!positionConfig){hideAndResolve();return;}
self._$rootScope['$$postDigest'](function(){self._updatePosition(true);self._setTheming();resolve(self);});});};MdPanelRef.prototype._setTheming=function(){this._$mdTheming(this.panelEl);this._$mdTheming(this.panelContainer);};MdPanelRef.prototype.updatePosition=function(position){if(!this.panelContainer){throw new Error('mdPanel: Panel does not exist yet. Call open() or attach().');}
this.config['position']=position;this._updatePosition();};MdPanelRef.prototype._updatePosition=function(init){var positionConfig=this.config['position'];if(positionConfig){positionConfig._setPanelPosition(this.panelEl);if(init){this.panelEl.removeClass('_md-panel-offscreen');this.panelContainer.addClass(MD_PANEL_HIDDEN);}
this.panelEl.css(MdPanelPosition.absPosition.TOP,positionConfig.getTop());this.panelEl.css(MdPanelPosition.absPosition.BOTTOM,positionConfig.getBottom());this.panelEl.css(MdPanelPosition.absPosition.LEFT,positionConfig.getLeft());this.panelEl.css(MdPanelPosition.absPosition.RIGHT,positionConfig.getRight());}};MdPanelRef.prototype._focusOnOpen=function(){if(this.config['focusOnOpen']){var self=this;this._$rootScope['$$postDigest'](function(){var target=self._$mdUtil.findFocusTarget(self.panelEl)||self.panelEl;target.focus();});}};MdPanelRef.prototype._createBackdrop=function(){if(this.config.hasBackdrop){if(!this._backdropRef){var backdropAnimation=this._$mdPanel.newPanelAnimation().openFrom(this.config.attachTo).withAnimation({open:'_md-opaque-enter',close:'_md-opaque-leave'});if(this.config.animation){backdropAnimation.duration(this.config.animation._rawDuration);}
var backdropConfig={animation:backdropAnimation,attachTo:this.config.attachTo,focusOnOpen:false,panelClass:'_md-panel-backdrop',zIndex:this.config.zIndex-1};this._backdropRef=this._$mdPanel.create(backdropConfig);}
if(!this._backdropRef.isAttached){return this._backdropRef.attach();}}};MdPanelRef.prototype._addEventListeners=function(){this._configureEscapeToClose();this._configureClickOutsideToClose();this._configureScrollListener();};MdPanelRef.prototype._removeEventListeners=function(){this._removeListeners&&this._removeListeners.forEach(function(removeFn){removeFn();});this._removeListeners=[];};MdPanelRef.prototype._configureEscapeToClose=function(){if(this.config['escapeToClose']){var parentTarget=getElement(this.config['attachTo']);var self=this;var keyHandlerFn=function(ev){if(ev.keyCode===self._$mdConstant.KEY_CODE.ESCAPE){ev.stopPropagation();ev.preventDefault();self.close(MdPanelRef.closeReasons.ESCAPE);}};this.panelContainer.on('keydown',keyHandlerFn);parentTarget.on('keydown',keyHandlerFn);this._removeListeners.push(function(){self.panelContainer.off('keydown',keyHandlerFn);parentTarget.off('keydown',keyHandlerFn);});}};MdPanelRef.prototype._configureClickOutsideToClose=function(){if(this.config['clickOutsideToClose']){var target=this.config['propagateContainerEvents']?angular.element(document.body):this.panelContainer;var sourceEl;var mousedownHandler=function(ev){sourceEl=ev.target;};var self=this;var mouseupHandler=function(ev){if(self.config['propagateContainerEvents']){if(sourceEl!==self.panelEl[0]&&!self.panelEl[0].contains(sourceEl)){self.close();}}else if(sourceEl===target[0]&&ev.target===target[0]){ev.stopPropagation();ev.preventDefault();self.close(MdPanelRef.closeReasons.CLICK_OUTSIDE);}};target.on('mousedown',mousedownHandler);target.on('mouseup',mouseupHandler);this._removeListeners.push(function(){target.off('mousedown',mousedownHandler);target.off('mouseup',mouseupHandler);});}};MdPanelRef.prototype._configureScrollListener=function(){if(!this.config['disableParentScroll']){var updatePosition=angular.bind(this,this._updatePosition);var debouncedUpdatePosition=this._$$rAF.throttle(updatePosition);var self=this;var onScroll=function(){debouncedUpdatePosition();};this._$window.addEventListener('scroll',onScroll,true);this._removeListeners.push(function(){self._$window.removeEventListener('scroll',onScroll,true);});}};MdPanelRef.prototype._configureTrapFocus=function(){this.panelEl.attr('tabIndex','-1');if(this.config['trapFocus']){var element=this.panelEl;this._topFocusTrap=FOCUS_TRAP_TEMPLATE.clone()[0];this._bottomFocusTrap=FOCUS_TRAP_TEMPLATE.clone()[0];var focusHandler=function(){element.focus();};this._topFocusTrap.addEventListener('focus',focusHandler);this._bottomFocusTrap.addEventListener('focus',focusHandler);this._removeListeners.push(this._simpleBind(function(){this._topFocusTrap.removeEventListener('focus',focusHandler);this._bottomFocusTrap.removeEventListener('focus',focusHandler);},this));element[0].parentNode.insertBefore(this._topFocusTrap,element[0]);element.after(this._bottomFocusTrap);}};MdPanelRef.prototype.updateAnimation=function(animation){this.config['animation']=animation;if(this._backdropRef){this._backdropRef.config.animation.duration(animation._rawDuration);}};MdPanelRef.prototype._animateOpen=function(){this.panelContainer.addClass('md-panel-is-showing');var animationConfig=this.config['animation'];if(!animationConfig){this.panelContainer.addClass('_md-panel-shown');return this._$q.when(this);}
var self=this;return this._$q(function(resolve){var done=self._done(resolve,self);var warnAndOpen=function(){self._$log.warn('mdPanel: MdPanel Animations failed. '+'Showing panel without animating.');done();};animationConfig.animateOpen(self.panelEl).then(done,warnAndOpen);});};MdPanelRef.prototype._animateClose=function(){var animationConfig=this.config['animation'];if(!animationConfig){this.panelContainer.removeClass('md-panel-is-showing');this.panelContainer.removeClass('_md-panel-shown');return this._$q.when(this);}
var self=this;return this._$q(function(resolve){var done=function(){self.panelContainer.removeClass('md-panel-is-showing');resolve(self);};var warnAndClose=function(){self._$log.warn('mdPanel: MdPanel Animations failed. '+'Hiding panel without animating.');done();};animationConfig.animateClose(self.panelEl).then(done,warnAndClose);});};MdPanelRef.prototype.registerInterceptor=function(type,callback){var error=null;if(!angular.isString(type)){error='Interceptor type must be a string, instead got '+typeof type;}else if(!angular.isFunction(callback)){error='Interceptor callback must be a function, instead got '+typeof callback;}
if(error){throw new Error('MdPanel: '+error);}
var interceptors=this._interceptors[type]=this._interceptors[type]||[];if(interceptors.indexOf(callback)===-1){interceptors.push(callback);}
return this;};MdPanelRef.prototype.removeInterceptor=function(type,callback){var index=this._interceptors[type]?this._interceptors[type].indexOf(callback):-1;if(index>-1){this._interceptors[type].splice(index,1);}
return this;};MdPanelRef.prototype.removeAllInterceptors=function(type){if(type){this._interceptors[type]=[];}else{this._interceptors=Object.create(null);}
return this;};MdPanelRef.prototype._callInterceptors=function(type){var self=this;var $q=self._$q;var interceptors=self._interceptors&&self._interceptors[type]||[];return interceptors.reduceRight(function(promise,interceptor){var isPromiseLike=interceptor&&angular.isFunction(interceptor.then);var response=isPromiseLike?interceptor:null;return promise.then(function(){if(!response){try{response=interceptor(self);}catch(e){response=$q.reject(e);}}
return response;});},$q.resolve(self));};MdPanelRef.prototype._simpleBind=function(callback,self){return function(value){return callback.apply(self,value);};};MdPanelRef.prototype._done=function(callback,self){return function(){callback(self);};};MdPanelRef.prototype.addToGroup=function(groupName){if(!this._$mdPanel._groups[groupName]){this._$mdPanel.newPanelGroup(groupName);}
var group=this._$mdPanel._groups[groupName];var index=group.panels.indexOf(this);if(index<0){group.panels.push(this);}};MdPanelRef.prototype.removeFromGroup=function(groupName){if(!this._$mdPanel._groups[groupName]){throw new Error('mdPanel: The group '+groupName+' does not exist.');}
var group=this._$mdPanel._groups[groupName];var index=group.panels.indexOf(this);if(index>-1){group.panels.splice(index,1);}};MdPanelRef.closeReasons={CLICK_OUTSIDE:'clickOutsideToClose',ESCAPE:'escapeToClose',};function MdPanelPosition($injector){this._$window=$injector.get('$window');this._isRTL=$injector.get('$mdUtil').bidi()==='rtl';this._$mdConstant=$injector.get('$mdConstant');this._absolute=false;this._relativeToEl;this._top='';this._bottom='';this._left='';this._right='';this._translateX=[];this._translateY=[];this._positions=[];this._actualPosition;}
MdPanelPosition.xPosition={CENTER:'center',ALIGN_START:'align-start',ALIGN_END:'align-end',OFFSET_START:'offset-start',OFFSET_END:'offset-end'};MdPanelPosition.yPosition={CENTER:'center',ALIGN_TOPS:'align-tops',ALIGN_BOTTOMS:'align-bottoms',ABOVE:'above',BELOW:'below'};MdPanelPosition.absPosition={TOP:'top',RIGHT:'right',BOTTOM:'bottom',LEFT:'left'};MdPanelPosition.viewportMargin=8;MdPanelPosition.prototype.absolute=function(){this._absolute=true;return this;};MdPanelPosition.prototype._setPosition=function(position,value){if(position===MdPanelPosition.absPosition.RIGHT||position===MdPanelPosition.absPosition.LEFT){this._left=this._right='';}else if(position===MdPanelPosition.absPosition.BOTTOM||position===MdPanelPosition.absPosition.TOP){this._top=this._bottom='';}else{var positions=Object.keys(MdPanelPosition.absPosition).join().toLowerCase();throw new Error('mdPanel: Position must be one of '+positions+'.');}
this['_'+position]=angular.isString(value)?value:'0';return this;};MdPanelPosition.prototype.top=function(top){return this._setPosition(MdPanelPosition.absPosition.TOP,top);};MdPanelPosition.prototype.bottom=function(bottom){return this._setPosition(MdPanelPosition.absPosition.BOTTOM,bottom);};MdPanelPosition.prototype.start=function(start){var position=this._isRTL?MdPanelPosition.absPosition.RIGHT:MdPanelPosition.absPosition.LEFT;return this._setPosition(position,start);};MdPanelPosition.prototype.end=function(end){var position=this._isRTL?MdPanelPosition.absPosition.LEFT:MdPanelPosition.absPosition.RIGHT;return this._setPosition(position,end);};MdPanelPosition.prototype.left=function(left){return this._setPosition(MdPanelPosition.absPosition.LEFT,left);};MdPanelPosition.prototype.right=function(right){return this._setPosition(MdPanelPosition.absPosition.RIGHT,right);};MdPanelPosition.prototype.centerHorizontally=function(){this._left='50%';this._right='';this._translateX=['-50%'];return this;};MdPanelPosition.prototype.centerVertically=function(){this._top='50%';this._bottom='';this._translateY=['-50%'];return this;};MdPanelPosition.prototype.center=function(){return this.centerHorizontally().centerVertically();};MdPanelPosition.prototype.relativeTo=function(element){this._absolute=false;this._relativeToEl=getElement(element);return this;};MdPanelPosition.prototype.addPanelPosition=function(xPosition,yPosition){if(!this._relativeToEl){throw new Error('mdPanel: addPanelPosition can only be used with '+'relative positioning. Set relativeTo first.');}
this._validateXPosition(xPosition);this._validateYPosition(yPosition);this._positions.push({x:xPosition,y:yPosition,});return this;};MdPanelPosition.prototype._validateYPosition=function(yPosition){if(yPosition==null){return;}
var positionKeys=Object.keys(MdPanelPosition.yPosition);var positionValues=[];for(var key,i=0;key=positionKeys[i];i++){var position=MdPanelPosition.yPosition[key];positionValues.push(position);if(position===yPosition){return;}}
throw new Error('mdPanel: Panel y position only accepts the following '+'values:\n'+positionValues.join(' | '));};MdPanelPosition.prototype._validateXPosition=function(xPosition){if(xPosition==null){return;}
var positionKeys=Object.keys(MdPanelPosition.xPosition);var positionValues=[];for(var key,i=0;key=positionKeys[i];i++){var position=MdPanelPosition.xPosition[key];positionValues.push(position);if(position===xPosition){return;}}
throw new Error('mdPanel: Panel x Position only accepts the following '+'values:\n'+positionValues.join(' | '));};MdPanelPosition.prototype.withOffsetX=function(offsetX){this._translateX.push(offsetX);return this;};MdPanelPosition.prototype.withOffsetY=function(offsetY){this._translateY.push(offsetY);return this;};MdPanelPosition.prototype.getTop=function(){return this._top;};MdPanelPosition.prototype.getBottom=function(){return this._bottom;};MdPanelPosition.prototype.getLeft=function(){return this._left;};MdPanelPosition.prototype.getRight=function(){return this._right;};MdPanelPosition.prototype.getTransform=function(){var translateX=this._reduceTranslateValues('translateX',this._translateX);var translateY=this._reduceTranslateValues('translateY',this._translateY);return(translateX+' '+translateY).trim();};MdPanelPosition.prototype._setTransform=function(panelEl){return panelEl.css(this._$mdConstant.CSS.TRANSFORM,this.getTransform());};MdPanelPosition.prototype._isOnscreen=function(panelEl){var left=parseInt(this.getLeft());var top=parseInt(this.getTop());if(this._translateX.length||this._translateY.length){var prefixedTransform=this._$mdConstant.CSS.TRANSFORM;var offsets=getComputedTranslations(panelEl,prefixedTransform);left+=offsets.x;top+=offsets.y;}
var right=left+panelEl[0].offsetWidth;var bottom=top+panelEl[0].offsetHeight;return(left>=0)&&(top>=0)&&(bottom<=this._$window.innerHeight)&&(right<=this._$window.innerWidth);};MdPanelPosition.prototype.getActualPosition=function(){return this._actualPosition;};MdPanelPosition.prototype._reduceTranslateValues=function(translateFn,values){return values.map(function(translation){var translationValue=angular.isFunction(translation)?translation(this):translation;return translateFn+'('+translationValue+')';},this).join(' ');};MdPanelPosition.prototype._setPanelPosition=function(panelEl){panelEl.removeClass('_md-panel-position-adjusted');if(this._absolute){this._setTransform(panelEl);return;}
if(this._actualPosition){this._calculatePanelPosition(panelEl,this._actualPosition);this._setTransform(panelEl);this._constrainToViewport(panelEl);return;}
for(var i=0;i<this._positions.length;i++){this._actualPosition=this._positions[i];this._calculatePanelPosition(panelEl,this._actualPosition);this._setTransform(panelEl);if(this._isOnscreen(panelEl)){return;}}
this._constrainToViewport(panelEl);};MdPanelPosition.prototype._constrainToViewport=function(panelEl){var margin=MdPanelPosition.viewportMargin;var initialTop=this._top;var initialLeft=this._left;if(this.getTop()){var top=parseInt(this.getTop());var bottom=panelEl[0].offsetHeight+top;var viewportHeight=this._$window.innerHeight;if(top<margin){this._top=margin+'px';}else if(bottom>viewportHeight){this._top=top-(bottom-viewportHeight+margin)+'px';}}
if(this.getLeft()){var left=parseInt(this.getLeft());var right=panelEl[0].offsetWidth+left;var viewportWidth=this._$window.innerWidth;if(left<margin){this._left=margin+'px';}else if(right>viewportWidth){this._left=left-(right-viewportWidth+margin)+'px';}}
panelEl.toggleClass('_md-panel-position-adjusted',this._top!==initialTop||this._left!==initialLeft);};MdPanelPosition.prototype._reverseXPosition=function(position){if(position===MdPanelPosition.xPosition.CENTER){return position;}
var start='start';var end='end';return position.indexOf(start)>-1?position.replace(start,end):position.replace(end,start);};MdPanelPosition.prototype._bidi=function(position){return this._isRTL?this._reverseXPosition(position):position;};MdPanelPosition.prototype._calculatePanelPosition=function(panelEl,position){var panelBounds=panelEl[0].getBoundingClientRect();var panelWidth=panelBounds.width;var panelHeight=panelBounds.height;var targetBounds=this._relativeToEl[0].getBoundingClientRect();var targetLeft=targetBounds.left;var targetRight=targetBounds.right;var targetWidth=targetBounds.width;switch(this._bidi(position.x)){case MdPanelPosition.xPosition.OFFSET_START:this._left=targetLeft-panelWidth+'px';break;case MdPanelPosition.xPosition.ALIGN_END:this._left=targetRight-panelWidth+'px';break;case MdPanelPosition.xPosition.CENTER:var left=targetLeft+(0.5*targetWidth)-(0.5*panelWidth);this._left=left+'px';break;case MdPanelPosition.xPosition.ALIGN_START:this._left=targetLeft+'px';break;case MdPanelPosition.xPosition.OFFSET_END:this._left=targetRight+'px';break;}
var targetTop=targetBounds.top;var targetBottom=targetBounds.bottom;var targetHeight=targetBounds.height;switch(position.y){case MdPanelPosition.yPosition.ABOVE:this._top=targetTop-panelHeight+'px';break;case MdPanelPosition.yPosition.ALIGN_BOTTOMS:this._top=targetBottom-panelHeight+'px';break;case MdPanelPosition.yPosition.CENTER:var top=targetTop+(0.5*targetHeight)-(0.5*panelHeight);this._top=top+'px';break;case MdPanelPosition.yPosition.ALIGN_TOPS:this._top=targetTop+'px';break;case MdPanelPosition.yPosition.BELOW:this._top=targetBottom+'px';break;}};function MdPanelAnimation($injector){this._$mdUtil=$injector.get('$mdUtil');this._openFrom;this._closeTo;this._animationClass='';this._openDuration;this._closeDuration;this._rawDuration;}
MdPanelAnimation.animation={SLIDE:'md-panel-animate-slide',SCALE:'md-panel-animate-scale',FADE:'md-panel-animate-fade'};MdPanelAnimation.prototype.openFrom=function(openFrom){openFrom=openFrom.target?openFrom.target:openFrom;this._openFrom=this._getPanelAnimationTarget(openFrom);if(!this._closeTo){this._closeTo=this._openFrom;}
return this;};MdPanelAnimation.prototype.closeTo=function(closeTo){this._closeTo=this._getPanelAnimationTarget(closeTo);return this;};MdPanelAnimation.prototype.duration=function(duration){if(duration){if(angular.isNumber(duration)){this._openDuration=this._closeDuration=toSeconds(duration);}else if(angular.isObject(duration)){this._openDuration=toSeconds(duration.open);this._closeDuration=toSeconds(duration.close);}}
this._rawDuration=duration;return this;function toSeconds(value){if(angular.isNumber(value))return value/1000;}};MdPanelAnimation.prototype._getPanelAnimationTarget=function(location){if(angular.isDefined(location.top)||angular.isDefined(location.left)){return{element:undefined,bounds:{top:location.top||0,left:location.left||0}};}else{return this._getBoundingClientRect(getElement(location));}};MdPanelAnimation.prototype.withAnimation=function(cssClass){this._animationClass=cssClass;return this;};MdPanelAnimation.prototype.animateOpen=function(panelEl){var animator=this._$mdUtil.dom.animator;this._fixBounds(panelEl);var animationOptions={};var panelTransform=panelEl[0].style.transform||'';var openFrom=animator.toTransformCss(panelTransform);var openTo=animator.toTransformCss(panelTransform);switch(this._animationClass){case MdPanelAnimation.animation.SLIDE:panelEl.css('opacity','1');animationOptions={transitionInClass:'_md-panel-animate-enter'};var openSlide=animator.calculateSlideToOrigin(panelEl,this._openFrom)||'';openFrom=animator.toTransformCss(openSlide+' '+panelTransform);break;case MdPanelAnimation.animation.SCALE:animationOptions={transitionInClass:'_md-panel-animate-enter'};var openScale=animator.calculateZoomToOrigin(panelEl,this._openFrom)||'';openFrom=animator.toTransformCss(openScale+' '+panelTransform);break;case MdPanelAnimation.animation.FADE:animationOptions={transitionInClass:'_md-panel-animate-enter'};break;default:if(angular.isString(this._animationClass)){animationOptions={transitionInClass:this._animationClass};}else{animationOptions={transitionInClass:this._animationClass['open'],transitionOutClass:this._animationClass['close'],};}}
animationOptions.duration=this._openDuration;return animator.translate3d(panelEl,openFrom,openTo,animationOptions);};MdPanelAnimation.prototype.animateClose=function(panelEl){var animator=this._$mdUtil.dom.animator;var reverseAnimationOptions={};var panelTransform=panelEl[0].style.transform||'';var closeFrom=animator.toTransformCss(panelTransform);var closeTo=animator.toTransformCss(panelTransform);switch(this._animationClass){case MdPanelAnimation.animation.SLIDE:panelEl.css('opacity','1');reverseAnimationOptions={transitionInClass:'_md-panel-animate-leave'};var closeSlide=animator.calculateSlideToOrigin(panelEl,this._closeTo)||'';closeTo=animator.toTransformCss(closeSlide+' '+panelTransform);break;case MdPanelAnimation.animation.SCALE:reverseAnimationOptions={transitionInClass:'_md-panel-animate-scale-out _md-panel-animate-leave'};var closeScale=animator.calculateZoomToOrigin(panelEl,this._closeTo)||'';closeTo=animator.toTransformCss(closeScale+' '+panelTransform);break;case MdPanelAnimation.animation.FADE:reverseAnimationOptions={transitionInClass:'_md-panel-animate-fade-out _md-panel-animate-leave'};break;default:if(angular.isString(this._animationClass)){reverseAnimationOptions={transitionOutClass:this._animationClass};}else{reverseAnimationOptions={transitionInClass:this._animationClass['close'],transitionOutClass:this._animationClass['open']};}}
reverseAnimationOptions.duration=this._closeDuration;return animator.translate3d(panelEl,closeFrom,closeTo,reverseAnimationOptions);};MdPanelAnimation.prototype._fixBounds=function(panelEl){var panelWidth=panelEl[0].offsetWidth;var panelHeight=panelEl[0].offsetHeight;if(this._openFrom&&this._openFrom.bounds.height==null){this._openFrom.bounds.height=panelHeight;}
if(this._openFrom&&this._openFrom.bounds.width==null){this._openFrom.bounds.width=panelWidth;}
if(this._closeTo&&this._closeTo.bounds.height==null){this._closeTo.bounds.height=panelHeight;}
if(this._closeTo&&this._closeTo.bounds.width==null){this._closeTo.bounds.width=panelWidth;}};MdPanelAnimation.prototype._getBoundingClientRect=function(element){if(element instanceof angular.element){return{element:element,bounds:element[0].getBoundingClientRect()};}};function getElement(el){var queryResult=angular.isString(el)?document.querySelector(el):el;return angular.element(queryResult);}
function getComputedTranslations(el,property){var transform=getComputedStyle(el[0]||el)[property];var openIndex=transform.indexOf('(');var closeIndex=transform.lastIndexOf(')');var output={x:0,y:0};if(openIndex>-1&&closeIndex>-1){var parsedValues=transform.substring(openIndex+1,closeIndex).split(', ').slice(-2);output.x=parseInt(parsedValues[0]);output.y=parseInt(parsedValues[1]);}
return output;}})();(function(){"use strict";angular.module('material.components.progressCircular',['material.core']);})();(function(){"use strict";MdProgressLinearDirective.$inject=["$mdTheming","$mdUtil","$log"];angular.module('material.components.progressLinear',['material.core']).directive('mdProgressLinear',MdProgressLinearDirective);function MdProgressLinearDirective($mdTheming,$mdUtil,$log){var MODE_DETERMINATE="determinate";var MODE_INDETERMINATE="indeterminate";var MODE_BUFFER="buffer";var MODE_QUERY="query";var DISABLED_CLASS="_md-progress-linear-disabled";return{restrict:'E',template:'<div class="md-container">'+'<div class="md-dashed"></div>'+'<div class="md-bar md-bar1"></div>'+'<div class="md-bar md-bar2"></div>'+'</div>',compile:compile};function compile(tElement,tAttrs,transclude){tElement.attr('aria-valuemin',0);tElement.attr('aria-valuemax',100);tElement.attr('role','progressbar');return postLink;}
function postLink(scope,element,attr){$mdTheming(element);var lastMode;var isDisabled=attr.hasOwnProperty('disabled');var toVendorCSS=$mdUtil.dom.animator.toCss;var bar1=angular.element(element[0].querySelector('.md-bar1'));var bar2=angular.element(element[0].querySelector('.md-bar2'));var container=angular.element(element[0].querySelector('.md-container'));element.attr('md-mode',mode()).toggleClass(DISABLED_CLASS,isDisabled);validateMode();watchAttributes();function watchAttributes(){attr.$observe('value',function(value){var percentValue=clamp(value);element.attr('aria-valuenow',percentValue);if(mode()!=MODE_QUERY)animateIndicator(bar2,percentValue);});attr.$observe('mdBufferValue',function(value){animateIndicator(bar1,clamp(value));});attr.$observe('disabled',function(value){if(value===true||value===false){isDisabled=!!value;}else{isDisabled=angular.isDefined(value);}
element.toggleClass(DISABLED_CLASS,isDisabled);container.toggleClass(lastMode,!isDisabled);});attr.$observe('mdMode',function(mode){if(lastMode)container.removeClass(lastMode);switch(mode){case MODE_QUERY:case MODE_BUFFER:case MODE_DETERMINATE:case MODE_INDETERMINATE:container.addClass(lastMode="md-mode-"+mode);break;default:container.addClass(lastMode="md-mode-"+MODE_INDETERMINATE);break;}});}
function validateMode(){if(angular.isUndefined(attr.mdMode)){var hasValue=angular.isDefined(attr.value);var mode=hasValue?MODE_DETERMINATE:MODE_INDETERMINATE;var info="Auto-adding the missing md-mode='{0}' to the ProgressLinear element";element.attr("md-mode",mode);attr.mdMode=mode;}}
function mode(){var value=(attr.mdMode||"").trim();if(value){switch(value){case MODE_DETERMINATE:case MODE_INDETERMINATE:case MODE_BUFFER:case MODE_QUERY:break;default:value=MODE_INDETERMINATE;break;}}
return value;}
function animateIndicator(target,value){if(isDisabled||!mode())return;var to=$mdUtil.supplant("translateX({0}%) scale({1},1)",[(value-100)/2,value/100]);var styles=toVendorCSS({transform:to});angular.element(target).css(styles);}}
function clamp(value){return Math.max(0,Math.min(value||0,100));}}})();(function(){"use strict";mdRadioGroupDirective.$inject=["$mdUtil","$mdConstant","$mdTheming","$timeout"];mdRadioButtonDirective.$inject=["$mdAria","$mdUtil","$mdTheming"];angular.module('material.components.radioButton',['material.core']).directive('mdRadioGroup',mdRadioGroupDirective).directive('mdRadioButton',mdRadioButtonDirective);function mdRadioGroupDirective($mdUtil,$mdConstant,$mdTheming,$timeout){RadioGroupController.prototype=createRadioGroupControllerProto();return{restrict:'E',controller:['$element',RadioGroupController],require:['mdRadioGroup','?ngModel'],link:{pre:linkRadioGroup}};function linkRadioGroup(scope,element,attr,ctrls){element.addClass('_md');$mdTheming(element);var rgCtrl=ctrls[0];var ngModelCtrl=ctrls[1]||$mdUtil.fakeNgModel();rgCtrl.init(ngModelCtrl);scope.mouseActive=false;element.attr({'role':'radiogroup','tabIndex':element.attr('tabindex')||'0'}).on('keydown',keydownListener).on('mousedown',function(event){scope.mouseActive=true;$timeout(function(){scope.mouseActive=false;},100);}).on('focus',function(){if(scope.mouseActive===false){rgCtrl.$element.addClass('md-focused');}}).on('blur',function(){rgCtrl.$element.removeClass('md-focused');});function setFocus(){if(!element.hasClass('md-focused')){element.addClass('md-focused');}}
function keydownListener(ev){var keyCode=ev.which||ev.keyCode;if(keyCode!=$mdConstant.KEY_CODE.ENTER&&ev.currentTarget!=ev.target){return;}
switch(keyCode){case $mdConstant.KEY_CODE.LEFT_ARROW:case $mdConstant.KEY_CODE.UP_ARROW:ev.preventDefault();rgCtrl.selectPrevious();setFocus();break;case $mdConstant.KEY_CODE.RIGHT_ARROW:case $mdConstant.KEY_CODE.DOWN_ARROW:ev.preventDefault();rgCtrl.selectNext();setFocus();break;case $mdConstant.KEY_CODE.ENTER:var form=angular.element($mdUtil.getClosest(element[0],'form'));if(form.length>0){form.triggerHandler('submit');}
break;}}}
function RadioGroupController($element){this._radioButtonRenderFns=[];this.$element=$element;}
function createRadioGroupControllerProto(){return{init:function(ngModelCtrl){this._ngModelCtrl=ngModelCtrl;this._ngModelCtrl.$render=angular.bind(this,this.render);},add:function(rbRender){this._radioButtonRenderFns.push(rbRender);},remove:function(rbRender){var index=this._radioButtonRenderFns.indexOf(rbRender);if(index!==-1){this._radioButtonRenderFns.splice(index,1);}},render:function(){this._radioButtonRenderFns.forEach(function(rbRender){rbRender();});},setViewValue:function(value,eventType){this._ngModelCtrl.$setViewValue(value,eventType);this.render();},getViewValue:function(){return this._ngModelCtrl.$viewValue;},selectNext:function(){return changeSelectedButton(this.$element,1);},selectPrevious:function(){return changeSelectedButton(this.$element,-1);},setActiveDescendant:function(radioId){this.$element.attr('aria-activedescendant',radioId);},isDisabled:function(){return this.$element[0].hasAttribute('disabled');}};}
function changeSelectedButton(parent,increment){var buttons=$mdUtil.iterator(parent[0].querySelectorAll('md-radio-button'),true);if(buttons.count()){var validate=function(button){return!angular.element(button).attr("disabled");};var selected=parent[0].querySelector('md-radio-button.md-checked');var target=buttons[increment<0?'previous':'next'](selected,validate)||buttons.first();angular.element(target).triggerHandler('click');}}}
function mdRadioButtonDirective($mdAria,$mdUtil,$mdTheming){var CHECKED_CSS='md-checked';return{restrict:'E',require:'^mdRadioGroup',transclude:true,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox>'+'<div class="md-off"></div>'+'<div class="md-on"></div>'+'</div>'+'<div ng-transclude class="md-label"></div>',link:link};function link(scope,element,attr,rgCtrl){var lastChecked;$mdTheming(element);configureAria(element,scope);if(attr.ngValue){$mdUtil.nextTick(initialize,false);}else{initialize();}
function initialize(){if(!rgCtrl){throw'RadioButton: No RadioGroupController could be found.';}
rgCtrl.add(render);attr.$observe('value',render);element.on('click',listener).on('$destroy',function(){rgCtrl.remove(render);});}
function listener(ev){if(element[0].hasAttribute('disabled')||rgCtrl.isDisabled())return;scope.$apply(function(){rgCtrl.setViewValue(attr.value,ev&&ev.type);});}
function render(){var checked=rgCtrl.getViewValue()==attr.value;if(checked===lastChecked)return;if(element[0].parentNode.nodeName.toLowerCase()!=='md-radio-group'){element.parent().toggleClass(CHECKED_CSS,checked);}
if(checked){rgCtrl.setActiveDescendant(element.attr('id'));}
lastChecked=checked;element.attr('aria-checked',checked).toggleClass(CHECKED_CSS,checked);}
function configureAria(element,scope){element.attr({id:attr.id||'radio_'+$mdUtil.nextUid(),role:'radio','aria-checked':'false'});$mdAria.expectWithText(element,'aria-label');}}}})();(function(){"use strict";SelectDirective.$inject=["$mdSelect","$mdUtil","$mdConstant","$mdTheming","$mdAria","$parse","$sce","$injector"];SelectMenuDirective.$inject=["$parse","$mdUtil","$mdConstant","$mdTheming"];OptionDirective.$inject=["$mdButtonInkRipple","$mdUtil","$mdTheming"];SelectProvider.$inject=["$$interimElementProvider"];var SELECT_EDGE_MARGIN=8;var selectNextId=0;var CHECKBOX_SELECTION_INDICATOR=angular.element('<div class="md-container"><div class="md-icon"></div></div>');angular.module('material.components.select',['material.core','material.components.backdrop']).directive('mdSelect',SelectDirective).directive('mdSelectMenu',SelectMenuDirective).directive('mdOption',OptionDirective).directive('mdOptgroup',OptgroupDirective).directive('mdSelectHeader',SelectHeaderDirective).provider('$mdSelect',SelectProvider);function SelectDirective($mdSelect,$mdUtil,$mdConstant,$mdTheming,$mdAria,$parse,$sce,$injector){var keyCodes=$mdConstant.KEY_CODE;var NAVIGATION_KEYS=[keyCodes.SPACE,keyCodes.ENTER,keyCodes.UP_ARROW,keyCodes.DOWN_ARROW];return{restrict:'E',require:['^?mdInputContainer','mdSelect','ngModel','?^form'],compile:compile,controller:function(){}};function compile(element,attr){var valueEl=angular.element('<md-select-value><span></span></md-select-value>');valueEl.append('<span class="md-select-icon" aria-hidden="true"></span>');valueEl.addClass('md-select-value');if(!valueEl[0].hasAttribute('id')){valueEl.attr('id','select_value_label_'+$mdUtil.nextUid());}
var mdContentEl=element.find('md-content');if(!mdContentEl.length){element.append(angular.element('<md-content>').append(element.contents()));}
mdContentEl.attr('role','presentation');if(attr.mdOnOpen){element.find('md-content').prepend(angular.element('<div>'+' <md-progress-circular md-mode="indeterminate" ng-if="$$loadingAsyncDone === false" md-diameter="25px"></md-progress-circular>'+'</div>'));element.find('md-option').attr('ng-show','$$loadingAsyncDone');}
if(attr.name){var autofillClone=angular.element('<select class="md-visually-hidden">');autofillClone.attr({'name':attr.name,'aria-hidden':'true','tabindex':'-1'});var opts=element.find('md-option');angular.forEach(opts,function(el){var newEl=angular.element('<option>'+el.innerHTML+'</option>');if(el.hasAttribute('ng-value'))newEl.attr('ng-value',el.getAttribute('ng-value'));else if(el.hasAttribute('value'))newEl.attr('value',el.getAttribute('value'));autofillClone.append(newEl);});autofillClone.append('<option ng-value="'+attr.ngModel+'" selected></option>');element.parent().append(autofillClone);}
var isMultiple=$mdUtil.parseAttributeBoolean(attr.multiple);var multipleContent=isMultiple?'multiple':'';var selectTemplate=''+'<div class="md-select-menu-container" aria-hidden="true" role="presentation">'+'<md-select-menu role="presentation" {0}>{1}</md-select-menu>'+'</div>';selectTemplate=$mdUtil.supplant(selectTemplate,[multipleContent,element.html()]);element.empty().append(valueEl);element.append(selectTemplate);if(!attr.tabindex){attr.$set('tabindex',0);}
return function postLink(scope,element,attr,ctrls){var untouched=true;var isDisabled,ariaLabelBase;var containerCtrl=ctrls[0];var mdSelectCtrl=ctrls[1];var ngModelCtrl=ctrls[2];var formCtrl=ctrls[3];var valueEl=element.find('md-select-value');var isReadonly=angular.isDefined(attr.readonly);var disableAsterisk=$mdUtil.parseAttributeBoolean(attr.mdNoAsterisk);if(disableAsterisk){element.addClass('md-no-asterisk');}
if(containerCtrl){var isErrorGetter=containerCtrl.isErrorGetter||function(){return ngModelCtrl.$invalid&&(ngModelCtrl.$touched||(formCtrl&&formCtrl.$submitted));};if(containerCtrl.input){if(element.find('md-select-header').find('input')[0]!==containerCtrl.input[0]){throw new Error("<md-input-container> can only have *one* child <input>, <textarea> or <select> element!");}}
containerCtrl.input=element;if(!containerCtrl.label){$mdAria.expect(element,'aria-label',element.attr('placeholder'));}
scope.$watch(isErrorGetter,containerCtrl.setInvalid);}
var selectContainer,selectScope,selectMenuCtrl;findSelectContainer();$mdTheming(element);if(formCtrl&&angular.isDefined(attr.multiple)){$mdUtil.nextTick(function(){var hasModelValue=ngModelCtrl.$modelValue||ngModelCtrl.$viewValue;if(hasModelValue){formCtrl.$setPristine();}});}
var originalRender=ngModelCtrl.$render;ngModelCtrl.$render=function(){originalRender();syncLabelText();syncAriaLabel();inputCheckValue();};attr.$observe('placeholder',ngModelCtrl.$render);if(containerCtrl&&containerCtrl.label){attr.$observe('required',function(value){containerCtrl.label.toggleClass('md-required',value&&!disableAsterisk);});}
mdSelectCtrl.setLabelText=function(text){mdSelectCtrl.setIsPlaceholder(!text);var isSelectLabelFromUser=false;if(attr.mdSelectedText&&attr.mdSelectedHtml){throw Error('md-select cannot have both `md-selected-text` and `md-selected-html`');}
if(attr.mdSelectedText||attr.mdSelectedHtml){text=$parse(attr.mdSelectedText||attr.mdSelectedHtml)(scope);isSelectLabelFromUser=true;}else if(!text){var tmpPlaceholder=attr.placeholder||(containerCtrl&&containerCtrl.label?containerCtrl.label.text():'');text=tmpPlaceholder||'';isSelectLabelFromUser=true;}
var target=valueEl.children().eq(0);if(attr.mdSelectedHtml){target.html($sce.getTrustedHtml(text));}else if(isSelectLabelFromUser){target.text(text);}else{target.html(text);}};mdSelectCtrl.setIsPlaceholder=function(isPlaceholder){if(isPlaceholder){valueEl.addClass('md-select-placeholder');if(containerCtrl&&containerCtrl.label){containerCtrl.label.addClass('md-placeholder');}}else{valueEl.removeClass('md-select-placeholder');if(containerCtrl&&containerCtrl.label){containerCtrl.label.removeClass('md-placeholder');}}};if(!isReadonly){element.on('focus',function(ev){containerCtrl&&containerCtrl.setFocused(true);});element.on('blur',function(event){if(untouched){untouched=false;if(selectScope._mdSelectIsOpen){event.stopImmediatePropagation();}}
if(selectScope._mdSelectIsOpen)return;containerCtrl&&containerCtrl.setFocused(false);inputCheckValue();});}
mdSelectCtrl.triggerClose=function(){$parse(attr.mdOnClose)(scope);};scope.$$postDigest(function(){initAriaLabel();syncLabelText();syncAriaLabel();});function initAriaLabel(){var labelText=element.attr('aria-label')||element.attr('placeholder');if(!labelText&&containerCtrl&&containerCtrl.label){labelText=containerCtrl.label.text();}
ariaLabelBase=labelText;$mdAria.expect(element,'aria-label',labelText);}
scope.$watch(function(){return selectMenuCtrl.selectedLabels();},syncLabelText);function syncLabelText(){if(selectContainer){selectMenuCtrl=selectMenuCtrl||selectContainer.find('md-select-menu').controller('mdSelectMenu');mdSelectCtrl.setLabelText(selectMenuCtrl.selectedLabels());}}
function syncAriaLabel(){if(!ariaLabelBase)return;var ariaLabels=selectMenuCtrl.selectedLabels({mode:'aria'});element.attr('aria-label',ariaLabels.length?ariaLabelBase+': '+ariaLabels:ariaLabelBase);}
var deregisterWatcher;attr.$observe('ngMultiple',function(val){if(deregisterWatcher)deregisterWatcher();var parser=$parse(val);deregisterWatcher=scope.$watch(function(){return parser(scope);},function(multiple,prevVal){if(multiple===undefined&&prevVal===undefined)return;if(multiple){element.attr('multiple','multiple');}else{element.removeAttr('multiple');}
element.attr('aria-multiselectable',multiple?'true':'false');if(selectContainer){selectMenuCtrl.setMultiple(multiple);originalRender=ngModelCtrl.$render;ngModelCtrl.$render=function(){originalRender();syncLabelText();syncAriaLabel();inputCheckValue();};ngModelCtrl.$render();}});});attr.$observe('disabled',function(disabled){if(angular.isString(disabled)){disabled=true;}
if(isDisabled!==undefined&&isDisabled===disabled){return;}
isDisabled=disabled;if(disabled){element.attr({'aria-disabled':'true'}).removeAttr('tabindex').off('click',openSelect).off('keydown',handleKeypress);}else{element.attr({'tabindex':attr.tabindex,'aria-disabled':'false'}).on('click',openSelect).on('keydown',handleKeypress);}});if(!attr.hasOwnProperty('disabled')&&!attr.hasOwnProperty('ngDisabled')){element.attr({'aria-disabled':'false'});element.on('click',openSelect);element.on('keydown',handleKeypress);}
var ariaAttrs={role:'listbox','aria-expanded':'false','aria-multiselectable':isMultiple&&!attr.ngMultiple?'true':'false'};if(!element[0].hasAttribute('id')){ariaAttrs.id='select_'+$mdUtil.nextUid();}
var containerId='select_container_'+$mdUtil.nextUid();selectContainer.attr('id',containerId);if(!element.find('md-select-menu').length){ariaAttrs['aria-owns']=containerId;}
element.attr(ariaAttrs);scope.$on('$destroy',function(){$mdSelect.destroy().finally(function(){if(containerCtrl){containerCtrl.setFocused(false);containerCtrl.setHasValue(false);containerCtrl.input=null;}
ngModelCtrl.$setTouched();});});function inputCheckValue(){containerCtrl&&containerCtrl.setHasValue(selectMenuCtrl.selectedLabels().length>0||(element[0].validity||{}).badInput);}
function findSelectContainer(){selectContainer=angular.element(element[0].querySelector('.md-select-menu-container'));selectScope=scope;if(attr.mdContainerClass){var value=selectContainer[0].getAttribute('class')+' '+attr.mdContainerClass;selectContainer[0].setAttribute('class',value);}
selectMenuCtrl=selectContainer.find('md-select-menu').controller('mdSelectMenu');selectMenuCtrl.init(ngModelCtrl,attr.ngModel);element.on('$destroy',function(){selectContainer.remove();});}
function handleKeypress(e){if($mdConstant.isNavigationKey(e)){e.preventDefault();openSelect(e);}else{if(shouldHandleKey(e,$mdConstant)){e.preventDefault();var node=selectMenuCtrl.optNodeForKeyboardSearch(e);if(!node||node.hasAttribute('disabled'))return;var optionCtrl=angular.element(node).controller('mdOption');if(!selectMenuCtrl.isMultiple){selectMenuCtrl.deselect(Object.keys(selectMenuCtrl.selected)[0]);}
selectMenuCtrl.select(optionCtrl.hashKey,optionCtrl.value);selectMenuCtrl.refreshViewValue();}}}
function openSelect(){selectScope._mdSelectIsOpen=true;element.attr('aria-expanded','true');$mdSelect.show({scope:selectScope,preserveScope:true,skipCompile:true,element:selectContainer,target:element[0],selectCtrl:mdSelectCtrl,preserveElement:true,hasBackdrop:true,loadingAsync:attr.mdOnOpen?scope.$eval(attr.mdOnOpen)||true:false}).finally(function(){selectScope._mdSelectIsOpen=false;element.focus();element.attr('aria-expanded','false');ngModelCtrl.$setTouched();});}};}}
function SelectMenuDirective($parse,$mdUtil,$mdConstant,$mdTheming){SelectMenuController.$inject=["$scope","$attrs","$element"];return{restrict:'E',require:['mdSelectMenu'],scope:false,controller:SelectMenuController,link:{pre:preLink}};function preLink(scope,element,attr,ctrls){var selectCtrl=ctrls[0];element.addClass('_md');$mdTheming(element);element.on('click',clickListener);element.on('keypress',keyListener);function keyListener(e){if(e.keyCode==13||e.keyCode==32){clickListener(e);}}
function clickListener(ev){var option=$mdUtil.getClosest(ev.target,'md-option');var optionCtrl=option&&angular.element(option).data('$mdOptionController');if(!option||!optionCtrl)return;if(option.hasAttribute('disabled')){ev.stopImmediatePropagation();return false;}
var optionHashKey=selectCtrl.hashGetter(optionCtrl.value);var isSelected=angular.isDefined(selectCtrl.selected[optionHashKey]);scope.$apply(function(){if(selectCtrl.isMultiple){if(isSelected){selectCtrl.deselect(optionHashKey);}else{selectCtrl.select(optionHashKey,optionCtrl.value);}}else{if(!isSelected){selectCtrl.deselect(Object.keys(selectCtrl.selected)[0]);selectCtrl.select(optionHashKey,optionCtrl.value);}}
selectCtrl.refreshViewValue();});}}
function SelectMenuController($scope,$attrs,$element){var self=this;self.isMultiple=angular.isDefined($attrs.multiple);self.selected={};self.options={};$scope.$watchCollection(function(){return self.options;},function(){self.ngModel.$render();});var deregisterCollectionWatch;var defaultIsEmpty;self.setMultiple=function(isMultiple){var ngModel=self.ngModel;defaultIsEmpty=defaultIsEmpty||ngModel.$isEmpty;self.isMultiple=isMultiple;if(deregisterCollectionWatch)deregisterCollectionWatch();if(self.isMultiple){ngModel.$validators['md-multiple']=validateArray;ngModel.$render=renderMultiple;$scope.$watchCollection(self.modelBinding,function(value){if(validateArray(value))renderMultiple(value);self.ngModel.$setPristine();});ngModel.$isEmpty=function(value){return!value||value.length===0;};}else{delete ngModel.$validators['md-multiple'];ngModel.$render=renderSingular;}
function validateArray(modelValue,viewValue){return angular.isArray(modelValue||viewValue||[]);}};var searchStr='';var clearSearchTimeout,optNodes,optText;var CLEAR_SEARCH_AFTER=300;self.optNodeForKeyboardSearch=function(e){clearSearchTimeout&&clearTimeout(clearSearchTimeout);clearSearchTimeout=setTimeout(function(){clearSearchTimeout=undefined;searchStr='';optText=undefined;optNodes=undefined;},CLEAR_SEARCH_AFTER);var keyCode=e.keyCode-($mdConstant.isNumPadKey(e)?48:0);searchStr+=String.fromCharCode(keyCode);var search=new RegExp('^'+searchStr,'i');if(!optNodes){optNodes=$element.find('md-option');optText=new Array(optNodes.length);angular.forEach(optNodes,function(el,i){optText[i]=el.textContent.trim();});}
for(var i=0;i<optText.length;++i){if(search.test(optText[i])){return optNodes[i];}}};self.init=function(ngModel,binding){self.ngModel=ngModel;self.modelBinding=binding;self.ngModel.$isEmpty=function($viewValue){return!self.options[self.hashGetter($viewValue)];};var trackByOption=$mdUtil.getModelOption(ngModel,'trackBy');if(trackByOption){var trackByLocals={};var trackByParsed=$parse(trackByOption);self.hashGetter=function(value,valueScope){trackByLocals.$value=value;return trackByParsed(valueScope||$scope,trackByLocals);};}else{self.hashGetter=function getHashValue(value){if(angular.isObject(value)){return'object_'+(value.$$mdSelectId||(value.$$mdSelectId=++selectNextId));}
return value;};}
self.setMultiple(self.isMultiple);};self.selectedLabels=function(opts){opts=opts||{};var mode=opts.mode||'html';var selectedOptionEls=$mdUtil.nodesToArray($element[0].querySelectorAll('md-option[selected]'));if(selectedOptionEls.length){var mapFn;if(mode=='html'){mapFn=function(el){if(el.hasAttribute('md-option-empty')){return'';}
var html=el.innerHTML;var rippleContainer=el.querySelector('.md-ripple-container');if(rippleContainer){html=html.replace(rippleContainer.outerHTML,'');}
var checkboxContainer=el.querySelector('.md-container');if(checkboxContainer){html=html.replace(checkboxContainer.outerHTML,'');}
return html;};}else if(mode=='aria'){mapFn=function(el){return el.hasAttribute('aria-label')?el.getAttribute('aria-label'):el.textContent;};}
return $mdUtil.uniq(selectedOptionEls.map(mapFn)).join(', ');}else{return'';}};self.select=function(hashKey,hashedValue){var option=self.options[hashKey];option&&option.setSelected(true);self.selected[hashKey]=hashedValue;};self.deselect=function(hashKey){var option=self.options[hashKey];option&&option.setSelected(false);delete self.selected[hashKey];};self.addOption=function(hashKey,optionCtrl){if(angular.isDefined(self.options[hashKey])){throw new Error('Duplicate md-option values are not allowed in a select. '+'Duplicate value "'+optionCtrl.value+'" found.');}
self.options[hashKey]=optionCtrl;if(angular.isDefined(self.selected[hashKey])){self.select(hashKey,optionCtrl.value);if(angular.isDefined(self.ngModel.$modelValue)&&self.hashGetter(self.ngModel.$modelValue)===hashKey){self.ngModel.$validate();}
self.refreshViewValue();}};self.removeOption=function(hashKey){delete self.options[hashKey];};self.refreshViewValue=function(){var values=[];var option;for(var hashKey in self.selected){if((option=self.options[hashKey])){values.push(option.value);}else{values.push(self.selected[hashKey]);}}
var usingTrackBy=$mdUtil.getModelOption(self.ngModel,'trackBy');var newVal=self.isMultiple?values:values[0];var prevVal=self.ngModel.$modelValue;if(usingTrackBy?!angular.equals(prevVal,newVal):(prevVal+'')!==newVal){self.ngModel.$setViewValue(newVal);self.ngModel.$render();}};function renderMultiple(){var newSelectedValues=self.ngModel.$modelValue||self.ngModel.$viewValue||[];if(!angular.isArray(newSelectedValues))return;var oldSelected=Object.keys(self.selected);var newSelectedHashes=newSelectedValues.map(self.hashGetter);var deselected=oldSelected.filter(function(hash){return newSelectedHashes.indexOf(hash)===-1;});deselected.forEach(self.deselect);newSelectedHashes.forEach(function(hashKey,i){self.select(hashKey,newSelectedValues[i]);});}
function renderSingular(){var value=self.ngModel.$viewValue||self.ngModel.$modelValue;Object.keys(self.selected).forEach(self.deselect);self.select(self.hashGetter(value),value);}}}
function OptionDirective($mdButtonInkRipple,$mdUtil,$mdTheming){OptionController.$inject=["$element"];return{restrict:'E',require:['mdOption','^^mdSelectMenu'],controller:OptionController,compile:compile};function compile(element,attr){element.append(angular.element('<div class="md-text">').append(element.contents()));element.attr('tabindex',attr.tabindex||'0');if(!hasDefinedValue(attr)){element.attr('md-option-empty','');}
return postLink;}
function hasDefinedValue(attr){var value=attr.value;var ngValue=attr.ngValue;return value||ngValue;}
function postLink(scope,element,attr,ctrls){var optionCtrl=ctrls[0];var selectCtrl=ctrls[1];$mdTheming(element);if(selectCtrl.isMultiple){element.addClass('md-checkbox-enabled');element.prepend(CHECKBOX_SELECTION_INDICATOR.clone());}
if(angular.isDefined(attr.ngValue)){scope.$watch(attr.ngValue,setOptionValue);}else if(angular.isDefined(attr.value)){setOptionValue(attr.value);}else{scope.$watch(function(){return element.text().trim();},setOptionValue);}
attr.$observe('disabled',function(disabled){if(disabled){element.attr('tabindex','-1');}else{element.attr('tabindex','0');}});scope.$$postDigest(function(){attr.$observe('selected',function(selected){if(!angular.isDefined(selected))return;if(typeof selected=='string')selected=true;if(selected){if(!selectCtrl.isMultiple){selectCtrl.deselect(Object.keys(selectCtrl.selected)[0]);}
selectCtrl.select(optionCtrl.hashKey,optionCtrl.value);}else{selectCtrl.deselect(optionCtrl.hashKey);}
selectCtrl.refreshViewValue();});});$mdButtonInkRipple.attach(scope,element);configureAria();function setOptionValue(newValue,oldValue,prevAttempt){if(!selectCtrl.hashGetter){if(!prevAttempt){scope.$$postDigest(function(){setOptionValue(newValue,oldValue,true);});}
return;}
var oldHashKey=selectCtrl.hashGetter(oldValue,scope);var newHashKey=selectCtrl.hashGetter(newValue,scope);optionCtrl.hashKey=newHashKey;optionCtrl.value=newValue;selectCtrl.removeOption(oldHashKey,optionCtrl);selectCtrl.addOption(newHashKey,optionCtrl);}
scope.$on('$destroy',function(){selectCtrl.removeOption(optionCtrl.hashKey,optionCtrl);});function configureAria(){var ariaAttrs={'role':'option','aria-selected':'false'};if(!element[0].hasAttribute('id')){ariaAttrs.id='select_option_'+$mdUtil.nextUid();}
element.attr(ariaAttrs);}}
function OptionController($element){this.selected=false;this.setSelected=function(isSelected){if(isSelected&&!this.selected){$element.attr({'selected':'selected','aria-selected':'true'});}else if(!isSelected&&this.selected){$element.removeAttr('selected');$element.attr('aria-selected','false');}
this.selected=isSelected;};}}
function OptgroupDirective(){return{restrict:'E',compile:compile};function compile(el,attrs){if(!hasSelectHeader()){setupLabelElement();}
function hasSelectHeader(){return el.parent().find('md-select-header').length;}
function setupLabelElement(){var labelElement=el.find('label');if(!labelElement.length){labelElement=angular.element('<label>');el.prepend(labelElement);}
labelElement.addClass('md-container-ignore');labelElement.attr('aria-hidden','true');if(attrs.label)labelElement.text(attrs.label);}}}
function SelectHeaderDirective(){return{restrict:'E',};}
function SelectProvider($$interimElementProvider){selectDefaultOptions.$inject=["$mdSelect","$mdConstant","$mdUtil","$window","$q","$$rAF","$animateCss","$animate","$document"];return $$interimElementProvider('$mdSelect').setDefaults({methods:['target'],options:selectDefaultOptions});function selectDefaultOptions($mdSelect,$mdConstant,$mdUtil,$window,$q,$$rAF,$animateCss,$animate,$document){var ERROR_TARGET_EXPECTED="$mdSelect.show() expected a target element in options.target but got '{0}'!";var animator=$mdUtil.dom.animator;var keyCodes=$mdConstant.KEY_CODE;return{parent:'body',themable:true,onShow:onShow,onRemove:onRemove,hasBackdrop:true,disableParentScroll:true};function onRemove(scope,element,opts){var animationRunner=null;var destroyListener=scope.$on('$destroy',function(){animationRunner.end();});opts=opts||{};opts.cleanupInteraction();opts.cleanupResizing();opts.hideBackdrop();return(opts.$destroy===true)?cleanElement():animateRemoval().then(cleanElement);function animateRemoval(){animationRunner=$animateCss(element,{addClass:'md-leave'});return animationRunner.start();}
function cleanElement(){destroyListener();element.removeClass('md-active').attr('aria-hidden','true').css('display','none');element.parent().find('md-select-value').removeAttr('aria-hidden');announceClosed(opts);if(!opts.$destroy&&opts.restoreFocus){opts.target.focus();}}}
function onShow(scope,element,opts){watchAsyncLoad();sanitizeAndConfigure(scope,opts);opts.hideBackdrop=showBackdrop(scope,element,opts);return showDropDown(scope,element,opts).then(function(response){element.attr('aria-hidden','false');opts.alreadyOpen=true;opts.cleanupInteraction=activateInteraction();opts.cleanupResizing=activateResizing();autoFocus(opts.focusedNode);return response;},opts.hideBackdrop);function showDropDown(scope,element,opts){if(opts.parent!==element.parent()){element.parent().attr('aria-owns',element.attr('id'));}
element.parent().find('md-select-value').attr('aria-hidden','true');opts.parent.append(element);return $q(function(resolve,reject){try{$animateCss(element,{removeClass:'md-leave',duration:0}).start().then(positionAndFocusMenu).then(resolve);}catch(e){reject(e);}});}
function positionAndFocusMenu(){return $q(function(resolve){if(opts.isRemoved)return $q.reject(false);var info=calculateMenuPositions(scope,element,opts);info.container.element.css(animator.toCss(info.container.styles));info.dropDown.element.css(animator.toCss(info.dropDown.styles));$$rAF(function(){element.addClass('md-active');info.dropDown.element.css(animator.toCss({transform:''}));resolve();});});}
function showBackdrop(scope,element,options){if(options.disableParentScroll&&!$mdUtil.getClosest(options.target,'MD-DIALOG')){options.restoreScroll=$mdUtil.disableScrollAround(options.element,options.parent);}else{options.disableParentScroll=false;}
if(options.hasBackdrop){options.backdrop=$mdUtil.createBackdrop(scope,"md-select-backdrop md-click-catcher");$animate.enter(options.backdrop,$document[0].body,null,{duration:0});}
return function hideBackdrop(){if(options.backdrop)options.backdrop.remove();if(options.disableParentScroll)options.restoreScroll();delete options.restoreScroll;};}
function autoFocus(focusedNode){if(focusedNode&&!focusedNode.hasAttribute('disabled')){focusedNode.focus();}}
function sanitizeAndConfigure(scope,options){var selectEl=element.find('md-select-menu');if(!options.target){throw new Error($mdUtil.supplant(ERROR_TARGET_EXPECTED,[options.target]));}
angular.extend(options,{isRemoved:false,target:angular.element(options.target),parent:angular.element(options.parent),selectEl:selectEl,contentEl:element.find('md-content'),optionNodes:selectEl[0].getElementsByTagName('md-option')});}
function activateResizing(){var debouncedOnResize=(function(scope,target,options){return function(){if(options.isRemoved)return;var updates=calculateMenuPositions(scope,target,options);var container=updates.container;var dropDown=updates.dropDown;container.element.css(animator.toCss(container.styles));dropDown.element.css(animator.toCss(dropDown.styles));};})(scope,element,opts);var window=angular.element($window);window.on('resize',debouncedOnResize);window.on('orientationchange',debouncedOnResize);return function deactivateResizing(){window.off('resize',debouncedOnResize);window.off('orientationchange',debouncedOnResize);};}
function watchAsyncLoad(){if(opts.loadingAsync&&!opts.isRemoved){scope.$$loadingAsyncDone=false;$q.when(opts.loadingAsync).then(function(){scope.$$loadingAsyncDone=true;delete opts.loadingAsync;}).then(function(){$$rAF(positionAndFocusMenu);});}}
function activateInteraction(){if(opts.isRemoved)return;var dropDown=opts.selectEl;var selectCtrl=dropDown.controller('mdSelectMenu')||{};element.addClass('md-clickable');opts.backdrop&&opts.backdrop.on('click',onBackdropClick);dropDown.on('keydown',onMenuKeyDown);dropDown.on('click',checkCloseMenu);return function cleanupInteraction(){opts.backdrop&&opts.backdrop.off('click',onBackdropClick);dropDown.off('keydown',onMenuKeyDown);dropDown.off('click',checkCloseMenu);element.removeClass('md-clickable');opts.isRemoved=true;};function onBackdropClick(e){e.preventDefault();e.stopPropagation();opts.restoreFocus=false;$mdUtil.nextTick($mdSelect.hide,true);}
function onMenuKeyDown(ev){ev.preventDefault();ev.stopPropagation();switch(ev.keyCode){case keyCodes.UP_ARROW:return focusPrevOption();case keyCodes.DOWN_ARROW:return focusNextOption();case keyCodes.SPACE:case keyCodes.ENTER:var option=$mdUtil.getClosest(ev.target,'md-option');if(option){dropDown.triggerHandler({type:'click',target:option});ev.preventDefault();}
checkCloseMenu(ev);break;case keyCodes.TAB:case keyCodes.ESCAPE:ev.stopPropagation();ev.preventDefault();opts.restoreFocus=true;$mdUtil.nextTick($mdSelect.hide,true);break;default:if(shouldHandleKey(ev,$mdConstant)){var optNode=dropDown.controller('mdSelectMenu').optNodeForKeyboardSearch(ev);opts.focusedNode=optNode||opts.focusedNode;optNode&&optNode.focus();}}}
function focusOption(direction){var optionsArray=$mdUtil.nodesToArray(opts.optionNodes);var index=optionsArray.indexOf(opts.focusedNode);var newOption;do{if(index===-1){index=0;}else if(direction==='next'&&index<optionsArray.length-1){index++;}else if(direction==='prev'&&index>0){index--;}
newOption=optionsArray[index];if(newOption.hasAttribute('disabled'))newOption=undefined;}while(!newOption&&index<optionsArray.length-1&&index>0);newOption&&newOption.focus();opts.focusedNode=newOption;}
function focusNextOption(){focusOption('next');}
function focusPrevOption(){focusOption('prev');}
function checkCloseMenu(ev){if(ev&&(ev.type=='click')&&(ev.currentTarget!=dropDown[0]))return;if(mouseOnScrollbar())return;var option=$mdUtil.getClosest(ev.target,'md-option');if(option&&option.hasAttribute&&!option.hasAttribute('disabled')){ev.preventDefault();ev.stopPropagation();if(!selectCtrl.isMultiple){opts.restoreFocus=true;$mdUtil.nextTick(function(){$mdSelect.hide(selectCtrl.ngModel.$viewValue);},true);}}
function mouseOnScrollbar(){var clickOnScrollbar=false;if(ev&&(ev.currentTarget.children.length>0)){var child=ev.currentTarget.children[0];var hasScrollbar=child.scrollHeight>child.clientHeight;if(hasScrollbar&&child.children.length>0){var relPosX=ev.pageX-ev.currentTarget.getBoundingClientRect().left;if(relPosX>child.querySelector('md-option').offsetWidth)
clickOnScrollbar=true;}}
return clickOnScrollbar;}}}}
function announceClosed(opts){var mdSelect=opts.selectCtrl;if(mdSelect){var menuController=opts.selectEl.controller('mdSelectMenu');mdSelect.setLabelText(menuController?menuController.selectedLabels():'');mdSelect.triggerClose();}}
function calculateMenuPositions(scope,element,opts){var
containerNode=element[0],targetNode=opts.target[0].children[0],parentNode=$document[0].body,selectNode=opts.selectEl[0],contentNode=opts.contentEl[0],parentRect=parentNode.getBoundingClientRect(),targetRect=targetNode.getBoundingClientRect(),shouldOpenAroundTarget=false,bounds={left:parentRect.left+SELECT_EDGE_MARGIN,top:SELECT_EDGE_MARGIN,bottom:parentRect.height-SELECT_EDGE_MARGIN,right:parentRect.width-SELECT_EDGE_MARGIN-($mdUtil.floatingScrollbars()?16:0)},spaceAvailable={top:targetRect.top-bounds.top,left:targetRect.left-bounds.left,right:bounds.right-(targetRect.left+targetRect.width),bottom:bounds.bottom-(targetRect.top+targetRect.height)},maxWidth=parentRect.width-SELECT_EDGE_MARGIN*2,selectedNode=selectNode.querySelector('md-option[selected]'),optionNodes=selectNode.getElementsByTagName('md-option'),optgroupNodes=selectNode.getElementsByTagName('md-optgroup'),isScrollable=calculateScrollable(element,contentNode),centeredNode;var loading=isPromiseLike(opts.loadingAsync);if(!loading){if(selectedNode){centeredNode=selectedNode;}else if(optgroupNodes.length){centeredNode=optgroupNodes[0];}else if(optionNodes.length){centeredNode=optionNodes[0];}else{centeredNode=contentNode.firstElementChild||contentNode;}}else{centeredNode=contentNode.firstElementChild||contentNode;}
if(contentNode.offsetWidth>maxWidth){contentNode.style['max-width']=maxWidth+'px';}else{contentNode.style.maxWidth=null;}
if(shouldOpenAroundTarget){contentNode.style['min-width']=targetRect.width+'px';}
if(isScrollable){selectNode.classList.add('md-overflow');}
var focusedNode=centeredNode;if((focusedNode.tagName||'').toUpperCase()==='MD-OPTGROUP'){focusedNode=optionNodes[0]||contentNode.firstElementChild||contentNode;centeredNode=focusedNode;}
opts.focusedNode=focusedNode;containerNode.style.display='block';var selectMenuRect=selectNode.getBoundingClientRect();var centeredRect=getOffsetRect(centeredNode);if(centeredNode){var centeredStyle=$window.getComputedStyle(centeredNode);centeredRect.paddingLeft=parseInt(centeredStyle.paddingLeft,10)||0;centeredRect.paddingRight=parseInt(centeredStyle.paddingRight,10)||0;}
if(isScrollable){var scrollBuffer=contentNode.offsetHeight/2;contentNode.scrollTop=centeredRect.top+centeredRect.height/2-scrollBuffer;if(spaceAvailable.top<scrollBuffer){contentNode.scrollTop=Math.min(centeredRect.top,contentNode.scrollTop+scrollBuffer-spaceAvailable.top);}else if(spaceAvailable.bottom<scrollBuffer){contentNode.scrollTop=Math.max(centeredRect.top+centeredRect.height-selectMenuRect.height,contentNode.scrollTop-scrollBuffer+spaceAvailable.bottom);}}
var left,top,transformOrigin,minWidth,fontSize;if(shouldOpenAroundTarget){left=targetRect.left;top=targetRect.top+targetRect.height;transformOrigin='50% 0';if(top+selectMenuRect.height>bounds.bottom){top=targetRect.top-selectMenuRect.height;transformOrigin='50% 100%';}}else{left=(targetRect.left+centeredRect.left-centeredRect.paddingLeft)+2;top=Math.floor(targetRect.top+targetRect.height/2-centeredRect.height/2-
centeredRect.top+contentNode.scrollTop)+2;transformOrigin=(centeredRect.left+targetRect.width/2)+'px '+
(centeredRect.top+centeredRect.height/2-contentNode.scrollTop)+'px 0px';minWidth=Math.min(targetRect.width+centeredRect.paddingLeft+centeredRect.paddingRight,maxWidth);fontSize=window.getComputedStyle(targetNode)['font-size'];}
var containerRect=containerNode.getBoundingClientRect();var scaleX=Math.round(100*Math.min(targetRect.width/selectMenuRect.width,1.0))/100;var scaleY=Math.round(100*Math.min(targetRect.height/selectMenuRect.height,1.0))/100;return{container:{element:angular.element(containerNode),styles:{left:Math.floor(clamp(bounds.left,left,bounds.right-containerRect.width)),top:Math.floor(clamp(bounds.top,top,bounds.bottom-containerRect.height)),'min-width':minWidth,'font-size':fontSize}},dropDown:{element:angular.element(selectNode),styles:{transformOrigin:transformOrigin,transform:!opts.alreadyOpen?$mdUtil.supplant('scale({0},{1})',[scaleX,scaleY]):""}}};}}
function isPromiseLike(obj){return obj&&angular.isFunction(obj.then);}
function clamp(min,n,max){return Math.max(min,Math.min(n,max));}
function getOffsetRect(node){return node?{left:node.offsetLeft,top:node.offsetTop,width:node.offsetWidth,height:node.offsetHeight}:{left:0,top:0,width:0,height:0};}
function calculateScrollable(element,contentNode){var isScrollable=false;try{var oldDisplay=element[0].style.display;element[0].style.display='block';isScrollable=contentNode.scrollHeight>contentNode.offsetHeight;element[0].style.display=oldDisplay;}finally{}
return isScrollable;}}
function shouldHandleKey(ev,$mdConstant){var char=String.fromCharCode(ev.keyCode);var isNonUsefulKey=(ev.keyCode<=31);return(char&&char.length&&!isNonUsefulKey&&!$mdConstant.isMetaKey(ev)&&!$mdConstant.isFnLockKey(ev)&&!$mdConstant.hasModifierKey(ev));}})();(function(){"use strict";angular.module('material.components.showHide',['material.core']).directive('ngShow',createDirective('ngShow',true)).directive('ngHide',createDirective('ngHide',false));function createDirective(name,targetValue){return['$mdUtil','$window',function($mdUtil,$window){return{restrict:'A',multiElement:true,link:function($scope,$element,$attr){var unregister=$scope.$on('$md-resize-enable',function(){unregister();var node=$element[0];var cachedTransitionStyles=node.nodeType===$window.Node.ELEMENT_NODE?$window.getComputedStyle(node):{};$scope.$watch($attr[name],function(value){if(!!value===targetValue){$mdUtil.nextTick(function(){$scope.$broadcast('$md-resize');});var opts={cachedTransitionStyles:cachedTransitionStyles};$mdUtil.dom.animator.waitTransitionEnd($element,opts).then(function(){$scope.$broadcast('$md-resize');});}});});}};}];}})();(function(){"use strict";SidenavService.$inject=["$mdComponentRegistry","$mdUtil","$q","$log"];SidenavDirective.$inject=["$mdMedia","$mdUtil","$mdConstant","$mdTheming","$mdInteraction","$animate","$compile","$parse","$log","$q","$document","$window","$$rAF"];SidenavController.$inject=["$scope","$attrs","$mdComponentRegistry","$q","$interpolate"];angular.module('material.components.sidenav',['material.core','material.components.backdrop']).factory('$mdSidenav',SidenavService).directive('mdSidenav',SidenavDirective).directive('mdSidenavFocus',SidenavFocusDirective).controller('$mdSidenavController',SidenavController);function SidenavService($mdComponentRegistry,$mdUtil,$q,$log){var errorMsg="SideNav '{0}' is not available! Did you use md-component-id='{0}'?";var service={find:findInstance,waitFor:waitForInstance};return function(handle,enableWait){if(angular.isUndefined(handle))return service;var shouldWait=enableWait===true;var instance=service.find(handle,shouldWait);return!instance&&shouldWait?service.waitFor(handle):!instance&&angular.isUndefined(enableWait)?addLegacyAPI(service,handle):instance;};function addLegacyAPI(service,handle){var falseFn=function(){return false;};var rejectFn=function(){return $q.when($mdUtil.supplant(errorMsg,[handle||""]));};return angular.extend({isLockedOpen:falseFn,isOpen:falseFn,toggle:rejectFn,open:rejectFn,close:rejectFn,onClose:angular.noop,then:function(callback){return waitForInstance(handle).then(callback||angular.noop);}},service);}
function findInstance(handle,shouldWait){var instance=$mdComponentRegistry.get(handle);if(!instance&&!shouldWait){$log.error($mdUtil.supplant(errorMsg,[handle||""]));return undefined;}
return instance;}
function waitForInstance(handle){return $mdComponentRegistry.when(handle).catch($log.error);}}
function SidenavFocusDirective(){return{restrict:'A',require:'^mdSidenav',link:function(scope,element,attr,sidenavCtrl){}};}
function SidenavDirective($mdMedia,$mdUtil,$mdConstant,$mdTheming,$mdInteraction,$animate,$compile,$parse,$log,$q,$document,$window,$$rAF){return{restrict:'E',scope:{isOpen:'=?mdIsOpen'},controller:'$mdSidenavController',compile:function(element){element.addClass('md-closed').attr('tabIndex','-1');return postLink;}};function postLink(scope,element,attr,sidenavCtrl){var lastParentOverFlow;var backdrop;var disableScrollTarget=null;var triggeringInteractionType;var triggeringElement=null;var previousContainerStyles;var promise=$q.when(true);var isLockedOpenParsed=$parse(attr.mdIsLockedOpen);var ngWindow=angular.element($window);var isLocked=function(){return isLockedOpenParsed(scope.$parent,{$media:function(arg){$log.warn("$media is deprecated for is-locked-open. Use $mdMedia instead.");return $mdMedia(arg);},$mdMedia:$mdMedia});};if(attr.mdDisableScrollTarget){disableScrollTarget=$document[0].querySelector(attr.mdDisableScrollTarget);if(disableScrollTarget){disableScrollTarget=angular.element(disableScrollTarget);}else{$log.warn($mdUtil.supplant('mdSidenav: couldn\'t find element matching '+'selector "{selector}". Falling back to parent.',{selector:attr.mdDisableScrollTarget}));}}
if(!disableScrollTarget){disableScrollTarget=element.parent();}
if(!attr.hasOwnProperty('mdDisableBackdrop')){backdrop=$mdUtil.createBackdrop(scope,"md-sidenav-backdrop md-opaque ng-enter");}
element.addClass('_md');$mdTheming(element);if(backdrop)$mdTheming.inherit(backdrop,element);element.on('$destroy',function(){backdrop&&backdrop.remove();sidenavCtrl.destroy();});scope.$on('$destroy',function(){backdrop&&backdrop.remove();});scope.$watch(isLocked,updateIsLocked);scope.$watch('isOpen',updateIsOpen);sidenavCtrl.$toggleOpen=toggleOpen;function updateIsLocked(isLocked,oldValue){scope.isLockedOpen=isLocked;if(isLocked===oldValue){element.toggleClass('md-locked-open',!!isLocked);}else{$animate[isLocked?'addClass':'removeClass'](element,'md-locked-open');}
if(backdrop){backdrop.toggleClass('md-locked-open',!!isLocked);}}
function updateIsOpen(isOpen){var focusEl=$mdUtil.findFocusTarget(element)||$mdUtil.findFocusTarget(element,'[md-sidenav-focus]')||element;var parent=element.parent();parent[isOpen?'on':'off']('keydown',onKeyDown);if(backdrop)backdrop[isOpen?'on':'off']('click',close);var restorePositioning=updateContainerPositions(parent,isOpen);if(isOpen){triggeringElement=$document[0].activeElement;triggeringInteractionType=$mdInteraction.getLastInteractionType();}
disableParentScroll(isOpen);return promise=$q.all([isOpen&&backdrop?$animate.enter(backdrop,parent):backdrop?$animate.leave(backdrop):$q.when(true),$animate[isOpen?'removeClass':'addClass'](element,'md-closed')]).then(function(){if(scope.isOpen){$$rAF(function(){ngWindow.triggerHandler('resize');});focusEl&&focusEl.focus();}
restorePositioning&&restorePositioning();});}
function updateContainerPositions(parent,willOpen){var drawerEl=element[0];var scrollTop=parent[0].scrollTop;if(willOpen&&scrollTop){previousContainerStyles={top:drawerEl.style.top,bottom:drawerEl.style.bottom,height:drawerEl.style.height};var positionStyle={top:scrollTop+'px',bottom:'auto',height:parent[0].clientHeight+'px'};element.css(positionStyle);backdrop.css(positionStyle);}
if(!willOpen&&previousContainerStyles){return function(){drawerEl.style.top=previousContainerStyles.top;drawerEl.style.bottom=previousContainerStyles.bottom;drawerEl.style.height=previousContainerStyles.height;backdrop[0].style.top=null;backdrop[0].style.bottom=null;backdrop[0].style.height=null;previousContainerStyles=null;};}}
function disableParentScroll(disabled){if(disabled&&!lastParentOverFlow){lastParentOverFlow=disableScrollTarget.css('overflow');disableScrollTarget.css('overflow','hidden');}else if(angular.isDefined(lastParentOverFlow)){disableScrollTarget.css('overflow',lastParentOverFlow);lastParentOverFlow=undefined;}}
function toggleOpen(isOpen){if(scope.isOpen==isOpen){return $q.when(true);}else{if(scope.isOpen&&sidenavCtrl.onCloseCb)sidenavCtrl.onCloseCb();return $q(function(resolve){scope.isOpen=isOpen;$mdUtil.nextTick(function(){promise.then(function(result){if(!scope.isOpen&&triggeringElement&&triggeringInteractionType==='keyboard'){triggeringElement.focus();triggeringElement=null;}
resolve(result);});});});}}
function onKeyDown(ev){var isEscape=(ev.keyCode===$mdConstant.KEY_CODE.ESCAPE);return isEscape?close(ev):$q.when(true);}
function close(ev){ev.preventDefault();return sidenavCtrl.close();}}}
function SidenavController($scope,$attrs,$mdComponentRegistry,$q,$interpolate){var self=this;self.isOpen=function(){return!!$scope.isOpen;};self.isLockedOpen=function(){return!!$scope.isLockedOpen;};self.onClose=function(callback){self.onCloseCb=callback;return self;};self.open=function(){return self.$toggleOpen(true);};self.close=function(){return self.$toggleOpen(false);};self.toggle=function(){return self.$toggleOpen(!$scope.isOpen);};self.$toggleOpen=function(value){return $q.when($scope.isOpen=value);};var rawId=$attrs.mdComponentId;var hasDataBinding=rawId&&rawId.indexOf($interpolate.startSymbol())>-1;var componentId=hasDataBinding?$interpolate(rawId)($scope.$parent):rawId;self.destroy=$mdComponentRegistry.register(self,componentId);if(hasDataBinding){$attrs.$observe('mdComponentId',function(id){if(id&&id!==self.$$mdHandle){self.destroy();self.destroy=$mdComponentRegistry.register(self,id);}});}}})();(function(){"use strict";SliderDirective.$inject=["$$rAF","$window","$mdAria","$mdUtil","$mdConstant","$mdTheming","$mdGesture","$parse","$log","$timeout"];angular.module('material.components.slider',['material.core']).directive('mdSlider',SliderDirective).directive('mdSliderContainer',SliderContainerDirective);function SliderContainerDirective(){return{controller:function(){},compile:function(elem){var slider=elem.find('md-slider');if(!slider){return;}
var vertical=slider.attr('md-vertical');if(vertical!==undefined){elem.attr('md-vertical','');}
if(!slider.attr('flex')){slider.attr('flex','');}
return function postLink(scope,element,attr,ctrl){element.addClass('_md');function setDisable(value){element.children().attr('disabled',value);element.find('input').attr('disabled',value);}
var stopDisabledWatch=angular.noop;if(attr.disabled){setDisable(true);}
else if(attr.ngDisabled){stopDisabledWatch=scope.$watch(attr.ngDisabled,function(value){setDisable(value);});}
scope.$on('$destroy',function(){stopDisabledWatch();});var initialMaxWidth;ctrl.fitInputWidthToTextLength=function(length){var input=element[0].querySelector('md-input-container');if(input){var computedStyle=getComputedStyle(input);var minWidth=parseInt(computedStyle.minWidth);var padding=parseInt(computedStyle.padding)*2;initialMaxWidth=initialMaxWidth||parseInt(computedStyle.maxWidth);var newMaxWidth=Math.max(initialMaxWidth,minWidth+padding+(minWidth/2*length));input.style.maxWidth=newMaxWidth+'px';}};};}};}
function SliderDirective($$rAF,$window,$mdAria,$mdUtil,$mdConstant,$mdTheming,$mdGesture,$parse,$log,$timeout){return{scope:{},require:['?ngModel','?^mdSliderContainer'],template:'<div class="md-slider-wrapper">'+'<div class="md-slider-content">'+'<div class="md-track-container">'+'<div class="md-track"></div>'+'<div class="md-track md-track-fill"></div>'+'<div class="md-track-ticks"></div>'+'</div>'+'<div class="md-thumb-container">'+'<div class="md-thumb"></div>'+'<div class="md-focus-thumb"></div>'+'<div class="md-focus-ring"></div>'+'<div class="md-sign">'+'<span class="md-thumb-text"></span>'+'</div>'+'<div class="md-disabled-thumb"></div>'+'</div>'+'</div>'+'</div>',compile:compile};function compile(tElement,tAttrs){var wrapper=angular.element(tElement[0].getElementsByClassName('md-slider-wrapper'));var tabIndex=tAttrs.tabindex||0;wrapper.attr('tabindex',tabIndex);if(tAttrs.disabled||tAttrs.ngDisabled)wrapper.attr('tabindex',-1);wrapper.attr('role','slider');$mdAria.expect(tElement,'aria-label');return postLink;}
function postLink(scope,element,attr,ctrls){$mdTheming(element);var ngModelCtrl=ctrls[0]||{$setViewValue:function(val){this.$viewValue=val;this.$viewChangeListeners.forEach(function(cb){cb();});},$parsers:[],$formatters:[],$viewChangeListeners:[]};var containerCtrl=ctrls[1];var container=angular.element($mdUtil.getClosest(element,'_md-slider-container',true));var isDisabled=attr.ngDisabled?angular.bind(null,$parse(attr.ngDisabled),scope.$parent):function(){return element[0].hasAttribute('disabled');};var thumb=angular.element(element[0].querySelector('.md-thumb'));var thumbText=angular.element(element[0].querySelector('.md-thumb-text'));var thumbContainer=thumb.parent();var trackContainer=angular.element(element[0].querySelector('.md-track-container'));var activeTrack=angular.element(element[0].querySelector('.md-track-fill'));var tickContainer=angular.element(element[0].querySelector('.md-track-ticks'));var wrapper=angular.element(element[0].getElementsByClassName('md-slider-wrapper'));var content=angular.element(element[0].getElementsByClassName('md-slider-content'));var throttledRefreshDimensions=$mdUtil.throttle(refreshSliderDimensions,5000);var DEFAULT_ROUND=3;var vertical=angular.isDefined(attr.mdVertical);var discrete=angular.isDefined(attr.mdDiscrete);var invert=angular.isDefined(attr.mdInvert);angular.isDefined(attr.min)?attr.$observe('min',updateMin):updateMin(0);angular.isDefined(attr.max)?attr.$observe('max',updateMax):updateMax(100);angular.isDefined(attr.step)?attr.$observe('step',updateStep):updateStep(1);angular.isDefined(attr.round)?attr.$observe('round',updateRound):updateRound(DEFAULT_ROUND);var stopDisabledWatch=angular.noop;if(attr.ngDisabled){stopDisabledWatch=scope.$parent.$watch(attr.ngDisabled,updateAriaDisabled);}
$mdGesture.register(wrapper,'drag',{horizontal:!vertical});scope.mouseActive=false;wrapper.on('keydown',keydownListener).on('mousedown',mouseDownListener).on('focus',focusListener).on('blur',blurListener).on('$md.pressdown',onPressDown).on('$md.pressup',onPressUp).on('$md.dragstart',onDragStart).on('$md.drag',onDrag).on('$md.dragend',onDragEnd);function updateAll(){refreshSliderDimensions();ngModelRender();}
setTimeout(updateAll,0);var debouncedUpdateAll=$$rAF.throttle(updateAll);angular.element($window).on('resize',debouncedUpdateAll);scope.$on('$destroy',function(){angular.element($window).off('resize',debouncedUpdateAll);});ngModelCtrl.$render=ngModelRender;ngModelCtrl.$viewChangeListeners.push(ngModelRender);ngModelCtrl.$formatters.push(minMaxValidator);ngModelCtrl.$formatters.push(stepValidator);var min;var max;var step;var round;function updateMin(value){min=parseFloat(value);element.attr('aria-valuemin',value);updateAll();}
function updateMax(value){max=parseFloat(value);element.attr('aria-valuemax',value);updateAll();}
function updateStep(value){step=parseFloat(value);}
function updateRound(value){round=minMaxValidator(parseInt(value),0,6);}
function updateAriaDisabled(){element.attr('aria-disabled',!!isDisabled());}
var tickCanvas,tickCtx;function redrawTicks(){if(!discrete||isDisabled())return;if(angular.isUndefined(step))return;if(step<=0){var msg='Slider step value must be greater than zero when in discrete mode';$log.error(msg);throw new Error(msg);}
var numSteps=Math.floor((max-min)/step);if(!tickCanvas){tickCanvas=angular.element('<canvas>').css('position','absolute');tickContainer.append(tickCanvas);tickCtx=tickCanvas[0].getContext('2d');}
var dimensions=getSliderDimensions();if(dimensions&&!dimensions.height&&!dimensions.width){refreshSliderDimensions();dimensions=sliderDimensions;}
tickCanvas[0].width=dimensions.width;tickCanvas[0].height=dimensions.height;var distance;for(var i=0;i<=numSteps;i++){var trackTicksStyle=$window.getComputedStyle(tickContainer[0]);tickCtx.fillStyle=trackTicksStyle.color||'black';distance=Math.floor((vertical?dimensions.height:dimensions.width)*(i/numSteps));tickCtx.fillRect(vertical?0:distance-1,vertical?distance-1:0,vertical?dimensions.width:2,vertical?2:dimensions.height);}}
function clearTicks(){if(tickCanvas&&tickCtx){var dimensions=getSliderDimensions();tickCtx.clearRect(0,0,dimensions.width,dimensions.height);}}
var sliderDimensions={};refreshSliderDimensions();function refreshSliderDimensions(){sliderDimensions=trackContainer[0].getBoundingClientRect();}
function getSliderDimensions(){throttledRefreshDimensions();return sliderDimensions;}
function keydownListener(ev){if(isDisabled())return;var changeAmount;if(vertical?ev.keyCode===$mdConstant.KEY_CODE.DOWN_ARROW:ev.keyCode===$mdConstant.KEY_CODE.LEFT_ARROW){changeAmount=-step;}else if(vertical?ev.keyCode===$mdConstant.KEY_CODE.UP_ARROW:ev.keyCode===$mdConstant.KEY_CODE.RIGHT_ARROW){changeAmount=step;}
changeAmount=invert?-changeAmount:changeAmount;if(changeAmount){if(ev.metaKey||ev.ctrlKey||ev.altKey){changeAmount*=4;}
ev.preventDefault();ev.stopPropagation();scope.$evalAsync(function(){setModelValue(ngModelCtrl.$viewValue+changeAmount);});}}
function mouseDownListener(){redrawTicks();scope.mouseActive=true;wrapper.removeClass('md-focused');$timeout(function(){scope.mouseActive=false;},100);}
function focusListener(){if(scope.mouseActive===false){wrapper.addClass('md-focused');}}
function blurListener(){wrapper.removeClass('md-focused');element.removeClass('md-active');clearTicks();}
function setModelValue(value){ngModelCtrl.$setViewValue(minMaxValidator(stepValidator(value)));}
function ngModelRender(){if(isNaN(ngModelCtrl.$viewValue)){ngModelCtrl.$viewValue=ngModelCtrl.$modelValue;}
ngModelCtrl.$viewValue=minMaxValidator(ngModelCtrl.$viewValue);var percent=valueToPercent(ngModelCtrl.$viewValue);scope.modelValue=ngModelCtrl.$viewValue;element.attr('aria-valuenow',ngModelCtrl.$viewValue);setSliderPercent(percent);thumbText.text(ngModelCtrl.$viewValue);}
function minMaxValidator(value,minValue,maxValue){if(angular.isNumber(value)){minValue=angular.isNumber(minValue)?minValue:min;maxValue=angular.isNumber(maxValue)?maxValue:max;return Math.max(minValue,Math.min(maxValue,value));}}
function stepValidator(value){if(angular.isNumber(value)){var formattedValue=(Math.round((value-min)/step)*step+min);formattedValue=(Math.round(formattedValue*Math.pow(10,round))/Math.pow(10,round));if(containerCtrl&&containerCtrl.fitInputWidthToTextLength){$mdUtil.debounce(function(){containerCtrl.fitInputWidthToTextLength(formattedValue.toString().length);},100)();}
return formattedValue;}}
function setSliderPercent(percent){percent=clamp(percent);var thumbPosition=(percent*100)+'%';var activeTrackPercent=invert?(1-percent)*100+'%':thumbPosition;if(vertical){thumbContainer.css('bottom',thumbPosition);}
else{$mdUtil.bidiProperty(thumbContainer,'left','right',thumbPosition);}
activeTrack.css(vertical?'height':'width',activeTrackPercent);element.toggleClass((invert?'md-max':'md-min'),percent===0);element.toggleClass((invert?'md-min':'md-max'),percent===1);}
var isDragging=false;function onPressDown(ev){if(isDisabled())return;element.addClass('md-active');element[0].focus();refreshSliderDimensions();var exactVal=percentToValue(positionToPercent(vertical?ev.pointer.y:ev.pointer.x));var closestVal=minMaxValidator(stepValidator(exactVal));scope.$apply(function(){setModelValue(closestVal);setSliderPercent(valueToPercent(closestVal));});}
function onPressUp(ev){if(isDisabled())return;element.removeClass('md-dragging');var exactVal=percentToValue(positionToPercent(vertical?ev.pointer.y:ev.pointer.x));var closestVal=minMaxValidator(stepValidator(exactVal));scope.$apply(function(){setModelValue(closestVal);ngModelRender();});}
function onDragStart(ev){if(isDisabled())return;isDragging=true;ev.stopPropagation();element.addClass('md-dragging');setSliderFromEvent(ev);}
function onDrag(ev){if(!isDragging)return;ev.stopPropagation();setSliderFromEvent(ev);}
function onDragEnd(ev){if(!isDragging)return;ev.stopPropagation();isDragging=false;}
function setSliderFromEvent(ev){if(discrete)adjustThumbPosition(vertical?ev.pointer.y:ev.pointer.x);else doSlide(vertical?ev.pointer.y:ev.pointer.x);}
function doSlide(x){scope.$evalAsync(function(){setModelValue(percentToValue(positionToPercent(x)));});}
function adjustThumbPosition(x){var exactVal=percentToValue(positionToPercent(x));var closestVal=minMaxValidator(stepValidator(exactVal));setSliderPercent(positionToPercent(x));thumbText.text(closestVal);}
function clamp(value){return Math.max(0,Math.min(value||0,1));}
function positionToPercent(position){var offset=vertical?sliderDimensions.top:sliderDimensions.left;var size=vertical?sliderDimensions.height:sliderDimensions.width;var calc=(position-offset)/size;if(!vertical&&$mdUtil.bidi()==='rtl'){calc=1-calc;}
return Math.max(0,Math.min(1,vertical?1-calc:calc));}
function percentToValue(percent){var adjustedPercent=invert?(1-percent):percent;return(min+adjustedPercent*(max-min));}
function valueToPercent(val){var percent=(val-min)/(max-min);return invert?(1-percent):percent;}}}})();(function(){"use strict";MdSticky.$inject=["$mdConstant","$$rAF","$mdUtil","$compile"];angular.module('material.components.sticky',['material.core','material.components.content']).factory('$mdSticky',MdSticky);function MdSticky($mdConstant,$$rAF,$mdUtil,$compile){var browserStickySupport=$mdUtil.checkStickySupport();return function registerStickyElement(scope,element,stickyClone){var contentCtrl=element.controller('mdContent');if(!contentCtrl)return;if(browserStickySupport){element.css({position:browserStickySupport,top:0,'z-index':2});}else{var $$sticky=contentCtrl.$element.data('$$sticky');if(!$$sticky){$$sticky=setupSticky(contentCtrl);contentCtrl.$element.data('$$sticky',$$sticky);}
var cloneElement=stickyClone||$compile(element.clone())(scope);var deregister=$$sticky.add(element,cloneElement);scope.$on('$destroy',deregister);}};function setupSticky(contentCtrl){var contentEl=contentCtrl.$element;var debouncedRefreshElements=$$rAF.throttle(refreshElements);setupAugmentedScrollEvents(contentEl);contentEl.on('$scrollstart',debouncedRefreshElements);contentEl.on('$scroll',onScroll);var self;return self={prev:null,current:null,next:null,items:[],add:add,refreshElements:refreshElements};function add(element,stickyClone){stickyClone.addClass('md-sticky-clone');var item={element:element,clone:stickyClone};self.items.push(item);$mdUtil.nextTick(function(){contentEl.prepend(item.clone);});debouncedRefreshElements();return function remove(){self.items.forEach(function(item,index){if(item.element[0]===element[0]){self.items.splice(index,1);item.clone.remove();}});debouncedRefreshElements();};}
function refreshElements(){self.items.forEach(refreshPosition);self.items=self.items.sort(function(a,b){return a.top<b.top?-1:1;});var item;var currentScrollTop=contentEl.prop('scrollTop');for(var i=self.items.length-1;i>=0;i--){if(currentScrollTop>self.items[i].top){item=self.items[i];break;}}
setCurrentItem(item);}
function refreshPosition(item){var current=item.element[0];item.top=0;item.left=0;item.right=0;while(current&&current!==contentEl[0]){item.top+=current.offsetTop;item.left+=current.offsetLeft;if(current.offsetParent){item.right+=current.offsetParent.offsetWidth-current.offsetWidth-current.offsetLeft;}
current=current.offsetParent;}
item.height=item.element.prop('offsetHeight');var defaultVal=$mdUtil.floatingScrollbars()?'0':undefined;$mdUtil.bidi(item.clone,'margin-left',item.left,defaultVal);$mdUtil.bidi(item.clone,'margin-right',defaultVal,item.right);}
function onScroll(){var scrollTop=contentEl.prop('scrollTop');var isScrollingDown=scrollTop>(onScroll.prevScrollTop||0);onScroll.prevScrollTop=scrollTop;if(scrollTop===0){setCurrentItem(null);return;}
if(isScrollingDown){if(self.next&&self.next.top<=scrollTop){setCurrentItem(self.next);return;}
if(self.current&&self.next&&self.next.top-scrollTop<=self.next.height){translate(self.current,scrollTop+(self.next.top-self.next.height-scrollTop));return;}}
if(!isScrollingDown){if(self.current&&self.prev&&scrollTop<self.current.top){setCurrentItem(self.prev);return;}
if(self.next&&self.current&&(scrollTop>=(self.next.top-self.current.height))){translate(self.current,scrollTop+(self.next.top-scrollTop-self.current.height));return;}}
if(self.current){translate(self.current,scrollTop);}}
function setCurrentItem(item){if(self.current===item)return;if(self.current){translate(self.current,null);setStickyState(self.current,null);}
if(item){setStickyState(item,'active');}
self.current=item;var index=self.items.indexOf(item);self.next=self.items[index+1];self.prev=self.items[index-1];setStickyState(self.next,'next');setStickyState(self.prev,'prev');}
function setStickyState(item,state){if(!item||item.state===state)return;if(item.state){item.clone.attr('sticky-prev-state',item.state);item.element.attr('sticky-prev-state',item.state);}
item.clone.attr('sticky-state',state);item.element.attr('sticky-state',state);item.state=state;}
function translate(item,amount){if(!item)return;if(amount===null||amount===undefined){if(item.translateY){item.translateY=null;item.clone.css($mdConstant.CSS.TRANSFORM,'');}}else{item.translateY=amount;$mdUtil.bidi(item.clone,$mdConstant.CSS.TRANSFORM,'translate3d('+item.left+'px,'+amount+'px,0)','translateY('+amount+'px)');}}}
function setupAugmentedScrollEvents(element){var SCROLL_END_DELAY=200;var isScrolling;var lastScrollTime;element.on('scroll touchmove',function(){if(!isScrolling){isScrolling=true;$$rAF.throttle(loopScrollEvent);element.triggerHandler('$scrollstart');}
element.triggerHandler('$scroll');lastScrollTime=+$mdUtil.now();});function loopScrollEvent(){if(+$mdUtil.now()-lastScrollTime>SCROLL_END_DELAY){isScrolling=false;element.triggerHandler('$scrollend');}else{element.triggerHandler('$scroll');$$rAF.throttle(loopScrollEvent);}}}}})();(function(){"use strict";MdSubheaderDirective.$inject=["$mdSticky","$compile","$mdTheming","$mdUtil","$mdAria"];angular.module('material.components.subheader',['material.core','material.components.sticky']).directive('mdSubheader',MdSubheaderDirective);function MdSubheaderDirective($mdSticky,$compile,$mdTheming,$mdUtil,$mdAria){return{restrict:'E',replace:true,transclude:true,template:('<div class="md-subheader _md">'+'  <div class="md-subheader-inner">'+'    <div class="md-subheader-content"></div>'+'  </div>'+'</div>'),link:function postLink(scope,element,attr,controllers,transclude){$mdTheming(element);element.addClass('_md');$mdUtil.prefixer().removeAttribute(element,'ng-repeat');var outerHTML=element[0].outerHTML;function getContent(el){return angular.element(el[0].querySelector('.md-subheader-content'));}
attr.$set('role','heading');$mdAria.expect(element,'aria-level','2');transclude(scope,function(clone){getContent(element).append(clone);});if(!element.hasClass('md-no-sticky')){transclude(scope,function(clone){var wrapper=$compile('<div class="md-subheader-wrapper" aria-hidden="true">'+outerHTML+'</div>')(scope);$mdUtil.nextTick(function(){getContent(wrapper).append(clone);});$mdSticky(scope,element,wrapper);});}}};}})();(function(){"use strict";angular.module('material.components.swipe',['material.core']).directive('mdSwipeLeft',getDirective('SwipeLeft')).directive('mdSwipeRight',getDirective('SwipeRight')).directive('mdSwipeUp',getDirective('SwipeUp')).directive('mdSwipeDown',getDirective('SwipeDown'));function getDirective(name){DirectiveFactory.$inject=["$parse"];var directiveName='md'+name;var eventName='$md.'+name.toLowerCase();return DirectiveFactory;function DirectiveFactory($parse){return{restrict:'A',link:postLink};function postLink(scope,element,attr){var fn=$parse(attr[directiveName]);element.on(eventName,function(ev){scope.$applyAsync(function(){fn(scope,{$event:ev});});});}}}})();(function(){"use strict";MdSwitch.$inject=["mdCheckboxDirective","$mdUtil","$mdConstant","$parse","$$rAF","$mdGesture","$timeout"];angular.module('material.components.switch',['material.core','material.components.checkbox']).directive('mdSwitch',MdSwitch);function MdSwitch(mdCheckboxDirective,$mdUtil,$mdConstant,$parse,$$rAF,$mdGesture,$timeout){var checkboxDirective=mdCheckboxDirective[0];return{restrict:'E',priority:$mdConstant.BEFORE_NG_ARIA,transclude:true,template:'<div class="md-container">'+'<div class="md-bar"></div>'+'<div class="md-thumb-container">'+'<div class="md-thumb" md-ink-ripple md-ink-ripple-checkbox></div>'+'</div>'+'</div>'+'<div ng-transclude class="md-label"></div>',require:['^?mdInputContainer','?ngModel','?^form'],compile:mdSwitchCompile};function mdSwitchCompile(element,attr){var checkboxLink=checkboxDirective.compile(element,attr).post;element.addClass('md-dragging');return function(scope,element,attr,ctrls){var containerCtrl=ctrls[0];var ngModel=ctrls[1]||$mdUtil.fakeNgModel();var formCtrl=ctrls[2];var disabledGetter=null;if(attr.disabled!=null){disabledGetter=function(){return true;};}else if(attr.ngDisabled){disabledGetter=$parse(attr.ngDisabled);}
var thumbContainer=angular.element(element[0].querySelector('.md-thumb-container'));var switchContainer=angular.element(element[0].querySelector('.md-container'));var labelContainer=angular.element(element[0].querySelector('.md-label'));$$rAF(function(){element.removeClass('md-dragging');});checkboxLink(scope,element,attr,ctrls);if(disabledGetter){scope.$watch(disabledGetter,function(isDisabled){element.attr('tabindex',isDisabled?-1:0);});}
attr.$observe('mdInvert',function(newValue){var isInverted=$mdUtil.parseAttributeBoolean(newValue);isInverted?element.prepend(labelContainer):element.prepend(switchContainer);element.toggleClass('md-inverted',isInverted);});$mdGesture.register(switchContainer,'drag');switchContainer.on('$md.dragstart',onDragStart).on('$md.drag',onDrag).on('$md.dragend',onDragEnd);var drag;function onDragStart(ev){if(disabledGetter&&disabledGetter(scope))return;ev.stopPropagation();element.addClass('md-dragging');drag={width:thumbContainer.prop('offsetWidth')};}
function onDrag(ev){if(!drag)return;ev.stopPropagation();ev.srcEvent&&ev.srcEvent.preventDefault();var percent=ev.pointer.distanceX/drag.width;var translate=ngModel.$viewValue?1+percent:percent;translate=Math.max(0,Math.min(1,translate));thumbContainer.css($mdConstant.CSS.TRANSFORM,'translate3d('+(100*translate)+'%,0,0)');drag.translate=translate;}
function onDragEnd(ev){if(!drag)return;ev.stopPropagation();element.removeClass('md-dragging');thumbContainer.css($mdConstant.CSS.TRANSFORM,'');var isChanged=ngModel.$viewValue?drag.translate<0.5:drag.translate>0.5;if(isChanged){applyModelValue(!ngModel.$viewValue);}
drag=null;scope.skipToggle=true;$timeout(function(){scope.skipToggle=false;},1);}
function applyModelValue(newValue){scope.$apply(function(){ngModel.$setViewValue(newValue);ngModel.$render();});}};}}})();(function(){"use strict";angular.module('material.components.tabs',['material.core','material.components.icon']);})();(function(){"use strict";angular.module('material.components.tabs').service('MdTabsPaginationService',MdTabsPaginationService);function MdTabsPaginationService(){return{decreasePageOffset:decreasePageOffset,increasePageOffset:increasePageOffset,getTabOffsets:getTabOffsets,getTotalTabsWidth:getTotalTabsWidth};function decreasePageOffset(elements,currentOffset){var canvas=elements.canvas,tabOffsets=getTabOffsets(elements),i,firstVisibleTabOffset;for(i=0;i<tabOffsets.length;i++){if(tabOffsets[i]>=currentOffset){firstVisibleTabOffset=tabOffsets[i];break;}}
return Math.max(0,firstVisibleTabOffset-canvas.clientWidth);}
function increasePageOffset(elements,currentOffset){var canvas=elements.canvas,maxOffset=getTotalTabsWidth(elements)-canvas.clientWidth,tabOffsets=getTabOffsets(elements),i,firstHiddenTabOffset;for(i=0;i<tabOffsets.length,tabOffsets[i]<=currentOffset+canvas.clientWidth;i++){firstHiddenTabOffset=tabOffsets[i];}
return Math.min(maxOffset,firstHiddenTabOffset);}
function getTabOffsets(elements){var i,tab,currentOffset=0,offsets=[];for(i=0;i<elements.tabs.length;i++){tab=elements.tabs[i];offsets.push(currentOffset);currentOffset+=tab.offsetWidth;}
return offsets;}
function getTotalTabsWidth(elements){var sum=0,i,tab;for(i=0;i<elements.tabs.length;i++){tab=elements.tabs[i];sum+=tab.offsetWidth;}
return sum;}}})();(function(){"use strict";MdToastDirective.$inject=["$mdToast"];MdToastProvider.$inject=["$$interimElementProvider"];angular.module('material.components.toast',['material.core','material.components.button']).directive('mdToast',MdToastDirective).provider('$mdToast',MdToastProvider);function MdToastDirective($mdToast){return{restrict:'E',link:function postLink(scope,element){element.addClass('_md');scope.$on('$destroy',function(){$mdToast.destroy();});}};}
function MdToastProvider($$interimElementProvider){MdToastController.$inject=["$mdToast","$scope"];toastDefaultOptions.$inject=["$animate","$mdToast","$mdUtil","$mdMedia"];var ACTION_RESOLVE='ok';var activeToastContent;var $mdToast=$$interimElementProvider('$mdToast').setDefaults({methods:['position','hideDelay','capsule','parent','position','toastClass'],options:toastDefaultOptions}).addPreset('simple',{argOption:'textContent',methods:['textContent','content','action','highlightAction','highlightClass','theme','parent'],options:["$mdToast","$mdTheming",function($mdToast,$mdTheming){return{template:'<md-toast md-theme="{{ toast.theme }}" ng-class="{\'md-capsule\': toast.capsule}">'+'  <div class="md-toast-content">'+'    <span class="md-toast-text" role="alert" aria-relevant="all" aria-atomic="true">'+'      {{ toast.content }}'+'    </span>'+'    <md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()" '+'        ng-class="highlightClasses">'+'      {{ toast.action }}'+'    </md-button>'+'  </div>'+'</md-toast>',controller:MdToastController,theme:$mdTheming.defaultTheme(),controllerAs:'toast',bindToController:true};}]}).addMethod('updateTextContent',updateTextContent).addMethod('updateContent',updateTextContent);function updateTextContent(newContent){activeToastContent=newContent;}
return $mdToast;function MdToastController($mdToast,$scope){this.$onInit=function(){var self=this;if(self.highlightAction){$scope.highlightClasses=['md-highlight',self.highlightClass]}
$scope.$watch(function(){return activeToastContent;},function(){self.content=activeToastContent;});this.resolve=function(){$mdToast.hide(ACTION_RESOLVE);};}}
function toastDefaultOptions($animate,$mdToast,$mdUtil,$mdMedia){var SWIPE_EVENTS='$md.swipeleft $md.swiperight $md.swipeup $md.swipedown';return{onShow:onShow,onRemove:onRemove,toastClass:'',position:'bottom left',themable:true,hideDelay:3000,autoWrap:true,transformTemplate:function(template,options){var shouldAddWrapper=options.autoWrap&&template&&!/md-toast-content/g.test(template);if(shouldAddWrapper){var templateRoot=document.createElement('md-template');templateRoot.innerHTML=template;for(var i=0;i<templateRoot.children.length;i++){if(templateRoot.children[i].nodeName==='MD-TOAST'){var wrapper=angular.element('<div class="md-toast-content">');wrapper.append(angular.element(templateRoot.children[i].childNodes));templateRoot.children[i].appendChild(wrapper[0]);}}
return templateRoot.innerHTML;}
return template||'';}};function onShow(scope,element,options){activeToastContent=options.textContent||options.content;var isSmScreen=!$mdMedia('gt-sm');element=$mdUtil.extractElementByName(element,'md-toast',true);options.element=element;options.onSwipe=function(ev,gesture){var swipe=ev.type.replace('$md.','');var direction=swipe.replace('swipe','');if((direction==='down'&&options.position.indexOf('top')!=-1&&!isSmScreen)||(direction==='up'&&(options.position.indexOf('bottom')!=-1||isSmScreen))){return;}
if((direction==='left'||direction==='right')&&isSmScreen){return;}
element.addClass('md-'+swipe);$mdUtil.nextTick($mdToast.cancel);};options.openClass=toastOpenClass(options.position);element.addClass(options.toastClass);options.parent.addClass(options.openClass);if($mdUtil.hasComputedStyle(options.parent,'position','static')){options.parent.css('position','relative');}
element.on(SWIPE_EVENTS,options.onSwipe);element.addClass(isSmScreen?'md-bottom':options.position.split(' ').map(function(pos){return'md-'+pos;}).join(' '));if(options.parent)options.parent.addClass('md-toast-animating');return $animate.enter(element,options.parent).then(function(){if(options.parent)options.parent.removeClass('md-toast-animating');});}
function onRemove(scope,element,options){element.off(SWIPE_EVENTS,options.onSwipe);if(options.parent)options.parent.addClass('md-toast-animating');if(options.openClass)options.parent.removeClass(options.openClass);return((options.$destroy==true)?element.remove():$animate.leave(element)).then(function(){if(options.parent)options.parent.removeClass('md-toast-animating');if($mdUtil.hasComputedStyle(options.parent,'position','static')){options.parent.css('position','');}});}
function toastOpenClass(position){if(!$mdMedia('gt-xs')){return'md-toast-open-bottom';}
return'md-toast-open-'+
(position.indexOf('top')>-1?'top':'bottom');}}}})();(function(){"use strict";mdToolbarDirective.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming","$animate"];angular.module('material.components.toolbar',['material.core','material.components.content']).directive('mdToolbar',mdToolbarDirective);function mdToolbarDirective($$rAF,$mdConstant,$mdUtil,$mdTheming,$animate){var translateY=angular.bind(null,$mdUtil.supplant,'translate3d(0,{0}px,0)');return{template:'',restrict:'E',link:function(scope,element,attr){element.addClass('_md');$mdTheming(element);$mdUtil.nextTick(function(){element.addClass('_md-toolbar-transitions');},false);if(angular.isDefined(attr.mdScrollShrink)){setupScrollShrink();}
function setupScrollShrink(){var toolbarHeight;var contentElement;var disableScrollShrink=angular.noop;var y=0;var prevScrollTop=0;var shrinkSpeedFactor=attr.mdShrinkSpeedFactor||0.5;var debouncedContentScroll=$$rAF.throttle(onContentScroll);var debouncedUpdateHeight=$mdUtil.debounce(updateToolbarHeight,5*1000);scope.$on('$mdContentLoaded',onMdContentLoad);attr.$observe('mdScrollShrink',onChangeScrollShrink);if(attr.ngShow){scope.$watch(attr.ngShow,updateToolbarHeight);}
if(attr.ngHide){scope.$watch(attr.ngHide,updateToolbarHeight);}
scope.$on('$destroy',disableScrollShrink);function onChangeScrollShrink(shrinkWithScroll){var closestContent=element.parent().find('md-content');if(!contentElement&&closestContent.length){onMdContentLoad(null,closestContent);}
shrinkWithScroll=scope.$eval(shrinkWithScroll);if(shrinkWithScroll===false){disableScrollShrink();}else{disableScrollShrink=enableScrollShrink();}}
function onMdContentLoad($event,newContentEl){if(newContentEl&&element.parent()[0]===newContentEl.parent()[0]){if(contentElement){contentElement.off('scroll',debouncedContentScroll);}
contentElement=newContentEl;disableScrollShrink=enableScrollShrink();}}
function onContentScroll(e){var scrollTop=e?e.target.scrollTop:prevScrollTop;debouncedUpdateHeight();y=Math.min(toolbarHeight/shrinkSpeedFactor,Math.max(0,y+scrollTop-prevScrollTop));element.css($mdConstant.CSS.TRANSFORM,translateY([-y*shrinkSpeedFactor]));contentElement.css($mdConstant.CSS.TRANSFORM,translateY([(toolbarHeight-y)*shrinkSpeedFactor]));prevScrollTop=scrollTop;$mdUtil.nextTick(function(){var hasWhiteFrame=element.hasClass('md-whiteframe-z1');if(hasWhiteFrame&&!y){$animate.removeClass(element,'md-whiteframe-z1');}else if(!hasWhiteFrame&&y){$animate.addClass(element,'md-whiteframe-z1');}});}
function enableScrollShrink(){if(!contentElement)return angular.noop;contentElement.on('scroll',debouncedContentScroll);contentElement.attr('scroll-shrink','true');$mdUtil.nextTick(updateToolbarHeight,false);return function disableScrollShrink(){contentElement.off('scroll',debouncedContentScroll);contentElement.attr('scroll-shrink','false');updateToolbarHeight();};}
function updateToolbarHeight(){toolbarHeight=element.prop('offsetHeight');var margin=(-toolbarHeight*shrinkSpeedFactor)+'px';contentElement.css({"margin-top":margin,"margin-bottom":margin});onContentScroll();}}}};}})();(function(){"use strict";MdTooltipDirective.$inject=["$timeout","$window","$$rAF","$document","$interpolate","$mdUtil","$mdPanel","$$mdTooltipRegistry"];angular.module('material.components.tooltip',['material.core','material.components.panel']).directive('mdTooltip',MdTooltipDirective).service('$$mdTooltipRegistry',MdTooltipRegistry);function MdTooltipDirective($timeout,$window,$$rAF,$document,$interpolate,$mdUtil,$mdPanel,$$mdTooltipRegistry){var ENTER_EVENTS='focus touchstart mouseenter';var LEAVE_EVENTS='blur touchcancel mouseleave';var TOOLTIP_DEFAULT_Z_INDEX=100;var TOOLTIP_DEFAULT_SHOW_DELAY=0;var TOOLTIP_DEFAULT_DIRECTION='bottom';var TOOLTIP_DIRECTIONS={top:{x:$mdPanel.xPosition.CENTER,y:$mdPanel.yPosition.ABOVE},right:{x:$mdPanel.xPosition.OFFSET_END,y:$mdPanel.yPosition.CENTER},bottom:{x:$mdPanel.xPosition.CENTER,y:$mdPanel.yPosition.BELOW},left:{x:$mdPanel.xPosition.OFFSET_START,y:$mdPanel.yPosition.CENTER}};return{restrict:'E',priority:210,scope:{mdZIndex:'=?mdZIndex',mdDelay:'=?mdDelay',mdVisible:'=?mdVisible',mdAutohide:'=?mdAutohide',mdDirection:'@?mdDirection'},link:linkFunc};function linkFunc(scope,element,attr){var tooltipId='md-tooltip-'+$mdUtil.nextUid();var parent=$mdUtil.getParentWithPointerEvents(element);var debouncedOnResize=$$rAF.throttle(updatePosition);var mouseActive=false;var origin,position,panelPosition,panelRef,autohide,showTimeout,elementFocusedOnWindowBlur=null;setDefaults();addAriaLabel();element.detach();updatePosition();bindEvents();configureWatchers();function setDefaults(){scope.mdZIndex=scope.mdZIndex||TOOLTIP_DEFAULT_Z_INDEX;scope.mdDelay=scope.mdDelay||TOOLTIP_DEFAULT_SHOW_DELAY;if(!TOOLTIP_DIRECTIONS[scope.mdDirection]){scope.mdDirection=TOOLTIP_DEFAULT_DIRECTION;}}
function addAriaLabel(labelText){var interpolatedText=labelText||$interpolate(element.text().trim())(scope.$parent);if((!parent.attr('aria-label')&&!parent.attr('aria-labelledby'))||parent.attr('md-labeled-by-tooltip')){parent.attr('aria-label',interpolatedText);if(!parent.attr('md-labeled-by-tooltip')){parent.attr('md-labeled-by-tooltip',tooltipId);}}}
function updatePosition(){setDefaults();if(panelRef&&panelRef.panelEl){panelRef.panelEl.removeClass(origin);}
origin='md-origin-'+scope.mdDirection;position=TOOLTIP_DIRECTIONS[scope.mdDirection];panelPosition=$mdPanel.newPanelPosition().relativeTo(parent).addPanelPosition(position.x,position.y);if(panelRef&&panelRef.panelEl){panelRef.panelEl.addClass(origin);panelRef.updatePosition(panelPosition);}}
function bindEvents(){if(parent[0]&&'MutationObserver'in $window){var attributeObserver=new MutationObserver(function(mutations){if(isDisabledMutation(mutations)){$mdUtil.nextTick(function(){setVisible(false);});}});attributeObserver.observe(parent[0],{attributes:true});}
elementFocusedOnWindowBlur=false;$$mdTooltipRegistry.register('scroll',windowScrollEventHandler,true);$$mdTooltipRegistry.register('blur',windowBlurEventHandler);$$mdTooltipRegistry.register('resize',debouncedOnResize);scope.$on('$destroy',onDestroy);parent.on('mousedown',mousedownEventHandler);parent.on(ENTER_EVENTS,enterEventHandler);function isDisabledMutation(mutations){mutations.some(function(mutation){return mutation.attributeName==='disabled'&&parent[0].disabled;});return false;}
function windowScrollEventHandler(){setVisible(false);}
function windowBlurEventHandler(){elementFocusedOnWindowBlur=document.activeElement===parent[0];}
function enterEventHandler($event){if($event.type==='focus'&&elementFocusedOnWindowBlur){elementFocusedOnWindowBlur=false;}else if(!scope.mdVisible){parent.on(LEAVE_EVENTS,leaveEventHandler);setVisible(true);if($event.type==='touchstart'){parent.one('touchend',function(){$mdUtil.nextTick(function(){$document.one('touchend',leaveEventHandler);},false);});}}}
function leaveEventHandler(){autohide=scope.hasOwnProperty('mdAutohide')?scope.mdAutohide:attr.hasOwnProperty('mdAutohide');if(autohide||mouseActive||$document[0].activeElement!==parent[0]){if(showTimeout){$timeout.cancel(showTimeout);setVisible.queued=false;showTimeout=null;}
parent.off(LEAVE_EVENTS,leaveEventHandler);parent.triggerHandler('blur');setVisible(false);}
mouseActive=false;}
function mousedownEventHandler(){mouseActive=true;}
function onDestroy(){$$mdTooltipRegistry.deregister('scroll',windowScrollEventHandler,true);$$mdTooltipRegistry.deregister('blur',windowBlurEventHandler);$$mdTooltipRegistry.deregister('resize',debouncedOnResize);parent.off(ENTER_EVENTS,enterEventHandler).off(LEAVE_EVENTS,leaveEventHandler).off('mousedown',mousedownEventHandler);leaveEventHandler();attributeObserver&&attributeObserver.disconnect();}}
function configureWatchers(){if(element[0]&&'MutationObserver'in $window){var attributeObserver=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(mutation.attributeName==='md-visible'&&!scope.visibleWatcher){scope.visibleWatcher=scope.$watch('mdVisible',onVisibleChanged);}});});attributeObserver.observe(element[0],{attributes:true});if(attr.hasOwnProperty('mdVisible')){scope.visibleWatcher=scope.$watch('mdVisible',onVisibleChanged);}}else{scope.visibleWatcher=scope.$watch('mdVisible',onVisibleChanged);}
scope.$watch('mdDirection',updatePosition);element.one('$destroy',onElementDestroy);parent.one('$destroy',onElementDestroy);scope.$on('$destroy',function(){setVisible(false);panelRef&&panelRef.destroy();attributeObserver&&attributeObserver.disconnect();element.remove();});if(element.text().indexOf($interpolate.startSymbol())>-1){scope.$watch(function(){return element.text().trim();},addAriaLabel);}
function onElementDestroy(){scope.$destroy();}}
function setVisible(value){if(setVisible.queued&&setVisible.value===!!value||!setVisible.queued&&scope.mdVisible===!!value){return;}
setVisible.value=!!value;if(!setVisible.queued){if(value){setVisible.queued=true;showTimeout=$timeout(function(){scope.mdVisible=setVisible.value;setVisible.queued=false;showTimeout=null;if(!scope.visibleWatcher){onVisibleChanged(scope.mdVisible);}},scope.mdDelay);}else{$mdUtil.nextTick(function(){scope.mdVisible=false;if(!scope.visibleWatcher){onVisibleChanged(false);}});}}}
function onVisibleChanged(isVisible){isVisible?showTooltip():hideTooltip();}
function showTooltip(){if(!element[0].textContent.trim()){throw new Error('Text for the tooltip has not been provided. '+'Please include text within the mdTooltip element.');}
if(!panelRef){var attachTo=angular.element(document.body);var panelAnimation=$mdPanel.newPanelAnimation().openFrom(parent).closeTo(parent).withAnimation({open:'md-show',close:'md-hide'});var panelConfig={id:tooltipId,attachTo:attachTo,contentElement:element,propagateContainerEvents:true,panelClass:'md-tooltip '+origin,animation:panelAnimation,position:panelPosition,zIndex:scope.mdZIndex,focusOnOpen:false};panelRef=$mdPanel.create(panelConfig);}
panelRef.open().then(function(){panelRef.panelEl.attr('role','tooltip');});}
function hideTooltip(){panelRef&&panelRef.close();}}}
function MdTooltipRegistry(){var listeners={};var ngWindow=angular.element(window);return{register:register,deregister:deregister};function globalEventHandler(event){if(listeners[event.type]){listeners[event.type].forEach(function(currentHandler){currentHandler.call(this,event);},this);}}
function register(type,handler,useCapture){var handlers=listeners[type]=listeners[type]||[];if(!handlers.length){useCapture?window.addEventListener(type,globalEventHandler,true):ngWindow.on(type,globalEventHandler);}
if(handlers.indexOf(handler)===-1){handlers.push(handler);}}
function deregister(type,handler,useCapture){var handlers=listeners[type];var index=handlers?handlers.indexOf(handler):-1;if(index>-1){handlers.splice(index,1);if(handlers.length===0){useCapture?window.removeEventListener(type,globalEventHandler,true):ngWindow.off(type,globalEventHandler);}}}}})();(function(){"use strict";MdTruncateController.$inject=["$element"];angular.module('material.components.truncate',['material.core']).directive('mdTruncate',MdTruncateDirective);function MdTruncateDirective(){return{restrict:'AE',controller:MdTruncateController,controllerAs:'$ctrl',bindToController:true}}
function MdTruncateController($element){$element.addClass('md-truncate');}})();(function(){"use strict";VirtualRepeatContainerController.$inject=["$$rAF","$mdUtil","$mdConstant","$parse","$rootScope","$window","$scope","$element","$attrs"];VirtualRepeatController.$inject=["$scope","$element","$attrs","$browser","$document","$rootScope","$$rAF","$mdUtil"];VirtualRepeatDirective.$inject=["$parse"];angular.module('material.components.virtualRepeat',['material.core','material.components.showHide']).directive('mdVirtualRepeatContainer',VirtualRepeatContainerDirective).directive('mdVirtualRepeat',VirtualRepeatDirective).directive('mdForceHeight',ForceHeightDirective);function VirtualRepeatContainerDirective(){return{controller:VirtualRepeatContainerController,template:virtualRepeatContainerTemplate,compile:function virtualRepeatContainerCompile($element,$attrs){$element.addClass('md-virtual-repeat-container').addClass($attrs.hasOwnProperty('mdOrientHorizontal')?'md-orient-horizontal':'md-orient-vertical');}};}
function virtualRepeatContainerTemplate($element){return'<div class="md-virtual-repeat-scroller" role="presentation">'+'<div class="md-virtual-repeat-sizer" role="presentation"></div>'+'<div class="md-virtual-repeat-offsetter" role="presentation">'+
$element[0].innerHTML+'</div></div>';}
var NUM_EXTRA=3;function VirtualRepeatContainerController($$rAF,$mdUtil,$mdConstant,$parse,$rootScope,$window,$scope,$element,$attrs){this.$rootScope=$rootScope;this.$scope=$scope;this.$element=$element;this.$attrs=$attrs;this.size=0;this.scrollSize=0;this.scrollOffset=0;this.horizontal=this.$attrs.hasOwnProperty('mdOrientHorizontal');this.repeater=null;this.autoShrink=this.$attrs.hasOwnProperty('mdAutoShrink');this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0;this.originalSize=null;this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0;this.oldElementSize=null;this.maxElementPixels=$mdConstant.ELEMENT_MAX_PIXELS;if(this.$attrs.mdTopIndex){this.bindTopIndex=$parse(this.$attrs.mdTopIndex);this.topIndex=this.bindTopIndex(this.$scope);if(!angular.isDefined(this.topIndex)){this.topIndex=0;this.bindTopIndex.assign(this.$scope,0);}
this.$scope.$watch(this.bindTopIndex,angular.bind(this,function(newIndex){if(newIndex!==this.topIndex){this.scrollToIndex(newIndex);}}));}else{this.topIndex=0;}
this.scroller=$element[0].querySelector('.md-virtual-repeat-scroller');this.sizer=this.scroller.querySelector('.md-virtual-repeat-sizer');this.offsetter=this.scroller.querySelector('.md-virtual-repeat-offsetter');var boundUpdateSize=angular.bind(this,this.updateSize);$$rAF(angular.bind(this,function(){boundUpdateSize();var debouncedUpdateSize=$mdUtil.debounce(boundUpdateSize,10,null,false);var jWindow=angular.element($window);if(!this.size){debouncedUpdateSize();}
jWindow.on('resize',debouncedUpdateSize);$scope.$on('$destroy',function(){jWindow.off('resize',debouncedUpdateSize);});$scope.$emit('$md-resize-enable');$scope.$on('$md-resize',boundUpdateSize);}));}
VirtualRepeatContainerController.prototype.register=function(repeaterCtrl){this.repeater=repeaterCtrl;angular.element(this.scroller).on('scroll wheel touchmove touchend',angular.bind(this,this.handleScroll_));};VirtualRepeatContainerController.prototype.isHorizontal=function(){return this.horizontal;};VirtualRepeatContainerController.prototype.getSize=function(){return this.size;};VirtualRepeatContainerController.prototype.setSize_=function(size){var dimension=this.getDimensionName_();this.size=size;this.$element[0].style[dimension]=size+'px';};VirtualRepeatContainerController.prototype.unsetSize_=function(){this.$element[0].style[this.getDimensionName_()]=this.oldElementSize;this.oldElementSize=null;};VirtualRepeatContainerController.prototype.updateSize=function(){if(this.originalSize)return;this.size=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight;this.handleScroll_();this.repeater&&this.repeater.containerUpdated();};VirtualRepeatContainerController.prototype.getScrollSize=function(){return this.scrollSize;};VirtualRepeatContainerController.prototype.getDimensionName_=function(){return this.isHorizontal()?'width':'height';};VirtualRepeatContainerController.prototype.sizeScroller_=function(size){var dimension=this.getDimensionName_();var crossDimension=this.isHorizontal()?'height':'width';this.sizer.innerHTML='';if(size<this.maxElementPixels){this.sizer.style[dimension]=size+'px';}else{this.sizer.style[dimension]='auto';this.sizer.style[crossDimension]='auto';var numChildren=Math.floor(size/this.maxElementPixels);var sizerChild=document.createElement('div');sizerChild.style[dimension]=this.maxElementPixels+'px';sizerChild.style[crossDimension]='1px';for(var i=0;i<numChildren;i++){this.sizer.appendChild(sizerChild.cloneNode(false));}
sizerChild.style[dimension]=(size-(numChildren*this.maxElementPixels))+'px';this.sizer.appendChild(sizerChild);}};VirtualRepeatContainerController.prototype.autoShrink_=function(size){var shrinkSize=Math.max(size,this.autoShrinkMin*this.repeater.getItemSize());if(this.autoShrink&&shrinkSize!==this.size){if(this.oldElementSize===null){this.oldElementSize=this.$element[0].style[this.getDimensionName_()];}
var currentSize=this.originalSize||this.size;if(!currentSize||shrinkSize<currentSize){if(!this.originalSize){this.originalSize=this.size;}
this.setSize_(shrinkSize);}else if(this.originalSize!==null){this.unsetSize_();var _originalSize=this.originalSize;this.originalSize=null;if(!_originalSize)this.updateSize();this.setSize_(_originalSize||this.size);}
this.repeater.containerUpdated();}};VirtualRepeatContainerController.prototype.setScrollSize=function(itemsSize){var size=itemsSize+this.offsetSize;if(this.scrollSize===size)return;this.sizeScroller_(size);this.autoShrink_(size);this.scrollSize=size;};VirtualRepeatContainerController.prototype.getScrollOffset=function(){return this.scrollOffset;};VirtualRepeatContainerController.prototype.scrollTo=function(position){this.scroller[this.isHorizontal()?'scrollLeft':'scrollTop']=position;this.handleScroll_();};VirtualRepeatContainerController.prototype.scrollToIndex=function(index){var itemSize=this.repeater.getItemSize();var itemsLength=this.repeater.itemsLength;if(index>itemsLength){index=itemsLength-1;}
this.scrollTo(itemSize*index);};VirtualRepeatContainerController.prototype.resetScroll=function(){this.scrollTo(0);};VirtualRepeatContainerController.prototype.handleScroll_=function(){var ltr=document.dir!='rtl'&&document.body.dir!='rtl';if(!ltr&&!this.maxSize){this.scroller.scrollLeft=this.scrollSize;this.maxSize=this.scroller.scrollLeft;}
var offset=this.isHorizontal()?(ltr?this.scroller.scrollLeft:this.maxSize-this.scroller.scrollLeft):this.scroller.scrollTop;if(offset===this.scrollOffset||offset>this.scrollSize-this.size)return;var itemSize=this.repeater.getItemSize();if(!itemSize)return;var numItems=Math.max(0,Math.floor(offset/itemSize)-NUM_EXTRA);var transform=(this.isHorizontal()?'translateX(':'translateY(')+
(!this.isHorizontal()||ltr?(numItems*itemSize):-(numItems*itemSize))+'px)';this.scrollOffset=offset;this.offsetter.style.webkitTransform=transform;this.offsetter.style.transform=transform;if(this.bindTopIndex){var topIndex=Math.floor(offset/itemSize);if(topIndex!==this.topIndex&&topIndex<this.repeater.getItemCount()){this.topIndex=topIndex;this.bindTopIndex.assign(this.$scope,topIndex);if(!this.$rootScope.$$phase)this.$scope.$digest();}}
this.repeater.containerUpdated();};function VirtualRepeatDirective($parse){return{controller:VirtualRepeatController,priority:1000,require:['mdVirtualRepeat','^^mdVirtualRepeatContainer'],restrict:'A',terminal:true,transclude:'element',compile:function VirtualRepeatCompile($element,$attrs){var expression=$attrs.mdVirtualRepeat;var match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/);var repeatName=match[1];var repeatListExpression=$parse(match[2]);var extraName=$attrs.mdExtraName&&$parse($attrs.mdExtraName);return function VirtualRepeatLink($scope,$element,$attrs,ctrl,$transclude){ctrl[0].link_(ctrl[1],$transclude,repeatName,repeatListExpression,extraName);};}};}
function VirtualRepeatController($scope,$element,$attrs,$browser,$document,$rootScope,$$rAF,$mdUtil){this.$scope=$scope;this.$element=$element;this.$attrs=$attrs;this.$browser=$browser;this.$document=$document;this.$mdUtil=$mdUtil;this.$rootScope=$rootScope;this.$$rAF=$$rAF;this.onDemand=$mdUtil.parseAttributeBoolean($attrs.mdOnDemand);this.browserCheckUrlChange=$browser.$$checkUrlChange;this.newStartIndex=0;this.newEndIndex=0;this.newVisibleEnd=0;this.startIndex=0;this.endIndex=0;this.itemSize=$scope.$eval($attrs.mdItemSize)||null;this.isFirstRender=true;this.isVirtualRepeatUpdating_=false;this.itemsLength=0;this.unwatchItemSize_=angular.noop;this.blocks={};this.pooledBlocks=[];$scope.$on('$destroy',angular.bind(this,this.cleanupBlocks_));}
VirtualRepeatController.Block;VirtualRepeatController.prototype.link_=function(container,transclude,repeatName,repeatListExpression,extraName){this.container=container;this.transclude=transclude;this.repeatName=repeatName;this.rawRepeatListExpression=repeatListExpression;this.extraName=extraName;this.sized=false;this.repeatListExpression=angular.bind(this,this.repeatListExpression_);this.container.register(this);};VirtualRepeatController.prototype.cleanupBlocks_=function(){angular.forEach(this.pooledBlocks,function cleanupBlock(block){block.element.remove();});};VirtualRepeatController.prototype.readItemSize_=function(){if(this.itemSize){return;}
this.items=this.repeatListExpression(this.$scope);this.parentNode=this.$element[0].parentNode;var block=this.getBlock_(0);if(!block.element[0].parentNode){this.parentNode.appendChild(block.element[0]);}
this.itemSize=block.element[0][this.container.isHorizontal()?'offsetWidth':'offsetHeight']||null;this.blocks[0]=block;this.poolBlock_(0);if(this.itemSize){this.containerUpdated();}};VirtualRepeatController.prototype.repeatListExpression_=function(scope){var repeatList=this.rawRepeatListExpression(scope);if(this.onDemand&&repeatList){var virtualList=new VirtualRepeatModelArrayLike(repeatList);virtualList.$$includeIndexes(this.newStartIndex,this.newVisibleEnd);return virtualList;}else{return repeatList;}};VirtualRepeatController.prototype.containerUpdated=function(){if(!this.itemSize){if(this.unwatchItemSize_&&this.unwatchItemSize_!==angular.noop){this.unwatchItemSize_();}
this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,angular.bind(this,function(items){if(items&&items.length){this.readItemSize_();}}));if(!this.$rootScope.$$phase)this.$scope.$digest();return;}else if(!this.sized){this.items=this.repeatListExpression(this.$scope);}
if(!this.sized){this.unwatchItemSize_();this.sized=true;this.$scope.$watchCollection(this.repeatListExpression,angular.bind(this,function(items,oldItems){if(!this.isVirtualRepeatUpdating_){this.virtualRepeatUpdate_(items,oldItems);}}));}
this.updateIndexes_();if(this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize()){if(this.items instanceof VirtualRepeatModelArrayLike){this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex);}
this.virtualRepeatUpdate_(this.items,this.items);}};VirtualRepeatController.prototype.getItemSize=function(){return this.itemSize;};VirtualRepeatController.prototype.getItemCount=function(){return this.itemsLength;};VirtualRepeatController.prototype.virtualRepeatUpdate_=function(items,oldItems){this.isVirtualRepeatUpdating_=true;var itemsLength=items&&items.length||0;var lengthChanged=false;if(this.items&&itemsLength<this.items.length&&this.container.getScrollOffset()!==0){this.items=items;var previousScrollOffset=this.container.getScrollOffset();this.container.resetScroll();this.container.scrollTo(previousScrollOffset);}
if(itemsLength!==this.itemsLength){lengthChanged=true;this.itemsLength=itemsLength;}
this.items=items;if(items!==oldItems||lengthChanged){this.updateIndexes_();}
this.parentNode=this.$element[0].parentNode;if(lengthChanged){this.container.setScrollSize(itemsLength*this.itemSize);}
Object.keys(this.blocks).forEach(function(blockIndex){var index=parseInt(blockIndex,10);if(index<this.newStartIndex||index>=this.newEndIndex){this.poolBlock_(index);}},this);this.$browser.$$checkUrlChange=angular.noop;var i,block,newStartBlocks=[],newEndBlocks=[];for(i=this.newStartIndex;i<this.newEndIndex&&this.blocks[i]==null;i++){block=this.getBlock_(i);this.updateBlock_(block,i);newStartBlocks.push(block);}
for(;this.blocks[i]!=null;i++){this.updateBlock_(this.blocks[i],i);}
var maxIndex=i-1;for(;i<this.newEndIndex;i++){block=this.getBlock_(i);this.updateBlock_(block,i);newEndBlocks.push(block);}
if(newStartBlocks.length){this.parentNode.insertBefore(this.domFragmentFromBlocks_(newStartBlocks),this.$element[0].nextSibling);}
if(newEndBlocks.length){this.parentNode.insertBefore(this.domFragmentFromBlocks_(newEndBlocks),this.blocks[maxIndex]&&this.blocks[maxIndex].element[0].nextSibling);}
this.$browser.$$checkUrlChange=this.browserCheckUrlChange;this.startIndex=this.newStartIndex;this.endIndex=this.newEndIndex;if(this.isFirstRender){this.isFirstRender=false;var firstRenderStartIndex=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex;this.$mdUtil.nextTick(function(){this.container.scrollToIndex(firstRenderStartIndex);}.bind(this));}
this.isVirtualRepeatUpdating_=false;};VirtualRepeatController.prototype.getBlock_=function(index){if(this.pooledBlocks.length){return this.pooledBlocks.pop();}
var block;this.transclude(angular.bind(this,function(clone,scope){block={element:clone,new:true,scope:scope};this.updateScope_(scope,index);this.parentNode.appendChild(clone[0]);}));return block;};VirtualRepeatController.prototype.updateBlock_=function(block,index){this.blocks[index]=block;if(!block.new&&(block.scope.$index===index&&block.scope[this.repeatName]===this.items[index])){return;}
block.new=false;this.updateScope_(block.scope,index);if(!this.$rootScope.$$phase){block.scope.$digest();}};VirtualRepeatController.prototype.updateScope_=function(scope,index){scope.$index=index;scope[this.repeatName]=this.items&&this.items[index];if(this.extraName)scope[this.extraName(this.$scope)]=this.items[index];};VirtualRepeatController.prototype.poolBlock_=function(index){this.pooledBlocks.push(this.blocks[index]);this.parentNode.removeChild(this.blocks[index].element[0]);delete this.blocks[index];};VirtualRepeatController.prototype.domFragmentFromBlocks_=function(blocks){var fragment=this.$document[0].createDocumentFragment();blocks.forEach(function(block){fragment.appendChild(block.element[0]);});return fragment;};VirtualRepeatController.prototype.updateIndexes_=function(){var itemsLength=this.items?this.items.length:0;var containerLength=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(itemsLength-containerLength,Math.floor(this.container.getScrollOffset()/this.itemSize)));this.newVisibleEnd=this.newStartIndex+containerLength+NUM_EXTRA;this.newEndIndex=Math.min(itemsLength,this.newVisibleEnd);this.newStartIndex=Math.max(0,this.newStartIndex-NUM_EXTRA);};function VirtualRepeatModelArrayLike(model){if(!angular.isFunction(model.getItemAtIndex)||!angular.isFunction(model.getLength)){throw Error('When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement '+'functions getItemAtIndex() and getLength() ');}
this.model=model;}
VirtualRepeatModelArrayLike.prototype.$$includeIndexes=function(start,end){for(var i=start;i<end;i++){if(!this.hasOwnProperty(i)){this[i]=this.model.getItemAtIndex(i);}}
this.length=this.model.getLength();};function ForceHeightDirective($mdUtil){return{restrict:'A',link:function(scope,element,attrs){var height=scope.$eval(attrs.mdForceHeight)||null;if(height&&element){element[0].style.height=height;}}}}
ForceHeightDirective.$inject=['$mdUtil'];})();(function(){"use strict";MdWhiteframeDirective.$inject=["$log"];angular.module('material.components.whiteframe',['material.core']).directive('mdWhiteframe',MdWhiteframeDirective);function MdWhiteframeDirective($log){var DISABLE_DP=-1;var MIN_DP=1;var MAX_DP=24;var DEFAULT_DP=4;return{link:postLink};function postLink(scope,element,attr){var oldClass='';attr.$observe('mdWhiteframe',function(elevation){elevation=parseInt(elevation,10)||DEFAULT_DP;if(elevation!=DISABLE_DP&&(elevation>MAX_DP||elevation<MIN_DP)){$log.warn('md-whiteframe attribute value is invalid. It should be a number between '+MIN_DP+' and '+MAX_DP,element[0]);elevation=DEFAULT_DP;}
var newClass=elevation==DISABLE_DP?'':'md-whiteframe-'+elevation+'dp';attr.$updateClass(newClass,oldClass);oldClass=newClass;});}}})();(function(){"use strict";MdAutocompleteCtrl.$inject=["$scope","$element","$mdUtil","$mdConstant","$mdTheming","$window","$animate","$rootElement","$attrs","$q","$log","$mdLiveAnnouncer"];angular.module('material.components.autocomplete').controller('MdAutocompleteCtrl',MdAutocompleteCtrl);var ITEM_HEIGHT=48,MAX_ITEMS=5,MENU_PADDING=8,INPUT_PADDING=2;function MdAutocompleteCtrl($scope,$element,$mdUtil,$mdConstant,$mdTheming,$window,$animate,$rootElement,$attrs,$q,$log,$mdLiveAnnouncer){var ctrl=this,itemParts=$scope.itemsExpr.split(/ in /i),itemExpr=itemParts[1],elements=null,cache={},noBlur=false,selectedItemWatchers=[],hasFocus=false,fetchesInProgress=0,enableWrapScroll=null,inputModelCtrl=null,debouncedOnResize=$mdUtil.debounce(onWindowResize);defineProperty('hidden',handleHiddenChange,true);ctrl.scope=$scope;ctrl.parent=$scope.$parent;ctrl.itemName=itemParts[0];ctrl.matches=[];ctrl.loading=false;ctrl.hidden=true;ctrl.index=null;ctrl.id=$mdUtil.nextUid();ctrl.isDisabled=null;ctrl.isRequired=null;ctrl.isReadonly=null;ctrl.hasNotFound=false;ctrl.keydown=keydown;ctrl.blur=blur;ctrl.focus=focus;ctrl.clear=clearValue;ctrl.select=select;ctrl.listEnter=onListEnter;ctrl.listLeave=onListLeave;ctrl.mouseUp=onMouseup;ctrl.getCurrentDisplayValue=getCurrentDisplayValue;ctrl.registerSelectedItemWatcher=registerSelectedItemWatcher;ctrl.unregisterSelectedItemWatcher=unregisterSelectedItemWatcher;ctrl.notFoundVisible=notFoundVisible;ctrl.loadingIsVisible=loadingIsVisible;ctrl.positionDropdown=positionDropdown;var ReportType={Count:1,Selected:2};return init();function init(){$mdUtil.initOptionalProperties($scope,$attrs,{searchText:'',selectedItem:null,clearButton:false});$mdTheming($element);configureWatchers();$mdUtil.nextTick(function(){gatherElements();moveDropdown();if($scope.autofocus){$element.on('focus',focusInputElement);}});}
function updateModelValidators(){if(!$scope.requireMatch||!inputModelCtrl)return;inputModelCtrl.$setValidity('md-require-match',!!$scope.selectedItem||!$scope.searchText);}
function positionDropdown(){if(!elements){return $mdUtil.nextTick(positionDropdown,false,$scope);}
var dropdownHeight=($scope.dropdownItems||MAX_ITEMS)*ITEM_HEIGHT;var hrect=elements.wrap.getBoundingClientRect(),vrect=elements.snap.getBoundingClientRect(),root=elements.root.getBoundingClientRect(),top=vrect.bottom-root.top,bot=root.bottom-vrect.top,left=hrect.left-root.left,width=hrect.width,offset=getVerticalOffset(),position=$scope.dropdownPosition,styles;if(!position){position=(top>bot&&root.height-top-MENU_PADDING<dropdownHeight)?'top':'bottom';}
if($attrs.mdFloatingLabel){left+=INPUT_PADDING;width-=INPUT_PADDING*2;}
styles={left:left+'px',minWidth:width+'px',maxWidth:Math.max(hrect.right-root.left,root.right-hrect.left)-MENU_PADDING+'px'};if(position==='top'){styles.top='auto';styles.bottom=bot+'px';styles.maxHeight=Math.min(dropdownHeight,hrect.top-root.top-MENU_PADDING)+'px';}else{var bottomSpace=root.bottom-hrect.bottom-MENU_PADDING+$mdUtil.getViewportTop();styles.top=(top-offset)+'px';styles.bottom='auto';styles.maxHeight=Math.min(dropdownHeight,bottomSpace)+'px';}
elements.$.scrollContainer.css(styles);$mdUtil.nextTick(correctHorizontalAlignment,false);function getVerticalOffset(){var offset=0;var inputContainer=$element.find('md-input-container');if(inputContainer.length){var input=inputContainer.find('input');offset=inputContainer.prop('offsetHeight');offset-=input.prop('offsetTop');offset-=input.prop('offsetHeight');offset+=inputContainer.prop('offsetTop');}
return offset;}
function correctHorizontalAlignment(){var dropdown=elements.scrollContainer.getBoundingClientRect(),styles={};if(dropdown.right>root.right-MENU_PADDING){styles.left=(hrect.right-dropdown.width)+'px';}
elements.$.scrollContainer.css(styles);}}
function moveDropdown(){if(!elements.$.root.length)return;$mdTheming(elements.$.scrollContainer);elements.$.scrollContainer.detach();elements.$.root.append(elements.$.scrollContainer);if($animate.pin)$animate.pin(elements.$.scrollContainer,$rootElement);}
function focusInputElement(){elements.input.focus();}
function configureWatchers(){var wait=parseInt($scope.delay,10)||0;$attrs.$observe('disabled',function(value){ctrl.isDisabled=$mdUtil.parseAttributeBoolean(value,false);});$attrs.$observe('required',function(value){ctrl.isRequired=$mdUtil.parseAttributeBoolean(value,false);});$attrs.$observe('readonly',function(value){ctrl.isReadonly=$mdUtil.parseAttributeBoolean(value,false);});$scope.$watch('searchText',wait?$mdUtil.debounce(handleSearchText,wait):handleSearchText);$scope.$watch('selectedItem',selectedItemChange);angular.element($window).on('resize',debouncedOnResize);$scope.$on('$destroy',cleanup);}
function cleanup(){if(!ctrl.hidden){$mdUtil.enableScrolling();}
angular.element($window).off('resize',debouncedOnResize);if(elements){var items=['ul','scroller','scrollContainer','input'];angular.forEach(items,function(key){elements.$[key].remove();});}}
function onWindowResize(){if(!ctrl.hidden){positionDropdown();}}
function gatherElements(){var snapWrap=gatherSnapWrap();elements={main:$element[0],scrollContainer:$element[0].querySelector('.md-virtual-repeat-container'),scroller:$element[0].querySelector('.md-virtual-repeat-scroller'),ul:$element.find('ul')[0],input:$element.find('input')[0],wrap:snapWrap.wrap,snap:snapWrap.snap,root:document.body};elements.li=elements.ul.getElementsByTagName('li');elements.$=getAngularElements(elements);inputModelCtrl=elements.$.input.controller('ngModel');}
function gatherSnapWrap(){var element;var value;for(element=$element;element.length;element=element.parent()){value=element.attr('md-autocomplete-snap');if(angular.isDefined(value))break;}
if(element.length){return{snap:element[0],wrap:(value.toLowerCase()==='width')?element[0]:$element.find('md-autocomplete-wrap')[0]};}
var wrap=$element.find('md-autocomplete-wrap')[0];return{snap:wrap,wrap:wrap};}
function getAngularElements(elements){var obj={};for(var key in elements){if(elements.hasOwnProperty(key))obj[key]=angular.element(elements[key]);}
return obj;}
function handleHiddenChange(hidden,oldHidden){if(!hidden&&oldHidden){positionDropdown();reportMessages(true,ReportType.Count|ReportType.Selected);if(elements){$mdUtil.disableScrollAround(elements.ul);enableWrapScroll=disableElementScrollEvents(angular.element(elements.wrap));}}else if(hidden&&!oldHidden){$mdUtil.enableScrolling();if(enableWrapScroll){enableWrapScroll();enableWrapScroll=null;}}}
function disableElementScrollEvents(element){function preventDefault(e){e.preventDefault();}
element.on('wheel',preventDefault);element.on('touchmove',preventDefault);return function(){element.off('wheel',preventDefault);element.off('touchmove',preventDefault);};}
function onListEnter(){noBlur=true;}
function onListLeave(){if(!hasFocus&&!ctrl.hidden)elements.input.focus();noBlur=false;ctrl.hidden=shouldHide();}
function onMouseup(){elements.input.focus();}
function selectedItemChange(selectedItem,previousSelectedItem){updateModelValidators();if(selectedItem){getDisplayValue(selectedItem).then(function(val){$scope.searchText=val;handleSelectedItemChange(selectedItem,previousSelectedItem);});}else if(previousSelectedItem&&$scope.searchText){getDisplayValue(previousSelectedItem).then(function(displayValue){if(angular.isString($scope.searchText)&&displayValue.toString().toLowerCase()===$scope.searchText.toLowerCase()){$scope.searchText='';}});}
if(selectedItem!==previousSelectedItem)announceItemChange();}
function announceItemChange(){angular.isFunction($scope.itemChange)&&$scope.itemChange(getItemAsNameVal($scope.selectedItem));}
function announceTextChange(){angular.isFunction($scope.textChange)&&$scope.textChange();}
function handleSelectedItemChange(selectedItem,previousSelectedItem){selectedItemWatchers.forEach(function(watcher){watcher(selectedItem,previousSelectedItem);});}
function registerSelectedItemWatcher(cb){if(selectedItemWatchers.indexOf(cb)==-1){selectedItemWatchers.push(cb);}}
function unregisterSelectedItemWatcher(cb){var i=selectedItemWatchers.indexOf(cb);if(i!=-1){selectedItemWatchers.splice(i,1);}}
function handleSearchText(searchText,previousSearchText){ctrl.index=getDefaultIndex();if(searchText===previousSearchText)return;updateModelValidators();getDisplayValue($scope.selectedItem).then(function(val){if(searchText!==val){$scope.selectedItem=null;if(searchText!==previousSearchText)announceTextChange();if(!isMinLengthMet()){ctrl.matches=[];setLoading(false);reportMessages(false,ReportType.Count);}else{handleQuery();}}});}
function blur($event){hasFocus=false;if(!noBlur){ctrl.hidden=shouldHide();evalAttr('ngBlur',{$event:$event});}}
function doBlur(forceBlur){if(forceBlur){noBlur=false;hasFocus=false;}
elements.input.blur();}
function focus($event){hasFocus=true;if(isSearchable()&&isMinLengthMet()){handleQuery();}
ctrl.hidden=shouldHide();evalAttr('ngFocus',{$event:$event});}
function keydown(event){switch(event.keyCode){case $mdConstant.KEY_CODE.DOWN_ARROW:if(ctrl.loading)return;event.stopPropagation();event.preventDefault();ctrl.index=Math.min(ctrl.index+1,ctrl.matches.length-1);updateScroll();reportMessages(false,ReportType.Selected);break;case $mdConstant.KEY_CODE.UP_ARROW:if(ctrl.loading)return;event.stopPropagation();event.preventDefault();ctrl.index=ctrl.index<0?ctrl.matches.length-1:Math.max(0,ctrl.index-1);updateScroll();reportMessages(false,ReportType.Selected);break;case $mdConstant.KEY_CODE.TAB:onListLeave();if(ctrl.hidden||ctrl.loading||ctrl.index<0||ctrl.matches.length<1)return;select(ctrl.index);break;case $mdConstant.KEY_CODE.ENTER:if(ctrl.hidden||ctrl.loading||ctrl.index<0||ctrl.matches.length<1)return;if(hasSelection())return;event.stopPropagation();event.preventDefault();select(ctrl.index);break;case $mdConstant.KEY_CODE.ESCAPE:event.preventDefault();if(!shouldProcessEscape())return;event.stopPropagation();clearSelectedItem();if($scope.searchText&&hasEscapeOption('clear')){clearSearchText();}
ctrl.hidden=true;if(hasEscapeOption('blur')){doBlur(true);}
break;default:}}
function getMinLength(){return angular.isNumber($scope.minLength)?$scope.minLength:1;}
function getDisplayValue(item){return $q.when(getItemText(item)||item).then(function(itemText){if(itemText&&!angular.isString(itemText)){$log.warn('md-autocomplete: Could not resolve display value to a string. '+'Please check the `md-item-text` attribute.');}
return itemText;});function getItemText(item){return(item&&$scope.itemText)?$scope.itemText(getItemAsNameVal(item)):null;}}
function getItemAsNameVal(item){if(!item)return undefined;var locals={};if(ctrl.itemName)locals[ctrl.itemName]=item;return locals;}
function getDefaultIndex(){return $scope.autoselect?0:-1;}
function setLoading(value){if(ctrl.loading!=value){ctrl.loading=value;}
ctrl.hidden=shouldHide();}
function shouldHide(){if(!isSearchable())return true;else return!shouldShow();}
function isSearchable(){if(ctrl.loading&&!hasMatches())return false;else if(hasSelection())return false;else if(!hasFocus)return false;return true;}
function shouldProcessEscape(){return hasEscapeOption('blur')||!ctrl.hidden||ctrl.loading||hasEscapeOption('clear')&&$scope.searchText;}
function hasEscapeOption(option){return!$scope.escapeOptions||$scope.escapeOptions.toLowerCase().indexOf(option)!==-1;}
function shouldShow(){return(isMinLengthMet()&&hasMatches())||notFoundVisible();}
function hasMatches(){return ctrl.matches.length?true:false;}
function hasSelection(){return ctrl.scope.selectedItem?true:false;}
function loadingIsVisible(){return ctrl.loading&&!hasSelection();}
function getCurrentDisplayValue(){return getDisplayValue(ctrl.matches[ctrl.index]);}
function isMinLengthMet(){return($scope.searchText||'').length>=getMinLength();}
function defineProperty(key,handler,value){Object.defineProperty(ctrl,key,{get:function(){return value;},set:function(newValue){var oldValue=value;value=newValue;handler(newValue,oldValue);}});}
function select(index){$mdUtil.nextTick(function(){getDisplayValue(ctrl.matches[index]).then(function(val){var ngModel=elements.$.input.controller('ngModel');ngModel.$setViewValue(val);ngModel.$render();}).finally(function(){$scope.selectedItem=ctrl.matches[index];setLoading(false);});},false);}
function clearValue(){clearSelectedItem();clearSearchText();}
function clearSelectedItem(){ctrl.index=0;ctrl.matches=[];}
function clearSearchText(){setLoading(true);$scope.searchText='';var eventObj=document.createEvent('CustomEvent');eventObj.initCustomEvent('change',true,true,{value:''});elements.input.dispatchEvent(eventObj);elements.input.blur();$scope.searchText='';elements.input.focus();}
function fetchResults(searchText){var items=$scope.$parent.$eval(itemExpr),term=searchText.toLowerCase(),isList=angular.isArray(items),isPromise=!!items.then;if(isList)onResultsRetrieved(items);else if(isPromise)handleAsyncResults(items);function handleAsyncResults(items){if(!items)return;items=$q.when(items);fetchesInProgress++;setLoading(true);$mdUtil.nextTick(function(){items.then(onResultsRetrieved).finally(function(){if(--fetchesInProgress===0){setLoading(false);}});},true,$scope);}
function onResultsRetrieved(matches){cache[term]=matches;if((searchText||'')!==($scope.searchText||'')){return;}
handleResults(matches);}}
function reportMessages(isPolite,types){var politeness=isPolite?'polite':'assertive';var messages=[];if(types&ReportType.Selected&&ctrl.index!==-1){messages.push(getCurrentDisplayValue());}
if(types&ReportType.Count){messages.push($q.resolve(getCountMessage()));}
$q.all(messages).then(function(data){$mdLiveAnnouncer.announce(data.join(' '),politeness);});}
function getCountMessage(){switch(ctrl.matches.length){case 0:return'There are no matches available.';case 1:return'There is 1 match available.';default:return'There are '+ctrl.matches.length+' matches available.';}}
function updateScroll(){if(!elements.li[0])return;var height=elements.li[0].offsetHeight,top=height*ctrl.index,bot=top+height,hgt=elements.scroller.clientHeight,scrollTop=elements.scroller.scrollTop;if(top<scrollTop){scrollTo(top);}else if(bot>scrollTop+hgt){scrollTo(bot-hgt);}}
function isPromiseFetching(){return fetchesInProgress!==0;}
function scrollTo(offset){elements.$.scrollContainer.controller('mdVirtualRepeatContainer').scrollTo(offset);}
function notFoundVisible(){var textLength=(ctrl.scope.searchText||'').length;return ctrl.hasNotFound&&!hasMatches()&&(!ctrl.loading||isPromiseFetching())&&textLength>=getMinLength()&&(hasFocus||noBlur)&&!hasSelection();}
function handleQuery(){var searchText=$scope.searchText||'';var term=searchText.toLowerCase();if(!$scope.noCache&&cache[term]){handleResults(cache[term]);}else{fetchResults(searchText);}
ctrl.hidden=shouldHide();}
function handleResults(results){ctrl.matches=results;ctrl.hidden=shouldHide();if(ctrl.loading)setLoading(false);if($scope.selectOnMatch)selectItemOnMatch();positionDropdown();reportMessages(true,ReportType.Count);}
function selectItemOnMatch(){var searchText=$scope.searchText,matches=ctrl.matches,item=matches[0];if(matches.length===1)getDisplayValue(item).then(function(displayValue){var isMatching=searchText==displayValue;if($scope.matchInsensitive&&!isMatching){isMatching=searchText.toLowerCase()==displayValue.toLowerCase();}
if(isMatching)select(0);});}
function evalAttr(attr,locals){if($attrs[attr]){$scope.$parent.$eval($attrs[attr],locals||{});}}}})();(function(){"use strict";MdAutocomplete.$inject=["$$mdSvgRegistry"];angular.module('material.components.autocomplete').directive('mdAutocomplete',MdAutocomplete);function MdAutocomplete($$mdSvgRegistry){return{controller:'MdAutocompleteCtrl',controllerAs:'$mdAutocompleteCtrl',scope:{inputName:'@mdInputName',inputMinlength:'@mdInputMinlength',inputMaxlength:'@mdInputMaxlength',searchText:'=?mdSearchText',selectedItem:'=?mdSelectedItem',itemsExpr:'@mdItems',itemText:'&mdItemText',placeholder:'@placeholder',noCache:'=?mdNoCache',requireMatch:'=?mdRequireMatch',selectOnMatch:'=?mdSelectOnMatch',matchInsensitive:'=?mdMatchCaseInsensitive',itemChange:'&?mdSelectedItemChange',textChange:'&?mdSearchTextChange',minLength:'=?mdMinLength',delay:'=?mdDelay',autofocus:'=?mdAutofocus',floatingLabel:'@?mdFloatingLabel',autoselect:'=?mdAutoselect',menuClass:'@?mdMenuClass',inputId:'@?mdInputId',escapeOptions:'@?mdEscapeOptions',dropdownItems:'=?mdDropdownItems',dropdownPosition:'@?mdDropdownPosition',clearButton:'=?mdClearButton'},compile:function(tElement,tAttrs){var attributes=['md-select-on-focus','md-no-asterisk','ng-trim','ng-pattern'];var input=tElement.find('input');attributes.forEach(function(attribute){var attrValue=tAttrs[tAttrs.$normalize(attribute)];if(attrValue!==null){input.attr(attribute,attrValue);}});return function(scope,element,attrs,ctrl){ctrl.hasNotFound=!!element.attr('md-has-not-found');if(!angular.isDefined(attrs.mdClearButton)&&!scope.floatingLabel){scope.clearButton=true;}}},template:function(element,attr){var noItemsTemplate=getNoItemsTemplate(),itemTemplate=getItemTemplate(),leftover=element.html(),tabindex=attr.tabindex;if(noItemsTemplate)element.attr('md-has-not-found',true);element.attr('tabindex','-1');return'\
        <md-autocomplete-wrap\
            ng-class="{ \'md-whiteframe-z1\': !floatingLabel, \
                        \'md-menu-showing\': !$mdAutocompleteCtrl.hidden, \
                        \'md-show-clear-button\': !!clearButton }">\
          '+getInputElement()+'\
          '+getClearButton()+'\
          <md-progress-linear\
              class="'+(attr.mdFloatingLabel?'md-inline':'')+'"\
              ng-if="$mdAutocompleteCtrl.loadingIsVisible()"\
              md-mode="indeterminate"></md-progress-linear>\
          <md-virtual-repeat-container\
              md-auto-shrink\
              md-auto-shrink-min="1"\
              ng-mouseenter="$mdAutocompleteCtrl.listEnter()"\
              ng-mouseleave="$mdAutocompleteCtrl.listLeave()"\
              ng-mouseup="$mdAutocompleteCtrl.mouseUp()"\
              ng-hide="$mdAutocompleteCtrl.hidden"\
              class="md-autocomplete-suggestions-container md-whiteframe-z1"\
              ng-class="{ \'md-not-found\': $mdAutocompleteCtrl.notFoundVisible() }"\
              role="presentation">\
            <ul class="md-autocomplete-suggestions"\
                ng-class="::menuClass"\
                id="ul-{{$mdAutocompleteCtrl.id}}">\
              <li md-virtual-repeat="item in $mdAutocompleteCtrl.matches"\
                  ng-class="{ selected: $index === $mdAutocompleteCtrl.index }"\
                  ng-click="$mdAutocompleteCtrl.select($index)"\
                  md-extra-name="$mdAutocompleteCtrl.itemName">\
                  '+itemTemplate+'\
                  </li>'+noItemsTemplate+'\
            </ul>\
          </md-virtual-repeat-container>\
        </md-autocomplete-wrap>';function getItemTemplate(){var templateTag=element.find('md-item-template').detach(),html=templateTag.length?templateTag.html():element.html();if(!templateTag.length)element.empty();return'<md-autocomplete-parent-scope md-autocomplete-replace>'+html+'</md-autocomplete-parent-scope>';}
function getNoItemsTemplate(){var templateTag=element.find('md-not-found').detach(),template=templateTag.length?templateTag.html():'';return template?'<li ng-if="$mdAutocompleteCtrl.notFoundVisible()"\
                         md-autocomplete-parent-scope>'+template+'</li>':'';}
function getInputElement(){if(attr.mdFloatingLabel){return'\
            <md-input-container ng-if="floatingLabel">\
              <label>{{floatingLabel}}</label>\
              <input type="search"\
                  '+(tabindex!=null?'tabindex="'+tabindex+'"':'')+'\
                  id="{{ inputId || \'fl-input-\' + $mdAutocompleteCtrl.id }}"\
                  name="{{inputName}}"\
                  autocomplete="off"\
                  ng-required="$mdAutocompleteCtrl.isRequired"\
                  ng-readonly="$mdAutocompleteCtrl.isReadonly"\
                  ng-minlength="inputMinlength"\
                  ng-maxlength="inputMaxlength"\
                  ng-disabled="$mdAutocompleteCtrl.isDisabled"\
                  ng-model="$mdAutocompleteCtrl.scope.searchText"\
                  ng-model-options="{ allowInvalid: true }"\
                  ng-keydown="$mdAutocompleteCtrl.keydown($event)"\
                  ng-blur="$mdAutocompleteCtrl.blur($event)"\
                  ng-focus="$mdAutocompleteCtrl.focus($event)"\
                  aria-owns="ul-{{$mdAutocompleteCtrl.id}}"\
                  aria-label="{{floatingLabel}}"\
                  aria-autocomplete="list"\
                  role="combobox"\
                  aria-haspopup="true"\
                  aria-activedescendant=""\
                  aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>\
              <div md-autocomplete-parent-scope md-autocomplete-replace>'+leftover+'</div>\
            </md-input-container>';}else{return'\
            <input type="search"\
                '+(tabindex!=null?'tabindex="'+tabindex+'"':'')+'\
                id="{{ inputId || \'input-\' + $mdAutocompleteCtrl.id }}"\
                name="{{inputName}}"\
                ng-if="!floatingLabel"\
                autocomplete="off"\
                ng-required="$mdAutocompleteCtrl.isRequired"\
                ng-disabled="$mdAutocompleteCtrl.isDisabled"\
                ng-readonly="$mdAutocompleteCtrl.isReadonly"\
                ng-minlength="inputMinlength"\
                ng-maxlength="inputMaxlength"\
                ng-model="$mdAutocompleteCtrl.scope.searchText"\
                ng-keydown="$mdAutocompleteCtrl.keydown($event)"\
                ng-blur="$mdAutocompleteCtrl.blur($event)"\
                ng-focus="$mdAutocompleteCtrl.focus($event)"\
                placeholder="{{placeholder}}"\
                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"\
                aria-label="{{placeholder}}"\
                aria-autocomplete="list"\
                role="combobox"\
                aria-haspopup="true"\
                aria-activedescendant=""\
                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>';}}
function getClearButton(){return''+'<button '+'type="button" '+'aria-label="Clear Input" '+'tabindex="-1" '+'ng-if="clearButton && $mdAutocompleteCtrl.scope.searchText" '+'ng-click="$mdAutocompleteCtrl.clear($event)">'+'<md-icon md-svg-src="'+$$mdSvgRegistry.mdClose+'"></md-icon>'+'</button>';}}};}})();(function(){"use strict";MdAutocompleteItemScopeDirective.$inject=["$compile","$mdUtil"];angular.module('material.components.autocomplete').directive('mdAutocompleteParentScope',MdAutocompleteItemScopeDirective);function MdAutocompleteItemScopeDirective($compile,$mdUtil){return{restrict:'AE',compile:compile,terminal:true,transclude:'element'};function compile(tElement,tAttr,transclude){return function postLink(scope,element,attr){var ctrl=scope.$mdAutocompleteCtrl;var newScope=ctrl.parent.$new();var itemName=ctrl.itemName;watchVariable('$index','$index');watchVariable('item',itemName);connectScopes();transclude(newScope,function(clone){element.after(clone);});function watchVariable(variable,alias){newScope[alias]=scope[variable];scope.$watch(variable,function(value){$mdUtil.nextTick(function(){newScope[alias]=value;});});}
function connectScopes(){var scopeDigesting=false;var newScopeDigesting=false;scope.$watch(function(){if(newScopeDigesting||scopeDigesting){return;}
scopeDigesting=true;scope.$$postDigest(function(){if(!newScopeDigesting){newScope.$digest();}
scopeDigesting=newScopeDigesting=false;});});newScope.$watch(function(){newScopeDigesting=true;});}};}}})();(function(){"use strict";MdHighlightCtrl.$inject=["$scope","$element","$attrs"];angular.module('material.components.autocomplete').controller('MdHighlightCtrl',MdHighlightCtrl);function MdHighlightCtrl($scope,$element,$attrs){this.$scope=$scope;this.$element=$element;this.$attrs=$attrs;this.regex=null;}
MdHighlightCtrl.prototype.init=function(unsafeTermFn,unsafeContentFn){this.flags=this.$attrs.mdHighlightFlags||'';this.unregisterFn=this.$scope.$watch(function($scope){return{term:unsafeTermFn($scope),contentText:unsafeContentFn($scope)};}.bind(this),this.onRender.bind(this),true);this.$element.on('$destroy',this.unregisterFn);};MdHighlightCtrl.prototype.onRender=function(state,prevState){var contentText=state.contentText;if(this.regex===null||state.term!==prevState.term){this.regex=this.createRegex(state.term,this.flags);}
if(state.term){this.applyRegex(contentText);}else{this.$element.text(contentText);}};MdHighlightCtrl.prototype.applyRegex=function(text){var tokens=this.resolveTokens(text);this.$element.empty();tokens.forEach(function(token){if(token.isMatch){var tokenEl=angular.element('<span class="highlight">').text(token.text);this.$element.append(tokenEl);}else{this.$element.append(document.createTextNode(token));}}.bind(this));};MdHighlightCtrl.prototype.resolveTokens=function(string){var tokens=[];var lastIndex=0;string.replace(this.regex,function(match,index){appendToken(lastIndex,index);tokens.push({text:match,isMatch:true});lastIndex=index+match.length;});appendToken(lastIndex);return tokens;function appendToken(from,to){var targetText=string.slice(from,to);targetText&&tokens.push(targetText);}};MdHighlightCtrl.prototype.createRegex=function(term,flags){var startFlag='',endFlag='';var regexTerm=this.sanitizeRegex(term);if(flags.indexOf('^')>=0)startFlag='^';if(flags.indexOf('$')>=0)endFlag='$';return new RegExp(startFlag+regexTerm+endFlag,flags.replace(/[$\^]/g,''));};MdHighlightCtrl.prototype.sanitizeRegex=function(term){return term&&term.toString().replace(/[\\\^\$\*\+\?\.\(\)\|\{}\[\]]/g,'\\$&');};})();(function(){"use strict";MdHighlight.$inject=["$interpolate","$parse"];angular.module('material.components.autocomplete').directive('mdHighlightText',MdHighlight);function MdHighlight($interpolate,$parse){return{terminal:true,controller:'MdHighlightCtrl',compile:function mdHighlightCompile(tElement,tAttr){var termExpr=$parse(tAttr.mdHighlightText);var unsafeContentExpr=$interpolate(tElement.html());return function mdHighlightLink(scope,element,attr,ctrl){ctrl.init(termExpr,unsafeContentExpr);};}};}})();(function(){"use strict";MdChipCtrl.$inject=["$scope","$element","$mdConstant","$timeout","$mdUtil"];angular.module('material.components.chips').controller('MdChipCtrl',MdChipCtrl);function MdChipCtrl($scope,$element,$mdConstant,$timeout,$mdUtil){this.$scope=$scope;this.$element=$element;this.$mdConstant=$mdConstant;this.$timeout=$timeout;this.$mdUtil=$mdUtil;this.isEditting=false;this.parentController=undefined;this.enableChipEdit=false;}
MdChipCtrl.prototype.init=function(controller){this.parentController=controller;this.enableChipEdit=this.parentController.enableChipEdit;if(this.enableChipEdit){this.$element.on('keydown',this.chipKeyDown.bind(this));this.$element.on('mousedown',this.chipMouseDown.bind(this));this.getChipContent().addClass('_md-chip-content-edit-is-enabled');}};MdChipCtrl.prototype.getChipContent=function(){var chipContents=this.$element[0].getElementsByClassName('md-chip-content');return angular.element(chipContents[0]);};MdChipCtrl.prototype.getContentElement=function(){return angular.element(this.getChipContent().children()[0]);};MdChipCtrl.prototype.getChipIndex=function(){return parseInt(this.$element.attr('index'));};MdChipCtrl.prototype.goOutOfEditMode=function(){if(!this.isEditting)return;this.isEditting=false;this.$element.removeClass('_md-chip-editing');this.getChipContent()[0].contentEditable='false';var chipIndex=this.getChipIndex();var content=this.getContentElement().text();if(content){this.parentController.updateChipContents(chipIndex,this.getContentElement().text());this.$mdUtil.nextTick(function(){if(this.parentController.selectedChip===chipIndex){this.parentController.focusChip(chipIndex);}}.bind(this));}else{this.parentController.removeChipAndFocusInput(chipIndex);}};MdChipCtrl.prototype.selectNodeContents=function(node){var range,selection;if(document.body.createTextRange){range=document.body.createTextRange();range.moveToElementText(node);range.select();}else if(window.getSelection){selection=window.getSelection();range=document.createRange();range.selectNodeContents(node);selection.removeAllRanges();selection.addRange(range);}};MdChipCtrl.prototype.goInEditMode=function(){this.isEditting=true;this.$element.addClass('_md-chip-editing');this.getChipContent()[0].contentEditable='true';this.getChipContent().on('blur',function(){this.goOutOfEditMode();}.bind(this));this.selectNodeContents(this.getChipContent()[0]);};MdChipCtrl.prototype.chipKeyDown=function(event){if(!this.isEditting&&(event.keyCode===this.$mdConstant.KEY_CODE.ENTER||event.keyCode===this.$mdConstant.KEY_CODE.SPACE)){event.preventDefault();this.goInEditMode();}else if(this.isEditting&&event.keyCode===this.$mdConstant.KEY_CODE.ENTER){event.preventDefault();this.goOutOfEditMode();}};MdChipCtrl.prototype.chipMouseDown=function(){if(this.getChipIndex()==this.parentController.selectedChip&&this.enableChipEdit&&!this.isEditting){this.goInEditMode();}};})();(function(){"use strict";MdChip.$inject=["$mdTheming","$mdUtil","$compile","$timeout"];angular.module('material.components.chips').directive('mdChip',MdChip);var DELETE_HINT_TEMPLATE='\
    <span ng-if="!$mdChipsCtrl.readonly" class="md-visually-hidden">\
      {{$mdChipsCtrl.deleteHint}}\
    </span>';function MdChip($mdTheming,$mdUtil,$compile,$timeout){var deleteHintTemplate=$mdUtil.processTemplate(DELETE_HINT_TEMPLATE);return{restrict:'E',require:['^?mdChips','mdChip'],link:postLink,controller:'MdChipCtrl'};function postLink(scope,element,attr,ctrls){var chipsController=ctrls.shift();var chipController=ctrls.shift();var chipContentElement=angular.element(element[0].querySelector('.md-chip-content'));$mdTheming(element);if(chipsController){chipController.init(chipsController);chipContentElement.append($compile(deleteHintTemplate)(scope));chipContentElement.on('blur',function(){chipsController.resetSelectedChip();chipsController.$scope.$applyAsync();});}
$timeout(function(){if(!chipsController){return;}
if(chipsController.shouldFocusLastChip){chipsController.focusLastChipThenInput();}});}}})();(function(){"use strict";MdChipRemove.$inject=["$timeout"];angular.module('material.components.chips').directive('mdChipRemove',MdChipRemove);function MdChipRemove($timeout){return{restrict:'A',require:'^mdChips',scope:false,link:postLink};function postLink(scope,element,attr,ctrl){element.on('click',function(event){scope.$apply(function(){ctrl.removeChip(scope.$$replacedScope.$index);});});$timeout(function(){element.attr({tabindex:-1,'aria-hidden':true});element.find('button').attr('tabindex','-1');});}}})();(function(){"use strict";MdChipTransclude.$inject=["$compile"];angular.module('material.components.chips').directive('mdChipTransclude',MdChipTransclude);function MdChipTransclude($compile){return{restrict:'EA',terminal:true,link:link,scope:false};function link(scope,element,attr){var ctrl=scope.$parent.$mdChipsCtrl,newScope=ctrl.parent.$new(false,ctrl.parent);newScope.$$replacedScope=scope;newScope.$chip=scope.$chip;newScope.$index=scope.$index;newScope.$mdChipsCtrl=ctrl;var newHtml=ctrl.$scope.$eval(attr.mdChipTransclude);element.html(newHtml);$compile(element.contents())(newScope);}}})();(function(){"use strict";MdChipsCtrl.$inject=["$scope","$attrs","$mdConstant","$log","$element","$timeout","$mdUtil"];var DEFAULT_CHIP_APPEND_DELAY=300;angular.module('material.components.chips').controller('MdChipsCtrl',MdChipsCtrl);function MdChipsCtrl($scope,$attrs,$mdConstant,$log,$element,$timeout,$mdUtil){this.$timeout=$timeout;this.$mdConstant=$mdConstant;this.$scope=$scope;this.parent=$scope.$parent;this.$mdUtil=$mdUtil;this.$log=$log;this.$element=$element;this.$attrs=$attrs;this.ngModelCtrl=null;this.userInputNgModelCtrl=null;this.autocompleteCtrl=null;this.userInputElement=null;this.items=[];this.selectedChip=-1;this.enableChipEdit=$mdUtil.parseAttributeBoolean($attrs.mdEnableChipEdit);this.addOnBlur=$mdUtil.parseAttributeBoolean($attrs.mdAddOnBlur);this.inputAriaLabel='Chips input.';this.containerHint='Chips container. Use arrow keys to select chips.';this.deleteHint='Press delete to remove this chip.';this.deleteButtonLabel='Remove';this.chipBuffer='';this.useTransformChip=false;this.useOnAdd=false;this.useOnRemove=false;this.wrapperId='';this.contentIds=[];this.ariaTabIndex=null;this.chipAppendDelay=DEFAULT_CHIP_APPEND_DELAY;this.init();}
MdChipsCtrl.prototype.init=function(){var ctrl=this;ctrl.wrapperId='_md-chips-wrapper-'+ctrl.$mdUtil.nextUid();ctrl.$scope.$watchCollection('$mdChipsCtrl.items',function(){ctrl.setupInputAria();ctrl.setupWrapperAria();});ctrl.$attrs.$observe('mdChipAppendDelay',function(newValue){ctrl.chipAppendDelay=parseInt(newValue)||DEFAULT_CHIP_APPEND_DELAY;});};MdChipsCtrl.prototype.setupInputAria=function(){var input=this.$element.find('input');if(!input){return;}
input.attr('role','textbox');input.attr('aria-multiline',true);};MdChipsCtrl.prototype.setupWrapperAria=function(){var ctrl=this,wrapper=this.$element.find('md-chips-wrap');if(this.items&&this.items.length){wrapper.attr('role','listbox');this.contentIds=this.items.map(function(){return ctrl.wrapperId+'-chip-'+ctrl.$mdUtil.nextUid();});wrapper.attr('aria-owns',this.contentIds.join(' '));}else{wrapper.removeAttr('role');wrapper.removeAttr('aria-owns');}};MdChipsCtrl.prototype.inputKeydown=function(event){var chipBuffer=this.getChipBuffer();if(this.autocompleteCtrl&&event.isDefaultPrevented&&event.isDefaultPrevented()){return;}
if(event.keyCode===this.$mdConstant.KEY_CODE.BACKSPACE){if(this.getCursorPosition(event.target)!==0){return;}
event.preventDefault();event.stopPropagation();if(this.items.length){this.selectAndFocusChipSafe(this.items.length-1);}
return;}
if(!this.separatorKeys||this.separatorKeys.length<1){this.separatorKeys=[this.$mdConstant.KEY_CODE.ENTER];}
if(this.separatorKeys.indexOf(event.keyCode)!==-1){if((this.autocompleteCtrl&&this.requireMatch)||!chipBuffer)return;event.preventDefault();if(this.hasMaxChipsReached())return;this.appendChip(chipBuffer.trim());this.resetChipBuffer();return false;}};MdChipsCtrl.prototype.getCursorPosition=function(element){try{if(element.selectionStart===element.selectionEnd){return element.selectionStart;}}catch(e){if(!element.value){return 0;}}};MdChipsCtrl.prototype.updateChipContents=function(chipIndex,chipContents){if(chipIndex>=0&&chipIndex<this.items.length){this.items[chipIndex]=chipContents;this.ngModelCtrl.$setDirty();}};MdChipsCtrl.prototype.isEditingChip=function(){return!!this.$element[0].querySelector('._md-chip-editing');};MdChipsCtrl.prototype.isRemovable=function(){if(!this.ngModelCtrl){return false;}
return this.readonly?this.removable:angular.isDefined(this.removable)?this.removable:true;};MdChipsCtrl.prototype.chipKeydown=function(event){if(this.getChipBuffer())return;if(this.isEditingChip())return;switch(event.keyCode){case this.$mdConstant.KEY_CODE.BACKSPACE:case this.$mdConstant.KEY_CODE.DELETE:if(this.selectedChip<0)return;event.preventDefault();if(!this.isRemovable())return;this.removeAndSelectAdjacentChip(this.selectedChip);break;case this.$mdConstant.KEY_CODE.LEFT_ARROW:event.preventDefault();if(this.selectedChip<0||(this.readonly&&this.selectedChip==0)){this.selectedChip=this.items.length;}
if(this.items.length)this.selectAndFocusChipSafe(this.selectedChip-1);break;case this.$mdConstant.KEY_CODE.RIGHT_ARROW:event.preventDefault();this.selectAndFocusChipSafe(this.selectedChip+1);break;case this.$mdConstant.KEY_CODE.ESCAPE:case this.$mdConstant.KEY_CODE.TAB:if(this.selectedChip<0)return;event.preventDefault();this.onFocus();break;}};MdChipsCtrl.prototype.getPlaceholder=function(){var useSecondary=(this.items&&this.items.length&&(this.secondaryPlaceholder==''||this.secondaryPlaceholder));return useSecondary?this.secondaryPlaceholder:this.placeholder;};MdChipsCtrl.prototype.removeAndSelectAdjacentChip=function(index){var self=this;var selIndex=self.getAdjacentChipIndex(index);var wrap=this.$element[0].querySelector('md-chips-wrap');var chip=this.$element[0].querySelector('md-chip[index="'+index+'"]');self.removeChip(index);self.$timeout(function(){self.$timeout(function(){self.selectAndFocusChipSafe(selIndex);});});};MdChipsCtrl.prototype.resetSelectedChip=function(){this.selectedChip=-1;this.ariaTabIndex=null;};MdChipsCtrl.prototype.getAdjacentChipIndex=function(index){var len=this.items.length-1;return(len==0)?-1:(index==len)?index-1:index;};MdChipsCtrl.prototype.appendChip=function(newChip){this.shouldFocusLastChip=true;if(this.useTransformChip&&this.transformChip){var transformedChip=this.transformChip({'$chip':newChip});if(angular.isDefined(transformedChip)){newChip=transformedChip;}}
if(angular.isObject(newChip)){var identical=this.items.some(function(item){return angular.equals(newChip,item);});if(identical)return;}
if(newChip==null||this.items.indexOf(newChip)+1)return;var length=this.items.push(newChip);var index=length-1;this.ngModelCtrl.$setDirty();this.validateModel();if(this.useOnAdd&&this.onAdd){this.onAdd({'$chip':newChip,'$index':index});}};MdChipsCtrl.prototype.useTransformChipExpression=function(){this.useTransformChip=true;};MdChipsCtrl.prototype.useOnAddExpression=function(){this.useOnAdd=true;};MdChipsCtrl.prototype.useOnRemoveExpression=function(){this.useOnRemove=true;};MdChipsCtrl.prototype.useOnSelectExpression=function(){this.useOnSelect=true;};MdChipsCtrl.prototype.getChipBuffer=function(){var chipBuffer=!this.userInputElement?this.chipBuffer:this.userInputNgModelCtrl?this.userInputNgModelCtrl.$viewValue:this.userInputElement[0].value;return angular.isString(chipBuffer)?chipBuffer:'';};MdChipsCtrl.prototype.resetChipBuffer=function(){if(this.userInputElement){if(this.userInputNgModelCtrl){this.userInputNgModelCtrl.$setViewValue('');this.userInputNgModelCtrl.$render();}else{this.userInputElement[0].value='';}}else{this.chipBuffer='';}};MdChipsCtrl.prototype.hasMaxChipsReached=function(){if(angular.isString(this.maxChips))this.maxChips=parseInt(this.maxChips,10)||0;return this.maxChips>0&&this.items.length>=this.maxChips;};MdChipsCtrl.prototype.validateModel=function(){this.ngModelCtrl.$setValidity('md-max-chips',!this.hasMaxChipsReached());};MdChipsCtrl.prototype.removeChip=function(index){var removed=this.items.splice(index,1);this.ngModelCtrl.$setDirty();this.validateModel();if(removed&&removed.length&&this.useOnRemove&&this.onRemove){this.onRemove({'$chip':removed[0],'$index':index});}};MdChipsCtrl.prototype.removeChipAndFocusInput=function(index){this.removeChip(index);if(this.autocompleteCtrl){this.autocompleteCtrl.hidden=true;this.$mdUtil.nextTick(this.onFocus.bind(this));}else{this.onFocus();}};MdChipsCtrl.prototype.selectAndFocusChipSafe=function(index){if(!this.items.length||index===-1){return this.focusInput();}
if(index>=this.items.length){if(this.readonly){index=0;}else{return this.onFocus();}}
index=Math.max(index,0);index=Math.min(index,this.items.length-1);this.selectChip(index);this.focusChip(index);};MdChipsCtrl.prototype.focusLastChipThenInput=function(){var ctrl=this;ctrl.shouldFocusLastChip=false;ctrl.focusChip(this.items.length-1);ctrl.$timeout(function(){ctrl.focusInput();},ctrl.chipAppendDelay);};MdChipsCtrl.prototype.focusInput=function(){this.selectChip(-1);this.onFocus();};MdChipsCtrl.prototype.selectChip=function(index){if(index>=-1&&index<=this.items.length){this.selectedChip=index;if(this.useOnSelect&&this.onSelect){this.onSelect({'$chip':this.items[index]});}}else{this.$log.warn('Selected Chip index out of bounds; ignoring.');}};MdChipsCtrl.prototype.selectAndFocusChip=function(index){this.selectChip(index);if(index!=-1){this.focusChip(index);}};MdChipsCtrl.prototype.focusChip=function(index){var chipContent=this.$element[0].querySelector('md-chip[index="'+index+'"] .md-chip-content');this.ariaTabIndex=index;chipContent.focus();};MdChipsCtrl.prototype.configureNgModel=function(ngModelCtrl){this.ngModelCtrl=ngModelCtrl;var self=this;ngModelCtrl.$render=function(){self.items=self.ngModelCtrl.$viewValue;};};MdChipsCtrl.prototype.onFocus=function(){var input=this.$element[0].querySelector('input');input&&input.focus();this.resetSelectedChip();};MdChipsCtrl.prototype.onInputFocus=function(){this.inputHasFocus=true;this.setupInputAria();this.resetSelectedChip();};MdChipsCtrl.prototype.onInputBlur=function(){this.inputHasFocus=false;if(this.shouldAddOnBlur()){this.appendChip(this.getChipBuffer().trim());this.resetChipBuffer();}};MdChipsCtrl.prototype.configureUserInput=function(inputElement){this.userInputElement=inputElement;var ngModelCtrl=inputElement.controller('ngModel');if(ngModelCtrl!=this.ngModelCtrl){this.userInputNgModelCtrl=ngModelCtrl;}
var scope=this.$scope;var ctrl=this;var scopeApplyFn=function(event,fn){scope.$evalAsync(angular.bind(ctrl,fn,event));};inputElement.attr({tabindex:0}).on('keydown',function(event){scopeApplyFn(event,ctrl.inputKeydown)}).on('focus',function(event){scopeApplyFn(event,ctrl.onInputFocus)}).on('blur',function(event){scopeApplyFn(event,ctrl.onInputBlur)})};MdChipsCtrl.prototype.configureAutocomplete=function(ctrl){if(ctrl){this.autocompleteCtrl=ctrl;ctrl.registerSelectedItemWatcher(angular.bind(this,function(item){if(item){if(this.hasMaxChipsReached())return;this.appendChip(item);this.resetChipBuffer();}}));this.$element.find('input').on('focus',angular.bind(this,this.onInputFocus)).on('blur',angular.bind(this,this.onInputBlur));}};MdChipsCtrl.prototype.shouldAddOnBlur=function(){this.validateModel();var chipBuffer=this.getChipBuffer().trim();var isModelValid=this.ngModelCtrl.$valid;var isAutocompleteShowing=this.autocompleteCtrl&&!this.autocompleteCtrl.hidden;if(this.userInputNgModelCtrl){isModelValid=isModelValid&&this.userInputNgModelCtrl.$valid;}
return this.addOnBlur&&!this.requireMatch&&chipBuffer&&isModelValid&&!isAutocompleteShowing;};MdChipsCtrl.prototype.hasFocus=function(){return this.inputHasFocus||this.selectedChip>=0;};MdChipsCtrl.prototype.contentIdFor=function(index){return this.contentIds[index];};})();(function(){"use strict";MdChips.$inject=["$mdTheming","$mdUtil","$compile","$log","$timeout","$$mdSvgRegistry"];angular.module('material.components.chips').directive('mdChips',MdChips);var MD_CHIPS_TEMPLATE='\
      <md-chips-wrap\
          id="{{$mdChipsCtrl.wrapperId}}"\
          tabindex="{{$mdChipsCtrl.readonly ? 0 : -1}}"\
          ng-keydown="$mdChipsCtrl.chipKeydown($event)"\
          ng-class="{ \'md-focused\': $mdChipsCtrl.hasFocus(), \
                      \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly,\
                      \'md-removable\': $mdChipsCtrl.isRemovable() }"\
          aria-setsize="{{$mdChipsCtrl.items.length}}"\
          class="md-chips">\
        <span ng-if="$mdChipsCtrl.readonly" class="md-visually-hidden">\
          {{$mdChipsCtrl.containerHint}}\
        </span>\
        <md-chip ng-repeat="$chip in $mdChipsCtrl.items"\
            index="{{$index}}"\
            ng-class="{\'md-focused\': $mdChipsCtrl.selectedChip == $index, \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly}">\
          <div class="md-chip-content"\
              tabindex="{{$mdChipsCtrl.ariaTabIndex == $index ? 0 : -1}}"\
              id="{{$mdChipsCtrl.contentIdFor($index)}}"\
              role="option"\
              aria-selected="{{$mdChipsCtrl.selectedChip == $index}}" \
              aria-posinset="{{$index}}"\
              ng-click="!$mdChipsCtrl.readonly && $mdChipsCtrl.focusChip($index)"\
              ng-focus="!$mdChipsCtrl.readonly && $mdChipsCtrl.selectChip($index)"\
              md-chip-transclude="$mdChipsCtrl.chipContentsTemplate"></div>\
          <div ng-if="$mdChipsCtrl.isRemovable()"\
               class="md-chip-remove-container"\
               tabindex="-1"\
               md-chip-transclude="$mdChipsCtrl.chipRemoveTemplate"></div>\
        </md-chip>\
        <div class="md-chip-input-container" ng-if="!$mdChipsCtrl.readonly && $mdChipsCtrl.ngModelCtrl">\
          <div md-chip-transclude="$mdChipsCtrl.chipInputTemplate"></div>\
        </div>\
      </md-chips-wrap>';var CHIP_INPUT_TEMPLATE='\
        <input\
            class="md-input"\
            tabindex="0"\
            aria-label="{{$mdChipsCtrl.inputAriaLabel}}" \
            placeholder="{{$mdChipsCtrl.getPlaceholder()}}"\
            ng-model="$mdChipsCtrl.chipBuffer"\
            ng-focus="$mdChipsCtrl.onInputFocus()"\
            ng-blur="$mdChipsCtrl.onInputBlur()"\
            ng-keydown="$mdChipsCtrl.inputKeydown($event)">';var CHIP_DEFAULT_TEMPLATE='\
      <span>{{$chip}}</span>';var CHIP_REMOVE_TEMPLATE='\
      <button\
          class="md-chip-remove"\
          ng-if="$mdChipsCtrl.isRemovable()"\
          ng-click="$mdChipsCtrl.removeChipAndFocusInput($$replacedScope.$index)"\
          type="button"\
          tabindex="-1">\
        <md-icon md-svg-src="{{ $mdChipsCtrl.mdCloseIcon }}"></md-icon>\
        <span class="md-visually-hidden">\
          {{$mdChipsCtrl.deleteButtonLabel}}\
        </span>\
      </button>';function MdChips($mdTheming,$mdUtil,$compile,$log,$timeout,$$mdSvgRegistry){var templates=getTemplates();return{template:function(element,attrs){attrs['$mdUserTemplate']=element.clone();return templates.chips;},require:['mdChips'],restrict:'E',controller:'MdChipsCtrl',controllerAs:'$mdChipsCtrl',bindToController:true,compile:compile,scope:{readonly:'=readonly',removable:'=mdRemovable',placeholder:'@',secondaryPlaceholder:'@',maxChips:'@mdMaxChips',transformChip:'&mdTransformChip',onAppend:'&mdOnAppend',onAdd:'&mdOnAdd',onRemove:'&mdOnRemove',onSelect:'&mdOnSelect',inputAriaLabel:'@',containerHint:'@',deleteHint:'@',deleteButtonLabel:'@',separatorKeys:'=?mdSeparatorKeys',requireMatch:'=?mdRequireMatch',chipAppendDelayString:'@?mdChipAppendDelay'}};function compile(element,attr){var userTemplate=attr['$mdUserTemplate'];attr['$mdUserTemplate']=null;var chipTemplate=getTemplateByQuery('md-chips>md-chip-template');var chipRemoveSelector=$mdUtil.prefixer().buildList('md-chip-remove').map(function(attr){return'md-chips>*['+attr+']';}).join(',');var chipRemoveTemplate=getTemplateByQuery(chipRemoveSelector)||templates.remove,chipContentsTemplate=chipTemplate||templates.default,chipInputTemplate=getTemplateByQuery('md-chips>md-autocomplete')||getTemplateByQuery('md-chips>input')||templates.input,staticChips=userTemplate.find('md-chip');if(userTemplate[0].querySelector('md-chip-template>*[md-chip-remove]')){$log.warn('invalid placement of md-chip-remove within md-chip-template.');}
function getTemplateByQuery(query){if(!attr.ngModel)return;var element=userTemplate[0].querySelector(query);return element&&element.outerHTML;}
return function postLink(scope,element,attrs,controllers){$mdUtil.initOptionalProperties(scope,attr);$mdTheming(element);var mdChipsCtrl=controllers[0];if(chipTemplate){mdChipsCtrl.enableChipEdit=false;}
mdChipsCtrl.chipContentsTemplate=chipContentsTemplate;mdChipsCtrl.chipRemoveTemplate=chipRemoveTemplate;mdChipsCtrl.chipInputTemplate=chipInputTemplate;mdChipsCtrl.mdCloseIcon=$$mdSvgRegistry.mdClose;element.attr({tabindex:-1}).on('focus',function(){mdChipsCtrl.onFocus();});if(attr.ngModel){mdChipsCtrl.configureNgModel(element.controller('ngModel'));if(attrs.mdTransformChip)mdChipsCtrl.useTransformChipExpression();if(attrs.mdOnAppend)mdChipsCtrl.useOnAppendExpression();if(attrs.mdOnAdd)mdChipsCtrl.useOnAddExpression();if(attrs.mdOnRemove)mdChipsCtrl.useOnRemoveExpression();if(attrs.mdOnSelect)mdChipsCtrl.useOnSelectExpression();if(chipInputTemplate!=templates.input){scope.$watch('$mdChipsCtrl.readonly',function(readonly){if(!readonly){$mdUtil.nextTick(function(){if(chipInputTemplate.indexOf('<md-autocomplete')===0){var autocompleteEl=element.find('md-autocomplete');mdChipsCtrl.configureAutocomplete(autocompleteEl.controller('mdAutocomplete'));}
mdChipsCtrl.configureUserInput(element.find('input'));});}});}
$mdUtil.nextTick(function(){var input=element.find('input');input&&input.toggleClass('md-input',true);});}
if(staticChips.length>0){var compiledStaticChips=$compile(staticChips.clone())(scope.$parent);$timeout(function(){element.find('md-chips-wrap').prepend(compiledStaticChips);});}};}
function getTemplates(){return{chips:$mdUtil.processTemplate(MD_CHIPS_TEMPLATE),input:$mdUtil.processTemplate(CHIP_INPUT_TEMPLATE),default:$mdUtil.processTemplate(CHIP_DEFAULT_TEMPLATE),remove:$mdUtil.processTemplate(CHIP_REMOVE_TEMPLATE)};}}})();(function(){"use strict";angular.module('material.components.chips').controller('MdContactChipsCtrl',MdContactChipsCtrl);function MdContactChipsCtrl(){this.selectedItem=null;this.searchText='';}
MdContactChipsCtrl.prototype.queryContact=function(searchText){return this.contactQuery({'$query':searchText});};MdContactChipsCtrl.prototype.itemName=function(item){return item[this.contactName];};})();(function(){"use strict";MdContactChips.$inject=["$mdTheming","$mdUtil"];angular.module('material.components.chips').directive('mdContactChips',MdContactChips);var MD_CONTACT_CHIPS_TEMPLATE='\
      <md-chips class="md-contact-chips"\
          ng-model="$mdContactChipsCtrl.contacts"\
          md-require-match="$mdContactChipsCtrl.requireMatch"\
          md-chip-append-delay="{{$mdContactChipsCtrl.chipAppendDelay}}" \
          md-autocomplete-snap>\
          <md-autocomplete\
              md-menu-class="md-contact-chips-suggestions"\
              md-selected-item="$mdContactChipsCtrl.selectedItem"\
              md-search-text="$mdContactChipsCtrl.searchText"\
              md-items="item in $mdContactChipsCtrl.queryContact($mdContactChipsCtrl.searchText)"\
              md-item-text="$mdContactChipsCtrl.itemName(item)"\
              md-no-cache="true"\
              md-min-length="$mdContactChipsCtrl.minLength"\
              md-autoselect\
              placeholder="{{$mdContactChipsCtrl.contacts.length == 0 ?\
                  $mdContactChipsCtrl.placeholder : $mdContactChipsCtrl.secondaryPlaceholder}}">\
            <div class="md-contact-suggestion">\
              <img \
                  ng-src="{{item[$mdContactChipsCtrl.contactImage]}}"\
                  alt="{{item[$mdContactChipsCtrl.contactName]}}"\
                  ng-if="item[$mdContactChipsCtrl.contactImage]" />\
              <span class="md-contact-name" md-highlight-text="$mdContactChipsCtrl.searchText"\
                    md-highlight-flags="{{$mdContactChipsCtrl.highlightFlags}}">\
                {{item[$mdContactChipsCtrl.contactName]}}\
              </span>\
              <span class="md-contact-email" >{{item[$mdContactChipsCtrl.contactEmail]}}</span>\
            </div>\
          </md-autocomplete>\
          <md-chip-template>\
            <div class="md-contact-avatar">\
              <img \
                  ng-src="{{$chip[$mdContactChipsCtrl.contactImage]}}"\
                  alt="{{$chip[$mdContactChipsCtrl.contactName]}}"\
                  ng-if="$chip[$mdContactChipsCtrl.contactImage]" />\
            </div>\
            <div class="md-contact-name">\
              {{$chip[$mdContactChipsCtrl.contactName]}}\
            </div>\
          </md-chip-template>\
      </md-chips>';function MdContactChips($mdTheming,$mdUtil){return{template:function(element,attrs){return MD_CONTACT_CHIPS_TEMPLATE;},restrict:'E',controller:'MdContactChipsCtrl',controllerAs:'$mdContactChipsCtrl',bindToController:true,compile:compile,scope:{contactQuery:'&mdContacts',placeholder:'@',secondaryPlaceholder:'@',contactName:'@mdContactName',contactImage:'@mdContactImage',contactEmail:'@mdContactEmail',contacts:'=ngModel',requireMatch:'=?mdRequireMatch',minLength:'=?mdMinLength',highlightFlags:'@?mdHighlightFlags',chipAppendDelay:'@?mdChipAppendDelay'}};function compile(element,attr){return function postLink(scope,element,attrs,controllers){var contactChipsController=controllers;$mdUtil.initOptionalProperties(scope,attr);$mdTheming(element);element.attr('tabindex','-1');attrs.$observe('mdChipAppendDelay',function(newValue){contactChipsController.chipAppendDelay=newValue;});};}}})();(function(){"use strict";(function(){'use strict';CalendarCtrl.$inject=["$element","$scope","$$mdDateUtil","$mdUtil","$mdConstant","$mdTheming","$$rAF","$attrs","$mdDateLocale"];angular.module('material.components.datepicker').directive('mdCalendar',calendarDirective);function calendarDirective(){return{template:function(tElement,tAttr){var extraAttrs=tAttr.hasOwnProperty('ngIf')?'':'ng-if="calendarCtrl.isInitialized"';var template=''+'<div ng-switch="calendarCtrl.currentView" '+extraAttrs+'>'+'<md-calendar-year ng-switch-when="year"></md-calendar-year>'+'<md-calendar-month ng-switch-default></md-calendar-month>'+'</div>';return template;},scope:{minDate:'=mdMinDate',maxDate:'=mdMaxDate',dateFilter:'=mdDateFilter',_currentView:'@mdCurrentView'},require:['ngModel','mdCalendar'],controller:CalendarCtrl,controllerAs:'calendarCtrl',bindToController:true,link:function(scope,element,attrs,controllers){var ngModelCtrl=controllers[0];var mdCalendarCtrl=controllers[1];mdCalendarCtrl.configureNgModel(ngModelCtrl);}};}
var FALLBACK_WIDTH=340;var nextUniqueId=0;function CalendarCtrl($element,$scope,$$mdDateUtil,$mdUtil,$mdConstant,$mdTheming,$$rAF,$attrs,$mdDateLocale){$mdTheming($element);this.$element=$element;this.$scope=$scope;this.dateUtil=$$mdDateUtil;this.$mdUtil=$mdUtil;this.keyCode=$mdConstant.KEY_CODE;this.$$rAF=$$rAF;this.$mdDateLocale=$mdDateLocale;this.today=this.dateUtil.createDateAtMidnight();this.ngModelCtrl=null;this.SELECTED_DATE_CLASS='md-calendar-selected-date';this.TODAY_CLASS='md-calendar-date-today';this.FOCUSED_DATE_CLASS='md-focus';this.id=nextUniqueId++;this.displayDate=null;this.selectedDate=null;this.firstRenderableDate=null;this.lastRenderableDate=null;this.isInitialized=false;this.width=0;this.scrollbarWidth=0;if(!$attrs.tabindex){$element.attr('tabindex','-1');}
var boundKeyHandler=angular.bind(this,this.handleKeyEvent);var handleKeyElement;if($element.parent().hasClass('md-datepicker-calendar')){handleKeyElement=angular.element(document.body);}else{handleKeyElement=$element;}
handleKeyElement.on('keydown',boundKeyHandler);$scope.$on('$destroy',function(){handleKeyElement.off('keydown',boundKeyHandler);});if(angular.version.major===1&&angular.version.minor<=4){this.$onInit();}}
CalendarCtrl.prototype.$onInit=function(){this.currentView=this._currentView||'month';var dateLocale=this.$mdDateLocale;if(this.minDate&&this.minDate>dateLocale.firstRenderableDate){this.firstRenderableDate=this.minDate;}else{this.firstRenderableDate=dateLocale.firstRenderableDate;}
if(this.maxDate&&this.maxDate<dateLocale.lastRenderableDate){this.lastRenderableDate=this.maxDate;}else{this.lastRenderableDate=dateLocale.lastRenderableDate;}};CalendarCtrl.prototype.configureNgModel=function(ngModelCtrl){var self=this;self.ngModelCtrl=ngModelCtrl;self.$mdUtil.nextTick(function(){self.isInitialized=true;});ngModelCtrl.$render=function(){var value=this.$viewValue;self.$scope.$broadcast('md-calendar-parent-changed',value);if(!self.selectedDate){self.selectedDate=value;}
if(!self.displayDate){self.displayDate=self.selectedDate||self.today;}};};CalendarCtrl.prototype.setNgModelValue=function(date){var value=this.dateUtil.createDateAtMidnight(date);this.focus(value);this.$scope.$emit('md-calendar-change',value);this.ngModelCtrl.$setViewValue(value);this.ngModelCtrl.$render();return value;};CalendarCtrl.prototype.setCurrentView=function(newView,time){var self=this;self.$mdUtil.nextTick(function(){self.currentView=newView;if(time){self.displayDate=angular.isDate(time)?time:new Date(time);}});};CalendarCtrl.prototype.focus=function(date){if(this.dateUtil.isValidDate(date)){var previousFocus=this.$element[0].querySelector('.md-focus');if(previousFocus){previousFocus.classList.remove(this.FOCUSED_DATE_CLASS);}
var cellId=this.getDateId(date,this.currentView);var cell=document.getElementById(cellId);if(cell){cell.classList.add(this.FOCUSED_DATE_CLASS);cell.focus();this.displayDate=date;}}else{var rootElement=this.$element[0].querySelector('[ng-switch]');if(rootElement){rootElement.focus();}}};CalendarCtrl.prototype.getActionFromKeyEvent=function(event){var keyCode=this.keyCode;switch(event.which){case keyCode.ENTER:return'select';case keyCode.RIGHT_ARROW:return'move-right';case keyCode.LEFT_ARROW:return'move-left';case keyCode.DOWN_ARROW:return event.metaKey?'move-page-down':'move-row-down';case keyCode.UP_ARROW:return event.metaKey?'move-page-up':'move-row-up';case keyCode.PAGE_DOWN:return'move-page-down';case keyCode.PAGE_UP:return'move-page-up';case keyCode.HOME:return'start';case keyCode.END:return'end';default:return null;}};CalendarCtrl.prototype.handleKeyEvent=function(event){var self=this;this.$scope.$apply(function(){if(event.which==self.keyCode.ESCAPE||event.which==self.keyCode.TAB){self.$scope.$emit('md-calendar-close');if(event.which==self.keyCode.TAB){event.preventDefault();}
return;}
var action=self.getActionFromKeyEvent(event);if(action){event.preventDefault();event.stopPropagation();self.$scope.$broadcast('md-calendar-parent-action',action);}});};CalendarCtrl.prototype.hideVerticalScrollbar=function(childCtrl){var self=this;var element=childCtrl.$element[0];var scrollMask=element.querySelector('.md-calendar-scroll-mask');if(self.width>0){setWidth();}else{self.$$rAF(function(){var scroller=childCtrl.calendarScroller;self.scrollbarWidth=scroller.offsetWidth-scroller.clientWidth;self.width=element.querySelector('table').offsetWidth;setWidth();});}
function setWidth(){var width=self.width||FALLBACK_WIDTH;var scrollbarWidth=self.scrollbarWidth;var scroller=childCtrl.calendarScroller;scrollMask.style.width=width+'px';scroller.style.width=(width+scrollbarWidth)+'px';scroller.style.paddingRight=scrollbarWidth+'px';}};CalendarCtrl.prototype.getDateId=function(date,namespace){if(!namespace){throw new Error('A namespace for the date id has to be specified.');}
return['md',this.id,namespace,date.getFullYear(),date.getMonth(),date.getDate()].join('-');};CalendarCtrl.prototype.updateVirtualRepeat=function(){var scope=this.$scope;var virtualRepeatResizeListener=scope.$on('$md-resize-enable',function(){if(!scope.$$phase){scope.$apply();}
virtualRepeatResizeListener();});};})();})();(function(){"use strict";(function(){'use strict';CalendarMonthCtrl.$inject=["$element","$scope","$animate","$q","$$mdDateUtil","$mdDateLocale"];angular.module('material.components.datepicker').directive('mdCalendarMonth',calendarDirective);var TBODY_HEIGHT=265;var TBODY_SINGLE_ROW_HEIGHT=45;function calendarDirective(){return{template:'<table aria-hidden="true" class="md-calendar-day-header"><thead></thead></table>'+'<div class="md-calendar-scroll-mask">'+'<md-virtual-repeat-container class="md-calendar-scroll-container" '+'md-offset-size="'+(TBODY_SINGLE_ROW_HEIGHT-TBODY_HEIGHT)+'">'+'<table role="grid" tabindex="0" class="md-calendar" aria-readonly="true">'+'<tbody '+'md-calendar-month-body '+'role="rowgroup" '+'md-virtual-repeat="i in monthCtrl.items" '+'md-month-offset="$index" '+'class="md-calendar-month" '+'md-start-index="monthCtrl.getSelectedMonthIndex()" '+'md-item-size="'+TBODY_HEIGHT+'">'+'<tr aria-hidden="true" md-force-height="\''+TBODY_HEIGHT+'px\'"></tr>'+'</tbody>'+'</table>'+'</md-virtual-repeat-container>'+'</div>',require:['^^mdCalendar','mdCalendarMonth'],controller:CalendarMonthCtrl,controllerAs:'monthCtrl',bindToController:true,link:function(scope,element,attrs,controllers){var calendarCtrl=controllers[0];var monthCtrl=controllers[1];monthCtrl.initialize(calendarCtrl);}};}
function CalendarMonthCtrl($element,$scope,$animate,$q,$$mdDateUtil,$mdDateLocale){this.$element=$element;this.$scope=$scope;this.$animate=$animate;this.$q=$q;this.dateUtil=$$mdDateUtil;this.dateLocale=$mdDateLocale;this.calendarScroller=$element[0].querySelector('.md-virtual-repeat-scroller');this.isInitialized=false;this.isMonthTransitionInProgress=false;var self=this;this.cellClickHandler=function(){var timestamp=$$mdDateUtil.getTimestampFromNode(this);self.$scope.$apply(function(){self.calendarCtrl.setNgModelValue(timestamp);});};this.headerClickHandler=function(){self.calendarCtrl.setCurrentView('year',$$mdDateUtil.getTimestampFromNode(this));};}
CalendarMonthCtrl.prototype.initialize=function(calendarCtrl){this.items={length:this.dateUtil.getMonthDistance(calendarCtrl.firstRenderableDate,calendarCtrl.lastRenderableDate)+2};this.calendarCtrl=calendarCtrl;this.attachScopeListeners();calendarCtrl.updateVirtualRepeat();calendarCtrl.ngModelCtrl&&calendarCtrl.ngModelCtrl.$render();};CalendarMonthCtrl.prototype.getSelectedMonthIndex=function(){var calendarCtrl=this.calendarCtrl;return this.dateUtil.getMonthDistance(calendarCtrl.firstRenderableDate,calendarCtrl.displayDate||calendarCtrl.selectedDate||calendarCtrl.today);};CalendarMonthCtrl.prototype.changeSelectedDate=function(date){var self=this;var calendarCtrl=self.calendarCtrl;var previousSelectedDate=calendarCtrl.selectedDate;calendarCtrl.selectedDate=date;this.changeDisplayDate(date).then(function(){var selectedDateClass=calendarCtrl.SELECTED_DATE_CLASS;var namespace='month';if(previousSelectedDate){var prevDateCell=document.getElementById(calendarCtrl.getDateId(previousSelectedDate,namespace));if(prevDateCell){prevDateCell.classList.remove(selectedDateClass);prevDateCell.setAttribute('aria-selected','false');}}
if(date){var dateCell=document.getElementById(calendarCtrl.getDateId(date,namespace));if(dateCell){dateCell.classList.add(selectedDateClass);dateCell.setAttribute('aria-selected','true');}}});};CalendarMonthCtrl.prototype.changeDisplayDate=function(date){if(!this.isInitialized){this.buildWeekHeader();this.calendarCtrl.hideVerticalScrollbar(this);this.isInitialized=true;return this.$q.when();}
if(!this.dateUtil.isValidDate(date)||this.isMonthTransitionInProgress){return this.$q.when();}
this.isMonthTransitionInProgress=true;var animationPromise=this.animateDateChange(date);this.calendarCtrl.displayDate=date;var self=this;animationPromise.then(function(){self.isMonthTransitionInProgress=false;});return animationPromise;};CalendarMonthCtrl.prototype.animateDateChange=function(date){if(this.dateUtil.isValidDate(date)){var monthDistance=this.dateUtil.getMonthDistance(this.calendarCtrl.firstRenderableDate,date);this.calendarScroller.scrollTop=monthDistance*TBODY_HEIGHT;}
return this.$q.when();};CalendarMonthCtrl.prototype.buildWeekHeader=function(){var firstDayOfWeek=this.dateLocale.firstDayOfWeek;var shortDays=this.dateLocale.shortDays;var row=document.createElement('tr');for(var i=0;i<7;i++){var th=document.createElement('th');th.textContent=shortDays[(i+firstDayOfWeek)%7];row.appendChild(th);}
this.$element.find('thead').append(row);};CalendarMonthCtrl.prototype.attachScopeListeners=function(){var self=this;self.$scope.$on('md-calendar-parent-changed',function(event,value){self.changeSelectedDate(value);});self.$scope.$on('md-calendar-parent-action',angular.bind(this,this.handleKeyEvent));};CalendarMonthCtrl.prototype.handleKeyEvent=function(event,action){var calendarCtrl=this.calendarCtrl;var displayDate=calendarCtrl.displayDate;if(action==='select'){calendarCtrl.setNgModelValue(displayDate);}else{var date=null;var dateUtil=this.dateUtil;switch(action){case'move-right':date=dateUtil.incrementDays(displayDate,1);break;case'move-left':date=dateUtil.incrementDays(displayDate,-1);break;case'move-page-down':date=dateUtil.incrementMonths(displayDate,1);break;case'move-page-up':date=dateUtil.incrementMonths(displayDate,-1);break;case'move-row-down':date=dateUtil.incrementDays(displayDate,7);break;case'move-row-up':date=dateUtil.incrementDays(displayDate,-7);break;case'start':date=dateUtil.getFirstDateOfMonth(displayDate);break;case'end':date=dateUtil.getLastDateOfMonth(displayDate);break;}
if(date){date=this.dateUtil.clampDate(date,calendarCtrl.minDate,calendarCtrl.maxDate);this.changeDisplayDate(date).then(function(){calendarCtrl.focus(date);});}}};})();})();(function(){"use strict";(function(){'use strict';mdCalendarMonthBodyDirective.$inject=["$compile","$$mdSvgRegistry"];CalendarMonthBodyCtrl.$inject=["$element","$$mdDateUtil","$mdDateLocale"];angular.module('material.components.datepicker').directive('mdCalendarMonthBody',mdCalendarMonthBodyDirective);function mdCalendarMonthBodyDirective($compile,$$mdSvgRegistry){var ARROW_ICON=$compile('<md-icon md-svg-src="'+
$$mdSvgRegistry.mdTabsArrow+'"></md-icon>')({})[0];return{require:['^^mdCalendar','^^mdCalendarMonth','mdCalendarMonthBody'],scope:{offset:'=mdMonthOffset'},controller:CalendarMonthBodyCtrl,controllerAs:'mdMonthBodyCtrl',bindToController:true,link:function(scope,element,attrs,controllers){var calendarCtrl=controllers[0];var monthCtrl=controllers[1];var monthBodyCtrl=controllers[2];monthBodyCtrl.calendarCtrl=calendarCtrl;monthBodyCtrl.monthCtrl=monthCtrl;monthBodyCtrl.arrowIcon=ARROW_ICON.cloneNode(true);scope.$watch(function(){return monthBodyCtrl.offset;},function(offset){if(angular.isNumber(offset)){monthBodyCtrl.generateContent();}});}};}
function CalendarMonthBodyCtrl($element,$$mdDateUtil,$mdDateLocale){this.$element=$element;this.dateUtil=$$mdDateUtil;this.dateLocale=$mdDateLocale;this.monthCtrl=null;this.calendarCtrl=null;this.offset=null;this.focusAfterAppend=null;}
CalendarMonthBodyCtrl.prototype.generateContent=function(){var date=this.dateUtil.incrementMonths(this.calendarCtrl.firstRenderableDate,this.offset);this.$element.empty().append(this.buildCalendarForMonth(date));if(this.focusAfterAppend){this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS);this.focusAfterAppend.focus();this.focusAfterAppend=null;}};CalendarMonthBodyCtrl.prototype.buildDateCell=function(opt_date){var monthCtrl=this.monthCtrl;var calendarCtrl=this.calendarCtrl;var cell=document.createElement('td');cell.tabIndex=-1;cell.classList.add('md-calendar-date');cell.setAttribute('role','gridcell');if(opt_date){cell.setAttribute('tabindex','-1');cell.setAttribute('aria-label',this.dateLocale.longDateFormatter(opt_date));cell.id=calendarCtrl.getDateId(opt_date,'month');cell.setAttribute('data-timestamp',opt_date.getTime());if(this.dateUtil.isSameDay(opt_date,calendarCtrl.today)){cell.classList.add(calendarCtrl.TODAY_CLASS);}
if(this.dateUtil.isValidDate(calendarCtrl.selectedDate)&&this.dateUtil.isSameDay(opt_date,calendarCtrl.selectedDate)){cell.classList.add(calendarCtrl.SELECTED_DATE_CLASS);cell.setAttribute('aria-selected','true');}
var cellText=this.dateLocale.dates[opt_date.getDate()];if(this.isDateEnabled(opt_date)){var selectionIndicator=document.createElement('span');selectionIndicator.classList.add('md-calendar-date-selection-indicator');selectionIndicator.textContent=cellText;cell.appendChild(selectionIndicator);cell.addEventListener('click',monthCtrl.cellClickHandler);if(calendarCtrl.displayDate&&this.dateUtil.isSameDay(opt_date,calendarCtrl.displayDate)){this.focusAfterAppend=cell;}}else{cell.classList.add('md-calendar-date-disabled');cell.textContent=cellText;}}
return cell;};CalendarMonthBodyCtrl.prototype.isDateEnabled=function(opt_date){return this.dateUtil.isDateWithinRange(opt_date,this.calendarCtrl.minDate,this.calendarCtrl.maxDate)&&(!angular.isFunction(this.calendarCtrl.dateFilter)||this.calendarCtrl.dateFilter(opt_date));};CalendarMonthBodyCtrl.prototype.buildDateRow=function(rowNumber){var row=document.createElement('tr');row.setAttribute('role','row');row.setAttribute('aria-label',this.dateLocale.weekNumberFormatter(rowNumber));return row;};CalendarMonthBodyCtrl.prototype.buildCalendarForMonth=function(opt_dateInMonth){var date=this.dateUtil.isValidDate(opt_dateInMonth)?opt_dateInMonth:new Date();var firstDayOfMonth=this.dateUtil.getFirstDateOfMonth(date);var firstDayOfTheWeek=this.getLocaleDay_(firstDayOfMonth);var numberOfDaysInMonth=this.dateUtil.getNumberOfDaysInMonth(date);var monthBody=document.createDocumentFragment();var rowNumber=1;var row=this.buildDateRow(rowNumber);monthBody.appendChild(row);var isFinalMonth=this.offset===this.monthCtrl.items.length-1;var blankCellOffset=0;var monthLabelCell=document.createElement('td');var monthLabelCellContent=document.createElement('span');monthLabelCellContent.textContent=this.dateLocale.monthHeaderFormatter(date);monthLabelCell.appendChild(monthLabelCellContent);monthLabelCell.classList.add('md-calendar-month-label');if(this.calendarCtrl.maxDate&&firstDayOfMonth>this.calendarCtrl.maxDate){monthLabelCell.classList.add('md-calendar-month-label-disabled');}else{monthLabelCell.addEventListener('click',this.monthCtrl.headerClickHandler);monthLabelCell.setAttribute('data-timestamp',firstDayOfMonth.getTime());monthLabelCell.setAttribute('aria-label',this.dateLocale.monthFormatter(date));monthLabelCell.appendChild(this.arrowIcon.cloneNode(true));}
if(firstDayOfTheWeek<=2){monthLabelCell.setAttribute('colspan','7');var monthLabelRow=this.buildDateRow();monthLabelRow.appendChild(monthLabelCell);monthBody.insertBefore(monthLabelRow,row);if(isFinalMonth){return monthBody;}}else{blankCellOffset=3;monthLabelCell.setAttribute('colspan','3');row.appendChild(monthLabelCell);}
for(var i=blankCellOffset;i<firstDayOfTheWeek;i++){row.appendChild(this.buildDateCell());}
var dayOfWeek=firstDayOfTheWeek;var iterationDate=firstDayOfMonth;for(var d=1;d<=numberOfDaysInMonth;d++){if(dayOfWeek===7){if(isFinalMonth){return monthBody;}
dayOfWeek=0;rowNumber++;row=this.buildDateRow(rowNumber);monthBody.appendChild(row);}
iterationDate.setDate(d);var cell=this.buildDateCell(iterationDate);row.appendChild(cell);dayOfWeek++;}
while(row.childNodes.length<7){row.appendChild(this.buildDateCell());}
while(monthBody.childNodes.length<6){var whitespaceRow=this.buildDateRow();for(var j=0;j<7;j++){whitespaceRow.appendChild(this.buildDateCell());}
monthBody.appendChild(whitespaceRow);}
return monthBody;};CalendarMonthBodyCtrl.prototype.getLocaleDay_=function(date){return(date.getDay()+(7-this.dateLocale.firstDayOfWeek))%7;};})();})();(function(){"use strict";(function(){'use strict';CalendarYearCtrl.$inject=["$element","$scope","$animate","$q","$$mdDateUtil"];angular.module('material.components.datepicker').directive('mdCalendarYear',calendarDirective);var TBODY_HEIGHT=88;function calendarDirective(){return{template:'<div class="md-calendar-scroll-mask">'+'<md-virtual-repeat-container class="md-calendar-scroll-container">'+'<table role="grid" tabindex="0" class="md-calendar" aria-readonly="true">'+'<tbody '+'md-calendar-year-body '+'role="rowgroup" '+'md-virtual-repeat="i in yearCtrl.items" '+'md-year-offset="$index" class="md-calendar-year" '+'md-start-index="yearCtrl.getFocusedYearIndex()" '+'md-item-size="'+TBODY_HEIGHT+'">'+'<tr aria-hidden="true" md-force-height="\''+TBODY_HEIGHT+'px\'"></tr>'+'</tbody>'+'</table>'+'</md-virtual-repeat-container>'+'</div>',require:['^^mdCalendar','mdCalendarYear'],controller:CalendarYearCtrl,controllerAs:'yearCtrl',bindToController:true,link:function(scope,element,attrs,controllers){var calendarCtrl=controllers[0];var yearCtrl=controllers[1];yearCtrl.initialize(calendarCtrl);}};}
function CalendarYearCtrl($element,$scope,$animate,$q,$$mdDateUtil){this.$element=$element;this.$scope=$scope;this.$animate=$animate;this.$q=$q;this.dateUtil=$$mdDateUtil;this.calendarScroller=$element[0].querySelector('.md-virtual-repeat-scroller');this.isInitialized=false;this.isMonthTransitionInProgress=false;var self=this;this.cellClickHandler=function(){self.calendarCtrl.setCurrentView('month',$$mdDateUtil.getTimestampFromNode(this));};}
CalendarYearCtrl.prototype.initialize=function(calendarCtrl){this.items={length:this.dateUtil.getYearDistance(calendarCtrl.firstRenderableDate,calendarCtrl.lastRenderableDate)+1};this.calendarCtrl=calendarCtrl;this.attachScopeListeners();calendarCtrl.updateVirtualRepeat();calendarCtrl.ngModelCtrl&&calendarCtrl.ngModelCtrl.$render();};CalendarYearCtrl.prototype.getFocusedYearIndex=function(){var calendarCtrl=this.calendarCtrl;return this.dateUtil.getYearDistance(calendarCtrl.firstRenderableDate,calendarCtrl.displayDate||calendarCtrl.selectedDate||calendarCtrl.today);};CalendarYearCtrl.prototype.changeDate=function(date){if(!this.isInitialized){this.calendarCtrl.hideVerticalScrollbar(this);this.isInitialized=true;return this.$q.when();}else if(this.dateUtil.isValidDate(date)&&!this.isMonthTransitionInProgress){var self=this;var animationPromise=this.animateDateChange(date);self.isMonthTransitionInProgress=true;self.calendarCtrl.displayDate=date;return animationPromise.then(function(){self.isMonthTransitionInProgress=false;});}};CalendarYearCtrl.prototype.animateDateChange=function(date){if(this.dateUtil.isValidDate(date)){var monthDistance=this.dateUtil.getYearDistance(this.calendarCtrl.firstRenderableDate,date);this.calendarScroller.scrollTop=monthDistance*TBODY_HEIGHT;}
return this.$q.when();};CalendarYearCtrl.prototype.handleKeyEvent=function(event,action){var calendarCtrl=this.calendarCtrl;var displayDate=calendarCtrl.displayDate;if(action==='select'){this.changeDate(displayDate).then(function(){calendarCtrl.setCurrentView('month',displayDate);calendarCtrl.focus(displayDate);});}else{var date=null;var dateUtil=this.dateUtil;switch(action){case'move-right':date=dateUtil.incrementMonths(displayDate,1);break;case'move-left':date=dateUtil.incrementMonths(displayDate,-1);break;case'move-row-down':date=dateUtil.incrementMonths(displayDate,6);break;case'move-row-up':date=dateUtil.incrementMonths(displayDate,-6);break;}
if(date){var min=calendarCtrl.minDate?dateUtil.getFirstDateOfMonth(calendarCtrl.minDate):null;var max=calendarCtrl.maxDate?dateUtil.getFirstDateOfMonth(calendarCtrl.maxDate):null;date=dateUtil.getFirstDateOfMonth(this.dateUtil.clampDate(date,min,max));this.changeDate(date).then(function(){calendarCtrl.focus(date);});}}};CalendarYearCtrl.prototype.attachScopeListeners=function(){var self=this;self.$scope.$on('md-calendar-parent-changed',function(event,value){self.changeDate(value);});self.$scope.$on('md-calendar-parent-action',angular.bind(self,self.handleKeyEvent));};})();})();(function(){"use strict";(function(){'use strict';CalendarYearBodyCtrl.$inject=["$element","$$mdDateUtil","$mdDateLocale"];angular.module('material.components.datepicker').directive('mdCalendarYearBody',mdCalendarYearDirective);function mdCalendarYearDirective(){return{require:['^^mdCalendar','^^mdCalendarYear','mdCalendarYearBody'],scope:{offset:'=mdYearOffset'},controller:CalendarYearBodyCtrl,controllerAs:'mdYearBodyCtrl',bindToController:true,link:function(scope,element,attrs,controllers){var calendarCtrl=controllers[0];var yearCtrl=controllers[1];var yearBodyCtrl=controllers[2];yearBodyCtrl.calendarCtrl=calendarCtrl;yearBodyCtrl.yearCtrl=yearCtrl;scope.$watch(function(){return yearBodyCtrl.offset;},function(offset){if(angular.isNumber(offset)){yearBodyCtrl.generateContent();}});}};}
function CalendarYearBodyCtrl($element,$$mdDateUtil,$mdDateLocale){this.$element=$element;this.dateUtil=$$mdDateUtil;this.dateLocale=$mdDateLocale;this.calendarCtrl=null;this.yearCtrl=null;this.offset=null;this.focusAfterAppend=null;}
CalendarYearBodyCtrl.prototype.generateContent=function(){var date=this.dateUtil.incrementYears(this.calendarCtrl.firstRenderableDate,this.offset);this.$element.empty().append(this.buildCalendarForYear(date));if(this.focusAfterAppend){this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS);this.focusAfterAppend.focus();this.focusAfterAppend=null;}};CalendarYearBodyCtrl.prototype.buildMonthCell=function(year,month){var calendarCtrl=this.calendarCtrl;var yearCtrl=this.yearCtrl;var cell=this.buildBlankCell();var firstOfMonth=new Date(year,month,1);cell.setAttribute('aria-label',this.dateLocale.monthFormatter(firstOfMonth));cell.id=calendarCtrl.getDateId(firstOfMonth,'year');cell.setAttribute('data-timestamp',firstOfMonth.getTime());if(this.dateUtil.isSameMonthAndYear(firstOfMonth,calendarCtrl.today)){cell.classList.add(calendarCtrl.TODAY_CLASS);}
if(this.dateUtil.isValidDate(calendarCtrl.selectedDate)&&this.dateUtil.isSameMonthAndYear(firstOfMonth,calendarCtrl.selectedDate)){cell.classList.add(calendarCtrl.SELECTED_DATE_CLASS);cell.setAttribute('aria-selected','true');}
var cellText=this.dateLocale.shortMonths[month];if(this.dateUtil.isMonthWithinRange(firstOfMonth,calendarCtrl.minDate,calendarCtrl.maxDate)){var selectionIndicator=document.createElement('span');selectionIndicator.classList.add('md-calendar-date-selection-indicator');selectionIndicator.textContent=cellText;cell.appendChild(selectionIndicator);cell.addEventListener('click',yearCtrl.cellClickHandler);if(calendarCtrl.displayDate&&this.dateUtil.isSameMonthAndYear(firstOfMonth,calendarCtrl.displayDate)){this.focusAfterAppend=cell;}}else{cell.classList.add('md-calendar-date-disabled');cell.textContent=cellText;}
return cell;};CalendarYearBodyCtrl.prototype.buildBlankCell=function(){var cell=document.createElement('td');cell.tabIndex=-1;cell.classList.add('md-calendar-date');cell.setAttribute('role','gridcell');cell.setAttribute('tabindex','-1');return cell;};CalendarYearBodyCtrl.prototype.buildCalendarForYear=function(date){var year=date.getFullYear();var yearBody=document.createDocumentFragment();var monthCell,i;var firstRow=document.createElement('tr');var labelCell=document.createElement('td');labelCell.className='md-calendar-month-label';labelCell.textContent=year;firstRow.appendChild(labelCell);for(i=0;i<6;i++){firstRow.appendChild(this.buildMonthCell(year,i));}
yearBody.appendChild(firstRow);var secondRow=document.createElement('tr');secondRow.appendChild(this.buildBlankCell());for(i=6;i<12;i++){secondRow.appendChild(this.buildMonthCell(year,i));}
yearBody.appendChild(secondRow);return yearBody;};})();})();(function(){"use strict";(function(){'use strict';angular.module('material.components.datepicker').config(["$provide",function($provide){function DateLocaleProvider(){this.months=null;this.shortMonths=null;this.days=null;this.shortDays=null;this.dates=null;this.firstDayOfWeek=0;this.formatDate=null;this.parseDate=null;this.monthHeaderFormatter=null;this.weekNumberFormatter=null;this.longDateFormatter=null;this.msgCalendar='';this.msgOpenCalendar='';}
DateLocaleProvider.prototype.$get=function($locale,$filter){function defaultFormatDate(date,timezone){if(!date){return'';}
var localeTime=date.toLocaleTimeString();var formatDate=date;if(date.getHours()===0&&(localeTime.indexOf('11:')!==-1||localeTime.indexOf('23:')!==-1)){formatDate=new Date(date.getFullYear(),date.getMonth(),date.getDate(),1,0,0);}
return $filter('date')(formatDate,'M/d/yyyy',timezone);}
function defaultParseDate(dateString){return new Date(dateString);}
function defaultIsDateComplete(dateString){dateString=dateString.trim();var re=/^(([a-zA-Z]{3,}|[0-9]{1,4})([ \.,]+|[\/\-])){2}([a-zA-Z]{3,}|[0-9]{1,4})$/;return re.test(dateString);}
function defaultMonthHeaderFormatter(date){return service.shortMonths[date.getMonth()]+' '+date.getFullYear();}
function defaultMonthFormatter(date){return service.months[date.getMonth()]+' '+date.getFullYear();}
function defaultWeekNumberFormatter(number){return'Week '+number;}
function defaultLongDateFormatter(date){return[service.days[date.getDay()],service.months[date.getMonth()],service.dates[date.getDate()],date.getFullYear()].join(' ');}
var defaultShortDays=$locale.DATETIME_FORMATS.SHORTDAY.map(function(day){return day.substring(0,1);});var defaultDates=Array(32);for(var i=1;i<=31;i++){defaultDates[i]=i;}
var defaultMsgCalendar='Calendar';var defaultMsgOpenCalendar='Open calendar';var defaultFirstRenderableDate=new Date(1880,0,1);var defaultLastRendereableDate=new Date(defaultFirstRenderableDate.getFullYear()+250,0,1);var service={months:this.months||$locale.DATETIME_FORMATS.MONTH,shortMonths:this.shortMonths||$locale.DATETIME_FORMATS.SHORTMONTH,days:this.days||$locale.DATETIME_FORMATS.DAY,shortDays:this.shortDays||defaultShortDays,dates:this.dates||defaultDates,firstDayOfWeek:this.firstDayOfWeek||0,formatDate:this.formatDate||defaultFormatDate,parseDate:this.parseDate||defaultParseDate,isDateComplete:this.isDateComplete||defaultIsDateComplete,monthHeaderFormatter:this.monthHeaderFormatter||defaultMonthHeaderFormatter,monthFormatter:this.monthFormatter||defaultMonthFormatter,weekNumberFormatter:this.weekNumberFormatter||defaultWeekNumberFormatter,longDateFormatter:this.longDateFormatter||defaultLongDateFormatter,msgCalendar:this.msgCalendar||defaultMsgCalendar,msgOpenCalendar:this.msgOpenCalendar||defaultMsgOpenCalendar,firstRenderableDate:this.firstRenderableDate||defaultFirstRenderableDate,lastRenderableDate:this.lastRenderableDate||defaultLastRendereableDate};return service;};DateLocaleProvider.prototype.$get.$inject=["$locale","$filter"];$provide.provider('$mdDateLocale',new DateLocaleProvider());}]);})();})();(function(){"use strict";(function(){'use strict';angular.module('material.components.datepicker').factory('$$mdDateUtil',function(){return{getFirstDateOfMonth:getFirstDateOfMonth,getNumberOfDaysInMonth:getNumberOfDaysInMonth,getDateInNextMonth:getDateInNextMonth,getDateInPreviousMonth:getDateInPreviousMonth,isInNextMonth:isInNextMonth,isInPreviousMonth:isInPreviousMonth,getDateMidpoint:getDateMidpoint,isSameMonthAndYear:isSameMonthAndYear,getWeekOfMonth:getWeekOfMonth,incrementDays:incrementDays,incrementMonths:incrementMonths,getLastDateOfMonth:getLastDateOfMonth,isSameDay:isSameDay,getMonthDistance:getMonthDistance,isValidDate:isValidDate,setDateTimeToMidnight:setDateTimeToMidnight,createDateAtMidnight:createDateAtMidnight,isDateWithinRange:isDateWithinRange,incrementYears:incrementYears,getYearDistance:getYearDistance,clampDate:clampDate,getTimestampFromNode:getTimestampFromNode,isMonthWithinRange:isMonthWithinRange};function getFirstDateOfMonth(date){return new Date(date.getFullYear(),date.getMonth(),1);}
function getNumberOfDaysInMonth(date){return new Date(date.getFullYear(),date.getMonth()+1,0).getDate();}
function getDateInNextMonth(date){return new Date(date.getFullYear(),date.getMonth()+1,1);}
function getDateInPreviousMonth(date){return new Date(date.getFullYear(),date.getMonth()-1,1);}
function isSameMonthAndYear(d1,d2){return d1.getFullYear()===d2.getFullYear()&&d1.getMonth()===d2.getMonth();}
function isSameDay(d1,d2){return d1.getDate()==d2.getDate()&&isSameMonthAndYear(d1,d2);}
function isInNextMonth(startDate,endDate){var nextMonth=getDateInNextMonth(startDate);return isSameMonthAndYear(nextMonth,endDate);}
function isInPreviousMonth(startDate,endDate){var previousMonth=getDateInPreviousMonth(startDate);return isSameMonthAndYear(endDate,previousMonth);}
function getDateMidpoint(d1,d2){return createDateAtMidnight((d1.getTime()+d2.getTime())/2);}
function getWeekOfMonth(date){var firstDayOfMonth=getFirstDateOfMonth(date);return Math.floor((firstDayOfMonth.getDay()+date.getDate()-1)/7);}
function incrementDays(date,numberOfDays){return new Date(date.getFullYear(),date.getMonth(),date.getDate()+numberOfDays);}
function incrementMonths(date,numberOfMonths){var dateInTargetMonth=new Date(date.getFullYear(),date.getMonth()+numberOfMonths,1);var numberOfDaysInMonth=getNumberOfDaysInMonth(dateInTargetMonth);if(numberOfDaysInMonth<date.getDate()){dateInTargetMonth.setDate(numberOfDaysInMonth);}else{dateInTargetMonth.setDate(date.getDate());}
return dateInTargetMonth;}
function getMonthDistance(start,end){return(12*(end.getFullYear()-start.getFullYear()))+(end.getMonth()-start.getMonth());}
function getLastDateOfMonth(date){return new Date(date.getFullYear(),date.getMonth(),getNumberOfDaysInMonth(date));}
function isValidDate(date){return date&&date.getTime&&!isNaN(date.getTime());}
function setDateTimeToMidnight(date){if(isValidDate(date)){date.setHours(0,0,0,0);}}
function createDateAtMidnight(opt_value){var date;if(angular.isUndefined(opt_value)){date=new Date();}else{date=new Date(opt_value);}
setDateTimeToMidnight(date);return date;}
function isDateWithinRange(date,minDate,maxDate){var dateAtMidnight=createDateAtMidnight(date);var minDateAtMidnight=isValidDate(minDate)?createDateAtMidnight(minDate):null;var maxDateAtMidnight=isValidDate(maxDate)?createDateAtMidnight(maxDate):null;return(!minDateAtMidnight||minDateAtMidnight<=dateAtMidnight)&&(!maxDateAtMidnight||maxDateAtMidnight>=dateAtMidnight);}
function incrementYears(date,numberOfYears){return incrementMonths(date,numberOfYears*12);}
function getYearDistance(start,end){return end.getFullYear()-start.getFullYear();}
function clampDate(date,minDate,maxDate){var boundDate=date;if(minDate&&date<minDate){boundDate=new Date(minDate.getTime());}
if(maxDate&&date>maxDate){boundDate=new Date(maxDate.getTime());}
return boundDate;}
function getTimestampFromNode(node){if(node&&node.hasAttribute('data-timestamp')){return Number(node.getAttribute('data-timestamp'));}}
function isMonthWithinRange(date,minDate,maxDate){var month=date.getMonth();var year=date.getFullYear();return(!minDate||minDate.getFullYear()<year||minDate.getMonth()<=month)&&(!maxDate||maxDate.getFullYear()>year||maxDate.getMonth()>=month);}});})();})();(function(){"use strict";(function(){'use strict';DatePickerCtrl.$inject=["$scope","$element","$attrs","$window","$mdConstant","$mdTheming","$mdUtil","$mdDateLocale","$$mdDateUtil","$$rAF","$filter"];datePickerDirective.$inject=["$$mdSvgRegistry","$mdUtil","$mdAria","inputDirective"];angular.module('material.components.datepicker').directive('mdDatepicker',datePickerDirective);function datePickerDirective($$mdSvgRegistry,$mdUtil,$mdAria,inputDirective){return{template:function(tElement,tAttrs){var hiddenIcons=tAttrs.mdHideIcons;var ariaLabelValue=tAttrs.ariaLabel||tAttrs.mdPlaceholder;var calendarButton=(hiddenIcons==='all'||hiddenIcons==='calendar')?'':'<md-button class="md-datepicker-button md-icon-button" type="button" '+'tabindex="-1" aria-hidden="true" '+'ng-click="ctrl.openCalendarPane($event)">'+'<md-icon class="md-datepicker-calendar-icon" aria-label="md-calendar" '+'md-svg-src="'+$$mdSvgRegistry.mdCalendar+'"></md-icon>'+'</md-button>';var triangleButton='';if(hiddenIcons!=='all'&&hiddenIcons!=='triangle'){triangleButton=''+'<md-button type="button" md-no-ink '+'class="md-datepicker-triangle-button md-icon-button" '+'ng-click="ctrl.openCalendarPane($event)" '+'aria-label="{{::ctrl.locale.msgOpenCalendar}}">'+'<div class="md-datepicker-expand-triangle"></div>'+'</md-button>';tElement.addClass(HAS_TRIANGLE_ICON_CLASS);}
return calendarButton+'<div class="md-datepicker-input-container" ng-class="{\'md-datepicker-focused\': ctrl.isFocused}">'+'<input '+
(ariaLabelValue?'aria-label="'+ariaLabelValue+'" ':'')+'class="md-datepicker-input" '+'aria-haspopup="true" '+'aria-expanded="{{ctrl.isCalendarOpen}}" '+'ng-focus="ctrl.setFocused(true)" '+'ng-blur="ctrl.setFocused(false)"> '+
triangleButton+'</div>'+'<div class="md-datepicker-calendar-pane md-whiteframe-z1" id="{{::ctrl.calendarPaneId}}">'+'<div class="md-datepicker-input-mask">'+'<div class="md-datepicker-input-mask-opaque"></div>'+'</div>'+'<div class="md-datepicker-calendar">'+'<md-calendar role="dialog" aria-label="{{::ctrl.locale.msgCalendar}}" '+'md-current-view="{{::ctrl.currentView}}"'+'md-min-date="ctrl.minDate"'+'md-max-date="ctrl.maxDate"'+'md-date-filter="ctrl.dateFilter"'+'ng-model="ctrl.date" ng-if="ctrl.isCalendarOpen">'+'</md-calendar>'+'</div>'+'</div>';},require:['ngModel','mdDatepicker','?^mdInputContainer','?^form'],scope:{minDate:'=mdMinDate',maxDate:'=mdMaxDate',placeholder:'@mdPlaceholder',currentView:'@mdCurrentView',dateFilter:'=mdDateFilter',isOpen:'=?mdIsOpen',debounceInterval:'=mdDebounceInterval',dateLocale:'=mdDateLocale'},controller:DatePickerCtrl,controllerAs:'ctrl',bindToController:true,link:function(scope,element,attr,controllers){var ngModelCtrl=controllers[0];var mdDatePickerCtrl=controllers[1];var mdInputContainer=controllers[2];var parentForm=controllers[3];var mdNoAsterisk=$mdUtil.parseAttributeBoolean(attr.mdNoAsterisk);mdDatePickerCtrl.configureNgModel(ngModelCtrl,mdInputContainer,inputDirective);if(mdInputContainer){var spacer=element[0].querySelector('.md-errors-spacer');if(spacer){element.after(angular.element('<div>').append(spacer));}
mdInputContainer.setHasPlaceholder(attr.mdPlaceholder);mdInputContainer.input=element;mdInputContainer.element.addClass(INPUT_CONTAINER_CLASS).toggleClass(HAS_CALENDAR_ICON_CLASS,attr.mdHideIcons!=='calendar'&&attr.mdHideIcons!=='all');if(!mdInputContainer.label){$mdAria.expect(element,'aria-label',attr.mdPlaceholder);}else if(!mdNoAsterisk){attr.$observe('required',function(value){mdInputContainer.label.toggleClass('md-required',!!value);});}
scope.$watch(mdInputContainer.isErrorGetter||function(){return ngModelCtrl.$invalid&&(ngModelCtrl.$touched||(parentForm&&parentForm.$submitted));},mdInputContainer.setInvalid);}else if(parentForm){var parentSubmittedWatcher=scope.$watch(function(){return parentForm.$submitted;},function(isSubmitted){if(isSubmitted){mdDatePickerCtrl.updateErrorState();parentSubmittedWatcher();}});}}};}
var EXTRA_INPUT_SIZE=3;var INVALID_CLASS='md-datepicker-invalid';var OPEN_CLASS='md-datepicker-open';var INPUT_CONTAINER_CLASS='_md-datepicker-floating-label';var HAS_CALENDAR_ICON_CLASS='_md-datepicker-has-calendar-icon';var HAS_TRIANGLE_ICON_CLASS='_md-datepicker-has-triangle-icon';var DEFAULT_DEBOUNCE_INTERVAL=500;var CALENDAR_PANE_HEIGHT=368;var CALENDAR_PANE_WIDTH=360;var IS_MOBILE_REGEX=/ipad|iphone|ipod|android/i;function DatePickerCtrl($scope,$element,$attrs,$window,$mdConstant,$mdTheming,$mdUtil,$mdDateLocale,$$mdDateUtil,$$rAF,$filter){this.$window=$window;this.dateUtil=$$mdDateUtil;this.$mdConstant=$mdConstant;this.$mdUtil=$mdUtil;this.$$rAF=$$rAF;this.$mdDateLocale=$mdDateLocale;this.documentElement=angular.element(document.documentElement);this.ngModelCtrl=null;this.inputElement=$element[0].querySelector('input');this.ngInputElement=angular.element(this.inputElement);this.inputContainer=$element[0].querySelector('.md-datepicker-input-container');this.calendarPane=$element[0].querySelector('.md-datepicker-calendar-pane');this.calendarButton=$element[0].querySelector('.md-datepicker-button');this.inputMask=angular.element($element[0].querySelector('.md-datepicker-input-mask-opaque'));this.$element=$element;this.$attrs=$attrs;this.$scope=$scope;this.date=null;this.isFocused=false;this.isDisabled;this.setDisabled($element[0].disabled||angular.isString($attrs.disabled));this.isCalendarOpen=false;this.openOnFocus=$attrs.hasOwnProperty('mdOpenOnFocus');this.mdInputContainer=null;this.calendarPaneOpenedFrom=null;this.calendarPaneId='md-date-pane-'+$mdUtil.nextUid();this.bodyClickHandler=angular.bind(this,this.handleBodyClick);this.windowEventName=IS_MOBILE_REGEX.test(navigator.userAgent||navigator.vendor||window.opera)?'orientationchange':'resize';this.windowEventHandler=$mdUtil.debounce(angular.bind(this,this.closeCalendarPane),100);this.windowBlurHandler=angular.bind(this,this.handleWindowBlur);this.ngDateFilter=$filter('date');this.leftMargin=20;this.topMargin=null;if($attrs.tabindex){this.ngInputElement.attr('tabindex',$attrs.tabindex);$attrs.$set('tabindex',null);}else{$attrs.$set('tabindex','-1');}
$attrs.$set('aria-owns',this.calendarPaneId);$mdTheming($element);$mdTheming(angular.element(this.calendarPane));var self=this;$scope.$on('$destroy',function(){self.detachCalendarPane();});if($attrs.mdIsOpen){$scope.$watch('ctrl.isOpen',function(shouldBeOpen){if(shouldBeOpen){self.openCalendarPane({target:self.inputElement});}else{self.closeCalendarPane();}});}
if(angular.version.major===1&&angular.version.minor<=4){this.$onInit();}}
DatePickerCtrl.prototype.$onInit=function(){this.locale=this.dateLocale?angular.extend({},this.$mdDateLocale,this.dateLocale):this.$mdDateLocale;this.installPropertyInterceptors();this.attachChangeListeners();this.attachInteractionListeners();};DatePickerCtrl.prototype.configureNgModel=function(ngModelCtrl,mdInputContainer,inputDirective){this.ngModelCtrl=ngModelCtrl;this.mdInputContainer=mdInputContainer;this.$attrs.$set('type','date');inputDirective[0].link.pre(this.$scope,{on:angular.noop,val:angular.noop,0:{}},this.$attrs,[ngModelCtrl]);var self=this;self.ngModelCtrl.$formatters.push(function(value){var parsedValue=angular.isDefined(value)?Date.parse(value):null;if(!isNaN(parsedValue)&&angular.isNumber(parsedValue)){value=new Date(parsedValue);}
if(value&&!(value instanceof Date)){throw Error('The ng-model for md-datepicker must be a Date instance or a value '+'that can be parsed into a date. Currently the model is of type: '+typeof value);}
self.onExternalChange(value);return value;});ngModelCtrl.$viewChangeListeners.unshift(angular.bind(this,this.updateErrorState));var updateOn=self.$mdUtil.getModelOption(ngModelCtrl,'updateOn');if(updateOn){this.ngInputElement.on(updateOn,angular.bind(this.$element,this.$element.triggerHandler,updateOn));}};DatePickerCtrl.prototype.attachChangeListeners=function(){var self=this;self.$scope.$on('md-calendar-change',function(event,date){self.setModelValue(date);self.onExternalChange(date);self.closeCalendarPane();});self.ngInputElement.on('input',angular.bind(self,self.resizeInputElement));var debounceInterval=angular.isDefined(this.debounceInterval)?this.debounceInterval:DEFAULT_DEBOUNCE_INTERVAL;self.ngInputElement.on('input',self.$mdUtil.debounce(self.handleInputEvent,debounceInterval,self));};DatePickerCtrl.prototype.attachInteractionListeners=function(){var self=this;var $scope=this.$scope;var keyCodes=this.$mdConstant.KEY_CODE;self.ngInputElement.on('keydown',function(event){if(event.altKey&&event.keyCode==keyCodes.DOWN_ARROW){self.openCalendarPane(event);$scope.$digest();}});if(self.openOnFocus){self.ngInputElement.on('focus',angular.bind(self,self.openCalendarPane));angular.element(self.$window).on('blur',self.windowBlurHandler);$scope.$on('$destroy',function(){angular.element(self.$window).off('blur',self.windowBlurHandler);});}
$scope.$on('md-calendar-close',function(){self.closeCalendarPane();});};DatePickerCtrl.prototype.installPropertyInterceptors=function(){var self=this;if(this.$attrs.ngDisabled){var scope=this.$scope.$parent;if(scope){scope.$watch(this.$attrs.ngDisabled,function(isDisabled){self.setDisabled(isDisabled);});}}
Object.defineProperty(this,'placeholder',{get:function(){return self.inputElement.placeholder;},set:function(value){self.inputElement.placeholder=value||'';}});};DatePickerCtrl.prototype.setDisabled=function(isDisabled){this.isDisabled=isDisabled;this.inputElement.disabled=isDisabled;if(this.calendarButton){this.calendarButton.disabled=isDisabled;}};DatePickerCtrl.prototype.updateErrorState=function(opt_date){var date=opt_date||this.date;this.clearErrorState();if(this.dateUtil.isValidDate(date)){date=this.dateUtil.createDateAtMidnight(date);if(this.dateUtil.isValidDate(this.minDate)){var minDate=this.dateUtil.createDateAtMidnight(this.minDate);this.ngModelCtrl.$setValidity('mindate',date>=minDate);}
if(this.dateUtil.isValidDate(this.maxDate)){var maxDate=this.dateUtil.createDateAtMidnight(this.maxDate);this.ngModelCtrl.$setValidity('maxdate',date<=maxDate);}
if(angular.isFunction(this.dateFilter)){this.ngModelCtrl.$setValidity('filtered',this.dateFilter(date));}}else{this.ngModelCtrl.$setValidity('valid',date==null);}
angular.element(this.inputContainer).toggleClass(INVALID_CLASS,!this.ngModelCtrl.$valid);};DatePickerCtrl.prototype.clearErrorState=function(){this.inputContainer.classList.remove(INVALID_CLASS);['mindate','maxdate','filtered','valid'].forEach(function(field){this.ngModelCtrl.$setValidity(field,true);},this);};DatePickerCtrl.prototype.resizeInputElement=function(){this.inputElement.size=this.inputElement.value.length+EXTRA_INPUT_SIZE;};DatePickerCtrl.prototype.handleInputEvent=function(){var inputString=this.inputElement.value;var parsedDate=inputString?this.locale.parseDate(inputString):null;this.dateUtil.setDateTimeToMidnight(parsedDate);var isValidInput=inputString==''||(this.dateUtil.isValidDate(parsedDate)&&this.locale.isDateComplete(inputString)&&this.isDateEnabled(parsedDate));if(isValidInput){this.setModelValue(parsedDate);this.date=parsedDate;}
this.updateErrorState(parsedDate);};DatePickerCtrl.prototype.isDateEnabled=function(opt_date){return this.dateUtil.isDateWithinRange(opt_date,this.minDate,this.maxDate)&&(!angular.isFunction(this.dateFilter)||this.dateFilter(opt_date));};DatePickerCtrl.prototype.attachCalendarPane=function(){var calendarPane=this.calendarPane;var body=document.body;calendarPane.style.transform='';this.$element.addClass(OPEN_CLASS);this.mdInputContainer&&this.mdInputContainer.element.addClass(OPEN_CLASS);angular.element(body).addClass('md-datepicker-is-showing');var elementRect=this.inputContainer.getBoundingClientRect();var bodyRect=body.getBoundingClientRect();if(!this.topMargin||this.topMargin<0){this.topMargin=(this.inputMask.parent().prop('clientHeight')-this.ngInputElement.prop('clientHeight'))/2;}
var paneTop=elementRect.top-bodyRect.top-this.topMargin;var paneLeft=elementRect.left-bodyRect.left-this.leftMargin;var viewportTop=(bodyRect.top<0&&document.body.scrollTop==0)?-bodyRect.top:document.body.scrollTop;var viewportLeft=(bodyRect.left<0&&document.body.scrollLeft==0)?-bodyRect.left:document.body.scrollLeft;var viewportBottom=viewportTop+this.$window.innerHeight;var viewportRight=viewportLeft+this.$window.innerWidth;this.inputMask.css({position:'absolute',left:this.leftMargin+'px',top:this.topMargin+'px',width:(elementRect.width-1)+'px',height:(elementRect.height-2)+'px'});if(paneLeft+CALENDAR_PANE_WIDTH>viewportRight){if(viewportRight-CALENDAR_PANE_WIDTH>0){paneLeft=viewportRight-CALENDAR_PANE_WIDTH;}else{paneLeft=viewportLeft;var scale=this.$window.innerWidth/CALENDAR_PANE_WIDTH;calendarPane.style.transform='scale('+scale+')';}
calendarPane.classList.add('md-datepicker-pos-adjusted');}
if(paneTop+CALENDAR_PANE_HEIGHT>viewportBottom&&viewportBottom-CALENDAR_PANE_HEIGHT>viewportTop){paneTop=viewportBottom-CALENDAR_PANE_HEIGHT;calendarPane.classList.add('md-datepicker-pos-adjusted');}
calendarPane.style.left=paneLeft+'px';calendarPane.style.top=paneTop+'px';document.body.appendChild(calendarPane);this.$$rAF(function(){calendarPane.classList.add('md-pane-open');});};DatePickerCtrl.prototype.detachCalendarPane=function(){this.$element.removeClass(OPEN_CLASS);this.mdInputContainer&&this.mdInputContainer.element.removeClass(OPEN_CLASS);angular.element(document.body).removeClass('md-datepicker-is-showing');this.calendarPane.classList.remove('md-pane-open');this.calendarPane.classList.remove('md-datepicker-pos-adjusted');if(this.isCalendarOpen){this.$mdUtil.enableScrolling();}
if(this.calendarPane.parentNode){this.calendarPane.parentNode.removeChild(this.calendarPane);}};DatePickerCtrl.prototype.openCalendarPane=function(event){if(!this.isCalendarOpen&&!this.isDisabled&&!this.inputFocusedOnWindowBlur){this.isCalendarOpen=this.isOpen=true;this.calendarPaneOpenedFrom=event.target;this.$mdUtil.disableScrollAround(this.calendarPane);this.attachCalendarPane();this.focusCalendar();this.evalAttr('ngFocus');var self=this;this.$mdUtil.nextTick(function(){self.documentElement.on('click touchstart',self.bodyClickHandler);},false);window.addEventListener(this.windowEventName,this.windowEventHandler);}};DatePickerCtrl.prototype.closeCalendarPane=function(){if(this.isCalendarOpen){var self=this;self.detachCalendarPane();self.ngModelCtrl.$setTouched();self.evalAttr('ngBlur');self.documentElement.off('click touchstart',self.bodyClickHandler);window.removeEventListener(self.windowEventName,self.windowEventHandler);self.calendarPaneOpenedFrom.focus();self.calendarPaneOpenedFrom=null;if(self.openOnFocus){self.$mdUtil.nextTick(reset);}else{reset();}}
function reset(){self.isCalendarOpen=self.isOpen=false;}};DatePickerCtrl.prototype.getCalendarCtrl=function(){return angular.element(this.calendarPane.querySelector('md-calendar')).controller('mdCalendar');};DatePickerCtrl.prototype.focusCalendar=function(){var self=this;this.$mdUtil.nextTick(function(){self.getCalendarCtrl().focus();},false);};DatePickerCtrl.prototype.setFocused=function(isFocused){if(!isFocused){this.ngModelCtrl.$setTouched();}
if(!this.openOnFocus){this.evalAttr(isFocused?'ngFocus':'ngBlur');}
this.isFocused=isFocused;};DatePickerCtrl.prototype.handleBodyClick=function(event){if(this.isCalendarOpen){var isInCalendar=this.$mdUtil.getClosest(event.target,'md-calendar');if(!isInCalendar){this.closeCalendarPane();}
this.$scope.$digest();}};DatePickerCtrl.prototype.handleWindowBlur=function(){this.inputFocusedOnWindowBlur=document.activeElement===this.inputElement;};DatePickerCtrl.prototype.evalAttr=function(attr){if(this.$attrs[attr]){this.$scope.$parent.$eval(this.$attrs[attr]);}};DatePickerCtrl.prototype.setModelValue=function(value){var timezone=this.$mdUtil.getModelOption(this.ngModelCtrl,'timezone');this.ngModelCtrl.$setViewValue(this.ngDateFilter(value,'yyyy-MM-dd',timezone));};DatePickerCtrl.prototype.onExternalChange=function(value){var timezone=this.$mdUtil.getModelOption(this.ngModelCtrl,'timezone');this.date=value;this.inputElement.value=this.locale.formatDate(value,timezone);this.mdInputContainer&&this.mdInputContainer.setHasValue(!!value);this.resizeInputElement();this.updateErrorState();};})();})();(function(){"use strict";angular.module('material.components.icon').directive('mdIcon',['$mdIcon','$mdTheming','$mdAria','$sce',mdIconDirective]);function mdIconDirective($mdIcon,$mdTheming,$mdAria,$sce){return{restrict:'E',link:postLink};function postLink(scope,element,attr){$mdTheming(element);var lastFontIcon=attr.mdFontIcon;var lastFontSet=$mdIcon.fontSet(attr.mdFontSet);prepareForFontIcon();attr.$observe('mdFontIcon',fontIconChanged);attr.$observe('mdFontSet',fontIconChanged);var originalSvgSrc=element[0].getAttribute(attr.$attr.mdSvgSrc);var attrName=attr.$normalize(attr.$attr.mdSvgIcon||attr.$attr.mdSvgSrc||'');if(!attr.role){$mdAria.expect(element,'role','img');attr.role='img';}
if(attr.role==="img"&&!attr.ariaHidden&&!$mdAria.hasAriaLabel(element)){var iconName;if(attr.alt){$mdAria.expect(element,'aria-label',attr.alt);}else if($mdAria.parentHasAriaLabel(element,2)){$mdAria.expect(element,'aria-hidden','true');}else if(iconName=(attr.mdFontIcon||attr.mdSvgIcon||element.text())){$mdAria.expect(element,'aria-label',iconName);}else{$mdAria.expect(element,'aria-hidden','true');}}
if(attrName){attr.$observe(attrName,function(attrVal){element.empty();if(attrVal){$mdIcon(attrVal).then(function(svg){element.empty();element.append(svg);});}});}
function prepareForFontIcon(){if(!attr.mdSvgIcon&&!attr.mdSvgSrc){if(attr.mdFontIcon){element.addClass('md-font '+attr.mdFontIcon);}
element.addClass(lastFontSet);}}
function fontIconChanged(){if(!attr.mdSvgIcon&&!attr.mdSvgSrc){if(attr.mdFontIcon){element.removeClass(lastFontIcon);element.addClass(attr.mdFontIcon);lastFontIcon=attr.mdFontIcon;}
var fontSet=$mdIcon.fontSet(attr.mdFontSet);if(lastFontSet!==fontSet){element.removeClass(lastFontSet);element.addClass(fontSet);lastFontSet=fontSet;}}}}}})();(function(){"use strict";MdIconService.$inject=["config","$templateRequest","$q","$log","$mdUtil","$sce"];angular.module('material.components.icon').constant('$$mdSvgRegistry',{'mdTabsArrow':'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTUuNCw3LjQgMTQsNiA4LDEyIDE0LDE4IDE1LjQsMTYuNiAxMC44LDEyICIvPjwvZz48L3N2Zz4=','mdClose':'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik0xOSA2LjQxbC0xLjQxLTEuNDEtNS41OSA1LjU5LTUuNTktNS41OS0xLjQxIDEuNDEgNS41OSA1LjU5LTUuNTkgNS41OSAxLjQxIDEuNDEgNS41OS01LjU5IDUuNTkgNS41OSAxLjQxLTEuNDEtNS41OS01LjU5eiIvPjwvZz48L3N2Zz4=','mdCancel':'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik0xMiAyYy01LjUzIDAtMTAgNC40Ny0xMCAxMHM0LjQ3IDEwIDEwIDEwIDEwLTQuNDcgMTAtMTAtNC40Ny0xMC0xMC0xMHptNSAxMy41OWwtMS40MSAxLjQxLTMuNTktMy41OS0zLjU5IDMuNTktMS40MS0xLjQxIDMuNTktMy41OS0zLjU5LTMuNTkgMS40MS0xLjQxIDMuNTkgMy41OSAzLjU5LTMuNTkgMS40MSAxLjQxLTMuNTkgMy41OSAzLjU5IDMuNTl6Ii8+PC9nPjwvc3ZnPg==','mdMenu':'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0zLDZIMjFWOEgzVjZNMywxMUgyMVYxM0gzVjExTTMsMTZIMjFWMThIM1YxNloiIC8+PC9zdmc+','mdToggleArrow':'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiPjxwYXRoIGQ9Ik0yNCAxNmwtMTIgMTIgMi44MyAyLjgzIDkuMTctOS4xNyA5LjE3IDkuMTcgMi44My0yLjgzeiIvPjxwYXRoIGQ9Ik0wIDBoNDh2NDhoLTQ4eiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==','mdCalendar':'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgM2gtMVYxaC0ydjJIOFYxSDZ2Mkg1Yy0xLjExIDAtMS45OS45LTEuOTkgMkwzIDE5YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6bTAgMTZINVY4aDE0djExek03IDEwaDV2NUg3eiIvPjwvc3ZnPg==','mdChecked':'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiLz48L2c+PC9zdmc+'}).provider('$mdIcon',MdIconProvider);var config={defaultViewBoxSize:24,defaultFontSet:'material-icons',fontSets:[]};function MdIconProvider(){}
MdIconProvider.prototype={icon:function(id,url,viewBoxSize){if(id.indexOf(':')==-1)id='$default:'+id;config[id]=new ConfigurationItem(url,viewBoxSize);return this;},iconSet:function(id,url,viewBoxSize){config[id]=new ConfigurationItem(url,viewBoxSize);return this;},defaultIconSet:function(url,viewBoxSize){var setName='$default';if(!config[setName]){config[setName]=new ConfigurationItem(url,viewBoxSize);}
config[setName].viewBoxSize=viewBoxSize||config.defaultViewBoxSize;return this;},defaultViewBoxSize:function(viewBoxSize){config.defaultViewBoxSize=viewBoxSize;return this;},fontSet:function fontSet(alias,className){config.fontSets.push({alias:alias,fontSet:className||alias});return this;},defaultFontSet:function defaultFontSet(className){config.defaultFontSet=!className?'':className;return this;},defaultIconSize:function defaultIconSize(iconSize){config.defaultIconSize=iconSize;return this;},$get:['$templateRequest','$q','$log','$mdUtil','$sce',function($templateRequest,$q,$log,$mdUtil,$sce){return MdIconService(config,$templateRequest,$q,$log,$mdUtil,$sce);}]};function ConfigurationItem(url,viewBoxSize){this.url=url;this.viewBoxSize=viewBoxSize||config.defaultViewBoxSize;}
function MdIconService(config,$templateRequest,$q,$log,$mdUtil,$sce){var iconCache={};var svgCache={};var urlRegex=/[-\w@:%\+.~#?&//=]{2,}\.[a-z]{2,4}\b(\/[-\w@:%\+.~#?&//=]*)?/i;var dataUrlRegex=/^data:image\/svg\+xml[\s*;\w\-\=]*?(base64)?,(.*)$/i;Icon.prototype={clone:cloneSVG,prepare:prepareAndStyle};getIcon.fontSet=findRegisteredFontSet;return getIcon;function getIcon(id){id=id||'';if(!angular.isString(id)){id=$sce.getTrustedUrl(id);}
if(iconCache[id]){return $q.when(transformClone(iconCache[id]));}
if(urlRegex.test(id)||dataUrlRegex.test(id)){return loadByURL(id).then(cacheIcon(id));}
if(id.indexOf(':')==-1){id='$default:'+id;}
var load=config[id]?loadByID:loadFromIconSet;return load(id).then(cacheIcon(id));}
function findRegisteredFontSet(alias){var useDefault=angular.isUndefined(alias)||!(alias&&alias.length);if(useDefault)return config.defaultFontSet;var result=alias;angular.forEach(config.fontSets,function(it){if(it.alias==alias)result=it.fontSet||result;});return result;}
function transformClone(cacheElement){var clone=cacheElement.clone();var cacheSuffix='_cache'+$mdUtil.nextUid();if(clone.id)clone.id+=cacheSuffix;angular.forEach(clone.querySelectorAll('[id]'),function(item){item.id+=cacheSuffix;});return clone;}
function cacheIcon(id){return function updateCache(icon){iconCache[id]=isIcon(icon)?icon:new Icon(icon,config[id]);return iconCache[id].clone();};}
function loadByID(id){var iconConfig=config[id];return loadByURL(iconConfig.url).then(function(icon){return new Icon(icon,iconConfig);});}
function loadFromIconSet(id){var setName=id.substring(0,id.lastIndexOf(':'))||'$default';var iconSetConfig=config[setName];return!iconSetConfig?announceIdNotFound(id):loadByURL(iconSetConfig.url).then(extractFromSet);function extractFromSet(set){var iconName=id.slice(id.lastIndexOf(':')+1);var icon=set.querySelector('#'+iconName);return icon?new Icon(icon,iconSetConfig):announceIdNotFound(id);}
function announceIdNotFound(id){var msg='icon '+id+' not found';$log.warn(msg);return $q.reject(msg||id);}}
function loadByURL(url){function loadByDataUrl(url){var results=dataUrlRegex.exec(url);var isBase64=/base64/i.test(url);var data=isBase64?window.atob(results[2]):results[2];return $q.when(angular.element(data)[0]);}
function loadByHttpUrl(url){return $q(function(resolve,reject){var announceAndReject=function(err){var msg=angular.isString(err)?err:(err.message||err.data||err.statusText);$log.warn(msg);reject(err);},extractSvg=function(response){if(!svgCache[url]){svgCache[url]=angular.element('<div>').append(response)[0].querySelector('svg');}
resolve(svgCache[url]);};$templateRequest(url,true).then(extractSvg,announceAndReject);});}
return dataUrlRegex.test(url)?loadByDataUrl(url):loadByHttpUrl(url);}
function isIcon(target){return angular.isDefined(target.element)&&angular.isDefined(target.config);}
function Icon(el,config){if(el&&el.tagName!='svg'){el=angular.element('<svg xmlns="http://www.w3.org/2000/svg">').append(el.cloneNode(true))[0];}
if(!el.getAttribute('xmlns')){el.setAttribute('xmlns',"http://www.w3.org/2000/svg");}
this.element=el;this.config=config;this.prepare();}
function prepareAndStyle(){var viewBoxSize=this.config?this.config.viewBoxSize:config.defaultViewBoxSize;angular.forEach({'fit':'','height':'100%','width':'100%','preserveAspectRatio':'xMidYMid meet','viewBox':this.element.getAttribute('viewBox')||('0 0 '+viewBoxSize+' '+viewBoxSize),'focusable':false},function(val,attr){this.element.setAttribute(attr,val);},this);}
function cloneSVG(){return this.element.cloneNode(true);}}})();(function(){"use strict";MenuController.$inject=["$mdMenu","$attrs","$element","$scope","$mdUtil","$timeout","$rootScope","$q","$log"];angular.module('material.components.menu').controller('mdMenuCtrl',MenuController);function MenuController($mdMenu,$attrs,$element,$scope,$mdUtil,$timeout,$rootScope,$q,$log){var prefixer=$mdUtil.prefixer();var menuContainer;var self=this;var triggerElement;this.nestLevel=parseInt($attrs.mdNestLevel,10)||0;this.init=function init(setMenuContainer,opts){opts=opts||{};menuContainer=setMenuContainer;triggerElement=$element[0].querySelector(prefixer.buildSelector(['ng-click','ng-mouseenter']));triggerElement.setAttribute('aria-expanded','false');this.isInMenuBar=opts.isInMenuBar;this.nestedMenus=$mdUtil.nodesToArray(menuContainer[0].querySelectorAll('.md-nested-menu'));menuContainer.on('$mdInterimElementRemove',function(){self.isOpen=false;$mdUtil.nextTick(function(){self.onIsOpenChanged(self.isOpen);});});$mdUtil.nextTick(function(){self.onIsOpenChanged(self.isOpen);});var menuContainerId='menu_container_'+$mdUtil.nextUid();menuContainer.attr('id',menuContainerId);angular.element(triggerElement).attr({'aria-owns':menuContainerId,'aria-haspopup':'true'});$scope.$on('$destroy',angular.bind(this,function(){this.disableHoverListener();$mdMenu.destroy();}));menuContainer.on('$destroy',function(){$mdMenu.destroy();});};var openMenuTimeout,menuItems,deregisterScopeListeners=[];this.enableHoverListener=function(){deregisterScopeListeners.push($rootScope.$on('$mdMenuOpen',function(event,el){if(menuContainer[0].contains(el[0])){self.currentlyOpenMenu=el.controller('mdMenu');self.isAlreadyOpening=false;self.currentlyOpenMenu.registerContainerProxy(self.triggerContainerProxy.bind(self));}}));deregisterScopeListeners.push($rootScope.$on('$mdMenuClose',function(event,el){if(menuContainer[0].contains(el[0])){self.currentlyOpenMenu=undefined;}}));menuItems=angular.element($mdUtil.nodesToArray(menuContainer[0].children[0].children));menuItems.on('mouseenter',self.handleMenuItemHover);menuItems.on('mouseleave',self.handleMenuItemMouseLeave);};this.disableHoverListener=function(){while(deregisterScopeListeners.length){deregisterScopeListeners.shift()();}
menuItems&&menuItems.off('mouseenter',self.handleMenuItemHover);menuItems&&menuItems.off('mouseleave',self.handleMenuItemMouseLeave);};this.handleMenuItemHover=function(event){if(self.isAlreadyOpening)return;var nestedMenu=(event.target.querySelector('md-menu')||$mdUtil.getClosest(event.target,'MD-MENU'));openMenuTimeout=$timeout(function(){if(nestedMenu){nestedMenu=angular.element(nestedMenu).controller('mdMenu');}
if(self.currentlyOpenMenu&&self.currentlyOpenMenu!=nestedMenu){var closeTo=self.nestLevel+1;self.currentlyOpenMenu.close(true,{closeTo:closeTo});self.isAlreadyOpening=!!nestedMenu;nestedMenu&&nestedMenu.open();}else if(nestedMenu&&!nestedMenu.isOpen&&nestedMenu.open){self.isAlreadyOpening=!!nestedMenu;nestedMenu&&nestedMenu.open();}},nestedMenu?100:250);var focusableTarget=event.currentTarget.querySelector('.md-button:not([disabled])');focusableTarget&&focusableTarget.focus();};this.handleMenuItemMouseLeave=function(){if(openMenuTimeout){$timeout.cancel(openMenuTimeout);openMenuTimeout=undefined;}};this.open=function openMenu(ev){ev&&ev.stopPropagation();ev&&ev.preventDefault();if(self.isOpen)return;self.enableHoverListener();self.isOpen=true;$mdUtil.nextTick(function(){self.onIsOpenChanged(self.isOpen);});triggerElement=triggerElement||(ev?ev.target:$element[0]);triggerElement.setAttribute('aria-expanded','true');$scope.$emit('$mdMenuOpen',$element);$mdMenu.show({scope:$scope,mdMenuCtrl:self,nestLevel:self.nestLevel,element:menuContainer,target:triggerElement,preserveElement:true,parent:'body'}).finally(function(){triggerElement.setAttribute('aria-expanded','false');self.disableHoverListener();});};this.onIsOpenChanged=function(isOpen){if(isOpen){menuContainer.attr('aria-hidden','false');$element[0].classList.add('md-open');angular.forEach(self.nestedMenus,function(el){el.classList.remove('md-open');});}else{menuContainer.attr('aria-hidden','true');$element[0].classList.remove('md-open');}
$scope.$mdMenuIsOpen=self.isOpen;};this.focusMenuContainer=function focusMenuContainer(){var focusTarget=menuContainer[0].querySelector(prefixer.buildSelector(['md-menu-focus-target','md-autofocus']));if(!focusTarget)focusTarget=menuContainer[0].querySelector('.md-button:not([disabled])');focusTarget.focus();};this.registerContainerProxy=function registerContainerProxy(handler){this.containerProxy=handler;};this.triggerContainerProxy=function triggerContainerProxy(ev){this.containerProxy&&this.containerProxy(ev);};this.destroy=function(){return self.isOpen?$mdMenu.destroy():$q.when(false);};this.close=function closeMenu(skipFocus,closeOpts){if(!self.isOpen)return;self.isOpen=false;$mdUtil.nextTick(function(){self.onIsOpenChanged(self.isOpen);});var eventDetails=angular.extend({},closeOpts,{skipFocus:skipFocus});$scope.$emit('$mdMenuClose',$element,eventDetails);$mdMenu.hide(null,closeOpts);if(!skipFocus){var el=self.restoreFocusTo||$element.find('button')[0];if(el instanceof angular.element)el=el[0];if(el)el.focus();}};this.positionMode=function positionMode(){var attachment=($attrs.mdPositionMode||'target').split(' ');if(attachment.length==1){attachment.push(attachment[0]);}
return{left:attachment[0],top:attachment[1]};};this.offsets=function offsets(){var position=($attrs.mdOffset||'0 0').split(' ').map(parseFloat);if(position.length==2){return{left:position[0],top:position[1]};}else if(position.length==1){return{top:position[0],left:position[0]};}else{throw Error('Invalid offsets specified. Please follow format <x, y> or <n>');}};$scope.$mdMenu={open:this.open,close:this.close};$scope.$mdOpenMenu=angular.bind(this,function(){$log.warn('mdMenu: The $mdOpenMenu method is deprecated. Please use `$mdMenu.open`.');return this.open.apply(this,arguments);});}})();(function(){"use strict";MenuDirective.$inject=["$mdUtil"];angular.module('material.components.menu').directive('mdMenu',MenuDirective);function MenuDirective($mdUtil){var INVALID_PREFIX='Invalid HTML for md-menu: ';return{restrict:'E',require:['mdMenu','?^mdMenuBar'],controller:'mdMenuCtrl',scope:true,compile:compile};function compile(templateElement){templateElement.addClass('md-menu');var triggerEl=templateElement.children()[0];var contentEl=templateElement.children()[1];var prefixer=$mdUtil.prefixer();if(!prefixer.hasAttribute(triggerEl,'ng-click')){triggerEl=triggerEl.querySelector(prefixer.buildSelector(['ng-click','ng-mouseenter']))||triggerEl;}
var isButtonTrigger=triggerEl.nodeName==='MD-BUTTON'||triggerEl.nodeName==='BUTTON';if(triggerEl&&isButtonTrigger&&!triggerEl.hasAttribute('type')){triggerEl.setAttribute('type','button');}
if(!triggerEl){throw Error(INVALID_PREFIX+'Expected the menu to have a trigger element.');}
if(!contentEl||contentEl.nodeName!=='MD-MENU-CONTENT'){throw Error(INVALID_PREFIX+'Expected the menu to contain a `md-menu-content` element.');}
triggerEl&&triggerEl.setAttribute('aria-haspopup','true');var nestedMenus=templateElement[0].querySelectorAll('md-menu');var nestingDepth=parseInt(templateElement[0].getAttribute('md-nest-level'),10)||0;if(nestedMenus){angular.forEach($mdUtil.nodesToArray(nestedMenus),function(menuEl){if(!menuEl.hasAttribute('md-position-mode')){menuEl.setAttribute('md-position-mode','cascade');}
menuEl.classList.add('_md-nested-menu');menuEl.setAttribute('md-nest-level',nestingDepth+1);});}
return link;}
function link(scope,element,attr,ctrls){var mdMenuCtrl=ctrls[0];var isInMenuBar=!!ctrls[1];var menuContainer=angular.element('<div class="_md md-open-menu-container md-whiteframe-z2"></div>');var menuContents=element.children()[1];element.addClass('_md');if(!menuContents.hasAttribute('role')){menuContents.setAttribute('role','menu');}
menuContainer.append(menuContents);element.on('$destroy',function(){menuContainer.remove();});element.append(menuContainer);menuContainer[0].style.display='none';mdMenuCtrl.init(menuContainer,{isInMenuBar:isInMenuBar});}}})();(function(){"use strict";MenuProvider.$inject=["$$interimElementProvider"];angular.module('material.components.menu').provider('$mdMenu',MenuProvider);function MenuProvider($$interimElementProvider){menuDefaultOptions.$inject=["$mdUtil","$mdTheming","$mdConstant","$document","$window","$q","$$rAF","$animateCss","$animate","$log"];var MENU_EDGE_MARGIN=8;return $$interimElementProvider('$mdMenu').setDefaults({methods:['target'],options:menuDefaultOptions});function menuDefaultOptions($mdUtil,$mdTheming,$mdConstant,$document,$window,$q,$$rAF,$animateCss,$animate,$log){var prefixer=$mdUtil.prefixer();var animator=$mdUtil.dom.animator;return{parent:'body',onShow:onShow,onRemove:onRemove,hasBackdrop:true,disableParentScroll:true,skipCompile:true,preserveScope:true,multiple:true,themable:true};function showBackdrop(scope,element,options){if(options.nestLevel)return angular.noop;if(options.disableParentScroll&&!$mdUtil.getClosest(options.target,'MD-DIALOG')){options.restoreScroll=$mdUtil.disableScrollAround(options.element,options.parent);}else{options.disableParentScroll=false;}
if(options.hasBackdrop){options.backdrop=$mdUtil.createBackdrop(scope,"md-menu-backdrop md-click-catcher");$animate.enter(options.backdrop,$document[0].body);}
return function hideBackdrop(){if(options.backdrop)options.backdrop.remove();if(options.disableParentScroll)options.restoreScroll();};}
function onRemove(scope,element,opts){opts.cleanupInteraction();opts.cleanupBackdrop();opts.cleanupResizing();opts.hideBackdrop();element.removeClass('md-clickable');return(opts.$destroy===true)?detachAndClean():animateRemoval().then(detachAndClean);function animateRemoval(){return $animateCss(element,{addClass:'md-leave'}).start();}
function detachAndClean(){element.removeClass('md-active');detachElement(element,opts);opts.alreadyOpen=false;}}
function onShow(scope,element,opts){sanitizeAndConfigure(opts);if(opts.menuContentEl[0]){$mdTheming.inherit(opts.menuContentEl,opts.target);}else{$log.warn('$mdMenu: Menu elements should always contain a `md-menu-content` element,'+'otherwise interactivity features will not work properly.',element);}
opts.cleanupResizing=startRepositioningOnResize();opts.hideBackdrop=showBackdrop(scope,element,opts);return showMenu().then(function(response){opts.alreadyOpen=true;opts.cleanupInteraction=activateInteraction();opts.cleanupBackdrop=setupBackdrop();element.addClass('md-clickable');return response;});function showMenu(){opts.parent.append(element);element[0].style.display='';return $q(function(resolve){var position=calculateMenuPosition(element,opts);element.removeClass('md-leave');$animateCss(element,{addClass:'md-active',from:animator.toCss(position),to:animator.toCss({transform:''})}).start().then(resolve);});}
function sanitizeAndConfigure(){if(!opts.target){throw Error('$mdMenu.show() expected a target to animate from in options.target');}
angular.extend(opts,{alreadyOpen:false,isRemoved:false,target:angular.element(opts.target),parent:angular.element(opts.parent),menuContentEl:angular.element(element[0].querySelector('md-menu-content'))});}
function startRepositioningOnResize(){var repositionMenu=(function(target,options){return $$rAF.throttle(function(){if(opts.isRemoved)return;var position=calculateMenuPosition(target,options);target.css(animator.toCss(position));});})(element,opts);$window.addEventListener('resize',repositionMenu);$window.addEventListener('orientationchange',repositionMenu);return function stopRepositioningOnResize(){$window.removeEventListener('resize',repositionMenu);$window.removeEventListener('orientationchange',repositionMenu);};}
function setupBackdrop(){if(!opts.backdrop)return angular.noop;opts.backdrop.on('click',onBackdropClick);return function(){opts.backdrop.off('click',onBackdropClick);}}
function onBackdropClick(event){event.preventDefault();event.stopPropagation();scope.$apply(function(){opts.mdMenuCtrl.close(true,{closeAll:true});});}
function activateInteraction(){if(!opts.menuContentEl[0])return angular.noop;opts.menuContentEl.on('keydown',onMenuKeyDown);opts.menuContentEl[0].addEventListener('click',captureClickListener,true);var focusTarget=opts.menuContentEl[0].querySelector(prefixer.buildSelector(['md-menu-focus-target','md-autofocus']));if(!focusTarget){var childrenLen=opts.menuContentEl[0].children.length;for(var childIndex=0;childIndex<childrenLen;childIndex++){var child=opts.menuContentEl[0].children[childIndex];focusTarget=child.querySelector('.md-button:not([disabled])');if(focusTarget){break;}
if(child.firstElementChild&&!child.firstElementChild.disabled){focusTarget=child.firstElementChild;break;}}}
focusTarget&&focusTarget.focus();return function cleanupInteraction(){opts.menuContentEl.off('keydown',onMenuKeyDown);opts.menuContentEl[0].removeEventListener('click',captureClickListener,true);};function onMenuKeyDown(ev){var handled;switch(ev.keyCode){case $mdConstant.KEY_CODE.ESCAPE:opts.mdMenuCtrl.close(false,{closeAll:true});handled=true;break;case $mdConstant.KEY_CODE.UP_ARROW:if(!focusMenuItem(ev,opts.menuContentEl,opts,-1)&&!opts.nestLevel){opts.mdMenuCtrl.triggerContainerProxy(ev);}
handled=true;break;case $mdConstant.KEY_CODE.DOWN_ARROW:if(!focusMenuItem(ev,opts.menuContentEl,opts,1)&&!opts.nestLevel){opts.mdMenuCtrl.triggerContainerProxy(ev);}
handled=true;break;case $mdConstant.KEY_CODE.LEFT_ARROW:if(opts.nestLevel){opts.mdMenuCtrl.close();}else{opts.mdMenuCtrl.triggerContainerProxy(ev);}
handled=true;break;case $mdConstant.KEY_CODE.RIGHT_ARROW:var parentMenu=$mdUtil.getClosest(ev.target,'MD-MENU');if(parentMenu&&parentMenu!=opts.parent[0]){ev.target.click();}else{opts.mdMenuCtrl.triggerContainerProxy(ev);}
handled=true;break;}
if(handled){ev.preventDefault();ev.stopImmediatePropagation();}}
function onBackdropClick(e){e.preventDefault();e.stopPropagation();scope.$apply(function(){opts.mdMenuCtrl.close(true,{closeAll:true});});}
function captureClickListener(e){var target=e.target;do{if(target==opts.menuContentEl[0])return;if((hasAnyAttribute(target,['ng-click','ng-href','ui-sref'])||target.nodeName=='BUTTON'||target.nodeName=='MD-BUTTON')&&!hasAnyAttribute(target,['md-prevent-menu-close'])){var closestMenu=$mdUtil.getClosest(target,'MD-MENU');if(!target.hasAttribute('disabled')&&(!closestMenu||closestMenu==opts.parent[0])){close();}
break;}}while(target=target.parentNode);function close(){scope.$apply(function(){opts.mdMenuCtrl.close(true,{closeAll:true});});}
function hasAnyAttribute(target,attrs){if(!target)return false;for(var i=0,attr;attr=attrs[i];++i){if(prefixer.hasAttribute(target,attr)){return true;}}
return false;}}}}
function focusMenuItem(e,menuEl,opts,direction){var currentItem=$mdUtil.getClosest(e.target,'MD-MENU-ITEM');var items=$mdUtil.nodesToArray(menuEl[0].children);var currentIndex=items.indexOf(currentItem);var didFocus;for(var i=currentIndex+direction;i>=0&&i<items.length;i=i+direction){var focusTarget=items[i].querySelector('.md-button');didFocus=attemptFocus(focusTarget);if(didFocus){break;}}
return didFocus;}
function attemptFocus(el){if(el&&el.getAttribute('tabindex')!=-1){el.focus();return($document[0].activeElement==el);}}
function detachElement(element,opts){if(!opts.preserveElement){if(toNode(element).parentNode===toNode(opts.parent)){toNode(opts.parent).removeChild(toNode(element));}}else{toNode(element).style.display='none';}}
function calculateMenuPosition(el,opts){var containerNode=el[0],openMenuNode=el[0].firstElementChild,openMenuNodeRect=openMenuNode.getBoundingClientRect(),boundryNode=$document[0].body,boundryNodeRect=boundryNode.getBoundingClientRect();var menuStyle=$window.getComputedStyle(openMenuNode);var originNode=opts.target[0].querySelector(prefixer.buildSelector('md-menu-origin'))||opts.target[0],originNodeRect=originNode.getBoundingClientRect();var bounds={left:boundryNodeRect.left+MENU_EDGE_MARGIN,top:Math.max(boundryNodeRect.top,0)+MENU_EDGE_MARGIN,bottom:Math.max(boundryNodeRect.bottom,Math.max(boundryNodeRect.top,0)+boundryNodeRect.height)-MENU_EDGE_MARGIN,right:boundryNodeRect.right-MENU_EDGE_MARGIN};var alignTarget,alignTargetRect={top:0,left:0,right:0,bottom:0},existingOffsets={top:0,left:0,right:0,bottom:0};var positionMode=opts.mdMenuCtrl.positionMode();if(positionMode.top=='target'||positionMode.left=='target'||positionMode.left=='target-right'){alignTarget=firstVisibleChild();if(alignTarget){alignTarget=alignTarget.firstElementChild||alignTarget;alignTarget=alignTarget.querySelector(prefixer.buildSelector('md-menu-align-target'))||alignTarget;alignTargetRect=alignTarget.getBoundingClientRect();existingOffsets={top:parseFloat(containerNode.style.top||0),left:parseFloat(containerNode.style.left||0)};}}
var position={};var transformOrigin='top ';switch(positionMode.top){case'target':position.top=existingOffsets.top+originNodeRect.top-alignTargetRect.top;break;case'cascade':position.top=originNodeRect.top-parseFloat(menuStyle.paddingTop)-originNode.style.top;break;case'bottom':position.top=originNodeRect.top+originNodeRect.height;break;default:throw new Error('Invalid target mode "'+positionMode.top+'" specified for md-menu on Y axis.');}
var rtl=($mdUtil.bidi()=='rtl');switch(positionMode.left){case'target':position.left=existingOffsets.left+originNodeRect.left-alignTargetRect.left;transformOrigin+=rtl?'right':'left';break;case'target-left':position.left=originNodeRect.left;transformOrigin+='left';break;case'target-right':position.left=originNodeRect.right-openMenuNodeRect.width+(openMenuNodeRect.right-alignTargetRect.right);transformOrigin+='right';break;case'cascade':var willFitRight=rtl?(originNodeRect.left-openMenuNodeRect.width)<bounds.left:(originNodeRect.right+openMenuNodeRect.width)<bounds.right;position.left=willFitRight?originNodeRect.right-originNode.style.left:originNodeRect.left-originNode.style.left-openMenuNodeRect.width;transformOrigin+=willFitRight?'left':'right';break;case'right':if(rtl){position.left=originNodeRect.right-originNodeRect.width;transformOrigin+='left';}else{position.left=originNodeRect.right-openMenuNodeRect.width;transformOrigin+='right';}
break;case'left':if(rtl){position.left=originNodeRect.right-openMenuNodeRect.width;transformOrigin+='right';}else{position.left=originNodeRect.left;transformOrigin+='left';}
break;default:throw new Error('Invalid target mode "'+positionMode.left+'" specified for md-menu on X axis.');}
var offsets=opts.mdMenuCtrl.offsets();position.top+=offsets.top;position.left+=offsets.left;clamp(position);var scaleX=Math.round(100*Math.min(originNodeRect.width/containerNode.offsetWidth,1.0))/100;var scaleY=Math.round(100*Math.min(originNodeRect.height/containerNode.offsetHeight,1.0))/100;return{top:Math.round(position.top),left:Math.round(position.left),transform:!opts.alreadyOpen?$mdUtil.supplant('scale({0},{1})',[scaleX,scaleY]):undefined,transformOrigin:transformOrigin};function clamp(pos){pos.top=Math.max(Math.min(pos.top,bounds.bottom-containerNode.offsetHeight),bounds.top);pos.left=Math.max(Math.min(pos.left,bounds.right-containerNode.offsetWidth),bounds.left);}
function firstVisibleChild(){for(var i=0;i<openMenuNode.children.length;++i){if($window.getComputedStyle(openMenuNode.children[i]).display!='none'){return openMenuNode.children[i];}}}}}
function toNode(el){if(el instanceof angular.element){el=el[0];}
return el;}}})();(function(){"use strict";MenuBarController.$inject=["$scope","$rootScope","$element","$attrs","$mdConstant","$document","$mdUtil","$timeout"];angular.module('material.components.menuBar').controller('MenuBarController',MenuBarController);var BOUND_MENU_METHODS=['handleKeyDown','handleMenuHover','scheduleOpenHoveredMenu','cancelScheduledOpen'];function MenuBarController($scope,$rootScope,$element,$attrs,$mdConstant,$document,$mdUtil,$timeout){this.$element=$element;this.$attrs=$attrs;this.$mdConstant=$mdConstant;this.$mdUtil=$mdUtil;this.$document=$document;this.$scope=$scope;this.$rootScope=$rootScope;this.$timeout=$timeout;var self=this;angular.forEach(BOUND_MENU_METHODS,function(methodName){self[methodName]=angular.bind(self,self[methodName]);});}
MenuBarController.prototype.init=function(){var $element=this.$element;var $mdUtil=this.$mdUtil;var $scope=this.$scope;var self=this;var deregisterFns=[];$element.on('keydown',this.handleKeyDown);this.parentToolbar=$mdUtil.getClosest($element,'MD-TOOLBAR');deregisterFns.push(this.$rootScope.$on('$mdMenuOpen',function(event,el){if(self.getMenus().indexOf(el[0])!=-1){$element[0].classList.add('md-open');el[0].classList.add('md-open');self.currentlyOpenMenu=el.controller('mdMenu');self.currentlyOpenMenu.registerContainerProxy(self.handleKeyDown);self.enableOpenOnHover();}}));deregisterFns.push(this.$rootScope.$on('$mdMenuClose',function(event,el,opts){var rootMenus=self.getMenus();if(rootMenus.indexOf(el[0])!=-1){$element[0].classList.remove('md-open');el[0].classList.remove('md-open');}
if($element[0].contains(el[0])){var parentMenu=el[0];while(parentMenu&&rootMenus.indexOf(parentMenu)==-1){parentMenu=$mdUtil.getClosest(parentMenu,'MD-MENU',true);}
if(parentMenu){if(!opts.skipFocus)parentMenu.querySelector('button:not([disabled])').focus();self.currentlyOpenMenu=undefined;self.disableOpenOnHover();self.setKeyboardMode(true);}}}));$scope.$on('$destroy',function(){self.disableOpenOnHover();while(deregisterFns.length){deregisterFns.shift()();}});this.setKeyboardMode(true);};MenuBarController.prototype.setKeyboardMode=function(enabled){if(enabled)this.$element[0].classList.add('md-keyboard-mode');else this.$element[0].classList.remove('md-keyboard-mode');};MenuBarController.prototype.enableOpenOnHover=function(){if(this.openOnHoverEnabled)return;var self=this;self.openOnHoverEnabled=true;if(self.parentToolbar){self.parentToolbar.classList.add('md-has-open-menu');self.$mdUtil.nextTick(function(){angular.element(self.parentToolbar).on('click',self.handleParentClick);},false);}
angular.element(self.getMenus()).on('mouseenter',self.handleMenuHover);};MenuBarController.prototype.handleMenuHover=function(e){this.setKeyboardMode(false);if(this.openOnHoverEnabled){this.scheduleOpenHoveredMenu(e);}};MenuBarController.prototype.disableOpenOnHover=function(){if(!this.openOnHoverEnabled)return;this.openOnHoverEnabled=false;if(this.parentToolbar){this.parentToolbar.classList.remove('md-has-open-menu');angular.element(this.parentToolbar).off('click',this.handleParentClick);}
angular.element(this.getMenus()).off('mouseenter',this.handleMenuHover);};MenuBarController.prototype.scheduleOpenHoveredMenu=function(e){var menuEl=angular.element(e.currentTarget);var menuCtrl=menuEl.controller('mdMenu');this.setKeyboardMode(false);this.scheduleOpenMenu(menuCtrl);};MenuBarController.prototype.scheduleOpenMenu=function(menuCtrl){var self=this;var $timeout=this.$timeout;if(menuCtrl!=self.currentlyOpenMenu){$timeout.cancel(self.pendingMenuOpen);self.pendingMenuOpen=$timeout(function(){self.pendingMenuOpen=undefined;if(self.currentlyOpenMenu){self.currentlyOpenMenu.close(true,{closeAll:true});}
menuCtrl.open();},200,false);}};MenuBarController.prototype.handleKeyDown=function(e){var keyCodes=this.$mdConstant.KEY_CODE;var currentMenu=this.currentlyOpenMenu;var wasOpen=currentMenu&&currentMenu.isOpen;this.setKeyboardMode(true);var handled,newMenu,newMenuCtrl;switch(e.keyCode){case keyCodes.DOWN_ARROW:if(currentMenu){currentMenu.focusMenuContainer();}else{this.openFocusedMenu();}
handled=true;break;case keyCodes.UP_ARROW:currentMenu&&currentMenu.close();handled=true;break;case keyCodes.LEFT_ARROW:newMenu=this.focusMenu(-1);if(wasOpen){newMenuCtrl=angular.element(newMenu).controller('mdMenu');this.scheduleOpenMenu(newMenuCtrl);}
handled=true;break;case keyCodes.RIGHT_ARROW:newMenu=this.focusMenu(+1);if(wasOpen){newMenuCtrl=angular.element(newMenu).controller('mdMenu');this.scheduleOpenMenu(newMenuCtrl);}
handled=true;break;}
if(handled){e&&e.preventDefault&&e.preventDefault();e&&e.stopImmediatePropagation&&e.stopImmediatePropagation();}};MenuBarController.prototype.focusMenu=function(direction){var menus=this.getMenus();var focusedIndex=this.getFocusedMenuIndex();if(focusedIndex==-1){focusedIndex=this.getOpenMenuIndex();}
var changed=false;if(focusedIndex==-1){focusedIndex=0;changed=true;}
else if(direction<0&&focusedIndex>0||direction>0&&focusedIndex<menus.length-direction){focusedIndex+=direction;changed=true;}
if(changed){menus[focusedIndex].querySelector('button').focus();return menus[focusedIndex];}};MenuBarController.prototype.openFocusedMenu=function(){var menu=this.getFocusedMenu();menu&&angular.element(menu).controller('mdMenu').open();};MenuBarController.prototype.getMenus=function(){var $element=this.$element;return this.$mdUtil.nodesToArray($element[0].children).filter(function(el){return el.nodeName=='MD-MENU';});};MenuBarController.prototype.getFocusedMenu=function(){return this.getMenus()[this.getFocusedMenuIndex()];};MenuBarController.prototype.getFocusedMenuIndex=function(){var $mdUtil=this.$mdUtil;var focusedEl=$mdUtil.getClosest(this.$document[0].activeElement,'MD-MENU');if(!focusedEl)return-1;var focusedIndex=this.getMenus().indexOf(focusedEl);return focusedIndex;};MenuBarController.prototype.getOpenMenuIndex=function(){var menus=this.getMenus();for(var i=0;i<menus.length;++i){if(menus[i].classList.contains('md-open'))return i;}
return-1;};MenuBarController.prototype.handleParentClick=function(event){var openMenu=this.querySelector('md-menu.md-open');if(openMenu&&!openMenu.contains(event.target)){angular.element(openMenu).controller('mdMenu').close(true,{closeAll:true});}};})();(function(){"use strict";MenuBarDirective.$inject=["$mdUtil","$mdTheming"];angular.module('material.components.menuBar').directive('mdMenuBar',MenuBarDirective);function MenuBarDirective($mdUtil,$mdTheming){return{restrict:'E',require:'mdMenuBar',controller:'MenuBarController',compile:function compile(templateEl,templateAttrs){if(!templateAttrs.ariaRole){templateEl[0].setAttribute('role','menubar');}
angular.forEach(templateEl[0].children,function(menuEl){if(menuEl.nodeName=='MD-MENU'){if(!menuEl.hasAttribute('md-position-mode')){menuEl.setAttribute('md-position-mode','left bottom');menuEl.querySelector('button, a, md-button').setAttribute('role','menuitem');}
var contentEls=$mdUtil.nodesToArray(menuEl.querySelectorAll('md-menu-content'));angular.forEach(contentEls,function(contentEl){contentEl.classList.add('md-menu-bar-menu');contentEl.classList.add('md-dense');if(!contentEl.hasAttribute('width')){contentEl.setAttribute('width',5);}});}});templateEl.find('md-menu-item').addClass('md-in-menu-bar');return function postLink(scope,el,attr,ctrl){el.addClass('_md');$mdTheming(scope,el);ctrl.init();};}};}})();(function(){"use strict";angular.module('material.components.menuBar').directive('mdMenuDivider',MenuDividerDirective);function MenuDividerDirective(){return{restrict:'E',compile:function(templateEl,templateAttrs){if(!templateAttrs.role){templateEl[0].setAttribute('role','separator');}}};}})();(function(){"use strict";MenuItemController.$inject=["$scope","$element","$attrs"];angular.module('material.components.menuBar').controller('MenuItemController',MenuItemController);function MenuItemController($scope,$element,$attrs){this.$element=$element;this.$attrs=$attrs;this.$scope=$scope;}
MenuItemController.prototype.init=function(ngModel){var $element=this.$element;var $attrs=this.$attrs;this.ngModel=ngModel;if($attrs.type=='checkbox'||$attrs.type=='radio'){this.mode=$attrs.type;this.iconEl=$element[0].children[0];this.buttonEl=$element[0].children[1];if(ngModel){this.initClickListeners();}}};MenuItemController.prototype.clearNgAria=function(){var el=this.$element[0];var clearAttrs=['role','tabindex','aria-invalid','aria-checked'];angular.forEach(clearAttrs,function(attr){el.removeAttribute(attr);});};MenuItemController.prototype.initClickListeners=function(){var self=this;var ngModel=this.ngModel;var $scope=this.$scope;var $attrs=this.$attrs;var $element=this.$element;var mode=this.mode;this.handleClick=angular.bind(this,this.handleClick);var icon=this.iconEl;var button=angular.element(this.buttonEl);var handleClick=this.handleClick;$attrs.$observe('disabled',setDisabled);setDisabled($attrs.disabled);ngModel.$render=function render(){self.clearNgAria();if(isSelected()){icon.style.display='';button.attr('aria-checked','true');}else{icon.style.display='none';button.attr('aria-checked','false');}};$scope.$$postDigest(ngModel.$render);function isSelected(){if(mode=='radio'){var val=$attrs.ngValue?$scope.$eval($attrs.ngValue):$attrs.value;return ngModel.$modelValue==val;}else{return ngModel.$modelValue;}}
function setDisabled(disabled){if(disabled){button.off('click',handleClick);}else{button.on('click',handleClick);}}};MenuItemController.prototype.handleClick=function(e){var mode=this.mode;var ngModel=this.ngModel;var $attrs=this.$attrs;var newVal;if(mode=='checkbox'){newVal=!ngModel.$modelValue;}else if(mode=='radio'){newVal=$attrs.ngValue?this.$scope.$eval($attrs.ngValue):$attrs.value;}
ngModel.$setViewValue(newVal);ngModel.$render();};})();(function(){"use strict";MenuItemDirective.$inject=["$mdUtil","$mdConstant","$$mdSvgRegistry"];angular.module('material.components.menuBar').directive('mdMenuItem',MenuItemDirective);function MenuItemDirective($mdUtil,$mdConstant,$$mdSvgRegistry){return{controller:'MenuItemController',require:['mdMenuItem','?ngModel'],priority:$mdConstant.BEFORE_NG_ARIA,compile:function(templateEl,templateAttrs){var type=templateAttrs.type;var inMenuBarClass='md-in-menu-bar';if((type=='checkbox'||type=='radio')&&templateEl.hasClass(inMenuBarClass)){var text=templateEl[0].textContent;var buttonEl=angular.element('<md-button type="button"></md-button>');var iconTemplate='<md-icon md-svg-src="'+$$mdSvgRegistry.mdChecked+'"></md-icon>';buttonEl.html(text);buttonEl.attr('tabindex','0');templateEl.html('');templateEl.append(angular.element(iconTemplate));templateEl.append(buttonEl);templateEl.addClass('md-indent').removeClass(inMenuBarClass);setDefault('role',type=='checkbox'?'menuitemcheckbox':'menuitemradio',buttonEl);moveAttrToButton('ng-disabled');}else{setDefault('role','menuitem',templateEl[0].querySelector('md-button, button, a'));}
return function(scope,el,attrs,ctrls){var ctrl=ctrls[0];var ngModel=ctrls[1];ctrl.init(ngModel);};function setDefault(attr,val,el){el=el||templateEl;if(el instanceof angular.element){el=el[0];}
if(!el.hasAttribute(attr)){el.setAttribute(attr,val);}}
function moveAttrToButton(attribute){var attributes=$mdUtil.prefixer(attribute);angular.forEach(attributes,function(attr){if(templateEl[0].hasAttribute(attr)){var val=templateEl[0].getAttribute(attr);buttonEl[0].setAttribute(attr,val);templateEl[0].removeAttribute(attr);}});}}};}})();(function(){"use strict";MdProgressCircularDirective.$inject=["$window","$mdProgressCircular","$mdTheming","$mdUtil","$interval","$log"];angular.module('material.components.progressCircular').directive('mdProgressCircular',MdProgressCircularDirective);function MdProgressCircularDirective($window,$mdProgressCircular,$mdTheming,$mdUtil,$interval,$log){var rAF=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame||angular.noop;var cAF=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame||angular.noop;var MODE_DETERMINATE='determinate';var MODE_INDETERMINATE='indeterminate';var DISABLED_CLASS='_md-progress-circular-disabled';var INDETERMINATE_CLASS='md-mode-indeterminate';return{restrict:'E',scope:{value:'@',mdDiameter:'@',mdMode:'@'},template:'<svg xmlns="http://www.w3.org/2000/svg">'+'<path fill="none"/>'+'</svg>',compile:function(element,attrs){element.attr({'aria-valuemin':0,'aria-valuemax':100,'role':'progressbar'});if(angular.isUndefined(attrs.mdMode)){var mode=attrs.hasOwnProperty('value')?MODE_DETERMINATE:MODE_INDETERMINATE;attrs.$set('mdMode',mode);}else{attrs.$set('mdMode',attrs.mdMode.trim());}
return MdProgressCircularLink;}};function MdProgressCircularLink(scope,element,attrs){var node=element[0];var svg=angular.element(node.querySelector('svg'));var path=angular.element(node.querySelector('path'));var startIndeterminate=$mdProgressCircular.startIndeterminate;var endIndeterminate=$mdProgressCircular.endIndeterminate;var iterationCount=0;var lastAnimationId=0;var lastDrawFrame;var interval;$mdTheming(element);element.toggleClass(DISABLED_CLASS,attrs.hasOwnProperty('disabled'));if(scope.mdMode===MODE_INDETERMINATE){startIndeterminateAnimation();}
scope.$on('$destroy',function(){cleanupIndeterminateAnimation();if(lastDrawFrame){cAF(lastDrawFrame);}});scope.$watchGroup(['value','mdMode',function(){var isDisabled=node.disabled;if(isDisabled===true||isDisabled===false){return isDisabled;}
return angular.isDefined(element.attr('disabled'));}],function(newValues,oldValues){var mode=newValues[1];var isDisabled=newValues[2];var wasDisabled=oldValues[2];if(isDisabled!==wasDisabled){element.toggleClass(DISABLED_CLASS,!!isDisabled);}
if(isDisabled){cleanupIndeterminateAnimation();}else{if(mode!==MODE_DETERMINATE&&mode!==MODE_INDETERMINATE){mode=MODE_INDETERMINATE;attrs.$set('mdMode',mode);}
if(mode===MODE_INDETERMINATE){startIndeterminateAnimation();}else{var newValue=clamp(newValues[0]);cleanupIndeterminateAnimation();element.attr('aria-valuenow',newValue);renderCircle(clamp(oldValues[0]),newValue);}}});scope.$watch('mdDiameter',function(newValue){var diameter=getSize(newValue);var strokeWidth=getStroke(diameter);var value=clamp(scope.value);var transformOrigin=(diameter/2)+'px';var dimensions={width:diameter+'px',height:diameter+'px'};svg[0].setAttribute('viewBox','0 0 '+diameter+' '+diameter);svg.css(dimensions).css('transform-origin',transformOrigin+' '+transformOrigin+' '+transformOrigin);element.css(dimensions);path.attr('stroke-width',strokeWidth);path.attr('stroke-linecap','square');if(scope.mdMode==MODE_INDETERMINATE){path.attr('d',getSvgArc(diameter,strokeWidth,true));path.attr('stroke-dasharray',(diameter-strokeWidth)*$window.Math.PI*0.75);path.attr('stroke-dashoffset',getDashLength(diameter,strokeWidth,1,75));}else{path.attr('d',getSvgArc(diameter,strokeWidth,false));path.attr('stroke-dasharray',(diameter-strokeWidth)*$window.Math.PI);path.attr('stroke-dashoffset',getDashLength(diameter,strokeWidth,0,100));renderCircle(value,value);}});function renderCircle(animateFrom,animateTo,easing,duration,iterationCount,maxValue){var id=++lastAnimationId;var startTime=$mdUtil.now();var changeInValue=animateTo-animateFrom;var diameter=getSize(scope.mdDiameter);var strokeWidth=getStroke(diameter);var ease=easing||$mdProgressCircular.easeFn;var animationDuration=duration||$mdProgressCircular.duration;var rotation=-90*(iterationCount||0);var dashLimit=maxValue||100;if(animateTo===animateFrom){renderFrame(animateTo);}else{lastDrawFrame=rAF(function animation(){var currentTime=$window.Math.max(0,$window.Math.min($mdUtil.now()-startTime,animationDuration));renderFrame(ease(currentTime,animateFrom,changeInValue,animationDuration));if(id===lastAnimationId&&currentTime<animationDuration){lastDrawFrame=rAF(animation);}});}
function renderFrame(value){path.attr('stroke-dashoffset',getDashLength(diameter,strokeWidth,value,dashLimit));path.attr('transform','rotate('+(rotation)+' '+diameter/2+' '+diameter/2+')');}}
function animateIndeterminate(){renderCircle(startIndeterminate,endIndeterminate,$mdProgressCircular.easeFnIndeterminate,$mdProgressCircular.durationIndeterminate,iterationCount,75);iterationCount=++iterationCount%4;}
function startIndeterminateAnimation(){if(!interval){interval=$interval(animateIndeterminate,$mdProgressCircular.durationIndeterminate,0,false);animateIndeterminate();element.addClass(INDETERMINATE_CLASS).removeAttr('aria-valuenow');}}
function cleanupIndeterminateAnimation(){if(interval){$interval.cancel(interval);interval=null;element.removeClass(INDETERMINATE_CLASS);}}}
function getSvgArc(diameter,strokeWidth,indeterminate){var radius=diameter/2;var offset=strokeWidth/2;var start=radius+','+offset;var end=offset+','+radius;var arcRadius=radius-offset;return'M'+start
+'A'+arcRadius+','+arcRadius+' 0 1 1 '+end
+(indeterminate?'':'A'+arcRadius+','+arcRadius+' 0 0 1 '+start);}
function getDashLength(diameter,strokeWidth,value,limit){return(diameter-strokeWidth)*$window.Math.PI*((3*(limit||100)/100)-(value/100));}
function clamp(value){return $window.Math.max(0,$window.Math.min(value||0,100));}
function getSize(value){var defaultValue=$mdProgressCircular.progressSize;if(value){var parsed=parseFloat(value);if(value.lastIndexOf('%')===value.length-1){parsed=(parsed/100)*defaultValue;}
return parsed;}
return defaultValue;}
function getStroke(diameter){return $mdProgressCircular.strokeWidth/100*diameter;}}})();(function(){"use strict";angular.module('material.components.progressCircular').provider("$mdProgressCircular",MdProgressCircularProvider);function MdProgressCircularProvider(){var progressConfig={progressSize:50,strokeWidth:10,duration:100,easeFn:linearEase,durationIndeterminate:1333,startIndeterminate:1,endIndeterminate:149,easeFnIndeterminate:materialEase,easingPresets:{linearEase:linearEase,materialEase:materialEase}};return{configure:function(options){progressConfig=angular.extend(progressConfig,options||{});return progressConfig;},$get:function(){return progressConfig;}};function linearEase(t,b,c,d){return c*t/d+b;}
function materialEase(t,b,c,d){var ts=(t/=d)*t;var tc=ts*t;return b+c*(6*tc*ts+-15*ts*ts+10*tc);}}})();(function(){"use strict";angular.module('material.components.tabs').directive('mdTab',MdTab);function MdTab(){return{require:'^?mdTabs',terminal:true,compile:function(element,attr){var label=firstChild(element,'md-tab-label'),body=firstChild(element,'md-tab-body');if(label.length===0){label=angular.element('<md-tab-label></md-tab-label>');if(attr.label)label.text(attr.label);else label.append(element.contents());if(body.length===0){var contents=element.contents().detach();body=angular.element('<md-tab-body></md-tab-body>');body.append(contents);}}
element.append(label);if(body.html())element.append(body);return postLink;},scope:{active:'=?mdActive',disabled:'=?ngDisabled',select:'&?mdOnSelect',deselect:'&?mdOnDeselect'}};function postLink(scope,element,attr,ctrl){if(!ctrl)return;var index=ctrl.getTabElementIndex(element),body=firstChild(element,'md-tab-body').remove(),label=firstChild(element,'md-tab-label').remove(),data=ctrl.insertTab({scope:scope,parent:scope.$parent,index:index,element:element,template:body.html(),label:label.html()},index);scope.select=scope.select||angular.noop;scope.deselect=scope.deselect||angular.noop;scope.$watch('active',function(active){if(active)ctrl.select(data.getIndex(),true);});scope.$watch('disabled',function(){ctrl.refreshIndex();});scope.$watch(function(){return ctrl.getTabElementIndex(element);},function(newIndex){data.index=newIndex;ctrl.updateTabOrder();});scope.$on('$destroy',function(){ctrl.removeTab(data);});}
function firstChild(element,tagName){var children=element[0].children;for(var i=0,len=children.length;i<len;i++){var child=children[i];if(child.tagName===tagName.toUpperCase())return angular.element(child);}
return angular.element();}}})();(function(){"use strict";angular.module('material.components.tabs').directive('mdTabItem',MdTabItem);function MdTabItem(){return{require:'^?mdTabs',link:function link(scope,element,attr,ctrl){if(!ctrl)return;ctrl.attachRipple(scope,element);}};}})();(function(){"use strict";angular.module('material.components.tabs').directive('mdTabLabel',MdTabLabel);function MdTabLabel(){return{terminal:true};}})();(function(){"use strict";MdTabScroll.$inject=["$parse"];angular.module('material.components.tabs').directive('mdTabScroll',MdTabScroll);function MdTabScroll($parse){return{restrict:'A',compile:function($element,attr){var fn=$parse(attr.mdTabScroll,null,true);return function ngEventHandler(scope,element){element.on('mousewheel',function(event){scope.$apply(function(){fn(scope,{$event:event});});});};}};}})();(function(){"use strict";MdTabsController.$inject=["$scope","$element","$window","$mdConstant","$mdTabInkRipple","$mdUtil","$animateCss","$attrs","$compile","$mdTheming","$mdInteraction","MdTabsPaginationService"];angular.module('material.components.tabs').controller('MdTabsController',MdTabsController);function MdTabsController($scope,$element,$window,$mdConstant,$mdTabInkRipple,$mdUtil,$animateCss,$attrs,$compile,$mdTheming,$mdInteraction,MdTabsPaginationService){var ctrl=this,locked=false,elements=getElements(),queue=[],destroyed=false,loaded=false;ctrl.$onInit=$onInit;ctrl.updatePagination=$mdUtil.debounce(updatePagination,100);ctrl.redirectFocus=redirectFocus;ctrl.attachRipple=attachRipple;ctrl.insertTab=insertTab;ctrl.removeTab=removeTab;ctrl.select=select;ctrl.scroll=scroll;ctrl.nextPage=nextPage;ctrl.previousPage=previousPage;ctrl.keydown=keydown;ctrl.canPageForward=canPageForward;ctrl.canPageBack=canPageBack;ctrl.refreshIndex=refreshIndex;ctrl.incrementIndex=incrementIndex;ctrl.getTabElementIndex=getTabElementIndex;ctrl.updateInkBarStyles=$mdUtil.debounce(updateInkBarStyles,100);ctrl.updateTabOrder=$mdUtil.debounce(updateTabOrder,100);ctrl.getFocusedTabId=getFocusedTabId;if(angular.version.major===1&&angular.version.minor<=4){this.$onInit();}
function $onInit(){defineOneWayBinding('stretchTabs',handleStretchTabs);defineProperty('focusIndex',handleFocusIndexChange,ctrl.selectedIndex||0);defineProperty('offsetLeft',handleOffsetChange,0);defineProperty('hasContent',handleHasContent,false);defineProperty('maxTabWidth',handleMaxTabWidth,getMaxTabWidth());defineProperty('shouldPaginate',handleShouldPaginate,false);defineBooleanAttribute('noInkBar',handleInkBar);defineBooleanAttribute('dynamicHeight',handleDynamicHeight);defineBooleanAttribute('noPagination');defineBooleanAttribute('swipeContent');defineBooleanAttribute('noDisconnect');defineBooleanAttribute('autoselect');defineBooleanAttribute('noSelectClick');defineBooleanAttribute('centerTabs',handleCenterTabs,false);defineBooleanAttribute('enableDisconnect');ctrl.scope=$scope;ctrl.parent=$scope.$parent;ctrl.tabs=[];ctrl.lastSelectedIndex=null;ctrl.hasFocus=false;ctrl.styleTabItemFocus=false;ctrl.shouldCenterTabs=shouldCenterTabs();ctrl.tabContentPrefix='tab-content-';setupTabsController();}
function setupTabsController(){ctrl.selectedIndex=ctrl.selectedIndex||0;compileTemplate();configureWatchers();bindEvents();$mdTheming($element);$mdUtil.nextTick(function(){elements=getElements();updateHeightFromContent();adjustOffset();updateInkBarStyles();ctrl.tabs[ctrl.selectedIndex]&&ctrl.tabs[ctrl.selectedIndex].scope.select();loaded=true;updatePagination();});}
function compileTemplate(){var template=$attrs.$mdTabsTemplate,element=angular.element($element[0].querySelector('md-tab-data'));element.html(template);$compile(element.contents())(ctrl.parent);delete $attrs.$mdTabsTemplate;}
function bindEvents(){angular.element($window).on('resize',handleWindowResize);$scope.$on('$destroy',cleanup);}
function configureWatchers(){$scope.$watch('$mdTabsCtrl.selectedIndex',handleSelectedIndexChange);}
function defineOneWayBinding(key,handler){var attr=$attrs.$normalize('md-'+key);if(handler)defineProperty(key,handler);$attrs.$observe(attr,function(newValue){ctrl[key]=newValue;});}
function defineBooleanAttribute(key,handler){var attr=$attrs.$normalize('md-'+key);if(handler)defineProperty(key,handler);if($attrs.hasOwnProperty(attr))updateValue($attrs[attr]);$attrs.$observe(attr,updateValue);function updateValue(newValue){ctrl[key]=newValue!=='false';}}
function cleanup(){destroyed=true;angular.element($window).off('resize',handleWindowResize);}
function handleStretchTabs(stretchTabs){var elements=getElements();angular.element(elements.wrapper).toggleClass('md-stretch-tabs',shouldStretchTabs());updateInkBarStyles();}
function handleCenterTabs(newValue){ctrl.shouldCenterTabs=shouldCenterTabs();}
function handleMaxTabWidth(newWidth,oldWidth){if(newWidth!==oldWidth){var elements=getElements();angular.forEach(elements.tabs,function(tab){tab.style.maxWidth=newWidth+'px';});angular.forEach(elements.dummies,function(tab){tab.style.maxWidth=newWidth+'px';});$mdUtil.nextTick(ctrl.updateInkBarStyles);}}
function handleShouldPaginate(newValue,oldValue){if(newValue!==oldValue){ctrl.maxTabWidth=getMaxTabWidth();ctrl.shouldCenterTabs=shouldCenterTabs();$mdUtil.nextTick(function(){ctrl.maxTabWidth=getMaxTabWidth();adjustOffset(ctrl.selectedIndex);});}}
function handleHasContent(hasContent){$element[hasContent?'removeClass':'addClass']('md-no-tab-content');}
function handleOffsetChange(left){var elements=getElements();var newValue=((ctrl.shouldCenterTabs||isRtl()?'':'-')+left+'px');newValue=newValue.replace('--','');angular.element(elements.paging).css($mdConstant.CSS.TRANSFORM,'translate3d('+newValue+', 0, 0)');$scope.$broadcast('$mdTabsPaginationChanged');}
function handleFocusIndexChange(newIndex,oldIndex){if(newIndex===oldIndex)return;if(!getElements().tabs[newIndex])return;adjustOffset();redirectFocus();}
function handleSelectedIndexChange(newValue,oldValue){if(newValue===oldValue)return;ctrl.selectedIndex=getNearestSafeIndex(newValue);ctrl.lastSelectedIndex=oldValue;ctrl.updateInkBarStyles();updateHeightFromContent();adjustOffset(newValue);$scope.$broadcast('$mdTabsChanged');ctrl.tabs[oldValue]&&ctrl.tabs[oldValue].scope.deselect();ctrl.tabs[newValue]&&ctrl.tabs[newValue].scope.select();}
function getTabElementIndex(tabEl){var tabs=$element[0].getElementsByTagName('md-tab');return Array.prototype.indexOf.call(tabs,tabEl[0]);}
function handleResizeWhenVisible(){if(handleResizeWhenVisible.watcher)return;handleResizeWhenVisible.watcher=$scope.$watch(function(){$mdUtil.nextTick(function(){if(!handleResizeWhenVisible.watcher)return;if($element.prop('offsetParent')){handleResizeWhenVisible.watcher();handleResizeWhenVisible.watcher=null;handleWindowResize();}},false);});}
function keydown(event){switch(event.keyCode){case $mdConstant.KEY_CODE.LEFT_ARROW:event.preventDefault();incrementIndex(-1,true);break;case $mdConstant.KEY_CODE.RIGHT_ARROW:event.preventDefault();incrementIndex(1,true);break;case $mdConstant.KEY_CODE.SPACE:case $mdConstant.KEY_CODE.ENTER:event.preventDefault();if(!locked)select(ctrl.focusIndex);break;case $mdConstant.KEY_CODE.TAB:if(ctrl.focusIndex!==ctrl.selectedIndex){ctrl.focusIndex=ctrl.selectedIndex;}
break;}}
function select(index,canSkipClick){if(!locked)ctrl.focusIndex=ctrl.selectedIndex=index;if(canSkipClick&&ctrl.noSelectClick)return;$mdUtil.nextTick(function(){ctrl.tabs[index].element.triggerHandler('click');},false);}
function scroll(event){if(!ctrl.shouldPaginate)return;event.preventDefault();ctrl.offsetLeft=fixOffset(ctrl.offsetLeft-event.wheelDelta);}
function nextPage(){if(!ctrl.canPageForward()){return}
var newOffset=MdTabsPaginationService.increasePageOffset(getElements(),ctrl.offsetLeft);ctrl.offsetLeft=fixOffset(newOffset);}
function previousPage(){if(!ctrl.canPageBack()){return}
var newOffset=MdTabsPaginationService.decreasePageOffset(getElements(),ctrl.offsetLeft);ctrl.offsetLeft=fixOffset(newOffset);}
function handleWindowResize(){ctrl.lastSelectedIndex=ctrl.selectedIndex;ctrl.offsetLeft=fixOffset(ctrl.offsetLeft);$mdUtil.nextTick(function(){ctrl.updateInkBarStyles();updatePagination();});}
function handleInkBar(hide){angular.element(getElements().inkBar).toggleClass('ng-hide',hide);}
function handleDynamicHeight(value){$element.toggleClass('md-dynamic-height',value);}
function removeTab(tabData){if(destroyed)return;var selectedIndex=ctrl.selectedIndex,tab=ctrl.tabs.splice(tabData.getIndex(),1)[0];refreshIndex();if(ctrl.selectedIndex===selectedIndex){tab.scope.deselect();ctrl.tabs[ctrl.selectedIndex]&&ctrl.tabs[ctrl.selectedIndex].scope.select();}
$mdUtil.nextTick(function(){updatePagination();ctrl.offsetLeft=fixOffset(ctrl.offsetLeft);});}
function insertTab(tabData,index){var hasLoaded=loaded;var proto={getIndex:function(){return ctrl.tabs.indexOf(tab);},isActive:function(){return this.getIndex()===ctrl.selectedIndex;},isLeft:function(){return this.getIndex()<ctrl.selectedIndex;},isRight:function(){return this.getIndex()>ctrl.selectedIndex;},shouldRender:function(){return!ctrl.noDisconnect||this.isActive();},hasFocus:function(){return ctrl.styleTabItemFocus&&ctrl.hasFocus&&this.getIndex()===ctrl.focusIndex;},id:$mdUtil.nextUid(),hasContent:!!(tabData.template&&tabData.template.trim())},tab=angular.extend(proto,tabData);if(angular.isDefined(index)){ctrl.tabs.splice(index,0,tab);}else{ctrl.tabs.push(tab);}
processQueue();updateHasContent();$mdUtil.nextTick(function(){updatePagination();setAriaControls(tab);if(hasLoaded&&ctrl.autoselect)$mdUtil.nextTick(function(){$mdUtil.nextTick(function(){select(ctrl.tabs.indexOf(tab));});});});return tab;}
function getElements(){var elements={};var node=$element[0];elements.wrapper=node.querySelector('md-tabs-wrapper');elements.canvas=elements.wrapper.querySelector('md-tabs-canvas');elements.paging=elements.canvas.querySelector('md-pagination-wrapper');elements.inkBar=elements.paging.querySelector('md-ink-bar');elements.nextButton=node.querySelector('md-next-button');elements.prevButton=node.querySelector('md-prev-button');elements.contents=node.querySelectorAll('md-tabs-content-wrapper > md-tab-content');elements.tabs=elements.paging.querySelectorAll('md-tab-item');elements.dummies=elements.canvas.querySelectorAll('md-dummy-tab');return elements;}
function canPageBack(){return ctrl.offsetLeft>0;}
function canPageForward(){var elements=getElements();var lastTab=elements.tabs[elements.tabs.length-1];if(isRtl()){return ctrl.offsetLeft<elements.paging.offsetWidth-elements.canvas.offsetWidth;}
return lastTab&&lastTab.offsetLeft+lastTab.offsetWidth>elements.canvas.clientWidth+
ctrl.offsetLeft;}
function getFocusedTabId(){var focusedTab=ctrl.tabs[ctrl.focusIndex];if(!focusedTab||!focusedTab.id){return null;}
return'tab-item-'+focusedTab.id;}
function shouldStretchTabs(){switch(ctrl.stretchTabs){case'always':return true;case'never':return false;default:return!ctrl.shouldPaginate&&$window.matchMedia('(max-width: 600px)').matches;}}
function shouldCenterTabs(){return ctrl.centerTabs&&!ctrl.shouldPaginate;}
function shouldPaginate(){if(ctrl.noPagination||!loaded)return false;var canvasWidth=$element.prop('clientWidth');angular.forEach(getElements().tabs,function(tab){canvasWidth-=tab.offsetWidth;});return canvasWidth<0;}
function getNearestSafeIndex(newIndex){if(newIndex===-1)return-1;var maxOffset=Math.max(ctrl.tabs.length-newIndex,newIndex),i,tab;for(i=0;i<=maxOffset;i++){tab=ctrl.tabs[newIndex+i];if(tab&&(tab.scope.disabled!==true))return tab.getIndex();tab=ctrl.tabs[newIndex-i];if(tab&&(tab.scope.disabled!==true))return tab.getIndex();}
return newIndex;}
function defineProperty(key,handler,value){Object.defineProperty(ctrl,key,{get:function(){return value;},set:function(newValue){var oldValue=value;value=newValue;handler&&handler(newValue,oldValue);}});}
function updatePagination(){ctrl.maxTabWidth=getMaxTabWidth();ctrl.shouldPaginate=shouldPaginate();}
function calcPagingWidth(){return calcTabsWidth(getElements().tabs);}
function calcTabsWidth(tabs){var width=0;angular.forEach(tabs,function(tab){width+=Math.max(tab.offsetWidth,tab.getBoundingClientRect().width);});return Math.ceil(width);}
function getMaxTabWidth(){var elements=getElements(),containerWidth=elements.canvas.clientWidth,specMax=264;return Math.max(0,Math.min(containerWidth-1,specMax));}
function getMinTabWidth(){var elements=getElements(),containerWidth=elements.canvas.clientWidth,xsBreakpoint=600,specMin=containerWidth>xsBreakpoint?160:72;return Math.max(0,Math.min(containerWidth-1,specMin));}
function updateTabOrder(){var selectedItem=ctrl.tabs[ctrl.selectedIndex],focusItem=ctrl.tabs[ctrl.focusIndex];ctrl.tabs=ctrl.tabs.sort(function(a,b){return a.index-b.index;});ctrl.selectedIndex=ctrl.tabs.indexOf(selectedItem);ctrl.focusIndex=ctrl.tabs.indexOf(focusItem);}
function incrementIndex(inc,focus){var newIndex,key=focus?'focusIndex':'selectedIndex',index=ctrl[key];for(newIndex=index+inc;ctrl.tabs[newIndex]&&ctrl.tabs[newIndex].scope.disabled;newIndex+=inc){}
newIndex=(index+inc+ctrl.tabs.length)%ctrl.tabs.length;if(ctrl.tabs[newIndex]){ctrl[key]=newIndex;}}
function redirectFocus(){ctrl.styleTabItemFocus=($mdInteraction.getLastInteractionType()==='keyboard');getElements().tabs[ctrl.focusIndex].focus();}
function adjustOffset(index){var elements=getElements();if(!angular.isNumber(index))index=ctrl.focusIndex;if(!elements.tabs[index])return;if(ctrl.shouldCenterTabs)return;var tab=elements.tabs[index],left=tab.offsetLeft,right=tab.offsetWidth+left,extraOffset=32;if(index==0){ctrl.offsetLeft=0;return;}
if(isRtl()){var tabWidthsBefore=calcTabsWidth(Array.prototype.slice.call(elements.tabs,0,index));var tabWidthsIncluding=calcTabsWidth(Array.prototype.slice.call(elements.tabs,0,index+1));ctrl.offsetLeft=Math.min(ctrl.offsetLeft,fixOffset(tabWidthsBefore));ctrl.offsetLeft=Math.max(ctrl.offsetLeft,fixOffset(tabWidthsIncluding-elements.canvas.clientWidth));}else{ctrl.offsetLeft=Math.max(ctrl.offsetLeft,fixOffset(right-elements.canvas.clientWidth+extraOffset));ctrl.offsetLeft=Math.min(ctrl.offsetLeft,fixOffset(left));}}
function processQueue(){queue.forEach(function(func){$mdUtil.nextTick(func);});queue=[];}
function updateHasContent(){var hasContent=false;for(var i=0;i<ctrl.tabs.length;i++){if(ctrl.tabs[i].hasContent){hasContent=true;break;}}
ctrl.hasContent=hasContent;}
function refreshIndex(){ctrl.selectedIndex=getNearestSafeIndex(ctrl.selectedIndex);ctrl.focusIndex=getNearestSafeIndex(ctrl.focusIndex);}
function updateHeightFromContent(){if(!ctrl.dynamicHeight)return $element.css('height','');if(!ctrl.tabs.length)return queue.push(updateHeightFromContent);var elements=getElements();var tabContent=elements.contents[ctrl.selectedIndex],contentHeight=tabContent?tabContent.offsetHeight:0,tabsHeight=elements.wrapper.offsetHeight,newHeight=contentHeight+tabsHeight,currentHeight=$element.prop('clientHeight');if(currentHeight===newHeight)return;if($element.attr('md-align-tabs')==='bottom'){currentHeight-=tabsHeight;newHeight-=tabsHeight;if($element.attr('md-border-bottom')!==undefined)++currentHeight;}
locked=true;var fromHeight={height:currentHeight+'px'},toHeight={height:newHeight+'px'};$element.css(fromHeight);$animateCss($element,{from:fromHeight,to:toHeight,easing:'cubic-bezier(0.35, 0, 0.25, 1)',duration:0.5}).start().done(function(){$element.css({transition:'none',height:''});$mdUtil.nextTick(function(){$element.css('transition','');});locked=false;});}
function updateInkBarStyles(){var elements=getElements();if(!elements.tabs[ctrl.selectedIndex]){angular.element(elements.inkBar).css({left:'auto',right:'auto'});return;}
if(!ctrl.tabs.length)return queue.push(ctrl.updateInkBarStyles);if(!$element.prop('offsetParent'))return handleResizeWhenVisible();var index=ctrl.selectedIndex,totalWidth=elements.paging.offsetWidth,tab=elements.tabs[index],left=tab.offsetLeft,right=totalWidth-left-tab.offsetWidth;if(ctrl.shouldCenterTabs){var tabWidth=calcTabsWidth(elements.tabs);if(totalWidth>tabWidth){$mdUtil.nextTick(updateInkBarStyles,false);}}
updateInkBarClassName();angular.element(elements.inkBar).css({left:left+'px',right:right+'px'});}
function updateInkBarClassName(){var elements=getElements();var newIndex=ctrl.selectedIndex,oldIndex=ctrl.lastSelectedIndex,ink=angular.element(elements.inkBar);if(!angular.isNumber(oldIndex))return;ink.toggleClass('md-left',newIndex<oldIndex).toggleClass('md-right',newIndex>oldIndex);}
function fixOffset(value){var elements=getElements();if(!elements.tabs.length||!ctrl.shouldPaginate)return 0;var lastTab=elements.tabs[elements.tabs.length-1],totalWidth=lastTab.offsetLeft+lastTab.offsetWidth;if(isRtl()){value=Math.min(elements.paging.offsetWidth-elements.canvas.clientWidth,value);value=Math.max(0,value);}else{value=Math.max(0,value);value=Math.min(totalWidth-elements.canvas.clientWidth,value);}
return value;}
function attachRipple(scope,element){var elements=getElements();var options={colorElement:angular.element(elements.inkBar)};$mdTabInkRipple.attach(scope,element,options);}
function setAriaControls(tab){if(tab.hasContent){var nodes=$element[0].querySelectorAll('[md-tab-id="'+tab.id+'"]');angular.element(nodes).attr('aria-controls',ctrl.tabContentPrefix+tab.id);}}
function isRtl(){return($mdUtil.bidi()=='rtl');}}})();(function(){"use strict";MdTabs.$inject=["$$mdSvgRegistry"];angular.module('material.components.tabs').directive('mdTabs',MdTabs);function MdTabs($$mdSvgRegistry){return{scope:{selectedIndex:'=?mdSelected'},template:function(element,attr){attr.$mdTabsTemplate=element.html();return''+'<md-tabs-wrapper> '+'<md-tab-data></md-tab-data> '+'<md-prev-button '+'tabindex="-1" '+'role="button" '+'aria-label="Previous Page" '+'aria-disabled="{{!$mdTabsCtrl.canPageBack()}}" '+'ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageBack() }" '+'ng-if="$mdTabsCtrl.shouldPaginate" '+'ng-click="$mdTabsCtrl.previousPage()"> '+'<md-icon md-svg-src="'+$$mdSvgRegistry.mdTabsArrow+'"></md-icon> '+'</md-prev-button> '+'<md-next-button '+'tabindex="-1" '+'role="button" '+'aria-label="Next Page" '+'aria-disabled="{{!$mdTabsCtrl.canPageForward()}}" '+'ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageForward() }" '+'ng-if="$mdTabsCtrl.shouldPaginate" '+'ng-click="$mdTabsCtrl.nextPage()"> '+'<md-icon md-svg-src="'+$$mdSvgRegistry.mdTabsArrow+'"></md-icon> '+'</md-next-button> '+'<md-tabs-canvas '+'ng-focus="$mdTabsCtrl.redirectFocus()" '+'ng-class="{ '+'\'md-paginated\': $mdTabsCtrl.shouldPaginate, '+'\'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs '+'}" '+'ng-keydown="$mdTabsCtrl.keydown($event)"> '+'<md-pagination-wrapper '+'ng-class="{ \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" '+'md-tab-scroll="$mdTabsCtrl.scroll($event)" '+'role="tablist"> '+'<md-tab-item '+'tabindex="{{ tab.isActive() ? 0 : -1 }}" '+'class="md-tab" '+'ng-repeat="tab in $mdTabsCtrl.tabs" '+'role="tab" '+'id="tab-item-{{::tab.id}}" '+'md-tab-id="{{::tab.id}}"'+'aria-selected="{{tab.isActive()}}" '+'aria-disabled="{{tab.scope.disabled || \'false\'}}" '+'ng-click="$mdTabsCtrl.select(tab.getIndex())" '+'ng-focus="$mdTabsCtrl.hasFocus = true" '+'ng-blur="$mdTabsCtrl.hasFocus = false" '+'ng-class="{ '+'\'md-active\':    tab.isActive(), '+'\'md-focused\':   tab.hasFocus(), '+'\'md-disabled\':  tab.scope.disabled '+'}" '+'ng-disabled="tab.scope.disabled" '+'md-swipe-left="$mdTabsCtrl.nextPage()" '+'md-swipe-right="$mdTabsCtrl.previousPage()" '+'md-tabs-template="::tab.label" '+'md-scope="::tab.parent"></md-tab-item> '+'<md-ink-bar></md-ink-bar> '+'</md-pagination-wrapper> '+'<md-tabs-dummy-wrapper aria-hidden="true" class="md-visually-hidden md-dummy-wrapper"> '+'<md-dummy-tab '+'class="md-tab" '+'tabindex="-1" '+'ng-repeat="tab in $mdTabsCtrl.tabs" '+'md-tabs-template="::tab.label" '+'md-scope="::tab.parent"></md-dummy-tab> '+'</md-tabs-dummy-wrapper> '+'</md-tabs-canvas> '+'</md-tabs-wrapper> '+'<md-tabs-content-wrapper ng-show="$mdTabsCtrl.hasContent && $mdTabsCtrl.selectedIndex >= 0" class="_md"> '+'<md-tab-content '+'id="{{:: $mdTabsCtrl.tabContentPrefix + tab.id}}" '+'class="_md" '+'role="tabpanel" '+'aria-labelledby="tab-item-{{::tab.id}}" '+'md-swipe-left="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(1)" '+'md-swipe-right="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(-1)" '+'ng-if="tab.hasContent" '+'ng-repeat="(index, tab) in $mdTabsCtrl.tabs" '+'ng-class="{ '+'\'md-no-transition\': $mdTabsCtrl.lastSelectedIndex == null, '+'\'md-active\':        tab.isActive(), '+'\'md-left\':          tab.isLeft(), '+'\'md-right\':         tab.isRight(), '+'\'md-no-scroll\':     $mdTabsCtrl.dynamicHeight '+'}"> '+'<div '+'md-tabs-template="::tab.template" '+'md-connected-if="tab.isActive()" '+'md-scope="::tab.parent" '+'ng-if="$mdTabsCtrl.enableDisconnect || tab.shouldRender()"></div> '+'</md-tab-content> '+'</md-tabs-content-wrapper>';},controller:'MdTabsController',controllerAs:'$mdTabsCtrl',bindToController:true};}})();(function(){"use strict";MdTabsDummyWrapper.$inject=["$mdUtil","$window"];angular.module('material.components.tabs').directive('mdTabsDummyWrapper',MdTabsDummyWrapper);function MdTabsDummyWrapper($mdUtil,$window){return{require:'^?mdTabs',link:function link(scope,element,attr,ctrl){if(!ctrl)return;var observer;var disconnect;var mutationCallback=function(){ctrl.updatePagination();ctrl.updateInkBarStyles();};if('MutationObserver'in $window){var config={childList:true,subtree:true,characterData:true};observer=new MutationObserver(mutationCallback);observer.observe(element[0],config);disconnect=observer.disconnect.bind(observer);}else{var debounced=$mdUtil.debounce(mutationCallback,15,null,false);element.on('DOMSubtreeModified',debounced);disconnect=element.off.bind(element,'DOMSubtreeModified',debounced);}
scope.$on('$destroy',function(){disconnect();});}};}})();(function(){"use strict";MdTabsTemplate.$inject=["$compile","$mdUtil"];angular.module('material.components.tabs').directive('mdTabsTemplate',MdTabsTemplate);function MdTabsTemplate($compile,$mdUtil){return{restrict:'A',link:link,scope:{template:'=mdTabsTemplate',connected:'=?mdConnectedIf',compileScope:'=mdScope'},require:'^?mdTabs'};function link(scope,element,attr,ctrl){if(!ctrl)return;var compileScope=ctrl.enableDisconnect?scope.compileScope.$new():scope.compileScope;element.html(scope.template);$compile(element.contents())(compileScope);return $mdUtil.nextTick(handleScope);function handleScope(){scope.$watch('connected',function(value){value===false?disconnect():reconnect();});scope.$on('$destroy',reconnect);}
function disconnect(){if(ctrl.enableDisconnect)$mdUtil.disconnectScope(compileScope);}
function reconnect(){if(ctrl.enableDisconnect)$mdUtil.reconnectScope(compileScope);}}}})();(function(){angular.module("material.core").constant("$MD_THEME_CSS","md-autocomplete.md-THEME_NAME-theme{background:\"{{background-A100}}\"}md-autocomplete.md-THEME_NAME-theme[disabled]:not([md-floating-label]){background:\"{{background-100}}\"}md-autocomplete.md-THEME_NAME-theme button md-icon path{fill:\"{{background-600}}\"}md-autocomplete.md-THEME_NAME-theme button:after{background:\"{{background-600-0.3}}\"}.md-autocomplete-suggestions-container.md-THEME_NAME-theme{background:\"{{background-A100}}\"}.md-autocomplete-suggestions-container.md-THEME_NAME-theme li{color:\"{{background-900}}\"}.md-autocomplete-suggestions-container.md-THEME_NAME-theme li .highlight{color:\"{{background-600}}\"}.md-autocomplete-suggestions-container.md-THEME_NAME-theme li.selected,.md-autocomplete-suggestions-container.md-THEME_NAME-theme li:hover{background:\"{{background-200}}\"}md-backdrop{background-color:\"{{background-900-0.0}}\"}md-backdrop.md-opaque.md-THEME_NAME-theme{background-color:\"{{background-900-1.0}}\"}md-bottom-sheet.md-THEME_NAME-theme{background-color:\"{{background-50}}\";border-top-color:\"{{background-300}}\"}md-bottom-sheet.md-THEME_NAME-theme.md-list md-list-item{color:\"{{foreground-1}}\"}md-bottom-sheet.md-THEME_NAME-theme .md-subheader{background-color:\"{{background-50}}\";color:\"{{foreground-1}}\"}.md-button.md-THEME_NAME-theme:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme:not([disabled]):hover{background-color:\"{{background-500-0.2}}\"}.md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover{background-color:transparent}.md-button.md-THEME_NAME-theme.md-fab md-icon{color:\"{{accent-contrast}}\"}.md-button.md-THEME_NAME-theme.md-primary{color:\"{{primary-color}}\"}.md-button.md-THEME_NAME-theme.md-primary.md-fab,.md-button.md-THEME_NAME-theme.md-primary.md-raised{color:\"{{primary-contrast}}\";background-color:\"{{primary-color}}\"}.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon,.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon{color:\"{{primary-contrast}}\"}.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover,.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover{background-color:\"{{primary-600}}\"}.md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon{color:\"{{primary-color}}\"}.md-button.md-THEME_NAME-theme.md-fab{background-color:\"{{accent-color}}\";color:\"{{accent-contrast}}\"}.md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon{color:\"{{accent-contrast}}\"}.md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover{background-color:\"{{accent-A700}}\"}.md-button.md-THEME_NAME-theme.md-raised{color:\"{{background-900}}\";background-color:\"{{background-50}}\"}.md-button.md-THEME_NAME-theme.md-raised:not([disabled]) md-icon{color:\"{{background-900}}\"}.md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover{background-color:\"{{background-50}}\"}.md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused{background-color:\"{{background-200}}\"}.md-button.md-THEME_NAME-theme.md-warn{color:\"{{warn-color}}\"}.md-button.md-THEME_NAME-theme.md-warn.md-fab,.md-button.md-THEME_NAME-theme.md-warn.md-raised{color:\"{{warn-contrast}}\";background-color:\"{{warn-color}}\"}.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon,.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon{color:\"{{warn-contrast}}\"}.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover,.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover{background-color:\"{{warn-600}}\"}.md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon{color:\"{{warn-color}}\"}.md-button.md-THEME_NAME-theme.md-accent{color:\"{{accent-color}}\"}.md-button.md-THEME_NAME-theme.md-accent.md-fab,.md-button.md-THEME_NAME-theme.md-accent.md-raised{color:\"{{accent-contrast}}\";background-color:\"{{accent-color}}\"}.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon,.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon{color:\"{{accent-contrast}}\"}.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover,.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused,.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover{background-color:\"{{accent-A700}}\"}.md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon{color:\"{{accent-color}}\"}.md-button.md-THEME_NAME-theme.md-accent[disabled],.md-button.md-THEME_NAME-theme.md-fab[disabled],.md-button.md-THEME_NAME-theme.md-raised[disabled],.md-button.md-THEME_NAME-theme.md-warn[disabled],.md-button.md-THEME_NAME-theme[disabled]{color:\"{{foreground-3}}\";cursor:default}.md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon,.md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon,.md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon,.md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon,.md-button.md-THEME_NAME-theme[disabled] md-icon{color:\"{{foreground-3}}\"}.md-button.md-THEME_NAME-theme.md-fab[disabled],.md-button.md-THEME_NAME-theme.md-raised[disabled]{background-color:\"{{foreground-4}}\"}.md-button.md-THEME_NAME-theme[disabled]{background-color:transparent}._md a.md-THEME_NAME-theme:not(.md-button).md-primary{color:\"{{primary-color}}\"}._md a.md-THEME_NAME-theme:not(.md-button).md-primary:hover{color:\"{{primary-700}}\"}._md a.md-THEME_NAME-theme:not(.md-button).md-accent{color:\"{{accent-color}}\"}._md a.md-THEME_NAME-theme:not(.md-button).md-accent:hover{color:\"{{accent-A700}}\"}._md a.md-THEME_NAME-theme:not(.md-button).md-warn{color:\"{{warn-color}}\"}._md a.md-THEME_NAME-theme:not(.md-button).md-warn:hover{color:\"{{warn-700}}\"}md-card.md-THEME_NAME-theme{color:\"{{foreground-1}}\";background-color:\"{{background-hue-1}}\";border-radius:2px}md-card.md-THEME_NAME-theme .md-card-image{border-radius:2px 2px 0 0}md-card.md-THEME_NAME-theme md-card-header md-card-avatar md-icon{color:\"{{background-color}}\";background-color:\"{{foreground-3}}\"}md-card.md-THEME_NAME-theme md-card-header md-card-header-text .md-subhead,md-card.md-THEME_NAME-theme md-card-title md-card-title-text:not(:only-child) .md-subhead{color:\"{{foreground-2}}\"}md-chips.md-THEME_NAME-theme .md-chips{box-shadow:0 1px \"{{foreground-4}}\"}md-chips.md-THEME_NAME-theme .md-chips.md-focused{box-shadow:0 2px \"{{primary-color}}\"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input{color:\"{{foreground-1}}\"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input:-moz-placeholder,md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input::-moz-placeholder{color:\"{{foreground-3}}\"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input:-ms-input-placeholder{color:\"{{foreground-3}}\"}md-chips.md-THEME_NAME-theme .md-chips .md-chip-input-container input::-webkit-input-placeholder{color:\"{{foreground-3}}\"}md-chips.md-THEME_NAME-theme md-chip{background:\"{{background-300}}\";color:\"{{background-800}}\"}md-chips.md-THEME_NAME-theme md-chip md-icon{color:\"{{background-700}}\"}md-chips.md-THEME_NAME-theme md-chip.md-focused{background:\"{{primary-color}}\";color:\"{{primary-contrast}}\"}md-chips.md-THEME_NAME-theme md-chip.md-focused md-icon{color:\"{{primary-contrast}}\"}md-chips.md-THEME_NAME-theme md-chip._md-chip-editing{background:transparent;color:\"{{background-800}}\"}md-chips.md-THEME_NAME-theme md-chip-remove .md-button md-icon path{fill:\"{{background-500}}\"}.md-contact-suggestion span.md-contact-email{color:\"{{background-400}}\"}md-checkbox.md-THEME_NAME-theme .md-ripple{color:\"{{accent-A700}}\"}md-checkbox.md-THEME_NAME-theme.md-checked .md-ripple{color:\"{{background-600}}\"}md-checkbox.md-THEME_NAME-theme.md-checked.md-focused .md-container:before{background-color:\"{{accent-color-0.26}}\"}md-checkbox.md-THEME_NAME-theme .md-ink-ripple{color:\"{{foreground-2}}\"}md-checkbox.md-THEME_NAME-theme.md-checked .md-ink-ripple{color:\"{{accent-color-0.87}}\"}md-checkbox.md-THEME_NAME-theme:not(.md-checked) .md-icon{border-color:\"{{foreground-2}}\"}md-checkbox.md-THEME_NAME-theme.md-checked .md-icon{background-color:\"{{accent-color-0.87}}\"}md-checkbox.md-THEME_NAME-theme.md-checked .md-icon:after{border-color:\"{{accent-contrast-0.87}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ripple{color:\"{{primary-600}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ripple{color:\"{{background-600}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ink-ripple{color:\"{{foreground-2}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple{color:\"{{primary-color-0.87}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary:not(.md-checked) .md-icon{border-color:\"{{foreground-2}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon{background-color:\"{{primary-color-0.87}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked.md-focused .md-container:before{background-color:\"{{primary-color-0.26}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon:after{border-color:\"{{primary-contrast-0.87}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-indeterminate[disabled] .md-container{color:\"{{foreground-3}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ripple{color:\"{{warn-600}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ink-ripple{color:\"{{foreground-2}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple{color:\"{{warn-color-0.87}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn:not(.md-checked) .md-icon{border-color:\"{{foreground-2}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon{background-color:\"{{warn-color-0.87}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked.md-focused:not([disabled]) .md-container:before{background-color:\"{{warn-color-0.26}}\"}md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon:after{border-color:\"{{background-200}}\"}md-checkbox.md-THEME_NAME-theme[disabled]:not(.md-checked) .md-icon{border-color:\"{{foreground-3}}\"}md-checkbox.md-THEME_NAME-theme[disabled].md-checked .md-icon{background-color:\"{{foreground-3}}\"}md-checkbox.md-THEME_NAME-theme[disabled].md-checked .md-icon:after{border-color:\"{{background-200}}\"}md-checkbox.md-THEME_NAME-theme[disabled] .md-icon:after{border-color:\"{{foreground-3}}\"}md-checkbox.md-THEME_NAME-theme[disabled] .md-label{color:\"{{foreground-3}}\"}md-content.md-THEME_NAME-theme{color:\"{{foreground-1}}\";background-color:\"{{background-default}}\"}.md-calendar.md-THEME_NAME-theme{background:\"{{background-A100}}\";color:\"{{background-A200-0.87}}\"}.md-calendar.md-THEME_NAME-theme tr:last-child td{border-bottom-color:\"{{background-200}}\"}.md-THEME_NAME-theme .md-calendar-day-header{background:\"{{background-300}}\";color:\"{{background-A200-0.87}}\"}.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today .md-calendar-date-selection-indicator{border:1px solid \"{{primary-500}}\"}.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today.md-calendar-date-disabled{color:\"{{primary-500-0.6}}\"}.md-calendar-date.md-focus .md-THEME_NAME-theme .md-calendar-date-selection-indicator,.md-THEME_NAME-theme .md-calendar-date-selection-indicator:hover{background:\"{{background-300}}\"}.md-THEME_NAME-theme .md-calendar-date.md-calendar-selected-date .md-calendar-date-selection-indicator,.md-THEME_NAME-theme .md-calendar-date.md-focus.md-calendar-selected-date .md-calendar-date-selection-indicator{background:\"{{primary-500}}\";color:\"{{primary-500-contrast}}\";border-color:transparent}.md-THEME_NAME-theme .md-calendar-date-disabled,.md-THEME_NAME-theme .md-calendar-month-label-disabled{color:\"{{background-A200-0.435}}\"}.md-THEME_NAME-theme .md-datepicker-input{color:\"{{foreground-1}}\"}.md-THEME_NAME-theme .md-datepicker-input:-moz-placeholder,.md-THEME_NAME-theme .md-datepicker-input::-moz-placeholder{color:\"{{foreground-3}}\"}.md-THEME_NAME-theme .md-datepicker-input:-ms-input-placeholder{color:\"{{foreground-3}}\"}.md-THEME_NAME-theme .md-datepicker-input::-webkit-input-placeholder{color:\"{{foreground-3}}\"}.md-THEME_NAME-theme .md-datepicker-input-container{border-bottom-color:\"{{foreground-4}}\"}.md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused{border-bottom-color:\"{{primary-color}}\"}.md-accent .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused{border-bottom-color:\"{{accent-color}}\"}.md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-invalid,.md-warn .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused{border-bottom-color:\"{{warn-A700}}\"}.md-THEME_NAME-theme .md-datepicker-calendar-pane{border-color:\"{{background-hue-1}}\"}.md-THEME_NAME-theme .md-datepicker-triangle-button .md-datepicker-expand-triangle{border-top-color:\"{{foreground-2}}\"}.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon{color:\"{{primary-color}}\"}.md-accent .md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon,.md-THEME_NAME-theme .md-datepicker-open.md-accent .md-datepicker-calendar-icon{color:\"{{accent-color}}\"}.md-THEME_NAME-theme .md-datepicker-open.md-warn .md-datepicker-calendar-icon,.md-warn .md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon{color:\"{{warn-A700}}\"}.md-THEME_NAME-theme .md-datepicker-calendar{background:\"{{background-A100}}\"}.md-THEME_NAME-theme .md-datepicker-input-mask-opaque{box-shadow:0 0 0 9999px \"{{background-hue-1}}\"}.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-input-container{background:\"{{background-hue-1}}\"}md-dialog.md-THEME_NAME-theme{border-radius:4px;background-color:\"{{background-hue-1}}\";color:\"{{foreground-1}}\"}md-dialog.md-THEME_NAME-theme.md-content-overflow .md-actions,md-dialog.md-THEME_NAME-theme.md-content-overflow md-dialog-actions,md-divider.md-THEME_NAME-theme{border-top-color:\"{{foreground-4}}\"}.layout-gt-lg-row>md-divider.md-THEME_NAME-theme,.layout-gt-md-row>md-divider.md-THEME_NAME-theme,.layout-gt-sm-row>md-divider.md-THEME_NAME-theme,.layout-gt-xs-row>md-divider.md-THEME_NAME-theme,.layout-lg-row>md-divider.md-THEME_NAME-theme,.layout-md-row>md-divider.md-THEME_NAME-theme,.layout-row>md-divider.md-THEME_NAME-theme,.layout-sm-row>md-divider.md-THEME_NAME-theme,.layout-xl-row>md-divider.md-THEME_NAME-theme,.layout-xs-row>md-divider.md-THEME_NAME-theme{border-right-color:\"{{foreground-4}}\"}md-icon.md-THEME_NAME-theme{color:\"{{foreground-2}}\"}md-icon.md-THEME_NAME-theme.md-primary{color:\"{{primary-color}}\"}md-icon.md-THEME_NAME-theme.md-accent{color:\"{{accent-color}}\"}md-icon.md-THEME_NAME-theme.md-warn{color:\"{{warn-color}}\"}md-input-container.md-THEME_NAME-theme .md-input{color:\"{{foreground-1}}\";border-color:\"{{foreground-4}}\"}md-input-container.md-THEME_NAME-theme .md-input:-moz-placeholder,md-input-container.md-THEME_NAME-theme .md-input::-moz-placeholder{color:\"{{foreground-3}}\"}md-input-container.md-THEME_NAME-theme .md-input:-ms-input-placeholder{color:\"{{foreground-3}}\"}md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder{color:\"{{foreground-3}}\"}md-input-container.md-THEME_NAME-theme>md-icon{color:\"{{foreground-1}}\"}md-input-container.md-THEME_NAME-theme .md-placeholder,md-input-container.md-THEME_NAME-theme label{color:\"{{foreground-3}}\"}md-input-container.md-THEME_NAME-theme label.md-required:after{color:\"{{warn-A700}}\"}md-input-container.md-THEME_NAME-theme:not(.md-input-focused):not(.md-input-invalid) label.md-required:after{color:\"{{foreground-2}}\"}md-input-container.md-THEME_NAME-theme .md-input-message-animation,md-input-container.md-THEME_NAME-theme .md-input-messages-animation{color:\"{{warn-A700}}\"}md-input-container.md-THEME_NAME-theme .md-input-message-animation .md-char-counter,md-input-container.md-THEME_NAME-theme .md-input-messages-animation .md-char-counter{color:\"{{foreground-1}}\"}md-input-container.md-THEME_NAME-theme.md-input-focused .md-input:-moz-placeholder,md-input-container.md-THEME_NAME-theme.md-input-focused .md-input::-moz-placeholder{color:\"{{foreground-2}}\"}md-input-container.md-THEME_NAME-theme.md-input-focused .md-input:-ms-input-placeholder{color:\"{{foreground-2}}\"}md-input-container.md-THEME_NAME-theme.md-input-focused .md-input::-webkit-input-placeholder{color:\"{{foreground-2}}\"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-has-value label{color:\"{{foreground-2}}\"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused .md-input,md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-resized .md-input{border-color:\"{{primary-color}}\"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused label,md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused md-icon{color:\"{{primary-color}}\"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent .md-input{border-color:\"{{accent-color}}\"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent label,md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent md-icon{color:\"{{accent-color}}\"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn .md-input{border-color:\"{{warn-A700}}\"}md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn label,md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn md-icon{color:\"{{warn-A700}}\"}md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input{border-color:\"{{warn-A700}}\"}md-input-container.md-THEME_NAME-theme.md-input-invalid .md-char-counter,md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input-message-animation,md-input-container.md-THEME_NAME-theme.md-input-invalid label{color:\"{{warn-A700}}\"}[disabled] md-input-container.md-THEME_NAME-theme .md-input,md-input-container.md-THEME_NAME-theme .md-input[disabled]{border-bottom-color:transparent;color:\"{{foreground-3}}\";background-image:linear-gradient(90deg,\"{{foreground-3}}\" 0,\"{{foreground-3}}\" 33%,transparent 0);background-image:-ms-linear-gradient(left,transparent 0,\"{{foreground-3}}\" 100%)}md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h3,md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h4,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h3,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h4{color:\"{{foreground-1}}\"}md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text p,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text p{color:\"{{foreground-2}}\"}md-list.md-THEME_NAME-theme .md-proxy-focus.md-focused div.md-no-style{background-color:\"{{background-100}}\"}md-list.md-THEME_NAME-theme md-list-item .md-avatar-icon{background-color:\"{{foreground-3}}\";color:\"{{background-color}}\"}md-list.md-THEME_NAME-theme md-list-item>md-icon{color:\"{{foreground-2}}\"}md-list.md-THEME_NAME-theme md-list-item>md-icon.md-highlight{color:\"{{primary-color}}\"}md-list.md-THEME_NAME-theme md-list-item>md-icon.md-highlight.md-accent{color:\"{{accent-color}}\"}md-menu-content.md-THEME_NAME-theme{background-color:\"{{background-A100}}\"}md-menu-content.md-THEME_NAME-theme md-menu-item{color:\"{{background-A200-0.87}}\"}md-menu-content.md-THEME_NAME-theme md-menu-item md-icon{color:\"{{background-A200-0.54}}\"}md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled],md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled] md-icon{color:\"{{background-A200-0.25}}\"}md-menu-content.md-THEME_NAME-theme md-menu-divider{background-color:\"{{background-A200-0.11}}\"}md-menu-bar.md-THEME_NAME-theme>button.md-button{color:\"{{foreground-2}}\";border-radius:2px}md-menu-bar.md-THEME_NAME-theme md-menu.md-open>button,md-menu-bar.md-THEME_NAME-theme md-menu>button:focus{outline:none;background:\"{{background-200}}\"}md-menu-bar.md-THEME_NAME-theme.md-open:not(.md-keyboard-mode) md-menu:hover>button{background-color:\"{{ background-500-0.2}}\"}md-menu-bar.md-THEME_NAME-theme:not(.md-keyboard-mode):not(.md-open) md-menu button:focus,md-menu-bar.md-THEME_NAME-theme:not(.md-keyboard-mode):not(.md-open) md-menu button:hover{background:transparent}md-menu-content.md-THEME_NAME-theme .md-menu>.md-button:after{color:\"{{background-A200-0.54}}\"}md-menu-content.md-THEME_NAME-theme .md-menu.md-open>.md-button{background-color:\"{{ background-500-0.2}}\"}md-toolbar.md-THEME_NAME-theme.md-menu-toolbar{background-color:\"{{background-A100}}\";color:\"{{background-A200}}\"}md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler{background-color:\"{{primary-color}}\";color:\"{{background-A100-0.87}}\"}md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler md-icon{color:\"{{background-A100-0.87}}\"}md-nav-bar.md-THEME_NAME-theme .md-nav-bar{background-color:transparent;border-color:\"{{foreground-4}}\"}md-nav-bar.md-THEME_NAME-theme .md-button._md-nav-button.md-unselected{color:\"{{foreground-2}}\"}md-nav-bar.md-THEME_NAME-theme md-nav-ink-bar{color:\"{{accent-color}}\";background:\"{{accent-color}}\"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar{background-color:\"{{accent-color}}\"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar .md-button._md-nav-button{color:\"{{accent-A100}}\"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar .md-button._md-nav-button.md-active,md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar .md-button._md-nav-button.md-focused{color:\"{{accent-contrast}}\"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar .md-button._md-nav-button.md-focused{background:\"{{accent-contrast-0.1}}\"}md-nav-bar.md-THEME_NAME-theme.md-accent>.md-nav-bar md-nav-ink-bar{color:\"{{primary-600-1}}\";background:\"{{primary-600-1}}\"}md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar{background-color:\"{{warn-color}}\"}md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar .md-button._md-nav-button{color:\"{{warn-100}}\"}md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar .md-button._md-nav-button.md-active,md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar .md-button._md-nav-button.md-focused{color:\"{{warn-contrast}}\"}md-nav-bar.md-THEME_NAME-theme.md-warn>.md-nav-bar .md-button._md-nav-button.md-focused{background:\"{{warn-contrast-0.1}}\"}md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar{background-color:\"{{primary-color}}\"}md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar .md-button._md-nav-button{color:\"{{primary-100}}\"}md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar .md-button._md-nav-button.md-active,md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar .md-button._md-nav-button.md-focused{color:\"{{primary-contrast}}\"}md-nav-bar.md-THEME_NAME-theme.md-primary>.md-nav-bar .md-button._md-nav-button.md-focused{background:\"{{primary-contrast-0.1}}\"}md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar{background-color:\"{{primary-color}}\"}md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button{color:\"{{primary-100}}\"}md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-active,md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{color:\"{{primary-contrast}}\"}md-toolbar>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{background:\"{{primary-contrast-0.1}}\"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar{background-color:\"{{accent-color}}\"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button{color:\"{{accent-A100}}\"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-active,md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{color:\"{{accent-contrast}}\"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{background:\"{{accent-contrast-0.1}}\"}md-toolbar.md-accent>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar md-nav-ink-bar{color:\"{{primary-600-1}}\";background:\"{{primary-600-1}}\"}md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar{background-color:\"{{warn-color}}\"}md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button{color:\"{{warn-100}}\"}md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-active,md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{color:\"{{warn-contrast}}\"}md-toolbar.md-warn>md-nav-bar.md-THEME_NAME-theme>.md-nav-bar .md-button._md-nav-button.md-focused{background:\"{{warn-contrast-0.1}}\"}._md-panel-backdrop.md-THEME_NAME-theme{background-color:\"{{background-900-1.0}}\"}md-progress-circular.md-THEME_NAME-theme path{stroke:\"{{primary-color}}\"}md-progress-circular.md-THEME_NAME-theme.md-warn path{stroke:\"{{warn-color}}\"}md-progress-circular.md-THEME_NAME-theme.md-accent path{stroke:\"{{accent-color}}\"}md-progress-linear.md-THEME_NAME-theme .md-container{background-color:\"{{primary-100}}\"}md-progress-linear.md-THEME_NAME-theme .md-bar{background-color:\"{{primary-color}}\"}md-progress-linear.md-THEME_NAME-theme.md-warn .md-container{background-color:\"{{warn-100}}\"}md-progress-linear.md-THEME_NAME-theme.md-warn .md-bar{background-color:\"{{warn-color}}\"}md-progress-linear.md-THEME_NAME-theme.md-accent .md-container{background-color:\"{{accent-100}}\"}md-progress-linear.md-THEME_NAME-theme.md-accent .md-bar{background-color:\"{{accent-color}}\"}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-primary .md-bar1{background-color:\"{{primary-100}}\"}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-primary .md-dashed:before{background:radial-gradient(\"{{primary-100}}\" 0,\"{{primary-100}}\" 16%,transparent 42%)}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-bar1{background-color:\"{{warn-100}}\"}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-dashed:before{background:radial-gradient(\"{{warn-100}}\" 0,\"{{warn-100}}\" 16%,transparent 42%)}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-bar1{background-color:\"{{accent-100}}\"}md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-dashed:before{background:radial-gradient(\"{{accent-100}}\" 0,\"{{accent-100}}\" 16%,transparent 42%)}md-radio-button.md-THEME_NAME-theme .md-off{border-color:\"{{foreground-2}}\"}md-radio-button.md-THEME_NAME-theme .md-on{background-color:\"{{accent-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme.md-checked .md-off{border-color:\"{{accent-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme.md-checked .md-ink-ripple{color:\"{{accent-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme .md-container .md-ripple{color:\"{{accent-A700}}\"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-on,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-on,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-on{background-color:\"{{primary-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-off{border-color:\"{{primary-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple{color:\"{{primary-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-container .md-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-container .md-ripple{color:\"{{primary-600}}\"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-on,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-on,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-on{background-color:\"{{warn-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-off,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-off{border-color:\"{{warn-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple{color:\"{{warn-color-0.87}}\"}md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-container .md-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple,md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-container .md-ripple{color:\"{{warn-600}}\"}md-radio-button.md-THEME_NAME-theme[disabled],md-radio-group.md-THEME_NAME-theme[disabled]{color:\"{{foreground-3}}\"}md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-off,md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-on,md-radio-group.md-THEME_NAME-theme[disabled] .md-container .md-off,md-radio-group.md-THEME_NAME-theme[disabled] .md-container .md-on{border-color:\"{{foreground-3}}\"}md-radio-group.md-THEME_NAME-theme .md-checked .md-ink-ripple{color:\"{{accent-color-0.26}}\"}md-radio-group.md-THEME_NAME-theme .md-checked:not([disabled]).md-primary .md-ink-ripple,md-radio-group.md-THEME_NAME-theme.md-primary .md-checked:not([disabled]) .md-ink-ripple{color:\"{{primary-color-0.26}}\"}md-radio-group.md-THEME_NAME-theme .md-checked.md-primary .md-ink-ripple{color:\"{{warn-color-0.26}}\"}md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked .md-container:before{background-color:\"{{accent-color-0.26}}\"}md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-primary .md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-primary .md-checked .md-container:before{background-color:\"{{primary-color-0.26}}\"}md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-warn .md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-warn .md-checked .md-container:before{background-color:\"{{warn-color-0.26}}\"}md-input-container md-select.md-THEME_NAME-theme .md-select-value span:first-child:after{color:\"{{warn-A700}}\"}md-input-container:not(.md-input-focused):not(.md-input-invalid) md-select.md-THEME_NAME-theme .md-select-value span:first-child:after{color:\"{{foreground-3}}\"}md-input-container.md-input-focused:not(.md-input-has-value) md-select.md-THEME_NAME-theme .md-select-value,md-input-container.md-input-focused:not(.md-input-has-value) md-select.md-THEME_NAME-theme .md-select-value.md-select-placeholder{color:\"{{primary-color}}\"}md-input-container.md-input-invalid md-select.md-THEME_NAME-theme .md-select-value{color:\"{{warn-A700}}\"!important;border-bottom-color:\"{{warn-A700}}\"!important}md-input-container.md-input-invalid md-select.md-THEME_NAME-theme.md-no-underline .md-select-value{border-bottom-color:transparent!important}md-select.md-THEME_NAME-theme[disabled] .md-select-value{border-bottom-color:transparent;background-image:linear-gradient(90deg,\"{{foreground-3}}\" 0,\"{{foreground-3}}\" 33%,transparent 0);background-image:-ms-linear-gradient(left,transparent 0,\"{{foreground-3}}\" 100%)}md-select.md-THEME_NAME-theme .md-select-value{border-bottom-color:\"{{foreground-4}}\"}md-select.md-THEME_NAME-theme .md-select-value.md-select-placeholder{color:\"{{foreground-3}}\"}md-select.md-THEME_NAME-theme .md-select-value span:first-child:after{color:\"{{warn-A700}}\"}md-select.md-THEME_NAME-theme.md-no-underline .md-select-value{border-bottom-color:transparent!important}md-select.md-THEME_NAME-theme.ng-invalid.ng-touched .md-select-value{color:\"{{warn-A700}}\"!important;border-bottom-color:\"{{warn-A700}}\"!important}md-select.md-THEME_NAME-theme.ng-invalid.ng-touched.md-no-underline .md-select-value{border-bottom-color:transparent!important}md-select.md-THEME_NAME-theme:not([disabled]):focus .md-select-value{border-bottom-color:\"{{primary-color}}\";color:\"{{ foreground-1 }}\"}md-select.md-THEME_NAME-theme:not([disabled]):focus .md-select-value.md-select-placeholder{color:\"{{ foreground-1 }}\"}md-select.md-THEME_NAME-theme:not([disabled]):focus.md-no-underline .md-select-value{border-bottom-color:transparent!important}md-select.md-THEME_NAME-theme:not([disabled]):focus.md-accent .md-select-value{border-bottom-color:\"{{accent-color}}\"}md-select.md-THEME_NAME-theme:not([disabled]):focus.md-warn .md-select-value{border-bottom-color:\"{{warn-color}}\"}md-select.md-THEME_NAME-theme[disabled] .md-select-icon,md-select.md-THEME_NAME-theme[disabled] .md-select-value,md-select.md-THEME_NAME-theme[disabled] .md-select-value.md-select-placeholder{color:\"{{foreground-3}}\"}md-select.md-THEME_NAME-theme .md-select-icon{color:\"{{foreground-2}}\"}md-select-menu.md-THEME_NAME-theme md-content{background:\"{{background-A100}}\"}md-select-menu.md-THEME_NAME-theme md-content md-optgroup{color:\"{{background-600-0.87}}\"}md-select-menu.md-THEME_NAME-theme md-content md-option{color:\"{{background-900-0.87}}\"}md-select-menu.md-THEME_NAME-theme md-content md-option[disabled] .md-text{color:\"{{background-400-0.87}}\"}md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):focus,md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):hover{background:\"{{background-200}}\"}md-select-menu.md-THEME_NAME-theme md-content md-option[selected]{color:\"{{primary-500}}\"}md-select-menu.md-THEME_NAME-theme md-content md-option[selected]:focus{color:\"{{primary-600}}\"}md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent{color:\"{{accent-color}}\"}md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent:focus{color:\"{{accent-A700}}\"}.md-checkbox-enabled.md-THEME_NAME-theme .md-ripple{color:\"{{primary-600}}\"}.md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-ripple{color:\"{{background-600}}\"}.md-checkbox-enabled.md-THEME_NAME-theme .md-ink-ripple{color:\"{{foreground-2}}\"}.md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-ink-ripple{color:\"{{primary-color-0.87}}\"}.md-checkbox-enabled.md-THEME_NAME-theme:not(.md-checked) .md-icon{border-color:\"{{foreground-2}}\"}.md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-icon{background-color:\"{{primary-color-0.87}}\"}.md-checkbox-enabled.md-THEME_NAME-theme[selected].md-focused .md-container:before{background-color:\"{{primary-color-0.26}}\"}.md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-icon:after{border-color:\"{{primary-contrast-0.87}}\"}.md-checkbox-enabled.md-THEME_NAME-theme .md-indeterminate[disabled] .md-container{color:\"{{foreground-3}}\"}.md-checkbox-enabled.md-THEME_NAME-theme md-option .md-text{color:\"{{background-900-0.87}}\"}md-sidenav.md-THEME_NAME-theme,md-sidenav.md-THEME_NAME-theme md-content{background-color:\"{{background-hue-1}}\"}md-slider.md-THEME_NAME-theme .md-track{background-color:\"{{foreground-3}}\"}md-slider.md-THEME_NAME-theme .md-track-ticks{color:\"{{background-contrast}}\"}md-slider.md-THEME_NAME-theme .md-focus-ring{background-color:\"{{accent-A200-0.2}}\"}md-slider.md-THEME_NAME-theme .md-disabled-thumb{border-color:\"{{background-color}}\";background-color:\"{{background-color}}\"}md-slider.md-THEME_NAME-theme.md-min .md-thumb:after{background-color:\"{{background-color}}\";border-color:\"{{foreground-3}}\"}md-slider.md-THEME_NAME-theme.md-min .md-focus-ring{background-color:\"{{foreground-3-0.38}}\"}md-slider.md-THEME_NAME-theme.md-min[md-discrete] .md-thumb:after{background-color:\"{{background-contrast}}\";border-color:transparent}md-slider.md-THEME_NAME-theme.md-min[md-discrete] .md-sign{background-color:\"{{background-400}}\"}md-slider.md-THEME_NAME-theme.md-min[md-discrete] .md-sign:after{border-top-color:\"{{background-400}}\"}md-slider.md-THEME_NAME-theme.md-min[md-discrete][md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:\"{{background-400}}\"}md-slider.md-THEME_NAME-theme .md-track.md-track-fill{background-color:\"{{accent-color}}\"}md-slider.md-THEME_NAME-theme .md-thumb:after{border-color:\"{{accent-color}}\";background-color:\"{{accent-color}}\"}md-slider.md-THEME_NAME-theme .md-sign{background-color:\"{{accent-color}}\"}md-slider.md-THEME_NAME-theme .md-sign:after{border-top-color:\"{{accent-color}}\"}md-slider.md-THEME_NAME-theme[md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:\"{{accent-color}}\"}md-slider.md-THEME_NAME-theme .md-thumb-text{color:\"{{accent-contrast}}\"}md-slider.md-THEME_NAME-theme.md-warn .md-focus-ring{background-color:\"{{warn-200-0.38}}\"}md-slider.md-THEME_NAME-theme.md-warn .md-track.md-track-fill{background-color:\"{{warn-color}}\"}md-slider.md-THEME_NAME-theme.md-warn .md-thumb:after{border-color:\"{{warn-color}}\";background-color:\"{{warn-color}}\"}md-slider.md-THEME_NAME-theme.md-warn .md-sign{background-color:\"{{warn-color}}\"}md-slider.md-THEME_NAME-theme.md-warn .md-sign:after{border-top-color:\"{{warn-color}}\"}md-slider.md-THEME_NAME-theme.md-warn[md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:\"{{warn-color}}\"}md-slider.md-THEME_NAME-theme.md-warn .md-thumb-text{color:\"{{warn-contrast}}\"}md-slider.md-THEME_NAME-theme.md-primary .md-focus-ring{background-color:\"{{primary-200-0.38}}\"}md-slider.md-THEME_NAME-theme.md-primary .md-track.md-track-fill{background-color:\"{{primary-color}}\"}md-slider.md-THEME_NAME-theme.md-primary .md-thumb:after{border-color:\"{{primary-color}}\";background-color:\"{{primary-color}}\"}md-slider.md-THEME_NAME-theme.md-primary .md-sign{background-color:\"{{primary-color}}\"}md-slider.md-THEME_NAME-theme.md-primary .md-sign:after{border-top-color:\"{{primary-color}}\"}md-slider.md-THEME_NAME-theme.md-primary[md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:\"{{primary-color}}\"}md-slider.md-THEME_NAME-theme.md-primary .md-thumb-text{color:\"{{primary-contrast}}\"}md-slider.md-THEME_NAME-theme[disabled] .md-thumb:after{border-color:transparent}md-slider.md-THEME_NAME-theme[disabled]:not(.md-min) .md-thumb:after,md-slider.md-THEME_NAME-theme[disabled][md-discrete] .md-thumb:after{background-color:\"{{foreground-3}}\";border-color:transparent}md-slider.md-THEME_NAME-theme[disabled][readonly] .md-sign{background-color:\"{{background-400}}\"}md-slider.md-THEME_NAME-theme[disabled][readonly] .md-sign:after{border-top-color:\"{{background-400}}\"}md-slider.md-THEME_NAME-theme[disabled][readonly][md-vertical] .md-sign:after{border-top-color:transparent;border-left-color:\"{{background-400}}\"}md-slider.md-THEME_NAME-theme[disabled][readonly] .md-disabled-thumb{border-color:transparent;background-color:transparent}md-slider-container[disabled]>:first-child:not(md-slider),md-slider-container[disabled]>:last-child:not(md-slider){color:\"{{foreground-3}}\"}.md-subheader.md-THEME_NAME-theme{color:\"{{ foreground-2-0.23 }}\";background-color:\"{{background-default}}\"}.md-subheader.md-THEME_NAME-theme.md-primary{color:\"{{primary-color}}\"}.md-subheader.md-THEME_NAME-theme.md-accent{color:\"{{accent-color}}\"}.md-subheader.md-THEME_NAME-theme.md-warn{color:\"{{warn-color}}\"}md-switch.md-THEME_NAME-theme .md-ink-ripple{color:\"{{background-500}}\"}md-switch.md-THEME_NAME-theme .md-thumb{background-color:\"{{background-50}}\"}md-switch.md-THEME_NAME-theme .md-bar{background-color:\"{{background-500}}\"}md-switch.md-THEME_NAME-theme.md-checked .md-ink-ripple{color:\"{{accent-color}}\"}md-switch.md-THEME_NAME-theme.md-checked .md-thumb{background-color:\"{{accent-color}}\"}md-switch.md-THEME_NAME-theme.md-checked .md-bar{background-color:\"{{accent-color-0.5}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-focused .md-thumb:before{background-color:\"{{accent-color-0.26}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-ink-ripple{color:\"{{primary-color}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-thumb{background-color:\"{{primary-color}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-bar{background-color:\"{{primary-color-0.5}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-primary.md-focused .md-thumb:before{background-color:\"{{primary-color-0.26}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-ink-ripple{color:\"{{warn-color}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-thumb{background-color:\"{{warn-color}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-bar{background-color:\"{{warn-color-0.5}}\"}md-switch.md-THEME_NAME-theme.md-checked.md-warn.md-focused .md-thumb:before{background-color:\"{{warn-color-0.26}}\"}md-switch.md-THEME_NAME-theme[disabled] .md-thumb{background-color:\"{{background-400}}\"}md-switch.md-THEME_NAME-theme[disabled] .md-bar{background-color:\"{{foreground-4}}\"}md-tabs.md-THEME_NAME-theme md-tabs-wrapper{background-color:transparent;border-color:\"{{foreground-4}}\"}md-tabs.md-THEME_NAME-theme .md-paginator md-icon{color:\"{{primary-color}}\"}md-tabs.md-THEME_NAME-theme md-ink-bar{color:\"{{accent-color}}\";background:\"{{accent-color}}\"}md-tabs.md-THEME_NAME-theme .md-tab{color:\"{{foreground-2}}\"}md-tabs.md-THEME_NAME-theme .md-tab[disabled],md-tabs.md-THEME_NAME-theme .md-tab[disabled] md-icon{color:\"{{foreground-3}}\"}md-tabs.md-THEME_NAME-theme .md-tab.md-active,md-tabs.md-THEME_NAME-theme .md-tab.md-active md-icon,md-tabs.md-THEME_NAME-theme .md-tab.md-focused,md-tabs.md-THEME_NAME-theme .md-tab.md-focused md-icon{color:\"{{primary-color}}\"}md-tabs.md-THEME_NAME-theme .md-tab.md-focused{background:\"{{primary-color-0.1}}\"}md-tabs.md-THEME_NAME-theme .md-tab .md-ripple-container{color:\"{{accent-A100}}\"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper{background-color:\"{{accent-color}}\"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:\"{{accent-A100}}\"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:\"{{accent-contrast}}\"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:\"{{accent-contrast-0.1}}\"}md-tabs.md-THEME_NAME-theme.md-accent>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-ink-bar{color:\"{{primary-600-1}}\";background:\"{{primary-600-1}}\"}md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper{background-color:\"{{primary-color}}\"}md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:\"{{primary-100}}\"}md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:\"{{primary-contrast}}\"}md-tabs.md-THEME_NAME-theme.md-primary>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:\"{{primary-contrast-0.1}}\"}md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper{background-color:\"{{warn-color}}\"}md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:\"{{warn-100}}\"}md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:\"{{warn-contrast}}\"}md-tabs.md-THEME_NAME-theme.md-warn>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:\"{{warn-contrast-0.1}}\"}md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper{background-color:\"{{primary-color}}\"}md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:\"{{primary-100}}\"}md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:\"{{primary-contrast}}\"}md-toolbar>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:\"{{primary-contrast-0.1}}\"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper{background-color:\"{{accent-color}}\"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:\"{{accent-A100}}\"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:\"{{accent-contrast}}\"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:\"{{accent-contrast-0.1}}\"}md-toolbar.md-accent>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-ink-bar{color:\"{{primary-600-1}}\";background:\"{{primary-600-1}}\"}md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper{background-color:\"{{warn-color}}\"}md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]),md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]) md-icon{color:\"{{warn-100}}\"}md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active,md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-active md-icon,md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused,md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused md-icon{color:\"{{warn-contrast}}\"}md-toolbar.md-warn>md-tabs.md-THEME_NAME-theme>md-tabs-wrapper>md-tabs-canvas>md-pagination-wrapper>md-tab-item:not([disabled]).md-focused{background:\"{{warn-contrast-0.1}}\"}md-toast.md-THEME_NAME-theme .md-toast-content{background-color:#323232;color:\"{{background-50}}\"}md-toast.md-THEME_NAME-theme .md-toast-content .md-button{color:\"{{background-50}}\"}md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight{color:\"{{accent-color}}\"}md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-primary{color:\"{{primary-color}}\"}md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-warn{color:\"{{warn-color}}\"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar){background-color:\"{{primary-color}}\";color:\"{{primary-contrast}}\"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) md-icon{color:\"{{primary-contrast}}\";fill:\"{{primary-contrast}}\"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) .md-button[disabled] md-icon{color:\"{{primary-contrast-0.26}}\";fill:\"{{primary-contrast-0.26}}\"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent{background-color:\"{{accent-color}}\";color:\"{{accent-contrast}}\"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-ink-ripple{color:\"{{accent-contrast}}\"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent md-icon{color:\"{{accent-contrast}}\";fill:\"{{accent-contrast}}\"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-button[disabled] md-icon{color:\"{{accent-contrast-0.26}}\";fill:\"{{accent-contrast-0.26}}\"}md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-warn{background-color:\"{{warn-color}}\";color:\"{{warn-contrast}}\"}.md-panel.md-tooltip.md-THEME_NAME-theme{color:\"{{background-700-contrast}}\";background-color:\"{{background-700}}\"}body.md-THEME_NAME-theme,html.md-THEME_NAME-theme{color:\"{{foreground-1}}\";background-color:\"{{background-color}}\"}");})();})(window,window.angular);;window.ngMaterial={version:{full:"1.1.5"}};angular.module('cgNotify',[]).factory('notify',['$timeout','$http','$compile','$templateCache','$rootScope',function($timeout,$http,$compile,$templateCache,$rootScope){var startTop=10;var verticalSpacing=15;var defaultDuration=10000;var defaultTemplateUrl='angular-notify.html';var position='center';var container=document.body;var maximumOpen=0;var messageElements=[];var openNotificationsScope=[];var notify=function(args){if(typeof args!=='object'){args={message:args};}
args.duration=args.duration?args.duration:defaultDuration;args.templateUrl=args.templateUrl?args.templateUrl:defaultTemplateUrl;args.container=args.container?args.container:container;args.classes=args.classes?args.classes:'';var scope=args.scope?args.scope.$new():$rootScope.$new();scope.$position=args.position?args.position:position;scope.$message=args.message;scope.$classes=args.classes;scope.$messageTemplate=args.messageTemplate;if(maximumOpen>0){var numToClose=(openNotificationsScope.length+1)-maximumOpen;for(var i=0;i<numToClose;i++){openNotificationsScope[i].$close();}}
$http.get(args.templateUrl,{cache:$templateCache}).then(function(template){var templateElement=$compile(template.data)(scope);templateElement.bind('webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd',function(e){if(e.propertyName==='opacity'||e.currentTarget.style.opacity===0||(e.originalEvent&&e.originalEvent.propertyName==='opacity')){templateElement.remove();messageElements.splice(messageElements.indexOf(templateElement),1);openNotificationsScope.splice(openNotificationsScope.indexOf(scope),1);layoutMessages();}});if(args.messageTemplate){var messageTemplateElement;for(var i=0;i<templateElement.children().length;i++){if(angular.element(templateElement.children()[i]).hasClass('cg-notify-message-template')){messageTemplateElement=angular.element(templateElement.children()[i]);break;}}
if(messageTemplateElement){messageTemplateElement.append($compile(args.messageTemplate)(scope));}else{throw new Error('cgNotify could not find the .cg-notify-message-template element in '+args.templateUrl+'.');}}
angular.element(args.container).append(templateElement);messageElements.push(templateElement);if(scope.$position==='center'){$timeout(function(){scope.$centerMargin='-'+(templateElement[0].offsetWidth/2)+'px';});}
scope.$close=function(){templateElement.css('opacity',0).attr('data-closing','true');layoutMessages();};var layoutMessages=function(){var j=0;var currentY=startTop;for(var i=messageElements.length-1;i>=0;i--){var shadowHeight=10;var element=messageElements[i];var height=element[0].offsetHeight;var top=currentY+height+shadowHeight;if(element.attr('data-closing')){top+=20;}else{currentY+=height+verticalSpacing;}
element.css('top',top+'px').css('margin-top','-'+(height+shadowHeight)+'px').css('visibility','visible');j++;}};$timeout(function(){layoutMessages();});if(args.duration>0){$timeout(function(){scope.$close();},args.duration);}},function(data){throw new Error('Template specified for cgNotify ('+args.templateUrl+') could not be loaded. '+data);});var retVal={};retVal.close=function(){if(scope.$close){scope.$close();}};Object.defineProperty(retVal,'message',{get:function(){return scope.$message;},set:function(val){scope.$message=val;}});openNotificationsScope.push(scope);return retVal;};notify.config=function(args){startTop=!angular.isUndefined(args.startTop)?args.startTop:startTop;verticalSpacing=!angular.isUndefined(args.verticalSpacing)?args.verticalSpacing:verticalSpacing;defaultDuration=!angular.isUndefined(args.duration)?args.duration:defaultDuration;defaultTemplateUrl=args.templateUrl?args.templateUrl:defaultTemplateUrl;position=!angular.isUndefined(args.position)?args.position:position;container=args.container?args.container:container;maximumOpen=args.maximumOpen?args.maximumOpen:maximumOpen;};notify.closeAll=function(){for(var i=messageElements.length-1;i>=0;i--){var element=messageElements[i];element.css('opacity',0);}};return notify;}]);angular.module('cgNotify').run(['$templateCache',function($templateCache){'use strict';$templateCache.put('angular-notify.html',"<div class=\"cg-notify-message\" ng-class=\"[$classes, \n"+"    $position === 'center' ? 'cg-notify-message-center' : '',\n"+"    $position === 'left' ? 'cg-notify-message-left' : '',\n"+"    $position === 'right' ? 'cg-notify-message-right' : '']\"\n"+"    ng-style=\"{'margin-left': $centerMargin}\">\n"+"\n"+"    <div ng-show=\"!$messageTemplate\">\n"+"        {$ $message $}\n"+"    </div>\n"+"\n"+"    <div ng-show=\"$messageTemplate\" class=\"cg-notify-message-template\">\n"+"        \n"+"    </div>\n"+"\n"+"    <button type=\"button\" class=\"cg-notify-close\" ng-click=\"$close()\">\n"+"        <span aria-hidden=\"true\">&times;</span>\n"+"        <span class=\"cg-notify-sr-only\">Close</span>\n"+"    </button>\n"+"\n"+"</div>");}]);"use strict";(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')
module.exports=factory();else if(typeof define==='function'&&define.amd)
define(factory);else if(typeof exports==='object')
exports["vis"]=factory();else
root["vis"]=factory();})(this,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])
return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0);})
([function(module,exports,__webpack_require__){'use strict';exports.util=__webpack_require__(1);exports.DOMutil=__webpack_require__(7);exports.DataSet=__webpack_require__(8);exports.DataView=__webpack_require__(10);exports.Queue=__webpack_require__(9);exports.Graph3d=__webpack_require__(11);exports.graph3d={Camera:__webpack_require__(15),Filter:__webpack_require__(16),Point2d:__webpack_require__(12),Point3d:__webpack_require__(14),Slider:__webpack_require__(17),StepNumber:__webpack_require__(18)};exports.Timeline=__webpack_require__(19);exports.Graph2d=__webpack_require__(49);exports.timeline={DateUtil:__webpack_require__(29),DataStep:__webpack_require__(52),Range:__webpack_require__(27),stack:__webpack_require__(33),TimeStep:__webpack_require__(36),components:{items:{Item:__webpack_require__(35),BackgroundItem:__webpack_require__(40),BoxItem:__webpack_require__(38),PointItem:__webpack_require__(39),RangeItem:__webpack_require__(34)},Component:__webpack_require__(21),CurrentTime:__webpack_require__(20),CustomTime:__webpack_require__(44),DataAxis:__webpack_require__(51),GraphGroup:__webpack_require__(53),Group:__webpack_require__(32),BackgroundGroup:__webpack_require__(37),ItemSet:__webpack_require__(31),Legend:__webpack_require__(57),LineGraph:__webpack_require__(50),TimeAxis:__webpack_require__(41)}};exports.Network=__webpack_require__(59);exports.network={Images:__webpack_require__(112),dotparser:__webpack_require__(110),gephiParser:__webpack_require__(111),allOptions:__webpack_require__(108)};exports.network.convertDot=function(input){return exports.network.dotparser.DOTToGraph(input);};exports.network.convertGephi=function(input,options){return exports.network.gephiParser.parseGephi(input,options);};exports.Graph=function(){throw new Error('Graph is renamed to Network. Please create a graph as new vis.Network(...)');};exports.moment=__webpack_require__(2);exports.hammer=__webpack_require__(23);exports.Hammer=__webpack_require__(23);},function(module,exports,__webpack_require__){'use strict';var moment=__webpack_require__(2);var uuid=__webpack_require__(6);exports.isNumber=function(object){return object instanceof Number||typeof object=='number';};exports.recursiveDOMDelete=function(DOMobject){if(DOMobject){while(DOMobject.hasChildNodes()===true){exports.recursiveDOMDelete(DOMobject.firstChild);DOMobject.removeChild(DOMobject.firstChild);}}};exports.giveRange=function(min,max,total,value){if(max==min){return 0.5;}else{var scale=1/(max-min);return Math.max(0,(value-min)*scale);}};exports.isString=function(object){return object instanceof String||typeof object=='string';};exports.isDate=function(object){if(object instanceof Date){return true;}else if(exports.isString(object)){var match=ASPDateRegex.exec(object);if(match){return true;}else if(!isNaN(Date.parse(object))){return true;}}
return false;};exports.randomUUID=function(){return uuid.v4();};exports.assignAllKeys=function(obj,value){for(var prop in obj){if(obj.hasOwnProperty(prop)){if(typeof obj[prop]!=='object'){obj[prop]=value;}}}};exports.fillIfDefined=function(a,b){var allowDeletion=arguments[2]===undefined?false:arguments[2];for(var prop in a){if(b[prop]!==undefined){if(typeof b[prop]!=='object'){if((b[prop]===undefined||b[prop]===null)&&a[prop]!==undefined&&allowDeletion===true){delete a[prop];}else{a[prop]=b[prop];}}else{if(typeof a[prop]==='object'){exports.fillIfDefined(a[prop],b[prop],allowDeletion);}}}}};exports.protoExtend=function(a,b){for(var i=1;i<arguments.length;i++){var other=arguments[i];for(var prop in other){a[prop]=other[prop];}}
return a;};exports.extend=function(a,b){for(var i=1;i<arguments.length;i++){var other=arguments[i];for(var prop in other){if(other.hasOwnProperty(prop)){a[prop]=other[prop];}}}
return a;};exports.selectiveExtend=function(props,a,b){if(!Array.isArray(props)){throw new Error('Array with property names expected as first argument');}
for(var i=2;i<arguments.length;i++){var other=arguments[i];for(var p=0;p<props.length;p++){var prop=props[p];if(other.hasOwnProperty(prop)){a[prop]=other[prop];}}}
return a;};exports.selectiveDeepExtend=function(props,a,b){var allowDeletion=arguments[3]===undefined?false:arguments[3];if(Array.isArray(b)){throw new TypeError('Arrays are not supported by deepExtend');}
for(var i=2;i<arguments.length;i++){var other=arguments[i];for(var p=0;p<props.length;p++){var prop=props[p];if(other.hasOwnProperty(prop)){if(b[prop]&&b[prop].constructor===Object){if(a[prop]===undefined){a[prop]={};}
if(a[prop].constructor===Object){exports.deepExtend(a[prop],b[prop],false,allowDeletion);}else{if(b[prop]===null&&a[prop]!==undefined&&allowDeletion===true){delete a[prop];}else{a[prop]=b[prop];}}}else if(Array.isArray(b[prop])){throw new TypeError('Arrays are not supported by deepExtend');}else{a[prop]=b[prop];}}}}
return a;};exports.selectiveNotDeepExtend=function(props,a,b){var allowDeletion=arguments[3]===undefined?false:arguments[3];if(Array.isArray(b)){throw new TypeError('Arrays are not supported by deepExtend');}
for(var prop in b){if(b.hasOwnProperty(prop)){if(props.indexOf(prop)==-1){if(b[prop]&&b[prop].constructor===Object){if(a[prop]===undefined){a[prop]={};}
if(a[prop].constructor===Object){exports.deepExtend(a[prop],b[prop]);}else{if(b[prop]===null&&a[prop]!==undefined&&allowDeletion===true){delete a[prop];}else{a[prop]=b[prop];}}}else if(Array.isArray(b[prop])){throw new TypeError('Arrays are not supported by deepExtend');}else{a[prop]=b[prop];}}}}
return a;};exports.deepExtend=function(a,b,protoExtend,allowDeletion){for(var prop in b){if(b.hasOwnProperty(prop)||protoExtend===true){if(b[prop]&&b[prop].constructor===Object){if(a[prop]===undefined){a[prop]={};}
if(a[prop].constructor===Object){exports.deepExtend(a[prop],b[prop],protoExtend);}else{if(b[prop]===null&&a[prop]!==undefined&&allowDeletion===true){delete a[prop];}else{a[prop]=b[prop];}}}else if(Array.isArray(b[prop])){a[prop]=[];for(var i=0;i<b[prop].length;i++){a[prop].push(b[prop][i]);}}else{a[prop]=b[prop];}}}
return a;};exports.equalArray=function(a,b){if(a.length!=b.length)return false;for(var i=0,len=a.length;i<len;i++){if(a[i]!=b[i])return false;}
return true;};exports.convert=function(object,type){var match;if(object===undefined){return undefined;}
if(object===null){return null;}
if(!type){return object;}
if(!(typeof type==='string')&&!(type instanceof String)){throw new Error('Type must be a string');}
switch(type){case'boolean':case'Boolean':return Boolean(object);case'number':case'Number':return Number(object.valueOf());case'string':case'String':return String(object);case'Date':if(exports.isNumber(object)){return new Date(object);}
if(object instanceof Date){return new Date(object.valueOf());}else if(moment.isMoment(object)){return new Date(object.valueOf());}
if(exports.isString(object)){match=ASPDateRegex.exec(object);if(match){return new Date(Number(match[1]));}else{return moment(object).toDate();}}else{throw new Error('Cannot convert object of type '+exports.getType(object)+' to type Date');}
case'Moment':if(exports.isNumber(object)){return moment(object);}
if(object instanceof Date){return moment(object.valueOf());}else if(moment.isMoment(object)){return moment(object);}
if(exports.isString(object)){match=ASPDateRegex.exec(object);if(match){return moment(Number(match[1]));}else{return moment(object);}}else{throw new Error('Cannot convert object of type '+exports.getType(object)+' to type Date');}
case'ISODate':if(exports.isNumber(object)){return new Date(object);}else if(object instanceof Date){return object.toISOString();}else if(moment.isMoment(object)){return object.toDate().toISOString();}else if(exports.isString(object)){match=ASPDateRegex.exec(object);if(match){return new Date(Number(match[1])).toISOString();}else{return new Date(object).toISOString();}}else{throw new Error('Cannot convert object of type '+exports.getType(object)+' to type ISODate');}
case'ASPDate':if(exports.isNumber(object)){return'/Date('+object+')/';}else if(object instanceof Date){return'/Date('+object.valueOf()+')/';}else if(exports.isString(object)){match=ASPDateRegex.exec(object);var value;if(match){value=new Date(Number(match[1])).valueOf();}else{value=new Date(object).valueOf();}
return'/Date('+value+')/';}else{throw new Error('Cannot convert object of type '+exports.getType(object)+' to type ASPDate');}
default:throw new Error('Unknown type "'+type+'"');}};var ASPDateRegex=/^\/?Date\((\-?\d+)/i;exports.getType=function(object){var type=typeof object;if(type=='object'){if(object===null){return'null';}
if(object instanceof Boolean){return'Boolean';}
if(object instanceof Number){return'Number';}
if(object instanceof String){return'String';}
if(Array.isArray(object)){return'Array';}
if(object instanceof Date){return'Date';}
return'Object';}else if(type=='number'){return'Number';}else if(type=='boolean'){return'Boolean';}else if(type=='string'){return'String';}else if(type===undefined){return'undefined';}
return type;};exports.copyAndExtendArray=function(arr,newValue){var newArr=[];for(var i=0;i<arr.length;i++){newArr.push(arr[i]);}
newArr.push(newValue);return newArr;};exports.copyArray=function(arr){var newArr=[];for(var i=0;i<arr.length;i++){newArr.push(arr[i]);}
return newArr;};exports.getAbsoluteLeft=function(elem){return elem.getBoundingClientRect().left;};exports.getAbsoluteTop=function(elem){return elem.getBoundingClientRect().top;};exports.addClassName=function(elem,className){var classes=elem.className.split(' ');if(classes.indexOf(className)==-1){classes.push(className);elem.className=classes.join(' ');}};exports.removeClassName=function(elem,className){var classes=elem.className.split(' ');var index=classes.indexOf(className);if(index!=-1){classes.splice(index,1);elem.className=classes.join(' ');}};exports.forEach=function(object,callback){var i,len;if(Array.isArray(object)){for(i=0,len=object.length;i<len;i++){callback(object[i],i,object);}}else{for(i in object){if(object.hasOwnProperty(i)){callback(object[i],i,object);}}}};exports.toArray=function(object){var array=[];for(var prop in object){if(object.hasOwnProperty(prop))array.push(object[prop]);}
return array;};exports.updateProperty=function(object,key,value){if(object[key]!==value){object[key]=value;return true;}else{return false;}};exports.addEventListener=function(element,action,listener,useCapture){if(element.addEventListener){if(useCapture===undefined)useCapture=false;if(action==='mousewheel'&&navigator.userAgent.indexOf('Firefox')>=0){action='DOMMouseScroll';}
element.addEventListener(action,listener,useCapture);}else{element.attachEvent('on'+action,listener);}};exports.removeEventListener=function(element,action,listener,useCapture){if(element.removeEventListener){if(useCapture===undefined)useCapture=false;if(action==='mousewheel'&&navigator.userAgent.indexOf('Firefox')>=0){action='DOMMouseScroll';}
element.removeEventListener(action,listener,useCapture);}else{element.detachEvent('on'+action,listener);}};exports.preventDefault=function(event){if(!event)event=window.event;if(event.preventDefault){event.preventDefault();}else{event.returnValue=false;}};exports.getTarget=function(event){if(!event){event=window.event;}
var target;if(event.target){target=event.target;}else if(event.srcElement){target=event.srcElement;}
if(target.nodeType!=undefined&&target.nodeType==3){target=target.parentNode;}
return target;};exports.hasParent=function(element,parent){var e=element;while(e){if(e===parent){return true;}
e=e.parentNode;}
return false;};exports.option={};exports.option.asBoolean=function(value,defaultValue){if(typeof value=='function'){value=value();}
if(value!=null){return value!=false;}
return defaultValue||null;};exports.option.asNumber=function(value,defaultValue){if(typeof value=='function'){value=value();}
if(value!=null){return Number(value)||defaultValue||null;}
return defaultValue||null;};exports.option.asString=function(value,defaultValue){if(typeof value=='function'){value=value();}
if(value!=null){return String(value);}
return defaultValue||null;};exports.option.asSize=function(value,defaultValue){if(typeof value=='function'){value=value();}
if(exports.isString(value)){return value;}else if(exports.isNumber(value)){return value+'px';}else{return defaultValue||null;}};exports.option.asElement=function(value,defaultValue){if(typeof value=='function'){value=value();}
return value||defaultValue||null;};exports.hexToRGB=function(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b;});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;};exports.overrideOpacity=function(color,opacity){if(color.indexOf('rgba')!=-1){return color;}else if(color.indexOf('rgb')!=-1){var rgb=color.substr(color.indexOf('(')+1).replace(')','').split(',');return'rgba('+rgb[0]+','+rgb[1]+','+rgb[2]+','+opacity+')';}else{var rgb=exports.hexToRGB(color);if(rgb==null){return color;}else{return'rgba('+rgb.r+','+rgb.g+','+rgb.b+','+opacity+')';}}};exports.RGBToHex=function(red,green,blue){return'#'+((1<<24)+(red<<16)+(green<<8)+blue).toString(16).slice(1);};exports.parseColor=function(color){var c;if(exports.isString(color)===true){if(exports.isValidRGB(color)===true){var rgb=color.substr(4).substr(0,color.length-5).split(',').map(function(value){return parseInt(value);});color=exports.RGBToHex(rgb[0],rgb[1],rgb[2]);}
if(exports.isValidHex(color)===true){var hsv=exports.hexToHSV(color);var lighterColorHSV={h:hsv.h,s:hsv.s*0.8,v:Math.min(1,hsv.v*1.02)};var darkerColorHSV={h:hsv.h,s:Math.min(1,hsv.s*1.25),v:hsv.v*0.8};var darkerColorHex=exports.HSVToHex(darkerColorHSV.h,darkerColorHSV.s,darkerColorHSV.v);var lighterColorHex=exports.HSVToHex(lighterColorHSV.h,lighterColorHSV.s,lighterColorHSV.v);c={background:color,border:darkerColorHex,highlight:{background:lighterColorHex,border:darkerColorHex},hover:{background:lighterColorHex,border:darkerColorHex}};}else{c={background:color,border:color,highlight:{background:color,border:color},hover:{background:color,border:color}};}}else{c={};c.background=color.background||undefined;c.border=color.border||undefined;if(exports.isString(color.highlight)){c.highlight={border:color.highlight,background:color.highlight};}else{c.highlight={};c.highlight.background=color.highlight&&color.highlight.background||undefined;c.highlight.border=color.highlight&&color.highlight.border||undefined;}
if(exports.isString(color.hover)){c.hover={border:color.hover,background:color.hover};}else{c.hover={};c.hover.background=color.hover&&color.hover.background||undefined;c.hover.border=color.hover&&color.hover.border||undefined;}}
return c;};exports.RGBToHSV=function(red,green,blue){red=red/255;green=green/255;blue=blue/255;var minRGB=Math.min(red,Math.min(green,blue));var maxRGB=Math.max(red,Math.max(green,blue));if(minRGB==maxRGB){return{h:0,s:0,v:minRGB};}
var d=red==minRGB?green-blue:blue==minRGB?red-green:blue-red;var h=red==minRGB?3:blue==minRGB?1:5;var hue=60*(h-d/(maxRGB-minRGB))/360;var saturation=(maxRGB-minRGB)/maxRGB;var value=maxRGB;return{h:hue,s:saturation,v:value};};var cssUtil={split:function split(cssText){var styles={};cssText.split(';').forEach(function(style){if(style.trim()!=''){var parts=style.split(':');var key=parts[0].trim();var value=parts[1].trim();styles[key]=value;}});return styles;},join:function join(styles){return Object.keys(styles).map(function(key){return key+': '+styles[key];}).join('; ');}};exports.addCssText=function(element,cssText){var currentStyles=cssUtil.split(element.style.cssText);var newStyles=cssUtil.split(cssText);var styles=exports.extend(currentStyles,newStyles);element.style.cssText=cssUtil.join(styles);};exports.removeCssText=function(element,cssText){var styles=cssUtil.split(element.style.cssText);var removeStyles=cssUtil.split(cssText);for(var key in removeStyles){if(removeStyles.hasOwnProperty(key)){delete styles[key];}}
element.style.cssText=cssUtil.join(styles);};exports.HSVToRGB=function(h,s,v){var r,g,b;var i=Math.floor(h*6);var f=h*6-i;var p=v*(1-s);var q=v*(1-f*s);var t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q;break;}
return{r:Math.floor(r*255),g:Math.floor(g*255),b:Math.floor(b*255)};};exports.HSVToHex=function(h,s,v){var rgb=exports.HSVToRGB(h,s,v);return exports.RGBToHex(rgb.r,rgb.g,rgb.b);};exports.hexToHSV=function(hex){var rgb=exports.hexToRGB(hex);return exports.RGBToHSV(rgb.r,rgb.g,rgb.b);};exports.isValidHex=function(hex){var isOk=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(hex);return isOk;};exports.isValidRGB=function(rgb){rgb=rgb.replace(' ','');var isOk=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(rgb);return isOk;};exports.isValidRGBA=function(rgba){rgba=rgba.replace(' ','');var isOk=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(rgba);return isOk;};exports.selectiveBridgeObject=function(fields,referenceObject){if(typeof referenceObject=='object'){var objectTo=Object.create(referenceObject);for(var i=0;i<fields.length;i++){if(referenceObject.hasOwnProperty(fields[i])){if(typeof referenceObject[fields[i]]=='object'){objectTo[fields[i]]=exports.bridgeObject(referenceObject[fields[i]]);}}}
return objectTo;}else{return null;}};exports.bridgeObject=function(referenceObject){if(typeof referenceObject=='object'){var objectTo=Object.create(referenceObject);for(var i in referenceObject){if(referenceObject.hasOwnProperty(i)){if(typeof referenceObject[i]=='object'){objectTo[i]=exports.bridgeObject(referenceObject[i]);}}}
return objectTo;}else{return null;}};exports.mergeOptions=function(mergeTarget,options,option){var allowDeletion=arguments[3]===undefined?false:arguments[3];if(options[option]===null){mergeTarget[option]=undefined;delete mergeTarget[option];}else{if(options[option]!==undefined){if(typeof options[option]==='boolean'){mergeTarget[option].enabled=options[option];}else{if(options[option].enabled===undefined){mergeTarget[option].enabled=true;}
for(var prop in options[option]){if(options[option].hasOwnProperty(prop)){mergeTarget[option][prop]=options[option][prop];}}}}}};exports.binarySearchCustom=function(orderedItems,searchFunction,field,field2){var maxIterations=10000;var iteration=0;var low=0;var high=orderedItems.length-1;while(low<=high&&iteration<maxIterations){var middle=Math.floor((low+high)/2);var item=orderedItems[middle];var value=field2===undefined?item[field]:item[field][field2];var searchResult=searchFunction(value);if(searchResult==0){return middle;}else if(searchResult==-1){low=middle+1;}else{high=middle-1;}
iteration++;}
return-1;};exports.binarySearchValue=function(orderedItems,target,field,sidePreference){var maxIterations=10000;var iteration=0;var low=0;var high=orderedItems.length-1;var prevValue,value,nextValue,middle;while(low<=high&&iteration<maxIterations){middle=Math.floor(0.5*(high+low));prevValue=orderedItems[Math.max(0,middle-1)][field];value=orderedItems[middle][field];nextValue=orderedItems[Math.min(orderedItems.length-1,middle+1)][field];if(value==target){return middle;}else if(prevValue<target&&value>target){return sidePreference=='before'?Math.max(0,middle-1):middle;}else if(value<target&&nextValue>target){return sidePreference=='before'?middle:Math.min(orderedItems.length-1,middle+1);}else{if(value<target){low=middle+1;}else{high=middle-1;}}
iteration++;}
return-1;};exports.easingFunctions={linear:function linear(t){return t;},easeInQuad:function easeInQuad(t){return t*t;},easeOutQuad:function easeOutQuad(t){return t*(2-t);},easeInOutQuad:function easeInOutQuad(t){return t<0.5?2*t*t:-1+(4-2*t)*t;},easeInCubic:function easeInCubic(t){return t*t*t;},easeOutCubic:function easeOutCubic(t){return--t*t*t+1;},easeInOutCubic:function easeInOutCubic(t){return t<0.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;},easeInQuart:function easeInQuart(t){return t*t*t*t;},easeOutQuart:function easeOutQuart(t){return 1- --t*t*t*t;},easeInOutQuart:function easeInOutQuart(t){return t<0.5?8*t*t*t*t:1-8*--t*t*t*t;},easeInQuint:function easeInQuint(t){return t*t*t*t*t;},easeOutQuint:function easeOutQuint(t){return 1+--t*t*t*t*t;},easeInOutQuint:function easeInOutQuint(t){return t<0.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;}};},function(module,exports,__webpack_require__){'use strict';module.exports=typeof window!=='undefined'&&window['moment']||__webpack_require__(3);},function(module,exports,__webpack_require__){(function(module){(function(global,factory){true?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.moment=factory()}(this,function(){'use strict';var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments);}
function setHookCallback(callback){hookCallback=callback;}
function isArray(input){return Object.prototype.toString.call(input)==='[object Array]';}
function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==='[object Date]';}
function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}
return res;}
function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}
function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}
if(hasOwnProp(b,'toString')){a.toString=b.toString;}
if(hasOwnProp(b,'valueOf')){a.valueOf=b.valueOf;}
return a;}
function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}
function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false};}
function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}
return m._pf;}
function valid__isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated;if(m._strict){m._isValid=m._isValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}}
return m._isValid;}
function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}
else{getParsingFlags(m).userInvalidated=true;}
return m;}
var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=='undefined'){to._isAMomentObject=from._isAMomentObject;}
if(typeof from._i!=='undefined'){to._i=from._i;}
if(typeof from._f!=='undefined'){to._f=from._f;}
if(typeof from._l!=='undefined'){to._l=from._l;}
if(typeof from._strict!=='undefined'){to._strict=from._strict;}
if(typeof from._tzm!=='undefined'){to._tzm=from._tzm;}
if(typeof from._isUTC!=='undefined'){to._isUTC=from._isUTC;}
if(typeof from._offset!=='undefined'){to._offset=from._offset;}
if(typeof from._pf!=='undefined'){to._pf=getParsingFlags(from);}
if(typeof from._locale!=='undefined'){to._locale=from._locale;}
if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=='undefined'){to[prop]=val;}}}
return to;}
var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(+config._d);if(updateInProgress===false){updateInProgress=true;utils_hooks__hooks.updateOffset(this);updateInProgress=false;}}
function isMoment(obj){return obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null);}
function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){if(coercedNumber>=0){value=Math.floor(coercedNumber);}else{value=Math.ceil(coercedNumber);}}
return value;}
function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++;}}
return diffs+lengthDiff;}
function Locale(){}
var locales={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key;}
function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale){return locale;}
if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break;}
j--;}
i++;}
return null;}
function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=='undefined'&&module&&module.exports){try{oldLocale=globalLocale._abbr;!(function webpackMissingModule(){var e=new Error("Cannot find module \"./locale\"");e.code='MODULE_NOT_FOUND';throw e;}());locale_locales__getSetGlobalLocale(oldLocale);}catch(e){}}
return locales[name];}
function locale_locales__getSetGlobalLocale(key,values){var data;if(key){if(typeof values==='undefined'){data=locale_locales__getLocale(key);}
else{data=defineLocale(key,values);}
if(data){globalLocale=data;}}
return globalLocale._abbr;}
function defineLocale(name,values){if(values!==null){values.abbr=name;if(!locales[name]){locales[name]=new Locale();}
locales[name].set(values);locale_locales__getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}
function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}
if(!key){return globalLocale;}
if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}
key=[key];}
return chooseLocale(key);}
var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+'s']=aliases[shorthand]=unit;}
function normalizeUnits(units){return typeof units==='string'?aliases[units]||aliases[units.toLowerCase()]:undefined;}
function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}
return normalizedInput;}
function makeGetSet(unit,keepTime){return function(value){if(value!=null){get_set__set(this,unit,value);utils_hooks__hooks.updateOffset(this,keepTime);return this;}else{return get_set__get(this,unit);}};}
function get_set__get(mom,unit){return mom._d['get'+(mom._isUTC?'UTC':'')+unit]();}
function get_set__set(mom,unit,value){return mom._d['set'+(mom._isUTC?'UTC':'')+unit](value);}
function getSet(units,value){var unit;if(typeof units==='object'){for(unit in units){this.set(unit,units[unit]);}}else{units=normalizeUnits(units);if(typeof this[units]==='function'){return this[units](value);}}
return this;}
function zeroFill(number,targetLength,forceSign){var output=''+Math.abs(number),sign=number>=0;while(output.length<targetLength){output='0'+output;}
return(sign?(forceSign?'+':''):'-')+output;}
var formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==='string'){func=function(){return this[callback]();};}
if(token){formatTokenFunctions[token]=func;}
if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}
if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}
function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,'');}
return input.replace(/\\/g,'');}
function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}
return function(mom){var output='';for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i];}
return output;};}
function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}
format=expandFormat(format,m.localeData());if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format);}
return formatFunctions[format](m);}
function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}
localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}
return format;}
var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=typeof regex==='function'?regex:function(isStrict){return(isStrict&&strictRegex)?strictRegex:regex;};}
function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}
return regexes[token](config._strict,config._locale);}
function unescapeFormat(s){return s.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}).replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}
var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==='string'){token=[token];}
if(typeof callback==='number'){func=function(input,array){array[callback]=toInt(input);};}
for(i=0;i<token.length;i++){tokens[token[i]]=func;}}
function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}
function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}
var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate();}
addFormatToken('M',['MM',2],'Mo',function(){return this.month()+1;});addFormatToken('MMM',0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken('MMMM',0,0,function(format){return this.localeData().months(this,format);});addUnitAlias('month','M');addRegexToken('M',match1to2);addRegexToken('MM',match1to2,match2);addRegexToken('MMM',matchWord);addRegexToken('MMMM',matchWord);addParseToken(['M','MM'],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(['MMM','MMMM'],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var defaultLocaleMonths='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function localeMonths(m){return this._months[m.month()];}
var defaultLocaleMonthsShort='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function localeMonthsShort(m){return this._monthsShort[m.month()];}
function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}
for(i=0;i<12;i++){mom=create_utc__createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i');}
if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i');}
if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName)){return i;}else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName)){return i;}else if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}
function setMonth(mom,value){var dayOfMonth;if(typeof value==='string'){value=mom.localeData().monthsParse(value);if(typeof value!=='number'){return mom;}}
dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom;}
function getSetMonth(value){if(value!=null){setMonth(this,value);utils_hooks__hooks.updateOffset(this,true);return this;}else{return get_set__get(this,'Month');}}
function getDaysInMonth(){return daysInMonth(this.year(),this.month());}
function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}
getParsingFlags(m).overflow=overflow;}
return m;}
function warn(msg){if(utils_hooks__hooks.suppressDeprecationWarnings===false&&typeof console!=='undefined'&&console.warn){console.warn('Deprecation warning: '+msg);}}
function deprecate(msg,fn){var firstTime=true,msgWithStack=msg+'\n'+(new Error()).stack;return extend(function(){if(firstTime){warn(msgWithStack);firstTime=false;}
return fn.apply(this,arguments);},fn);}
var deprecations={};function deprecateSimple(name,msg){if(!deprecations[name]){warn(msg);deprecations[name]=true;}}
utils_hooks__hooks.suppressDeprecationWarnings=false;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d{2}-\d{2}/],['YYYY-MM-DD',/\d{4}-\d{2}-\d{2}/],['GGGG-[W]WW-E',/\d{4}-W\d{2}-\d/],['GGGG-[W]WW',/\d{4}-W\d{2}/],['YYYY-DDD',/\d{4}-\d{3}/]];var isoTimes=[['HH:mm:ss.SSSS',/(T| )\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss',/(T| )\d\d:\d\d:\d\d/],['HH:mm',/(T| )\d\d:\d\d/],['HH',/(T| )\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||' ');break;}}
for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break;}}
if(string.match(matchOffset)){config._f+='Z';}
configFromStringAndFormat(config);}else{config._isValid=false;}}
function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}
configFromISO(config);if(config._isValid===false){delete config._isValid;utils_hooks__hooks.createFromInputFallback(config);}}
utils_hooks__hooks.createFromInputFallback=deprecate('moment construction falls back to js Date. This is '+'discouraged and will be removed in upcoming major '+'release. Please refer to '+'https://github.com/moment/moment/issues/1407 for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''));});function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y);}
return date;}
function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y);}
return date;}
addFormatToken(0,['YY',2],0,function(){return this.year()%100;});addFormatToken(0,['YYYY',4],0,'year');addFormatToken(0,['YYYYY',5],0,'year');addFormatToken(0,['YYYYYY',6,true],0,'year');addUnitAlias('year','y');addRegexToken('Y',matchSigned);addRegexToken('YY',match1to2,match2);addRegexToken('YYYY',match1to4,match4);addRegexToken('YYYYY',match1to6,match6);addRegexToken('YYYYYY',match1to6,match6);addParseToken(['YYYY','YYYYY','YYYYYY'],YEAR);addParseToken('YY',function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input);});function daysInYear(year){return isLeapYear(year)?366:365;}
function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}
utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet('FullYear',false);function getIsLeapYear(){return isLeapYear(this.year());}
addFormatToken('w',['ww',2],'wo','week');addFormatToken('W',['WW',2],'Wo','isoWeek');addUnitAlias('week','w');addUnitAlias('isoWeek','W');addRegexToken('w',match1to2);addRegexToken('ww',match1to2,match2);addRegexToken('W',match1to2);addRegexToken('WW',match1to2,match2);addWeekParseToken(['w','ww','W','WW'],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7;}
if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7;}
adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,'d');return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()};}
function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}
var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}
function localeFirstDayOfYear(){return this._week.doy;}
function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d');}
function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d');}
addFormatToken('DDD',['DDDD',3],'DDDo','dayOfYear');addUnitAlias('dayOfYear','DDD');addRegexToken('DDD',match1to3);addRegexToken('DDDD',match3);addParseToken(['DDD','DDDD'],function(input,array,config){config._dayOfYear=toInt(input);});function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var d=createUTCDate(year,0,1).getUTCDay();var daysToAdd;var dayOfYear;d=d===0?7:d;weekday=weekday!=null?weekday:firstDayOfWeek;daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(d<firstDayOfWeek?7:0);dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear};}
function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add((input-dayOfYear),'d');}
function defaults(a,b,c){if(a!=null){return a;}
if(b!=null){return b;}
return c;}
function currentDateArray(config){var now=new Date();if(config._useUTC){return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()];}
return[now.getFullYear(),now.getMonth(),now.getDate()];}
function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return;}
currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}
if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true;}
date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}
for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}
for(;i<7;i++){config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i];}
if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}
config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}
if(config._nextDay){config._a[HOUR]=24;}}
function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year);week=defaults(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow){++week;}}else if(w.e!=null){weekday=w.e+dow;}else{weekday=dow;}}
temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}
utils_hooks__hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601){configFromISO(config);return;}
config._a=[];getParsingFlags(config).empty=true;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}
string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}
if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}
else{getParsingFlags(config).unusedTokens.push(token);}
addTimeToArrayFromToken(token,parsedInput,config);}
else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}
getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}
if(getParsingFlags(config).bigHour===true&&config._a[HOUR]<=12&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}
config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}
function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}
if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}
if(!isPm&&hour===12){hour=0;}
return hour;}else{return hour;}}
function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}
for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}
tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!valid__isValid(tempConfig)){continue;}
currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}
extend(config,bestMoment||tempConfig);}
function configFromObject(config){if(config._d){return;}
var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond];configFromArray(config);}
function createFromConfig(config){var input=config._i,format=config._f,res;config._locale=config._locale||locale_locales__getLocale(config._l);if(input===null||(format===undefined&&input==='')){return valid__createInvalid({nullInput:true});}
if(typeof input==='string'){config._i=input=config._locale.preparse(input);}
if(isMoment(input)){return new Moment(checkOverflow(input));}else if(isArray(format)){configFromStringAndArray(config);}else if(format){configFromStringAndFormat(config);}else if(isDate(input)){config._d=input;}else{configFromInput(config);}
res=new Moment(checkOverflow(config));if(res._nextDay){res.add(1,'d');res._nextDay=undefined;}
return res;}
function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date();}else if(isDate(input)){config._d=new Date(+input);}else if(typeof input==='string'){configFromString(config);}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(typeof(input)==='object'){configFromObject(config);}else if(typeof(input)==='number'){config._d=new Date(input);}else{utils_hooks__hooks.createFromInputFallback(config);}}
function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(typeof(locale)==='boolean'){strict=locale;locale=undefined;}
c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}
function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}
var prototypeMin=deprecate('moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other;});var prototypeMax=deprecate('moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other;});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}
if(!moments.length){return local__createLocal();}
res=moments[0];for(i=1;i<moments.length;++i){if(moments[i][fn](res)){res=moments[i];}}
return res;}
function min(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args);}
function max(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args);}
function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+
seconds*1e3+
minutes*6e4+
hours*36e5;this._days=+days+
weeks*7;this._months=+months+
quarters*3+
years*12;this._data={};this._locale=locale_locales__getLocale();this._bubble();}
function isDuration(obj){return obj instanceof Duration;}
function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign='+';if(offset<0){offset=-offset;sign='-';}
return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~(offset)%60,2);});}
offset('Z',':');offset('ZZ','');addRegexToken('Z',matchOffset);addRegexToken('ZZ',matchOffset);addParseToken(['Z','ZZ'],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(string){var matches=((string||'').match(matchOffset)||[]);var chunk=matches[matches.length-1]||[];var parts=(chunk+'').match(chunkOffset)||['-',0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==='+'?minutes:-minutes;}
function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-(+res);res._d.setTime(+res._d+diff);utils_hooks__hooks.updateOffset(res,false);return res;}else{return local__createLocal(input).local();}
return model._isUTC?local__createLocal(input).zone(model._offset||0):local__createLocal(input).local();}
function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15;}
utils_hooks__hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==='string'){input=offsetFromString(input);}
if(Math.abs(input)<16){input=input*60;}
if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}
this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,'m');}
if(offset!==input){if(!keepLocalTime||this._changeInProgress){add_subtract__addSubtract(this,create__createDuration(input-offset,'m'),1,false);}else if(!this._changeInProgress){this._changeInProgress=true;utils_hooks__hooks.updateOffset(this,true);this._changeInProgress=null;}}
return this;}else{return this._isUTC?offset:getDateOffset(this);}}
function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=='string'){input=-input;}
this.utcOffset(input,keepLocalTime);return this;}else{return-this.utcOffset();}}
function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}
function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),'m');}}
return this;}
function setOffsetToParsedOffset(){if(this._tzm){this.utcOffset(this._tzm);}else if(typeof this._i==='string'){this.utcOffset(offsetFromString(this._i));}
return this;}
function hasAlignedHourOffset(input){if(!input){input=0;}
else{input=local__createLocal(input).utcOffset();}
return(this.utcOffset()-input)%60===0;}
function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}
function isDaylightSavingTimeShifted(){if(this._a){var other=this._isUTC?create_utc__createUTC(this._a):local__createLocal(this._a);return this.isValid()&&compareArrays(this._a,other.toArray())>0;}
return false;}
function isLocal(){return!this._isUTC;}
function isUtcOffset(){return this._isUTC;}
function isUtc(){return this._isUTC&&this._offset===0;}
var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function create__createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else if(typeof input==='number'){duration={};if(key){duration[key]=input;}else{duration.milliseconds=input;}}else if(!!(match=aspNetRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign};}else if(!!(match=create__isoRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)};}else if(duration==null){duration={};}else if(typeof duration==='object'&&('from'in duration||'to'in duration)){diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}
ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,'_locale')){ret._locale=input._locale;}
return ret;}
create__createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign;}
function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+
(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other)){--res.months;}
res.milliseconds=+other-+(base.clone().add(res.months,'M'));return res;}
function momentsDifference(base,other){var res;other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}
return res;}
function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period).');tmp=val;val=period;period=tmp;}
val=typeof val==='string'?+val:val;dur=create__createDuration(val,period);add_subtract__addSubtract(this,dur,direction);return this;};}
function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding);}
if(days){get_set__set(mom,'Date',get_set__get(mom,'Date')+days*isAdding);}
if(months){setMonth(mom,get_set__get(mom,'Month')+months*isAdding);}
if(updateOffset){utils_hooks__hooks.updateOffset(mom,days||months);}}
var add_subtract__add=createAdder(1,'add');var add_subtract__subtract=createAdder(-1,'subtract');function moment_calendar__calendar(time){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf('day'),diff=this.diff(sod,'days',true),format=diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';return this.format(this.localeData().calendar(format,this,local__createLocal(now)));}
function clone(){return new Moment(this);}
function isAfter(input,units){var inputMs;units=normalizeUnits(typeof units!=='undefined'?units:'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return+this>+input;}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return inputMs<+this.clone().startOf(units);}}
function isBefore(input,units){var inputMs;units=normalizeUnits(typeof units!=='undefined'?units:'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return+this<+input;}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return+this.clone().endOf(units)<inputMs;}}
function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units);}
function isSame(input,units){var inputMs;units=normalizeUnits(units||'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return+this===+input;}else{inputMs=+local__createLocal(input);return+(this.clone().startOf(units))<=inputMs&&inputMs<=+(this.clone().endOf(units));}}
function absFloor(number){if(number<0){return Math.ceil(number);}else{return Math.floor(number);}}
function diff(input,units,asFloat){var that=cloneWithOffset(input,this),zoneDelta=(that.utcOffset()-this.utcOffset())*6e4,delta,output;units=normalizeUnits(units);if(units==='year'||units==='month'||units==='quarter'){output=monthDiff(this,that);if(units==='quarter'){output=output/3;}else if(units==='year'){output=output/12;}}else{delta=this-that;output=units==='second'?delta/1e3:units==='minute'?delta/6e4:units==='hour'?delta/36e5:units==='day'?(delta-zoneDelta)/864e5:units==='week'?(delta-zoneDelta)/6048e5:delta;}
return asFloat?output:absFloor(output);}
function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor);}
return-(wholeMonthDiff+adjust);}
utils_hooks__hooks.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';function toString(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}
function moment_format__toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if('function'===typeof Date.prototype.toISOString){return this.toDate().toISOString();}else{return formatMoment(m,'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}}else{return formatMoment(m,'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}}
function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output);}
function from(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate();}
return create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}
function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix);}
function to(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate();}
return create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}
function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix);}
function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=locale_locales__getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}
return this;}}
var lang=deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}
function startOf(units){units=normalizeUnits(units);switch(units){case'year':this.month(0);case'quarter':case'month':this.date(1);case'week':case'isoWeek':case'day':this.hours(0);case'hour':this.minutes(0);case'minute':this.seconds(0);case'second':this.milliseconds(0);}
if(units==='week'){this.weekday(0);}
if(units==='isoWeek'){this.isoWeekday(1);}
if(units==='quarter'){this.month(Math.floor(this.month()/3)*3);}
return this;}
function endOf(units){units=normalizeUnits(units);if(units===undefined||units==='millisecond'){return this;}
return this.startOf(units).add(1,(units==='isoWeek'?'week':units)).subtract(1,'ms');}
function to_type__valueOf(){return+this._d-((this._offset||0)*60000);}
function unix(){return Math.floor(+this/1000);}
function toDate(){return this._offset?new Date(+this):this._d;}
function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}
function moment_valid__isValid(){return valid__isValid(this);}
function parsingFlags(){return extend({},getParsingFlags(this));}
function invalidAt(){return getParsingFlags(this).overflow;}
addFormatToken(0,['gg',2],0,function(){return this.weekYear()%100;});addFormatToken(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}
addWeekYearFormatToken('gggg','weekYear');addWeekYearFormatToken('ggggg','weekYear');addWeekYearFormatToken('GGGG','isoWeekYear');addWeekYearFormatToken('GGGGG','isoWeekYear');addUnitAlias('weekYear','gg');addUnitAlias('isoWeekYear','GG');addRegexToken('G',matchSigned);addRegexToken('g',matchSigned);addRegexToken('GG',match1to2,match2);addRegexToken('gg',match1to2,match2);addRegexToken('GGGG',match1to4,match4);addRegexToken('gggg',match1to4,match4);addRegexToken('GGGGG',match1to6,match6);addRegexToken('ggggg',match1to6,match6);addWeekParseToken(['gggg','ggggg','GGGG','GGGGG'],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(['gg','GG'],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input);});function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week;}
function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add((input-year),'y');}
function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add((input-year),'y');}
function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}
function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}
addFormatToken('Q',0,0,'quarter');addUnitAlias('quarter','Q');addRegexToken('Q',match1);addParseToken('Q',function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}
addFormatToken('D',['DD',2],'Do','date');addUnitAlias('date','D');addRegexToken('D',match1to2);addRegexToken('DD',match1to2,match2);addRegexToken('Do',function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient;});addParseToken(['D','DD'],DATE);addParseToken('Do',function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10);});var getSetDayOfMonth=makeGetSet('Date',true);addFormatToken('d',0,'do','day');addFormatToken('dd',0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken('ddd',0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken('dddd',0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken('e',0,0,'weekday');addFormatToken('E',0,0,'isoWeekday');addUnitAlias('day','d');addUnitAlias('weekday','e');addUnitAlias('isoWeekday','E');addRegexToken('d',match1to2);addRegexToken('e',match1to2);addRegexToken('E',match1to2);addRegexToken('dd',matchWord);addRegexToken('ddd',matchWord);addRegexToken('dddd',matchWord);addWeekParseToken(['dd','ddd','dddd'],function(input,week,config){var weekday=config._locale.weekdaysParse(input);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(['d','e','E'],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input==='string'){if(!isNaN(input)){input=parseInt(input,10);}
else{input=locale.weekdaysParse(input);if(typeof input!=='number'){return null;}}}
return input;}
var defaultLocaleWeekdays='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function localeWeekdays(m){return this._weekdays[m.day()];}
var defaultLocaleWeekdaysShort='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function localeWeekdaysShort(m){return this._weekdaysShort[m.day()];}
var defaultLocaleWeekdaysMin='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function localeWeekdaysMin(m){return this._weekdaysMin[m.day()];}
function localeWeekdaysParse(weekdayName){var i,mom,regex;if(!this._weekdaysParse){this._weekdaysParse=[];}
for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=local__createLocal([2000,1]).day(i);regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i');}
if(this._weekdaysParse[i].test(weekdayName)){return i;}}}
function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d');}else{return day;}}
function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d');}
function getSetISODayOfWeek(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7);}
addFormatToken('H',['HH',2],0,'hour');addFormatToken('h',['hh',2],0,function(){return this.hours()%12||12;});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}
meridiem('a',true);meridiem('A',false);addUnitAlias('hour','h');function matchMeridiem(isStrict,locale){return locale._meridiemParse;}
addRegexToken('a',matchMeridiem);addRegexToken('A',matchMeridiem);addRegexToken('H',match1to2);addRegexToken('h',match1to2);addRegexToken('HH',match1to2,match2);addRegexToken('hh',match1to2,match2);addParseToken(['H','HH'],HOUR);addParseToken(['a','A'],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(['h','hh'],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});function localeIsPM(input){return((input+'').toLowerCase().charAt(0)==='p');}
var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?'pm':'PM';}else{return isLower?'am':'AM';}}
var getSetHour=makeGetSet('Hours',true);addFormatToken('m',['mm',2],0,'minute');addUnitAlias('minute','m');addRegexToken('m',match1to2);addRegexToken('mm',match1to2,match2);addParseToken(['m','mm'],MINUTE);var getSetMinute=makeGetSet('Minutes',false);addFormatToken('s',['ss',2],0,'second');addUnitAlias('second','s');addRegexToken('s',match1to2);addRegexToken('ss',match1to2,match2);addParseToken(['s','ss'],SECOND);var getSetSecond=makeGetSet('Seconds',false);addFormatToken('S',0,0,function(){return~~(this.millisecond()/100);});addFormatToken(0,['SS',2],0,function(){return~~(this.millisecond()/10);});function millisecond__milliseconds(token){addFormatToken(0,[token,3],0,'millisecond');}
millisecond__milliseconds('SSS');millisecond__milliseconds('SSSS');addUnitAlias('millisecond','ms');addRegexToken('S',match1to3,match1);addRegexToken('SS',match1to3,match2);addRegexToken('SSS',match1to3,match3);addRegexToken('SSSS',matchUnsigned);addParseToken(['S','SS','SSS','SSSS'],function(input,array){array[MILLISECOND]=toInt(('0.'+input)*1000);});var getSetMillisecond=makeGetSet('Milliseconds',false);addFormatToken('z',0,0,'zoneAbbr');addFormatToken('zz',0,0,'zoneName');function getZoneAbbr(){return this._isUTC?'UTC':'';}
function getZoneName(){return this._isUTC?'Coordinated Universal Time':'';}
var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add;momentPrototype__proto.calendar=moment_calendar__calendar;momentPrototype__proto.clone=clone;momentPrototype__proto.diff=diff;momentPrototype__proto.endOf=endOf;momentPrototype__proto.format=format;momentPrototype__proto.from=from;momentPrototype__proto.fromNow=fromNow;momentPrototype__proto.to=to;momentPrototype__proto.toNow=toNow;momentPrototype__proto.get=getSet;momentPrototype__proto.invalidAt=invalidAt;momentPrototype__proto.isAfter=isAfter;momentPrototype__proto.isBefore=isBefore;momentPrototype__proto.isBetween=isBetween;momentPrototype__proto.isSame=isSame;momentPrototype__proto.isValid=moment_valid__isValid;momentPrototype__proto.lang=lang;momentPrototype__proto.locale=locale;momentPrototype__proto.localeData=localeData;momentPrototype__proto.max=prototypeMax;momentPrototype__proto.min=prototypeMin;momentPrototype__proto.parsingFlags=parsingFlags;momentPrototype__proto.set=getSet;momentPrototype__proto.startOf=startOf;momentPrototype__proto.subtract=add_subtract__subtract;momentPrototype__proto.toArray=toArray;momentPrototype__proto.toDate=toDate;momentPrototype__proto.toISOString=moment_format__toISOString;momentPrototype__proto.toJSON=moment_format__toISOString;momentPrototype__proto.toString=toString;momentPrototype__proto.unix=unix;momentPrototype__proto.valueOf=to_type__valueOf;momentPrototype__proto.year=getSetYear;momentPrototype__proto.isLeapYear=getIsLeapYear;momentPrototype__proto.weekYear=getSetWeekYear;momentPrototype__proto.isoWeekYear=getSetISOWeekYear;momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter;momentPrototype__proto.month=getSetMonth;momentPrototype__proto.daysInMonth=getDaysInMonth;momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek;momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek;momentPrototype__proto.weeksInYear=getWeeksInYear;momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear;momentPrototype__proto.date=getSetDayOfMonth;momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek;momentPrototype__proto.weekday=getSetLocaleDayOfWeek;momentPrototype__proto.isoWeekday=getSetISODayOfWeek;momentPrototype__proto.dayOfYear=getSetDayOfYear;momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour;momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute;momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond;momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond;momentPrototype__proto.utcOffset=getSetOffset;momentPrototype__proto.utc=setOffsetToUTC;momentPrototype__proto.local=setOffsetToLocal;momentPrototype__proto.parseZone=setOffsetToParsedOffset;momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset;momentPrototype__proto.isDST=isDaylightSavingTime;momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted;momentPrototype__proto.isLocal=isLocal;momentPrototype__proto.isUtcOffset=isUtcOffset;momentPrototype__proto.isUtc=isUtc;momentPrototype__proto.isUTC=isUtc;momentPrototype__proto.zoneAbbr=getZoneAbbr;momentPrototype__proto.zoneName=getZoneName;momentPrototype__proto.dates=deprecate('dates accessor is deprecated. Use date instead.',getSetDayOfMonth);momentPrototype__proto.months=deprecate('months accessor is deprecated. Use month instead',getSetMonth);momentPrototype__proto.years=deprecate('years accessor is deprecated. Use year instead',getSetYear);momentPrototype__proto.zone=deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779',getSetZone);var momentPrototype=momentPrototype__proto;function moment__createUnix(input){return local__createLocal(input*1000);}
function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone();}
var defaultCalendar={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return typeof output==='function'?output.call(mom,now):output;}
var defaultLongDateFormat={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY LT',LLLL:'dddd, MMMM D, YYYY LT'};function longDateFormat(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});this._longDateFormat[key]=output;}
return output;}
var defaultInvalidDate='Invalid date';function invalidDate(){return this._invalidDate;}
var defaultOrdinal='%d';var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace('%d',number);}
function preParsePostFormat(string){return string;}
var defaultRelativeTime={future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(typeof output==='function')?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}
function pastFuture(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return typeof format==='function'?format(output):format.replace(/%s/i,output);}
function locale_set__set(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==='function'){this[i]=prop;}else{this['_'+i]=prop;}}
this._ordinalParseLenient=new RegExp(this._ordinalParse.source+'|'+(/\d{1,2}/).source);}
var prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar;prototype__proto.calendar=locale_calendar__calendar;prototype__proto._longDateFormat=defaultLongDateFormat;prototype__proto.longDateFormat=longDateFormat;prototype__proto._invalidDate=defaultInvalidDate;prototype__proto.invalidDate=invalidDate;prototype__proto._ordinal=defaultOrdinal;prototype__proto.ordinal=ordinal;prototype__proto._ordinalParse=defaultOrdinalParse;prototype__proto.preparse=preParsePostFormat;prototype__proto.postformat=preParsePostFormat;prototype__proto._relativeTime=defaultRelativeTime;prototype__proto.relativeTime=relative__relativeTime;prototype__proto.pastFuture=pastFuture;prototype__proto.set=locale_set__set;prototype__proto.months=localeMonths;prototype__proto._months=defaultLocaleMonths;prototype__proto.monthsShort=localeMonthsShort;prototype__proto._monthsShort=defaultLocaleMonthsShort;prototype__proto.monthsParse=localeMonthsParse;prototype__proto.week=localeWeek;prototype__proto._week=defaultLocaleWeek;prototype__proto.firstDayOfYear=localeFirstDayOfYear;prototype__proto.firstDayOfWeek=localeFirstDayOfWeek;prototype__proto.weekdays=localeWeekdays;prototype__proto._weekdays=defaultLocaleWeekdays;prototype__proto.weekdaysMin=localeWeekdaysMin;prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin;prototype__proto.weekdaysShort=localeWeekdaysShort;prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort;prototype__proto.weekdaysParse=localeWeekdaysParse;prototype__proto.isPM=localeIsPM;prototype__proto._meridiemParse=defaultLocaleMeridiemParse;prototype__proto.meridiem=localeMeridiem;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale();var utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format);}
function list(format,index,field,count,setter){if(typeof format==='number'){index=format;format=undefined;}
format=format||'';if(index!=null){return lists__get(format,index,field,setter);}
var i;var out=[];for(i=0;i<count;i++){out[i]=lists__get(format,i,field,setter);}
return out;}
function lists__listMonths(format,index){return list(format,index,'months',12,'month');}
function lists__listMonthsShort(format,index){return list(format,index,'monthsShort',12,'month');}
function lists__listWeekdays(format,index){return list(format,index,'weekdays',7,'day');}
function lists__listWeekdaysShort(format,index){return list(format,index,'weekdaysShort',7,'day');}
function lists__listWeekdaysMin(format,index){return list(format,index,'weekdaysMin',7,'day');}
locale_locales__getSetGlobalLocale('en',{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return number+output;}});utils_hooks__hooks.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',locale_locales__getSetGlobalLocale);utils_hooks__hooks.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',locale_locales__getLocale);var mathAbs=Math.abs;function duration_abs__abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}
function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}
function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1);}
function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1);}
function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years=0;data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);years=absFloor(daysToYears(days));days-=absFloor(yearsToDays(years));months+=absFloor(days/30);days%=30;years+=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}
function daysToYears(days){return days*400/146097;}
function yearsToDays(years){return years*146097/400;}
function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==='month'||units==='year'){days=this._days+milliseconds/864e5;months=this._months+daysToYears(days)*12;return units==='month'?months:months/12;}else{days=this._days+Math.round(yearsToDays(this._months/12));switch(units){case'week':return days/7+milliseconds/6048e5;case'day':return days+milliseconds/864e5;case'hour':return days*24+milliseconds/36e5;case'minute':return days*1440+milliseconds/6e4;case'second':return days*86400+milliseconds/1000;case'millisecond':return Math.floor(days*864e5)+milliseconds;default:throw new Error('Unknown unit '+units);}}}
function duration_as__valueOf(){return(this._milliseconds+
this._days*864e5+
(this._months%12)*2592e6+
toInt(this._months/12)*31536e6);}
function makeAs(alias){return function(){return this.as(alias);};}
var asMilliseconds=makeAs('ms');var asSeconds=makeAs('s');var asMinutes=makeAs('m');var asHours=makeAs('h');var asDays=makeAs('d');var asWeeks=makeAs('w');var asMonths=makeAs('M');var asYears=makeAs('y');function duration_get__get(units){units=normalizeUnits(units);return this[units+'s']();}
function makeGetter(name){return function(){return this._data[name];};}
var duration_get__milliseconds=makeGetter('milliseconds');var seconds=makeGetter('seconds');var minutes=makeGetter('minutes');var hours=makeGetter('hours');var days=makeGetter('days');var months=makeGetter('months');var years=makeGetter('years');function weeks(){return absFloor(this.days()/7);}
var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}
function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs();var seconds=round(duration.as('s'));var minutes=round(duration.as('m'));var hours=round(duration.as('h'));var days=round(duration.as('d'));var months=round(duration.as('M'));var years=round(duration.as('y'));var a=seconds<thresholds.s&&['s',seconds]||minutes===1&&['m']||minutes<thresholds.m&&['mm',minutes]||hours===1&&['h']||hours<thresholds.h&&['hh',hours]||days===1&&['d']||days<thresholds.d&&['dd',days]||months===1&&['M']||months<thresholds.M&&['MM',months]||years===1&&['y']||['yy',years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}
function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}
if(limit===undefined){return thresholds[threshold];}
thresholds[threshold]=limit;return true;}
function humanize(withSuffix){var locale=this.localeData();var output=duration_humanize__relativeTime(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output);}
return locale.postformat(output);}
var iso_string__abs=Math.abs;function iso_string__toISOString(){var Y=iso_string__abs(this.years());var M=iso_string__abs(this.months());var D=iso_string__abs(this.days());var h=iso_string__abs(this.hours());var m=iso_string__abs(this.minutes());var s=iso_string__abs(this.seconds()+this.milliseconds()/1000);var total=this.asSeconds();if(!total){return'P0D';}
return(total<0?'-':'')+'P'+
(Y?Y+'Y':'')+
(M?M+'M':'')+
(D?D+'D':'')+
((h||m||s)?'T':'')+
(h?h+'H':'')+
(m?m+'M':'')+
(s?s+'S':'');}
var duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs;duration_prototype__proto.add=duration_add_subtract__add;duration_prototype__proto.subtract=duration_add_subtract__subtract;duration_prototype__proto.as=as;duration_prototype__proto.asMilliseconds=asMilliseconds;duration_prototype__proto.asSeconds=asSeconds;duration_prototype__proto.asMinutes=asMinutes;duration_prototype__proto.asHours=asHours;duration_prototype__proto.asDays=asDays;duration_prototype__proto.asWeeks=asWeeks;duration_prototype__proto.asMonths=asMonths;duration_prototype__proto.asYears=asYears;duration_prototype__proto.valueOf=duration_as__valueOf;duration_prototype__proto._bubble=bubble;duration_prototype__proto.get=duration_get__get;duration_prototype__proto.milliseconds=duration_get__milliseconds;duration_prototype__proto.seconds=seconds;duration_prototype__proto.minutes=minutes;duration_prototype__proto.hours=hours;duration_prototype__proto.days=days;duration_prototype__proto.weeks=weeks;duration_prototype__proto.months=months;duration_prototype__proto.years=years;duration_prototype__proto.humanize=humanize;duration_prototype__proto.toISOString=iso_string__toISOString;duration_prototype__proto.toString=iso_string__toISOString;duration_prototype__proto.toJSON=iso_string__toISOString;duration_prototype__proto.locale=locale;duration_prototype__proto.localeData=localeData;duration_prototype__proto.toIsoString=deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',iso_string__toISOString);duration_prototype__proto.lang=lang;addFormatToken('X',0,0,'unix');addFormatToken('x',0,0,'valueOf');addRegexToken('x',matchSigned);addRegexToken('X',matchTimestamp);addParseToken('X',function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken('x',function(input,array,config){config._d=new Date(toInt(input));});utils_hooks__hooks.version='2.10.3';setHookCallback(local__createLocal);utils_hooks__hooks.fn=momentPrototype;utils_hooks__hooks.min=min;utils_hooks__hooks.max=max;utils_hooks__hooks.utc=create_utc__createUTC;utils_hooks__hooks.unix=moment__createUnix;utils_hooks__hooks.months=lists__listMonths;utils_hooks__hooks.isDate=isDate;utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale;utils_hooks__hooks.invalid=valid__createInvalid;utils_hooks__hooks.duration=create__createDuration;utils_hooks__hooks.isMoment=isMoment;utils_hooks__hooks.weekdays=lists__listWeekdays;utils_hooks__hooks.parseZone=moment__createInZone;utils_hooks__hooks.localeData=locale_locales__getLocale;utils_hooks__hooks.isDuration=isDuration;utils_hooks__hooks.monthsShort=lists__listMonthsShort;utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin;utils_hooks__hooks.defineLocale=defineLocale;utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort;utils_hooks__hooks.normalizeUnits=normalizeUnits;utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;var _moment=utils_hooks__hooks;return _moment;}));}.call(exports,__webpack_require__(4)(module)))},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];module.children=[];module.webpackPolyfill=1;}
return module;}},function(module,exports){function webpackContext(req){throw new Error("Cannot find module '"+req+"'.");}
webpackContext.keys=function(){return[];};webpackContext.resolve=webpackContext;module.exports=webpackContext;webpackContext.id=5;},function(module,exports){(function(global){'use strict';var _rng;var globalVar=typeof window!=='undefined'?window:typeof global!=='undefined'?global:null;if(globalVar&&globalVar.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);_rng=function whatwgRNG(){crypto.getRandomValues(_rnds8);return _rnds8;};}
if(!_rng){var _rnds=new Array(16);_rng=function(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;_rnds[i]=r>>>((i&3)<<3)&255;}
return _rnds;};}
var _byteToHex=[];var _hexToByte={};for(var i=0;i<256;i++){_byteToHex[i]=(i+256).toString(16).substr(1);_hexToByte[_byteToHex[i]]=i;}
function parse(s,buf,offset){var i=buf&&offset||0,ii=0;buf=buf||[];s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){if(ii<16){buf[i+ii++]=_hexToByte[oct];}});while(ii<16){buf[i+ii++]=0;}
return buf;}
function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+'-'+bth[buf[i++]]+bth[buf[i++]]+'-'+bth[buf[i++]]+bth[buf[i++]]+'-'+bth[buf[i++]]+bth[buf[i++]]+'-'+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]];}
var _seedBytes=_rng();var _nodeId=[_seedBytes[0]|1,_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]];var _clockseq=(_seedBytes[6]<<8|_seedBytes[7])&16383;var _lastMSecs=0,_lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;var msecs=options.msecs!==undefined?options.msecs:new Date().getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/10000;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383;}
if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0;}
if(nsecs>=10000){throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');}
_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=12219292800000;var tl=((msecs&268435455)*10000+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*10000&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;var node=options.node||_nodeId;for(var n=0;n<6;n++){b[i+n]=node[n];}
return buf?buf:unparse(b);}
function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=='string'){buf=options=='binary'?new Array(16):null;options=null;}
options=options||{};var rnds=options.random||(options.rng||_rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;ii++){buf[i+ii]=rnds[ii];}}
return buf||unparse(rnds);}
var uuid=v4;uuid.v1=v1;uuid.v4=v4;uuid.parse=parse;uuid.unparse=unparse;module.exports=uuid;}.call(exports,(function(){return this;}())))},function(module,exports){'use strict';exports.prepareElements=function(JSONcontainer){for(var elementType in JSONcontainer){if(JSONcontainer.hasOwnProperty(elementType)){JSONcontainer[elementType].redundant=JSONcontainer[elementType].used;JSONcontainer[elementType].used=[];}}};exports.cleanupElements=function(JSONcontainer){for(var elementType in JSONcontainer){if(JSONcontainer.hasOwnProperty(elementType)){if(JSONcontainer[elementType].redundant){for(var i=0;i<JSONcontainer[elementType].redundant.length;i++){JSONcontainer[elementType].redundant[i].parentNode.removeChild(JSONcontainer[elementType].redundant[i]);}
JSONcontainer[elementType].redundant=[];}}}};exports.getSVGElement=function(elementType,JSONcontainer,svgContainer){var element;if(JSONcontainer.hasOwnProperty(elementType)){if(JSONcontainer[elementType].redundant.length>0){element=JSONcontainer[elementType].redundant[0];JSONcontainer[elementType].redundant.shift();}else{element=document.createElementNS('http://www.w3.org/2000/svg',elementType);svgContainer.appendChild(element);}}else{element=document.createElementNS('http://www.w3.org/2000/svg',elementType);JSONcontainer[elementType]={used:[],redundant:[]};svgContainer.appendChild(element);}
JSONcontainer[elementType].used.push(element);return element;};exports.getDOMElement=function(elementType,JSONcontainer,DOMContainer,insertBefore){var element;if(JSONcontainer.hasOwnProperty(elementType)){if(JSONcontainer[elementType].redundant.length>0){element=JSONcontainer[elementType].redundant[0];JSONcontainer[elementType].redundant.shift();}else{element=document.createElement(elementType);if(insertBefore!==undefined){DOMContainer.insertBefore(element,insertBefore);}else{DOMContainer.appendChild(element);}}}else{element=document.createElement(elementType);JSONcontainer[elementType]={used:[],redundant:[]};if(insertBefore!==undefined){DOMContainer.insertBefore(element,insertBefore);}else{DOMContainer.appendChild(element);}}
JSONcontainer[elementType].used.push(element);return element;};exports.drawPoint=function(x,y,group,JSONcontainer,svgContainer,labelObj){var point;if(group.options.drawPoints.style=='circle'){point=exports.getSVGElement('circle',JSONcontainer,svgContainer);point.setAttributeNS(null,'cx',x);point.setAttributeNS(null,'cy',y);point.setAttributeNS(null,'r',0.5*group.options.drawPoints.size);}else{point=exports.getSVGElement('rect',JSONcontainer,svgContainer);point.setAttributeNS(null,'x',x-0.5*group.options.drawPoints.size);point.setAttributeNS(null,'y',y-0.5*group.options.drawPoints.size);point.setAttributeNS(null,'width',group.options.drawPoints.size);point.setAttributeNS(null,'height',group.options.drawPoints.size);}
if(group.options.drawPoints.styles!==undefined){point.setAttributeNS(null,'style',group.group.options.drawPoints.styles);}
point.setAttributeNS(null,'class',group.className+' vis-point');if(labelObj){var label=exports.getSVGElement('text',JSONcontainer,svgContainer);if(labelObj.xOffset){x=x+labelObj.xOffset;}
if(labelObj.yOffset){y=y+labelObj.yOffset;}
if(labelObj.content){label.textContent=labelObj.content;}
if(labelObj.className){label.setAttributeNS(null,'class',labelObj.className+' vis-label');}
label.setAttributeNS(null,'x',x);label.setAttributeNS(null,'y',y);}
return point;};exports.drawBar=function(x,y,width,height,className,JSONcontainer,svgContainer,style){if(height!=0){if(height<0){height*=-1;y-=height;}
var rect=exports.getSVGElement('rect',JSONcontainer,svgContainer);rect.setAttributeNS(null,'x',x-0.5*width);rect.setAttributeNS(null,'y',y);rect.setAttributeNS(null,'width',width);rect.setAttributeNS(null,'height',height);rect.setAttributeNS(null,'class',className);if(style){rect.setAttributeNS(null,'style',style);}}};},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var Queue=__webpack_require__(9);function DataSet(data,options){if(data&&!Array.isArray(data)){options=data;data=null;}
this._options=options||{};this._data={};this.length=0;this._fieldId=this._options.fieldId||'id';this._type={};if(this._options.type){for(var field in this._options.type){if(this._options.type.hasOwnProperty(field)){var value=this._options.type[field];if(value=='Date'||value=='ISODate'||value=='ASPDate'){this._type[field]='Date';}else{this._type[field]=value;}}}}
if(this._options.convert){throw new Error('Option "convert" is deprecated. Use "type" instead.');}
this._subscribers={};if(data){this.add(data);}
this.setOptions(options);}
DataSet.prototype.setOptions=function(options){if(options&&options.queue!==undefined){if(options.queue===false){if(this._queue){this._queue.destroy();delete this._queue;}}else{if(!this._queue){this._queue=Queue.extend(this,{replace:['add','update','remove']});}
if(typeof options.queue==='object'){this._queue.setOptions(options.queue);}}}};DataSet.prototype.on=function(event,callback){var subscribers=this._subscribers[event];if(!subscribers){subscribers=[];this._subscribers[event]=subscribers;}
subscribers.push({callback:callback});};DataSet.prototype.subscribe=function(){throw new Error('DataSet.subscribe is deprecated. Use DataSet.on instead.');};DataSet.prototype.off=function(event,callback){var subscribers=this._subscribers[event];if(subscribers){this._subscribers[event]=subscribers.filter(function(listener){return listener.callback!=callback;});}};DataSet.prototype.unsubscribe=function(){throw new Error('DataSet.unsubscribe is deprecated. Use DataSet.off instead.');};DataSet.prototype._trigger=function(event,params,senderId){if(event=='*'){throw new Error('Cannot trigger event *');}
var subscribers=[];if(event in this._subscribers){subscribers=subscribers.concat(this._subscribers[event]);}
if('*'in this._subscribers){subscribers=subscribers.concat(this._subscribers['*']);}
for(var i=0;i<subscribers.length;i++){var subscriber=subscribers[i];if(subscriber.callback){subscriber.callback(event,params,senderId||null);}}};DataSet.prototype.add=function(data,senderId){var addedIds=[],id,me=this;if(Array.isArray(data)){for(var i=0,len=data.length;i<len;i++){id=me._addItem(data[i]);addedIds.push(id);}}else if(data instanceof Object){id=me._addItem(data);addedIds.push(id);}else{throw new Error('Unknown dataType');}
if(addedIds.length){this._trigger('add',{items:addedIds},senderId);}
return addedIds;};DataSet.prototype.update=function(data,senderId){var addedIds=[];var updatedIds=[];var updatedData=[];var me=this;var fieldId=me._fieldId;var addOrUpdate=function addOrUpdate(item){var id=item[fieldId];if(me._data[id]){id=me._updateItem(item);updatedIds.push(id);updatedData.push(item);}else{id=me._addItem(item);addedIds.push(id);}};if(Array.isArray(data)){for(var i=0,len=data.length;i<len;i++){addOrUpdate(data[i]);}}else if(data instanceof Object){addOrUpdate(data);}else{throw new Error('Unknown dataType');}
if(addedIds.length){this._trigger('add',{items:addedIds},senderId);}
if(updatedIds.length){this._trigger('update',{items:updatedIds,data:updatedData},senderId);}
return addedIds.concat(updatedIds);};DataSet.prototype.get=function(args){var me=this;var id,ids,options;var firstType=util.getType(arguments[0]);if(firstType=='String'||firstType=='Number'){id=arguments[0];options=arguments[1];}else if(firstType=='Array'){ids=arguments[0];options=arguments[1];}else{options=arguments[0];}
var returnType;if(options&&options.returnType){var allowedValues=['Array','Object'];returnType=allowedValues.indexOf(options.returnType)==-1?'Array':options.returnType;}else{returnType='Array';}
var type=options&&options.type||this._options.type;var filter=options&&options.filter;var items=[],item,itemId,i,len;if(id!=undefined){item=me._getItem(id,type);if(filter&&!filter(item)){item=null;}}else if(ids!=undefined){for(i=0,len=ids.length;i<len;i++){item=me._getItem(ids[i],type);if(!filter||filter(item)){items.push(item);}}}else{for(itemId in this._data){if(this._data.hasOwnProperty(itemId)){item=me._getItem(itemId,type);if(!filter||filter(item)){items.push(item);}}}}
if(options&&options.order&&id==undefined){this._sort(items,options.order);}
if(options&&options.fields){var fields=options.fields;if(id!=undefined){item=this._filterFields(item,fields);}else{for(i=0,len=items.length;i<len;i++){items[i]=this._filterFields(items[i],fields);}}}
if(returnType=='Object'){var result={};for(i=0;i<items.length;i++){result[items[i].id]=items[i];}
return result;}else{if(id!=undefined){return item;}else{return items;}}};DataSet.prototype.getIds=function(options){var data=this._data,filter=options&&options.filter,order=options&&options.order,type=options&&options.type||this._options.type,i,len,id,item,items,ids=[];if(filter){if(order){items=[];for(id in data){if(data.hasOwnProperty(id)){item=this._getItem(id,type);if(filter(item)){items.push(item);}}}
this._sort(items,order);for(i=0,len=items.length;i<len;i++){ids[i]=items[i][this._fieldId];}}else{for(id in data){if(data.hasOwnProperty(id)){item=this._getItem(id,type);if(filter(item)){ids.push(item[this._fieldId]);}}}}}else{if(order){items=[];for(id in data){if(data.hasOwnProperty(id)){items.push(data[id]);}}
this._sort(items,order);for(i=0,len=items.length;i<len;i++){ids[i]=items[i][this._fieldId];}}else{for(id in data){if(data.hasOwnProperty(id)){item=data[id];ids.push(item[this._fieldId]);}}}}
return ids;};DataSet.prototype.getDataSet=function(){return this;};DataSet.prototype.forEach=function(callback,options){var filter=options&&options.filter,type=options&&options.type||this._options.type,data=this._data,item,id;if(options&&options.order){var items=this.get(options);for(var i=0,len=items.length;i<len;i++){item=items[i];id=item[this._fieldId];callback(item,id);}}else{for(id in data){if(data.hasOwnProperty(id)){item=this._getItem(id,type);if(!filter||filter(item)){callback(item,id);}}}}};DataSet.prototype.map=function(callback,options){var filter=options&&options.filter,type=options&&options.type||this._options.type,mappedItems=[],data=this._data,item;for(var id in data){if(data.hasOwnProperty(id)){item=this._getItem(id,type);if(!filter||filter(item)){mappedItems.push(callback(item,id));}}}
if(options&&options.order){this._sort(mappedItems,options.order);}
return mappedItems;};DataSet.prototype._filterFields=function(item,fields){if(!item){return item;}
var filteredItem={};if(Array.isArray(fields)){for(var field in item){if(item.hasOwnProperty(field)&&fields.indexOf(field)!=-1){filteredItem[field]=item[field];}}}else{for(var field in item){if(item.hasOwnProperty(field)&&fields.hasOwnProperty(field)){filteredItem[fields[field]]=item[field];}}}
return filteredItem;};DataSet.prototype._sort=function(items,order){if(util.isString(order)){var name=order;items.sort(function(a,b){var av=a[name];var bv=b[name];return av>bv?1:av<bv?-1:0;});}else if(typeof order==='function'){items.sort(order);}
else{throw new TypeError('Order must be a function or a string');}};DataSet.prototype.remove=function(id,senderId){var removedIds=[],i,len,removedId;if(Array.isArray(id)){for(i=0,len=id.length;i<len;i++){removedId=this._remove(id[i]);if(removedId!=null){removedIds.push(removedId);}}}else{removedId=this._remove(id);if(removedId!=null){removedIds.push(removedId);}}
if(removedIds.length){this._trigger('remove',{items:removedIds},senderId);}
return removedIds;};DataSet.prototype._remove=function(id){if(util.isNumber(id)||util.isString(id)){if(this._data[id]){delete this._data[id];this.length--;return id;}}else if(id instanceof Object){var itemId=id[this._fieldId];if(itemId&&this._data[itemId]){delete this._data[itemId];this.length--;return itemId;}}
return null;};DataSet.prototype.clear=function(senderId){var ids=Object.keys(this._data);this._data={};this.length=0;this._trigger('remove',{items:ids},senderId);return ids;};DataSet.prototype.max=function(field){var data=this._data,max=null,maxField=null;for(var id in data){if(data.hasOwnProperty(id)){var item=data[id];var itemField=item[field];if(itemField!=null&&(!max||itemField>maxField)){max=item;maxField=itemField;}}}
return max;};DataSet.prototype.min=function(field){var data=this._data,min=null,minField=null;for(var id in data){if(data.hasOwnProperty(id)){var item=data[id];var itemField=item[field];if(itemField!=null&&(!min||itemField<minField)){min=item;minField=itemField;}}}
return min;};DataSet.prototype.distinct=function(field){var data=this._data;var values=[];var fieldType=this._options.type&&this._options.type[field]||null;var count=0;var i;for(var prop in data){if(data.hasOwnProperty(prop)){var item=data[prop];var value=item[field];var exists=false;for(i=0;i<count;i++){if(values[i]==value){exists=true;break;}}
if(!exists&&value!==undefined){values[count]=value;count++;}}}
if(fieldType){for(i=0;i<values.length;i++){values[i]=util.convert(values[i],fieldType);}}
return values;};DataSet.prototype._addItem=function(item){var id=item[this._fieldId];if(id!=undefined){if(this._data[id]){throw new Error('Cannot add item: item with id '+id+' already exists');}}else{id=util.randomUUID();item[this._fieldId]=id;}
var d={};for(var field in item){if(item.hasOwnProperty(field)){var fieldType=this._type[field];d[field]=util.convert(item[field],fieldType);}}
this._data[id]=d;this.length++;return id;};DataSet.prototype._getItem=function(id,types){var field,value;var raw=this._data[id];if(!raw){return null;}
var converted={};if(types){for(field in raw){if(raw.hasOwnProperty(field)){value=raw[field];converted[field]=util.convert(value,types[field]);}}}else{for(field in raw){if(raw.hasOwnProperty(field)){value=raw[field];converted[field]=value;}}}
return converted;};DataSet.prototype._updateItem=function(item){var id=item[this._fieldId];if(id==undefined){throw new Error('Cannot update item: item has no id (item: '+JSON.stringify(item)+')');}
var d=this._data[id];if(!d){throw new Error('Cannot update item: no item with id '+id+' found');}
for(var field in item){if(item.hasOwnProperty(field)){var fieldType=this._type[field];d[field]=util.convert(item[field],fieldType);}}
return id;};module.exports=DataSet;},function(module,exports){'use strict';function Queue(options){this.delay=null;this.max=Infinity;this._queue=[];this._timeout=null;this._extended=null;this.setOptions(options);}
Queue.prototype.setOptions=function(options){if(options&&typeof options.delay!=='undefined'){this.delay=options.delay;}
if(options&&typeof options.max!=='undefined'){this.max=options.max;}
this._flushIfNeeded();};Queue.extend=function(object,options){var queue=new Queue(options);if(object.flush!==undefined){throw new Error('Target object already has a property flush');}
object.flush=function(){queue.flush();};var methods=[{name:'flush',original:undefined}];if(options&&options.replace){for(var i=0;i<options.replace.length;i++){var name=options.replace[i];methods.push({name:name,original:object[name]});queue.replace(object,name);}}
queue._extended={object:object,methods:methods};return queue;};Queue.prototype.destroy=function(){this.flush();if(this._extended){var object=this._extended.object;var methods=this._extended.methods;for(var i=0;i<methods.length;i++){var method=methods[i];if(method.original){object[method.name]=method.original;}else{delete object[method.name];}}
this._extended=null;}};Queue.prototype.replace=function(object,method){var me=this;var original=object[method];if(!original){throw new Error('Method '+method+' undefined');}
object[method]=function(){var args=[];for(var i=0;i<arguments.length;i++){args[i]=arguments[i];}
me.queue({args:args,fn:original,context:this});};};Queue.prototype.queue=function(entry){if(typeof entry==='function'){this._queue.push({fn:entry});}else{this._queue.push(entry);}
this._flushIfNeeded();};Queue.prototype._flushIfNeeded=function(){if(this._queue.length>this.max){this.flush();}
clearTimeout(this._timeout);if(this.queue.length>0&&typeof this.delay==='number'){var me=this;this._timeout=setTimeout(function(){me.flush();},this.delay);}};Queue.prototype.flush=function(){while(this._queue.length>0){var entry=this._queue.shift();entry.fn.apply(entry.context||entry.fn,entry.args||[]);}};module.exports=Queue;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var DataSet=__webpack_require__(8);function DataView(data,options){this._data=null;this._ids={};this.length=0;this._options=options||{};this._fieldId='id';this._subscribers={};var me=this;this.listener=function(){me._onEvent.apply(me,arguments);};this.setData(data);}
DataView.prototype.setData=function(data){var ids,i,len;if(this._data){if(this._data.off){this._data.off('*',this.listener);}
ids=[];for(var id in this._ids){if(this._ids.hasOwnProperty(id)){ids.push(id);}}
this._ids={};this.length=0;this._trigger('remove',{items:ids});}
this._data=data;if(this._data){this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||'id';ids=this._data.getIds({filter:this._options&&this._options.filter});for(i=0,len=ids.length;i<len;i++){id=ids[i];this._ids[id]=true;}
this.length=ids.length;this._trigger('add',{items:ids});if(this._data.on){this._data.on('*',this.listener);}}};DataView.prototype.refresh=function(){var id;var ids=this._data.getIds({filter:this._options&&this._options.filter});var newIds={};var added=[];var removed=[];for(var i=0;i<ids.length;i++){id=ids[i];newIds[id]=true;if(!this._ids[id]){added.push(id);this._ids[id]=true;this.length++;}}
for(id in this._ids){if(this._ids.hasOwnProperty(id)){if(!newIds[id]){removed.push(id);delete this._ids[id];this.length--;}}}
if(added.length){this._trigger('add',{items:added});}
if(removed.length){this._trigger('remove',{items:removed});}};DataView.prototype.get=function(args){var me=this;var ids,options,data;var firstType=util.getType(arguments[0]);if(firstType=='String'||firstType=='Number'||firstType=='Array'){ids=arguments[0];options=arguments[1];data=arguments[2];}else{options=arguments[0];data=arguments[1];}
var viewOptions=util.extend({},this._options,options);if(this._options.filter&&options&&options.filter){viewOptions.filter=function(item){return me._options.filter(item)&&options.filter(item);};}
var getArguments=[];if(ids!=undefined){getArguments.push(ids);}
getArguments.push(viewOptions);getArguments.push(data);return this._data&&this._data.get.apply(this._data,getArguments);};DataView.prototype.getIds=function(options){var ids;if(this._data){var defaultFilter=this._options.filter;var filter;if(options&&options.filter){if(defaultFilter){filter=function(item){return defaultFilter(item)&&options.filter(item);};}else{filter=options.filter;}}else{filter=defaultFilter;}
ids=this._data.getIds({filter:filter,order:options&&options.order});}else{ids=[];}
return ids;};DataView.prototype.getDataSet=function(){var dataSet=this;while(dataSet instanceof DataView){dataSet=dataSet._data;}
return dataSet||null;};DataView.prototype._onEvent=function(event,params,senderId){var i,len,id,item;var ids=params&&params.items;var data=this._data;var updatedData=[];var added=[];var updated=[];var removed=[];if(ids&&data){switch(event){case'add':for(i=0,len=ids.length;i<len;i++){id=ids[i];item=this.get(id);if(item){this._ids[id]=true;added.push(id);}}
break;case'update':for(i=0,len=ids.length;i<len;i++){id=ids[i];item=this.get(id);if(item){if(this._ids[id]){updated.push(id);updatedData.push(params.data[i]);}else{this._ids[id]=true;added.push(id);}}else{if(this._ids[id]){delete this._ids[id];removed.push(id);}else{}}}
break;case'remove':for(i=0,len=ids.length;i<len;i++){id=ids[i];if(this._ids[id]){delete this._ids[id];removed.push(id);}}
break;}
this.length+=added.length-removed.length;if(added.length){this._trigger('add',{items:added},senderId);}
if(updated.length){this._trigger('update',{items:updated,data:updatedData},senderId);}
if(removed.length){this._trigger('remove',{items:removed},senderId);}}};DataView.prototype.on=DataSet.prototype.on;DataView.prototype.off=DataSet.prototype.off;DataView.prototype._trigger=DataSet.prototype._trigger;DataView.prototype.subscribe=DataView.prototype.on;DataView.prototype.unsubscribe=DataView.prototype.off;module.exports=DataView;},function(module,exports,__webpack_require__){'use strict';var Emitter=__webpack_require__(13);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var util=__webpack_require__(1);var Point3d=__webpack_require__(14);var Point2d=__webpack_require__(12);var Camera=__webpack_require__(15);var Filter=__webpack_require__(16);var Slider=__webpack_require__(17);var StepNumber=__webpack_require__(18);function Graph3d(container,data,options){if(!(this instanceof Graph3d)){throw new SyntaxError('Constructor must be called with the new operator');}
this.containerElement=container;this.width='400px';this.height='400px';this.margin=10;this.defaultXCenter='55%';this.defaultYCenter='50%';this.xLabel='x';this.yLabel='y';this.zLabel='z';var passValueFn=function passValueFn(v){return v;};this.xValueLabel=passValueFn;this.yValueLabel=passValueFn;this.zValueLabel=passValueFn;this.filterLabel='time';this.legendLabel='value';this.style=Graph3d.STYLE.DOT;this.showPerspective=true;this.showGrid=true;this.keepAspectRatio=true;this.showShadow=false;this.showGrayBottom=false;this.showTooltip=false;this.verticalRatio=0.5;this.animationInterval=1000;this.animationPreload=false;this.camera=new Camera();this.eye=new Point3d(0,0,-1);this.dataTable=null;this.dataPoints=null;this.colX=undefined;this.colY=undefined;this.colZ=undefined;this.colValue=undefined;this.colFilter=undefined;this.xMin=0;this.xStep=undefined;this.xMax=1;this.yMin=0;this.yStep=undefined;this.yMax=1;this.zMin=0;this.zStep=undefined;this.zMax=1;this.valueMin=0;this.valueMax=1;this.xBarWidth=1;this.yBarWidth=1;this.colorAxis='#4D4D4D';this.colorGrid='#D3D3D3';this.colorDot='#7DC1FF';this.colorDotBorder='#3267D2';this.create();this.setOptions(options);if(data){this.setData(data);}}
Emitter(Graph3d.prototype);Graph3d.prototype._setScale=function(){this.scale=new Point3d(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin));if(this.keepAspectRatio){if(this.scale.x<this.scale.y){this.scale.y=this.scale.x;}else{this.scale.x=this.scale.y;}}
this.scale.z*=this.verticalRatio;this.scale.value=1/(this.valueMax-this.valueMin);var xCenter=(this.xMax+this.xMin)/2*this.scale.x;var yCenter=(this.yMax+this.yMin)/2*this.scale.y;var zCenter=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(xCenter,yCenter,zCenter);};Graph3d.prototype._convert3Dto2D=function(point3d){var translation=this._convertPointToTranslation(point3d);return this._convertTranslationToScreen(translation);};Graph3d.prototype._convertPointToTranslation=function(point3d){var ax=point3d.x*this.scale.x,ay=point3d.y*this.scale.y,az=point3d.z*this.scale.z,cx=this.camera.getCameraLocation().x,cy=this.camera.getCameraLocation().y,cz=this.camera.getCameraLocation().z,sinTx=Math.sin(this.camera.getCameraRotation().x),cosTx=Math.cos(this.camera.getCameraRotation().x),sinTy=Math.sin(this.camera.getCameraRotation().y),cosTy=Math.cos(this.camera.getCameraRotation().y),sinTz=Math.sin(this.camera.getCameraRotation().z),cosTz=Math.cos(this.camera.getCameraRotation().z),dx=cosTy*(sinTz*(ay-cy)+cosTz*(ax-cx))-sinTy*(az-cz),dy=sinTx*(cosTy*(az-cz)+sinTy*(sinTz*(ay-cy)+cosTz*(ax-cx)))+cosTx*(cosTz*(ay-cy)-sinTz*(ax-cx)),dz=cosTx*(cosTy*(az-cz)+sinTy*(sinTz*(ay-cy)+cosTz*(ax-cx)))-sinTx*(cosTz*(ay-cy)-sinTz*(ax-cx));return new Point3d(dx,dy,dz);};Graph3d.prototype._convertTranslationToScreen=function(translation){var ex=this.eye.x,ey=this.eye.y,ez=this.eye.z,dx=translation.x,dy=translation.y,dz=translation.z;var bx;var by;if(this.showPerspective){bx=(dx-ex)*(ez/dz);by=(dy-ey)*(ez/dz);}else{bx=dx*-(ez/this.camera.getArmLength());by=dy*-(ez/this.camera.getArmLength());}
return new Point2d(this.xcenter+bx*this.frame.canvas.clientWidth,this.ycenter-by*this.frame.canvas.clientWidth);};Graph3d.prototype._setBackgroundColor=function(backgroundColor){var fill='white';var stroke='gray';var strokeWidth=1;if(typeof backgroundColor==='string'){fill=backgroundColor;stroke='none';strokeWidth=0;}else if(typeof backgroundColor==='object'){if(backgroundColor.fill!==undefined)fill=backgroundColor.fill;if(backgroundColor.stroke!==undefined)stroke=backgroundColor.stroke;if(backgroundColor.strokeWidth!==undefined)strokeWidth=backgroundColor.strokeWidth;}else if(backgroundColor===undefined){}else{throw'Unsupported type of backgroundColor';}
this.frame.style.backgroundColor=fill;this.frame.style.borderColor=stroke;this.frame.style.borderWidth=strokeWidth+'px';this.frame.style.borderStyle='solid';};Graph3d.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9};Graph3d.prototype._getStyleNumber=function(styleName){switch(styleName){case'dot':return Graph3d.STYLE.DOT;case'dot-line':return Graph3d.STYLE.DOTLINE;case'dot-color':return Graph3d.STYLE.DOTCOLOR;case'dot-size':return Graph3d.STYLE.DOTSIZE;case'line':return Graph3d.STYLE.LINE;case'grid':return Graph3d.STYLE.GRID;case'surface':return Graph3d.STYLE.SURFACE;case'bar':return Graph3d.STYLE.BAR;case'bar-color':return Graph3d.STYLE.BARCOLOR;case'bar-size':return Graph3d.STYLE.BARSIZE;}
return-1;};Graph3d.prototype._determineColumnIndexes=function(data,style){if(this.style===Graph3d.STYLE.DOT||this.style===Graph3d.STYLE.DOTLINE||this.style===Graph3d.STYLE.LINE||this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE||this.style===Graph3d.STYLE.BAR){this.colX=0;this.colY=1;this.colZ=2;this.colValue=undefined;if(data.getNumberOfColumns()>3){this.colFilter=3;}}else if(this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE){this.colX=0;this.colY=1;this.colZ=2;this.colValue=3;if(data.getNumberOfColumns()>4){this.colFilter=4;}}else{throw'Unknown style "'+this.style+'"';}};Graph3d.prototype.getNumberOfRows=function(data){return data.length;};Graph3d.prototype.getNumberOfColumns=function(data){var counter=0;for(var column in data[0]){if(data[0].hasOwnProperty(column)){counter++;}}
return counter;};Graph3d.prototype.getDistinctValues=function(data,column){var distinctValues=[];for(var i=0;i<data.length;i++){if(distinctValues.indexOf(data[i][column])==-1){distinctValues.push(data[i][column]);}}
return distinctValues;};Graph3d.prototype.getColumnRange=function(data,column){var minMax={min:data[0][column],max:data[0][column]};for(var i=0;i<data.length;i++){if(minMax.min>data[i][column]){minMax.min=data[i][column];}
if(minMax.max<data[i][column]){minMax.max=data[i][column];}}
return minMax;};Graph3d.prototype._dataInitialize=function(rawData,style){var me=this;if(this.dataSet){this.dataSet.off('*',this._onChange);}
if(rawData===undefined)return;if(Array.isArray(rawData)){rawData=new DataSet(rawData);}
var data;if(rawData instanceof DataSet||rawData instanceof DataView){data=rawData.get();}else{throw new Error('Array, DataSet, or DataView expected');}
if(data.length==0)return;this.dataSet=rawData;this.dataTable=data;this._onChange=function(){me.setData(me.dataSet);};this.dataSet.on('*',this._onChange);this.colX='x';this.colY='y';this.colZ='z';this.colValue='style';this.colFilter='filter';if(data[0].hasOwnProperty('filter')){if(this.dataFilter===undefined){this.dataFilter=new Filter(rawData,this.colFilter,this);this.dataFilter.setOnLoadCallback(function(){me.redraw();});}}
var withBars=this.style==Graph3d.STYLE.BAR||this.style==Graph3d.STYLE.BARCOLOR||this.style==Graph3d.STYLE.BARSIZE;if(withBars){if(this.defaultXBarWidth!==undefined){this.xBarWidth=this.defaultXBarWidth;}else{var dataX=this.getDistinctValues(data,this.colX);this.xBarWidth=dataX[1]-dataX[0]||1;}
if(this.defaultYBarWidth!==undefined){this.yBarWidth=this.defaultYBarWidth;}else{var dataY=this.getDistinctValues(data,this.colY);this.yBarWidth=dataY[1]-dataY[0]||1;}}
var xRange=this.getColumnRange(data,this.colX);if(withBars){xRange.min-=this.xBarWidth/2;xRange.max+=this.xBarWidth/2;}
this.xMin=this.defaultXMin!==undefined?this.defaultXMin:xRange.min;this.xMax=this.defaultXMax!==undefined?this.defaultXMax:xRange.max;if(this.xMax<=this.xMin)this.xMax=this.xMin+1;this.xStep=this.defaultXStep!==undefined?this.defaultXStep:(this.xMax-this.xMin)/5;var yRange=this.getColumnRange(data,this.colY);if(withBars){yRange.min-=this.yBarWidth/2;yRange.max+=this.yBarWidth/2;}
this.yMin=this.defaultYMin!==undefined?this.defaultYMin:yRange.min;this.yMax=this.defaultYMax!==undefined?this.defaultYMax:yRange.max;if(this.yMax<=this.yMin)this.yMax=this.yMin+1;this.yStep=this.defaultYStep!==undefined?this.defaultYStep:(this.yMax-this.yMin)/5;var zRange=this.getColumnRange(data,this.colZ);this.zMin=this.defaultZMin!==undefined?this.defaultZMin:zRange.min;this.zMax=this.defaultZMax!==undefined?this.defaultZMax:zRange.max;if(this.zMax<=this.zMin)this.zMax=this.zMin+1;this.zStep=this.defaultZStep!==undefined?this.defaultZStep:(this.zMax-this.zMin)/5;if(this.colValue!==undefined){var valueRange=this.getColumnRange(data,this.colValue);this.valueMin=this.defaultValueMin!==undefined?this.defaultValueMin:valueRange.min;this.valueMax=this.defaultValueMax!==undefined?this.defaultValueMax:valueRange.max;if(this.valueMax<=this.valueMin)this.valueMax=this.valueMin+1;}
this._setScale();};Graph3d.prototype._getDataPoints=function(data){var x,y,i,z,obj,point;var dataPoints=[];if(this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE){var dataX=[];var dataY=[];for(i=0;i<this.getNumberOfRows(data);i++){x=data[i][this.colX]||0;y=data[i][this.colY]||0;if(dataX.indexOf(x)===-1){dataX.push(x);}
if(dataY.indexOf(y)===-1){dataY.push(y);}}
var sortNumber=function sortNumber(a,b){return a-b;};dataX.sort(sortNumber);dataY.sort(sortNumber);var dataMatrix=[];for(i=0;i<data.length;i++){x=data[i][this.colX]||0;y=data[i][this.colY]||0;z=data[i][this.colZ]||0;var xIndex=dataX.indexOf(x);var yIndex=dataY.indexOf(y);if(dataMatrix[xIndex]===undefined){dataMatrix[xIndex]=[];}
var point3d=new Point3d();point3d.x=x;point3d.y=y;point3d.z=z;obj={};obj.point=point3d;obj.trans=undefined;obj.screen=undefined;obj.bottom=new Point3d(x,y,this.zMin);dataMatrix[xIndex][yIndex]=obj;dataPoints.push(obj);}
for(x=0;x<dataMatrix.length;x++){for(y=0;y<dataMatrix[x].length;y++){if(dataMatrix[x][y]){dataMatrix[x][y].pointRight=x<dataMatrix.length-1?dataMatrix[x+1][y]:undefined;dataMatrix[x][y].pointTop=y<dataMatrix[x].length-1?dataMatrix[x][y+1]:undefined;dataMatrix[x][y].pointCross=x<dataMatrix.length-1&&y<dataMatrix[x].length-1?dataMatrix[x+1][y+1]:undefined;}}}}else{for(i=0;i<data.length;i++){point=new Point3d();point.x=data[i][this.colX]||0;point.y=data[i][this.colY]||0;point.z=data[i][this.colZ]||0;if(this.colValue!==undefined){point.value=data[i][this.colValue]||0;}
obj={};obj.point=point;obj.bottom=new Point3d(point.x,point.y,this.zMin);obj.trans=undefined;obj.screen=undefined;dataPoints.push(obj);}}
return dataPoints;};Graph3d.prototype.create=function(){while(this.containerElement.hasChildNodes()){this.containerElement.removeChild(this.containerElement.firstChild);}
this.frame=document.createElement('div');this.frame.style.position='relative';this.frame.style.overflow='hidden';this.frame.canvas=document.createElement('canvas');this.frame.canvas.style.position='relative';this.frame.appendChild(this.frame.canvas);{var noCanvas=document.createElement('DIV');noCanvas.style.color='red';noCanvas.style.fontWeight='bold';noCanvas.style.padding='10px';noCanvas.innerHTML='Error: your browser does not support HTML canvas';this.frame.canvas.appendChild(noCanvas);}
this.frame.filter=document.createElement('div');this.frame.filter.style.position='absolute';this.frame.filter.style.bottom='0px';this.frame.filter.style.left='0px';this.frame.filter.style.width='100%';this.frame.appendChild(this.frame.filter);var me=this;var onmousedown=function onmousedown(event){me._onMouseDown(event);};var ontouchstart=function ontouchstart(event){me._onTouchStart(event);};var onmousewheel=function onmousewheel(event){me._onWheel(event);};var ontooltip=function ontooltip(event){me._onTooltip(event);};util.addEventListener(this.frame.canvas,'keydown',onkeydown);util.addEventListener(this.frame.canvas,'mousedown',onmousedown);util.addEventListener(this.frame.canvas,'touchstart',ontouchstart);util.addEventListener(this.frame.canvas,'mousewheel',onmousewheel);util.addEventListener(this.frame.canvas,'mousemove',ontooltip);this.containerElement.appendChild(this.frame);};Graph3d.prototype.setSize=function(width,height){this.frame.style.width=width;this.frame.style.height=height;this._resizeCanvas();};Graph3d.prototype._resizeCanvas=function(){this.frame.canvas.style.width='100%';this.frame.canvas.style.height='100%';this.frame.canvas.width=this.frame.canvas.clientWidth;this.frame.canvas.height=this.frame.canvas.clientHeight;this.frame.filter.style.width=this.frame.canvas.clientWidth-2*10+'px';};Graph3d.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw'No animation available';this.frame.filter.slider.play();};Graph3d.prototype.animationStop=function(){if(!this.frame.filter||!this.frame.filter.slider)return;this.frame.filter.slider.stop();};Graph3d.prototype._resizeCenter=function(){if(this.defaultXCenter.charAt(this.defaultXCenter.length-1)==='%'){this.xcenter=parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth;}else{this.xcenter=parseFloat(this.defaultXCenter);}
if(this.defaultYCenter.charAt(this.defaultYCenter.length-1)==='%'){this.ycenter=parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight);}else{this.ycenter=parseFloat(this.defaultYCenter);}};Graph3d.prototype.setCameraPosition=function(pos){if(pos===undefined){return;}
if(pos.horizontal!==undefined&&pos.vertical!==undefined){this.camera.setArmRotation(pos.horizontal,pos.vertical);}
if(pos.distance!==undefined){this.camera.setArmLength(pos.distance);}
this.redraw();};Graph3d.prototype.getCameraPosition=function(){var pos=this.camera.getArmRotation();pos.distance=this.camera.getArmLength();return pos;};Graph3d.prototype._readData=function(data){this._dataInitialize(data,this.style);if(this.dataFilter){this.dataPoints=this.dataFilter._getDataPoints();}else{this.dataPoints=this._getDataPoints(this.dataTable);}
this._redrawFilter();};Graph3d.prototype.setData=function(data){this._readData(data);this.redraw();if(this.animationAutoStart&&this.dataFilter){this.animationStart();}};Graph3d.prototype.setOptions=function(options){var cameraPosition=undefined;this.animationStop();if(options!==undefined){if(options.width!==undefined)this.width=options.width;if(options.height!==undefined)this.height=options.height;if(options.xCenter!==undefined)this.defaultXCenter=options.xCenter;if(options.yCenter!==undefined)this.defaultYCenter=options.yCenter;if(options.filterLabel!==undefined)this.filterLabel=options.filterLabel;if(options.legendLabel!==undefined)this.legendLabel=options.legendLabel;if(options.xLabel!==undefined)this.xLabel=options.xLabel;if(options.yLabel!==undefined)this.yLabel=options.yLabel;if(options.zLabel!==undefined)this.zLabel=options.zLabel;if(options.xValueLabel!==undefined)this.xValueLabel=options.xValueLabel;if(options.yValueLabel!==undefined)this.yValueLabel=options.yValueLabel;if(options.zValueLabel!==undefined)this.zValueLabel=options.zValueLabel;if(options.style!==undefined){var styleNumber=this._getStyleNumber(options.style);if(styleNumber!==-1){this.style=styleNumber;}}
if(options.showGrid!==undefined)this.showGrid=options.showGrid;if(options.showPerspective!==undefined)this.showPerspective=options.showPerspective;if(options.showShadow!==undefined)this.showShadow=options.showShadow;if(options.tooltip!==undefined)this.showTooltip=options.tooltip;if(options.showAnimationControls!==undefined)this.showAnimationControls=options.showAnimationControls;if(options.keepAspectRatio!==undefined)this.keepAspectRatio=options.keepAspectRatio;if(options.verticalRatio!==undefined)this.verticalRatio=options.verticalRatio;if(options.animationInterval!==undefined)this.animationInterval=options.animationInterval;if(options.animationPreload!==undefined)this.animationPreload=options.animationPreload;if(options.animationAutoStart!==undefined)this.animationAutoStart=options.animationAutoStart;if(options.xBarWidth!==undefined)this.defaultXBarWidth=options.xBarWidth;if(options.yBarWidth!==undefined)this.defaultYBarWidth=options.yBarWidth;if(options.xMin!==undefined)this.defaultXMin=options.xMin;if(options.xStep!==undefined)this.defaultXStep=options.xStep;if(options.xMax!==undefined)this.defaultXMax=options.xMax;if(options.yMin!==undefined)this.defaultYMin=options.yMin;if(options.yStep!==undefined)this.defaultYStep=options.yStep;if(options.yMax!==undefined)this.defaultYMax=options.yMax;if(options.zMin!==undefined)this.defaultZMin=options.zMin;if(options.zStep!==undefined)this.defaultZStep=options.zStep;if(options.zMax!==undefined)this.defaultZMax=options.zMax;if(options.valueMin!==undefined)this.defaultValueMin=options.valueMin;if(options.valueMax!==undefined)this.defaultValueMax=options.valueMax;if(options.cameraPosition!==undefined)cameraPosition=options.cameraPosition;if(cameraPosition!==undefined){this.camera.setArmRotation(cameraPosition.horizontal,cameraPosition.vertical);this.camera.setArmLength(cameraPosition.distance);}else{this.camera.setArmRotation(1,0.5);this.camera.setArmLength(1.7);}}
this._setBackgroundColor(options&&options.backgroundColor);this.setSize(this.width,this.height);if(this.dataTable){this.setData(this.dataTable);}
if(this.animationAutoStart&&this.dataFilter){this.animationStart();}};Graph3d.prototype.redraw=function(){if(this.dataPoints===undefined){throw'Error: graph data not initialized';}
this._resizeCanvas();this._resizeCenter();this._redrawSlider();this._redrawClear();this._redrawAxis();if(this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE){this._redrawDataGrid();}else if(this.style===Graph3d.STYLE.LINE){this._redrawDataLine();}else if(this.style===Graph3d.STYLE.BAR||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE){this._redrawDataBar();}else{this._redrawDataDot();}
this._redrawInfo();this._redrawLegend();};Graph3d.prototype._redrawClear=function(){var canvas=this.frame.canvas;var ctx=canvas.getContext('2d');ctx.clearRect(0,0,canvas.width,canvas.height);};Graph3d.prototype._redrawLegend=function(){var y;if(this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE){var dotSize=this.frame.clientWidth*0.02;var widthMin,widthMax;if(this.style===Graph3d.STYLE.DOTSIZE){widthMin=dotSize/2;widthMax=dotSize/2+dotSize*2;}else{widthMin=20;widthMax=20;}
var height=Math.max(this.frame.clientHeight*0.25,100);var top=this.margin;var right=this.frame.clientWidth-this.margin;var left=right-widthMax;var bottom=top+height;}
var canvas=this.frame.canvas;var ctx=canvas.getContext('2d');ctx.lineWidth=1;ctx.font='14px arial';if(this.style===Graph3d.STYLE.DOTCOLOR){var ymin=0;var ymax=height;for(y=ymin;y<ymax;y++){var f=(y-ymin)/(ymax-ymin);var hue=f*240;var color=this._hsv2rgb(hue,1,1);ctx.strokeStyle=color;ctx.beginPath();ctx.moveTo(left,top+y);ctx.lineTo(right,top+y);ctx.stroke();}
ctx.strokeStyle=this.colorAxis;ctx.strokeRect(left,top,widthMax,height);}
if(this.style===Graph3d.STYLE.DOTSIZE){ctx.strokeStyle=this.colorAxis;ctx.fillStyle=this.colorDot;ctx.beginPath();ctx.moveTo(left,top);ctx.lineTo(right,top);ctx.lineTo(right-widthMax+widthMin,bottom);ctx.lineTo(left,bottom);ctx.closePath();ctx.fill();ctx.stroke();}
if(this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE){var gridLineLen=5;var step=new StepNumber(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,true);step.start();if(step.getCurrent()<this.valueMin){step.next();}
while(!step.end()){y=bottom-(step.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*height;ctx.beginPath();ctx.moveTo(left-gridLineLen,y);ctx.lineTo(left,y);ctx.stroke();ctx.textAlign='right';ctx.textBaseline='middle';ctx.fillStyle=this.colorAxis;ctx.fillText(step.getCurrent(),left-2*gridLineLen,y);step.next();}
ctx.textAlign='right';ctx.textBaseline='top';var label=this.legendLabel;ctx.fillText(label,right,bottom+this.margin);}};Graph3d.prototype._redrawFilter=function(){this.frame.filter.innerHTML='';if(this.dataFilter){var options={'visible':this.showAnimationControls};var slider=new Slider(this.frame.filter,options);this.frame.filter.slider=slider;this.frame.filter.style.padding='10px';slider.setValues(this.dataFilter.values);slider.setPlayInterval(this.animationInterval);var me=this;var onchange=function onchange(){var index=slider.getIndex();me.dataFilter.selectValue(index);me.dataPoints=me.dataFilter._getDataPoints();me.redraw();};slider.setOnChangeCallback(onchange);}else{this.frame.filter.slider=undefined;}};Graph3d.prototype._redrawSlider=function(){if(this.frame.filter.slider!==undefined){this.frame.filter.slider.redraw();}};Graph3d.prototype._redrawInfo=function(){if(this.dataFilter){var canvas=this.frame.canvas;var ctx=canvas.getContext('2d');ctx.font='14px arial';ctx.lineStyle='gray';ctx.fillStyle='gray';ctx.textAlign='left';ctx.textBaseline='top';var x=this.margin;var y=this.margin;ctx.fillText(this.dataFilter.getLabel()+': '+this.dataFilter.getSelectedValue(),x,y);}};Graph3d.prototype._redrawAxis=function(){var canvas=this.frame.canvas,ctx=canvas.getContext('2d'),from,to,step,prettyStep,text,xText,yText,zText,offset,xOffset,yOffset,xMin2d,xMax2d;ctx.font=24/this.camera.getArmLength()+'px arial';var gridLenX=0.025/this.scale.x;var gridLenY=0.025/this.scale.y;var textMargin=5/this.camera.getArmLength();var armAngle=this.camera.getArmRotation().horizontal;ctx.lineWidth=1;prettyStep=this.defaultXStep===undefined;step=new StepNumber(this.xMin,this.xMax,this.xStep,prettyStep);step.start();if(step.getCurrent()<this.xMin){step.next();}
while(!step.end()){var x=step.getCurrent();if(this.showGrid){from=this._convert3Dto2D(new Point3d(x,this.yMin,this.zMin));to=this._convert3Dto2D(new Point3d(x,this.yMax,this.zMin));ctx.strokeStyle=this.colorGrid;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();}else{from=this._convert3Dto2D(new Point3d(x,this.yMin,this.zMin));to=this._convert3Dto2D(new Point3d(x,this.yMin+gridLenX,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();from=this._convert3Dto2D(new Point3d(x,this.yMax,this.zMin));to=this._convert3Dto2D(new Point3d(x,this.yMax-gridLenX,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();}
yText=Math.cos(armAngle)>0?this.yMin:this.yMax;text=this._convert3Dto2D(new Point3d(x,yText,this.zMin));if(Math.cos(armAngle*2)>0){ctx.textAlign='center';ctx.textBaseline='top';text.y+=textMargin;}else if(Math.sin(armAngle*2)<0){ctx.textAlign='right';ctx.textBaseline='middle';}else{ctx.textAlign='left';ctx.textBaseline='middle';}
ctx.fillStyle=this.colorAxis;ctx.fillText('  '+this.xValueLabel(step.getCurrent())+'  ',text.x,text.y);step.next();}
ctx.lineWidth=1;prettyStep=this.defaultYStep===undefined;step=new StepNumber(this.yMin,this.yMax,this.yStep,prettyStep);step.start();if(step.getCurrent()<this.yMin){step.next();}
while(!step.end()){if(this.showGrid){from=this._convert3Dto2D(new Point3d(this.xMin,step.getCurrent(),this.zMin));to=this._convert3Dto2D(new Point3d(this.xMax,step.getCurrent(),this.zMin));ctx.strokeStyle=this.colorGrid;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();}else{from=this._convert3Dto2D(new Point3d(this.xMin,step.getCurrent(),this.zMin));to=this._convert3Dto2D(new Point3d(this.xMin+gridLenY,step.getCurrent(),this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();from=this._convert3Dto2D(new Point3d(this.xMax,step.getCurrent(),this.zMin));to=this._convert3Dto2D(new Point3d(this.xMax-gridLenY,step.getCurrent(),this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();}
xText=Math.sin(armAngle)>0?this.xMin:this.xMax;text=this._convert3Dto2D(new Point3d(xText,step.getCurrent(),this.zMin));if(Math.cos(armAngle*2)<0){ctx.textAlign='center';ctx.textBaseline='top';text.y+=textMargin;}else if(Math.sin(armAngle*2)>0){ctx.textAlign='right';ctx.textBaseline='middle';}else{ctx.textAlign='left';ctx.textBaseline='middle';}
ctx.fillStyle=this.colorAxis;ctx.fillText('  '+this.yValueLabel(step.getCurrent())+'  ',text.x,text.y);step.next();}
ctx.lineWidth=1;prettyStep=this.defaultZStep===undefined;step=new StepNumber(this.zMin,this.zMax,this.zStep,prettyStep);step.start();if(step.getCurrent()<this.zMin){step.next();}
xText=Math.cos(armAngle)>0?this.xMin:this.xMax;yText=Math.sin(armAngle)<0?this.yMin:this.yMax;while(!step.end()){from=this._convert3Dto2D(new Point3d(xText,yText,step.getCurrent()));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(from.x-textMargin,from.y);ctx.stroke();ctx.textAlign='right';ctx.textBaseline='middle';ctx.fillStyle=this.colorAxis;ctx.fillText(this.zValueLabel(step.getCurrent())+' ',from.x-5,from.y);step.next();}
ctx.lineWidth=1;from=this._convert3Dto2D(new Point3d(xText,yText,this.zMin));to=this._convert3Dto2D(new Point3d(xText,yText,this.zMax));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();ctx.lineWidth=1;xMin2d=this._convert3Dto2D(new Point3d(this.xMin,this.yMin,this.zMin));xMax2d=this._convert3Dto2D(new Point3d(this.xMax,this.yMin,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(xMin2d.x,xMin2d.y);ctx.lineTo(xMax2d.x,xMax2d.y);ctx.stroke();xMin2d=this._convert3Dto2D(new Point3d(this.xMin,this.yMax,this.zMin));xMax2d=this._convert3Dto2D(new Point3d(this.xMax,this.yMax,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(xMin2d.x,xMin2d.y);ctx.lineTo(xMax2d.x,xMax2d.y);ctx.stroke();ctx.lineWidth=1;from=this._convert3Dto2D(new Point3d(this.xMin,this.yMin,this.zMin));to=this._convert3Dto2D(new Point3d(this.xMin,this.yMax,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();from=this._convert3Dto2D(new Point3d(this.xMax,this.yMin,this.zMin));to=this._convert3Dto2D(new Point3d(this.xMax,this.yMax,this.zMin));ctx.strokeStyle=this.colorAxis;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(to.x,to.y);ctx.stroke();var xLabel=this.xLabel;if(xLabel.length>0){yOffset=0.1/this.scale.y;xText=(this.xMin+this.xMax)/2;yText=Math.cos(armAngle)>0?this.yMin-yOffset:this.yMax+yOffset;text=this._convert3Dto2D(new Point3d(xText,yText,this.zMin));if(Math.cos(armAngle*2)>0){ctx.textAlign='center';ctx.textBaseline='top';}else if(Math.sin(armAngle*2)<0){ctx.textAlign='right';ctx.textBaseline='middle';}else{ctx.textAlign='left';ctx.textBaseline='middle';}
ctx.fillStyle=this.colorAxis;ctx.fillText(xLabel,text.x,text.y);}
var yLabel=this.yLabel;if(yLabel.length>0){xOffset=0.1/this.scale.x;xText=Math.sin(armAngle)>0?this.xMin-xOffset:this.xMax+xOffset;yText=(this.yMin+this.yMax)/2;text=this._convert3Dto2D(new Point3d(xText,yText,this.zMin));if(Math.cos(armAngle*2)<0){ctx.textAlign='center';ctx.textBaseline='top';}else if(Math.sin(armAngle*2)>0){ctx.textAlign='right';ctx.textBaseline='middle';}else{ctx.textAlign='left';ctx.textBaseline='middle';}
ctx.fillStyle=this.colorAxis;ctx.fillText(yLabel,text.x,text.y);}
var zLabel=this.zLabel;if(zLabel.length>0){offset=30;xText=Math.cos(armAngle)>0?this.xMin:this.xMax;yText=Math.sin(armAngle)<0?this.yMin:this.yMax;zText=(this.zMin+this.zMax)/2;text=this._convert3Dto2D(new Point3d(xText,yText,zText));ctx.textAlign='right';ctx.textBaseline='middle';ctx.fillStyle=this.colorAxis;ctx.fillText(zLabel,text.x-offset,text.y);}};Graph3d.prototype._hsv2rgb=function(H,S,V){var R,G,B,C,Hi,X;C=V*S;Hi=Math.floor(H/60);X=C*(1-Math.abs(H/60%2-1));switch(Hi){case 0:R=C;G=X;B=0;break;case 1:R=X;G=C;B=0;break;case 2:R=0;G=C;B=X;break;case 3:R=0;G=X;B=C;break;case 4:R=X;G=0;B=C;break;case 5:R=C;G=0;B=X;break;default:R=0;G=0;B=0;break;}
return'RGB('+parseInt(R*255)+','+parseInt(G*255)+','+parseInt(B*255)+')';};Graph3d.prototype._redrawDataGrid=function(){var canvas=this.frame.canvas,ctx=canvas.getContext('2d'),point,right,top,cross,i,topSideVisible,fillStyle,strokeStyle,lineWidth,h,s,v,zAvg;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point);var screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans;this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z;}
var sortDepth=function sortDepth(a,b){return b.dist-a.dist;};this.dataPoints.sort(sortDepth);if(this.style===Graph3d.STYLE.SURFACE){for(i=0;i<this.dataPoints.length;i++){point=this.dataPoints[i];right=this.dataPoints[i].pointRight;top=this.dataPoints[i].pointTop;cross=this.dataPoints[i].pointCross;if(point!==undefined&&right!==undefined&&top!==undefined&&cross!==undefined){if(this.showGrayBottom||this.showShadow){var aDiff=Point3d.subtract(cross.trans,point.trans);var bDiff=Point3d.subtract(top.trans,right.trans);var crossproduct=Point3d.crossProduct(aDiff,bDiff);var len=crossproduct.length();topSideVisible=crossproduct.z>0;}else{topSideVisible=true;}
if(topSideVisible){zAvg=(point.point.z+right.point.z+top.point.z+cross.point.z)/4;h=(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio)*240;s=1;if(this.showShadow){v=Math.min(1+crossproduct.x/len/2,1);fillStyle=this._hsv2rgb(h,s,v);strokeStyle=fillStyle;}else{v=1;fillStyle=this._hsv2rgb(h,s,v);strokeStyle=this.colorAxis;}}else{fillStyle='gray';strokeStyle=this.colorAxis;}
lineWidth=0.5;ctx.lineWidth=lineWidth;ctx.fillStyle=fillStyle;ctx.strokeStyle=strokeStyle;ctx.beginPath();ctx.moveTo(point.screen.x,point.screen.y);ctx.lineTo(right.screen.x,right.screen.y);ctx.lineTo(cross.screen.x,cross.screen.y);ctx.lineTo(top.screen.x,top.screen.y);ctx.closePath();ctx.fill();ctx.stroke();}}}else{for(i=0;i<this.dataPoints.length;i++){point=this.dataPoints[i];right=this.dataPoints[i].pointRight;top=this.dataPoints[i].pointTop;if(point!==undefined){if(this.showPerspective){lineWidth=2/-point.trans.z;}else{lineWidth=2*-(this.eye.z/this.camera.getArmLength());}}
if(point!==undefined&&right!==undefined){zAvg=(point.point.z+right.point.z)/2;h=(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio)*240;ctx.lineWidth=lineWidth;ctx.strokeStyle=this._hsv2rgb(h,1,1);ctx.beginPath();ctx.moveTo(point.screen.x,point.screen.y);ctx.lineTo(right.screen.x,right.screen.y);ctx.stroke();}
if(point!==undefined&&top!==undefined){zAvg=(point.point.z+top.point.z)/2;h=(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio)*240;ctx.lineWidth=lineWidth;ctx.strokeStyle=this._hsv2rgb(h,1,1);ctx.beginPath();ctx.moveTo(point.screen.x,point.screen.y);ctx.lineTo(top.screen.x,top.screen.y);ctx.stroke();}}}};Graph3d.prototype._redrawDataDot=function(){var canvas=this.frame.canvas;var ctx=canvas.getContext('2d');var i;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point);var screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans;this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z;}
var sortDepth=function sortDepth(a,b){return b.dist-a.dist;};this.dataPoints.sort(sortDepth);var dotSize=this.frame.clientWidth*0.02;for(i=0;i<this.dataPoints.length;i++){var point=this.dataPoints[i];if(this.style===Graph3d.STYLE.DOTLINE){var from=this._convert3Dto2D(point.bottom);ctx.lineWidth=1;ctx.strokeStyle=this.colorGrid;ctx.beginPath();ctx.moveTo(from.x,from.y);ctx.lineTo(point.screen.x,point.screen.y);ctx.stroke();}
var size;if(this.style===Graph3d.STYLE.DOTSIZE){size=dotSize/2+2*dotSize*(point.point.value-this.valueMin)/(this.valueMax-this.valueMin);}else{size=dotSize;}
var radius;if(this.showPerspective){radius=size/-point.trans.z;}else{radius=size*-(this.eye.z/this.camera.getArmLength());}
if(radius<0){radius=0;}
var hue,color,borderColor;if(this.style===Graph3d.STYLE.DOTCOLOR){hue=(1-(point.point.value-this.valueMin)*this.scale.value)*240;color=this._hsv2rgb(hue,1,1);borderColor=this._hsv2rgb(hue,1,0.8);}else if(this.style===Graph3d.STYLE.DOTSIZE){color=this.colorDot;borderColor=this.colorDotBorder;}else{hue=(1-(point.point.z-this.zMin)*this.scale.z/this.verticalRatio)*240;color=this._hsv2rgb(hue,1,1);borderColor=this._hsv2rgb(hue,1,0.8);}
ctx.lineWidth=1;ctx.strokeStyle=borderColor;ctx.fillStyle=color;ctx.beginPath();ctx.arc(point.screen.x,point.screen.y,radius,0,Math.PI*2,true);ctx.fill();ctx.stroke();}};Graph3d.prototype._redrawDataBar=function(){var canvas=this.frame.canvas;var ctx=canvas.getContext('2d');var i,j,surface,corners;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point);var screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans;this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z;}
var sortDepth=function sortDepth(a,b){return b.dist-a.dist;};this.dataPoints.sort(sortDepth);var xWidth=this.xBarWidth/2;var yWidth=this.yBarWidth/2;for(i=0;i<this.dataPoints.length;i++){var point=this.dataPoints[i];var hue,color,borderColor;if(this.style===Graph3d.STYLE.BARCOLOR){hue=(1-(point.point.value-this.valueMin)*this.scale.value)*240;color=this._hsv2rgb(hue,1,1);borderColor=this._hsv2rgb(hue,1,0.8);}else if(this.style===Graph3d.STYLE.BARSIZE){color=this.colorDot;borderColor=this.colorDotBorder;}else{hue=(1-(point.point.z-this.zMin)*this.scale.z/this.verticalRatio)*240;color=this._hsv2rgb(hue,1,1);borderColor=this._hsv2rgb(hue,1,0.8);}
if(this.style===Graph3d.STYLE.BARSIZE){xWidth=this.xBarWidth/2*((point.point.value-this.valueMin)/(this.valueMax-this.valueMin)*0.8+0.2);yWidth=this.yBarWidth/2*((point.point.value-this.valueMin)/(this.valueMax-this.valueMin)*0.8+0.2);}
var me=this;var point3d=point.point;var top=[{point:new Point3d(point3d.x-xWidth,point3d.y-yWidth,point3d.z)},{point:new Point3d(point3d.x+xWidth,point3d.y-yWidth,point3d.z)},{point:new Point3d(point3d.x+xWidth,point3d.y+yWidth,point3d.z)},{point:new Point3d(point3d.x-xWidth,point3d.y+yWidth,point3d.z)}];var bottom=[{point:new Point3d(point3d.x-xWidth,point3d.y-yWidth,this.zMin)},{point:new Point3d(point3d.x+xWidth,point3d.y-yWidth,this.zMin)},{point:new Point3d(point3d.x+xWidth,point3d.y+yWidth,this.zMin)},{point:new Point3d(point3d.x-xWidth,point3d.y+yWidth,this.zMin)}];top.forEach(function(obj){obj.screen=me._convert3Dto2D(obj.point);});bottom.forEach(function(obj){obj.screen=me._convert3Dto2D(obj.point);});var surfaces=[{corners:top,center:Point3d.avg(bottom[0].point,bottom[2].point)},{corners:[top[0],top[1],bottom[1],bottom[0]],center:Point3d.avg(bottom[1].point,bottom[0].point)},{corners:[top[1],top[2],bottom[2],bottom[1]],center:Point3d.avg(bottom[2].point,bottom[1].point)},{corners:[top[2],top[3],bottom[3],bottom[2]],center:Point3d.avg(bottom[3].point,bottom[2].point)},{corners:[top[3],top[0],bottom[0],bottom[3]],center:Point3d.avg(bottom[0].point,bottom[3].point)}];point.surfaces=surfaces;for(j=0;j<surfaces.length;j++){surface=surfaces[j];var transCenter=this._convertPointToTranslation(surface.center);surface.dist=this.showPerspective?transCenter.length():-transCenter.z;}
surfaces.sort(function(a,b){var diff=b.dist-a.dist;if(diff)return diff;if(a.corners===top)return 1;if(b.corners===top)return-1;return 0;});ctx.lineWidth=1;ctx.strokeStyle=borderColor;ctx.fillStyle=color;for(j=2;j<surfaces.length;j++){surface=surfaces[j];corners=surface.corners;ctx.beginPath();ctx.moveTo(corners[3].screen.x,corners[3].screen.y);ctx.lineTo(corners[0].screen.x,corners[0].screen.y);ctx.lineTo(corners[1].screen.x,corners[1].screen.y);ctx.lineTo(corners[2].screen.x,corners[2].screen.y);ctx.lineTo(corners[3].screen.x,corners[3].screen.y);ctx.fill();ctx.stroke();}}};Graph3d.prototype._redrawDataLine=function(){var canvas=this.frame.canvas,ctx=canvas.getContext('2d'),point,i;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point);var screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans;this.dataPoints[i].screen=screen;}
if(this.dataPoints.length>0){point=this.dataPoints[0];ctx.lineWidth=1;ctx.strokeStyle='blue';ctx.beginPath();ctx.moveTo(point.screen.x,point.screen.y);}
for(i=1;i<this.dataPoints.length;i++){point=this.dataPoints[i];ctx.lineTo(point.screen.x,point.screen.y);}
if(this.dataPoints.length>0){ctx.stroke();}};Graph3d.prototype._onMouseDown=function(event){event=event||window.event;if(this.leftButtonDown){this._onMouseUp(event);}
this.leftButtonDown=event.which?event.which===1:event.button===1;if(!this.leftButtonDown&&!this.touchDown)return;this.startMouseX=getMouseX(event);this.startMouseY=getMouseY(event);this.startStart=new Date(this.start);this.startEnd=new Date(this.end);this.startArmRotation=this.camera.getArmRotation();this.frame.style.cursor='move';var me=this;this.onmousemove=function(event){me._onMouseMove(event);};this.onmouseup=function(event){me._onMouseUp(event);};util.addEventListener(document,'mousemove',me.onmousemove);util.addEventListener(document,'mouseup',me.onmouseup);util.preventDefault(event);};Graph3d.prototype._onMouseMove=function(event){event=event||window.event;var diffX=parseFloat(getMouseX(event))-this.startMouseX;var diffY=parseFloat(getMouseY(event))-this.startMouseY;var horizontalNew=this.startArmRotation.horizontal+diffX/200;var verticalNew=this.startArmRotation.vertical+diffY/200;var snapAngle=4;var snapValue=Math.sin(snapAngle/360*2*Math.PI);if(Math.abs(Math.sin(horizontalNew))<snapValue){horizontalNew=Math.round(horizontalNew/Math.PI)*Math.PI-0.001;}
if(Math.abs(Math.cos(horizontalNew))<snapValue){horizontalNew=(Math.round(horizontalNew/Math.PI-0.5)+0.5)*Math.PI-0.001;}
if(Math.abs(Math.sin(verticalNew))<snapValue){verticalNew=Math.round(verticalNew/Math.PI)*Math.PI;}
if(Math.abs(Math.cos(verticalNew))<snapValue){verticalNew=(Math.round(verticalNew/Math.PI-0.5)+0.5)*Math.PI;}
this.camera.setArmRotation(horizontalNew,verticalNew);this.redraw();var parameters=this.getCameraPosition();this.emit('cameraPositionChange',parameters);util.preventDefault(event);};Graph3d.prototype._onMouseUp=function(event){this.frame.style.cursor='auto';this.leftButtonDown=false;util.removeEventListener(document,'mousemove',this.onmousemove);util.removeEventListener(document,'mouseup',this.onmouseup);util.preventDefault(event);};Graph3d.prototype._onTooltip=function(event){var delay=300;var boundingRect=this.frame.getBoundingClientRect();var mouseX=getMouseX(event)-boundingRect.left;var mouseY=getMouseY(event)-boundingRect.top;if(!this.showTooltip){return;}
if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout);}
if(this.leftButtonDown){this._hideTooltip();return;}
if(this.tooltip&&this.tooltip.dataPoint){var dataPoint=this._dataPointFromXY(mouseX,mouseY);if(dataPoint!==this.tooltip.dataPoint){if(dataPoint){this._showTooltip(dataPoint);}else{this._hideTooltip();}}}else{var me=this;this.tooltipTimeout=setTimeout(function(){me.tooltipTimeout=null;var dataPoint=me._dataPointFromXY(mouseX,mouseY);if(dataPoint){me._showTooltip(dataPoint);}},delay);}};Graph3d.prototype._onTouchStart=function(event){this.touchDown=true;var me=this;this.ontouchmove=function(event){me._onTouchMove(event);};this.ontouchend=function(event){me._onTouchEnd(event);};util.addEventListener(document,'touchmove',me.ontouchmove);util.addEventListener(document,'touchend',me.ontouchend);this._onMouseDown(event);};Graph3d.prototype._onTouchMove=function(event){this._onMouseMove(event);};Graph3d.prototype._onTouchEnd=function(event){this.touchDown=false;util.removeEventListener(document,'touchmove',this.ontouchmove);util.removeEventListener(document,'touchend',this.ontouchend);this._onMouseUp(event);};Graph3d.prototype._onWheel=function(event){if(!event)
event=window.event;var delta=0;if(event.wheelDelta){delta=event.wheelDelta/120;}else if(event.detail){delta=-event.detail/3;}
if(delta){var oldLength=this.camera.getArmLength();var newLength=oldLength*(1-delta/10);this.camera.setArmLength(newLength);this.redraw();this._hideTooltip();}
var parameters=this.getCameraPosition();this.emit('cameraPositionChange',parameters);util.preventDefault(event);};Graph3d.prototype._insideTriangle=function(point,triangle){var a=triangle[0],b=triangle[1],c=triangle[2];function sign(x){return x>0?1:x<0?-1:0;}
var as=sign((b.x-a.x)*(point.y-a.y)-(b.y-a.y)*(point.x-a.x));var bs=sign((c.x-b.x)*(point.y-b.y)-(c.y-b.y)*(point.x-b.x));var cs=sign((a.x-c.x)*(point.y-c.y)-(a.y-c.y)*(point.x-c.x));return(as==0||bs==0||as==bs)&&(bs==0||cs==0||bs==cs)&&(as==0||cs==0||as==cs);};Graph3d.prototype._dataPointFromXY=function(x,y){var i,distMax=100,dataPoint=null,closestDataPoint=null,closestDist=null,center=new Point2d(x,y);if(this.style===Graph3d.STYLE.BAR||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE){for(i=this.dataPoints.length-1;i>=0;i--){dataPoint=this.dataPoints[i];var surfaces=dataPoint.surfaces;if(surfaces){for(var s=surfaces.length-1;s>=0;s--){var surface=surfaces[s];var corners=surface.corners;var triangle1=[corners[0].screen,corners[1].screen,corners[2].screen];var triangle2=[corners[2].screen,corners[3].screen,corners[0].screen];if(this._insideTriangle(center,triangle1)||this._insideTriangle(center,triangle2)){return dataPoint;}}}}}else{for(i=0;i<this.dataPoints.length;i++){dataPoint=this.dataPoints[i];var point=dataPoint.screen;if(point){var distX=Math.abs(x-point.x);var distY=Math.abs(y-point.y);var dist=Math.sqrt(distX*distX+distY*distY);if((closestDist===null||dist<closestDist)&&dist<distMax){closestDist=dist;closestDataPoint=dataPoint;}}}}
return closestDataPoint;};Graph3d.prototype._showTooltip=function(dataPoint){var content,line,dot;if(!this.tooltip){content=document.createElement('div');content.style.position='absolute';content.style.padding='10px';content.style.border='1px solid #4d4d4d';content.style.color='#1a1a1a';content.style.background='rgba(255,255,255,0.7)';content.style.borderRadius='2px';content.style.boxShadow='5px 5px 10px rgba(128,128,128,0.5)';line=document.createElement('div');line.style.position='absolute';line.style.height='40px';line.style.width='0';line.style.borderLeft='1px solid #4d4d4d';dot=document.createElement('div');dot.style.position='absolute';dot.style.height='0';dot.style.width='0';dot.style.border='5px solid #4d4d4d';dot.style.borderRadius='5px';this.tooltip={dataPoint:null,dom:{content:content,line:line,dot:dot}};}else{content=this.tooltip.dom.content;line=this.tooltip.dom.line;dot=this.tooltip.dom.dot;}
this._hideTooltip();this.tooltip.dataPoint=dataPoint;if(typeof this.showTooltip==='function'){content.innerHTML=this.showTooltip(dataPoint.point);}else{content.innerHTML='<table>'+'<tr><td>x:</td><td>'+dataPoint.point.x+'</td></tr>'+'<tr><td>y:</td><td>'+dataPoint.point.y+'</td></tr>'+'<tr><td>z:</td><td>'+dataPoint.point.z+'</td></tr>'+'</table>';}
content.style.left='0';content.style.top='0';this.frame.appendChild(content);this.frame.appendChild(line);this.frame.appendChild(dot);var contentWidth=content.offsetWidth;var contentHeight=content.offsetHeight;var lineHeight=line.offsetHeight;var dotWidth=dot.offsetWidth;var dotHeight=dot.offsetHeight;var left=dataPoint.screen.x-contentWidth/2;left=Math.min(Math.max(left,10),this.frame.clientWidth-10-contentWidth);line.style.left=dataPoint.screen.x+'px';line.style.top=dataPoint.screen.y-lineHeight+'px';content.style.left=left+'px';content.style.top=dataPoint.screen.y-lineHeight-contentHeight+'px';dot.style.left=dataPoint.screen.x-dotWidth/2+'px';dot.style.top=dataPoint.screen.y-dotHeight/2+'px';};Graph3d.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var prop in this.tooltip.dom){if(this.tooltip.dom.hasOwnProperty(prop)){var elem=this.tooltip.dom[prop];if(elem&&elem.parentNode){elem.parentNode.removeChild(elem);}}}}};function getMouseX(event){if('clientX'in event)return event.clientX;return event.targetTouches[0]&&event.targetTouches[0].clientX||0;}
function getMouseY(event){if('clientY'in event)return event.clientY;return event.targetTouches[0]&&event.targetTouches[0].clientY||0;}
module.exports=Graph3d;},function(module,exports){"use strict";function Point2d(x,y){this.x=x!==undefined?x:0;this.y=y!==undefined?y:0;}
module.exports=Point2d;},function(module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj);};function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key];}
return obj;}
Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this;};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments);}
on.fn=fn;this.on(event,on);return this;};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this;}
var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this;}
var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break;}}
return this;};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args);}}
return this;};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[];};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length;};},function(module,exports){"use strict";function Point3d(x,y,z){this.x=x!==undefined?x:0;this.y=y!==undefined?y:0;this.z=z!==undefined?z:0;};Point3d.subtract=function(a,b){var sub=new Point3d();sub.x=a.x-b.x;sub.y=a.y-b.y;sub.z=a.z-b.z;return sub;};Point3d.add=function(a,b){var sum=new Point3d();sum.x=a.x+b.x;sum.y=a.y+b.y;sum.z=a.z+b.z;return sum;};Point3d.avg=function(a,b){return new Point3d((a.x+b.x)/2,(a.y+b.y)/2,(a.z+b.z)/2);};Point3d.crossProduct=function(a,b){var crossproduct=new Point3d();crossproduct.x=a.y*b.z-a.z*b.y;crossproduct.y=a.z*b.x-a.x*b.z;crossproduct.z=a.x*b.y-a.y*b.x;return crossproduct;};Point3d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);};module.exports=Point3d;},function(module,exports,__webpack_require__){'use strict';var Point3d=__webpack_require__(14);function Camera(){this.armLocation=new Point3d();this.armRotation={};this.armRotation.horizontal=0;this.armRotation.vertical=0;this.armLength=1.7;this.cameraLocation=new Point3d();this.cameraRotation=new Point3d(0.5*Math.PI,0,0);this.calculateCameraOrientation();}
Camera.prototype.setArmLocation=function(x,y,z){this.armLocation.x=x;this.armLocation.y=y;this.armLocation.z=z;this.calculateCameraOrientation();};Camera.prototype.setArmRotation=function(horizontal,vertical){if(horizontal!==undefined){this.armRotation.horizontal=horizontal;}
if(vertical!==undefined){this.armRotation.vertical=vertical;if(this.armRotation.vertical<0)this.armRotation.vertical=0;if(this.armRotation.vertical>0.5*Math.PI)this.armRotation.vertical=0.5*Math.PI;}
if(horizontal!==undefined||vertical!==undefined){this.calculateCameraOrientation();}};Camera.prototype.getArmRotation=function(){var rot={};rot.horizontal=this.armRotation.horizontal;rot.vertical=this.armRotation.vertical;return rot;};Camera.prototype.setArmLength=function(length){if(length===undefined)return;this.armLength=length;if(this.armLength<0.71)this.armLength=0.71;if(this.armLength>5)this.armLength=5;this.calculateCameraOrientation();};Camera.prototype.getArmLength=function(){return this.armLength;};Camera.prototype.getCameraLocation=function(){return this.cameraLocation;};Camera.prototype.getCameraRotation=function(){return this.cameraRotation;};Camera.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical);this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical);this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical);this.cameraRotation.x=Math.PI/2-this.armRotation.vertical;this.cameraRotation.y=0;this.cameraRotation.z=-this.armRotation.horizontal;};module.exports=Camera;},function(module,exports,__webpack_require__){'use strict';var DataView=__webpack_require__(10);function Filter(data,column,graph){this.data=data;this.column=column;this.graph=graph;this.index=undefined;this.value=undefined;this.values=graph.getDistinctValues(data.get(),this.column);this.values.sort(function(a,b){return a>b?1:a<b?-1:0;});if(this.values.length>0){this.selectValue(0);}
this.dataPoints=[];this.loaded=false;this.onLoadCallback=undefined;if(graph.animationPreload){this.loaded=false;this.loadInBackground();}else{this.loaded=true;}};Filter.prototype.isLoaded=function(){return this.loaded;};Filter.prototype.getLoadedProgress=function(){var len=this.values.length;var i=0;while(this.dataPoints[i]){i++;}
return Math.round(i/len*100);};Filter.prototype.getLabel=function(){return this.graph.filterLabel;};Filter.prototype.getColumn=function(){return this.column;};Filter.prototype.getSelectedValue=function(){if(this.index===undefined)return undefined;return this.values[this.index];};Filter.prototype.getValues=function(){return this.values;};Filter.prototype.getValue=function(index){if(index>=this.values.length)throw'Error: index out of range';return this.values[index];};Filter.prototype._getDataPoints=function(index){if(index===undefined)index=this.index;if(index===undefined)return[];var dataPoints;if(this.dataPoints[index]){dataPoints=this.dataPoints[index];}else{var f={};f.column=this.column;f.value=this.values[index];var dataView=new DataView(this.data,{filter:function filter(item){return item[f.column]==f.value;}}).get();dataPoints=this.graph._getDataPoints(dataView);this.dataPoints[index]=dataPoints;}
return dataPoints;};Filter.prototype.setOnLoadCallback=function(callback){this.onLoadCallback=callback;};Filter.prototype.selectValue=function(index){if(index>=this.values.length)throw'Error: index out of range';this.index=index;this.value=this.values[index];};Filter.prototype.loadInBackground=function(index){if(index===undefined)index=0;var frame=this.graph.frame;if(index<this.values.length){var dataPointsTemp=this._getDataPoints(index);if(frame.progress===undefined){frame.progress=document.createElement('DIV');frame.progress.style.position='absolute';frame.progress.style.color='gray';frame.appendChild(frame.progress);}
var progress=this.getLoadedProgress();frame.progress.innerHTML='Loading animation... '+progress+'%';frame.progress.style.bottom=60+'px';frame.progress.style.left=10+'px';var me=this;setTimeout(function(){me.loadInBackground(index+1);},10);this.loaded=false;}else{this.loaded=true;if(frame.progress!==undefined){frame.removeChild(frame.progress);frame.progress=undefined;}
if(this.onLoadCallback)this.onLoadCallback();}};module.exports=Filter;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);function Slider(container,options){if(container===undefined){throw'Error: No container element defined';}
this.container=container;this.visible=options&&options.visible!=undefined?options.visible:true;if(this.visible){this.frame=document.createElement('DIV');this.frame.style.width='100%';this.frame.style.position='relative';this.container.appendChild(this.frame);this.frame.prev=document.createElement('INPUT');this.frame.prev.type='BUTTON';this.frame.prev.value='Prev';this.frame.appendChild(this.frame.prev);this.frame.play=document.createElement('INPUT');this.frame.play.type='BUTTON';this.frame.play.value='Play';this.frame.appendChild(this.frame.play);this.frame.next=document.createElement('INPUT');this.frame.next.type='BUTTON';this.frame.next.value='Next';this.frame.appendChild(this.frame.next);this.frame.bar=document.createElement('INPUT');this.frame.bar.type='BUTTON';this.frame.bar.style.position='absolute';this.frame.bar.style.border='1px solid red';this.frame.bar.style.width='100px';this.frame.bar.style.height='6px';this.frame.bar.style.borderRadius='2px';this.frame.bar.style.MozBorderRadius='2px';this.frame.bar.style.border='1px solid #7F7F7F';this.frame.bar.style.backgroundColor='#E5E5E5';this.frame.appendChild(this.frame.bar);this.frame.slide=document.createElement('INPUT');this.frame.slide.type='BUTTON';this.frame.slide.style.margin='0px';this.frame.slide.value=' ';this.frame.slide.style.position='relative';this.frame.slide.style.left='-100px';this.frame.appendChild(this.frame.slide);var me=this;this.frame.slide.onmousedown=function(event){me._onMouseDown(event);};this.frame.prev.onclick=function(event){me.prev(event);};this.frame.play.onclick=function(event){me.togglePlay(event);};this.frame.next.onclick=function(event){me.next(event);};}
this.onChangeCallback=undefined;this.values=[];this.index=undefined;this.playTimeout=undefined;this.playInterval=1000;this.playLoop=true;}
Slider.prototype.prev=function(){var index=this.getIndex();if(index>0){index--;this.setIndex(index);}};Slider.prototype.next=function(){var index=this.getIndex();if(index<this.values.length-1){index++;this.setIndex(index);}};Slider.prototype.playNext=function(){var start=new Date();var index=this.getIndex();if(index<this.values.length-1){index++;this.setIndex(index);}else if(this.playLoop){index=0;this.setIndex(index);}
var end=new Date();var diff=end-start;var interval=Math.max(this.playInterval-diff,0);var me=this;this.playTimeout=setTimeout(function(){me.playNext();},interval);};Slider.prototype.togglePlay=function(){if(this.playTimeout===undefined){this.play();}else{this.stop();}};Slider.prototype.play=function(){if(this.playTimeout)return;this.playNext();if(this.frame){this.frame.play.value='Stop';}};Slider.prototype.stop=function(){clearInterval(this.playTimeout);this.playTimeout=undefined;if(this.frame){this.frame.play.value='Play';}};Slider.prototype.setOnChangeCallback=function(callback){this.onChangeCallback=callback;};Slider.prototype.setPlayInterval=function(interval){this.playInterval=interval;};Slider.prototype.getPlayInterval=function(interval){return this.playInterval;};Slider.prototype.setPlayLoop=function(doLoop){this.playLoop=doLoop;};Slider.prototype.onChange=function(){if(this.onChangeCallback!==undefined){this.onChangeCallback();}};Slider.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+'px';this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+'px';var left=this.indexToLeft(this.index);this.frame.slide.style.left=left+'px';}};Slider.prototype.setValues=function(values){this.values=values;if(this.values.length>0)this.setIndex(0);else this.index=undefined;};Slider.prototype.setIndex=function(index){if(index<this.values.length){this.index=index;this.redraw();this.onChange();}else{throw'Error: index out of range';}};Slider.prototype.getIndex=function(){return this.index;};Slider.prototype.get=function(){return this.values[this.index];};Slider.prototype._onMouseDown=function(event){var leftButtonDown=event.which?event.which===1:event.button===1;if(!leftButtonDown)return;this.startClientX=event.clientX;this.startSlideX=parseFloat(this.frame.slide.style.left);this.frame.style.cursor='move';var me=this;this.onmousemove=function(event){me._onMouseMove(event);};this.onmouseup=function(event){me._onMouseUp(event);};util.addEventListener(document,'mousemove',this.onmousemove);util.addEventListener(document,'mouseup',this.onmouseup);util.preventDefault(event);};Slider.prototype.leftToIndex=function(left){var width=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;var x=left-3;var index=Math.round(x/width*(this.values.length-1));if(index<0)index=0;if(index>this.values.length-1)index=this.values.length-1;return index;};Slider.prototype.indexToLeft=function(index){var width=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;var x=index/(this.values.length-1)*width;var left=x+3;return left;};Slider.prototype._onMouseMove=function(event){var diff=event.clientX-this.startClientX;var x=this.startSlideX+diff;var index=this.leftToIndex(x);this.setIndex(index);util.preventDefault();};Slider.prototype._onMouseUp=function(event){this.frame.style.cursor='auto';util.removeEventListener(document,'mousemove',this.onmousemove);util.removeEventListener(document,'mouseup',this.onmouseup);util.preventDefault();};module.exports=Slider;},function(module,exports){"use strict";function StepNumber(start,end,step,prettyStep){this._start=0;this._end=0;this._step=1;this.prettyStep=true;this.precision=5;this._current=0;this.setRange(start,end,step,prettyStep);};StepNumber.prototype.setRange=function(start,end,step,prettyStep){this._start=start?start:0;this._end=end?end:0;this.setStep(step,prettyStep);};StepNumber.prototype.setStep=function(step,prettyStep){if(step===undefined||step<=0)return;if(prettyStep!==undefined)this.prettyStep=prettyStep;if(this.prettyStep===true)this._step=StepNumber.calculatePrettyStep(step);else this._step=step;};StepNumber.calculatePrettyStep=function(step){var log10=function log10(x){return Math.log(x)/Math.LN10;};var step1=Math.pow(10,Math.round(log10(step))),step2=2*Math.pow(10,Math.round(log10(step/2))),step5=5*Math.pow(10,Math.round(log10(step/5)));var prettyStep=step1;if(Math.abs(step2-step)<=Math.abs(prettyStep-step))prettyStep=step2;if(Math.abs(step5-step)<=Math.abs(prettyStep-step))prettyStep=step5;if(prettyStep<=0){prettyStep=1;}
return prettyStep;};StepNumber.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision));};StepNumber.prototype.getStep=function(){return this._step;};StepNumber.prototype.start=function(){this._current=this._start-this._start%this._step;};StepNumber.prototype.next=function(){this._current+=this._step;};StepNumber.prototype.end=function(){return this._current>this._end;};module.exports=StepNumber;},function(module,exports,__webpack_require__){'use strict';var Emitter=__webpack_require__(13);var Hammer=__webpack_require__(23);var util=__webpack_require__(1);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var Range=__webpack_require__(27);var Core=__webpack_require__(30);var TimeAxis=__webpack_require__(41);var CurrentTime=__webpack_require__(20);var CustomTime=__webpack_require__(44);var ItemSet=__webpack_require__(31);var Configurator=__webpack_require__(45);var Validator=__webpack_require__(47)['default'];var printStyle=__webpack_require__(47).printStyle;var allOptions=__webpack_require__(48).allOptions;var configureOptions=__webpack_require__(48).configureOptions;function Timeline(container,items,groups,options){if(!(this instanceof Timeline)){throw new SyntaxError('Constructor must be called with the new operator');}
if(!(Array.isArray(groups)||groups instanceof DataSet||groups instanceof DataView)&&groups instanceof Object){var forthArgument=options;options=groups;groups=forthArgument;}
var me=this;this.defaultOptions={start:null,end:null,autoResize:true,orientation:{axis:'bottom',item:'bottom'},width:null,height:null,maxHeight:null,minHeight:null};this.options=util.deepExtend({},this.defaultOptions);this._create(container);this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function getScale(){return me.timeAxis.step.scale;},getStep:function getStep(){return me.timeAxis.step.step;},toScreen:me._toScreen.bind(me),toGlobalScreen:me._toGlobalScreen.bind(me),toTime:me._toTime.bind(me),toGlobalTime:me._toGlobalTime.bind(me)}};this.range=new Range(this.body);this.components.push(this.range);this.body.range=this.range;this.timeAxis=new TimeAxis(this.body);this.timeAxis2=null;this.components.push(this.timeAxis);this.currentTime=new CurrentTime(this.body);this.components.push(this.currentTime);this.itemSet=new ItemSet(this.body);this.components.push(this.itemSet);this.itemsData=null;this.groupsData=null;this.on('tap',function(event){me.emit('click',me.getEventProperties(event));});this.on('doubletap',function(event){me.emit('doubleClick',me.getEventProperties(event));});this.dom.root.oncontextmenu=function(event){me.emit('contextmenu',me.getEventProperties(event));};if(options){this.setOptions(options);}
if(groups){this.setGroups(groups);}
if(items){this.setItems(items);}else{this._redraw();}}
Timeline.prototype=new Core();Timeline.prototype._createConfigurator=function(){return new Configurator(this,this.dom.container,configureOptions);};Timeline.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:true});this._redraw();};Timeline.prototype.setOptions=function(options){var errorFound=Validator.validate(options,allOptions);if(errorFound===true){console.log('%cErrors have been found in the supplied options object.',printStyle);}
Core.prototype.setOptions.call(this,options);if('type'in options){if(options.type!==this.options.type){this.options.type=options.type;var itemsData=this.itemsData;if(itemsData){var selection=this.getSelection();this.setItems(null);this.setItems(itemsData);this.setSelection(selection);}}}};Timeline.prototype.setItems=function(items){var initialLoad=this.itemsData==null;var newDataSet;if(!items){newDataSet=null;}else if(items instanceof DataSet||items instanceof DataView){newDataSet=items;}else{newDataSet=new DataSet(items,{type:{start:'Date',end:'Date'}});}
this.itemsData=newDataSet;this.itemSet&&this.itemSet.setItems(newDataSet);if(initialLoad){if(this.options.start!=undefined||this.options.end!=undefined){if(this.options.start==undefined||this.options.end==undefined){var range=this.getItemRange();}
var start=this.options.start!=undefined?this.options.start:range.min;var end=this.options.end!=undefined?this.options.end:range.max;this.setWindow(start,end,{animation:false});}else{this.fit({animation:false});}}};Timeline.prototype.setGroups=function(groups){var newDataSet;if(!groups){newDataSet=null;}else if(groups instanceof DataSet||groups instanceof DataView){newDataSet=groups;}else{newDataSet=new DataSet(groups);}
this.groupsData=newDataSet;this.itemSet.setGroups(newDataSet);};Timeline.prototype.setData=function(data){if(data&&data.groups){this.setGroups(data.groups);}
if(data&&data.items){this.setItems(data.items);}};Timeline.prototype.setSelection=function(ids,options){this.itemSet&&this.itemSet.setSelection(ids);if(options&&options.focus){this.focus(ids,options);}};Timeline.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[];};Timeline.prototype.focus=function(id,options){if(!this.itemsData||id==undefined)return;var ids=Array.isArray(id)?id:[id];var itemsData=this.itemsData.getDataSet().get(ids,{type:{start:'Date',end:'Date'}});var start=null;var end=null;itemsData.forEach(function(itemData){var s=itemData.start.valueOf();var e='end'in itemData?itemData.end.valueOf():itemData.start.valueOf();if(start===null||s<start){start=s;}
if(end===null||e>end){end=e;}});if(start!==null&&end!==null){var middle=(start+end)/2;var interval=Math.max(this.range.end-this.range.start,(end-start)*1.1);var animation=options&&options.animation!==undefined?options.animation:true;this.range.setRange(middle-interval/2,middle+interval/2,animation);}};Timeline.prototype.fit=function(options){var animation=options&&options.animation!==undefined?options.animation:true;var range=this.getItemRange();this.range.setRange(range.min,range.max,animation);};Timeline.prototype.getItemRange=function(){var _this=this;var range=this.getDataRange();var min=range.min;var max=range.max;var minItem=null;var maxItem=null;if(min!=null&&max!=null){var interval;var factor;var lhs;var rhs;var delta;(function(){var getStart=function(item){return util.convert(item.data.start,'Date').valueOf();};var getEnd=function(item){var end=item.data.end!=undefined?item.data.end:item.data.start;return util.convert(end,'Date').valueOf();};interval=max-min;if(interval<=0){interval=10;}
factor=interval/_this.props.center.width;util.forEach(_this.itemSet.items,(function(item){item.show();var start=getStart(item);var end=getEnd(item);var left=new Date(start-(item.getWidthLeft()+10)*factor);var right=new Date(end+(item.getWidthRight()+10)*factor);if(left<min){min=left;minItem=item;}
if(right>max){max=right;maxItem=item;}}).bind(_this));if(minItem&&maxItem){lhs=minItem.getWidthLeft()+10;rhs=maxItem.getWidthRight()+10;delta=_this.props.center.width-lhs-rhs;if(delta>0){min=getStart(minItem)-lhs*interval/delta;max=getEnd(maxItem)+rhs*interval/delta;}}})();}
return{min:min!=null?new Date(min):null,max:max!=null?new Date(max):null};};Timeline.prototype.getDataRange=function(){var min=null;var max=null;var dataset=this.itemsData&&this.itemsData.getDataSet();if(dataset){dataset.forEach(function(item){var start=util.convert(item.start,'Date').valueOf();var end=util.convert(item.end!=undefined?item.end:item.start,'Date').valueOf();if(min===null||start<min){min=start;}
if(max===null||end>max){max=start;}});}
return{min:min!=null?new Date(min):null,max:max!=null?new Date(max):null};};Timeline.prototype.getEventProperties=function(event){var clientX=event.center?event.center.x:event.clientX;var clientY=event.center?event.center.y:event.clientY;var x=clientX-util.getAbsoluteLeft(this.dom.centerContainer);var y=clientY-util.getAbsoluteTop(this.dom.centerContainer);var item=this.itemSet.itemFromTarget(event);var group=this.itemSet.groupFromTarget(event);var customTime=CustomTime.customTimeFromTarget(event);var snap=this.itemSet.options.snap||null;var scale=this.body.util.getScale();var step=this.body.util.getStep();var time=this._toTime(x);var snappedTime=snap?snap(time,scale,step):time;var element=util.getTarget(event);var what=null;if(item!=null){what='item';}else if(customTime!=null){what='custom-time';}else if(util.hasParent(element,this.timeAxis.dom.foreground)){what='axis';}else if(this.timeAxis2&&util.hasParent(element,this.timeAxis2.dom.foreground)){what='axis';}else if(util.hasParent(element,this.itemSet.dom.labelSet)){what='group-label';}else if(util.hasParent(element,this.currentTime.bar)){what='current-time';}else if(util.hasParent(element,this.dom.center)){what='background';}
return{event:event,item:item?item.id:null,group:group?group.groupId:null,what:what,pageX:event.srcEvent?event.srcEvent.pageX:event.pageX,pageY:event.srcEvent?event.srcEvent.pageY:event.pageY,x:x,y:y,time:time,snappedTime:snappedTime};};module.exports=Timeline;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var Component=__webpack_require__(21);var moment=__webpack_require__(2);var locales=__webpack_require__(22);function CurrentTime(body,options){this.body=body;this.defaultOptions={showCurrentTime:true,locales:locales,locale:'en'};this.options=util.extend({},this.defaultOptions);this.offset=0;this._create();this.setOptions(options);}
CurrentTime.prototype=new Component();CurrentTime.prototype._create=function(){var bar=document.createElement('div');bar.className='vis-current-time';bar.style.position='absolute';bar.style.top='0px';bar.style.height='100%';this.bar=bar;};CurrentTime.prototype.destroy=function(){this.options.showCurrentTime=false;this.redraw();this.body=null;};CurrentTime.prototype.setOptions=function(options){if(options){util.selectiveExtend(['showCurrentTime','locale','locales'],this.options,options);}};CurrentTime.prototype.redraw=function(){if(this.options.showCurrentTime){var parent=this.body.dom.backgroundVertical;if(this.bar.parentNode!=parent){if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar);}
parent.appendChild(this.bar);this.start();}
var now=new Date(new Date().valueOf()+this.offset);var x=this.body.util.toScreen(now);var locale=this.options.locales[this.options.locale];if(!locale){if(!this.warned){console.log('WARNING: options.locales[\''+this.options.locale+'\'] not found. See http://visjs.org/docs/timeline.html#Localization');this.warned=true;}
locale=this.options.locales['en'];}
var title=locale.current+' '+locale.time+': '+moment(now).format('dddd, MMMM Do YYYY, H:mm:ss');title=title.charAt(0).toUpperCase()+title.substring(1);this.bar.style.left=x+'px';this.bar.title=title;}else{if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar);}
this.stop();}
return false;};CurrentTime.prototype.start=function(){var me=this;function update(){me.stop();var scale=me.body.range.conversion(me.body.domProps.center.width).scale;var interval=1/scale/10;if(interval<30)interval=30;if(interval>1000)interval=1000;me.redraw();me.currentTimeTimer=setTimeout(update,interval);}
update();};CurrentTime.prototype.stop=function(){if(this.currentTimeTimer!==undefined){clearTimeout(this.currentTimeTimer);delete this.currentTimeTimer;}};CurrentTime.prototype.setCurrentTime=function(time){var t=util.convert(time,'Date').valueOf();var now=new Date().valueOf();this.offset=t-now;this.redraw();};CurrentTime.prototype.getCurrentTime=function(){return new Date(new Date().valueOf()+this.offset);};module.exports=CurrentTime;},function(module,exports){"use strict";function Component(body,options){this.options=null;this.props=null;}
Component.prototype.setOptions=function(options){if(options){util.extend(this.options,options);}};Component.prototype.redraw=function(){return false;};Component.prototype.destroy=function(){};Component.prototype._isResized=function(){var resized=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;this.props._previousWidth=this.props.width;this.props._previousHeight=this.props.height;return resized;};module.exports=Component;},function(module,exports){'use strict';exports['en']={current:'current',time:'time'};exports['en_EN']=exports['en'];exports['en_US']=exports['en'];exports['nl']={current:'huidige',time:'tijd'};exports['nl_NL']=exports['nl'];exports['nl_BE']=exports['nl'];},function(module,exports,__webpack_require__){'use strict';if(typeof window!=='undefined'){var propagating=__webpack_require__(24);var Hammer=window['Hammer']||__webpack_require__(25);module.exports=propagating(Hammer,{preventDefault:'mouse'});}else{module.exports=function(){throw Error('hammer.js is only available in a browser, not in node.js.');};}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;'use strict';(function(factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=(factory),__WEBPACK_AMD_DEFINE_RESULT__=(typeof __WEBPACK_AMD_DEFINE_FACTORY__==='function'?(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__)):__WEBPACK_AMD_DEFINE_FACTORY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else if(typeof exports==='object'){module.exports=factory();}else{window.propagating=factory();}}(function(){var _firstTarget=null;var _processing=false;return function propagating(hammer,options){var _options=options||{preventDefault:false};if(hammer.Manager){var Hammer=hammer;var PropagatingHammer=function(element,options){var o=Object.create(_options);if(options)Hammer.extend(o,options);return propagating(new Hammer(element,o),o);};Hammer.extend(PropagatingHammer,Hammer);PropagatingHammer.Manager=function(element,options){var o=Object.create(_options);if(options)Hammer.extend(o,options);return propagating(new Hammer.Manager(element,o),o);};return PropagatingHammer;}
var wrapper=Object.create(hammer);var element=hammer.element;element.hammer=wrapper;hammer.on('hammer.input',function(event){if(_options.preventDefault===true||(_options.preventDefault===event.pointerType)){event.preventDefault();}
if(event.isFirst){_firstTarget=event.target;}});wrapper._handlers={};wrapper.on=function(events,handler){split(events).forEach(function(event){var _handlers=wrapper._handlers[event];if(!_handlers){wrapper._handlers[event]=_handlers=[];hammer.on(event,propagatedHandler);}
_handlers.push(handler);});return wrapper;};wrapper.off=function(events,handler){split(events).forEach(function(event){var _handlers=wrapper._handlers[event];if(_handlers){_handlers=handler?_handlers.filter(function(h){return h!==handler;}):[];if(_handlers.length>0){wrapper._handlers[event]=_handlers;}
else{hammer.off(event,propagatedHandler);delete wrapper._handlers[event];}}});return wrapper;};wrapper.emit=function(eventType,event){_firstTarget=event.target;hammer.emit(eventType,event);};wrapper.destroy=function(){delete hammer.element.hammer;wrapper._handlers={};hammer.destroy();};function split(events){return events.match(/[^ ]+/g);}
function propagatedHandler(event){if(event.type!=='hammer.input'){if(!event.srcEvent._handled){event.srcEvent._handled={};}
if(event.srcEvent._handled[event.type]){return;}
else{event.srcEvent._handled[event.type]=true;}}
var stopped=false;event.stopPropagation=function(){stopped=true;};event.firstTarget=_firstTarget;var elem=_firstTarget;while(elem&&!stopped){var _handlers=elem.hammer&&elem.hammer._handlers[event.type];if(_handlers){for(var i=0;i<_handlers.length&&!stopped;i++){_handlers[i](event);}}
elem=elem.parentNode;}}
return wrapper;};}));},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;/*! Hammer.JS - v2.0.4 - 2014-09-28
   * http://hammerjs.github.io/
   *
   * Copyright (c) 2014 Jorik Tangelder;
   * Licensed under the MIT license */(function(window,document,exportName,undefined){'use strict';var VENDOR_PREFIXES=['','webkit','moz','MS','ms','o'];var TEST_ELEMENT=document.createElement('div');var TYPE_FUNCTION='function';var round=Math.round;var abs=Math.abs;var now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout);}
function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true;}
return false;}
function each(obj,iterator,context){var i;if(!obj){return;}
if(obj.forEach){obj.forEach(iterator,context);}else if(obj.length!==undefined){i=0;while(i<obj.length){iterator.call(context,obj[i],i,obj);i++;}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj);}}}
function extend(dest,src,merge){var keys=Object.keys(src);var i=0;while(i<keys.length){if(!merge||(merge&&dest[keys[i]]===undefined)){dest[keys[i]]=src[keys[i]];}
i++;}
return dest;}
function merge(dest,src){return extend(dest,src,true);}
function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){extend(childP,properties);}}
function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments);};}
function boolOrFn(val,args){if(typeof val==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args);}
return val;}
function ifUndefined(val1,val2){return(val1===undefined)?val2:val1;}
function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,false);});}
function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,false);});}
function hasParent(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;}
function inStr(str,find){return str.indexOf(find)>-1;}
function splitStr(str){return str.trim().split(/\s+/g);}
function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find);}else{var i=0;while(i<src.length){if((findByKey&&src[i][findByKey]==find)||(!findByKey&&src[i]===find)){return i;}
i++;}
return-1;}}
function toArray(obj){return Array.prototype.slice.call(obj,0);}
function uniqueArray(src,key,sort){var results=[];var values=[];var i=0;while(i<src.length){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i]);}
values[i]=val;i++;}
if(sort){if(!key){results=results.sort();}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key];});}}
return results;}
function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);var i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i];prop=(prefix)?prefix+camelProp:property;if(prop in obj){return prop;}
i++;}
return undefined;}
var _uniqueId=1;function uniqueId(){return _uniqueId++;}
function getWindowForElement(element){var doc=element.ownerDocument;return(doc.defaultView||doc.parentWindow);}
var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH=('ontouchstart'in window);var SUPPORT_POINTER_EVENTS=prefixed(window,'PointerEvent')!==undefined;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH='touch';var INPUT_TYPE_PEN='pen';var INPUT_TYPE_MOUSE='mouse';var INPUT_TYPE_KINECT='kinect';var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=['x','y'];var PROPS_CLIENT_XY=['clientX','clientY'];function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;this.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev);}};this.init();}
Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);}};function createInputInstance(manager){var Type;var inputClass=manager.options.inputClass;if(inputClass){Type=inputClass;}else if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput;}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput;}else if(!SUPPORT_TOUCH){Type=MouseInput;}else{Type=TouchMouseInput;}
return new(Type)(manager,inputHandler);}
function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=(eventType&INPUT_START&&(pointersLen-changedPointersLen===0));var isFinal=(eventType&(INPUT_END|INPUT_CANCEL)&&(pointersLen-changedPointersLen===0));input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={};}
input.eventType=eventType;computeInputData(manager,input);manager.emit('hammer.input',input);manager.recognize(input);manager.session.prevInput=input;}
function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;if(!session.firstInput){session.firstInput=simpleCloneInputData(input);}
if(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input);}else if(pointersLength===1){session.firstMultiple=false;}
var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;computeIntervalInputData(session,input);var target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target;}
input.target=target;}
function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y};}
input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y);}
function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=last.deltaX-input.deltaX;var deltaY=last.deltaY-input.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=(abs(v.x)>abs(v.y))?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input;}else{velocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction;}
input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction;}
function simpleCloneInputData(input){var pointers=[];var i=0;while(i<input.pointers.length){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)};i++;}
return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY};}
function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};}
var x=0,y=0,i=0;while(i<pointersLength){x+=pointers[i].clientX;y+=pointers[i].clientY;i++;}
return{x:round(x/pointersLength),y:round(y/pointersLength)};}
function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0};}
function getDirection(x,y){if(x===y){return DIRECTION_NONE;}
if(abs(x)>=abs(y)){return x>0?DIRECTION_LEFT:DIRECTION_RIGHT;}
return y>0?DIRECTION_UP:DIRECTION_DOWN;}
function getDistance(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt((x*x)+(y*y));}
function getAngle(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI;}
function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)-getAngle(start[1],start[0],PROPS_CLIENT_XY);}
function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY);}
var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS='mousedown';var MOUSE_WINDOW_EVENTS='mousemove mouseup';function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.allow=true;this.pressed=false;Input.apply(this,arguments);}
inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];if(eventType&INPUT_START&&ev.button===0){this.pressed=true;}
if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END;}
if(!this.pressed||!this.allow){return;}
if(eventType&INPUT_END){this.pressed=false;}
this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev});}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};var IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT};var POINTER_ELEMENT_EVENTS='pointerdown';var POINTER_WINDOW_EVENTS='pointermove pointerup pointercancel';if(window.MSPointerEvent){POINTER_ELEMENT_EVENTS='MSPointerDown';POINTER_WINDOW_EVENTS='MSPointerMove MSPointerUp MSPointerCancel';}
function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=(this.manager.session.pointerEvents=[]);}
inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace('ms','');var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=(pointerType==INPUT_TYPE_TOUCH);var storeIndex=inArray(store,ev.pointerId,'pointerId');if(eventType&INPUT_START&&(ev.button===0||isTouch)){if(storeIndex<0){store.push(ev);storeIndex=store.length-1;}}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true;}
if(storeIndex<0){return;}
store[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){store.splice(storeIndex,1);}}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var SINGLE_TOUCH_TARGET_EVENTS='touchstart';var SINGLE_TOUCH_WINDOW_EVENTS='touchstart touchmove touchend touchcancel';function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS;this.evWin=SINGLE_TOUCH_WINDOW_EVENTS;this.started=false;Input.apply(this,arguments);}
inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START){this.started=true;}
if(!this.started){return;}
var touches=normalizeSingleTouches.call(this,ev,type);if(type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0){this.started=false;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function normalizeSingleTouches(ev,type){var all=toArray(ev.touches);var changed=toArray(ev.changedTouches);if(type&(INPUT_END|INPUT_CANCEL)){all=uniqueArray(all.concat(changed),'identifier',true);}
return[all,changed];}
var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS='touchstart touchmove touchend touchcancel';function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments);}
inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches];}
var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target);});if(type===INPUT_START){i=0;while(i<targetTouches.length){targetIds[targetTouches[i].identifier]=true;i++;}}
i=0;while(i<changedTouches.length){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i]);}
if(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier];}
i++;}
if(!changedTargetTouches.length){return;}
return[uniqueArray(targetTouches.concat(changedTargetTouches),'identifier',true),changedTargetTouches];}
function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler);}
inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=(inputData.pointerType==INPUT_TYPE_TOUCH),isMouse=(inputData.pointerType==INPUT_TYPE_MOUSE);if(isTouch){this.mouse.allow=false;}else if(isMouse&&!this.mouse.allow){return;}
if(inputEvent&(INPUT_END|INPUT_CANCEL)){this.mouse.allow=true;}
this.callback(manager,inputEvent,inputData);},destroy:function destroy(){this.touch.destroy();this.mouse.destroy();}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,'touchAction');var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;var TOUCH_ACTION_COMPUTE='compute';var TOUCH_ACTION_AUTO='auto';var TOUCH_ACTION_MANIPULATION='manipulation';var TOUCH_ACTION_NONE='none';var TOUCH_ACTION_PAN_X='pan-x';var TOUCH_ACTION_PAN_Y='pan-y';function TouchAction(manager,value){this.manager=manager;this.set(value);}
TouchAction.prototype={set:function(value){if(value==TOUCH_ACTION_COMPUTE){value=this.compute();}
if(NATIVE_TOUCH_ACTION){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value;}
this.actions=value.toLowerCase().trim();},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction());}});return cleanTouchActions(actions.join(' '));},preventDefaults:function(input){if(NATIVE_TOUCH_ACTION){return;}
var srcEvent=input.srcEvent;var direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return;}
var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);if(hasNone||(hasPanY&&direction&DIRECTION_HORIZONTAL)||(hasPanX&&direction&DIRECTION_VERTICAL)){return this.preventSrc(srcEvent);}},preventSrc:function(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault();}};function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE;}
var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY){return TOUCH_ACTION_PAN_X+' '+TOUCH_ACTION_PAN_Y;}
if(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;}
if(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION;}
return TOUCH_ACTION_AUTO;}
var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;function Recognizer(options){this.id=uniqueId();this.manager=null;this.options=merge(options||{},this.defaults);this.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[];}
Recognizer.prototype={defaults:{},set:function(options){extend(this.options,options);this.manager&&this.manager.touchAction.update();return this;},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'recognizeWith',this)){return this;}
var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this);}
return this;},dropRecognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRecognizeWith',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this;},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'requireFailure',this)){return this;}
var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this);}
return this;},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRequireFailure',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1);}
return this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id];},emit:function(input){var self=this;var state=this.state;function emit(withState){self.manager.emit(self.options.event+(withState?stateStr(state):''),input);}
if(state<STATE_ENDED){emit(true);}
emit();if(state>=STATE_ENDED){emit(true);}},tryEmit:function(input){if(this.canEmit()){return this.emit(input);}
this.state=STATE_FAILED;},canEmit:function(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false;}
i++;}
return true;},recognize:function(inputData){var inputDataClone=extend({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return;}
if(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE;}
this.state=this.process(inputDataClone);if(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone);}},process:function(inputData){},getTouchAction:function(){},reset:function(){}};function stateStr(state){if(state&STATE_CANCELLED){return'cancel';}else if(state&STATE_ENDED){return'end';}else if(state&STATE_CHANGED){return'move';}else if(state&STATE_BEGAN){return'start';}
return'';}
function directionStr(direction){if(direction==DIRECTION_DOWN){return'down';}else if(direction==DIRECTION_UP){return'up';}else if(direction==DIRECTION_LEFT){return'left';}else if(direction==DIRECTION_RIGHT){return'right';}
return'';}
function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer);}
return otherRecognizer;}
function AttrRecognizer(){Recognizer.apply(this,arguments);}
inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers;},process:function(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED;}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED;}else if(!(state&STATE_BEGAN)){return STATE_BEGAN;}
return state|STATE_CHANGED;}
return STATE_FAILED;}});function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null;}
inherit(PanRecognizer,AttrRecognizer,{defaults:{event:'pan',threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction;var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y);}
if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X);}
return actions;},directionTest:function(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;if(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=(x===0)?DIRECTION_NONE:(x<0)?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX);}else{direction=(y===0)?DIRECTION_NONE:(y<0)?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY);}}
input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction;},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||(!(this.state&STATE_BEGAN)&&this.directionTest(input)));},emit:function(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){this.manager.emit(this.options.event+direction,input);}
this._super.emit.call(this,input);}});function PinchRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN);},emit:function(input){this._super.emit.call(this,input);if(input.scale!==1){var inOut=input.scale<1?'in':'out';this.manager.emit(this.options.event+inOut,input);}}});function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null;}
inherit(PressRecognizer,Recognizer,{defaults:{event:'press',pointers:1,time:500,threshold:5},getTouchAction:function(){return[TOUCH_ACTION_AUTO];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||(input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)){this.reset();}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.time,this);}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED;}
return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(input){if(this.state!==STATE_RECOGNIZED){return;}
if(input&&(input.eventType&INPUT_END)){this.manager.emit(this.options.event+'up',input);}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input);}}});function RotateRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN);}});function SwipeRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:'swipe',threshold:10,velocity:0.65,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this);},attrTest:function(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.velocity;}else if(direction&DIRECTION_HORIZONTAL){velocity=input.velocityX;}else if(direction&DIRECTION_VERTICAL){velocity=input.velocityY;}
return this._super.attrTest.call(this,input)&&direction&input.direction&&input.distance>this.options.threshold&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END;},emit:function(input){var direction=directionStr(input.direction);if(direction){this.manager.emit(this.options.event+direction,input);}
this.manager.emit(this.options.event,input);}});function TapRecognizer(){Recognizer.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0;}
inherit(TapRecognizer,Recognizer,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if((input.eventType&INPUT_START)&&(this.count===0)){return this.failTimeout();}
if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout();}
var validInterval=this.pTime?(input.timeStamp-this.pTime<options.interval):true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1;}else{this.count+=1;}
this._input=input;var tapCount=this.count%options.taps;if(tapCount===0){if(!this.hasRequireFailures()){return STATE_RECOGNIZED;}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.interval,this);return STATE_BEGAN;}}}
return STATE_FAILED;},failTimeout:function(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED;},this.options.interval,this);return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input);}}});function Hammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset);return new Manager(element,options);}
Hammer.VERSION='2.0.4';Hammer.defaults={domEvents:false,touchAction:TOUCH_ACTION_COMPUTE,enable:true,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},['rotate']],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},['swipe']],[TapRecognizer],[TapRecognizer,{event:'doubletap',taps:2},['tap']],[PressRecognizer]],cssProps:{userSelect:'none',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var STOP=1;var FORCED_STOP=2;function Manager(element,options){options=options||{};this.options=merge(options,Hammer.defaults);this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(options.recognizers,function(item){var recognizer=this.add(new(item[0])(item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[3]);},this);}
Manager.prototype={set:function(options){extend(this.options,options);if(options.touchAction){this.touchAction.update();}
if(options.inputTarget){this.input.destroy();this.input.target=options.inputTarget;this.input.init();}
return this;},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP;},recognize:function(inputData){var session=this.session;if(session.stopped){return;}
this.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;var curRecognizer=session.curRecognizer;if(!curRecognizer||(curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)){curRecognizer=session.curRecognizer=null;}
var i=0;while(i<recognizers.length){recognizer=recognizers[i];if(session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))){recognizer.recognize(inputData);}else{recognizer.reset();}
if(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer;}
i++;}},get:function(recognizer){if(recognizer instanceof Recognizer){return recognizer;}
var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i];}}
return null;},add:function(recognizer){if(invokeArrayArg(recognizer,'add',this)){return this;}
var existing=this.get(recognizer.options.event);if(existing){this.remove(existing);}
this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer;},remove:function(recognizer){if(invokeArrayArg(recognizer,'remove',this)){return this;}
var recognizers=this.recognizers;recognizer=this.get(recognizer);recognizers.splice(inArray(recognizers,recognizer),1);this.touchAction.update();return this;},on:function(events,handler){var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler);});return this;},off:function(events,handler){var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event];}else{handlers[event].splice(inArray(handlers[event],handler),1);}});return this;},emit:function(event,data){if(this.options.domEvents){triggerDomEvent(event,data);}
var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return;}
data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault();};var i=0;while(i<handlers.length){handlers[i](data);i++;}},destroy:function(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null;}};function toggleCssProps(manager,add){var element=manager.element;each(manager.options.cssProps,function(value,name){element.style[prefixed(element.style,name)]=add?value:'';});}
function triggerDomEvent(event,data){var gestureEvent=document.createEvent('Event');gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent);}
extend(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,inherit:inherit,bindFn:bindFn,prefixed:prefixed});if("function"==TYPE_FUNCTION&&__webpack_require__(26)){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer;}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else if(typeof module!='undefined'&&module.exports){module.exports=Hammer;}else{window[exportName]=Hammer;}})(window,document,'Hammer');},function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__;}.call(exports,{}))},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var hammerUtil=__webpack_require__(28);var moment=__webpack_require__(2);var Component=__webpack_require__(21);var DateUtil=__webpack_require__(29);function Range(body,options){var now=moment().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=now.clone().add(-3,'days').valueOf();this.end=now.clone().add(4,'days').valueOf();this.body=body;this.deltaDifference=0;this.scaleOffset=0;this.startToFront=false;this.endToFront=true;this.defaultOptions={start:null,end:null,direction:'horizontal',moveable:true,zoomable:true,min:null,max:null,zoomMin:10,zoomMax:1000*60*60*24*365*10000};this.options=util.extend({},this.defaultOptions);this.props={touch:{}};this.animationTimer=null;this.body.emitter.on('panstart',this._onDragStart.bind(this));this.body.emitter.on('panmove',this._onDrag.bind(this));this.body.emitter.on('panend',this._onDragEnd.bind(this));this.body.emitter.on('mousewheel',this._onMouseWheel.bind(this));this.body.emitter.on('touch',this._onTouch.bind(this));this.body.emitter.on('pinch',this._onPinch.bind(this));this.setOptions(options);}
Range.prototype=new Component();Range.prototype.setOptions=function(options){if(options){var fields=['direction','min','max','zoomMin','zoomMax','moveable','zoomable','activate','hiddenDates'];util.selectiveExtend(fields,this.options,options);if('start'in options||'end'in options){this.setRange(options.start,options.end);}}};function validateDirection(direction){if(direction!='horizontal'&&direction!='vertical'){throw new TypeError('Unknown direction "'+direction+'". '+'Choose "horizontal" or "vertical".');}}
Range.prototype.setRange=function(start,end,animation,byUser){if(byUser!==true){byUser=false;}
var finalStart=start!=undefined?util.convert(start,'Date').valueOf():null;var finalEnd=end!=undefined?util.convert(end,'Date').valueOf():null;this._cancelAnimation();if(animation){var me=this;var initStart=this.start;var initEnd=this.end;var duration=typeof animation==='object'&&'duration'in animation?animation.duration:500;var easingName=typeof animation==='object'&&'easingFunction'in animation?animation.easingFunction:'easeInOutQuad';var easingFunction=util.easingFunctions[easingName];if(!easingFunction){throw new Error('Unknown easing function '+JSON.stringify(easingName)+'. '+'Choose from: '+Object.keys(util.easingFunctions).join(', '));}
var initTime=new Date().valueOf();var anyChanged=false;var next=function next(){if(!me.props.touch.dragging){var now=new Date().valueOf();var time=now-initTime;var ease=easingFunction(time/duration);var done=time>duration;var s=done||finalStart===null?finalStart:initStart+(finalStart-initStart)*ease;var e=done||finalEnd===null?finalEnd:initEnd+(finalEnd-initEnd)*ease;changed=me._applyRange(s,e);DateUtil.updateHiddenDates(me.body,me.options.hiddenDates);anyChanged=anyChanged||changed;if(changed){me.body.emitter.emit('rangechange',{start:new Date(me.start),end:new Date(me.end),byUser:byUser});}
if(done){if(anyChanged){me.body.emitter.emit('rangechanged',{start:new Date(me.start),end:new Date(me.end),byUser:byUser});}}else{me.animationTimer=setTimeout(next,20);}}};return next();}else{var changed=this._applyRange(finalStart,finalEnd);DateUtil.updateHiddenDates(this.body,this.options.hiddenDates);if(changed){var params={start:new Date(this.start),end:new Date(this.end),byUser:byUser};this.body.emitter.emit('rangechange',params);this.body.emitter.emit('rangechanged',params);}}};Range.prototype._cancelAnimation=function(){if(this.animationTimer){clearTimeout(this.animationTimer);this.animationTimer=null;}};Range.prototype._applyRange=function(start,end){var newStart=start!=null?util.convert(start,'Date').valueOf():this.start,newEnd=end!=null?util.convert(end,'Date').valueOf():this.end,max=this.options.max!=null?util.convert(this.options.max,'Date').valueOf():null,min=this.options.min!=null?util.convert(this.options.min,'Date').valueOf():null,diff;if(isNaN(newStart)||newStart===null){throw new Error('Invalid start "'+start+'"');}
if(isNaN(newEnd)||newEnd===null){throw new Error('Invalid end "'+end+'"');}
if(newEnd<newStart){newEnd=newStart;}
if(min!==null){if(newStart<min){diff=min-newStart;newStart+=diff;newEnd+=diff;if(max!=null){if(newEnd>max){newEnd=max;}}}}
if(max!==null){if(newEnd>max){diff=newEnd-max;newStart-=diff;newEnd-=diff;if(min!=null){if(newStart<min){newStart=min;}}}}
if(this.options.zoomMin!==null){var zoomMin=parseFloat(this.options.zoomMin);if(zoomMin<0){zoomMin=0;}
if(newEnd-newStart<zoomMin){if(this.end-this.start===zoomMin&&newStart>this.start&&newEnd<this.end){newStart=this.start;newEnd=this.end;}else{diff=zoomMin-(newEnd-newStart);newStart-=diff/2;newEnd+=diff/2;}}}
if(this.options.zoomMax!==null){var zoomMax=parseFloat(this.options.zoomMax);if(zoomMax<0){zoomMax=0;}
if(newEnd-newStart>zoomMax){if(this.end-this.start===zoomMax&&newStart<this.start&&newEnd>this.end){newStart=this.start;newEnd=this.end;}else{diff=newEnd-newStart-zoomMax;newStart+=diff/2;newEnd-=diff/2;}}}
var changed=this.start!=newStart||this.end!=newEnd;if(!(newStart>=this.start&&newStart<=this.end||newEnd>=this.start&&newEnd<=this.end)&&!(this.start>=newStart&&this.start<=newEnd||this.end>=newStart&&this.end<=newEnd)){this.body.emitter.emit('checkRangedItems');}
this.start=newStart;this.end=newEnd;return changed;};Range.prototype.getRange=function(){return{start:this.start,end:this.end};};Range.prototype.conversion=function(width,totalHidden){return Range.conversion(this.start,this.end,width,totalHidden);};Range.conversion=function(start,end,width,totalHidden){if(totalHidden===undefined){totalHidden=0;}
if(width!=0&&end-start!=0){return{offset:start,scale:width/(end-start-totalHidden)};}else{return{offset:0,scale:1};}};Range.prototype._onDragStart=function(event){this.deltaDifference=0;this.previousDelta=0;if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;this.props.touch.start=this.start;this.props.touch.end=this.end;this.props.touch.dragging=true;if(this.body.dom.root){this.body.dom.root.style.cursor='move';}};Range.prototype._onDrag=function(event){if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;var direction=this.options.direction;validateDirection(direction);var delta=direction=='horizontal'?event.deltaX:event.deltaY;delta-=this.deltaDifference;var interval=this.props.touch.end-this.props.touch.start;var duration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);interval-=duration;var width=direction=='horizontal'?this.body.domProps.center.width:this.body.domProps.center.height;var diffRange=-delta/width*interval;var newStart=this.props.touch.start+diffRange;var newEnd=this.props.touch.end+diffRange;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,this.previousDelta-delta,true);var safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,this.previousDelta-delta,true);if(safeStart!=newStart||safeEnd!=newEnd){this.deltaDifference+=delta;this.props.touch.start=safeStart;this.props.touch.end=safeEnd;this._onDrag(event);return;}
this.previousDelta=delta;this._applyRange(newStart,newEnd);this.body.emitter.emit('rangechange',{start:new Date(this.start),end:new Date(this.end),byUser:true});};Range.prototype._onDragEnd=function(event){if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;this.props.touch.dragging=false;if(this.body.dom.root){this.body.dom.root.style.cursor='auto';}
this.body.emitter.emit('rangechanged',{start:new Date(this.start),end:new Date(this.end),byUser:true});};Range.prototype._onMouseWheel=function(event){if(!(this.options.zoomable&&this.options.moveable))return;var delta=0;if(event.wheelDelta){delta=event.wheelDelta/120;}else if(event.detail){delta=-event.detail/3;}
if(delta){var scale;if(delta<0){scale=1-delta/5;}else{scale=1/(1+delta/5);}
var pointer=getPointer({x:event.clientX,y:event.clientY},this.body.dom.center);var pointerDate=this._pointerToDate(pointer);this.zoom(scale,pointerDate,delta);}
event.preventDefault();};Range.prototype._onTouch=function(event){this.props.touch.start=this.start;this.props.touch.end=this.end;this.props.touch.allowDragging=true;this.props.touch.center=null;this.scaleOffset=0;this.deltaDifference=0;};Range.prototype._onPinch=function(event){if(!(this.options.zoomable&&this.options.moveable))return;this.props.touch.allowDragging=false;if(!this.props.touch.center){this.props.touch.center=getPointer(event.center,this.body.dom.center);}
var scale=1/(event.scale+this.scaleOffset);var centerDate=this._pointerToDate(this.props.touch.center);var hiddenDuration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var hiddenDurationBefore=DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this,centerDate);var hiddenDurationAfter=hiddenDuration-hiddenDurationBefore;var newStart=centerDate-hiddenDurationBefore+(this.props.touch.start-(centerDate-hiddenDurationBefore))*scale;var newEnd=centerDate+hiddenDurationAfter+(this.props.touch.end-(centerDate+hiddenDurationAfter))*scale;this.startToFront=1-scale<=0;this.endToFront=scale-1<=0;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,1-scale,true);var safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,scale-1,true);if(safeStart!=newStart||safeEnd!=newEnd){this.props.touch.start=safeStart;this.props.touch.end=safeEnd;this.scaleOffset=1-event.scale;newStart=safeStart;newEnd=safeEnd;}
this.setRange(newStart,newEnd,false,true);this.startToFront=false;this.endToFront=true;};Range.prototype._pointerToDate=function(pointer){var conversion;var direction=this.options.direction;validateDirection(direction);if(direction=='horizontal'){return this.body.util.toTime(pointer.x).valueOf();}else{var height=this.body.domProps.center.height;conversion=this.conversion(height);return pointer.y/conversion.scale+conversion.offset;}};function getPointer(touch,element){return{x:touch.x-util.getAbsoluteLeft(element),y:touch.y-util.getAbsoluteTop(element)};}
Range.prototype.zoom=function(scale,center,delta){if(center==null){center=(this.start+this.end)/2;}
var hiddenDuration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var hiddenDurationBefore=DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this,center);var hiddenDurationAfter=hiddenDuration-hiddenDurationBefore;var newStart=center-hiddenDurationBefore+(this.start-(center-hiddenDurationBefore))*scale;var newEnd=center+hiddenDurationAfter+(this.end-(center+hiddenDurationAfter))*scale;this.startToFront=delta>0?false:true;this.endToFront=-delta>0?false:true;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,delta,true);var safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,-delta,true);if(safeStart!=newStart||safeEnd!=newEnd){newStart=safeStart;newEnd=safeEnd;}
this.setRange(newStart,newEnd,false,true);this.startToFront=false;this.endToFront=true;};Range.prototype.move=function(delta){var diff=this.end-this.start;var newStart=this.start+diff*delta;var newEnd=this.end+diff*delta;this.start=newStart;this.end=newEnd;};Range.prototype.moveTo=function(moveTo){var center=(this.start+this.end)/2;var diff=center-moveTo;var newStart=this.start-diff;var newEnd=this.end-diff;this.setRange(newStart,newEnd);};module.exports=Range;},function(module,exports,__webpack_require__){'use strict';var Hammer=__webpack_require__(23);exports.onTouch=function(hammer,callback){callback.inputHandler=function(event){if(event.isFirst&&!isTouching){callback(event);isTouching=true;setTimeout(function(){isTouching=false;},0);}};hammer.on('hammer.input',callback.inputHandler);};var isTouching=false;exports.onRelease=function(hammer,callback){callback.inputHandler=function(event){if(event.isFinal&&!isReleasing){callback(event);isReleasing=true;setTimeout(function(){isReleasing=false;},0);}};return hammer.on('hammer.input',callback.inputHandler);};var isReleasing=false;exports.offTouch=function(hammer,callback){hammer.off('hammer.input',callback.inputHandler);};exports.offRelease=exports.offTouch;},function(module,exports,__webpack_require__){"use strict";var moment=__webpack_require__(2);exports.convertHiddenOptions=function(body,hiddenDates){body.hiddenDates=[];if(hiddenDates){if(Array.isArray(hiddenDates)==true){for(var i=0;i<hiddenDates.length;i++){if(hiddenDates[i].repeat===undefined){var dateItem={};dateItem.start=moment(hiddenDates[i].start).toDate().valueOf();dateItem.end=moment(hiddenDates[i].end).toDate().valueOf();body.hiddenDates.push(dateItem);}}
body.hiddenDates.sort(function(a,b){return a.start-b.start;});}}};exports.updateHiddenDates=function(body,hiddenDates){if(hiddenDates&&body.domProps.centerContainer.width!==undefined){exports.convertHiddenOptions(body,hiddenDates);var start=moment(body.range.start);var end=moment(body.range.end);var totalRange=body.range.end-body.range.start;var pixelTime=totalRange/body.domProps.centerContainer.width;for(var i=0;i<hiddenDates.length;i++){if(hiddenDates[i].repeat!==undefined){var startDate=moment(hiddenDates[i].start);var endDate=moment(hiddenDates[i].end);if(startDate._d=="Invalid Date"){throw new Error("Supplied start date is not valid: "+hiddenDates[i].start);}
if(endDate._d=="Invalid Date"){throw new Error("Supplied end date is not valid: "+hiddenDates[i].end);}
var duration=endDate-startDate;if(duration>=4*pixelTime){var offset=0;var runUntil=end.clone();switch(hiddenDates[i].repeat){case"daily":if(startDate.day()!=endDate.day()){offset=1;}
startDate.dayOfYear(start.dayOfYear());startDate.year(start.year());startDate.subtract(7,"days");endDate.dayOfYear(start.dayOfYear());endDate.year(start.year());endDate.subtract(7-offset,"days");runUntil.add(1,"weeks");break;case"weekly":var dayOffset=endDate.diff(startDate,"days");var day=startDate.day();startDate.date(start.date());startDate.month(start.month());startDate.year(start.year());endDate=startDate.clone();startDate.day(day);endDate.day(day);endDate.add(dayOffset,"days");startDate.subtract(1,"weeks");endDate.subtract(1,"weeks");runUntil.add(1,"weeks");break;case"monthly":if(startDate.month()!=endDate.month()){offset=1;}
startDate.month(start.month());startDate.year(start.year());startDate.subtract(1,"months");endDate.month(start.month());endDate.year(start.year());endDate.subtract(1,"months");endDate.add(offset,"months");runUntil.add(1,"months");break;case"yearly":if(startDate.year()!=endDate.year()){offset=1;}
startDate.year(start.year());startDate.subtract(1,"years");endDate.year(start.year());endDate.subtract(1,"years");endDate.add(offset,"years");runUntil.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",hiddenDates[i].repeat);return;}
while(startDate<runUntil){body.hiddenDates.push({start:startDate.valueOf(),end:endDate.valueOf()});switch(hiddenDates[i].repeat){case"daily":startDate.add(1,"days");endDate.add(1,"days");break;case"weekly":startDate.add(1,"weeks");endDate.add(1,"weeks");break;case"monthly":startDate.add(1,"months");endDate.add(1,"months");break;case"yearly":startDate.add(1,"y");endDate.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",hiddenDates[i].repeat);return;}}
body.hiddenDates.push({start:startDate.valueOf(),end:endDate.valueOf()});}}}
exports.removeDuplicates(body);var startHidden=exports.isHidden(body.range.start,body.hiddenDates);var endHidden=exports.isHidden(body.range.end,body.hiddenDates);var rangeStart=body.range.start;var rangeEnd=body.range.end;if(startHidden.hidden==true){rangeStart=body.range.startToFront==true?startHidden.startDate-1:startHidden.endDate+1;}
if(endHidden.hidden==true){rangeEnd=body.range.endToFront==true?endHidden.startDate-1:endHidden.endDate+1;}
if(startHidden.hidden==true||endHidden.hidden==true){body.range._applyRange(rangeStart,rangeEnd);}}};exports.removeDuplicates=function(body){var hiddenDates=body.hiddenDates;var safeDates=[];for(var i=0;i<hiddenDates.length;i++){for(var j=0;j<hiddenDates.length;j++){if(i!=j&&hiddenDates[j].remove!=true&&hiddenDates[i].remove!=true){if(hiddenDates[j].start>=hiddenDates[i].start&&hiddenDates[j].end<=hiddenDates[i].end){hiddenDates[j].remove=true;}
else if(hiddenDates[j].start>=hiddenDates[i].start&&hiddenDates[j].start<=hiddenDates[i].end){hiddenDates[i].end=hiddenDates[j].end;hiddenDates[j].remove=true;}
else if(hiddenDates[j].end>=hiddenDates[i].start&&hiddenDates[j].end<=hiddenDates[i].end){hiddenDates[i].start=hiddenDates[j].start;hiddenDates[j].remove=true;}}}}
for(var i=0;i<hiddenDates.length;i++){if(hiddenDates[i].remove!==true){safeDates.push(hiddenDates[i]);}}
body.hiddenDates=safeDates;body.hiddenDates.sort(function(a,b){return a.start-b.start;});};exports.printDates=function(dates){for(var i=0;i<dates.length;i++){console.log(i,new Date(dates[i].start),new Date(dates[i].end),dates[i].start,dates[i].end,dates[i].remove);}};exports.stepOverHiddenDates=function(timeStep,previousTime){var stepInHidden=false;var currentValue=timeStep.current.valueOf();for(var i=0;i<timeStep.hiddenDates.length;i++){var startDate=timeStep.hiddenDates[i].start;var endDate=timeStep.hiddenDates[i].end;if(currentValue>=startDate&&currentValue<endDate){stepInHidden=true;break;}}
if(stepInHidden==true&&currentValue<timeStep._end.valueOf()&&currentValue!=previousTime){var prevValue=moment(previousTime);var newValue=moment(endDate);if(prevValue.year()!=newValue.year()){timeStep.switchedYear=true;}else if(prevValue.month()!=newValue.month()){timeStep.switchedMonth=true;}else if(prevValue.dayOfYear()!=newValue.dayOfYear()){timeStep.switchedDay=true;}
timeStep.current=newValue.toDate();}};exports.toScreen=function(Core,time,width){if(Core.body.hiddenDates.length==0){var conversion=Core.range.conversion(width);return(time.valueOf()-conversion.offset)*conversion.scale;}else{var hidden=exports.isHidden(time,Core.body.hiddenDates);if(hidden.hidden==true){time=hidden.startDate;}
var duration=exports.getHiddenDurationBetween(Core.body.hiddenDates,Core.range.start,Core.range.end);time=exports.correctTimeForHidden(Core.body.hiddenDates,Core.range,time);var conversion=Core.range.conversion(width,duration);return(time.valueOf()-conversion.offset)*conversion.scale;}};exports.toTime=function(Core,x,width){if(Core.body.hiddenDates.length==0){var conversion=Core.range.conversion(width);return new Date(x/conversion.scale+conversion.offset);}else{var hiddenDuration=exports.getHiddenDurationBetween(Core.body.hiddenDates,Core.range.start,Core.range.end);var totalDuration=Core.range.end-Core.range.start-hiddenDuration;var partialDuration=totalDuration*x/width;var accumulatedHiddenDuration=exports.getAccumulatedHiddenDuration(Core.body.hiddenDates,Core.range,partialDuration);var newTime=new Date(accumulatedHiddenDuration+partialDuration+Core.range.start);return newTime;}};exports.getHiddenDurationBetween=function(hiddenDates,start,end){var duration=0;for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start;var endDate=hiddenDates[i].end;if(startDate>=start&&endDate<end){duration+=endDate-startDate;}}
return duration;};exports.correctTimeForHidden=function(hiddenDates,range,time){time=moment(time).toDate().valueOf();time-=exports.getHiddenDurationBefore(hiddenDates,range,time);return time;};exports.getHiddenDurationBefore=function(hiddenDates,range,time){var timeOffset=0;time=moment(time).toDate().valueOf();for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start;var endDate=hiddenDates[i].end;if(startDate>=range.start&&endDate<range.end){if(time>=endDate){timeOffset+=endDate-startDate;}}}
return timeOffset;};exports.getAccumulatedHiddenDuration=function(hiddenDates,range,requiredDuration){var hiddenDuration=0;var duration=0;var previousPoint=range.start;for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start;var endDate=hiddenDates[i].end;if(startDate>=range.start&&endDate<range.end){duration+=startDate-previousPoint;previousPoint=endDate;if(duration>=requiredDuration){break;}else{hiddenDuration+=endDate-startDate;}}}
return hiddenDuration;};exports.snapAwayFromHidden=function(hiddenDates,time,direction,correctionEnabled){var isHidden=exports.isHidden(time,hiddenDates);if(isHidden.hidden==true){if(direction<0){if(correctionEnabled==true){return isHidden.startDate-(isHidden.endDate-time)-1;}else{return isHidden.startDate-1;}}else{if(correctionEnabled==true){return isHidden.endDate+(time-isHidden.startDate)+1;}else{return isHidden.endDate+1;}}}else{return time;}};exports.isHidden=function(time,hiddenDates){for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start;var endDate=hiddenDates[i].end;if(time>=startDate&&time<endDate){return{hidden:true,startDate:startDate,endDate:endDate};break;}}
return{hidden:false,startDate:startDate,endDate:endDate};};},function(module,exports,__webpack_require__){'use strict';var Emitter=__webpack_require__(13);var Hammer=__webpack_require__(23);var hammerUtil=__webpack_require__(28);var util=__webpack_require__(1);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var Range=__webpack_require__(27);var ItemSet=__webpack_require__(31);var TimeAxis=__webpack_require__(41);var Activator=__webpack_require__(42);var DateUtil=__webpack_require__(29);var CustomTime=__webpack_require__(44);function Core(){}
Emitter(Core.prototype);Core.prototype._create=function(container){this.dom={};this.dom.container=container;this.dom.root=document.createElement('div');this.dom.background=document.createElement('div');this.dom.backgroundVertical=document.createElement('div');this.dom.backgroundHorizontal=document.createElement('div');this.dom.centerContainer=document.createElement('div');this.dom.leftContainer=document.createElement('div');this.dom.rightContainer=document.createElement('div');this.dom.center=document.createElement('div');this.dom.left=document.createElement('div');this.dom.right=document.createElement('div');this.dom.top=document.createElement('div');this.dom.bottom=document.createElement('div');this.dom.shadowTop=document.createElement('div');this.dom.shadowBottom=document.createElement('div');this.dom.shadowTopLeft=document.createElement('div');this.dom.shadowBottomLeft=document.createElement('div');this.dom.shadowTopRight=document.createElement('div');this.dom.shadowBottomRight=document.createElement('div');this.dom.root.className='vis-timeline';this.dom.background.className='vis-panel vis-background';this.dom.backgroundVertical.className='vis-panel vis-background vis-vertical';this.dom.backgroundHorizontal.className='vis-panel vis-background vis-horizontal';this.dom.centerContainer.className='vis-panel vis-center';this.dom.leftContainer.className='vis-panel vis-left';this.dom.rightContainer.className='vis-panel vis-right';this.dom.top.className='vis-panel vis-top';this.dom.bottom.className='vis-panel vis-bottom';this.dom.left.className='vis-content';this.dom.center.className='vis-content';this.dom.right.className='vis-content';this.dom.shadowTop.className='vis-shadow vis-top';this.dom.shadowBottom.className='vis-shadow vis-bottom';this.dom.shadowTopLeft.className='vis-shadow vis-top';this.dom.shadowBottomLeft.className='vis-shadow vis-bottom';this.dom.shadowTopRight.className='vis-shadow vis-top';this.dom.shadowBottomRight.className='vis-shadow vis-bottom';this.dom.root.appendChild(this.dom.background);this.dom.root.appendChild(this.dom.backgroundVertical);this.dom.root.appendChild(this.dom.backgroundHorizontal);this.dom.root.appendChild(this.dom.centerContainer);this.dom.root.appendChild(this.dom.leftContainer);this.dom.root.appendChild(this.dom.rightContainer);this.dom.root.appendChild(this.dom.top);this.dom.root.appendChild(this.dom.bottom);this.dom.centerContainer.appendChild(this.dom.center);this.dom.leftContainer.appendChild(this.dom.left);this.dom.rightContainer.appendChild(this.dom.right);this.dom.centerContainer.appendChild(this.dom.shadowTop);this.dom.centerContainer.appendChild(this.dom.shadowBottom);this.dom.leftContainer.appendChild(this.dom.shadowTopLeft);this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft);this.dom.rightContainer.appendChild(this.dom.shadowTopRight);this.dom.rightContainer.appendChild(this.dom.shadowBottomRight);this.on('rangechange',this.redraw.bind(this));this.on('touch',this._onTouch.bind(this));this.on('pan',this._onDrag.bind(this));var me=this;this.on('change',function(properties){if(properties&&properties.queue==true){if(!me._redrawTimer){me._redrawTimer=setTimeout(function(){me._redrawTimer=null;me._redraw();},0);}}else{me._redraw();}});this.hammer=new Hammer(this.dom.root);this.hammer.get('pinch').set({enable:true});this.listeners={};var events=['tap','doubletap','press','pinch','pan','panstart','panmove','panend'];events.forEach(function(type){var listener=function listener(event){if(me.isActive()){me.emit(type,event);}};me.hammer.on(type,listener);me.listeners[type]=listener;});hammerUtil.onTouch(this.hammer,(function(event){me.emit('touch',event);}).bind(this));hammerUtil.onRelease(this.hammer,(function(event){me.emit('release',event);}).bind(this));function onMouseWheel(event){if(me.isActive()){me.emit('mousewheel',event);}}
this.dom.root.addEventListener('mousewheel',onMouseWheel);this.dom.root.addEventListener('DOMMouseScroll',onMouseWheel);this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0};this.customTimes=[];this.touch={};this.redrawCount=0;if(!container)throw new Error('No container provided');container.appendChild(this.dom.root);};Core.prototype.setOptions=function(options){if(options){var fields=['width','height','minHeight','maxHeight','autoResize','start','end','clickToUse','dataAttributes','hiddenDates'];util.selectiveExtend(fields,this.options,options);if('orientation'in options){if(typeof options.orientation==='string'){this.options.orientation={item:options.orientation,axis:options.orientation};}else if(typeof options.orientation==='object'){if('item'in options.orientation){this.options.orientation.item=options.orientation.item;}
if('axis'in options.orientation){this.options.orientation.axis=options.orientation.axis;}}}
if(this.options.orientation.axis==='both'){if(!this.timeAxis2){var timeAxis2=this.timeAxis2=new TimeAxis(this.body);timeAxis2.setOptions=function(options){var _options=options?util.extend({},options):{};_options.orientation='top';TimeAxis.prototype.setOptions.call(timeAxis2,_options);};this.components.push(timeAxis2);}}else{if(this.timeAxis2){var index=this.components.indexOf(this.timeAxis2);if(index!==-1){this.components.splice(index,1);}
this.timeAxis2.destroy();this.timeAxis2=null;}}
if('hiddenDates'in this.options){DateUtil.convertHiddenOptions(this.body,this.options.hiddenDates);}
if('clickToUse'in options){if(options.clickToUse){if(!this.activator){this.activator=new Activator(this.dom.root);}}else{if(this.activator){this.activator.destroy();delete this.activator;}}}
if('showCustomTime'in options){throw new Error('Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])');}
this._initAutoResize();}
this.components.forEach(function(component){return component.setOptions(options);});if('configure'in options){if(!this.configurator){this.configurator=this._createConfigurator();}
this.configurator.setOptions(options.configure);var appliedOptions=util.deepExtend({},this.options);this.components.forEach(function(component){util.deepExtend(appliedOptions,component.options);});this.configurator.setModuleOptions({global:appliedOptions});}
this._redraw();};Core.prototype.isActive=function(){return!this.activator||this.activator.active;};Core.prototype.destroy=function(){this.setItems(null);this.setGroups(null);this.off();this._stopAutoResize();if(this.dom.root.parentNode){this.dom.root.parentNode.removeChild(this.dom.root);}
this.dom=null;if(this.activator){this.activator.destroy();delete this.activator;}
for(var event in this.listeners){if(this.listeners.hasOwnProperty(event)){delete this.listeners[event];}}
this.listeners=null;this.hammer=null;this.components.forEach(function(component){return component.destroy();});this.body=null;};Core.prototype.setCustomTime=function(time,id){var customTimes=this.customTimes.filter(function(component){return id===component.options.id;});if(customTimes.length===0){throw new Error('No custom time bar found with id '+JSON.stringify(id));}
if(customTimes.length>0){customTimes[0].setCustomTime(time);}};Core.prototype.getCustomTime=function(id){var customTimes=this.customTimes.filter(function(component){return component.options.id===id;});if(customTimes.length===0){throw new Error('No custom time bar found with id '+JSON.stringify(id));}
return customTimes[0].getCustomTime();};Core.prototype.addCustomTime=function(time,id){var timestamp=time!==undefined?util.convert(time,'Date').valueOf():new Date();var exists=this.customTimes.some(function(customTime){return customTime.options.id===id;});if(exists){throw new Error('A custom time with id '+JSON.stringify(id)+' already exists');}
var customTime=new CustomTime(this.body,{time:timestamp,id:id});this.customTimes.push(customTime);this.components.push(customTime);this.redraw();return id;};Core.prototype.removeCustomTime=function(id){var customTimes=this.customTimes.filter(function(bar){return bar.options.id===id;});if(customTimes.length===0){throw new Error('No custom time bar found with id '+JSON.stringify(id));}
customTimes.forEach((function(customTime){this.customTimes.splice(this.customTimes.indexOf(customTime),1);this.components.splice(this.components.indexOf(customTime),1);customTime.destroy();}).bind(this));};Core.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[];};Core.prototype.fit=function(options){var range=this.getDataRange();if(range.min===null&&range.max===null){return;}
var interval=range.max-range.min;var min=new Date(range.min.valueOf()-interval*0.01);var max=new Date(range.max.valueOf()+interval*0.01);var animation=options&&options.animation!==undefined?options.animation:true;this.range.setRange(min,max,animation);};Core.prototype.getDataRange=function(){throw new Error('Cannot invoke abstract method getDataRange');};Core.prototype.setWindow=function(start,end,options){var animation;if(arguments.length==1){var range=arguments[0];animation=range.animation!==undefined?range.animation:true;this.range.setRange(range.start,range.end,animation);}else{animation=options&&options.animation!==undefined?options.animation:true;this.range.setRange(start,end,animation);}};Core.prototype.moveTo=function(time,options){var interval=this.range.end-this.range.start;var t=util.convert(time,'Date').valueOf();var start=t-interval/2;var end=t+interval/2;var animation=options&&options.animation!==undefined?options.animation:true;this.range.setRange(start,end,animation);};Core.prototype.getWindow=function(){var range=this.range.getRange();return{start:new Date(range.start),end:new Date(range.end)};};Core.prototype.redraw=function(){this._redraw();};Core.prototype._redraw=function(){var resized=false;var options=this.options;var props=this.props;var dom=this.dom;if(!dom)return;DateUtil.updateHiddenDates(this.body,this.options.hiddenDates);if(options.orientation=='top'){util.addClassName(dom.root,'vis-top');util.removeClassName(dom.root,'vis-bottom');}else{util.removeClassName(dom.root,'vis-top');util.addClassName(dom.root,'vis-bottom');}
dom.root.style.maxHeight=util.option.asSize(options.maxHeight,'');dom.root.style.minHeight=util.option.asSize(options.minHeight,'');dom.root.style.width=util.option.asSize(options.width,'');props.border.left=(dom.centerContainer.offsetWidth-dom.centerContainer.clientWidth)/2;props.border.right=props.border.left;props.border.top=(dom.centerContainer.offsetHeight-dom.centerContainer.clientHeight)/2;props.border.bottom=props.border.top;var borderRootHeight=dom.root.offsetHeight-dom.root.clientHeight;var borderRootWidth=dom.root.offsetWidth-dom.root.clientWidth;if(dom.centerContainer.clientHeight===0){props.border.left=props.border.top;props.border.right=props.border.left;}
if(dom.root.clientHeight===0){borderRootWidth=borderRootHeight;}
props.center.height=dom.center.offsetHeight;props.left.height=dom.left.offsetHeight;props.right.height=dom.right.offsetHeight;props.top.height=dom.top.clientHeight||-props.border.top;props.bottom.height=dom.bottom.clientHeight||-props.border.bottom;var contentHeight=Math.max(props.left.height,props.center.height,props.right.height);var autoHeight=props.top.height+contentHeight+props.bottom.height+borderRootHeight+props.border.top+props.border.bottom;dom.root.style.height=util.option.asSize(options.height,autoHeight+'px');props.root.height=dom.root.offsetHeight;props.background.height=props.root.height-borderRootHeight;var containerHeight=props.root.height-props.top.height-props.bottom.height-borderRootHeight;props.centerContainer.height=containerHeight;props.leftContainer.height=containerHeight;props.rightContainer.height=props.leftContainer.height;props.root.width=dom.root.offsetWidth;props.background.width=props.root.width-borderRootWidth;props.left.width=dom.leftContainer.clientWidth||-props.border.left;props.leftContainer.width=props.left.width;props.right.width=dom.rightContainer.clientWidth||-props.border.right;props.rightContainer.width=props.right.width;var centerWidth=props.root.width-props.left.width-props.right.width-borderRootWidth;props.center.width=centerWidth;props.centerContainer.width=centerWidth;props.top.width=centerWidth;props.bottom.width=centerWidth;dom.background.style.height=props.background.height+'px';dom.backgroundVertical.style.height=props.background.height+'px';dom.backgroundHorizontal.style.height=props.centerContainer.height+'px';dom.centerContainer.style.height=props.centerContainer.height+'px';dom.leftContainer.style.height=props.leftContainer.height+'px';dom.rightContainer.style.height=props.rightContainer.height+'px';dom.background.style.width=props.background.width+'px';dom.backgroundVertical.style.width=props.centerContainer.width+'px';dom.backgroundHorizontal.style.width=props.background.width+'px';dom.centerContainer.style.width=props.center.width+'px';dom.top.style.width=props.top.width+'px';dom.bottom.style.width=props.bottom.width+'px';dom.background.style.left='0';dom.background.style.top='0';dom.backgroundVertical.style.left=props.left.width+props.border.left+'px';dom.backgroundVertical.style.top='0';dom.backgroundHorizontal.style.left='0';dom.backgroundHorizontal.style.top=props.top.height+'px';dom.centerContainer.style.left=props.left.width+'px';dom.centerContainer.style.top=props.top.height+'px';dom.leftContainer.style.left='0';dom.leftContainer.style.top=props.top.height+'px';dom.rightContainer.style.left=props.left.width+props.center.width+'px';dom.rightContainer.style.top=props.top.height+'px';dom.top.style.left=props.left.width+'px';dom.top.style.top='0';dom.bottom.style.left=props.left.width+'px';dom.bottom.style.top=props.top.height+props.centerContainer.height+'px';this._updateScrollTop();var offset=this.props.scrollTop;if(options.orientation.item!='top'){offset+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0);}
dom.center.style.left='0';dom.center.style.top=offset+'px';dom.left.style.left='0';dom.left.style.top=offset+'px';dom.right.style.left='0';dom.right.style.top=offset+'px';var visibilityTop=this.props.scrollTop==0?'hidden':'';var visibilityBottom=this.props.scrollTop==this.props.scrollTopMin?'hidden':'';dom.shadowTop.style.visibility=visibilityTop;dom.shadowBottom.style.visibility=visibilityBottom;dom.shadowTopLeft.style.visibility=visibilityTop;dom.shadowBottomLeft.style.visibility=visibilityBottom;dom.shadowTopRight.style.visibility=visibilityTop;dom.shadowBottomRight.style.visibility=visibilityBottom;this.components.forEach(function(component){resized=component.redraw()||resized;});if(resized){var MAX_REDRAWS=3;if(this.redrawCount<MAX_REDRAWS){this.redrawCount++;this._redraw();}else{console.log('WARNING: infinite loop in redraw?');}
this.redrawCount=0;}};Core.prototype.repaint=function(){throw new Error('Function repaint is deprecated. Use redraw instead.');};Core.prototype.setCurrentTime=function(time){if(!this.currentTime){throw new Error('Option showCurrentTime must be true');}
this.currentTime.setCurrentTime(time);};Core.prototype.getCurrentTime=function(){if(!this.currentTime){throw new Error('Option showCurrentTime must be true');}
return this.currentTime.getCurrentTime();};Core.prototype._toTime=function(x){return DateUtil.toTime(this,x,this.props.center.width);};Core.prototype._toGlobalTime=function(x){return DateUtil.toTime(this,x,this.props.root.width);};Core.prototype._toScreen=function(time){return DateUtil.toScreen(this,time,this.props.center.width);};Core.prototype._toGlobalScreen=function(time){return DateUtil.toScreen(this,time,this.props.root.width);};Core.prototype._initAutoResize=function(){if(this.options.autoResize==true){this._startAutoResize();}else{this._stopAutoResize();}};Core.prototype._startAutoResize=function(){var me=this;this._stopAutoResize();this._onResize=function(){if(me.options.autoResize!=true){me._stopAutoResize();return;}
if(me.dom.root){if(me.dom.root.offsetWidth!=me.props.lastWidth||me.dom.root.offsetHeight!=me.props.lastHeight){me.props.lastWidth=me.dom.root.offsetWidth;me.props.lastHeight=me.dom.root.offsetHeight;me.emit('change');}}};util.addEventListener(window,'resize',this._onResize);this.watchTimer=setInterval(this._onResize,1000);};Core.prototype._stopAutoResize=function(){if(this.watchTimer){clearInterval(this.watchTimer);this.watchTimer=undefined;}
util.removeEventListener(window,'resize',this._onResize);this._onResize=null;};Core.prototype._onTouch=function(event){this.touch.allowDragging=true;this.touch.initialScrollTop=this.props.scrollTop;};Core.prototype._onPinch=function(event){this.touch.allowDragging=false;};Core.prototype._onDrag=function(event){if(!this.touch.allowDragging)return;var delta=event.deltaY;var oldScrollTop=this._getScrollTop();var newScrollTop=this._setScrollTop(this.touch.initialScrollTop+delta);if(newScrollTop!=oldScrollTop){this._redraw();this.emit('verticalDrag');}};Core.prototype._setScrollTop=function(scrollTop){this.props.scrollTop=scrollTop;this._updateScrollTop();return this.props.scrollTop;};Core.prototype._updateScrollTop=function(){var scrollTopMin=Math.min(this.props.centerContainer.height-this.props.center.height,0);if(scrollTopMin!=this.props.scrollTopMin){if(this.options.orientation.item!='top'){this.props.scrollTop+=scrollTopMin-this.props.scrollTopMin;}
this.props.scrollTopMin=scrollTopMin;}
if(this.props.scrollTop>0)this.props.scrollTop=0;if(this.props.scrollTop<scrollTopMin)this.props.scrollTop=scrollTopMin;return this.props.scrollTop;};Core.prototype._getScrollTop=function(){return this.props.scrollTop;};Core.prototype._createConfigurator=function(){throw new Error('Cannot invoke abstract method _createConfigurator');};module.exports=Core;},function(module,exports,__webpack_require__){'use strict';var Hammer=__webpack_require__(23);var util=__webpack_require__(1);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var TimeStep=__webpack_require__(36);var Component=__webpack_require__(21);var Group=__webpack_require__(32);var BackgroundGroup=__webpack_require__(37);var BoxItem=__webpack_require__(38);var PointItem=__webpack_require__(39);var RangeItem=__webpack_require__(34);var BackgroundItem=__webpack_require__(40);var UNGROUPED='__ungrouped__';var BACKGROUND='__background__';function ItemSet(body,options){this.body=body;this.defaultOptions={type:null,orientation:{item:'bottom'},align:'auto',stack:true,groupOrder:null,selectable:true,multiselect:false,editable:{updateTime:false,updateGroup:false,add:false,remove:false},snap:TimeStep.snap,onAdd:function onAdd(item,callback){callback(item);},onUpdate:function onUpdate(item,callback){callback(item);},onMove:function onMove(item,callback){callback(item);},onRemove:function onRemove(item,callback){callback(item);},onMoving:function onMoving(item,callback){callback(item);},margin:{item:{horizontal:10,vertical:10},axis:20}};this.options=util.extend({},this.defaultOptions);this.itemOptions={type:{start:'Date',end:'Date'}};this.conversion={toScreen:body.util.toScreen,toTime:body.util.toTime};this.dom={};this.props={};this.hammer=null;var me=this;this.itemsData=null;this.groupsData=null;this.itemListeners={'add':function add(event,params,senderId){me._onAdd(params.items);},'update':function update(event,params,senderId){me._onUpdate(params.items);},'remove':function remove(event,params,senderId){me._onRemove(params.items);}};this.groupListeners={'add':function add(event,params,senderId){me._onAddGroups(params.items);},'update':function update(event,params,senderId){me._onUpdateGroups(params.items);},'remove':function remove(event,params,senderId){me._onRemoveGroups(params.items);}};this.items={};this.groups={};this.groupIds=[];this.selection=[];this.stackDirty=true;this.touchParams={};this._create();this.setOptions(options);}
ItemSet.prototype=new Component();ItemSet.types={background:BackgroundItem,box:BoxItem,range:RangeItem,point:PointItem};ItemSet.prototype._create=function(){var frame=document.createElement('div');frame.className='vis-itemset';frame['timeline-itemset']=this;this.dom.frame=frame;var background=document.createElement('div');background.className='vis-background';frame.appendChild(background);this.dom.background=background;var foreground=document.createElement('div');foreground.className='vis-foreground';frame.appendChild(foreground);this.dom.foreground=foreground;var axis=document.createElement('div');axis.className='vis-axis';this.dom.axis=axis;var labelSet=document.createElement('div');labelSet.className='vis-labelset';this.dom.labelSet=labelSet;this._updateUngrouped();var backgroundGroup=new BackgroundGroup(BACKGROUND,null,this);backgroundGroup.show();this.groups[BACKGROUND]=backgroundGroup;this.hammer=new Hammer(this.body.dom.centerContainer);this.hammer.on('hammer.input',(function(event){if(event.isFirst){this._onTouch(event);}}).bind(this));this.hammer.on('panstart',this._onDragStart.bind(this));this.hammer.on('panmove',this._onDrag.bind(this));this.hammer.on('panend',this._onDragEnd.bind(this));this.hammer.on('tap',this._onSelectItem.bind(this));this.hammer.on('press',this._onMultiSelectItem.bind(this));this.hammer.on('doubletap',this._onAddItem.bind(this));this.show();};ItemSet.prototype.setOptions=function(options){if(options){var fields=['type','align','order','stack','selectable','multiselect','groupOrder','dataAttributes','template','hide','snap'];util.selectiveExtend(fields,this.options,options);if('orientation'in options){if(typeof options.orientation==='string'){this.options.orientation.item=options.orientation==='top'?'top':'bottom';}else if(typeof options.orientation==='object'&&'item'in options.orientation){this.options.orientation.item=options.orientation.item;}}
if('margin'in options){if(typeof options.margin==='number'){this.options.margin.axis=options.margin;this.options.margin.item.horizontal=options.margin;this.options.margin.item.vertical=options.margin;}else if(typeof options.margin==='object'){util.selectiveExtend(['axis'],this.options.margin,options.margin);if('item'in options.margin){if(typeof options.margin.item==='number'){this.options.margin.item.horizontal=options.margin.item;this.options.margin.item.vertical=options.margin.item;}else if(typeof options.margin.item==='object'){util.selectiveExtend(['horizontal','vertical'],this.options.margin.item,options.margin.item);}}}}
if('editable'in options){if(typeof options.editable==='boolean'){this.options.editable.updateTime=options.editable;this.options.editable.updateGroup=options.editable;this.options.editable.add=options.editable;this.options.editable.remove=options.editable;}else if(typeof options.editable==='object'){util.selectiveExtend(['updateTime','updateGroup','add','remove'],this.options.editable,options.editable);}}
var addCallback=(function(name){var fn=options[name];if(fn){if(!(fn instanceof Function)){throw new Error('option '+name+' must be a function '+name+'(item, callback)');}
this.options[name]=fn;}}).bind(this);['onAdd','onUpdate','onRemove','onMove','onMoving'].forEach(addCallback);this.markDirty();}};ItemSet.prototype.markDirty=function(options){this.groupIds=[];this.stackDirty=true;if(options&&options.refreshItems){util.forEach(this.items,function(item){item.dirty=true;if(item.displayed)item.redraw();});}};ItemSet.prototype.destroy=function(){this.hide();this.setItems(null);this.setGroups(null);this.hammer=null;this.body=null;this.conversion=null;};ItemSet.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame);}
if(this.dom.axis.parentNode){this.dom.axis.parentNode.removeChild(this.dom.axis);}
if(this.dom.labelSet.parentNode){this.dom.labelSet.parentNode.removeChild(this.dom.labelSet);}};ItemSet.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame);}
if(!this.dom.axis.parentNode){this.body.dom.backgroundVertical.appendChild(this.dom.axis);}
if(!this.dom.labelSet.parentNode){this.body.dom.left.appendChild(this.dom.labelSet);}};ItemSet.prototype.setSelection=function(ids){var i,ii,id,item;if(ids==undefined)ids=[];if(!Array.isArray(ids))ids=[ids];for(i=0,ii=this.selection.length;i<ii;i++){id=this.selection[i];item=this.items[id];if(item)item.unselect();}
this.selection=[];for(i=0,ii=ids.length;i<ii;i++){id=ids[i];item=this.items[id];if(item){this.selection.push(id);item.select();}}};ItemSet.prototype.getSelection=function(){return this.selection.concat([]);};ItemSet.prototype.getVisibleItems=function(){var range=this.body.range.getRange();var left=this.body.util.toScreen(range.start);var right=this.body.util.toScreen(range.end);var ids=[];for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){var group=this.groups[groupId];var rawVisibleItems=group.visibleItems;for(var i=0;i<rawVisibleItems.length;i++){var item=rawVisibleItems[i];if(item.left<right&&item.left+item.width>left){ids.push(item.id);}}}}
return ids;};ItemSet.prototype._deselect=function(id){var selection=this.selection;for(var i=0,ii=selection.length;i<ii;i++){if(selection[i]==id){selection.splice(i,1);break;}}};ItemSet.prototype.redraw=function(){var margin=this.options.margin,range=this.body.range,asSize=util.option.asSize,options=this.options,orientation=options.orientation.item,resized=false,frame=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top;this.props.left=this.body.domProps.left.width+this.body.domProps.border.left;frame.className='vis-itemset';resized=this._orderGroups()||resized;var visibleInterval=range.end-range.start;var zoomed=visibleInterval!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;if(zoomed)this.stackDirty=true;this.lastVisibleInterval=visibleInterval;this.props.lastWidth=this.props.width;var restack=this.stackDirty;var firstGroup=this._firstGroup();var firstMargin={item:margin.item,axis:margin.axis};var nonFirstMargin={item:margin.item,axis:margin.item.vertical/2};var height=0;var minHeight=margin.axis+margin.item.vertical;this.groups[BACKGROUND].redraw(range,nonFirstMargin,restack);util.forEach(this.groups,function(group){var groupMargin=group==firstGroup?firstMargin:nonFirstMargin;var groupResized=group.redraw(range,groupMargin,restack);resized=groupResized||resized;height+=group.height;});height=Math.max(height,minHeight);this.stackDirty=false;frame.style.height=asSize(height);this.props.width=frame.offsetWidth;this.props.height=height;this.dom.axis.style.top=asSize(orientation=='top'?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height);this.dom.axis.style.left='0';resized=this._isResized()||resized;return resized;};ItemSet.prototype._firstGroup=function(){var firstGroupIndex=this.options.orientation.item=='top'?0:this.groupIds.length-1;var firstGroupId=this.groupIds[firstGroupIndex];var firstGroup=this.groups[firstGroupId]||this.groups[UNGROUPED];return firstGroup||null;};ItemSet.prototype._updateUngrouped=function(){var ungrouped=this.groups[UNGROUPED];var background=this.groups[BACKGROUND];var item,itemId;if(this.groupsData){if(ungrouped){ungrouped.hide();delete this.groups[UNGROUPED];for(itemId in this.items){if(this.items.hasOwnProperty(itemId)){item=this.items[itemId];item.parent&&item.parent.remove(item);var groupId=this._getGroupId(item.data);var group=this.groups[groupId];group&&group.add(item)||item.hide();}}}}else{if(!ungrouped){var id=null;var data=null;ungrouped=new Group(id,data,this);this.groups[UNGROUPED]=ungrouped;for(itemId in this.items){if(this.items.hasOwnProperty(itemId)){item=this.items[itemId];ungrouped.add(item);}}
ungrouped.show();}}};ItemSet.prototype.getLabelSet=function(){return this.dom.labelSet;};ItemSet.prototype.setItems=function(items){var me=this,ids,oldItemsData=this.itemsData;if(!items){this.itemsData=null;}else if(items instanceof DataSet||items instanceof DataView){this.itemsData=items;}else{throw new TypeError('Data must be an instance of DataSet or DataView');}
if(oldItemsData){util.forEach(this.itemListeners,function(callback,event){oldItemsData.off(event,callback);});ids=oldItemsData.getIds();this._onRemove(ids);}
if(this.itemsData){var id=this.id;util.forEach(this.itemListeners,function(callback,event){me.itemsData.on(event,callback,id);});ids=this.itemsData.getIds();this._onAdd(ids);this._updateUngrouped();}};ItemSet.prototype.getItems=function(){return this.itemsData;};ItemSet.prototype.setGroups=function(groups){var me=this,ids;if(this.groupsData){util.forEach(this.groupListeners,function(callback,event){me.groupsData.off(event,callback);});ids=this.groupsData.getIds();this.groupsData=null;this._onRemoveGroups(ids);}
if(!groups){this.groupsData=null;}else if(groups instanceof DataSet||groups instanceof DataView){this.groupsData=groups;}else{throw new TypeError('Data must be an instance of DataSet or DataView');}
if(this.groupsData){var id=this.id;util.forEach(this.groupListeners,function(callback,event){me.groupsData.on(event,callback,id);});ids=this.groupsData.getIds();this._onAddGroups(ids);}
this._updateUngrouped();this._order();this.body.emitter.emit('change',{queue:true});};ItemSet.prototype.getGroups=function(){return this.groupsData;};ItemSet.prototype.removeItem=function(id){var item=this.itemsData.get(id),dataset=this.itemsData.getDataSet();if(item){this.options.onRemove(item,function(item){if(item){dataset.remove(id);}});}};ItemSet.prototype._getType=function(itemData){return itemData.type||this.options.type||(itemData.end?'range':'box');};ItemSet.prototype._getGroupId=function(itemData){var type=this._getType(itemData);if(type=='background'&&itemData.group==undefined){return BACKGROUND;}else{return this.groupsData?itemData.group:UNGROUPED;}};ItemSet.prototype._onUpdate=function(ids){var me=this;ids.forEach((function(id){var itemData=me.itemsData.get(id,me.itemOptions);var item=me.items[id];var type=me._getType(itemData);var constructor=ItemSet.types[type];var selected;if(item){if(!constructor||!(item instanceof constructor)){selected=item.selected;me._removeItem(item);item=null;}else{me._updateItem(item,itemData);}}
if(!item){if(constructor){item=new constructor(itemData,me.conversion,me.options);item.id=id;me._addItem(item);if(selected){this.selection.push(id);item.select();}}else if(type=='rangeoverflow'){throw new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: '+'.vis-item.vis-range .vis-item-content {overflow: visible;}');}else{throw new TypeError('Unknown item type "'+type+'"');}}}).bind(this));this._order();this.stackDirty=true;this.body.emitter.emit('change',{queue:true});};ItemSet.prototype._onAdd=ItemSet.prototype._onUpdate;ItemSet.prototype._onRemove=function(ids){var count=0;var me=this;ids.forEach(function(id){var item=me.items[id];if(item){count++;me._removeItem(item);}});if(count){this._order();this.stackDirty=true;this.body.emitter.emit('change',{queue:true});}};ItemSet.prototype._order=function(){util.forEach(this.groups,function(group){group.order();});};ItemSet.prototype._onUpdateGroups=function(ids){this._onAddGroups(ids);};ItemSet.prototype._onAddGroups=function(ids){var me=this;ids.forEach(function(id){var groupData=me.groupsData.get(id);var group=me.groups[id];if(!group){if(id==UNGROUPED||id==BACKGROUND){throw new Error('Illegal group id. '+id+' is a reserved id.');}
var groupOptions=Object.create(me.options);util.extend(groupOptions,{height:null});group=new Group(id,groupData,me);me.groups[id]=group;for(var itemId in me.items){if(me.items.hasOwnProperty(itemId)){var item=me.items[itemId];if(item.data.group==id){group.add(item);}}}
group.order();group.show();}else{group.setData(groupData);}});this.body.emitter.emit('change',{queue:true});};ItemSet.prototype._onRemoveGroups=function(ids){var groups=this.groups;ids.forEach(function(id){var group=groups[id];if(group){group.hide();delete groups[id];}});this.markDirty();this.body.emitter.emit('change',{queue:true});};ItemSet.prototype._orderGroups=function(){if(this.groupsData){var groupIds=this.groupsData.getIds({order:this.options.groupOrder});var changed=!util.equalArray(groupIds,this.groupIds);if(changed){var groups=this.groups;groupIds.forEach(function(groupId){groups[groupId].hide();});groupIds.forEach(function(groupId){groups[groupId].show();});this.groupIds=groupIds;}
return changed;}else{return false;}};ItemSet.prototype._addItem=function(item){this.items[item.id]=item;var groupId=this._getGroupId(item.data);var group=this.groups[groupId];if(group)group.add(item);};ItemSet.prototype._updateItem=function(item,itemData){var oldGroupId=item.data.group;var oldSubGroupId=item.data.subgroup;item.setData(itemData);if(oldGroupId!=item.data.group||oldSubGroupId!=item.data.subgroup){var oldGroup=this.groups[oldGroupId];if(oldGroup)oldGroup.remove(item);var groupId=this._getGroupId(item.data);var group=this.groups[groupId];if(group)group.add(item);}};ItemSet.prototype._removeItem=function(item){item.hide();delete this.items[item.id];var index=this.selection.indexOf(item.id);if(index!=-1)this.selection.splice(index,1);item.parent&&item.parent.remove(item);};ItemSet.prototype._constructByEndArray=function(array){var endArray=[];for(var i=0;i<array.length;i++){if(array[i]instanceof RangeItem){endArray.push(array[i]);}}
return endArray;};ItemSet.prototype._onTouch=function(event){this.touchParams.item=this.itemFromTarget(event);this.touchParams.dragLeftItem=event.target.dragLeftItem||false;this.touchParams.dragRightItem=event.target.dragRightItem||false;this.touchParams.itemProps=null;};ItemSet.prototype._onDragStart=function(event){var item=this.touchParams.item||null;var me=this;var props;if(item&&item.selected){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup&&!item.editable){return;}
if(item.editable===false){return;}
var dragLeftItem=this.touchParams.dragLeftItem;var dragRightItem=this.touchParams.dragRightItem;if(dragLeftItem){props={item:dragLeftItem,initialX:event.center.x,dragLeft:true,data:util.extend({},item.data)};this.touchParams.itemProps=[props];}else if(dragRightItem){props={item:dragRightItem,initialX:event.center.x,dragRight:true,data:util.extend({},item.data)};this.touchParams.itemProps=[props];}else{this.touchParams.itemProps=this.getSelection().map(function(id){var item=me.items[id];var props={item:item,initialX:event.center.x,data:util.extend({},item.data)};return props;});}
event.stopPropagation();}else if(this.options.editable.add&&(event.srcEvent.ctrlKey||event.srcEvent.metaKey)){this._onDragStartAddItem(event);}};ItemSet.prototype._onDragStartAddItem=function(event){var snap=this.options.snap||null;var xAbs=util.getAbsoluteLeft(this.dom.frame);var x=event.center.x-xAbs-10;var time=this.body.util.toTime(x);var scale=this.body.util.getScale();var step=this.body.util.getStep();var start=snap?snap(time,scale,step):start;var end=start;var itemData={type:'range',start:start,end:end,content:'new item'};var id=util.randomUUID();itemData[this.itemsData._fieldId]=id;var group=this.groupFromTarget(event);if(group){itemData.group=group.groupId;}
var newItem=new RangeItem(itemData,this.conversion,this.options);newItem.id=id;newItem.data=itemData;this._addItem(newItem);var props={item:newItem,dragRight:true,initialX:event.center.x,data:util.extend({},itemData)};this.touchParams.itemProps=[props];event.stopPropagation();};ItemSet.prototype._onDrag=function(event){if(this.touchParams.itemProps){event.stopPropagation();var me=this;var snap=this.options.snap||null;var xOffset=this.body.dom.root.offsetLeft+this.body.domProps.left.width;var scale=this.body.util.getScale();var step=this.body.util.getStep();this.touchParams.itemProps.forEach(function(props){var newProps={};var current=me.body.util.toTime(event.center.x-xOffset);var initial=me.body.util.toTime(props.initialX-xOffset);var offset=current-initial;var itemData=util.extend({},props.item.data);if(props.item.editable===false){return;}
var updateTimeAllowed=me.options.editable.updateTime||props.item.editable===true;if(updateTimeAllowed){if(props.dragLeft){if(itemData.start!=undefined){var initialStart=util.convert(props.data.start,'Date');var start=new Date(initialStart.valueOf()+offset);itemData.start=snap?snap(start,scale,step):start;}}else if(props.dragRight){if(itemData.end!=undefined){var initialEnd=util.convert(props.data.end,'Date');var end=new Date(initialEnd.valueOf()+offset);itemData.end=snap?snap(end,scale,step):end;}}else{if(itemData.start!=undefined){var initialStart=util.convert(props.data.start,'Date').valueOf();var start=new Date(initialStart+offset);if(itemData.end!=undefined){var initialEnd=util.convert(props.data.end,'Date');var duration=initialEnd.valueOf()-initialStart.valueOf();itemData.start=snap?snap(start,scale,step):start;itemData.end=new Date(itemData.start.valueOf()+duration);}else{itemData.start=snap?snap(start,scale,step):start;}}}}
var updateGroupAllowed=me.options.editable.updateGroup||props.item.editable===true;if(updateGroupAllowed&&(!props.dragLeft&&!props.dragRight)){if(itemData.group!=undefined){var group=me.groupFromTarget(event);if(group){itemData.group=group.groupId;}}}
me.options.onMoving(itemData,function(itemData){if(itemData){props.item.setData(itemData);}});});this.stackDirty=true;this.body.emitter.emit('change');}};ItemSet.prototype._moveToGroup=function(item,groupId){var group=this.groups[groupId];if(group&&group.groupId!=item.data.group){var oldGroup=item.parent;oldGroup.remove(item);oldGroup.order();group.add(item);group.order();item.data.group=group.groupId;}};ItemSet.prototype._onDragEnd=function(event){if(this.touchParams.itemProps){event.stopPropagation();var changes=[];var me=this;var dataset=this.itemsData.getDataSet();var itemProps=this.touchParams.itemProps;this.touchParams.itemProps=null;itemProps.forEach(function(props){var id=props.item.id;var exists=me.itemsData.get(id,me.itemOptions)!=null;if(!exists){me.options.onAdd(props.item.data,function(itemData){me._removeItem(props.item);if(itemData){me.itemsData.getDataSet().add(itemData);}
me.stackDirty=true;me.body.emitter.emit('change');});}else{var itemData=util.extend({},props.item.data);me.options.onMove(itemData,function(itemData){if(itemData){itemData[dataset._fieldId]=id;changes.push(itemData);}else{props.item.setData(props.data);me.stackDirty=true;me.body.emitter.emit('change');}});}});if(changes.length){dataset.update(changes);}}};ItemSet.prototype._onSelectItem=function(event){if(!this.options.selectable)return;var ctrlKey=event.srcEvent&&(event.srcEvent.ctrlKey||event.srcEvent.metaKey);var shiftKey=event.srcEvent&&event.srcEvent.shiftKey;if(ctrlKey||shiftKey){this._onMultiSelectItem(event);return;}
var oldSelection=this.getSelection();var item=this.itemFromTarget(event);var selection=item?[item.id]:[];this.setSelection(selection);var newSelection=this.getSelection();if(newSelection.length>0||oldSelection.length>0){this.body.emitter.emit('select',{items:newSelection,event:event});}};ItemSet.prototype._onAddItem=function(event){if(!this.options.selectable)return;if(!this.options.editable.add)return;var me=this;var snap=this.options.snap||null;var item=this.itemFromTarget(event);event.stopPropagation();if(item){var itemData=me.itemsData.get(item.id);this.options.onUpdate(itemData,function(itemData){if(itemData){me.itemsData.getDataSet().update(itemData);}});}else{var xAbs=util.getAbsoluteLeft(this.dom.frame);var x=event.center.x-xAbs;var start=this.body.util.toTime(x);var scale=this.body.util.getScale();var step=this.body.util.getStep();var newItem={start:snap?snap(start,scale,step):start,content:'new item'};if(this.options.type==='range'){var end=this.body.util.toTime(x+this.props.width/5);newItem.end=snap?snap(end,scale,step):end;}
newItem[this.itemsData._fieldId]=util.randomUUID();var group=this.groupFromTarget(event);if(group){newItem.group=group.groupId;}
this.options.onAdd(newItem,function(item){if(item){me.itemsData.getDataSet().add(item);}});}};ItemSet.prototype._onMultiSelectItem=function(event){if(!this.options.selectable)return;var item=this.itemFromTarget(event);if(item){var selection=this.options.multiselect?this.getSelection():[];var shiftKey=event.srcEvent&&event.srcEvent.shiftKey||false;if(shiftKey&&this.options.multiselect){selection.push(item.id);var range=ItemSet._getItemRange(this.itemsData.get(selection,this.itemOptions));selection=[];for(var id in this.items){if(this.items.hasOwnProperty(id)){var _item=this.items[id];var start=_item.data.start;var end=_item.data.end!==undefined?_item.data.end:start;if(start>=range.min&&end<=range.max&&!(_item instanceof BackgroundItem)){selection.push(_item.id);}}}}else{var index=selection.indexOf(item.id);if(index==-1){selection.push(item.id);}else{selection.splice(index,1);}}
this.setSelection(selection);this.body.emitter.emit('select',{items:this.getSelection(),event:event});}};ItemSet._getItemRange=function(itemsData){var max=null;var min=null;itemsData.forEach(function(data){if(min==null||data.start<min){min=data.start;}
if(data.end!=undefined){if(max==null||data.end>max){max=data.end;}}else{if(max==null||data.start>max){max=data.start;}}});return{min:min,max:max};};ItemSet.prototype.itemFromTarget=function(event){var target=event.target;while(target){if(target.hasOwnProperty('timeline-item')){return target['timeline-item'];}
target=target.parentNode;}
return null;};ItemSet.prototype.groupFromTarget=function(event){var clientY=event.center?event.center.y:event.clientY;for(var i=0;i<this.groupIds.length;i++){var groupId=this.groupIds[i];var group=this.groups[groupId];var foreground=group.dom.foreground;var top=util.getAbsoluteTop(foreground);if(clientY>top&&clientY<top+foreground.offsetHeight){return group;}
if(this.options.orientation.item==='top'){if(i===this.groupIds.length-1&&clientY>top){return group;}}else{if(i===0&&clientY<top+foreground.offset){return group;}}}
return null;};ItemSet.itemSetFromTarget=function(event){var target=event.target;while(target){if(target.hasOwnProperty('timeline-itemset')){return target['timeline-itemset'];}
target=target.parentNode;}
return null;};module.exports=ItemSet;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var stack=__webpack_require__(33);var RangeItem=__webpack_require__(34);function Group(groupId,data,itemSet){this.groupId=groupId;this.subgroups={};this.subgroupIndex=0;this.subgroupOrderer=data&&data.subgroupOrder;this.itemSet=itemSet;this.dom={};this.props={label:{width:0,height:0}};this.className=null;this.items={};this.visibleItems=[];this.orderedItems={byStart:[],byEnd:[]};this.checkRangedItems=false;var me=this;this.itemSet.body.emitter.on('checkRangedItems',function(){me.checkRangedItems=true;});this._create();this.setData(data);}
Group.prototype._create=function(){var label=document.createElement('div');label.className='vis-label';this.dom.label=label;var inner=document.createElement('div');inner.className='vis-inner';label.appendChild(inner);this.dom.inner=inner;var foreground=document.createElement('div');foreground.className='vis-group';foreground['timeline-group']=this;this.dom.foreground=foreground;this.dom.background=document.createElement('div');this.dom.background.className='vis-group';this.dom.axis=document.createElement('div');this.dom.axis.className='vis-group';this.dom.marker=document.createElement('div');this.dom.marker.style.visibility='hidden';this.dom.marker.innerHTML='?';this.dom.background.appendChild(this.dom.marker);};Group.prototype.setData=function(data){var content=data&&data.content;if(content instanceof Element){this.dom.inner.appendChild(content);}else if(content!==undefined&&content!==null){this.dom.inner.innerHTML=content;}else{this.dom.inner.innerHTML=this.groupId||'';}
this.dom.label.title=data&&data.title||'';if(!this.dom.inner.firstChild){util.addClassName(this.dom.inner,'vis-hidden');}else{util.removeClassName(this.dom.inner,'vis-hidden');}
var className=data&&data.className||null;if(className!=this.className){if(this.className){util.removeClassName(this.dom.label,this.className);util.removeClassName(this.dom.foreground,this.className);util.removeClassName(this.dom.background,this.className);util.removeClassName(this.dom.axis,this.className);}
util.addClassName(this.dom.label,className);util.addClassName(this.dom.foreground,className);util.addClassName(this.dom.background,className);util.addClassName(this.dom.axis,className);this.className=className;}
if(this.style){util.removeCssText(this.dom.label,'vis-'+this.style);this.style=null;}
if(data&&data.style){util.addCssText(this.dom.label,'vis-'+data.style);this.style=data.style;}};Group.prototype.getLabelWidth=function(){return this.props.label.width;};Group.prototype.redraw=function(range,margin,restack){var resized=false;var markerHeight=this.dom.marker.clientHeight;if(markerHeight!=this.lastMarkerHeight){this.lastMarkerHeight=markerHeight;util.forEach(this.items,function(item){item.dirty=true;if(item.displayed)item.redraw();});restack=true;}
if(typeof this.itemSet.options.order==='function'){if(restack){var me=this;var limitSize=false;util.forEach(this.items,function(item){if(!item.displayed){item.redraw();me.visibleItems.push(item);}
item.repositionX(limitSize);});var customOrderedItems=this.orderedItems.byStart.slice().sort(function(a,b){return me.itemSet.options.order(a.data,b.data);});stack.stack(customOrderedItems,margin,true);}
this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range);}else{this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range);if(this.itemSet.options.stack){stack.stack(this.visibleItems,margin,restack);}else{stack.nostack(this.visibleItems,margin,this.subgroups);}}
var height=this._calculateHeight(margin);var foreground=this.dom.foreground;this.top=foreground.offsetTop;this.left=foreground.offsetLeft;this.width=foreground.offsetWidth;resized=util.updateProperty(this,'height',height)||resized;resized=util.updateProperty(this.props.label,'width',this.dom.inner.clientWidth)||resized;resized=util.updateProperty(this.props.label,'height',this.dom.inner.clientHeight)||resized;this.dom.background.style.height=height+'px';this.dom.foreground.style.height=height+'px';this.dom.label.style.height=height+'px';for(var i=0,ii=this.visibleItems.length;i<ii;i++){var item=this.visibleItems[i];item.repositionY(margin);}
return resized;};Group.prototype._calculateHeight=function(margin){var height;var visibleItems=this.visibleItems;this.resetSubgroups();var me=this;if(visibleItems.length>0){var min=visibleItems[0].top;var max=visibleItems[0].top+visibleItems[0].height;util.forEach(visibleItems,function(item){min=Math.min(min,item.top);max=Math.max(max,item.top+item.height);if(item.data.subgroup!==undefined){me.subgroups[item.data.subgroup].height=Math.max(me.subgroups[item.data.subgroup].height,item.height);me.subgroups[item.data.subgroup].visible=true;}});if(min>margin.axis){var offset=min-margin.axis;max-=offset;util.forEach(visibleItems,function(item){item.top-=offset;});}
height=max+margin.item.vertical/2;}else{height=0;}
height=Math.max(height,this.props.label.height);return height;};Group.prototype.show=function(){if(!this.dom.label.parentNode){this.itemSet.dom.labelSet.appendChild(this.dom.label);}
if(!this.dom.foreground.parentNode){this.itemSet.dom.foreground.appendChild(this.dom.foreground);}
if(!this.dom.background.parentNode){this.itemSet.dom.background.appendChild(this.dom.background);}
if(!this.dom.axis.parentNode){this.itemSet.dom.axis.appendChild(this.dom.axis);}};Group.prototype.hide=function(){var label=this.dom.label;if(label.parentNode){label.parentNode.removeChild(label);}
var foreground=this.dom.foreground;if(foreground.parentNode){foreground.parentNode.removeChild(foreground);}
var background=this.dom.background;if(background.parentNode){background.parentNode.removeChild(background);}
var axis=this.dom.axis;if(axis.parentNode){axis.parentNode.removeChild(axis);}};Group.prototype.add=function(item){this.items[item.id]=item;item.setParent(this);if(item.data.subgroup!==undefined){if(this.subgroups[item.data.subgroup]===undefined){this.subgroups[item.data.subgroup]={height:0,visible:false,index:this.subgroupIndex,items:[]};this.subgroupIndex++;}
this.subgroups[item.data.subgroup].items.push(item);}
this.orderSubgroups();if(this.visibleItems.indexOf(item)==-1){var range=this.itemSet.body.range;this._checkIfVisible(item,this.visibleItems,range);}};Group.prototype.orderSubgroups=function(){if(this.subgroupOrderer!==undefined){var sortArray=[];if(typeof this.subgroupOrderer=='string'){for(var subgroup in this.subgroups){sortArray.push({subgroup:subgroup,sortField:this.subgroups[subgroup].items[0].data[this.subgroupOrderer]});}
sortArray.sort(function(a,b){return a.sortField-b.sortField;});}else if(typeof this.subgroupOrderer=='function'){for(var subgroup in this.subgroups){sortArray.push(this.subgroups[subgroup].items[0].data);}
sortArray.sort(this.subgroupOrderer);}
if(sortArray.length>0){for(var i=0;i<sortArray.length;i++){this.subgroups[sortArray[i].subgroup].index=i;}}}};Group.prototype.resetSubgroups=function(){for(var subgroup in this.subgroups){if(this.subgroups.hasOwnProperty(subgroup)){this.subgroups[subgroup].visible=false;}}};Group.prototype.remove=function(item){delete this.items[item.id];item.setParent(null);var index=this.visibleItems.indexOf(item);if(index!=-1)this.visibleItems.splice(index,1);};Group.prototype.removeFromDataSet=function(item){this.itemSet.removeItem(item.id);};Group.prototype.order=function(){var array=util.toArray(this.items);var startArray=[];var endArray=[];for(var i=0;i<array.length;i++){if(array[i].data.end!==undefined){endArray.push(array[i]);}
startArray.push(array[i]);}
this.orderedItems={byStart:startArray,byEnd:endArray};stack.orderByStart(this.orderedItems.byStart);stack.orderByEnd(this.orderedItems.byEnd);};Group.prototype._updateVisibleItems=function(orderedItems,oldVisibleItems,range){var visibleItems=[];var visibleItemsLookup={};var interval=(range.end-range.start)/4;var lowerBound=range.start-interval;var upperBound=range.end+interval;var item,i;var searchFunction=function searchFunction(value){if(value<lowerBound){return-1;}else if(value<=upperBound){return 0;}else{return 1;}};if(oldVisibleItems.length>0){for(i=0;i<oldVisibleItems.length;i++){this._checkIfVisibleWithReference(oldVisibleItems[i],visibleItems,visibleItemsLookup,range);}}
var initialPosByStart=util.binarySearchCustom(orderedItems.byStart,searchFunction,'data','start');this._traceVisible(initialPosByStart,orderedItems.byStart,visibleItems,visibleItemsLookup,function(item){return item.data.start<lowerBound||item.data.start>upperBound;});if(this.checkRangedItems==true){this.checkRangedItems=false;for(i=0;i<orderedItems.byEnd.length;i++){this._checkIfVisibleWithReference(orderedItems.byEnd[i],visibleItems,visibleItemsLookup,range);}}else{var initialPosByEnd=util.binarySearchCustom(orderedItems.byEnd,searchFunction,'data','end');this._traceVisible(initialPosByEnd,orderedItems.byEnd,visibleItems,visibleItemsLookup,function(item){return item.data.end<lowerBound||item.data.end>upperBound;});}
for(i=0;i<visibleItems.length;i++){item=visibleItems[i];if(!item.displayed)item.show();item.repositionX();}
return visibleItems;};Group.prototype._traceVisible=function(initialPos,items,visibleItems,visibleItemsLookup,breakCondition){var item;var i;if(initialPos!=-1){for(i=initialPos;i>=0;i--){item=items[i];if(breakCondition(item)){break;}else{if(visibleItemsLookup[item.id]===undefined){visibleItemsLookup[item.id]=true;visibleItems.push(item);}}}
for(i=initialPos+1;i<items.length;i++){item=items[i];if(breakCondition(item)){break;}else{if(visibleItemsLookup[item.id]===undefined){visibleItemsLookup[item.id]=true;visibleItems.push(item);}}}}};Group.prototype._checkIfVisible=function(item,visibleItems,range){if(item.isVisible(range)){if(!item.displayed)item.show();item.repositionX();visibleItems.push(item);}else{if(item.displayed)item.hide();}};Group.prototype._checkIfVisibleWithReference=function(item,visibleItems,visibleItemsLookup,range){if(item.isVisible(range)){if(visibleItemsLookup[item.id]===undefined){visibleItemsLookup[item.id]=true;visibleItems.push(item);}}else{if(item.displayed)item.hide();}};module.exports=Group;},function(module,exports){'use strict';var EPSILON=0.001;exports.orderByStart=function(items){items.sort(function(a,b){return a.data.start-b.data.start;});};exports.orderByEnd=function(items){items.sort(function(a,b){var aTime='end'in a.data?a.data.end:a.data.start,bTime='end'in b.data?b.data.end:b.data.start;return aTime-bTime;});};exports.stack=function(items,margin,force){var i,iMax;if(force){for(i=0,iMax=items.length;i<iMax;i++){items[i].top=null;}}
for(i=0,iMax=items.length;i<iMax;i++){var item=items[i];if(item.stack&&item.top===null){item.top=margin.axis;do{var collidingItem=null;for(var j=0,jj=items.length;j<jj;j++){var other=items[j];if(other.top!==null&&other!==item&&other.stack&&exports.collision(item,other,margin.item)){collidingItem=other;break;}}
if(collidingItem!=null){item.top=collidingItem.top+collidingItem.height+margin.item.vertical;}}while(collidingItem);}}};exports.nostack=function(items,margin,subgroups){var i,iMax,newTop;for(i=0,iMax=items.length;i<iMax;i++){if(items[i].data.subgroup!==undefined){newTop=margin.axis;for(var subgroup in subgroups){if(subgroups.hasOwnProperty(subgroup)){if(subgroups[subgroup].visible==true&&subgroups[subgroup].index<subgroups[items[i].data.subgroup].index){newTop+=subgroups[subgroup].height+margin.item.vertical;}}}
items[i].top=newTop;}else{items[i].top=margin.axis;}}};exports.collision=function(a,b,margin){return a.left-margin.horizontal+EPSILON<b.left+b.width&&a.left+a.width+margin.horizontal-EPSILON>b.left&&a.top-margin.vertical+EPSILON<b.top+b.height&&a.top+a.height+margin.vertical-EPSILON>b.top;};},function(module,exports,__webpack_require__){'use strict';var Hammer=__webpack_require__(23);var Item=__webpack_require__(35);function RangeItem(data,conversion,options){this.props={content:{width:0}};this.overflow=false;if(data){if(data.start==undefined){throw new Error('Property "start" missing in item '+data.id);}
if(data.end==undefined){throw new Error('Property "end" missing in item '+data.id);}}
Item.call(this,data,conversion,options);}
RangeItem.prototype=new Item(null,null,null);RangeItem.prototype.baseClassName='vis-item vis-range';RangeItem.prototype.isVisible=function(range){return this.data.start<range.end&&this.data.end>range.start;};RangeItem.prototype.redraw=function(){var dom=this.dom;if(!dom){this.dom={};dom=this.dom;dom.box=document.createElement('div');dom.frame=document.createElement('div');dom.frame.className='vis-item-overflow';dom.box.appendChild(dom.frame);dom.content=document.createElement('div');dom.content.className='vis-item-content';dom.frame.appendChild(dom.content);dom.box['timeline-item']=this;this.dirty=true;}
if(!this.parent){throw new Error('Cannot redraw item: no parent attached');}
if(!dom.box.parentNode){var foreground=this.parent.dom.foreground;if(!foreground){throw new Error('Cannot redraw item: parent has no foreground container element');}
foreground.appendChild(dom.box);}
this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateTitle(this.dom.box);this._updateDataAttributes(this.dom.box);this._updateStyle(this.dom.box);var editable=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===true)&&this.editable!==false;var className=(this.data.className?' '+this.data.className:'')+(this.selected?' vis-selected':'')+(editable?' vis-editable':' vis-readonly');dom.box.className=this.baseClassName+className;this.overflow=window.getComputedStyle(dom.frame).overflow!=='hidden';this.dom.content.style.maxWidth='none';this.props.content.width=this.dom.content.offsetWidth;this.height=this.dom.box.offsetHeight;this.dom.content.style.maxWidth='';this.dirty=false;}
this._repaintDeleteButton(dom.box);this._repaintDragLeft();this._repaintDragRight();};RangeItem.prototype.show=function(){if(!this.displayed){this.redraw();}};RangeItem.prototype.hide=function(){if(this.displayed){var box=this.dom.box;if(box.parentNode){box.parentNode.removeChild(box);}
this.displayed=false;}};RangeItem.prototype.repositionX=function(limitSize){var parentWidth=this.parent.width;var start=this.conversion.toScreen(this.data.start);var end=this.conversion.toScreen(this.data.end);var contentLeft;var contentWidth;if(limitSize===undefined||limitSize===true){if(start<-parentWidth){start=-parentWidth;}
if(end>2*parentWidth){end=2*parentWidth;}}
var boxWidth=Math.max(end-start,1);if(this.overflow){this.left=start;this.width=boxWidth+this.props.content.width;contentWidth=this.props.content.width;}else{this.left=start;this.width=boxWidth;contentWidth=Math.min(end-start,this.props.content.width);}
this.dom.box.style.left=this.left+'px';this.dom.box.style.width=boxWidth+'px';switch(this.options.align){case'left':this.dom.content.style.left='0';break;case'right':this.dom.content.style.left=Math.max(boxWidth-contentWidth,0)+'px';break;case'center':this.dom.content.style.left=Math.max((boxWidth-contentWidth)/2,0)+'px';break;default:if(this.overflow){if(end>0){contentLeft=Math.max(-start,0);}else{contentLeft=-contentWidth;}}else{if(start<0){contentLeft=-start;}else{contentLeft=0;}}
this.dom.content.style.left=contentLeft+'px';}};RangeItem.prototype.repositionY=function(){var orientation=this.options.orientation.item;var box=this.dom.box;if(orientation=='top'){box.style.top=this.top+'px';}else{box.style.top=this.parent.height-this.top-this.height+'px';}};RangeItem.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var dragLeft=document.createElement('div');dragLeft.className='vis-drag-left';dragLeft.dragLeftItem=this;this.dom.box.appendChild(dragLeft);this.dom.dragLeft=dragLeft;}else if(!this.selected&&this.dom.dragLeft){if(this.dom.dragLeft.parentNode){this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft);}
this.dom.dragLeft=null;}};RangeItem.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var dragRight=document.createElement('div');dragRight.className='vis-drag-right';dragRight.dragRightItem=this;this.dom.box.appendChild(dragRight);this.dom.dragRight=dragRight;}else if(!this.selected&&this.dom.dragRight){if(this.dom.dragRight.parentNode){this.dom.dragRight.parentNode.removeChild(this.dom.dragRight);}
this.dom.dragRight=null;}};module.exports=RangeItem;},function(module,exports,__webpack_require__){'use strict';var Hammer=__webpack_require__(23);var util=__webpack_require__(1);function Item(data,conversion,options){this.id=null;this.parent=null;this.data=data;this.dom=null;this.conversion=conversion||{};this.options=options||{};this.selected=false;this.displayed=false;this.dirty=true;this.top=null;this.left=null;this.width=null;this.height=null;this.editable=null;if(this.data&&this.data.hasOwnProperty('editable')&&typeof this.data.editable==='boolean'){this.editable=data.editable;}}
Item.prototype.stack=true;Item.prototype.select=function(){this.selected=true;this.dirty=true;if(this.displayed)this.redraw();};Item.prototype.unselect=function(){this.selected=false;this.dirty=true;if(this.displayed)this.redraw();};Item.prototype.setData=function(data){var groupChanged=data.group!=undefined&&this.data.group!=data.group;if(groupChanged){this.parent.itemSet._moveToGroup(this,data.group);}
if(data.hasOwnProperty('editable')&&typeof data.editable==='boolean'){this.editable=data.editable;}
this.data=data;this.dirty=true;if(this.displayed)this.redraw();};Item.prototype.setParent=function(parent){if(this.displayed){this.hide();this.parent=parent;if(this.parent){this.show();}}else{this.parent=parent;}};Item.prototype.isVisible=function(range){return false;};Item.prototype.show=function(){return false;};Item.prototype.hide=function(){return false;};Item.prototype.redraw=function(){};Item.prototype.repositionX=function(){};Item.prototype.repositionY=function(){};Item.prototype._repaintDeleteButton=function(anchor){var editable=(this.options.editable.remove||this.data.editable===true)&&this.data.editable!==false;if(this.selected&&editable&&!this.dom.deleteButton){var me=this;var deleteButton=document.createElement('div');deleteButton.className='vis-delete';deleteButton.title='Delete this item';new Hammer(deleteButton).on('tap',function(event){event.stopPropagation();me.parent.removeFromDataSet(me);});anchor.appendChild(deleteButton);this.dom.deleteButton=deleteButton;}else if(!this.selected&&this.dom.deleteButton){if(this.dom.deleteButton.parentNode){this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton);}
this.dom.deleteButton=null;}};Item.prototype._updateContents=function(element){var content;if(this.options.template){var itemData=this.parent.itemSet.itemsData.get(this.id);content=this.options.template(itemData);}else{content=this.data.content;}
var changed=this._contentToString(this.content)!==this._contentToString(content);if(changed){if(content instanceof Element){element.innerHTML='';element.appendChild(content);}else if(content!=undefined){element.innerHTML=content;}else{if(!(this.data.type=='background'&&this.data.content===undefined)){throw new Error('Property "content" missing in item '+this.id);}}
this.content=content;}};Item.prototype._updateTitle=function(element){if(this.data.title!=null){element.title=this.data.title||'';}else{element.removeAttribute('vis-title');}};Item.prototype._updateDataAttributes=function(element){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var attributes=[];if(Array.isArray(this.options.dataAttributes)){attributes=this.options.dataAttributes;}else if(this.options.dataAttributes=='all'){attributes=Object.keys(this.data);}else{return;}
for(var i=0;i<attributes.length;i++){var name=attributes[i];var value=this.data[name];if(value!=null){element.setAttribute('data-'+name,value);}else{element.removeAttribute('data-'+name);}}}};Item.prototype._updateStyle=function(element){if(this.style){util.removeCssText(element,this.style);this.style=null;}
if(this.data.style){util.addCssText(element,this.data.style);this.style=this.data.style;}};Item.prototype._contentToString=function(content){if(typeof content==='string')return content;if(content&&'outerHTML'in content)return content.outerHTML;return content;};Item.prototype.getWidthLeft=function(){return 0;};Item.prototype.getWidthRight=function(){return 0;};module.exports=Item;},function(module,exports,__webpack_require__){'use strict';var moment=__webpack_require__(2);var DateUtil=__webpack_require__(29);var util=__webpack_require__(1);function TimeStep(start,end,minimumStep,hiddenDates){this.current=new Date();this._start=new Date();this._end=new Date();this.autoScale=true;this.scale='day';this.step=1;this.setRange(start,end,minimumStep);this.switchedDay=false;this.switchedMonth=false;this.switchedYear=false;this.hiddenDates=hiddenDates;if(hiddenDates===undefined){this.hiddenDates=[];}
this.format=TimeStep.FORMAT;}
TimeStep.FORMAT={minorLabels:{millisecond:'SSS',second:'s',minute:'HH:mm',hour:'HH:mm',weekday:'ddd D',day:'D',month:'MMM',year:'YYYY'},majorLabels:{millisecond:'HH:mm:ss',second:'D MMMM HH:mm',minute:'ddd D MMMM',hour:'ddd D MMMM',weekday:'MMMM YYYY',day:'MMMM YYYY',month:'YYYY',year:''}};TimeStep.prototype.setFormat=function(format){var defaultFormat=util.deepExtend({},TimeStep.FORMAT);this.format=util.deepExtend(defaultFormat,format);};TimeStep.prototype.setRange=function(start,end,minimumStep){if(!(start instanceof Date)||!(end instanceof Date)){throw'No legal start or end date in method setRange';}
this._start=start!=undefined?new Date(start.valueOf()):new Date();this._end=end!=undefined?new Date(end.valueOf()):new Date();if(this.autoScale){this.setMinimumStep(minimumStep);}};TimeStep.prototype.first=function(){this.current=new Date(this._start.valueOf());this.roundToMinor();};TimeStep.prototype.roundToMinor=function(){switch(this.scale){case'year':this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step));this.current.setMonth(0);case'month':this.current.setDate(1);case'day':case'weekday':this.current.setHours(0);case'hour':this.current.setMinutes(0);case'minute':this.current.setSeconds(0);case'second':this.current.setMilliseconds(0);}
if(this.step!=1){switch(this.scale){case'millisecond':this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case'second':this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case'minute':this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case'hour':this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case'weekday':case'day':this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case'month':this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case'year':this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step);break;default:break;}}};TimeStep.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf();};TimeStep.prototype.next=function(){var prev=this.current.valueOf();if(this.current.getMonth()<6){switch(this.scale){case'millisecond':this.current=new Date(this.current.valueOf()+this.step);break;case'second':this.current=new Date(this.current.valueOf()+this.step*1000);break;case'minute':this.current=new Date(this.current.valueOf()+this.step*1000*60);break;case'hour':this.current=new Date(this.current.valueOf()+this.step*1000*60*60);var h=this.current.getHours();this.current.setHours(h-h%this.step);break;case'weekday':case'day':this.current.setDate(this.current.getDate()+this.step);break;case'month':this.current.setMonth(this.current.getMonth()+this.step);break;case'year':this.current.setFullYear(this.current.getFullYear()+this.step);break;default:break;}}else{switch(this.scale){case'millisecond':this.current=new Date(this.current.valueOf()+this.step);break;case'second':this.current.setSeconds(this.current.getSeconds()+this.step);break;case'minute':this.current.setMinutes(this.current.getMinutes()+this.step);break;case'hour':this.current.setHours(this.current.getHours()+this.step);break;case'weekday':case'day':this.current.setDate(this.current.getDate()+this.step);break;case'month':this.current.setMonth(this.current.getMonth()+this.step);break;case'year':this.current.setFullYear(this.current.getFullYear()+this.step);break;default:break;}}
if(this.step!=1){switch(this.scale){case'millisecond':if(this.current.getMilliseconds()<this.step)this.current.setMilliseconds(0);break;case'second':if(this.current.getSeconds()<this.step)this.current.setSeconds(0);break;case'minute':if(this.current.getMinutes()<this.step)this.current.setMinutes(0);break;case'hour':if(this.current.getHours()<this.step)this.current.setHours(0);break;case'weekday':case'day':if(this.current.getDate()<this.step+1)this.current.setDate(1);break;case'month':if(this.current.getMonth()<this.step)this.current.setMonth(0);break;case'year':break;default:break;}}
if(this.current.valueOf()==prev){this.current=new Date(this._end.valueOf());}
DateUtil.stepOverHiddenDates(this,prev);};TimeStep.prototype.getCurrent=function(){return this.current;};TimeStep.prototype.setScale=function(params){if(params&&typeof params.scale=='string'){this.scale=params.scale;this.step=params.step>0?params.step:1;this.autoScale=false;}};TimeStep.prototype.setAutoScale=function(enable){this.autoScale=enable;};TimeStep.prototype.setMinimumStep=function(minimumStep){if(minimumStep==undefined){return;}
var stepYear=1000*60*60*24*30*12;var stepMonth=1000*60*60*24*30;var stepDay=1000*60*60*24;var stepHour=1000*60*60;var stepMinute=1000*60;var stepSecond=1000;var stepMillisecond=1;if(stepYear*1000>minimumStep){this.scale='year';this.step=1000;}
if(stepYear*500>minimumStep){this.scale='year';this.step=500;}
if(stepYear*100>minimumStep){this.scale='year';this.step=100;}
if(stepYear*50>minimumStep){this.scale='year';this.step=50;}
if(stepYear*10>minimumStep){this.scale='year';this.step=10;}
if(stepYear*5>minimumStep){this.scale='year';this.step=5;}
if(stepYear>minimumStep){this.scale='year';this.step=1;}
if(stepMonth*3>minimumStep){this.scale='month';this.step=3;}
if(stepMonth>minimumStep){this.scale='month';this.step=1;}
if(stepDay*5>minimumStep){this.scale='day';this.step=5;}
if(stepDay*2>minimumStep){this.scale='day';this.step=2;}
if(stepDay>minimumStep){this.scale='day';this.step=1;}
if(stepDay/2>minimumStep){this.scale='weekday';this.step=1;}
if(stepHour*4>minimumStep){this.scale='hour';this.step=4;}
if(stepHour>minimumStep){this.scale='hour';this.step=1;}
if(stepMinute*15>minimumStep){this.scale='minute';this.step=15;}
if(stepMinute*10>minimumStep){this.scale='minute';this.step=10;}
if(stepMinute*5>minimumStep){this.scale='minute';this.step=5;}
if(stepMinute>minimumStep){this.scale='minute';this.step=1;}
if(stepSecond*15>minimumStep){this.scale='second';this.step=15;}
if(stepSecond*10>minimumStep){this.scale='second';this.step=10;}
if(stepSecond*5>minimumStep){this.scale='second';this.step=5;}
if(stepSecond>minimumStep){this.scale='second';this.step=1;}
if(stepMillisecond*200>minimumStep){this.scale='millisecond';this.step=200;}
if(stepMillisecond*100>minimumStep){this.scale='millisecond';this.step=100;}
if(stepMillisecond*50>minimumStep){this.scale='millisecond';this.step=50;}
if(stepMillisecond*10>minimumStep){this.scale='millisecond';this.step=10;}
if(stepMillisecond*5>minimumStep){this.scale='millisecond';this.step=5;}
if(stepMillisecond>minimumStep){this.scale='millisecond';this.step=1;}};TimeStep.snap=function(date,scale,step){var clone=new Date(date.valueOf());if(scale=='year'){var year=clone.getFullYear()+Math.round(clone.getMonth()/12);clone.setFullYear(Math.round(year/step)*step);clone.setMonth(0);clone.setDate(0);clone.setHours(0);clone.setMinutes(0);clone.setSeconds(0);clone.setMilliseconds(0);}else if(scale=='month'){if(clone.getDate()>15){clone.setDate(1);clone.setMonth(clone.getMonth()+1);}else{clone.setDate(1);}
clone.setHours(0);clone.setMinutes(0);clone.setSeconds(0);clone.setMilliseconds(0);}else if(scale=='day'){switch(step){case 5:case 2:clone.setHours(Math.round(clone.getHours()/24)*24);break;default:clone.setHours(Math.round(clone.getHours()/12)*12);break;}
clone.setMinutes(0);clone.setSeconds(0);clone.setMilliseconds(0);}else if(scale=='weekday'){switch(step){case 5:case 2:clone.setHours(Math.round(clone.getHours()/12)*12);break;default:clone.setHours(Math.round(clone.getHours()/6)*6);break;}
clone.setMinutes(0);clone.setSeconds(0);clone.setMilliseconds(0);}else if(scale=='hour'){switch(step){case 4:clone.setMinutes(Math.round(clone.getMinutes()/60)*60);break;default:clone.setMinutes(Math.round(clone.getMinutes()/30)*30);break;}
clone.setSeconds(0);clone.setMilliseconds(0);}else if(scale=='minute'){switch(step){case 15:case 10:clone.setMinutes(Math.round(clone.getMinutes()/5)*5);clone.setSeconds(0);break;case 5:clone.setSeconds(Math.round(clone.getSeconds()/60)*60);break;default:clone.setSeconds(Math.round(clone.getSeconds()/30)*30);break;}
clone.setMilliseconds(0);}else if(scale=='second'){switch(step){case 15:case 10:clone.setSeconds(Math.round(clone.getSeconds()/5)*5);clone.setMilliseconds(0);break;case 5:clone.setMilliseconds(Math.round(clone.getMilliseconds()/1000)*1000);break;default:clone.setMilliseconds(Math.round(clone.getMilliseconds()/500)*500);break;}}else if(scale=='millisecond'){var _step=step>5?step/2:1;clone.setMilliseconds(Math.round(clone.getMilliseconds()/_step)*_step);}
return clone;};TimeStep.prototype.isMajor=function(){if(this.switchedYear==true){this.switchedYear=false;switch(this.scale){case'year':case'month':case'weekday':case'day':case'hour':case'minute':case'second':case'millisecond':return true;default:return false;}}else if(this.switchedMonth==true){this.switchedMonth=false;switch(this.scale){case'weekday':case'day':case'hour':case'minute':case'second':case'millisecond':return true;default:return false;}}else if(this.switchedDay==true){this.switchedDay=false;switch(this.scale){case'millisecond':case'second':case'minute':case'hour':return true;default:return false;}}
switch(this.scale){case'millisecond':return this.current.getMilliseconds()==0;case'second':return this.current.getSeconds()==0;case'minute':return this.current.getHours()==0&&this.current.getMinutes()==0;case'hour':return this.current.getHours()==0;case'weekday':case'day':return this.current.getDate()==1;case'month':return this.current.getMonth()==0;case'year':return false;default:return false;}};TimeStep.prototype.getLabelMinor=function(date){if(date==undefined){date=this.current;}
var format=this.format.minorLabels[this.scale];return format&&format.length>0?moment(date).format(format):'';};TimeStep.prototype.getLabelMajor=function(date){if(date==undefined){date=this.current;}
var format=this.format.majorLabels[this.scale];return format&&format.length>0?moment(date).format(format):'';};TimeStep.prototype.getClassName=function(){var m=moment(this.current);var date=m.locale?m.locale('en'):m.lang('en');var step=this.step;function even(value){return value/step%2==0?' vis-even':' vis-odd';}
function today(date){if(date.isSame(new Date(),'day')){return' vis-today';}
if(date.isSame(moment().add(1,'day'),'day')){return' vis-tomorrow';}
if(date.isSame(moment().add(-1,'day'),'day')){return' vis-yesterday';}
return'';}
function currentWeek(date){return date.isSame(new Date(),'week')?' vis-current-week':'';}
function currentMonth(date){return date.isSame(new Date(),'month')?' vis-current-month':'';}
function currentYear(date){return date.isSame(new Date(),'year')?' vis-current-year':'';}
switch(this.scale){case'millisecond':return even(date.milliseconds()).trim();case'second':return even(date.seconds()).trim();case'minute':return even(date.minutes()).trim();case'hour':var hours=date.hours();if(this.step==4){hours=hours+'-h'+(hours+4);}
return'vis-h'+hours+today(date)+even(date.hours());case'weekday':return'vis-'+date.format('dddd').toLowerCase()+today(date)+currentWeek(date)+even(date.date());case'day':var day=date.date();var month=date.format('MMMM').toLowerCase();return'vis-day'+day+' vis-'+month+currentMonth(date)+even(day-1);case'month':return'vis-'+date.format('MMMM').toLowerCase()+currentMonth(date)+even(date.month());case'year':var year=date.year();return'vis-year'+year+currentYear(date)+even(year);default:return'';}};module.exports=TimeStep;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var Group=__webpack_require__(32);function BackgroundGroup(groupId,data,itemSet){Group.call(this,groupId,data,itemSet);this.width=0;this.height=0;this.top=0;this.left=0;}
BackgroundGroup.prototype=Object.create(Group.prototype);BackgroundGroup.prototype.redraw=function(range,margin,restack){var resized=false;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range);this.width=this.dom.background.offsetWidth;this.dom.background.style.height='0';for(var i=0,ii=this.visibleItems.length;i<ii;i++){var item=this.visibleItems[i];item.repositionY(margin);}
return resized;};BackgroundGroup.prototype.show=function(){if(!this.dom.background.parentNode){this.itemSet.dom.background.appendChild(this.dom.background);}};module.exports=BackgroundGroup;},function(module,exports,__webpack_require__){'use strict';var Item=__webpack_require__(35);var util=__webpack_require__(1);function BoxItem(data,conversion,options){this.props={dot:{width:0,height:0},line:{width:0,height:0}};if(data){if(data.start==undefined){throw new Error('Property "start" missing in item '+data);}}
Item.call(this,data,conversion,options);}
BoxItem.prototype=new Item(null,null,null);BoxItem.prototype.isVisible=function(range){var interval=(range.end-range.start)/4;return this.data.start>range.start-interval&&this.data.start<range.end+interval;};BoxItem.prototype.redraw=function(){var dom=this.dom;if(!dom){this.dom={};dom=this.dom;dom.box=document.createElement('DIV');dom.content=document.createElement('DIV');dom.content.className='vis-item-content';dom.box.appendChild(dom.content);dom.line=document.createElement('DIV');dom.line.className='vis-line';dom.dot=document.createElement('DIV');dom.dot.className='vis-dot';dom.box['timeline-item']=this;this.dirty=true;}
if(!this.parent){throw new Error('Cannot redraw item: no parent attached');}
if(!dom.box.parentNode){var foreground=this.parent.dom.foreground;if(!foreground)throw new Error('Cannot redraw item: parent has no foreground container element');foreground.appendChild(dom.box);}
if(!dom.line.parentNode){var background=this.parent.dom.background;if(!background)throw new Error('Cannot redraw item: parent has no background container element');background.appendChild(dom.line);}
if(!dom.dot.parentNode){var axis=this.parent.dom.axis;if(!background)throw new Error('Cannot redraw item: parent has no axis container element');axis.appendChild(dom.dot);}
this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateTitle(this.dom.box);this._updateDataAttributes(this.dom.box);this._updateStyle(this.dom.box);var editable=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===true)&&this.editable!==false;var className=(this.data.className?' '+this.data.className:'')+(this.selected?' vis-selected':'')+(editable?' vis-editable':' vis-readonly');dom.box.className='vis-item vis-box'+className;dom.line.className='vis-item vis-line'+className;dom.dot.className='vis-item vis-dot'+className;this.props.dot.height=dom.dot.offsetHeight;this.props.dot.width=dom.dot.offsetWidth;this.props.line.width=dom.line.offsetWidth;this.width=dom.box.offsetWidth;this.height=dom.box.offsetHeight;this.dirty=false;}
this._repaintDeleteButton(dom.box);};BoxItem.prototype.show=function(){if(!this.displayed){this.redraw();}};BoxItem.prototype.hide=function(){if(this.displayed){var dom=this.dom;if(dom.box.parentNode)dom.box.parentNode.removeChild(dom.box);if(dom.line.parentNode)dom.line.parentNode.removeChild(dom.line);if(dom.dot.parentNode)dom.dot.parentNode.removeChild(dom.dot);this.displayed=false;}};BoxItem.prototype.repositionX=function(){var start=this.conversion.toScreen(this.data.start);var align=this.options.align;var left;if(align=='right'){this.left=start-this.width;}else if(align=='left'){this.left=start;}else{this.left=start-this.width/2;}
this.dom.box.style.left=this.left+'px';this.dom.line.style.left=start-this.props.line.width/2+'px';this.dom.dot.style.left=start-this.props.dot.width/2+'px';};BoxItem.prototype.repositionY=function(){var orientation=this.options.orientation.item;var box=this.dom.box;var line=this.dom.line;var dot=this.dom.dot;if(orientation=='top'){box.style.top=(this.top||0)+'px';line.style.top='0';line.style.height=this.parent.top+this.top+1+'px';line.style.bottom='';}else{var itemSetHeight=this.parent.itemSet.props.height;var lineHeight=itemSetHeight-this.parent.top-this.parent.height+this.top;box.style.top=(this.parent.height-this.top-this.height||0)+'px';line.style.top=itemSetHeight-lineHeight+'px';line.style.bottom='0';}
dot.style.top=-this.props.dot.height/2+'px';};BoxItem.prototype.getWidthLeft=function(){return this.width/2;};BoxItem.prototype.getWidthRight=function(){return this.width/2;};module.exports=BoxItem;},function(module,exports,__webpack_require__){'use strict';var Item=__webpack_require__(35);function PointItem(data,conversion,options){this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}};if(data){if(data.start==undefined){throw new Error('Property "start" missing in item '+data);}}
Item.call(this,data,conversion,options);}
PointItem.prototype=new Item(null,null,null);PointItem.prototype.isVisible=function(range){var interval=(range.end-range.start)/4;return this.data.start>range.start-interval&&this.data.start<range.end+interval;};PointItem.prototype.redraw=function(){var dom=this.dom;if(!dom){this.dom={};dom=this.dom;dom.point=document.createElement('div');dom.content=document.createElement('div');dom.content.className='vis-item-content';dom.point.appendChild(dom.content);dom.dot=document.createElement('div');dom.point.appendChild(dom.dot);dom.point['timeline-item']=this;this.dirty=true;}
if(!this.parent){throw new Error('Cannot redraw item: no parent attached');}
if(!dom.point.parentNode){var foreground=this.parent.dom.foreground;if(!foreground){throw new Error('Cannot redraw item: parent has no foreground container element');}
foreground.appendChild(dom.point);}
this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateTitle(this.dom.point);this._updateDataAttributes(this.dom.point);this._updateStyle(this.dom.point);var editable=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===true)&&this.editable!==false;var className=(this.data.className?' '+this.data.className:'')+(this.selected?' vis-selected':'')+(editable?' vis-editable':' vis-readonly');dom.point.className='vis-item vis-point'+className;dom.dot.className='vis-item vis-dot'+className;this.props.dot.width=dom.dot.offsetWidth;this.props.dot.height=dom.dot.offsetHeight;this.props.content.height=dom.content.offsetHeight;dom.content.style.marginLeft=2*this.props.dot.width+'px';dom.dot.style.top=(this.height-this.props.dot.height)/2+'px';dom.dot.style.left=this.props.dot.width/2+'px';this.width=dom.point.offsetWidth;this.height=dom.point.offsetHeight;this.dirty=false;}
this._repaintDeleteButton(dom.point);};PointItem.prototype.show=function(){if(!this.displayed){this.redraw();}};PointItem.prototype.hide=function(){if(this.displayed){if(this.dom.point.parentNode){this.dom.point.parentNode.removeChild(this.dom.point);}
this.displayed=false;}};PointItem.prototype.repositionX=function(){var start=this.conversion.toScreen(this.data.start);this.left=start-this.props.dot.width;this.dom.point.style.left=this.left+'px';};PointItem.prototype.repositionY=function(){var orientation=this.options.orientation.item;var point=this.dom.point;if(orientation=='top'){point.style.top=this.top+'px';}else{point.style.top=this.parent.height-this.top-this.height+'px';}};PointItem.prototype.getWidthLeft=function(){return this.props.dot.width;};PointItem.prototype.getWidthRight=function(){return this.width-this.props.dot.width;};module.exports=PointItem;},function(module,exports,__webpack_require__){'use strict';var Hammer=__webpack_require__(23);var Item=__webpack_require__(35);var BackgroundGroup=__webpack_require__(37);var RangeItem=__webpack_require__(34);function BackgroundItem(data,conversion,options){this.props={content:{width:0}};this.overflow=false;if(data){if(data.start==undefined){throw new Error('Property "start" missing in item '+data.id);}
if(data.end==undefined){throw new Error('Property "end" missing in item '+data.id);}}
Item.call(this,data,conversion,options);}
BackgroundItem.prototype=new Item(null,null,null);BackgroundItem.prototype.baseClassName='vis-item vis-background';BackgroundItem.prototype.stack=false;BackgroundItem.prototype.isVisible=function(range){return this.data.start<range.end&&this.data.end>range.start;};BackgroundItem.prototype.redraw=function(){var dom=this.dom;if(!dom){this.dom={};dom=this.dom;dom.box=document.createElement('div');dom.frame=document.createElement('div');dom.frame.className='vis-item-overflow';dom.box.appendChild(dom.frame);dom.content=document.createElement('div');dom.content.className='vis-item-content';dom.frame.appendChild(dom.content);this.dirty=true;}
if(!this.parent){throw new Error('Cannot redraw item: no parent attached');}
if(!dom.box.parentNode){var background=this.parent.dom.background;if(!background){throw new Error('Cannot redraw item: parent has no background container element');}
background.appendChild(dom.box);}
this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateTitle(this.dom.content);this._updateDataAttributes(this.dom.content);this._updateStyle(this.dom.box);var className=(this.data.className?' '+this.data.className:'')+(this.selected?' vis-selected':'');dom.box.className=this.baseClassName+className;this.overflow=window.getComputedStyle(dom.content).overflow!=='hidden';this.props.content.width=this.dom.content.offsetWidth;this.height=0;this.dirty=false;}};BackgroundItem.prototype.show=RangeItem.prototype.show;BackgroundItem.prototype.hide=RangeItem.prototype.hide;BackgroundItem.prototype.repositionX=RangeItem.prototype.repositionX;BackgroundItem.prototype.repositionY=function(margin){var onTop=this.options.orientation.item==='top';this.dom.content.style.top=onTop?'':'0';this.dom.content.style.bottom=onTop?'0':'';var height;if(this.data.subgroup!==undefined){var itemSubgroup=this.data.subgroup;var subgroups=this.parent.subgroups;var subgroupIndex=subgroups[itemSubgroup].index;if(onTop==true){height=this.parent.subgroups[itemSubgroup].height+margin.item.vertical;height+=subgroupIndex==0?margin.axis-0.5*margin.item.vertical:0;var newTop=this.parent.top;for(var subgroup in subgroups){if(subgroups.hasOwnProperty(subgroup)){if(subgroups[subgroup].visible==true&&subgroups[subgroup].index<subgroupIndex){newTop+=subgroups[subgroup].height+margin.item.vertical;}}}
newTop+=subgroupIndex!=0?margin.axis-0.5*margin.item.vertical:0;this.dom.box.style.top=newTop+'px';this.dom.box.style.bottom='';}
else{var newTop=this.parent.top;var totalHeight=0;for(var subgroup in subgroups){if(subgroups.hasOwnProperty(subgroup)){if(subgroups[subgroup].visible==true){var newHeight=subgroups[subgroup].height+margin.item.vertical;totalHeight+=newHeight;if(subgroups[subgroup].index>subgroupIndex){newTop+=newHeight;}}}}
height=this.parent.subgroups[itemSubgroup].height+margin.item.vertical;this.dom.box.style.top=this.parent.height-totalHeight+newTop+'px';this.dom.box.style.bottom='';}}
else{if(this.parent instanceof BackgroundGroup){height=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height);this.dom.box.style.top=onTop?'0':'';this.dom.box.style.bottom=onTop?'':'0';}else{height=this.parent.height;this.dom.box.style.top=this.parent.top+'px';this.dom.box.style.bottom='';}}
this.dom.box.style.height=height+'px';};module.exports=BackgroundItem;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var Component=__webpack_require__(21);var TimeStep=__webpack_require__(36);var DateUtil=__webpack_require__(29);var moment=__webpack_require__(2);function TimeAxis(body,options){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}};this.props={range:{start:0,end:0,minimumStep:0},lineTop:0};this.defaultOptions={orientation:{axis:'bottom'},showMinorLabels:true,showMajorLabels:true,format:TimeStep.FORMAT,timeAxis:null};this.options=util.extend({},this.defaultOptions);this.body=body;this._create();this.setOptions(options);}
TimeAxis.prototype=new Component();TimeAxis.prototype.setOptions=function(options){if(options){util.selectiveExtend(['showMinorLabels','showMajorLabels','hiddenDates','timeAxis'],this.options,options);util.selectiveDeepExtend(['format'],this.options,options);if('orientation'in options){if(typeof options.orientation==='string'){this.options.orientation.axis=options.orientation;}else if(typeof options.orientation==='object'&&'axis'in options.orientation){this.options.orientation.axis=options.orientation.axis;}}
if('locale'in options){if(typeof moment.locale==='function'){moment.locale(options.locale);}else{moment.lang(options.locale);}}}};TimeAxis.prototype._create=function(){this.dom.foreground=document.createElement('div');this.dom.background=document.createElement('div');this.dom.foreground.className='vis-time-axis vis-foreground';this.dom.background.className='vis-time-axis vis-background';};TimeAxis.prototype.destroy=function(){if(this.dom.foreground.parentNode){this.dom.foreground.parentNode.removeChild(this.dom.foreground);}
if(this.dom.background.parentNode){this.dom.background.parentNode.removeChild(this.dom.background);}
this.body=null;};TimeAxis.prototype.redraw=function(){var props=this.props;var foreground=this.dom.foreground;var background=this.dom.background;var parent=this.options.orientation.axis=='top'?this.body.dom.top:this.body.dom.bottom;var parentChanged=foreground.parentNode!==parent;this._calculateCharSize();var showMinorLabels=this.options.showMinorLabels&&this.options.orientation.axis!=='none';var showMajorLabels=this.options.showMajorLabels&&this.options.orientation.axis!=='none';props.minorLabelHeight=showMinorLabels?props.minorCharHeight:0;props.majorLabelHeight=showMajorLabels?props.majorCharHeight:0;props.height=props.minorLabelHeight+props.majorLabelHeight;props.width=foreground.offsetWidth;props.minorLineHeight=this.body.domProps.root.height-props.majorLabelHeight-(this.options.orientation.axis=='top'?this.body.domProps.bottom.height:this.body.domProps.top.height);props.minorLineWidth=1;props.majorLineHeight=props.minorLineHeight+props.majorLabelHeight;props.majorLineWidth=1;var foregroundNextSibling=foreground.nextSibling;var backgroundNextSibling=background.nextSibling;foreground.parentNode&&foreground.parentNode.removeChild(foreground);background.parentNode&&background.parentNode.removeChild(background);foreground.style.height=this.props.height+'px';this._repaintLabels();if(foregroundNextSibling){parent.insertBefore(foreground,foregroundNextSibling);}else{parent.appendChild(foreground);}
if(backgroundNextSibling){this.body.dom.backgroundVertical.insertBefore(background,backgroundNextSibling);}else{this.body.dom.backgroundVertical.appendChild(background);}
return this._isResized()||parentChanged;};TimeAxis.prototype._repaintLabels=function(){var orientation=this.options.orientation.axis;var start=util.convert(this.body.range.start,'Number');var end=util.convert(this.body.range.end,'Number');var timeLabelsize=this.body.util.toTime((this.props.minorCharWidth||10)*7).valueOf();var minimumStep=timeLabelsize-DateUtil.getHiddenDurationBefore(this.body.hiddenDates,this.body.range,timeLabelsize);minimumStep-=this.body.util.toTime(0).valueOf();var step=new TimeStep(new Date(start),new Date(end),minimumStep,this.body.hiddenDates);if(this.options.format){step.setFormat(this.options.format);}
if(this.options.timeAxis){step.setScale(this.options.timeAxis);}
this.step=step;var dom=this.dom;dom.redundant.lines=dom.lines;dom.redundant.majorTexts=dom.majorTexts;dom.redundant.minorTexts=dom.minorTexts;dom.lines=[];dom.majorTexts=[];dom.minorTexts=[];var cur;var x=0;var isMajor;var xPrev=0;var width=0;var prevLine;var xFirstMajorLabel=undefined;var max=0;var className;step.first();while(step.hasNext()&&max<1000){max++;cur=step.getCurrent();isMajor=step.isMajor();className=step.getClassName();xPrev=x;x=this.body.util.toScreen(cur);width=x-xPrev;if(prevLine){prevLine.style.width=width+'px';}
if(this.options.showMinorLabels){this._repaintMinorText(x,step.getLabelMinor(),orientation,className);}
if(isMajor&&this.options.showMajorLabels){if(x>0){if(xFirstMajorLabel==undefined){xFirstMajorLabel=x;}
this._repaintMajorText(x,step.getLabelMajor(),orientation,className);}
prevLine=this._repaintMajorLine(x,orientation,className);}else{prevLine=this._repaintMinorLine(x,orientation,className);}
step.next();}
if(this.options.showMajorLabels){var leftTime=this.body.util.toTime(0),leftText=step.getLabelMajor(leftTime),widthText=leftText.length*(this.props.majorCharWidth||10)+10;if(xFirstMajorLabel==undefined||widthText<xFirstMajorLabel){this._repaintMajorText(0,leftText,orientation,className);}}
util.forEach(this.dom.redundant,function(arr){while(arr.length){var elem=arr.pop();if(elem&&elem.parentNode){elem.parentNode.removeChild(elem);}}});};TimeAxis.prototype._repaintMinorText=function(x,text,orientation,className){var label=this.dom.redundant.minorTexts.shift();if(!label){var content=document.createTextNode('');label=document.createElement('div');label.appendChild(content);this.dom.foreground.appendChild(label);}
this.dom.minorTexts.push(label);label.childNodes[0].nodeValue=text;label.style.top=orientation=='top'?this.props.majorLabelHeight+'px':'0';label.style.left=x+'px';label.className='vis-text vis-minor '+className;};TimeAxis.prototype._repaintMajorText=function(x,text,orientation,className){var label=this.dom.redundant.majorTexts.shift();if(!label){var content=document.createTextNode(text);label=document.createElement('div');label.appendChild(content);this.dom.foreground.appendChild(label);}
this.dom.majorTexts.push(label);label.childNodes[0].nodeValue=text;label.className='vis-text vis-major '+className;label.style.top=orientation=='top'?'0':this.props.minorLabelHeight+'px';label.style.left=x+'px';};TimeAxis.prototype._repaintMinorLine=function(x,orientation,className){var line=this.dom.redundant.lines.shift();if(!line){line=document.createElement('div');this.dom.background.appendChild(line);}
this.dom.lines.push(line);var props=this.props;if(orientation=='top'){line.style.top=props.majorLabelHeight+'px';}else{line.style.top=this.body.domProps.top.height+'px';}
line.style.height=props.minorLineHeight+'px';line.style.left=x-props.minorLineWidth/2+'px';line.className='vis-grid vis-vertical vis-minor '+className;return line;};TimeAxis.prototype._repaintMajorLine=function(x,orientation,className){var line=this.dom.redundant.lines.shift();if(!line){line=document.createElement('div');this.dom.background.appendChild(line);}
this.dom.lines.push(line);var props=this.props;if(orientation=='top'){line.style.top='0';}else{line.style.top=this.body.domProps.top.height+'px';}
line.style.left=x-props.majorLineWidth/2+'px';line.style.height=props.majorLineHeight+'px';line.className='vis-grid vis-vertical vis-major '+className;return line;};TimeAxis.prototype._calculateCharSize=function(){if(!this.dom.measureCharMinor){this.dom.measureCharMinor=document.createElement('DIV');this.dom.measureCharMinor.className='vis-text vis-minor vis-measure';this.dom.measureCharMinor.style.position='absolute';this.dom.measureCharMinor.appendChild(document.createTextNode('0'));this.dom.foreground.appendChild(this.dom.measureCharMinor);}
this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight;this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth;if(!this.dom.measureCharMajor){this.dom.measureCharMajor=document.createElement('DIV');this.dom.measureCharMajor.className='vis-text vis-major vis-measure';this.dom.measureCharMajor.style.position='absolute';this.dom.measureCharMajor.appendChild(document.createTextNode('0'));this.dom.foreground.appendChild(this.dom.measureCharMajor);}
this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight;this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth;};module.exports=TimeAxis;},function(module,exports,__webpack_require__){'use strict';var keycharm=__webpack_require__(43);var Emitter=__webpack_require__(13);var Hammer=__webpack_require__(23);var util=__webpack_require__(1);function Activator(container){this.active=false;this.dom={container:container};this.dom.overlay=document.createElement('div');this.dom.overlay.className='vis-overlay';this.dom.container.appendChild(this.dom.overlay);this.hammer=Hammer(this.dom.overlay);this.hammer.on('tap',this._onTapOverlay.bind(this));var me=this;var events=['tap','doubletap','press','pinch','pan','panstart','panmove','panend'];events.forEach(function(event){me.hammer.on(event,function(event){event.stopPropagation();});});if(document&&document.body){this.onClick=function(event){if(!_hasParent(event.target,container)){me.deactivate();}};document.body.addEventListener('click',this.onClick);}
if(this.keycharm!==undefined){this.keycharm.destroy();}
this.keycharm=keycharm();this.escListener=this.deactivate.bind(this);}
Emitter(Activator.prototype);Activator.current=null;Activator.prototype.destroy=function(){this.deactivate();this.dom.overlay.parentNode.removeChild(this.dom.overlay);if(this.onClick){document.body.removeEventListener('click',this.onClick);}
this.hammer.destroy();this.hammer=null;};Activator.prototype.activate=function(){if(Activator.current){Activator.current.deactivate();}
Activator.current=this;this.active=true;this.dom.overlay.style.display='none';util.addClassName(this.dom.container,'vis-active');this.emit('change');this.emit('activate');this.keycharm.bind('esc',this.escListener);};Activator.prototype.deactivate=function(){this.active=false;this.dom.overlay.style.display='';util.removeClassName(this.dom.container,'vis-active');this.keycharm.unbind('esc',this.escListener);this.emit('change');this.emit('deactivate');};Activator.prototype._onTapOverlay=function(event){this.activate();event.stopPropagation();};function _hasParent(element,parent){while(element){if(element===parent){return true;}
element=element.parentNode;}
return false;}
module.exports=Activator;},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;"use strict";(function(root,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=(factory),__WEBPACK_AMD_DEFINE_RESULT__=(typeof __WEBPACK_AMD_DEFINE_FACTORY__==='function'?(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__)):__WEBPACK_AMD_DEFINE_FACTORY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else if(typeof exports==='object'){module.exports=factory();}else{root.keycharm=factory();}}(this,function(){function keycharm(options){var preventDefault=options&&options.preventDefault||false;var container=options&&options.container||window;var _exportFunctions={};var _bound={keydown:{},keyup:{}};var _keys={};var i;for(i=97;i<=122;i++){_keys[String.fromCharCode(i)]={code:65+(i-97),shift:false};}
for(i=65;i<=90;i++){_keys[String.fromCharCode(i)]={code:i,shift:true};}
for(i=0;i<=9;i++){_keys[''+i]={code:48+i,shift:false};}
for(i=1;i<=12;i++){_keys['F'+i]={code:111+i,shift:false};}
for(i=0;i<=9;i++){_keys['num'+i]={code:96+i,shift:false};}
_keys['num*']={code:106,shift:false};_keys['num+']={code:107,shift:false};_keys['num-']={code:109,shift:false};_keys['num/']={code:111,shift:false};_keys['num.']={code:110,shift:false};_keys['left']={code:37,shift:false};_keys['up']={code:38,shift:false};_keys['right']={code:39,shift:false};_keys['down']={code:40,shift:false};_keys['space']={code:32,shift:false};_keys['enter']={code:13,shift:false};_keys['shift']={code:16,shift:undefined};_keys['esc']={code:27,shift:false};_keys['backspace']={code:8,shift:false};_keys['tab']={code:9,shift:false};_keys['ctrl']={code:17,shift:false};_keys['alt']={code:18,shift:false};_keys['delete']={code:46,shift:false};_keys['pageup']={code:33,shift:false};_keys['pagedown']={code:34,shift:false};_keys['=']={code:187,shift:false};_keys['-']={code:189,shift:false};_keys[']']={code:221,shift:false};_keys['[']={code:219,shift:false};var down=function(event){handleEvent(event,'keydown');};var up=function(event){handleEvent(event,'keyup');};var handleEvent=function(event,type){if(_bound[type][event.keyCode]!==undefined){var bound=_bound[type][event.keyCode];for(var i=0;i<bound.length;i++){if(bound[i].shift===undefined){bound[i].fn(event);}
else if(bound[i].shift==true&&event.shiftKey==true){bound[i].fn(event);}
else if(bound[i].shift==false&&event.shiftKey==false){bound[i].fn(event);}}
if(preventDefault==true){event.preventDefault();}}};_exportFunctions.bind=function(key,callback,type){if(type===undefined){type='keydown';}
if(_keys[key]===undefined){throw new Error("unsupported key: "+key);}
if(_bound[type][_keys[key].code]===undefined){_bound[type][_keys[key].code]=[];}
_bound[type][_keys[key].code].push({fn:callback,shift:_keys[key].shift});};_exportFunctions.bindAll=function(callback,type){if(type===undefined){type='keydown';}
for(var key in _keys){if(_keys.hasOwnProperty(key)){_exportFunctions.bind(key,callback,type);}}};_exportFunctions.getKey=function(event){for(var key in _keys){if(_keys.hasOwnProperty(key)){if(event.shiftKey==true&&_keys[key].shift==true&&event.keyCode==_keys[key].code){return key;}
else if(event.shiftKey==false&&_keys[key].shift==false&&event.keyCode==_keys[key].code){return key;}
else if(event.keyCode==_keys[key].code&&key=='shift'){return key;}}}
return"unknown key, currently not supported";};_exportFunctions.unbind=function(key,callback,type){if(type===undefined){type='keydown';}
if(_keys[key]===undefined){throw new Error("unsupported key: "+key);}
if(callback!==undefined){var newBindings=[];var bound=_bound[type][_keys[key].code];if(bound!==undefined){for(var i=0;i<bound.length;i++){if(!(bound[i].fn==callback&&bound[i].shift==_keys[key].shift)){newBindings.push(_bound[type][_keys[key].code][i]);}}}
_bound[type][_keys[key].code]=newBindings;}
else{_bound[type][_keys[key].code]=[];}};_exportFunctions.reset=function(){_bound={keydown:{},keyup:{}};};_exportFunctions.destroy=function(){_bound={keydown:{},keyup:{}};container.removeEventListener('keydown',down,true);container.removeEventListener('keyup',up,true);};container.addEventListener('keydown',down,true);container.addEventListener('keyup',up,true);return _exportFunctions;}
return keycharm;}));},function(module,exports,__webpack_require__){'use strict';var Hammer=__webpack_require__(23);var util=__webpack_require__(1);var Component=__webpack_require__(21);var moment=__webpack_require__(2);var locales=__webpack_require__(22);function CustomTime(body,options){this.body=body;this.defaultOptions={locales:locales,locale:'en',id:undefined};this.options=util.extend({},this.defaultOptions);if(options&&options.time){this.customTime=options.time;}else{this.customTime=new Date();}
this.eventParams={};this.setOptions(options);this._create();}
CustomTime.prototype=new Component();CustomTime.prototype.setOptions=function(options){if(options){util.selectiveExtend(['locale','locales','id'],this.options,options);}};CustomTime.prototype._create=function(){var bar=document.createElement('div');bar['custom-time']=this;bar.className='vis-custom-time '+(this.options.id||'');bar.style.position='absolute';bar.style.top='0px';bar.style.height='100%';this.bar=bar;var drag=document.createElement('div');drag.style.position='relative';drag.style.top='0px';drag.style.left='-10px';drag.style.height='100%';drag.style.width='20px';bar.appendChild(drag);this.hammer=new Hammer(drag);this.hammer.on('panstart',this._onDragStart.bind(this));this.hammer.on('panmove',this._onDrag.bind(this));this.hammer.on('panend',this._onDragEnd.bind(this));};CustomTime.prototype.destroy=function(){this.hide();this.hammer.destroy();this.hammer=null;this.body=null;};CustomTime.prototype.redraw=function(){var parent=this.body.dom.backgroundVertical;if(this.bar.parentNode!=parent){if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar);}
parent.appendChild(this.bar);}
var x=this.body.util.toScreen(this.customTime);var locale=this.options.locales[this.options.locale];if(!locale){if(!this.warned){console.log('WARNING: options.locales[\''+this.options.locale+'\'] not found. See http://visjs.org/docs/timeline.html#Localization');this.warned=true;}
locale=this.options.locales['en'];}
var title=locale.time+': '+moment(this.customTime).format('dddd, MMMM Do YYYY, H:mm:ss');title=title.charAt(0).toUpperCase()+title.substring(1);this.bar.style.left=x+'px';this.bar.title=title;return false;};CustomTime.prototype.hide=function(){if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar);}};CustomTime.prototype.setCustomTime=function(time){this.customTime=util.convert(time,'Date');this.redraw();};CustomTime.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf());};CustomTime.prototype._onDragStart=function(event){this.eventParams.dragging=true;this.eventParams.customTime=this.customTime;event.stopPropagation();};CustomTime.prototype._onDrag=function(event){if(!this.eventParams.dragging)return;var x=this.body.util.toScreen(this.eventParams.customTime)+event.deltaX;var time=this.body.util.toTime(x);this.setCustomTime(time);this.body.emitter.emit('timechange',{id:this.options.id,time:new Date(this.customTime.valueOf())});event.stopPropagation();};CustomTime.prototype._onDragEnd=function(event){if(!this.eventParams.dragging)return;this.body.emitter.emit('timechanged',{id:this.options.id,time:new Date(this.customTime.valueOf())});event.stopPropagation();};CustomTime.customTimeFromTarget=function(event){var target=event.target;while(target){if(target.hasOwnProperty('custom-time')){return target['custom-time'];}
target=target.parentNode;}
return null;};module.exports=CustomTime;},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _ColorPicker=__webpack_require__(46);var _ColorPicker2=_interopRequireDefault(_ColorPicker);var util=__webpack_require__(1);var Configurator=(function(){function Configurator(parentModule,defaultContainer,configureOptions){var pixelRatio=arguments[3]===undefined?1:arguments[3];_classCallCheck(this,Configurator);this.parent=parentModule;this.changedOptions=[];this.container=defaultContainer;this.allowCreation=false;this.options={};this.defaultOptions={enabled:false,filter:true,container:undefined,showButton:true};util.extend(this.options,this.defaultOptions);this.configureOptions=configureOptions;this.moduleOptions={};this.domElements=[];this.colorPicker=new _ColorPicker2['default'](pixelRatio);this.wrapper=undefined;}
_createClass(Configurator,[{key:'setOptions',value:function setOptions(options){if(options!==undefined){var enabled=true;if(typeof options==='string'){this.options.filter=options;}else if(options instanceof Array){this.options.filter=options.join();}else if(typeof options==='object'){if(options.container!==undefined){this.options.container=options.container;}
if(options.filter!==undefined){this.options.filter=options.filter;}
if(options.showButton!==undefined){this.options.showButton=options.showButton;}
if(options.enabled!==undefined){enabled=options.enabled;}}else if(typeof options==='boolean'){this.options.filter=true;enabled=options;}else if(typeof options==='function'){this.options.filter=options;enabled=true;}
if(this.options.filter===false){enabled=false;}
this.options.enabled=enabled;}
this._clean();}},{key:'setModuleOptions',value:function setModuleOptions(moduleOptions){this.moduleOptions=moduleOptions;if(this.options.enabled===true){this._clean();if(this.options.container!==undefined){this.container=this.options.container;}
this._create();}}},{key:'_create',value:function _create(){var _this=this;this._clean();this.changedOptions=[];var filter=this.options.filter;var counter=0;var show=false;for(var option in this.configureOptions){if(this.configureOptions.hasOwnProperty(option)){this.allowCreation=false;show=false;if(typeof filter==='function'){show=filter(option,[]);show=show||this._handleObject(this.configureOptions[option],[option],true);}else if(filter===true||filter.indexOf(option)!==-1){show=true;}
if(show!==false){this.allowCreation=true;if(counter>0){this._makeItem([]);}
this._makeHeader(option);this._handleObject(this.configureOptions[option],[option]);}
counter++;}}
if(this.options.showButton===true){(function(){var generateButton=document.createElement('div');generateButton.className='vis-network-configuration button';generateButton.innerHTML='generate options';generateButton.onclick=function(){_this._printOptions();};generateButton.onmouseover=function(){generateButton.className='vis-network-configuration button hover';};generateButton.onmouseout=function(){generateButton.className='vis-network-configuration button';};_this.optionsContainer=document.createElement('div');_this.optionsContainer.className='vis-network-configuration vis-option-container';_this.domElements.push(_this.optionsContainer);_this.domElements.push(generateButton);})();}
this._push();this.colorPicker.insertTo(this.container);}},{key:'_push',value:function _push(){this.wrapper=document.createElement('div');this.wrapper.className='vis-network-configuration-wrapper';this.container.appendChild(this.wrapper);for(var i=0;i<this.domElements.length;i++){this.wrapper.appendChild(this.domElements[i]);}}},{key:'_clean',value:function _clean(){for(var i=0;i<this.domElements.length;i++){this.wrapper.removeChild(this.domElements[i]);}
if(this.wrapper!==undefined){this.container.removeChild(this.wrapper);this.wrapper=undefined;}
this.domElements=[];}},{key:'_getValue',value:function _getValue(path){var base=this.moduleOptions;for(var i=0;i<path.length;i++){if(base[path[i]]!==undefined){base=base[path[i]];}else{base=undefined;break;}}
return base;}},{key:'_makeItem',value:function _makeItem(path){var _this2=this;for(var _len=arguments.length,domElements=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){domElements[_key-1]=arguments[_key];}
if(this.allowCreation===true){(function(){var item=document.createElement('div');item.className='vis-network-configuration item s'+path.length;domElements.forEach(function(element){item.appendChild(element);});_this2.domElements.push(item);})();}}},{key:'_makeHeader',value:function _makeHeader(name){var div=document.createElement('div');div.className='vis-network-configuration header';div.innerHTML=name;this._makeItem([],div);}},{key:'_makeLabel',value:function _makeLabel(name,path){var objectLabel=arguments[2]===undefined?false:arguments[2];var div=document.createElement('div');div.className='vis-network-configuration label s'+path.length;if(objectLabel===true){div.innerHTML='<i><b>'+name+':</b></i>';}else{div.innerHTML=name+':';}
return div;}},{key:'_makeDropdown',value:function _makeDropdown(arr,value,path){var select=document.createElement('select');select.className='vis-network-configuration select';var selectedValue=0;if(value!==undefined){if(arr.indexOf(value)!==-1){selectedValue=arr.indexOf(value);}}
for(var i=0;i<arr.length;i++){var option=document.createElement('option');option.value=arr[i];if(i===selectedValue){option.selected='selected';}
option.innerHTML=arr[i];select.appendChild(option);}
var me=this;select.onchange=function(){me._update(this.value,path);};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,select);}},{key:'_makeRange',value:function _makeRange(arr,value,path){var defaultValue=arr[0];var min=arr[1];var max=arr[2];var step=arr[3];var range=document.createElement('input');range.className='vis-network-configuration range';try{range.type='range';range.min=min;range.max=max;}catch(err){}
range.step=step;if(value!==undefined){if(value<0&&value*2<min){range.min=value*2;}else if(value*0.1<min){range.min=value/10;}
if(value*2>max&&max!==1){range.max=value*2;}
range.value=value;}else{range.value=defaultValue;}
var input=document.createElement('input');input.className='vis-network-configuration rangeinput';input.value=range.value;var me=this;range.onchange=function(){input.value=this.value;me._update(Number(this.value),path);};range.oninput=function(){input.value=this.value;};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,range,input);}},{key:'_makeCheckbox',value:function _makeCheckbox(defaultValue,value,path){var checkbox=document.createElement('input');checkbox.type='checkbox';checkbox.className='vis-network-configuration checkbox';checkbox.checked=defaultValue;if(value!==undefined){checkbox.checked=value;if(value!==defaultValue){if(typeof defaultValue==='object'){if(value!==defaultValue.enabled){this.changedOptions.push({path:path,value:value});}}else{this.changedOptions.push({path:path,value:value});}}}
var me=this;checkbox.onchange=function(){me._update(this.checked,path);};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,checkbox);}},{key:'_makeTextInput',value:function _makeTextInput(defaultValue,value,path){var checkbox=document.createElement('input');checkbox.type='text';checkbox.className='vis-network-configuration text';checkbox.value=value;if(value!==defaultValue){this.changedOptions.push({path:path,value:value});}
var me=this;checkbox.onchange=function(){me._update(this.value,path);};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,checkbox);}},{key:'_makeColorField',value:function _makeColorField(arr,value,path){var _this3=this;var defaultColor=arr[1];var div=document.createElement('div');value=value===undefined?defaultColor:value;if(value!=='none'){div.className='vis-network-configuration colorBlock';div.style.backgroundColor=value;}else{div.className='vis-network-configuration colorBlock none';}
value=value===undefined?defaultColor:value;div.onclick=function(){_this3._showColorPicker(value,div,path);};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,div);}},{key:'_showColorPicker',value:function _showColorPicker(value,div,path){var _this4=this;var rect=div.getBoundingClientRect();var bodyRect=document.body.getBoundingClientRect();var pickerX=rect.left+rect.width+5;var pickerY=rect.top-bodyRect.top+rect.height*0.5;this.colorPicker.show(pickerX,pickerY);this.colorPicker.setColor(value);this.colorPicker.setCallback(function(color){var colorString='rgba('+color.r+','+color.g+','+color.b+','+color.a+')';div.style.backgroundColor=colorString;_this4._update(colorString,path);});}},{key:'_handleObject',value:function _handleObject(obj){var path=arguments[1]===undefined?[]:arguments[1];var checkOnly=arguments[2]===undefined?false:arguments[2];var show=false;var filter=this.options.filter;var visibleInSet=false;for(var subObj in obj){if(obj.hasOwnProperty(subObj)){show=true;var item=obj[subObj];var newPath=util.copyAndExtendArray(path,subObj);if(typeof filter==='function'){show=filter(subObj,path);if(show===false){if(!(item instanceof Array)&&typeof item!=='string'&&typeof item!=='boolean'&&item instanceof Object){this.allowCreation=false;show=this._handleObject(item,newPath,true);this.allowCreation=checkOnly===false;}}}
if(show!==false){visibleInSet=true;var value=this._getValue(newPath);if(item instanceof Array){this._handleArray(item,value,newPath);}else if(typeof item==='string'){this._makeTextInput(item,value,newPath);}else if(typeof item==='boolean'){this._makeCheckbox(item,value,newPath);}else if(item instanceof Object){var draw=true;if(path.indexOf('physics')!==-1){if(this.moduleOptions.physics.solver!==subObj){draw=false;}}
if(draw===true){if(item.enabled!==undefined){var enabledPath=util.copyAndExtendArray(newPath,'enabled');var enabledValue=this._getValue(enabledPath);if(enabledValue===true){var label=this._makeLabel(subObj,newPath,true);this._makeItem(newPath,label);visibleInSet=this._handleObject(item,newPath)||visibleInSet;}else{this._makeCheckbox(item,enabledValue,newPath);}}else{var label=this._makeLabel(subObj,newPath,true);this._makeItem(newPath,label);visibleInSet=this._handleObject(item,newPath)||visibleInSet;}}}else{console.error('dont know how to handle',item,subObj,newPath);}}}}
return visibleInSet;}},{key:'_handleArray',value:function _handleArray(arr,value,path){if(typeof arr[0]==='string'&&arr[0]==='color'){this._makeColorField(arr,value,path);if(arr[1]!==value){this.changedOptions.push({path:path,value:value});}}else if(typeof arr[0]==='string'){this._makeDropdown(arr,value,path);if(arr[0]!==value){this.changedOptions.push({path:path,value:value});}}else if(typeof arr[0]==='number'){this._makeRange(arr,value,path);if(arr[0]!==value){this.changedOptions.push({path:path,value:Number(value)});}}}},{key:'_update',value:function _update(value,path){var options=this._constructOptions(value,path);this.parent.setOptions(options);}},{key:'_constructOptions',value:function _constructOptions(value,path){var optionsObj=arguments[2]===undefined?{}:arguments[2];var pointer=optionsObj;value=value==='true'?true:value;value=value==='false'?false:value;for(var i=0;i<path.length;i++){if(path[i]!=='global'){if(pointer[path[i]]===undefined){pointer[path[i]]={};}
if(i!==path.length-1){pointer=pointer[path[i]];}else{pointer[path[i]]=value;}}}
return optionsObj;}},{key:'_printOptions',value:function _printOptions(){var options={};for(var i=0;i<this.changedOptions.length;i++){this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,options);}
this.optionsContainer.innerHTML='<pre>var options = '+JSON.stringify(options,null,2)+'</pre>';}}]);return Configurator;})();exports['default']=Configurator;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var Hammer=__webpack_require__(23);var hammerUtil=__webpack_require__(28);var util=__webpack_require__(1);var ColorPicker=(function(){function ColorPicker(){var pixelRatio=arguments[0]===undefined?1:arguments[0];_classCallCheck(this,ColorPicker);this.pixelRatio=pixelRatio;this.generated=false;this.centerCoordinates={x:289/2,y:289/2};this.r=289*0.49;this.color={r:255,g:255,b:255,a:1};this.hueCircle=undefined;this.initialColor={r:255,g:255,b:255,a:1};this.previousColor=undefined;this.applied=false;this.updateCallback=function(){};this._create();}
_createClass(ColorPicker,[{key:'insertTo',value:function insertTo(container){if(this.hammer!==undefined){this.hammer.destroy();this.hammer=undefined;}
this.container=container;this.container.appendChild(this.frame);this._bindHammer();this._setSize();}},{key:'setCallback',value:function setCallback(callback){if(typeof callback==='function'){this.updateCallback=callback;}else{throw new Error('Function attempted to set as colorPicker callback is not a function.');}}},{key:'_isColorString',value:function _isColorString(color){var htmlColors={black:'#000000',navy:'#000080',darkblue:'#00008B',mediumblue:'#0000CD',blue:'#0000FF',darkgreen:'#006400',green:'#008000',teal:'#008080',darkcyan:'#008B8B',deepskyblue:'#00BFFF',darkturquoise:'#00CED1',mediumspringgreen:'#00FA9A',lime:'#00FF00',springgreen:'#00FF7F',aqua:'#00FFFF',cyan:'#00FFFF',midnightblue:'#191970',dodgerblue:'#1E90FF',lightseagreen:'#20B2AA',forestgreen:'#228B22',seagreen:'#2E8B57',darkslategray:'#2F4F4F',limegreen:'#32CD32',mediumseagreen:'#3CB371',turquoise:'#40E0D0',royalblue:'#4169E1',steelblue:'#4682B4',darkslateblue:'#483D8B',mediumturquoise:'#48D1CC',indigo:'#4B0082',darkolivegreen:'#556B2F',cadetblue:'#5F9EA0',cornflowerblue:'#6495ED',mediumaquamarine:'#66CDAA',dimgray:'#696969',slateblue:'#6A5ACD',olivedrab:'#6B8E23',slategray:'#708090',lightslategray:'#778899',mediumslateblue:'#7B68EE',lawngreen:'#7CFC00',chartreuse:'#7FFF00',aquamarine:'#7FFFD4',maroon:'#800000',purple:'#800080',olive:'#808000',gray:'#808080',skyblue:'#87CEEB',lightskyblue:'#87CEFA',blueviolet:'#8A2BE2',darkred:'#8B0000',darkmagenta:'#8B008B',saddlebrown:'#8B4513',darkseagreen:'#8FBC8F',lightgreen:'#90EE90',mediumpurple:'#9370D8',darkviolet:'#9400D3',palegreen:'#98FB98',darkorchid:'#9932CC',yellowgreen:'#9ACD32',sienna:'#A0522D',brown:'#A52A2A',darkgray:'#A9A9A9',lightblue:'#ADD8E6',greenyellow:'#ADFF2F',paleturquoise:'#AFEEEE',lightsteelblue:'#B0C4DE',powderblue:'#B0E0E6',firebrick:'#B22222',darkgoldenrod:'#B8860B',mediumorchid:'#BA55D3',rosybrown:'#BC8F8F',darkkhaki:'#BDB76B',silver:'#C0C0C0',mediumvioletred:'#C71585',indianred:'#CD5C5C',peru:'#CD853F',chocolate:'#D2691E',tan:'#D2B48C',lightgrey:'#D3D3D3',palevioletred:'#D87093',thistle:'#D8BFD8',orchid:'#DA70D6',goldenrod:'#DAA520',crimson:'#DC143C',gainsboro:'#DCDCDC',plum:'#DDA0DD',burlywood:'#DEB887',lightcyan:'#E0FFFF',lavender:'#E6E6FA',darksalmon:'#E9967A',violet:'#EE82EE',palegoldenrod:'#EEE8AA',lightcoral:'#F08080',khaki:'#F0E68C',aliceblue:'#F0F8FF',honeydew:'#F0FFF0',azure:'#F0FFFF',sandybrown:'#F4A460',wheat:'#F5DEB3',beige:'#F5F5DC',whitesmoke:'#F5F5F5',mintcream:'#F5FFFA',ghostwhite:'#F8F8FF',salmon:'#FA8072',antiquewhite:'#FAEBD7',linen:'#FAF0E6',lightgoldenrodyellow:'#FAFAD2',oldlace:'#FDF5E6',red:'#FF0000',fuchsia:'#FF00FF',magenta:'#FF00FF',deeppink:'#FF1493',orangered:'#FF4500',tomato:'#FF6347',hotpink:'#FF69B4',coral:'#FF7F50',darkorange:'#FF8C00',lightsalmon:'#FFA07A',orange:'#FFA500',lightpink:'#FFB6C1',pink:'#FFC0CB',gold:'#FFD700',peachpuff:'#FFDAB9',navajowhite:'#FFDEAD',moccasin:'#FFE4B5',bisque:'#FFE4C4',mistyrose:'#FFE4E1',blanchedalmond:'#FFEBCD',papayawhip:'#FFEFD5',lavenderblush:'#FFF0F5',seashell:'#FFF5EE',cornsilk:'#FFF8DC',lemonchiffon:'#FFFACD',floralwhite:'#FFFAF0',snow:'#FFFAFA',yellow:'#FFFF00',lightyellow:'#FFFFE0',ivory:'#FFFFF0',white:'#FFFFFF'};if(typeof color==='string'){return htmlColors[color];}}},{key:'setColor',value:function setColor(color){var setInitial=arguments[1]===undefined?true:arguments[1];if(color==='none'){return;}
var rgba=undefined;var htmlColor=this._isColorString(color);if(htmlColor!==undefined){color=htmlColor;}
if(util.isString(color)===true){if(util.isValidRGB(color)===true){var rgbaArray=color.substr(4).substr(0,color.length-5).split(',');rgba={r:rgbaArray[0],g:rgbaArray[1],b:rgbaArray[2],a:1};}else if(util.isValidRGBA(color)===true){var rgbaArray=color.substr(5).substr(0,color.length-6).split(',');rgba={r:rgbaArray[0],g:rgbaArray[1],b:rgbaArray[2],a:rgbaArray[3]};}else if(util.isValidHex(color)===true){var rgbObj=util.hexToRGB(color);rgba={r:rgbObj.r,g:rgbObj.g,b:rgbObj.b,a:1};}}else{if(color instanceof Object){if(color.r!==undefined&&color.g!==undefined&&color.b!==undefined){var alpha=color.a!==undefined?color.a:'1.0';rgba={r:color.r,g:color.g,b:color.b,a:alpha};}}}
if(rgba===undefined){throw new Error('Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: '+JSON.stringify(color));}else{this._setColor(rgba,setInitial);}}},{key:'show',value:function show(x,y){this.applied=false;this.frame.style.display='block';this.frame.style.top=y+'px';this.frame.style.left=x+'px';this._generateHueCircle();}},{key:'_hide',value:function _hide(){var storePrevious=arguments[0]===undefined?true:arguments[0];if(storePrevious===true){this.previousColor=util.extend({},this.color);}
if(this.applied===true){this.updateCallback(this.initialColor);}
this.frame.style.display='none';}},{key:'_save',value:function _save(){this.updateCallback(this.color);this.applied=false;this._hide();}},{key:'_apply',value:function _apply(){this.applied=true;this.updateCallback(this.color);this._updatePicker(this.color);}},{key:'_loadLast',value:function _loadLast(){if(this.previousColor!==undefined){this.setColor(this.previousColor,false);}else{alert('There is no last color to load...');}}},{key:'_setColor',value:function _setColor(rgba){var setInitial=arguments[1]===undefined?true:arguments[1];if(setInitial===true){this.initialColor=util.extend({},rgba);}
this.color=rgba;var hsv=util.RGBToHSV(rgba.r,rgba.g,rgba.b);var angleConvert=2*Math.PI;var radius=this.r*hsv.s;var x=this.centerCoordinates.x+radius*Math.sin(angleConvert*hsv.h);var y=this.centerCoordinates.y+radius*Math.cos(angleConvert*hsv.h);this.colorPickerSelector.style.left=x-0.5*this.colorPickerSelector.clientWidth+'px';this.colorPickerSelector.style.top=y-0.5*this.colorPickerSelector.clientHeight+'px';this._updatePicker(rgba);}},{key:'_setOpacity',value:function _setOpacity(value){this.color.a=value/100;this._updatePicker(this.color);}},{key:'_setBrightness',value:function _setBrightness(value){var hsv=util.RGBToHSV(this.color.r,this.color.g,this.color.b);hsv.v=value/100;var rgba=util.HSVToRGB(hsv.h,hsv.s,hsv.v);rgba['a']=this.color.a;this.color=rgba;this._updatePicker();}},{key:'_updatePicker',value:function _updatePicker(){var rgba=arguments[0]===undefined?this.color:arguments[0];var hsv=util.RGBToHSV(rgba.r,rgba.g,rgba.b);var ctx=this.colorPickerCanvas.getContext('2d');if(this.pixelRation===undefined){this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1);}
ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var w=this.colorPickerCanvas.clientWidth;var h=this.colorPickerCanvas.clientHeight;ctx.clearRect(0,0,w,h);ctx.putImageData(this.hueCircle,0,0);ctx.fillStyle='rgba(0,0,0,'+(1-hsv.v)+')';ctx.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r);ctx.fill();this.brightnessRange.value=100*hsv.v;this.opacityRange.value=100*rgba.a;this.initialColorDiv.style.backgroundColor='rgba('+this.initialColor.r+','+this.initialColor.g+','+this.initialColor.b+','+this.initialColor.a+')';this.newColorDiv.style.backgroundColor='rgba('+this.color.r+','+this.color.g+','+this.color.b+','+this.color.a+')';}},{key:'_setSize',value:function _setSize(){this.colorPickerCanvas.style.width='100%';this.colorPickerCanvas.style.height='100%';this.colorPickerCanvas.width=289*this.pixelRatio;this.colorPickerCanvas.height=289*this.pixelRatio;}},{key:'_create',value:function _create(){this.frame=document.createElement('div');this.frame.className='vis-color-picker';this.colorPickerDiv=document.createElement('div');this.colorPickerSelector=document.createElement('div');this.colorPickerSelector.className='vis-selector';this.colorPickerDiv.appendChild(this.colorPickerSelector);this.colorPickerCanvas=document.createElement('canvas');this.colorPickerDiv.appendChild(this.colorPickerCanvas);if(!this.colorPickerCanvas.getContext){var noCanvas=document.createElement('DIV');noCanvas.style.color='red';noCanvas.style.fontWeight='bold';noCanvas.style.padding='10px';noCanvas.innerHTML='Error: your browser does not support HTML canvas';this.colorPickerCanvas.appendChild(noCanvas);}else{var ctx=this.colorPickerCanvas.getContext('2d');this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1);this.colorPickerCanvas.getContext('2d').setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);}
this.colorPickerDiv.className='vis-color';this.opacityDiv=document.createElement('div');this.opacityDiv.className='vis-opacity';this.brightnessDiv=document.createElement('div');this.brightnessDiv.className='vis-brightness';this.arrowDiv=document.createElement('div');this.arrowDiv.className='vis-arrow';this.opacityRange=document.createElement('input');try{this.opacityRange.type='range';this.opacityRange.min='0';this.opacityRange.max='100';}catch(err){}
this.opacityRange.value='100';this.opacityRange.className='vis-range';this.brightnessRange=document.createElement('input');try{this.brightnessRange.type='range';this.brightnessRange.min='0';this.brightnessRange.max='100';}catch(err){}
this.brightnessRange.value='100';this.brightnessRange.className='vis-range';this.opacityDiv.appendChild(this.opacityRange);this.brightnessDiv.appendChild(this.brightnessRange);var me=this;this.opacityRange.onchange=function(){me._setOpacity(this.value);};this.opacityRange.oninput=function(){me._setOpacity(this.value);};this.brightnessRange.onchange=function(){me._setBrightness(this.value);};this.brightnessRange.oninput=function(){me._setBrightness(this.value);};this.brightnessLabel=document.createElement('div');this.brightnessLabel.className='vis-label vis-brightness';this.brightnessLabel.innerHTML='brightness:';this.opacityLabel=document.createElement('div');this.opacityLabel.className='vis-label vis-opacity';this.opacityLabel.innerHTML='opacity:';this.newColorDiv=document.createElement('div');this.newColorDiv.className='vis-new-color';this.newColorDiv.innerHTML='new';this.initialColorDiv=document.createElement('div');this.initialColorDiv.className='vis-initial-color';this.initialColorDiv.innerHTML='initial';this.cancelButton=document.createElement('div');this.cancelButton.className='vis-button vis-cancel';this.cancelButton.innerHTML='cancel';this.cancelButton.onclick=this._hide.bind(this,false);this.applyButton=document.createElement('div');this.applyButton.className='vis-button vis-apply';this.applyButton.innerHTML='apply';this.applyButton.onclick=this._apply.bind(this);this.saveButton=document.createElement('div');this.saveButton.className='vis-button vis-save';this.saveButton.innerHTML='save';this.saveButton.onclick=this._save.bind(this);this.loadButton=document.createElement('div');this.loadButton.className='vis-button vis-load';this.loadButton.innerHTML='load last';this.loadButton.onclick=this._loadLast.bind(this);this.frame.appendChild(this.colorPickerDiv);this.frame.appendChild(this.arrowDiv);this.frame.appendChild(this.brightnessLabel);this.frame.appendChild(this.brightnessDiv);this.frame.appendChild(this.opacityLabel);this.frame.appendChild(this.opacityDiv);this.frame.appendChild(this.newColorDiv);this.frame.appendChild(this.initialColorDiv);this.frame.appendChild(this.cancelButton);this.frame.appendChild(this.applyButton);this.frame.appendChild(this.saveButton);this.frame.appendChild(this.loadButton);}},{key:'_bindHammer',value:function _bindHammer(){var _this=this;this.drag={};this.pinch={};this.hammer=new Hammer(this.colorPickerCanvas);this.hammer.get('pinch').set({enable:true});hammerUtil.onTouch(this.hammer,function(event){_this._moveSelector(event);});this.hammer.on('tap',function(event){_this._moveSelector(event);});this.hammer.on('panstart',function(event){_this._moveSelector(event);});this.hammer.on('panmove',function(event){_this._moveSelector(event);});this.hammer.on('panend',function(event){_this._moveSelector(event);});}},{key:'_generateHueCircle',value:function _generateHueCircle(){if(this.generated===false){var ctx=this.colorPickerCanvas.getContext('2d');if(this.pixelRation===undefined){this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1);}
ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var w=this.colorPickerCanvas.clientWidth;var h=this.colorPickerCanvas.clientHeight;ctx.clearRect(0,0,w,h);var x=undefined,y=undefined,hue=undefined,sat=undefined;this.centerCoordinates={x:w*0.5,y:h*0.5};this.r=0.49*w;var angleConvert=2*Math.PI/360;var hfac=1/360;var sfac=1/this.r;var rgb=undefined;for(hue=0;hue<360;hue++){for(sat=0;sat<this.r;sat++){x=this.centerCoordinates.x+sat*Math.sin(angleConvert*hue);y=this.centerCoordinates.y+sat*Math.cos(angleConvert*hue);rgb=util.HSVToRGB(hue*hfac,sat*sfac,1);ctx.fillStyle='rgb('+rgb.r+','+rgb.g+','+rgb.b+')';ctx.fillRect(x-0.5,y-0.5,2,2);}}
ctx.strokeStyle='rgba(0,0,0,1)';ctx.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r);ctx.stroke();this.hueCircle=ctx.getImageData(0,0,w,h);}
this.generated=true;}},{key:'_moveSelector',value:function _moveSelector(event){var rect=this.colorPickerDiv.getBoundingClientRect();var left=event.center.x-rect.left;var top=event.center.y-rect.top;var centerY=0.5*this.colorPickerDiv.clientHeight;var centerX=0.5*this.colorPickerDiv.clientWidth;var x=left-centerX;var y=top-centerY;var angle=Math.atan2(x,y);var radius=0.98*Math.min(Math.sqrt(x*x+y*y),centerX);var newTop=Math.cos(angle)*radius+centerY;var newLeft=Math.sin(angle)*radius+centerX;this.colorPickerSelector.style.top=newTop-0.5*this.colorPickerSelector.clientHeight+'px';this.colorPickerSelector.style.left=newLeft-0.5*this.colorPickerSelector.clientWidth+'px';var h=angle/(2*Math.PI);h=h<0?h+1:h;var s=radius/this.r;var hsv=util.RGBToHSV(this.color.r,this.color.g,this.color.b);hsv.h=h;hsv.s=s;var rgba=util.HSVToRGB(hsv.h,hsv.s,hsv.v);rgba['a']=this.color.a;this.color=rgba;this.initialColorDiv.style.backgroundColor='rgba('+this.initialColor.r+','+this.initialColor.g+','+this.initialColor.b+','+this.initialColor.a+')';this.newColorDiv.style.backgroundColor='rgba('+this.color.r+','+this.color.g+','+this.color.b+','+this.color.a+')';}}]);return ColorPicker;})();exports['default']=ColorPicker;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var util=__webpack_require__(1);var errorFound=false;var allOptions=undefined;var printStyle='background: #FFeeee; color: #dd0000';var Validator=(function(){function Validator(){_classCallCheck(this,Validator);}
_createClass(Validator,null,[{key:'validate',value:function validate(options,referenceOptions,subObject){errorFound=false;allOptions=referenceOptions;var usedOptions=referenceOptions;if(subObject!==undefined){usedOptions=referenceOptions[subObject];}
Validator.parse(options,usedOptions,[]);return errorFound;}},{key:'parse',value:function parse(options,referenceOptions,path){for(var option in options){if(options.hasOwnProperty(option)){Validator.check(option,options,referenceOptions,path);}}}},{key:'check',value:function check(option,options,referenceOptions,path){if(referenceOptions[option]===undefined&&referenceOptions.__any__===undefined){Validator.getSuggestion(option,referenceOptions,path);}else if(referenceOptions[option]===undefined&&referenceOptions.__any__!==undefined){if(Validator.getType(options[option])==='object'&&referenceOptions['__any__'].__type__!==undefined){Validator.checkFields(option,options,referenceOptions,'__any__',referenceOptions['__any__'].__type__,path);}else{Validator.checkFields(option,options,referenceOptions,'__any__',referenceOptions['__any__'],path);}}else{if(referenceOptions[option].__type__!==undefined){Validator.checkFields(option,options,referenceOptions,option,referenceOptions[option].__type__,path);}else{Validator.checkFields(option,options,referenceOptions,option,referenceOptions[option],path);}}}},{key:'checkFields',value:function checkFields(option,options,referenceOptions,referenceOption,refOptionObj,path){var optionType=Validator.getType(options[option]);var refOptionType=refOptionObj[optionType];if(refOptionType!==undefined){if(Validator.getType(refOptionType)==='array'){if(refOptionType.indexOf(options[option])===-1){console.log('%cInvalid option detected in "'+option+'".'+' Allowed values are:'+Validator.print(refOptionType)+' not "'+options[option]+'". '+Validator.printLocation(path,option),printStyle);errorFound=true;}else if(optionType==='object'&&referenceOption!=='__any__'){path=util.copyAndExtendArray(path,option);Validator.parse(options[option],referenceOptions[referenceOption],path);}}else if(optionType==='object'&&referenceOption!=='__any__'){path=util.copyAndExtendArray(path,option);Validator.parse(options[option],referenceOptions[referenceOption],path);}}else if(refOptionObj['any']===undefined){console.log('%cInvalid type received for "'+option+'". Expected: '+Validator.print(Object.keys(refOptionObj))+'. Received ['+optionType+'] "'+options[option]+'"'+Validator.printLocation(path,option),printStyle);errorFound=true;}}},{key:'getType',value:function getType(object){var type=typeof object;if(type==='object'){if(object===null){return'null';}
if(object instanceof Boolean){return'boolean';}
if(object instanceof Number){return'number';}
if(object instanceof String){return'string';}
if(Array.isArray(object)){return'array';}
if(object instanceof Date){return'date';}
if(object.nodeType!==undefined){return'dom';}
if(object._isAMomentObject===true){return'moment';}
return'object';}else if(type==='number'){return'number';}else if(type==='boolean'){return'boolean';}else if(type==='string'){return'string';}else if(type===undefined){return'undefined';}
return type;}},{key:'getSuggestion',value:function getSuggestion(option,options,path){var localSearch=Validator.findInOptions(option,options,path,false);var globalSearch=Validator.findInOptions(option,allOptions,[],true);var localSearchThreshold=8;var globalSearchThreshold=4;if(localSearch.indexMatch!==undefined){console.log('%cUnknown option detected: "'+option+'" in '+Validator.printLocation(localSearch.path,option,'')+'Perhaps it was incomplete? Did you mean: "'+localSearch.indexMatch+'"?\n\n',printStyle);}else if(globalSearch.distance<=globalSearchThreshold&&localSearch.distance>globalSearch.distance){console.log('%cUnknown option detected: "'+option+'" in '+Validator.printLocation(localSearch.path,option,'')+'Perhaps it was misplaced? Matching option found at: '+Validator.printLocation(globalSearch.path,globalSearch.closestMatch,''),printStyle);}else if(localSearch.distance<=localSearchThreshold){console.log('%cUnknown option detected: "'+option+'". Did you mean "'+localSearch.closestMatch+'"?'+Validator.printLocation(localSearch.path,option),printStyle);}else{console.log('%cUnknown option detected: "'+option+'". Did you mean one of these: '+Validator.print(Object.keys(options))+Validator.printLocation(path,option),printStyle);}
errorFound=true;}},{key:'findInOptions',value:function findInOptions(option,options,path){var recursive=arguments[3]===undefined?false:arguments[3];var min=1000000000;var closestMatch='';var closestMatchPath=[];var lowerCaseOption=option.toLowerCase();var indexMatch=undefined;for(var op in options){var distance=undefined;if(options[op].__type__!==undefined&&recursive===true){var result=Validator.findInOptions(option,options[op],util.copyAndExtendArray(path,op));if(min>result.distance){closestMatch=result.closestMatch;closestMatchPath=result.path;min=result.distance;indexMatch=result.indexMatch;}}else{if(op.toLowerCase().indexOf(lowerCaseOption)!==-1){indexMatch=op;}
distance=Validator.levenshteinDistance(option,op);if(min>distance){closestMatch=op;closestMatchPath=util.copyArray(path);min=distance;}}}
return{closestMatch:closestMatch,path:closestMatchPath,distance:min,indexMatch:indexMatch};}},{key:'printLocation',value:function printLocation(path,option){var prefix=arguments[2]===undefined?'Problem value found at: \n':arguments[2];var str='\n\n'+prefix+'options = {\n';for(var i=0;i<path.length;i++){for(var j=0;j<i+1;j++){str+='  ';}
str+=path[i]+': {\n';}
for(var j=0;j<path.length+1;j++){str+='  ';}
str+=option+'\n';for(var i=0;i<path.length+1;i++){for(var j=0;j<path.length-i;j++){str+='  ';}
str+='}\n';}
return str+'\n\n';}},{key:'print',value:function print(options){return JSON.stringify(options).replace(/(\")|(\[)|(\])|(,"__type__")/g,'').replace(/(\,)/g,', ');}},{key:'levenshteinDistance',value:function levenshteinDistance(a,b){if(a.length===0)return b.length;if(b.length===0)return a.length;var matrix=[];var i;for(i=0;i<=b.length;i++){matrix[i]=[i];}
var j;for(j=0;j<=a.length;j++){matrix[0][j]=j;}
for(i=1;i<=b.length;i++){for(j=1;j<=a.length;j++){if(b.charAt(i-1)==a.charAt(j-1)){matrix[i][j]=matrix[i-1][j-1];}else{matrix[i][j]=Math.min(matrix[i-1][j-1]+1,Math.min(matrix[i][j-1]+1,matrix[i-1][j]+1));}}}
return matrix[b.length][a.length];}}]);return Validator;})();exports['default']=Validator;exports.printStyle=printStyle;},function(module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var string='string';var boolean='boolean';var number='number';var array='array';var date='date';var object='object';var dom='dom';var moment='moment';var any='any';var allOptions={configure:{enabled:{boolean:boolean},filter:{boolean:boolean,'function':'function'},container:{dom:dom},__type__:{object:object,boolean:boolean,'function':'function'}},align:{string:string},autoResize:{boolean:boolean},clickToUse:{boolean:boolean},dataAttributes:{string:string,array:array},editable:{add:{boolean:boolean,'undefined':'undefined'},remove:{boolean:boolean,'undefined':'undefined'},updateGroup:{boolean:boolean,'undefined':'undefined'},updateTime:{boolean:boolean,'undefined':'undefined'},__type__:{boolean:boolean,object:object}},end:{number:number,date:date,string:string,moment:moment},format:{minorLabels:{millisecond:{string:string,'undefined':'undefined'},second:{string:string,'undefined':'undefined'},minute:{string:string,'undefined':'undefined'},hour:{string:string,'undefined':'undefined'},weekday:{string:string,'undefined':'undefined'},day:{string:string,'undefined':'undefined'},month:{string:string,'undefined':'undefined'},year:{string:string,'undefined':'undefined'},__type__:{object:object}},majorLabels:{millisecond:{string:string,'undefined':'undefined'},second:{string:string,'undefined':'undefined'},minute:{string:string,'undefined':'undefined'},hour:{string:string,'undefined':'undefined'},weekday:{string:string,'undefined':'undefined'},day:{string:string,'undefined':'undefined'},month:{string:string,'undefined':'undefined'},year:{string:string,'undefined':'undefined'},__type__:{object:object}},__type__:{object:object}},groupOrder:{string:string,'function':'function'},height:{string:string,number:number},hiddenDates:{object:object,array:array},locale:{string:string},locales:{__any__:{any:any},__type__:{object:object}},margin:{axis:{number:number},item:{horizontal:{number:number,'undefined':'undefined'},vertical:{number:number,'undefined':'undefined'},__type__:{object:object,number:number}},__type__:{object:object,number:number}},max:{date:date,number:number,string:string,moment:moment},maxHeight:{number:number,string:string},min:{date:date,number:number,string:string,moment:moment},minHeight:{number:number,string:string},moveable:{boolean:boolean},multiselect:{boolean:boolean},onAdd:{'function':'function'},onUpdate:{'function':'function'},onMove:{'function':'function'},onMoving:{'function':'function'},onRemove:{'function':'function'},order:{'function':'function'},orientation:{axis:{string:string,'undefined':'undefined'},item:{string:string,'undefined':'undefined'},__type__:{string:string,object:object}},selectable:{boolean:boolean},showCurrentTime:{boolean:boolean},showMajorLabels:{boolean:boolean},showMinorLabels:{boolean:boolean},stack:{boolean:boolean},snap:{'function':'function','null':'null'},start:{date:date,number:number,string:string,moment:moment},template:{'function':'function'},timeAxis:{scale:{string:string,'undefined':'undefined'},step:{number:number,'undefined':'undefined'},__type__:{object:object}},type:{string:string},width:{string:string,number:number},zoomable:{boolean:boolean},zoomMax:{number:number},zoomMin:{number:number},__type__:{object:object}};var configureOptions={global:{align:['center','left','right'],autoResize:true,clickToUse:false,editable:{add:false,remove:false,updateGroup:false,updateTime:false},end:'',format:{minorLabels:{millisecond:'SSS',second:'s',minute:'HH:mm',hour:'HH:mm',weekday:'ddd D',day:'D',month:'MMM',year:'YYYY'},majorLabels:{millisecond:'HH:mm:ss',second:'D MMMM HH:mm',minute:'ddd D MMMM',hour:'ddd D MMMM',weekday:'MMMM YYYY',day:'MMMM YYYY',month:'YYYY',year:''}},height:'',locale:'',margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:'',maxHeight:'',min:'',minHeight:'',moveable:false,multiselect:false,orientation:{axis:['both','bottom','top'],item:['bottom','top']},selectable:true,showCurrentTime:false,showMajorLabels:true,showMinorLabels:true,stack:true,start:'',type:['box','point','range','background'],width:'100%',zoomable:true,zoomMax:[315360000000000,10,315360000000000,1],zoomMin:[10,10,315360000000000,1]}};exports.allOptions=allOptions;exports.configureOptions=configureOptions;},function(module,exports,__webpack_require__){'use strict';var Emitter=__webpack_require__(13);var Hammer=__webpack_require__(23);var util=__webpack_require__(1);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var Range=__webpack_require__(27);var Core=__webpack_require__(30);var TimeAxis=__webpack_require__(41);var CurrentTime=__webpack_require__(20);var CustomTime=__webpack_require__(44);var LineGraph=__webpack_require__(50);var Configurator=__webpack_require__(45);var Validator=__webpack_require__(47)['default'];var printStyle=__webpack_require__(47).printStyle;var allOptions=__webpack_require__(58).allOptions;var configureOptions=__webpack_require__(58).configureOptions;function Graph2d(container,items,groups,options){if(!(Array.isArray(groups)||groups instanceof DataSet)&&groups instanceof Object){var forthArgument=options;options=groups;groups=forthArgument;}
var me=this;this.defaultOptions={start:null,end:null,autoResize:true,orientation:{axis:'bottom',item:'bottom'},width:null,height:null,maxHeight:null,minHeight:null};this.options=util.deepExtend({},this.defaultOptions);this._create(container);this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:me._toScreen.bind(me),toGlobalScreen:me._toGlobalScreen.bind(me),toTime:me._toTime.bind(me),toGlobalTime:me._toGlobalTime.bind(me)}};this.range=new Range(this.body);this.components.push(this.range);this.body.range=this.range;this.timeAxis=new TimeAxis(this.body);this.components.push(this.timeAxis);this.currentTime=new CurrentTime(this.body);this.components.push(this.currentTime);this.linegraph=new LineGraph(this.body);this.components.push(this.linegraph);this.itemsData=null;this.groupsData=null;this.on('tap',function(event){me.emit('click',me.getEventProperties(event));});this.on('doubletap',function(event){me.emit('doubleClick',me.getEventProperties(event));});this.dom.root.oncontextmenu=function(event){me.emit('contextmenu',me.getEventProperties(event));};if(options){this.setOptions(options);}
if(groups){this.setGroups(groups);}
if(items){this.setItems(items);}else{this._redraw();}}
Graph2d.prototype=new Core();Graph2d.prototype.setOptions=function(options){var errorFound=Validator.validate(options,allOptions);if(errorFound===true){console.log('%cErrors have been found in the supplied options object.',printStyle);}
Core.prototype.setOptions.call(this,options);};Graph2d.prototype.setItems=function(items){var initialLoad=this.itemsData==null;var newDataSet;if(!items){newDataSet=null;}else if(items instanceof DataSet||items instanceof DataView){newDataSet=items;}else{newDataSet=new DataSet(items,{type:{start:'Date',end:'Date'}});}
this.itemsData=newDataSet;this.linegraph&&this.linegraph.setItems(newDataSet);if(initialLoad){if(this.options.start!=undefined||this.options.end!=undefined){var start=this.options.start!=undefined?this.options.start:null;var end=this.options.end!=undefined?this.options.end:null;this.setWindow(start,end,{animation:false});}else{this.fit({animation:false});}}};Graph2d.prototype.setGroups=function(groups){var newDataSet;if(!groups){newDataSet=null;}else if(groups instanceof DataSet||groups instanceof DataView){newDataSet=groups;}else{newDataSet=new DataSet(groups);}
this.groupsData=newDataSet;this.linegraph.setGroups(newDataSet);};Graph2d.prototype.getLegend=function(groupId,width,height){if(width===undefined){width=15;}
if(height===undefined){height=15;}
if(this.linegraph.groups[groupId]!==undefined){return this.linegraph.groups[groupId].getLegend(width,height);}else{return'cannot find group:'+groupId;}};Graph2d.prototype.isGroupVisible=function(groupId){if(this.linegraph.groups[groupId]!==undefined){return this.linegraph.groups[groupId].visible&&(this.linegraph.options.groups.visibility[groupId]===undefined||this.linegraph.options.groups.visibility[groupId]==true);}else{return false;}};Graph2d.prototype.getDataRange=function(){var min=null;var max=null;for(var groupId in this.linegraph.groups){if(this.linegraph.groups.hasOwnProperty(groupId)){if(this.linegraph.groups[groupId].visible==true){for(var i=0;i<this.linegraph.groups[groupId].itemsData.length;i++){var item=this.linegraph.groups[groupId].itemsData[i];var value=util.convert(item.x,'Date').valueOf();min=min==null?value:min>value?value:min;max=max==null?value:max<value?value:max;}}}}
return{min:min!=null?new Date(min):null,max:max!=null?new Date(max):null};};Graph2d.prototype.getEventProperties=function(event){var clientX=event.center?event.center.x:event.clientX;var clientY=event.center?event.center.y:event.clientY;var x=clientX-util.getAbsoluteLeft(this.dom.centerContainer);var y=clientY-util.getAbsoluteTop(this.dom.centerContainer);var time=this._toTime(x);var customTime=CustomTime.customTimeFromTarget(event);var element=util.getTarget(event);var what=null;if(util.hasParent(element,this.timeAxis.dom.foreground)){what='axis';}else if(this.timeAxis2&&util.hasParent(element,this.timeAxis2.dom.foreground)){what='axis';}else if(util.hasParent(element,this.linegraph.yAxisLeft.dom.frame)){what='data-axis';}else if(util.hasParent(element,this.linegraph.yAxisRight.dom.frame)){what='data-axis';}else if(util.hasParent(element,this.linegraph.legendLeft.dom.frame)){what='legend';}else if(util.hasParent(element,this.linegraph.legendRight.dom.frame)){what='legend';}else if(customTime!=null){what='custom-time';}else if(util.hasParent(element,this.currentTime.bar)){what='current-time';}else if(util.hasParent(element,this.dom.center)){what='background';}
var value=[];var yAxisLeft=this.linegraph.yAxisLeft;var yAxisRight=this.linegraph.yAxisRight;if(!yAxisLeft.hidden){value.push(yAxisLeft.screenToValue(y));}
if(!yAxisRight.hidden){value.push(yAxisRight.screenToValue(y));}
return{event:event,what:what,pageX:event.srcEvent?event.srcEvent.pageX:event.pageX,pageY:event.srcEvent?event.srcEvent.pageY:event.pageY,x:x,y:y,time:time,value:value};};Graph2d.prototype._createConfigurator=function(){return new Configurator(this,this.dom.container,configureOptions);};module.exports=Graph2d;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var DOMutil=__webpack_require__(7);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var Component=__webpack_require__(21);var DataAxis=__webpack_require__(51);var GraphGroup=__webpack_require__(53);var Legend=__webpack_require__(57);var BarFunctions=__webpack_require__(56);var LineFunctions=__webpack_require__(54);var UNGROUPED='__ungrouped__';function LineGraph(body,options){this.id=util.randomUUID();this.body=body;this.defaultOptions={yAxisOrientation:'left',defaultGroup:'default',sort:true,sampling:true,stack:false,graphHeight:'400px',shaded:{enabled:false,orientation:'bottom'},style:'line',barChart:{width:50,sideBySide:false,align:'center'},interpolation:{enabled:true,parametrization:'centripetal',alpha:0.5},drawPoints:{enabled:true,size:6,style:'square'},dataAxis:{showMinorLabels:true,showMajorLabels:true,icons:false,width:'40px',visible:true,alignZeros:true,left:{range:{min:undefined,max:undefined},format:function format(value){return value;},title:{text:undefined,style:undefined}},right:{range:{min:undefined,max:undefined},format:function format(value){return value;},title:{text:undefined,style:undefined}}},legend:{enabled:false,icons:true,left:{visible:true,position:'top-left'},right:{visible:true,position:'top-right'}},groups:{visibility:{}}};this.options=util.extend({},this.defaultOptions);this.dom={};this.props={};this.hammer=null;this.groups={};this.abortedGraphUpdate=false;this.updateSVGheight=false;this.updateSVGheightOnResize=false;var me=this;this.itemsData=null;this.groupsData=null;this.itemListeners={'add':function add(event,params,senderId){me._onAdd(params.items);},'update':function update(event,params,senderId){me._onUpdate(params.items);},'remove':function remove(event,params,senderId){me._onRemove(params.items);}};this.groupListeners={'add':function add(event,params,senderId){me._onAddGroups(params.items);},'update':function update(event,params,senderId){me._onUpdateGroups(params.items);},'remove':function remove(event,params,senderId){me._onRemoveGroups(params.items);}};this.items={};this.selection=[];this.lastStart=this.body.range.start;this.touchParams={};this.svgElements={};this.setOptions(options);this.groupsUsingDefaultStyles=[0];this.COUNTER=0;this.body.emitter.on('rangechanged',function(){me.lastStart=me.body.range.start;me.svg.style.left=util.option.asSize(-me.props.width);me.redraw.call(me,true);});this._create();this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};this.body.emitter.emit('change');}
LineGraph.prototype=new Component();LineGraph.prototype._create=function(){var frame=document.createElement('div');frame.className='vis-line-graph';this.dom.frame=frame;this.svg=document.createElementNS('http://www.w3.org/2000/svg','svg');this.svg.style.position='relative';this.svg.style.height=(''+this.options.graphHeight).replace('px','')+'px';this.svg.style.display='block';frame.appendChild(this.svg);this.options.dataAxis.orientation='left';this.yAxisLeft=new DataAxis(this.body,this.options.dataAxis,this.svg,this.options.groups);this.options.dataAxis.orientation='right';this.yAxisRight=new DataAxis(this.body,this.options.dataAxis,this.svg,this.options.groups);delete this.options.dataAxis.orientation;this.legendLeft=new Legend(this.body,this.options.legend,'left',this.options.groups);this.legendRight=new Legend(this.body,this.options.legend,'right',this.options.groups);this.show();};LineGraph.prototype.setOptions=function(options){if(options){var fields=['sampling','defaultGroup','stack','height','graphHeight','yAxisOrientation','style','barChart','dataAxis','sort','groups'];if(options.graphHeight===undefined&&options.height!==undefined&&this.body.domProps.centerContainer.height!==undefined){this.updateSVGheight=true;this.updateSVGheightOnResize=true;}else if(this.body.domProps.centerContainer.height!==undefined&&options.graphHeight!==undefined){if(parseInt((options.graphHeight+'').replace('px',''))<this.body.domProps.centerContainer.height){this.updateSVGheight=true;}}
util.selectiveDeepExtend(fields,this.options,options);util.mergeOptions(this.options,options,'interpolation');util.mergeOptions(this.options,options,'drawPoints');util.mergeOptions(this.options,options,'shaded');util.mergeOptions(this.options,options,'legend');if(options.interpolation){if(typeof options.interpolation=='object'){if(options.interpolation.parametrization){if(options.interpolation.parametrization=='uniform'){this.options.interpolation.alpha=0;}else if(options.interpolation.parametrization=='chordal'){this.options.interpolation.alpha=1;}else{this.options.interpolation.parametrization='centripetal';this.options.interpolation.alpha=0.5;}}}}
if(this.yAxisLeft){if(options.dataAxis!==undefined){this.yAxisLeft.setOptions(this.options.dataAxis);this.yAxisRight.setOptions(this.options.dataAxis);}}
if(this.legendLeft){if(options.legend!==undefined){this.legendLeft.setOptions(this.options.legend);this.legendRight.setOptions(this.options.legend);}}
if(this.groups.hasOwnProperty(UNGROUPED)){this.groups[UNGROUPED].setOptions(options);}}
if(this.dom.frame){this.redraw(true);}};LineGraph.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame);}};LineGraph.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame);}};LineGraph.prototype.setItems=function(items){var me=this,ids,oldItemsData=this.itemsData;if(!items){this.itemsData=null;}else if(items instanceof DataSet||items instanceof DataView){this.itemsData=items;}else{throw new TypeError('Data must be an instance of DataSet or DataView');}
if(oldItemsData){util.forEach(this.itemListeners,function(callback,event){oldItemsData.off(event,callback);});ids=oldItemsData.getIds();this._onRemove(ids);}
if(this.itemsData){var id=this.id;util.forEach(this.itemListeners,function(callback,event){me.itemsData.on(event,callback,id);});ids=this.itemsData.getIds();this._onAdd(ids);}
this._updateUngrouped();this.redraw(true);};LineGraph.prototype.setGroups=function(groups){var me=this;var ids;if(this.groupsData){util.forEach(this.groupListeners,function(callback,event){me.groupsData.off(event,callback);});ids=this.groupsData.getIds();this.groupsData=null;this._onRemoveGroups(ids);}
if(!groups){this.groupsData=null;}else if(groups instanceof DataSet||groups instanceof DataView){this.groupsData=groups;}else{throw new TypeError('Data must be an instance of DataSet or DataView');}
if(this.groupsData){var id=this.id;util.forEach(this.groupListeners,function(callback,event){me.groupsData.on(event,callback,id);});ids=this.groupsData.getIds();this._onAddGroups(ids);}
this._onUpdate();};LineGraph.prototype._onUpdate=function(ids){this._updateUngrouped();this._updateAllGroupData();this.redraw(true);};LineGraph.prototype._onAdd=function(ids){this._onUpdate(ids);};LineGraph.prototype._onRemove=function(ids){this._onUpdate(ids);};LineGraph.prototype._onUpdateGroups=function(groupIds){for(var i=0;i<groupIds.length;i++){var group=this.groupsData.get(groupIds[i]);this._updateGroup(group,groupIds[i]);}
this.redraw(true);};LineGraph.prototype._onAddGroups=function(groupIds){this._onUpdateGroups(groupIds);};LineGraph.prototype._onRemoveGroups=function(groupIds){for(var i=0;i<groupIds.length;i++){if(this.groups.hasOwnProperty(groupIds[i])){if(this.groups[groupIds[i]].options.yAxisOrientation=='right'){this.yAxisRight.removeGroup(groupIds[i]);this.legendRight.removeGroup(groupIds[i]);this.legendRight.redraw();}else{this.yAxisLeft.removeGroup(groupIds[i]);this.legendLeft.removeGroup(groupIds[i]);this.legendLeft.redraw();}
delete this.groups[groupIds[i]];}}
this._updateUngrouped();this.redraw(true);};LineGraph.prototype._updateGroup=function(group,groupId){if(!this.groups.hasOwnProperty(groupId)){this.groups[groupId]=new GraphGroup(group,groupId,this.options,this.groupsUsingDefaultStyles);if(this.groups[groupId].options.yAxisOrientation=='right'){this.yAxisRight.addGroup(groupId,this.groups[groupId]);this.legendRight.addGroup(groupId,this.groups[groupId]);}else{this.yAxisLeft.addGroup(groupId,this.groups[groupId]);this.legendLeft.addGroup(groupId,this.groups[groupId]);}}else{this.groups[groupId].update(group);if(this.groups[groupId].options.yAxisOrientation=='right'){this.yAxisRight.updateGroup(groupId,this.groups[groupId]);this.legendRight.updateGroup(groupId,this.groups[groupId]);}else{this.yAxisLeft.updateGroup(groupId,this.groups[groupId]);this.legendLeft.updateGroup(groupId,this.groups[groupId]);}}
this.legendLeft.redraw();this.legendRight.redraw();};LineGraph.prototype._updateAllGroupData=function(){if(this.itemsData!=null){var groupsContent={};var groupId;for(groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){groupsContent[groupId]=[];}}
for(var itemId in this.itemsData._data){if(this.itemsData._data.hasOwnProperty(itemId)){var item=this.itemsData._data[itemId];if(groupsContent[item.group]===undefined){throw new Error('Cannot find referenced group. Possible reason: items added before groups? Groups need to be added before items, as items refer to groups.');}
item.x=util.convert(item.x,'Date');groupsContent[item.group].push(item);}}
for(groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){this.groups[groupId].setItems(groupsContent[groupId]);}}}};LineGraph.prototype._updateUngrouped=function(){if(this.itemsData&&this.itemsData!=null){var ungroupedCounter=0;for(var itemId in this.itemsData._data){if(this.itemsData._data.hasOwnProperty(itemId)){var item=this.itemsData._data[itemId];if(item!=undefined){if(item.hasOwnProperty('group')){if(item.group===undefined){item.group=UNGROUPED;}}else{item.group=UNGROUPED;}
ungroupedCounter=item.group==UNGROUPED?ungroupedCounter+1:ungroupedCounter;}}}
if(ungroupedCounter==0){delete this.groups[UNGROUPED];this.legendLeft.removeGroup(UNGROUPED);this.legendRight.removeGroup(UNGROUPED);this.yAxisLeft.removeGroup(UNGROUPED);this.yAxisRight.removeGroup(UNGROUPED);}else{var group={id:UNGROUPED,content:this.options.defaultGroup};this._updateGroup(group,UNGROUPED);}}else{delete this.groups[UNGROUPED];this.legendLeft.removeGroup(UNGROUPED);this.legendRight.removeGroup(UNGROUPED);this.yAxisLeft.removeGroup(UNGROUPED);this.yAxisRight.removeGroup(UNGROUPED);}
this.legendLeft.redraw();this.legendRight.redraw();};LineGraph.prototype.redraw=function(forceGraphUpdate){var resized=false;this.props.width=this.dom.frame.offsetWidth;this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom;if(this.lastWidth===undefined&&this.props.width){forceGraphUpdate=true;}
resized=this._isResized()||resized;var visibleInterval=this.body.range.end-this.body.range.start;var zoomed=visibleInterval!=this.lastVisibleInterval;this.lastVisibleInterval=visibleInterval;if(resized==true){this.svg.style.width=util.option.asSize(3*this.props.width);this.svg.style.left=util.option.asSize(-this.props.width);if((this.options.height+'').indexOf('%')!=-1||this.updateSVGheightOnResize==true){this.updateSVGheight=true;}}
if(this.updateSVGheight==true){if(this.options.graphHeight!=this.props.height+'px'){this.options.graphHeight=this.props.height+'px';this.svg.style.height=this.props.height+'px';}
this.updateSVGheight=false;}else{this.svg.style.height=(''+this.options.graphHeight).replace('px','')+'px';}
if(resized==true||zoomed==true||this.abortedGraphUpdate==true||forceGraphUpdate==true){resized=this._updateGraph()||resized;}else{if(this.lastStart!=0){var offset=this.body.range.start-this.lastStart;var range=this.body.range.end-this.body.range.start;if(this.props.width!=0){var rangePerPixelInv=this.props.width/range;var xOffset=offset*rangePerPixelInv;this.svg.style.left=-this.props.width-xOffset+'px';}}}
this.legendLeft.redraw();this.legendRight.redraw();return resized;};LineGraph.prototype._updateGraph=function(){DOMutil.prepareElements(this.svgElements);if(this.props.width!=0&&this.itemsData!=null){var group,i;var preprocessedGroupData={};var processedGroupData={};var groupRanges={};var changeCalled=false;var groupIds=[];for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){group=this.groups[groupId];if(group.visible==true&&(this.options.groups.visibility[groupId]===undefined||this.options.groups.visibility[groupId]==true)){groupIds.push(groupId);}}}
if(groupIds.length>0){var minDate=this.body.util.toGlobalTime(-this.body.domProps.root.width);var maxDate=this.body.util.toGlobalTime(2*this.body.domProps.root.width);var groupsData={};this._getRelevantData(groupIds,groupsData,minDate,maxDate);this._applySampling(groupIds,groupsData);for(i=0;i<groupIds.length;i++){preprocessedGroupData[groupIds[i]]=this._convertXcoordinates(groupsData[groupIds[i]]);}
this._getYRanges(groupIds,preprocessedGroupData,groupRanges);changeCalled=this._updateYAxis(groupIds,groupRanges);var MAX_CYCLES=5;if(changeCalled==true&&this.COUNTER<MAX_CYCLES){DOMutil.cleanupElements(this.svgElements);this.abortedGraphUpdate=true;this.COUNTER++;this.body.emitter.emit('change');return true;}else{if(this.COUNTER>MAX_CYCLES){console.log('WARNING: there may be an infinite loop in the _updateGraph emitter cycle.');}
this.COUNTER=0;this.abortedGraphUpdate=false;for(i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];processedGroupData[groupIds[i]]=this._convertYcoordinates(groupsData[groupIds[i]],group);}
for(i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];if(group.options.style!='bar'){group.draw(processedGroupData[groupIds[i]],group,this.framework);}}
BarFunctions.draw(groupIds,processedGroupData,this.framework);}}}
DOMutil.cleanupElements(this.svgElements);return false;};LineGraph.prototype._getRelevantData=function(groupIds,groupsData,minDate,maxDate){var group,i,j,item;if(groupIds.length>0){for(i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];groupsData[groupIds[i]]=[];var dataContainer=groupsData[groupIds[i]];if(group.options.sort==true){var guess=Math.max(0,util.binarySearchValue(group.itemsData,minDate,'x','before'));for(j=guess;j<group.itemsData.length;j++){item=group.itemsData[j];if(item!==undefined){if(item.x>maxDate){dataContainer.push(item);break;}else{dataContainer.push(item);}}}}else{for(j=0;j<group.itemsData.length;j++){item=group.itemsData[j];if(item!==undefined){if(item.x>minDate&&item.x<maxDate){dataContainer.push(item);}}}}}}};LineGraph.prototype._applySampling=function(groupIds,groupsData){var group;if(groupIds.length>0){for(var i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];if(group.options.sampling==true){var dataContainer=groupsData[groupIds[i]];if(dataContainer.length>0){var increment=1;var amountOfPoints=dataContainer.length;var xDistance=this.body.util.toGlobalScreen(dataContainer[dataContainer.length-1].x)-this.body.util.toGlobalScreen(dataContainer[0].x);var pointsPerPixel=amountOfPoints/xDistance;increment=Math.min(Math.ceil(0.2*amountOfPoints),Math.max(1,Math.round(pointsPerPixel)));var sampledData=[];for(var j=0;j<amountOfPoints;j+=increment){sampledData.push(dataContainer[j]);}
groupsData[groupIds[i]]=sampledData;}}}}};LineGraph.prototype._getYRanges=function(groupIds,groupsData,groupRanges){var groupData,group,i;var combinedDataLeft=[];var combinedDataRight=[];var options;if(groupIds.length>0){for(i=0;i<groupIds.length;i++){groupData=groupsData[groupIds[i]];options=this.groups[groupIds[i]].options;if(groupData.length>0){group=this.groups[groupIds[i]];if(options.stack===true&&options.style==='bar'){if(options.yAxisOrientation==='left'){combinedDataLeft=combinedDataLeft.concat(group.getData(groupData));}else{combinedDataRight=combinedDataRight.concat(group.getData(groupData));}}else{groupRanges[groupIds[i]]=group.getYRange(groupData,groupIds[i]);}}}
BarFunctions.getStackedYRange(combinedDataLeft,groupRanges,groupIds,'__barStackLeft','left');BarFunctions.getStackedYRange(combinedDataRight,groupRanges,groupIds,'__barStackRight','right');}};LineGraph.prototype._updateYAxis=function(groupIds,groupRanges){var resized=false;var yAxisLeftUsed=false;var yAxisRightUsed=false;var minLeft=1000000000,minRight=1000000000,maxLeft=-1000000000,maxRight=-1000000000,minVal,maxVal;if(groupIds.length>0){for(var i=0;i<groupIds.length;i++){var group=this.groups[groupIds[i]];if(group&&group.options.yAxisOrientation!='right'){yAxisLeftUsed=true;minLeft=0;maxLeft=0;}else if(group&&group.options.yAxisOrientation){yAxisRightUsed=true;minRight=0;maxRight=0;}}
for(var i=0;i<groupIds.length;i++){if(groupRanges.hasOwnProperty(groupIds[i])){if(groupRanges[groupIds[i]].ignore!==true){minVal=groupRanges[groupIds[i]].min;maxVal=groupRanges[groupIds[i]].max;if(groupRanges[groupIds[i]].yAxisOrientation!='right'){yAxisLeftUsed=true;minLeft=minLeft>minVal?minVal:minLeft;maxLeft=maxLeft<maxVal?maxVal:maxLeft;}else{yAxisRightUsed=true;minRight=minRight>minVal?minVal:minRight;maxRight=maxRight<maxVal?maxVal:maxRight;}}}}
if(yAxisLeftUsed==true){this.yAxisLeft.setRange(minLeft,maxLeft);}
if(yAxisRightUsed==true){this.yAxisRight.setRange(minRight,maxRight);}}
resized=this._toggleAxisVisiblity(yAxisLeftUsed,this.yAxisLeft)||resized;resized=this._toggleAxisVisiblity(yAxisRightUsed,this.yAxisRight)||resized;if(yAxisRightUsed==true&&yAxisLeftUsed==true){this.yAxisLeft.drawIcons=true;this.yAxisRight.drawIcons=true;}else{this.yAxisLeft.drawIcons=false;this.yAxisRight.drawIcons=false;}
this.yAxisRight.master=!yAxisLeftUsed;if(this.yAxisRight.master==false){if(yAxisRightUsed==true){this.yAxisLeft.lineOffset=this.yAxisRight.width;}else{this.yAxisLeft.lineOffset=0;}
resized=this.yAxisLeft.redraw()||resized;this.yAxisRight.stepPixels=this.yAxisLeft.stepPixels;this.yAxisRight.zeroCrossing=this.yAxisLeft.zeroCrossing;this.yAxisRight.amountOfSteps=this.yAxisLeft.amountOfSteps;resized=this.yAxisRight.redraw()||resized;}else{resized=this.yAxisRight.redraw()||resized;}
var tempGroups=['__barStackLeft','__barStackRight','__lineStackLeft','__lineStackRight'];for(var i=0;i<tempGroups.length;i++){if(groupIds.indexOf(tempGroups[i])!=-1){groupIds.splice(groupIds.indexOf(tempGroups[i]),1);}}
return resized;};LineGraph.prototype._toggleAxisVisiblity=function(axisUsed,axis){var changed=false;if(axisUsed==false){if(axis.dom.frame.parentNode&&axis.hidden==false){axis.hide();changed=true;}}else{if(!axis.dom.frame.parentNode&&axis.hidden==true){axis.show();changed=true;}}
return changed;};LineGraph.prototype._convertXcoordinates=function(datapoints){var extractedData=[];var xValue,yValue;var toScreen=this.body.util.toScreen;for(var i=0;i<datapoints.length;i++){xValue=toScreen(datapoints[i].x)+this.props.width;yValue=datapoints[i].y;extractedData.push({x:xValue,y:yValue});}
return extractedData;};LineGraph.prototype._convertYcoordinates=function(datapoints,group){var extractedData=[];var xValue,yValue;var toScreen=this.body.util.toScreen;var axis=this.yAxisLeft;var svgHeight=Number(this.svg.style.height.replace('px',''));if(group.options.yAxisOrientation=='right'){axis=this.yAxisRight;}
for(var i=0;i<datapoints.length;i++){var labelValue=datapoints[i].label?datapoints[i].label:null;xValue=toScreen(datapoints[i].x)+this.props.width;yValue=Math.round(axis.convertValue(datapoints[i].y));extractedData.push({x:xValue,y:yValue,label:labelValue});}
group.setZeroPosition(Math.min(svgHeight,axis.convertValue(0)));return extractedData;};module.exports=LineGraph;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var DOMutil=__webpack_require__(7);var Component=__webpack_require__(21);var DataStep=__webpack_require__(52);function DataAxis(body,options,svg,linegraphOptions){this.id=util.randomUUID();this.body=body;this.defaultOptions={orientation:'left',showMinorLabels:true,showMajorLabels:true,icons:true,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:'40px',visible:true,alignZeros:true,left:{range:{min:undefined,max:undefined},format:function format(value){return value;},title:{text:undefined,style:undefined}},right:{range:{min:undefined,max:undefined},format:function format(value){return value;},title:{text:undefined,style:undefined}}};this.linegraphOptions=linegraphOptions;this.linegraphSVG=svg;this.props={};this.DOMelements={lines:{},labels:{},title:{}};this.dom={};this.range={start:0,end:0};this.options=util.extend({},this.defaultOptions);this.conversionFactor=1;this.setOptions(options);this.width=Number((''+this.options.width).replace('px',''));this.minWidth=this.width;this.height=this.linegraphSVG.offsetHeight;this.hidden=false;this.stepPixels=25;this.zeroCrossing=-1;this.amountOfSteps=-1;this.lineOffset=0;this.master=true;this.svgElements={};this.iconsRemoved=false;this.groups={};this.amountOfGroups=0;this._create();var me=this;this.body.emitter.on('verticalDrag',function(){me.dom.lineContainer.style.top=me.body.domProps.scrollTop+'px';});}
DataAxis.prototype=new Component();DataAxis.prototype.addGroup=function(label,graphOptions){if(!this.groups.hasOwnProperty(label)){this.groups[label]=graphOptions;}
this.amountOfGroups+=1;};DataAxis.prototype.updateGroup=function(label,graphOptions){this.groups[label]=graphOptions;};DataAxis.prototype.removeGroup=function(label){if(this.groups.hasOwnProperty(label)){delete this.groups[label];this.amountOfGroups-=1;}};DataAxis.prototype.setOptions=function(options){if(options){var redraw=false;if(this.options.orientation!=options.orientation&&options.orientation!==undefined){redraw=true;}
var fields=['orientation','showMinorLabels','showMajorLabels','icons','majorLinesOffset','minorLinesOffset','labelOffsetX','labelOffsetY','iconWidth','width','visible','left','right','alignZeros'];util.selectiveExtend(fields,this.options,options);this.minWidth=Number((''+this.options.width).replace('px',''));if(redraw===true&&this.dom.frame){this.hide();this.show();}}};DataAxis.prototype._create=function(){this.dom.frame=document.createElement('div');this.dom.frame.style.width=this.options.width;this.dom.frame.style.height=this.height;this.dom.lineContainer=document.createElement('div');this.dom.lineContainer.style.width='100%';this.dom.lineContainer.style.height=this.height;this.dom.lineContainer.style.position='relative';this.svg=document.createElementNS('http://www.w3.org/2000/svg','svg');this.svg.style.position='absolute';this.svg.style.top='0px';this.svg.style.height='100%';this.svg.style.width='100%';this.svg.style.display='block';this.dom.frame.appendChild(this.svg);};DataAxis.prototype._redrawGroupIcons=function(){DOMutil.prepareElements(this.svgElements);var x;var iconWidth=this.options.iconWidth;var iconHeight=15;var iconOffset=4;var y=iconOffset+0.5*iconHeight;if(this.options.orientation==='left'){x=iconOffset;}else{x=this.width-iconWidth-iconOffset;}
var groupArray=Object.keys(this.groups);groupArray.sort(function(a,b){return a<b?-1:1;});for(var i=0;i<groupArray.length;i++){var groupId=groupArray[i];if(this.groups[groupId].visible===true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]===true)){this.groups[groupId].drawIcon(x,y,this.svgElements,this.svg,iconWidth,iconHeight);y+=iconHeight+iconOffset;}}
DOMutil.cleanupElements(this.svgElements);this.iconsRemoved=false;};DataAxis.prototype._cleanupIcons=function(){if(this.iconsRemoved===false){DOMutil.prepareElements(this.svgElements);DOMutil.cleanupElements(this.svgElements);this.iconsRemoved=true;}};DataAxis.prototype.show=function(){this.hidden=false;if(!this.dom.frame.parentNode){if(this.options.orientation==='left'){this.body.dom.left.appendChild(this.dom.frame);}else{this.body.dom.right.appendChild(this.dom.frame);}}
if(!this.dom.lineContainer.parentNode){this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer);}};DataAxis.prototype.hide=function(){this.hidden=true;if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame);}
if(this.dom.lineContainer.parentNode){this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer);}};DataAxis.prototype.setRange=function(start,end){if(this.master===false&&this.options.alignZeros===true&&this.zeroCrossing!=-1){if(start>0){start=0;}}
this.range.start=start;this.range.end=end;};DataAxis.prototype.redraw=function(){var resized=false;var activeGroups=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+'px';for(var groupId in this.groups){if(this.groups.hasOwnProperty(groupId)){if(this.groups[groupId].visible===true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]===true)){activeGroups++;}}}
if(this.amountOfGroups===0||activeGroups===0){this.hide();}else{this.show();this.height=Number(this.linegraphSVG.style.height.replace('px',''));this.dom.lineContainer.style.height=this.height+'px';this.width=this.options.visible===true?Number((''+this.options.width).replace('px','')):0;var props=this.props;var frame=this.dom.frame;frame.className='vis-data-axis';this._calculateCharSize();var orientation=this.options.orientation;var showMinorLabels=this.options.showMinorLabels;var showMajorLabels=this.options.showMajorLabels;props.minorLabelHeight=showMinorLabels?props.minorCharHeight:0;props.majorLabelHeight=showMajorLabels?props.majorCharHeight:0;props.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset;props.minorLineHeight=1;props.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset;props.majorLineHeight=1;if(orientation==='left'){frame.style.top='0';frame.style.left='0';frame.style.bottom='';frame.style.width=this.width+'px';frame.style.height=this.height+'px';this.props.width=this.body.domProps.left.width;this.props.height=this.body.domProps.left.height;}else{frame.style.top='';frame.style.bottom='0';frame.style.left='0';frame.style.width=this.width+'px';frame.style.height=this.height+'px';this.props.width=this.body.domProps.right.width;this.props.height=this.body.domProps.right.height;}
resized=this._redrawLabels();resized=this._isResized()||resized;if(this.options.icons===true){this._redrawGroupIcons();}else{this._cleanupIcons();}
this._redrawTitle(orientation);}
return resized;};DataAxis.prototype._redrawLabels=function(){var resized=false;DOMutil.prepareElements(this.DOMelements.lines);DOMutil.prepareElements(this.DOMelements.labels);var orientation=this.options['orientation'];var step;if(this.master===false){var stepSize,rangeStart,rangeEnd,minimumStep;if(this.zeroCrossing!==-1&&this.options.alignZeros===true){if(this.range.end>0){stepSize=this.range.end/this.zeroCrossing;rangeStart=this.range.end-this.amountOfSteps*stepSize;rangeEnd=this.range.end;}else{stepSize=-1*this.range.start/(this.amountOfSteps-this.zeroCrossing);rangeStart=this.range.start;rangeEnd=this.range.start+stepSize*this.amountOfSteps;}}else{rangeStart=this.range.start;rangeEnd=this.range.end;}
minimumStep=this.stepPixels;}else{minimumStep=this.props.majorCharHeight;rangeStart=this.range.start;rangeEnd=this.range.end;}
this.step=step=new DataStep(rangeStart,rangeEnd,minimumStep,this.dom.frame.offsetHeight,this.options[this.options.orientation].range,this.options[this.options.orientation].format,this.master===false&&this.options.alignZeros);if(this.master===true){this.stepPixels=this.dom.frame.offsetHeight/step.marginRange*step.step;this.amountOfSteps=Math.ceil(this.dom.frame.offsetHeight/this.stepPixels);}else{if(this.options.alignZeros===true&&this.zeroCrossing!==-1){var distance=(step.current-this.zeroCrossing*step.step)/step.step;this.step.shift(distance);}}
this.valueAtBottom=step.marginEnd;this.maxLabelSize=0;var y=0;var stepIndex=0;var isMajor=false;while(stepIndex<this.amountOfSteps){y=Math.round(stepIndex*this.stepPixels);isMajor=step.isMajor();if(stepIndex>0&&stepIndex!==this.amountOfSteps){if(this.options['showMinorLabels']&&isMajor===false||this.master===false&&this.options['showMinorLabels']===true){this._redrawLabel(y-2,step.getCurrent(),orientation,'vis-y-axis vis-minor',this.props.minorCharHeight);}
if(isMajor&&this.options['showMajorLabels']&&this.master===true||this.options['showMinorLabels']===false&&this.master===false&&isMajor===true){if(y>=0){this._redrawLabel(y-2,step.getCurrent(),orientation,'vis-y-axis vis-major',this.props.majorCharHeight);}
this._redrawLine(y,orientation,'vis-grid vis-horizontal vis-major',this.options.majorLinesOffset,this.props.majorLineWidth);}else{this._redrawLine(y,orientation,'vis-grid vis-horizontal vis-minor',this.options.minorLinesOffset,this.props.minorLineWidth);}}
if(this.master===true&&step.current===0){this.zeroCrossing=stepIndex;}
step.next();stepIndex+=1;}
if(this.master===true&&step.current===0){this.zeroCrossing=stepIndex;}
this.conversionFactor=this.stepPixels/step.step;var titleWidth=0;if(this.options[orientation].title!==undefined&&this.options[orientation].title.text!==undefined){titleWidth=this.props.titleCharHeight;}
var offset=this.options.icons===true?Math.max(this.options.iconWidth,titleWidth)+this.options.labelOffsetX+15:titleWidth+this.options.labelOffsetX+15;if(this.maxLabelSize>this.width-offset&&this.options.visible===true){this.width=this.maxLabelSize+offset;this.options.width=this.width+'px';DOMutil.cleanupElements(this.DOMelements.lines);DOMutil.cleanupElements(this.DOMelements.labels);this.redraw();resized=true;}
else if(this.maxLabelSize<this.width-offset&&this.options.visible===true&&this.width>this.minWidth){this.width=Math.max(this.minWidth,this.maxLabelSize+offset);this.options.width=this.width+'px';DOMutil.cleanupElements(this.DOMelements.lines);DOMutil.cleanupElements(this.DOMelements.labels);this.redraw();resized=true;}else{DOMutil.cleanupElements(this.DOMelements.lines);DOMutil.cleanupElements(this.DOMelements.labels);resized=false;}
return resized;};DataAxis.prototype.convertValue=function(value){var invertedValue=this.valueAtBottom-value;var convertedValue=invertedValue*this.conversionFactor;return convertedValue;};DataAxis.prototype.screenToValue=function(x){return this.valueAtBottom-x/this.conversionFactor;};DataAxis.prototype._redrawLabel=function(y,text,orientation,className,characterHeight){var label=DOMutil.getDOMElement('div',this.DOMelements.labels,this.dom.frame);label.className=className;label.innerHTML=text;if(orientation==='left'){label.style.left='-'+this.options.labelOffsetX+'px';label.style.textAlign='right';}else{label.style.right='-'+this.options.labelOffsetX+'px';label.style.textAlign='left';}
label.style.top=y-0.5*characterHeight+this.options.labelOffsetY+'px';text+='';var largestWidth=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);if(this.maxLabelSize<text.length*largestWidth){this.maxLabelSize=text.length*largestWidth;}};DataAxis.prototype._redrawLine=function(y,orientation,className,offset,width){if(this.master===true){var line=DOMutil.getDOMElement('div',this.DOMelements.lines,this.dom.lineContainer);line.className=className;line.innerHTML='';if(orientation==='left'){line.style.left=this.width-offset+'px';}else{line.style.right=this.width-offset+'px';}
line.style.width=width+'px';line.style.top=y+'px';}};DataAxis.prototype._redrawTitle=function(orientation){DOMutil.prepareElements(this.DOMelements.title);if(this.options[orientation].title!==undefined&&this.options[orientation].title.text!==undefined){var title=DOMutil.getDOMElement('div',this.DOMelements.title,this.dom.frame);title.className='vis-y-axis vis-title vis-'+orientation;title.innerHTML=this.options[orientation].title.text;if(this.options[orientation].title.style!==undefined){util.addCssText(title,this.options[orientation].title.style);}
if(orientation==='left'){title.style.left=this.props.titleCharHeight+'px';}else{title.style.right=this.props.titleCharHeight+'px';}
title.style.width=this.height+'px';}
DOMutil.cleanupElements(this.DOMelements.title);};DataAxis.prototype._calculateCharSize=function(){if(!('minorCharHeight'in this.props)){var textMinor=document.createTextNode('0');var measureCharMinor=document.createElement('div');measureCharMinor.className='vis-y-axis vis-minor vis-measure';measureCharMinor.appendChild(textMinor);this.dom.frame.appendChild(measureCharMinor);this.props.minorCharHeight=measureCharMinor.clientHeight;this.props.minorCharWidth=measureCharMinor.clientWidth;this.dom.frame.removeChild(measureCharMinor);}
if(!('majorCharHeight'in this.props)){var textMajor=document.createTextNode('0');var measureCharMajor=document.createElement('div');measureCharMajor.className='vis-y-axis vis-major vis-measure';measureCharMajor.appendChild(textMajor);this.dom.frame.appendChild(measureCharMajor);this.props.majorCharHeight=measureCharMajor.clientHeight;this.props.majorCharWidth=measureCharMajor.clientWidth;this.dom.frame.removeChild(measureCharMajor);}
if(!('titleCharHeight'in this.props)){var textTitle=document.createTextNode('0');var measureCharTitle=document.createElement('div');measureCharTitle.className='vis-y-axis vis-title vis-measure';measureCharTitle.appendChild(textTitle);this.dom.frame.appendChild(measureCharTitle);this.props.titleCharHeight=measureCharTitle.clientHeight;this.props.titleCharWidth=measureCharTitle.clientWidth;this.dom.frame.removeChild(measureCharTitle);}};module.exports=DataAxis;},function(module,exports){'use strict';function DataStep(start,end,minimumStep,containerHeight,customRange,formattingFunction,alignZeros){this.current=0;this.autoScale=true;this.stepIndex=0;this.step=1;this.scale=1;this.formattingFunction=formattingFunction;this.marginStart;this.marginEnd;this.deadSpace=0;this.majorSteps=[1,2,5,10];this.minorSteps=[0.25,0.5,1,2];this.alignZeros=alignZeros;this.setRange(start,end,minimumStep,containerHeight,customRange);}
DataStep.prototype.setRange=function(start,end,minimumStep,containerHeight,customRange){this._start=customRange.min===undefined?start:customRange.min;this._end=customRange.max===undefined?end:customRange.max;if(this._start===this._end){this._start=customRange.min===undefined?this._start-0.75:this._start;this._end=customRange.max===undefined?this._end+1:this._end;;}
if(this.autoScale===true){this.setMinimumStep(minimumStep,containerHeight);}
this.setFirst(customRange);};DataStep.prototype.setMinimumStep=function(minimumStep,containerHeight){var range=this._end-this._start;var safeRange=range*1.2;var minimumStepValue=minimumStep*(safeRange/containerHeight);var orderOfMagnitude=Math.round(Math.log(safeRange)/Math.LN10);var minorStepIdx=-1;var magnitudefactor=Math.pow(10,orderOfMagnitude);var start=0;if(orderOfMagnitude<0){start=orderOfMagnitude;}
var solutionFound=false;for(var i=start;Math.abs(i)<=Math.abs(orderOfMagnitude);i++){magnitudefactor=Math.pow(10,i);for(var j=0;j<this.minorSteps.length;j++){var stepSize=magnitudefactor*this.minorSteps[j];if(stepSize>=minimumStepValue){solutionFound=true;minorStepIdx=j;break;}}
if(solutionFound===true){break;}}
this.stepIndex=minorStepIdx;this.scale=magnitudefactor;this.step=magnitudefactor*this.minorSteps[minorStepIdx];};DataStep.prototype.setFirst=function(customRange){if(customRange===undefined){customRange={};}
var niceStart=customRange.min===undefined?this._start-this.scale*2*this.minorSteps[this.stepIndex]:customRange.min;var niceEnd=customRange.max===undefined?this._end+this.scale*this.minorSteps[this.stepIndex]:customRange.max;this.marginEnd=customRange.max===undefined?this.roundToMinor(niceEnd):customRange.max;this.marginStart=customRange.min===undefined?this.roundToMinor(niceStart):customRange.min;if(this.alignZeros===true&&(this.marginEnd-this.marginStart)%this.step!=0){this.marginEnd+=this.marginEnd%this.step;}
this.deadSpace=this.roundToMinor(niceEnd)-niceEnd+this.roundToMinor(niceStart)-niceStart;this.marginRange=this.marginEnd-this.marginStart;this.current=this.marginEnd;};DataStep.prototype.roundToMinor=function(value){var rounded=value-value%(this.scale*this.minorSteps[this.stepIndex]);if(value%(this.scale*this.minorSteps[this.stepIndex])>0.5*(this.scale*this.minorSteps[this.stepIndex])){return rounded+this.scale*this.minorSteps[this.stepIndex];}else{return rounded;}};DataStep.prototype.hasNext=function(){return this.current>=this.marginStart;};DataStep.prototype.next=function(){var prev=this.current;this.current-=this.step;if(this.current===prev){this.current=this._end;}};DataStep.prototype.previous=function(){this.current+=this.step;this.marginEnd+=this.step;this.marginRange=this.marginEnd-this.marginStart;};DataStep.prototype.getCurrent=function(){var current=Math.abs(this.current)<this.step/2?0:this.current;var returnValue=current.toPrecision(5);if(typeof this.formattingFunction==='function'){returnValue=this.formattingFunction(current);}
if(typeof returnValue==='number'){return''+returnValue;}else if(typeof returnValue==='string'){return returnValue;}else{return current.toPrecision(5);}};DataStep.prototype.isMajor=function(){return this.current%(this.scale*this.majorSteps[this.stepIndex])===0;};DataStep.prototype.shift=function(steps){if(steps<0){for(var i=0;i<-steps;i++){this.previous();}}else if(steps>0){for(var i=0;i<steps;i++){this.next();}}};module.exports=DataStep;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var DOMutil=__webpack_require__(7);var Line=__webpack_require__(54);var Bar=__webpack_require__(56);var Points=__webpack_require__(55);function GraphGroup(group,groupId,options,groupsUsingDefaultStyles){this.id=groupId;var fields=['sampling','style','sort','yAxisOrientation','barChart','drawPoints','shaded','interpolation'];this.options=util.selectiveBridgeObject(fields,options);this.usingDefaultStyle=group.className===undefined;this.groupsUsingDefaultStyles=groupsUsingDefaultStyles;this.zeroPosition=0;this.update(group);if(this.usingDefaultStyle==true){this.groupsUsingDefaultStyles[0]+=1;}
this.itemsData=[];this.visible=group.visible===undefined?true:group.visible;}
GraphGroup.prototype.setItems=function(items){if(items!=null){this.itemsData=items;if(this.options.sort==true){this.itemsData.sort(function(a,b){return a.x-b.x;});}}else{this.itemsData=[];}};GraphGroup.prototype.setZeroPosition=function(pos){this.zeroPosition=pos;};GraphGroup.prototype.setOptions=function(options){if(options!==undefined){var fields=['sampling','style','sort','yAxisOrientation','barChart'];util.selectiveDeepExtend(fields,this.options,options);util.mergeOptions(this.options,options,'interpolation');util.mergeOptions(this.options,options,'drawPoints');util.mergeOptions(this.options,options,'shaded');if(options.interpolation){if(typeof options.interpolation=='object'){if(options.interpolation.parametrization){if(options.interpolation.parametrization=='uniform'){this.options.interpolation.alpha=0;}else if(options.interpolation.parametrization=='chordal'){this.options.interpolation.alpha=1;}else{this.options.interpolation.parametrization='centripetal';this.options.interpolation.alpha=0.5;}}}}}
if(this.options.style=='line'){this.type=new Line(this.id,this.options);}else if(this.options.style=='bar'){this.type=new Bar(this.id,this.options);}else if(this.options.style=='points'){this.type=new Points(this.id,this.options);}};GraphGroup.prototype.update=function(group){this.group=group;this.content=group.content||'graph';this.className=group.className||this.className||'vis-graph-group'+this.groupsUsingDefaultStyles[0]%10;this.visible=group.visible===undefined?true:group.visible;this.style=group.style;this.setOptions(group.options);};GraphGroup.prototype.drawIcon=function(x,y,JSONcontainer,SVGcontainer,iconWidth,iconHeight){var fillHeight=iconHeight*0.5;var path,fillPath;var outline=DOMutil.getSVGElement('rect',JSONcontainer,SVGcontainer);outline.setAttributeNS(null,'x',x);outline.setAttributeNS(null,'y',y-fillHeight);outline.setAttributeNS(null,'width',iconWidth);outline.setAttributeNS(null,'height',2*fillHeight);outline.setAttributeNS(null,'class','vis-outline');if(this.options.style=='line'){path=DOMutil.getSVGElement('path',JSONcontainer,SVGcontainer);path.setAttributeNS(null,'class',this.className);if(this.style!==undefined){path.setAttributeNS(null,'style',this.style);}
path.setAttributeNS(null,'d','M'+x+','+y+' L'+(x+iconWidth)+','+y+'');if(this.options.shaded.enabled==true){fillPath=DOMutil.getSVGElement('path',JSONcontainer,SVGcontainer);if(this.options.shaded.orientation=='top'){fillPath.setAttributeNS(null,'d','M'+x+', '+(y-fillHeight)+'L'+x+','+y+' L'+(x+iconWidth)+','+y+' L'+(x+iconWidth)+','+(y-fillHeight));}else{fillPath.setAttributeNS(null,'d','M'+x+','+y+' '+'L'+x+','+(y+fillHeight)+' '+'L'+(x+iconWidth)+','+(y+fillHeight)+'L'+(x+iconWidth)+','+y);}
fillPath.setAttributeNS(null,'class',this.className+' vis-icon-fill');}
if(this.options.drawPoints.enabled==true){DOMutil.drawPoint(x+0.5*iconWidth,y,this,JSONcontainer,SVGcontainer);}}else{var barWidth=Math.round(0.3*iconWidth);var bar1Height=Math.round(0.4*iconHeight);var bar2Height=Math.round(0.75*iconHeight);var offset=Math.round((iconWidth-2*barWidth)/3);DOMutil.drawBar(x+0.5*barWidth+offset,y+fillHeight-bar1Height-1,barWidth,bar1Height,this.className+' vis-bar',JSONcontainer,SVGcontainer,this.style);DOMutil.drawBar(x+1.5*barWidth+offset+2,y+fillHeight-bar2Height-1,barWidth,bar2Height,this.className+' vis-bar',JSONcontainer,SVGcontainer,this.style);}};GraphGroup.prototype.getLegend=function(iconWidth,iconHeight){var svg=document.createElementNS('http://www.w3.org/2000/svg','svg');this.drawIcon(0,0.5*iconHeight,[],svg,iconWidth,iconHeight);return{icon:svg,label:this.content,orientation:this.options.yAxisOrientation};};GraphGroup.prototype.getYRange=function(groupData){return this.type.getYRange(groupData);};GraphGroup.prototype.getData=function(groupData){return this.type.getData(groupData);};GraphGroup.prototype.draw=function(dataset,group,framework){this.type.draw(dataset,group,framework);};module.exports=GraphGroup;},function(module,exports,__webpack_require__){'use strict';var DOMutil=__webpack_require__(7);var Points=__webpack_require__(55);function Line(groupId,options){this.groupId=groupId;this.options=options;}
Line.prototype.getData=function(groupData){var combinedData=[];for(var j=0;j<groupData.length;j++){combinedData.push({x:groupData[j].x,y:groupData[j].y,groupId:this.groupId});}
return combinedData;};Line.prototype.getYRange=function(groupData){var yMin=groupData[0].y;var yMax=groupData[0].y;for(var j=0;j<groupData.length;j++){yMin=yMin>groupData[j].y?groupData[j].y:yMin;yMax=yMax<groupData[j].y?groupData[j].y:yMax;}
return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation};};Line.getStackedYRange=function(combinedData,groupRanges,groupIds,groupLabel,orientation){if(combinedData.length>0){combinedData.sort(function(a,b){if(a.x===b.x){return a.groupId<b.groupId?-1:1;}else{return a.x-b.x;}});var intersections={};Line._getDataIntersections(intersections,combinedData);groupRanges[groupLabel]=Line._getStackedYRange(intersections,combinedData);groupRanges[groupLabel].yAxisOrientation=orientation;groupIds.push(groupLabel);}};Line._getStackedYRange=function(intersections,combinedData){var key;var yMin=combinedData[0].y;var yMax=combinedData[0].y;for(var i=0;i<combinedData.length;i++){key=combinedData[i].x;if(intersections[key]===undefined){yMin=yMin>combinedData[i].y?combinedData[i].y:yMin;yMax=yMax<combinedData[i].y?combinedData[i].y:yMax;}else{if(combinedData[i].y<0){intersections[key].accumulatedNegative+=combinedData[i].y;}else{intersections[key].accumulatedPositive+=combinedData[i].y;}}}
for(var xpos in intersections){if(intersections.hasOwnProperty(xpos)){yMin=yMin>intersections[xpos].accumulatedNegative?intersections[xpos].accumulatedNegative:yMin;yMin=yMin>intersections[xpos].accumulatedPositive?intersections[xpos].accumulatedPositive:yMin;yMax=yMax<intersections[xpos].accumulatedNegative?intersections[xpos].accumulatedNegative:yMax;yMax=yMax<intersections[xpos].accumulatedPositive?intersections[xpos].accumulatedPositive:yMax;}}
return{min:yMin,max:yMax};};Line._getDataIntersections=function(intersections,combinedData){var coreDistance;for(var i=0;i<combinedData.length;i++){if(i+1<combinedData.length){coreDistance=Math.abs(combinedData[i+1].x-combinedData[i].x);}
if(i>0){coreDistance=Math.min(coreDistance,Math.abs(combinedData[i-1].x-combinedData[i].x));}
if(coreDistance===0){if(intersections[combinedData[i].x]===undefined){intersections[combinedData[i].x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0};}
intersections[combinedData[i].x].amount+=1;}}};Line.prototype.draw=function(dataset,group,framework){if(dataset!=null){if(dataset.length>0){var path,d;var svgHeight=Number(framework.svg.style.height.replace('px',''));path=DOMutil.getSVGElement('path',framework.svgElements,framework.svg);path.setAttributeNS(null,'class',group.className);if(group.style!==undefined){path.setAttributeNS(null,'style',group.style);}
if(group.options.interpolation.enabled==true){d=Line._catmullRom(dataset,group);}else{d=Line._linear(dataset);}
if(group.options.shaded.enabled==true){var fillPath=DOMutil.getSVGElement('path',framework.svgElements,framework.svg);var dFill;if(group.options.shaded.orientation=='top'){dFill='M'+dataset[0].x+','+0+' '+d+'L'+dataset[dataset.length-1].x+','+0;}else{dFill='M'+dataset[0].x+','+svgHeight+' '+d+'L'+dataset[dataset.length-1].x+','+svgHeight;}
fillPath.setAttributeNS(null,'class',group.className+' vis-fill');if(group.options.shaded.style!==undefined){fillPath.setAttributeNS(null,'style',group.options.shaded.style);}
fillPath.setAttributeNS(null,'d',dFill);}
path.setAttributeNS(null,'d','M'+d);if(group.options.drawPoints.enabled==true){Points.draw(dataset,group,framework);}}}};Line._catmullRomUniform=function(data){var p0,p1,p2,p3,bp1,bp2;var d=Math.round(data[0].x)+','+Math.round(data[0].y)+' ';var normalization=1/6;var length=data.length;for(var i=0;i<length-1;i++){p0=i==0?data[0]:data[i-1];p1=data[i];p2=data[i+1];p3=i+2<length?data[i+2]:p2;bp1={x:(-p0.x+6*p1.x+p2.x)*normalization,y:(-p0.y+6*p1.y+p2.y)*normalization};bp2={x:(p1.x+6*p2.x-p3.x)*normalization,y:(p1.y+6*p2.y-p3.y)*normalization};d+='C'+bp1.x+','+bp1.y+' '+bp2.x+','+bp2.y+' '+p2.x+','+p2.y+' ';}
return d;};Line._catmullRom=function(data,group){var alpha=group.options.interpolation.alpha;if(alpha==0||alpha===undefined){return this._catmullRomUniform(data);}else{var p0,p1,p2,p3,bp1,bp2,d1,d2,d3,A,B,N,M;var d3powA,d2powA,d3pow2A,d2pow2A,d1pow2A,d1powA;var d=Math.round(data[0].x)+','+Math.round(data[0].y)+' ';var length=data.length;for(var i=0;i<length-1;i++){p0=i==0?data[0]:data[i-1];p1=data[i];p2=data[i+1];p3=i+2<length?data[i+2]:p2;d1=Math.sqrt(Math.pow(p0.x-p1.x,2)+Math.pow(p0.y-p1.y,2));d2=Math.sqrt(Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2));d3=Math.sqrt(Math.pow(p2.x-p3.x,2)+Math.pow(p2.y-p3.y,2));d3powA=Math.pow(d3,alpha);d3pow2A=Math.pow(d3,2*alpha);d2powA=Math.pow(d2,alpha);d2pow2A=Math.pow(d2,2*alpha);d1powA=Math.pow(d1,alpha);d1pow2A=Math.pow(d1,2*alpha);A=2*d1pow2A+3*d1powA*d2powA+d2pow2A;B=2*d3pow2A+3*d3powA*d2powA+d2pow2A;N=3*d1powA*(d1powA+d2powA);if(N>0){N=1/N;}
M=3*d3powA*(d3powA+d2powA);if(M>0){M=1/M;}
bp1={x:(-d2pow2A*p0.x+A*p1.x+d1pow2A*p2.x)*N,y:(-d2pow2A*p0.y+A*p1.y+d1pow2A*p2.y)*N};bp2={x:(d3pow2A*p1.x+B*p2.x-d2pow2A*p3.x)*M,y:(d3pow2A*p1.y+B*p2.y-d2pow2A*p3.y)*M};if(bp1.x==0&&bp1.y==0){bp1=p1;}
if(bp2.x==0&&bp2.y==0){bp2=p2;}
d+='C'+bp1.x+','+bp1.y+' '+bp2.x+','+bp2.y+' '+p2.x+','+p2.y+' ';}
return d;}};Line._linear=function(data){var d='';for(var i=0;i<data.length;i++){if(i==0){d+=data[i].x+','+data[i].y;}else{d+=' '+data[i].x+','+data[i].y;}}
return d;};module.exports=Line;},function(module,exports,__webpack_require__){'use strict';var DOMutil=__webpack_require__(7);function Points(groupId,options){this.groupId=groupId;this.options=options;}
Points.prototype.getYRange=function(groupData){var yMin=groupData[0].y;var yMax=groupData[0].y;for(var j=0;j<groupData.length;j++){yMin=yMin>groupData[j].y?groupData[j].y:yMin;yMax=yMax<groupData[j].y?groupData[j].y:yMax;}
return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation};};Points.prototype.draw=function(dataset,group,framework,offset){Points.draw(dataset,group,framework,offset);};Points.draw=function(dataset,group,framework,offset){if(offset===undefined){offset=0;}
for(var i=0;i<dataset.length;i++){DOMutil.drawPoint(dataset[i].x+offset,dataset[i].y,group,framework.svgElements,framework.svg,dataset[i].label);}};module.exports=Points;},function(module,exports,__webpack_require__){'use strict';var DOMutil=__webpack_require__(7);var Points=__webpack_require__(55);function Bargraph(groupId,options){this.groupId=groupId;this.options=options;}
Bargraph.prototype.getYRange=function(groupData){var yMin=groupData[0].y;var yMax=groupData[0].y;for(var j=0;j<groupData.length;j++){yMin=yMin>groupData[j].y?groupData[j].y:yMin;yMax=yMax<groupData[j].y?groupData[j].y:yMax;}
return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation};};Bargraph.prototype.getData=function(groupData){var combinedData=[];for(var j=0;j<groupData.length;j++){combinedData.push({x:groupData[j].x,y:groupData[j].y,groupId:this.groupId});}
return combinedData;};Bargraph.draw=function(groupIds,processedGroupData,framework){var combinedData=[];var intersections={};var coreDistance;var key,drawData;var group;var i,j;var barPoints=0;for(i=0;i<groupIds.length;i++){group=framework.groups[groupIds[i]];if(group.options.style==='bar'){if(group.visible===true&&(framework.options.groups.visibility[groupIds[i]]===undefined||framework.options.groups.visibility[groupIds[i]]===true)){for(j=0;j<processedGroupData[groupIds[i]].length;j++){combinedData.push({x:processedGroupData[groupIds[i]][j].x,y:processedGroupData[groupIds[i]][j].y,groupId:groupIds[i],label:processedGroupData[groupIds[i]][j].label});barPoints+=1;}}}}
if(barPoints===0){return;}
combinedData.sort(function(a,b){if(a.x===b.x){return a.groupId<b.groupId?-1:1;}else{return a.x-b.x;}});Bargraph._getDataIntersections(intersections,combinedData);for(i=0;i<combinedData.length;i++){group=framework.groups[combinedData[i].groupId];var minWidth=0.1*group.options.barChart.width;key=combinedData[i].x;var heightOffset=0;if(intersections[key]===undefined){if(i+1<combinedData.length){coreDistance=Math.abs(combinedData[i+1].x-key);}
if(i>0){coreDistance=Math.min(coreDistance,Math.abs(combinedData[i-1].x-key));}
drawData=Bargraph._getSafeDrawData(coreDistance,group,minWidth);}else{var nextKey=i+(intersections[key].amount-intersections[key].resolved);var prevKey=i-(intersections[key].resolved+1);if(nextKey<combinedData.length){coreDistance=Math.abs(combinedData[nextKey].x-key);}
if(prevKey>0){coreDistance=Math.min(coreDistance,Math.abs(combinedData[prevKey].x-key));}
drawData=Bargraph._getSafeDrawData(coreDistance,group,minWidth);intersections[key].resolved+=1;if(group.options.stack===true){if(combinedData[i].y<group.zeroPosition){heightOffset=intersections[key].accumulatedNegative;intersections[key].accumulatedNegative+=group.zeroPosition-combinedData[i].y;}else{heightOffset=intersections[key].accumulatedPositive;intersections[key].accumulatedPositive+=group.zeroPosition-combinedData[i].y;}}else if(group.options.barChart.sideBySide===true){drawData.width=drawData.width/intersections[key].amount;drawData.offset+=intersections[key].resolved*drawData.width-0.5*drawData.width*(intersections[key].amount+1);if(group.options.barChart.align==='left'){drawData.offset-=0.5*drawData.width;}else if(group.options.barChart.align==='right'){drawData.offset+=0.5*drawData.width;}}}
DOMutil.drawBar(combinedData[i].x+drawData.offset,combinedData[i].y-heightOffset,drawData.width,group.zeroPosition-combinedData[i].y,group.className+' vis-bar',framework.svgElements,framework.svg,group.style);if(group.options.drawPoints.enabled===true){Points.draw([combinedData[i]],group,framework,drawData.offset);}}};Bargraph._getDataIntersections=function(intersections,combinedData){var coreDistance;for(var i=0;i<combinedData.length;i++){if(i+1<combinedData.length){coreDistance=Math.abs(combinedData[i+1].x-combinedData[i].x);}
if(i>0){coreDistance=Math.min(coreDistance,Math.abs(combinedData[i-1].x-combinedData[i].x));}
if(coreDistance===0){if(intersections[combinedData[i].x]===undefined){intersections[combinedData[i].x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0};}
intersections[combinedData[i].x].amount+=1;}}};Bargraph._getSafeDrawData=function(coreDistance,group,minWidth){var width,offset;if(coreDistance<group.options.barChart.width&&coreDistance>0){width=coreDistance<minWidth?minWidth:coreDistance;offset=0;if(group.options.barChart.align==='left'){offset-=0.5*coreDistance;}else if(group.options.barChart.align==='right'){offset+=0.5*coreDistance;}}else{width=group.options.barChart.width;offset=0;if(group.options.barChart.align==='left'){offset-=0.5*group.options.barChart.width;}else if(group.options.barChart.align==='right'){offset+=0.5*group.options.barChart.width;}}
return{width:width,offset:offset};};Bargraph.getStackedYRange=function(combinedData,groupRanges,groupIds,groupLabel,orientation){if(combinedData.length>0){combinedData.sort(function(a,b){if(a.x===b.x){return a.groupId<b.groupId?-1:1;}else{return a.x-b.x;}});var intersections={};Bargraph._getDataIntersections(intersections,combinedData);groupRanges[groupLabel]=Bargraph._getStackedYRange(intersections,combinedData);groupRanges[groupLabel].yAxisOrientation=orientation;groupIds.push(groupLabel);}};Bargraph._getStackedYRange=function(intersections,combinedData){var key;var yMin=combinedData[0].y;var yMax=combinedData[0].y;for(var i=0;i<combinedData.length;i++){key=combinedData[i].x;if(intersections[key]===undefined){yMin=yMin>combinedData[i].y?combinedData[i].y:yMin;yMax=yMax<combinedData[i].y?combinedData[i].y:yMax;}else{if(combinedData[i].y<0){intersections[key].accumulatedNegative+=combinedData[i].y;}else{intersections[key].accumulatedPositive+=combinedData[i].y;}}}
for(var xpos in intersections){if(intersections.hasOwnProperty(xpos)){yMin=yMin>intersections[xpos].accumulatedNegative?intersections[xpos].accumulatedNegative:yMin;yMin=yMin>intersections[xpos].accumulatedPositive?intersections[xpos].accumulatedPositive:yMin;yMax=yMax<intersections[xpos].accumulatedNegative?intersections[xpos].accumulatedNegative:yMax;yMax=yMax<intersections[xpos].accumulatedPositive?intersections[xpos].accumulatedPositive:yMax;}}
return{min:yMin,max:yMax};};module.exports=Bargraph;},function(module,exports,__webpack_require__){'use strict';var util=__webpack_require__(1);var DOMutil=__webpack_require__(7);var Component=__webpack_require__(21);function Legend(body,options,side,linegraphOptions){this.body=body;this.defaultOptions={enabled:true,icons:true,iconSize:20,iconSpacing:6,left:{visible:true,position:'top-left'},right:{visible:true,position:'top-left'}};this.side=side;this.options=util.extend({},this.defaultOptions);this.linegraphOptions=linegraphOptions;this.svgElements={};this.dom={};this.groups={};this.amountOfGroups=0;this._create();this.setOptions(options);}
Legend.prototype=new Component();Legend.prototype.clear=function(){this.groups={};this.amountOfGroups=0;};Legend.prototype.addGroup=function(label,graphOptions){if(!this.groups.hasOwnProperty(label)){this.groups[label]=graphOptions;}
this.amountOfGroups+=1;};Legend.prototype.updateGroup=function(label,graphOptions){this.groups[label]=graphOptions;};Legend.prototype.removeGroup=function(label){if(this.groups.hasOwnProperty(label)){delete this.groups[label];this.amountOfGroups-=1;}};Legend.prototype._create=function(){this.dom.frame=document.createElement('div');this.dom.frame.className='vis-legend';this.dom.frame.style.position='absolute';this.dom.frame.style.top='10px';this.dom.frame.style.display='block';this.dom.textArea=document.createElement('div');this.dom.textArea.className='vis-legend-text';this.dom.textArea.style.position='relative';this.dom.textArea.style.top='0px';this.svg=document.createElementNS('http://www.w3.org/2000/svg','svg');this.svg.style.position='absolute';this.svg.style.top=0+'px';this.svg.style.width=this.options.iconSize+5+'px';this.svg.style.height='100%';this.dom.frame.appendChild(this.svg);this.dom.frame.appendChild(this.dom.textArea);};Legend.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame);}};Legend.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame);}};Legend.prototype.setOptions=function(options){var fields=['enabled','orientation','icons','left','right'];util.selectiveDeepExtend(fields,this.options,options);};Legend.prototype.redraw=function(){var activeGroups=0;var groupArray=Object.keys(this.groups);groupArray.sort(function(a,b){return a<b?-1:1;});for(var i=0;i<groupArray.length;i++){var groupId=groupArray[i];if(this.groups[groupId].visible==true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]==true)){activeGroups++;}}
if(this.options[this.side].visible==false||this.amountOfGroups==0||this.options.enabled==false||activeGroups==0){this.hide();}else{this.show();if(this.options[this.side].position=='top-left'||this.options[this.side].position=='bottom-left'){this.dom.frame.style.left='4px';this.dom.frame.style.textAlign='left';this.dom.textArea.style.textAlign='left';this.dom.textArea.style.left=this.options.iconSize+15+'px';this.dom.textArea.style.right='';this.svg.style.left=0+'px';this.svg.style.right='';}else{this.dom.frame.style.right='4px';this.dom.frame.style.textAlign='right';this.dom.textArea.style.textAlign='right';this.dom.textArea.style.right=this.options.iconSize+15+'px';this.dom.textArea.style.left='';this.svg.style.right=0+'px';this.svg.style.left='';}
if(this.options[this.side].position=='top-left'||this.options[this.side].position=='top-right'){this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace('px',''))+'px';this.dom.frame.style.bottom='';}else{var scrollableHeight=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+scrollableHeight+Number(this.body.dom.center.style.top.replace('px',''))+'px';this.dom.frame.style.top='';}
if(this.options.icons==false){this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+'px';this.dom.textArea.style.right='';this.dom.textArea.style.left='';this.svg.style.width='0px';}else{this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+'px';this.drawLegendIcons();}
var content='';for(var i=0;i<groupArray.length;i++){var groupId=groupArray[i];if(this.groups[groupId].visible==true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]==true)){content+=this.groups[groupId].content+'<br />';}}
this.dom.textArea.innerHTML=content;this.dom.textArea.style.lineHeight=0.75*this.options.iconSize+this.options.iconSpacing+'px';}};Legend.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var groupArray=Object.keys(this.groups);groupArray.sort(function(a,b){return a<b?-1:1;});DOMutil.prepareElements(this.svgElements);var padding=window.getComputedStyle(this.dom.frame).paddingTop;var iconOffset=Number(padding.replace('px',''));var x=iconOffset;var iconWidth=this.options.iconSize;var iconHeight=0.75*this.options.iconSize;var y=iconOffset+0.5*iconHeight+3;this.svg.style.width=iconWidth+5+iconOffset+'px';for(var i=0;i<groupArray.length;i++){var groupId=groupArray[i];if(this.groups[groupId].visible==true&&(this.linegraphOptions.visibility[groupId]===undefined||this.linegraphOptions.visibility[groupId]==true)){this.groups[groupId].drawIcon(x,y,this.svgElements,this.svg,iconWidth,iconHeight);y+=iconHeight+this.options.iconSpacing;}}
DOMutil.cleanupElements(this.svgElements);}};module.exports=Legend;},function(module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var string='string';var boolean='boolean';var number='number';var array='array';var date='date';var object='object';var dom='dom';var moment='moment';var any='any';var allOptions={configure:{enabled:{boolean:boolean},filter:{boolean:boolean,'function':'function'},container:{dom:dom},__type__:{object:object,boolean:boolean,'function':'function'}},yAxisOrientation:{string:['left','right']},defaultGroup:{string:string},sort:{boolean:boolean},sampling:{boolean:boolean},stack:{boolean:boolean},graphHeight:{string:string,number:number},shaded:{enabled:{boolean:boolean},orientation:{string:['bottom','top']},__type__:{boolean:boolean,object:object}},style:{string:['line','bar','points']},barChart:{width:{number:number},sideBySide:{boolean:boolean},align:{string:['left','center','right']},__type__:{object:object}},interpolation:{enabled:{boolean:boolean},parametrization:{string:['centripetal','chordal','uniform']},alpha:{number:number},__type__:{object:object,boolean:boolean}},drawPoints:{enabled:{boolean:boolean},size:{number:number},style:{string:['square','circle']},__type__:{object:object,boolean:boolean}},dataAxis:{showMinorLabels:{boolean:boolean},showMajorLabels:{boolean:boolean},icons:{boolean:boolean},width:{string:string,number:number},visible:{boolean:boolean},alignZeros:{boolean:boolean},left:{range:{min:{number:number},max:{number:number},__type__:{object:object}},format:{'function':'function'},title:{text:{string:string,number:number},style:{string:string},__type__:{object:object}},__type__:{object:object}},right:{range:{min:{number:number},max:{number:number},__type__:{object:object}},format:{'function':'function'},title:{text:{string:string,number:number},style:{string:string},__type__:{object:object}},__type__:{object:object}},__type__:{object:object}},legend:{enabled:{boolean:boolean},icons:{boolean:boolean},left:{visible:{boolean:boolean},position:{string:['top-right','bottom-right','top-left','bottom-left']},__type__:{object:object}},right:{visible:{boolean:boolean},position:{string:['top-right','bottom-right','top-left','bottom-left']},__type__:{object:object}},__type__:{object:object,boolean:boolean}},groups:{visibility:{any:any},__type__:{object:object}},autoResize:{boolean:boolean},clickToUse:{boolean:boolean},end:{number:number,date:date,string:string,moment:moment},format:{minorLabels:{millisecond:{string:string,'undefined':'undefined'},second:{string:string,'undefined':'undefined'},minute:{string:string,'undefined':'undefined'},hour:{string:string,'undefined':'undefined'},weekday:{string:string,'undefined':'undefined'},day:{string:string,'undefined':'undefined'},month:{string:string,'undefined':'undefined'},year:{string:string,'undefined':'undefined'},__type__:{object:object}},majorLabels:{millisecond:{string:string,'undefined':'undefined'},second:{string:string,'undefined':'undefined'},minute:{string:string,'undefined':'undefined'},hour:{string:string,'undefined':'undefined'},weekday:{string:string,'undefined':'undefined'},day:{string:string,'undefined':'undefined'},month:{string:string,'undefined':'undefined'},year:{string:string,'undefined':'undefined'},__type__:{object:object}},__type__:{object:object}},height:{string:string,number:number},hiddenDates:{object:object,array:array},locale:{string:string},locales:{__any__:{any:any},__type__:{object:object}},max:{date:date,number:number,string:string,moment:moment},maxHeight:{number:number,string:string},min:{date:date,number:number,string:string,moment:moment},minHeight:{number:number,string:string},moveable:{boolean:boolean},multiselect:{boolean:boolean},orientation:{string:string},showCurrentTime:{boolean:boolean},showMajorLabels:{boolean:boolean},showMinorLabels:{boolean:boolean},start:{date:date,number:number,string:string,moment:moment},timeAxis:{scale:{string:string,'undefined':'undefined'},step:{number:number,'undefined':'undefined'},__type__:{object:object}},width:{string:string,number:number},zoomable:{boolean:boolean},zoomMax:{number:number},zoomMin:{number:number},__type__:{object:object}};var configureOptions={global:{sort:true,sampling:true,stack:false,shaded:{enabled:false,orientation:['top','bottom']},style:['line','bar','points'],barChart:{width:[50,5,100,5],sideBySide:false,align:['left','center','right']},interpolation:{enabled:true,parametrization:['centripetal','chordal','uniform']},drawPoints:{enabled:true,size:[6,2,30,1],style:['square','circle']},dataAxis:{showMinorLabels:true,showMajorLabels:true,icons:false,width:[40,0,200,1],visible:true,alignZeros:true,left:{title:{text:'',style:''}},right:{title:{text:'',style:''}}},legend:{enabled:false,icons:true,left:{visible:true,position:['top-right','bottom-right','top-left','bottom-left']},right:{visible:true,position:['top-right','bottom-right','top-left','bottom-left']}},autoResize:true,clickToUse:false,end:'',format:{minorLabels:{millisecond:'SSS',second:'s',minute:'HH:mm',hour:'HH:mm',weekday:'ddd D',day:'D',month:'MMM',year:'YYYY'},majorLabels:{millisecond:'HH:mm:ss',second:'D MMMM HH:mm',minute:'ddd D MMMM',hour:'ddd D MMMM',weekday:'MMMM YYYY',day:'MMMM YYYY',month:'YYYY',year:''}},height:'',locale:'',max:'',maxHeight:'',min:'',minHeight:'',moveable:true,orientation:['both','bottom','top'],showCurrentTime:false,showMajorLabels:true,showMinorLabels:true,start:'',width:'100%',zoomable:true,zoomMax:[315360000000000,10,315360000000000,1],zoomMin:[10,10,315360000000000,1]}};exports.allOptions=allOptions;exports.configureOptions=configureOptions;},function(module,exports,__webpack_require__){'use strict';function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
var _modulesGroups=__webpack_require__(60);var _modulesGroups2=_interopRequireDefault(_modulesGroups);var _modulesNodesHandler=__webpack_require__(61);var _modulesNodesHandler2=_interopRequireDefault(_modulesNodesHandler);var _modulesEdgesHandler=__webpack_require__(81);var _modulesEdgesHandler2=_interopRequireDefault(_modulesEdgesHandler);var _modulesPhysicsEngine=__webpack_require__(88);var _modulesPhysicsEngine2=_interopRequireDefault(_modulesPhysicsEngine);var _modulesClustering=__webpack_require__(97);var _modulesClustering2=_interopRequireDefault(_modulesClustering);var _modulesCanvasRenderer=__webpack_require__(99);var _modulesCanvasRenderer2=_interopRequireDefault(_modulesCanvasRenderer);var _modulesCanvas=__webpack_require__(100);var _modulesCanvas2=_interopRequireDefault(_modulesCanvas);var _modulesView=__webpack_require__(101);var _modulesView2=_interopRequireDefault(_modulesView);var _modulesInteractionHandler=__webpack_require__(102);var _modulesInteractionHandler2=_interopRequireDefault(_modulesInteractionHandler);var _modulesSelectionHandler=__webpack_require__(105);var _modulesSelectionHandler2=_interopRequireDefault(_modulesSelectionHandler);var _modulesLayoutEngine=__webpack_require__(106);var _modulesLayoutEngine2=_interopRequireDefault(_modulesLayoutEngine);var _modulesManipulationSystem=__webpack_require__(107);var _modulesManipulationSystem2=_interopRequireDefault(_modulesManipulationSystem);var _sharedConfigurator=__webpack_require__(45);var _sharedConfigurator2=_interopRequireDefault(_sharedConfigurator);var _sharedValidator=__webpack_require__(47);var _sharedValidator2=_interopRequireDefault(_sharedValidator);var _optionsJs=__webpack_require__(108);__webpack_require__(109);var Emitter=__webpack_require__(13);var Hammer=__webpack_require__(23);var util=__webpack_require__(1);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var dotparser=__webpack_require__(110);var gephiParser=__webpack_require__(111);var Images=__webpack_require__(112);var Activator=__webpack_require__(42);var locales=__webpack_require__(113);function Network(container,data,options){var _this=this;if(!(this instanceof Network)){throw new SyntaxError('Constructor must be called with the new operator');}
this.options={};this.defaultOptions={locale:'en',locales:locales,clickToUse:false};util.extend(this.options,this.defaultOptions);this.body={container:container,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function onTap(){},onTouch:function onTouch(){},onDoubleTap:function onDoubleTap(){},onHold:function onHold(){},onDragStart:function onDragStart(){},onDrag:function onDrag(){},onDragEnd:function onDragEnd(){},onMouseWheel:function onMouseWheel(){},onPinch:function onPinch(){},onMouseMove:function onMouseMove(){},onRelease:function onRelease(){},onContext:function onContext(){}},data:{nodes:null,edges:null},functions:{createNode:function createNode(){},createEdge:function createEdge(){},getPointer:function getPointer(){}},view:{scale:1,translation:{x:0,y:0}}};this.bindEventListeners();this.images=new Images(function(){return _this.body.emitter.emit('_requestRedraw');});this.groups=new _modulesGroups2['default']();this.canvas=new _modulesCanvas2['default'](this.body);this.selectionHandler=new _modulesSelectionHandler2['default'](this.body,this.canvas);this.interactionHandler=new _modulesInteractionHandler2['default'](this.body,this.canvas,this.selectionHandler);this.view=new _modulesView2['default'](this.body,this.canvas);this.renderer=new _modulesCanvasRenderer2['default'](this.body,this.canvas);this.physics=new _modulesPhysicsEngine2['default'](this.body);this.layoutEngine=new _modulesLayoutEngine2['default'](this.body);this.clustering=new _modulesClustering2['default'](this.body);this.manipulation=new _modulesManipulationSystem2['default'](this.body,this.canvas,this.selectionHandler);this.nodesHandler=new _modulesNodesHandler2['default'](this.body,this.images,this.groups,this.layoutEngine);this.edgesHandler=new _modulesEdgesHandler2['default'](this.body,this.images,this.groups);this.canvas._create();this.setOptions(options);this.setData(data);}
Emitter(Network.prototype);Network.prototype.setOptions=function(options){var _this2=this;if(options!==undefined){var errorFound=_sharedValidator2['default'].validate(options,_optionsJs.allOptions);if(errorFound===true){console.log('%cErrors have been found in the supplied options object.',_sharedValidator.printStyle);}
var fields=['locale','locales','clickToUse'];util.selectiveDeepExtend(fields,this.options,options);options=this.layoutEngine.setOptions(options.layout,options);this.canvas.setOptions(options);this.groups.setOptions(options.groups);this.nodesHandler.setOptions(options.nodes);this.edgesHandler.setOptions(options.edges);this.physics.setOptions(options.physics);this.manipulation.setOptions(options.manipulation,options,this.options);this.interactionHandler.setOptions(options.interaction);this.renderer.setOptions(options.interaction);this.selectionHandler.setOptions(options.interaction);if(options.groups!==undefined){this.body.emitter.emit('refreshNodes');}
if('configure'in options){if(!this.configurator){this.configurator=new _sharedConfigurator2['default'](this,this.body.container,_optionsJs.configureOptions,this.canvas.pixelRatio);}
this.configurator.setOptions(options.configure);}
if(this.configurator&&this.configurator.options.enabled===true){var networkOptions={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};util.deepExtend(networkOptions.nodes,this.nodesHandler.options);util.deepExtend(networkOptions.edges,this.edgesHandler.options);util.deepExtend(networkOptions.layout,this.layoutEngine.options);util.deepExtend(networkOptions.interaction,this.selectionHandler.options);util.deepExtend(networkOptions.interaction,this.renderer.options);util.deepExtend(networkOptions.interaction,this.interactionHandler.options);util.deepExtend(networkOptions.manipulation,this.manipulation.options);util.deepExtend(networkOptions.physics,this.physics.options);util.deepExtend(networkOptions.global,this.canvas.options);util.deepExtend(networkOptions.global,this.options);this.configurator.setModuleOptions(networkOptions);}
if(options.clickToUse!==undefined){if(options.clickToUse===true){if(this.activator===undefined){this.activator=new Activator(this.canvas.frame);this.activator.on('change',function(){_this2.body.emitter.emit('activate');});}}else{if(this.activator!==undefined){this.activator.destroy();delete this.activator;}
this.body.emitter.emit('activate');}}else{this.body.emitter.emit('activate');}
this.canvas.setSize();this.body.emitter.emit('startSimulation');}};Network.prototype._updateVisibleIndices=function(){var nodes=this.body.nodes;var edges=this.body.edges;this.body.nodeIndices=[];this.body.edgeIndices=[];for(var nodeId in nodes){if(nodes.hasOwnProperty(nodeId)){if(nodes[nodeId].options.hidden===false){this.body.nodeIndices.push(nodeId);}}}
for(var edgeId in edges){if(edges.hasOwnProperty(edgeId)){if(edges[edgeId].options.hidden===false){this.body.edgeIndices.push(edgeId);}}}};Network.prototype.bindEventListeners=function(){var _this3=this;this.body.emitter.on('_dataChanged',function(){_this3._updateVisibleIndices();_this3.physics.updatePhysicsData();_this3.body.emitter.emit('_requestRedraw');_this3.body.emitter.emit('_dataUpdated');});this.body.emitter.on('_dataUpdated',function(){_this3._updateValueRange(_this3.body.nodes);_this3._updateValueRange(_this3.body.edges);_this3.body.emitter.emit('startSimulation');_this3.body.emitter.emit('_requestRedraw');});};Network.prototype.setData=function(data){this.body.emitter.emit('resetPhysics');this.body.emitter.emit('_resetData');this.selectionHandler.unselectAll();if(data&&data.dot&&(data.nodes||data.edges)){throw new SyntaxError('Data must contain either parameter "dot" or '+' parameter pair "nodes" and "edges", but not both.');}
this.setOptions(data&&data.options);if(data&&data.dot){console.log('The dot property has been depricated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);');var dotData=dotparser.DOTToGraph(data.dot);this.setData(dotData);return;}else if(data&&data.gephi){console.log('The gephi property has been depricated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);');var gephiData=gephiParser.parseGephi(data.gephi);this.setData(gephiData);return;}else{this.nodesHandler.setData(data&&data.nodes,true);this.edgesHandler.setData(data&&data.edges,true);}
this.body.emitter.emit('_dataChanged');this.body.emitter.emit('initPhysics');};Network.prototype.destroy=function(){this.body.emitter.emit('destroy');this.body.emitter.off();this.off();delete this.groups;delete this.canvas;delete this.selectionHandler;delete this.interactionHandler;delete this.view;delete this.renderer;delete this.physics;delete this.layoutEngine;delete this.clustering;delete this.manipulation;delete this.nodesHandler;delete this.edgesHandler;delete this.configurator;delete this.images;for(var nodeId in this.body.nodes){delete this.body.nodes[nodeId];}
for(var edgeId in this.body.edges){delete this.body.edges[edgeId];}
util.recursiveDOMDelete(this.body.container);};Network.prototype._updateValueRange=function(obj){var id;var valueMin=undefined;var valueMax=undefined;var valueTotal=0;for(id in obj){if(obj.hasOwnProperty(id)){var value=obj[id].getValue();if(value!==undefined){valueMin=valueMin===undefined?value:Math.min(value,valueMin);valueMax=valueMax===undefined?value:Math.max(value,valueMax);valueTotal+=value;}}}
if(valueMin!==undefined&&valueMax!==undefined){for(id in obj){if(obj.hasOwnProperty(id)){obj[id].setValueRange(valueMin,valueMax,valueTotal);}}}};Network.prototype.isActive=function(){return!this.activator||this.activator.active;};Network.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments);};Network.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments);};Network.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas(this.canvas,arguments);};Network.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments);};Network.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments);};Network.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments);};Network.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments);};Network.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments);};Network.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments);};Network.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments);};Network.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments);};Network.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments);};Network.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments);};Network.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments);};Network.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments);};Network.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments);};Network.prototype.editNodeMode=function(){console.log('Depricated: Please use editNode instead of editNodeMode.');return this.manipulation.editNode.apply(this.manipulation,arguments);};Network.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments);};Network.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments);};Network.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments);};Network.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments);};Network.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments);};Network.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments);};Network.prototype.getConnectedNodes=function(objectId){if(this.body.nodes[objectId]!==undefined){return this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments);}else{return this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments);}};Network.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments);};Network.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments);};Network.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments);};Network.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments);};Network.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments);};Network.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments);};Network.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments);};Network.prototype.getNodeAt=function(){var node=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);if(node!==undefined&&node.id!==undefined){return node.id;}
return node;};Network.prototype.getEdgeAt=function(){var edge=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);if(edge!==undefined&&edge.id!==undefined){return edge.id;}
return edge;};Network.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments);};Network.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments);};Network.prototype.unselectAll=function(){return this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments);};Network.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments);};Network.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments);};Network.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments);};Network.prototype.fit=function(){return this.view.fit.apply(this.view,arguments);};Network.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments);};Network.prototype.focus=function(){return this.view.focus.apply(this.view,arguments);};Network.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments);};module.exports=Network;},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var util=__webpack_require__(1);var Groups=(function(){function Groups(){_classCallCheck(this,Groups);this.clear();this.defaultIndex=0;this.groupsArray=[];this.groupIndex=0;this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}];this.options={};this.defaultOptions={useDefaultGroups:true};util.extend(this.options,this.defaultOptions);}
_createClass(Groups,[{key:"setOptions",value:function setOptions(options){var optionFields=["useDefaultGroups"];if(options!==undefined){for(var groupName in options){if(options.hasOwnProperty(groupName)){if(optionFields.indexOf(groupName)===-1){var group=options[groupName];this.add(groupName,group);}}}}}},{key:"clear",value:function clear(){this.groups={};this.groupsArray=[];}},{key:"get",value:function get(groupname){var group=this.groups[groupname];if(group===undefined){if(this.options.useDefaultGroups===false&&this.groupsArray.length>0){var index=this.groupIndex%this.groupsArray.length;this.groupIndex++;group={};group.color=this.groups[this.groupsArray[index]];this.groups[groupname]=group;}else{var index=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++;group={};group.color=this.defaultGroups[index];this.groups[groupname]=group;}}
return group;}},{key:"add",value:function add(groupName,style){this.groups[groupName]=style;this.groupsArray.push(groupName);return style;}}]);return Groups;})();exports["default"]=Groups;module.exports=exports["default"];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _componentsNode=__webpack_require__(62);var _componentsNode2=_interopRequireDefault(_componentsNode);var _componentsSharedLabel=__webpack_require__(63);var _componentsSharedLabel2=_interopRequireDefault(_componentsSharedLabel);var util=__webpack_require__(1);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var NodesHandler=(function(){function NodesHandler(body,images,groups,layoutEngine){var _this=this;_classCallCheck(this,NodesHandler);this.body=body;this.images=images;this.groups=groups;this.layoutEngine=layoutEngine;this.body.functions.createNode=this.create.bind(this);this.nodesListeners={add:function add(event,params){_this.add(params.items);},update:function update(event,params){_this.update(params.items,params.data);},remove:function remove(event,params){_this.remove(params.items);}};this.options={};this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:undefined,color:{border:'#2B7CE9',background:'#97C2FC',highlight:{border:'#2B7CE9',background:'#D2E5FF'},hover:{border:'#2B7CE9',background:'#D2E5FF'}},fixed:{x:false,y:false},font:{color:'#343434',size:14,face:'arial',background:'none',strokeWidth:0,strokeColor:'#ffffff',align:'horizontal'},group:undefined,hidden:false,icon:{face:'FontAwesome',code:undefined,size:50,color:'#2B7CE9'},image:undefined,label:undefined,level:undefined,mass:1,physics:true,scaling:{min:10,max:30,label:{enabled:false,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function customScalingFunction(min,max,total,value){if(max===min){return 0.5;}else{var scale=1/(max-min);return Math.max(0,(value-min)*scale);}}},shadow:{enabled:false,size:10,x:5,y:5},shape:'ellipse',size:25,title:undefined,value:undefined,x:undefined,y:undefined};util.extend(this.options,this.defaultOptions);this.bindEventListeners();}
_createClass(NodesHandler,[{key:'bindEventListeners',value:function bindEventListeners(){var _this2=this;this.body.emitter.on('refreshNodes',this.refresh.bind(this));this.body.emitter.on('refresh',this.refresh.bind(this));this.body.emitter.on('destroy',function(){delete _this2.body.functions.createNode;delete _this2.nodesListeners.add;delete _this2.nodesListeners.update;delete _this2.nodesListeners.remove;delete _this2.nodesListeners;});}},{key:'setOptions',value:function setOptions(options){if(options!==undefined){_componentsNode2['default'].parseOptions(this.options,options);if(options.shape!==undefined){for(var nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){this.body.nodes[nodeId].updateShape();}}}
if(options.font!==undefined){_componentsSharedLabel2['default'].parseOptions(this.options.font,options);for(var nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){this.body.nodes[nodeId].updateLabelModule();this.body.nodes[nodeId]._reset();}}}
if(options.size!==undefined){for(var nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){this.body.nodes[nodeId]._reset();}}}
if(options.hidden!==undefined||options.physics!==undefined){this.body.emitter.emit('_dataChanged');}}}},{key:'setData',value:function setData(nodes){var _this3=this;var doNotEmit=arguments[1]===undefined?false:arguments[1];var oldNodesData=this.body.data.nodes;if(nodes instanceof DataSet||nodes instanceof DataView){this.body.data.nodes=nodes;}else if(Array.isArray(nodes)){this.body.data.nodes=new DataSet();this.body.data.nodes.add(nodes);}else if(!nodes){this.body.data.nodes=new DataSet();}else{throw new TypeError('Array or DataSet expected');}
if(oldNodesData){util.forEach(this.nodesListeners,function(callback,event){oldNodesData.off(event,callback);});}
this.body.nodes={};if(this.body.data.nodes){(function(){var me=_this3;util.forEach(_this3.nodesListeners,function(callback,event){me.body.data.nodes.on(event,callback);});var ids=_this3.body.data.nodes.getIds();_this3.add(ids,true);})();}
if(doNotEmit===false){this.body.emitter.emit('_dataChanged');}}},{key:'add',value:function add(ids){var doNotEmit=arguments[1]===undefined?false:arguments[1];var id=undefined;var newNodes=[];for(var i=0;i<ids.length;i++){id=ids[i];var properties=this.body.data.nodes.get(id);var node=this.create(properties);newNodes.push(node);this.body.nodes[id]=node;}
this.layoutEngine.positionInitially(newNodes);if(doNotEmit===false){this.body.emitter.emit('_dataChanged');}}},{key:'update',value:function update(ids,changedData){var nodes=this.body.nodes;var dataChanged=false;for(var i=0;i<ids.length;i++){var id=ids[i];var node=nodes[id];var data=changedData[i];if(node!==undefined){dataChanged=node.setOptions(data);}else{dataChanged=true;node=this.create(data);nodes[id]=node;}}
if(dataChanged===true){this.body.emitter.emit('_dataChanged');}else{this.body.emitter.emit('_dataUpdated');}}},{key:'remove',value:function remove(ids){var nodes=this.body.nodes;for(var i=0;i<ids.length;i++){var id=ids[i];delete nodes[id];}
this.body.emitter.emit('_dataChanged');}},{key:'create',value:function create(properties){var constructorClass=arguments[1]===undefined?_componentsNode2['default']:arguments[1];return new constructorClass(properties,this.body,this.images,this.groups,this.options);}},{key:'refresh',value:function refresh(){var nodes=this.body.nodes;for(var nodeId in nodes){var node=undefined;if(nodes.hasOwnProperty(nodeId)){node=nodes[nodeId];}
var data=this.body.data.nodes._data[nodeId];if(node!==undefined&&data!==undefined){node.setOptions({fixed:false});node.setOptions(data);}}}},{key:'getPositions',value:function getPositions(ids){var dataArray={};if(ids!==undefined){if(Array.isArray(ids)===true){for(var i=0;i<ids.length;i++){if(this.body.nodes[ids[i]]!==undefined){var node=this.body.nodes[ids[i]];dataArray[ids[i]]={x:Math.round(node.x),y:Math.round(node.y)};}}}else{if(this.body.nodes[ids]!==undefined){var node=this.body.nodes[ids];dataArray[ids]={x:Math.round(node.x),y:Math.round(node.y)};}}}else{for(var nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){var node=this.body.nodes[nodeId];dataArray[nodeId]={x:Math.round(node.x),y:Math.round(node.y)};}}}
return dataArray;}},{key:'storePositions',value:function storePositions(){var dataArray=[];var dataset=this.body.data.nodes.getDataSet();for(var nodeId in dataset._data){if(dataset._data.hasOwnProperty(nodeId)){var node=this.body.nodes[nodeId];if(dataset._data[nodeId].x!=Math.round(node.x)||dataset._data[nodeId].y!=Math.round(node.y)){dataArray.push({id:nodeId,x:Math.round(node.x),y:Math.round(node.y)});}}}
dataset.update(dataArray);}},{key:'getBoundingBox',value:function getBoundingBox(nodeId){if(this.body.nodes[nodeId]!==undefined){return this.body.nodes[nodeId].shape.boundingBox;}}},{key:'getConnectedNodes',value:function getConnectedNodes(nodeId){var nodeList=[];if(this.body.nodes[nodeId]!==undefined){var node=this.body.nodes[nodeId];var nodeObj={};for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];if(edge.toId==nodeId){if(nodeObj[edge.fromId]===undefined){nodeList.push(edge.fromId);nodeObj[edge.fromId]=true;}}else if(edge.fromId==nodeId){if(nodeObj[edge.toId]===undefined){nodeList.push(edge.toId);nodeObj[edge.toId]=true;}}}}
return nodeList;}},{key:'getConnectedEdges',value:function getConnectedEdges(nodeId){var edgeList=[];if(this.body.nodes[nodeId]!==undefined){var node=this.body.nodes[nodeId];for(var i=0;i<node.edges.length;i++){edgeList.push(node.edges[i].id);}}else{console.log('NodeId provided for getConnectedEdges does not exist. Provided: ',nodeId);}
return edgeList;}}]);return NodesHandler;})();exports['default']=NodesHandler;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _sharedLabel=__webpack_require__(63);var _sharedLabel2=_interopRequireDefault(_sharedLabel);var _nodesShapesBox=__webpack_require__(64);var _nodesShapesBox2=_interopRequireDefault(_nodesShapesBox);var _nodesShapesCircle=__webpack_require__(66);var _nodesShapesCircle2=_interopRequireDefault(_nodesShapesCircle);var _nodesShapesCircularImage=__webpack_require__(68);var _nodesShapesCircularImage2=_interopRequireDefault(_nodesShapesCircularImage);var _nodesShapesDatabase=__webpack_require__(69);var _nodesShapesDatabase2=_interopRequireDefault(_nodesShapesDatabase);var _nodesShapesDiamond=__webpack_require__(70);var _nodesShapesDiamond2=_interopRequireDefault(_nodesShapesDiamond);var _nodesShapesDot=__webpack_require__(72);var _nodesShapesDot2=_interopRequireDefault(_nodesShapesDot);var _nodesShapesEllipse=__webpack_require__(73);var _nodesShapesEllipse2=_interopRequireDefault(_nodesShapesEllipse);var _nodesShapesIcon=__webpack_require__(74);var _nodesShapesIcon2=_interopRequireDefault(_nodesShapesIcon);var _nodesShapesImage=__webpack_require__(75);var _nodesShapesImage2=_interopRequireDefault(_nodesShapesImage);var _nodesShapesSquare=__webpack_require__(76);var _nodesShapesSquare2=_interopRequireDefault(_nodesShapesSquare);var _nodesShapesStar=__webpack_require__(77);var _nodesShapesStar2=_interopRequireDefault(_nodesShapesStar);var _nodesShapesText=__webpack_require__(78);var _nodesShapesText2=_interopRequireDefault(_nodesShapesText);var _nodesShapesTriangle=__webpack_require__(79);var _nodesShapesTriangle2=_interopRequireDefault(_nodesShapesTriangle);var _nodesShapesTriangleDown=__webpack_require__(80);var _nodesShapesTriangleDown2=_interopRequireDefault(_nodesShapesTriangleDown);var _sharedValidator=__webpack_require__(47);var _sharedValidator2=_interopRequireDefault(_sharedValidator);var util=__webpack_require__(1);var Node=(function(){function Node(options,body,imagelist,grouplist,globalOptions){_classCallCheck(this,Node);this.options=util.bridgeObject(globalOptions);this.body=body;this.edges=[];this.id=undefined;this.imagelist=imagelist;this.grouplist=grouplist;this.x=undefined;this.y=undefined;this.baseSize=this.options.size;this.baseFontSize=this.options.font.size;this.predefinedPosition=false;this.selected=false;this.hover=false;this.labelModule=new _sharedLabel2['default'](this.body,this.options);this.setOptions(options);}
_createClass(Node,[{key:'attachEdge',value:function attachEdge(edge){if(this.edges.indexOf(edge)===-1){this.edges.push(edge);}}},{key:'detachEdge',value:function detachEdge(edge){var index=this.edges.indexOf(edge);if(index!=-1){this.edges.splice(index,1);}}},{key:'togglePhysics',value:function togglePhysics(status){this.options.physics=status;}},{key:'setOptions',value:function setOptions(options){if(!options){return;}
if(options.id!==undefined){this.id=options.id;}
if(this.id===undefined){throw'Node must have an id';}
if(options.x!==undefined){this.x=parseInt(options.x);this.predefinedPosition=true;}
if(options.y!==undefined){this.y=parseInt(options.y);this.predefinedPosition=true;}
if(options.size!==undefined){this.baseSize=options.size;}
if(options.value!==undefined){options.value=parseFloat(options.value);}
if(typeof options.group==='number'||typeof options.group==='string'&&options.group!=''){var groupObj=this.grouplist.get(options.group);util.deepExtend(this.options,groupObj);this.options.color=util.parseColor(this.options.color);}
Node.parseOptions(this.options,options,true);if(this.options.image!==undefined&&this.options.image!=''){if(this.imagelist){this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);}else{throw'No imagelist provided';}}
this.updateShape();this.updateLabelModule();this._reset();if(options.hidden!==undefined||options.physics!==undefined){return true;}
return false;}},{key:'updateLabelModule',value:function updateLabelModule(){if(this.options.label===undefined||this.options.label===null){this.options.label='';}
this.labelModule.setOptions(this.options,true);if(this.labelModule.baseSize!==undefined){this.baseFontSize=this.labelModule.baseSize;}}},{key:'updateShape',value:function updateShape(){switch(this.options.shape){case'box':this.shape=new _nodesShapesBox2['default'](this.options,this.body,this.labelModule);break;case'circle':this.shape=new _nodesShapesCircle2['default'](this.options,this.body,this.labelModule);break;case'circularImage':this.shape=new _nodesShapesCircularImage2['default'](this.options,this.body,this.labelModule,this.imageObj);break;case'database':this.shape=new _nodesShapesDatabase2['default'](this.options,this.body,this.labelModule);break;case'diamond':this.shape=new _nodesShapesDiamond2['default'](this.options,this.body,this.labelModule);break;case'dot':this.shape=new _nodesShapesDot2['default'](this.options,this.body,this.labelModule);break;case'ellipse':this.shape=new _nodesShapesEllipse2['default'](this.options,this.body,this.labelModule);break;case'icon':this.shape=new _nodesShapesIcon2['default'](this.options,this.body,this.labelModule);break;case'image':this.shape=new _nodesShapesImage2['default'](this.options,this.body,this.labelModule,this.imageObj);break;case'square':this.shape=new _nodesShapesSquare2['default'](this.options,this.body,this.labelModule);break;case'star':this.shape=new _nodesShapesStar2['default'](this.options,this.body,this.labelModule);break;case'text':this.shape=new _nodesShapesText2['default'](this.options,this.body,this.labelModule);break;case'triangle':this.shape=new _nodesShapesTriangle2['default'](this.options,this.body,this.labelModule);break;case'triangleDown':this.shape=new _nodesShapesTriangleDown2['default'](this.options,this.body,this.labelModule);break;default:this.shape=new _nodesShapesEllipse2['default'](this.options,this.body,this.labelModule);break;}
this._reset();}},{key:'select',value:function select(){this.selected=true;this._reset();}},{key:'unselect',value:function unselect(){this.selected=false;this._reset();}},{key:'_reset',value:function _reset(){this.shape.width=undefined;this.shape.height=undefined;}},{key:'getTitle',value:function getTitle(){return this.options.title;}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){return this.shape.distanceToBorder(ctx,angle);}},{key:'isFixed',value:function isFixed(){return this.options.fixed.x&&this.options.fixed.y;}},{key:'isSelected',value:function isSelected(){return this.selected;}},{key:'getValue',value:function getValue(){return this.options.value;}},{key:'setValueRange',value:function setValueRange(min,max,total){if(this.options.value!==undefined){var scale=this.options.scaling.customScalingFunction(min,max,total,this.options.value);var sizeDiff=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===true){var fontDiff=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+scale*fontDiff;}
this.options.size=this.options.scaling.min+scale*sizeDiff;}else{this.options.size=this.baseSize;this.options.font.size=this.baseFontSize;}}},{key:'draw',value:function draw(ctx){this.shape.draw(ctx,this.x,this.y,this.selected,this.hover);}},{key:'updateBoundingBox',value:function updateBoundingBox(){this.shape.updateBoundingBox(this.x,this.y);}},{key:'resize',value:function resize(ctx){this.shape.resize(ctx);}},{key:'isOverlappingWith',value:function isOverlappingWith(obj){return this.shape.left<obj.right&&this.shape.left+this.shape.width>obj.left&&this.shape.top<obj.bottom&&this.shape.top+this.shape.height>obj.top;}},{key:'isBoundingBoxOverlappingWith',value:function isBoundingBoxOverlappingWith(obj){return this.shape.boundingBox.left<obj.right&&this.shape.boundingBox.right>obj.left&&this.shape.boundingBox.top<obj.bottom&&this.shape.boundingBox.bottom>obj.top;}}],[{key:'parseOptions',value:function parseOptions(parentOptions,newOptions){var allowDeletion=arguments[2]===undefined?false:arguments[2];var fields=['color','font','fixed','shadow'];util.selectiveNotDeepExtend(fields,parentOptions,newOptions,allowDeletion);util.mergeOptions(parentOptions,newOptions,'shadow');if(newOptions.color!==undefined&&newOptions.color!==null){var parsedColor=util.parseColor(newOptions.color);util.fillIfDefined(parentOptions.color,parsedColor);}else if(allowDeletion===true&&newOptions.color===null){parentOptions.color=undefined;delete parentOptions.color;}
if(newOptions.fixed!==undefined&&newOptions.fixed!==null){if(typeof newOptions.fixed==='boolean'){parentOptions.fixed.x=newOptions.fixed;parentOptions.fixed.y=newOptions.fixed;}else{if(newOptions.fixed.x!==undefined&&typeof newOptions.fixed.x==='boolean'){parentOptions.fixed.x=newOptions.fixed.x;}
if(newOptions.fixed.y!==undefined&&typeof newOptions.fixed.y==='boolean'){parentOptions.fixed.y=newOptions.fixed.y;}}}
if(newOptions.font!==undefined){_sharedLabel2['default'].parseOptions(parentOptions.font,newOptions);}
if(newOptions.scaling!==undefined){util.mergeOptions(parentOptions.scaling,newOptions.scaling,'label');}}}]);return Node;})();exports['default']=Node;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _slicedToArray(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i['return'])_i['return']();}finally{if(_d)throw _e;}}return _arr;}else{throw new TypeError('Invalid attempt to destructure non-iterable instance');}}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var util=__webpack_require__(1);var Label=(function(){function Label(body,options){_classCallCheck(this,Label);this.body=body;this.pointToSelf=false;this.baseSize=undefined;this.setOptions(options);this.size={top:0,left:0,width:0,height:0,yLine:0};}
_createClass(Label,[{key:'setOptions',value:function setOptions(options){var allowDeletion=arguments[1]===undefined?false:arguments[1];this.options=options;if(options.label!==undefined){this.labelDirty=true;}
if(options.font!==undefined){Label.parseOptions(this.options.font,options,allowDeletion);if(typeof options.font==='string'){this.baseSize=this.options.font.size;}else if(typeof options.font==='object'){if(options.font.size!==undefined){this.baseSize=options.font.size;}}}}},{key:'draw',value:function draw(ctx,x,y,selected){var baseline=arguments[4]===undefined?'middle':arguments[4];if(this.options.label===undefined)return;var viewFontSize=this.options.font.size*this.body.view.scale;if(this.options.label&&viewFontSize<this.options.scaling.label.drawThreshold-1)return;this.calculateLabelSize(ctx,selected,x,y,baseline);this._drawBackground(ctx);this._drawText(ctx,selected,x,y,baseline);}},{key:'_drawBackground',value:function _drawBackground(ctx){if(this.options.font.background!==undefined&&this.options.font.background!=='none'){ctx.fillStyle=this.options.font.background;var lineMargin=2;switch(this.options.font.align){case'middle':ctx.fillRect(-this.size.width*0.5,-this.size.height*0.5,this.size.width,this.size.height);break;case'top':ctx.fillRect(-this.size.width*0.5,-(this.size.height+lineMargin),this.size.width,this.size.height);break;case'bottom':ctx.fillRect(-this.size.width*0.5,lineMargin,this.size.width,this.size.height);break;default:ctx.fillRect(this.size.left,this.size.top-0.5*lineMargin,this.size.width,this.size.height);break;}}}},{key:'_drawText',value:function _drawText(ctx,selected,x,y){var baseline=arguments[4]===undefined?'middle':arguments[4];var fontSize=this.options.font.size;var viewFontSize=fontSize*this.body.view.scale;if(viewFontSize>=this.options.scaling.label.maxVisible){fontSize=Number(this.options.scaling.label.maxVisible)/this.body.view.scale;}
var yLine=this.size.yLine;var _getColor2=this._getColor(viewFontSize);var _getColor22=_slicedToArray(_getColor2,2);var fontColor=_getColor22[0];var strokeColor=_getColor22[1];var _setAlignment2=this._setAlignment(ctx,x,yLine,baseline);var _setAlignment22=_slicedToArray(_setAlignment2,2);x=_setAlignment22[0];yLine=_setAlignment22[1];ctx.font=(selected?'bold ':'')+fontSize+'px '+this.options.font.face;ctx.fillStyle=fontColor;ctx.textAlign='center';if(this.options.font.strokeWidth>0){ctx.lineWidth=this.options.font.strokeWidth;ctx.strokeStyle=strokeColor;ctx.lineJoin='round';}
for(var i=0;i<this.lineCount;i++){if(this.options.font.strokeWidth>0){ctx.strokeText(this.lines[i],x,yLine);}
ctx.fillText(this.lines[i],x,yLine);yLine+=fontSize;}}},{key:'_setAlignment',value:function _setAlignment(ctx,x,yLine,baseline){if(this.options.font.align!=='horizontal'&&this.pointToSelf===false){x=0;yLine=0;var lineMargin=2;if(this.options.font.align==='top'){ctx.textBaseline='alphabetic';yLine-=2*lineMargin;}else if(this.options.font.align==='bottom'){ctx.textBaseline='hanging';yLine+=2*lineMargin;}else{ctx.textBaseline='middle';}}else{ctx.textBaseline=baseline;}
return[x,yLine];}},{key:'_getColor',value:function _getColor(viewFontSize){var fontColor=this.options.font.color||'#000000';var strokeColor=this.options.font.strokeColor||'#ffffff';if(viewFontSize<=this.options.scaling.label.drawThreshold){var opacity=Math.max(0,Math.min(1,1-(this.options.scaling.label.drawThreshold-viewFontSize)));fontColor=util.overrideOpacity(fontColor,opacity);strokeColor=util.overrideOpacity(strokeColor,opacity);}
return[fontColor,strokeColor];}},{key:'getTextSize',value:function getTextSize(ctx){var selected=arguments[1]===undefined?false:arguments[1];var size={width:this._processLabel(ctx,selected),height:this.options.font.size*this.lineCount,lineCount:this.lineCount};return size;}},{key:'calculateLabelSize',value:function calculateLabelSize(ctx,selected){var x=arguments[2]===undefined?0:arguments[2];var y=arguments[3]===undefined?0:arguments[3];var baseline=arguments[4]===undefined?'middle':arguments[4];if(this.labelDirty===true){this.size.width=this._processLabel(ctx,selected);}
this.size.height=this.options.font.size*this.lineCount;this.size.left=x-this.size.width*0.5;this.size.top=y-this.size.height*0.5;this.size.yLine=y+(1-this.lineCount)*0.5*this.options.font.size;if(baseline==='hanging'){this.size.top+=0.5*this.options.font.size;this.size.top+=4;this.size.yLine+=4;}
this.labelDirty=false;}},{key:'_processLabel',value:function _processLabel(ctx,selected){var width=0;var lines=[''];var lineCount=0;if(this.options.label!==undefined){lines=String(this.options.label).split('\n');lineCount=lines.length;ctx.font=(selected?'bold ':'')+this.options.font.size+'px '+this.options.font.face;width=ctx.measureText(lines[0]).width;for(var i=1;i<lineCount;i++){var lineWidth=ctx.measureText(lines[i]).width;width=lineWidth>width?lineWidth:width;}}
this.lines=lines;this.lineCount=lineCount;return width;}}],[{key:'parseOptions',value:function parseOptions(parentOptions,newOptions){var allowDeletion=arguments[2]===undefined?false:arguments[2];if(typeof newOptions.font==='string'){var newOptionsArray=newOptions.font.split(' ');parentOptions.size=newOptionsArray[0].replace('px','');parentOptions.face=newOptionsArray[1];parentOptions.color=newOptionsArray[2];}else if(typeof newOptions.font==='object'){util.fillIfDefined(parentOptions,newOptions.font,allowDeletion);}
parentOptions.size=Number(parentOptions.size);}}]);return Label;})();exports['default']=Label;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilNodeBase=__webpack_require__(65);var _utilNodeBase2=_interopRequireDefault(_utilNodeBase);var Box=(function(_NodeBase){function Box(options,body,labelModule){_classCallCheck(this,Box);_get(Object.getPrototypeOf(Box.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Box,_NodeBase);_createClass(Box,[{key:'resize',value:function resize(ctx,selected){if(this.width===undefined){var margin=5;var textSize=this.labelModule.getTextSize(ctx,selected);this.width=textSize.width+2*margin;this.height=textSize.height+2*margin;this.radius=0.5*this.width;}}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this.resize(ctx,selected);this.left=x-this.width/2;this.top=y-this.height/2;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border;ctx.lineWidth=selected?selectionLineWidth:borderWidth;ctx.lineWidth/=this.body.view.scale;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background;var borderRadius=6;ctx.roundRect(this.left,this.top,this.width,this.height,borderRadius);this.enableShadow(ctx);ctx.fill();this.disableShadow(ctx);ctx.stroke();this.updateBoundingBox(x,y);this.labelModule.draw(ctx,x,y,selected);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.left=x-this.width*0.5;this.top=y-this.height*0.5;this.boundingBox.left=this.left;this.boundingBox.top=this.top;this.boundingBox.bottom=this.top+this.height;this.boundingBox.right=this.left+this.width;}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);var a=this.width/2;var b=this.height/2;var w=Math.sin(angle)*a;var h=Math.cos(angle)*b;return a*b/Math.sqrt(w*w+h*h);}}]);return Box;})(_utilNodeBase2['default']);exports['default']=Box;module.exports=exports['default'];},function(module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var NodeBase=(function(){function NodeBase(options,body,labelModule){_classCallCheck(this,NodeBase);this.body=body;this.labelModule=labelModule;this.setOptions(options);this.top=undefined;this.left=undefined;this.height=undefined;this.width=undefined;this.radius=undefined;this.boundingBox={top:0,left:0,right:0,bottom:0};}
_createClass(NodeBase,[{key:'setOptions',value:function setOptions(options){this.options=options;}},{key:'_distanceToBorder',value:function _distanceToBorder(angle){var borderWidth=1;return Math.min(Math.abs(this.width/2/Math.cos(angle)),Math.abs(this.height/2/Math.sin(angle)))+borderWidth;}},{key:'enableShadow',value:function enableShadow(ctx){if(this.options.shadow.enabled===true){ctx.shadowColor='rgba(0,0,0,0.5)';ctx.shadowBlur=this.options.shadow.size;ctx.shadowOffsetX=this.options.shadow.x;ctx.shadowOffsetY=this.options.shadow.y;}}},{key:'disableShadow',value:function disableShadow(ctx){if(this.options.shadow.enabled===true){ctx.shadowColor='rgba(0,0,0,0)';ctx.shadowBlur=0;ctx.shadowOffsetX=0;ctx.shadowOffsetY=0;}}}]);return NodeBase;})();exports['default']=NodeBase;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilCircleImageBase=__webpack_require__(67);var _utilCircleImageBase2=_interopRequireDefault(_utilCircleImageBase);var Circle=(function(_CircleImageBase){function Circle(options,body,labelModule){_classCallCheck(this,Circle);_get(Object.getPrototypeOf(Circle.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Circle,_CircleImageBase);_createClass(Circle,[{key:'resize',value:function resize(ctx,selected){if(this.width===undefined){var margin=5;var textSize=this.labelModule.getTextSize(ctx,selected);var diameter=Math.max(textSize.width,textSize.height)+2*margin;this.options.size=diameter/2;this.width=diameter;this.height=diameter;this.radius=0.5*this.width;}}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this.resize(ctx,selected);this.left=x-this.width/2;this.top=y-this.height/2;this._drawRawCircle(ctx,x,y,selected,hover,this.options.size);this.boundingBox.top=y-this.options.size;this.boundingBox.left=x-this.options.size;this.boundingBox.right=x+this.options.size;this.boundingBox.bottom=y+this.options.size;this.updateBoundingBox(x,y);this.labelModule.draw(ctx,x,y,selected);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.boundingBox.top=y-this.options.size;this.boundingBox.left=x-this.options.size;this.boundingBox.right=x+this.options.size;this.boundingBox.bottom=y+this.options.size;}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);var a=this.width/2;var b=this.height/2;var w=Math.sin(angle)*a;var h=Math.cos(angle)*b;return a*b/Math.sqrt(w*w+h*h);}}]);return Circle;})(_utilCircleImageBase2['default']);exports['default']=Circle;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilNodeBase=__webpack_require__(65);var _utilNodeBase2=_interopRequireDefault(_utilNodeBase);var CircleImageBase=(function(_NodeBase){function CircleImageBase(options,body,labelModule){_classCallCheck(this,CircleImageBase);_get(Object.getPrototypeOf(CircleImageBase.prototype),'constructor',this).call(this,options,body,labelModule);this.labelOffset=0;this.imageLoaded=false;}
_inherits(CircleImageBase,_NodeBase);_createClass(CircleImageBase,[{key:'_resizeImage',value:function _resizeImage(){var force=false;if(!this.imageObj.width||!this.imageObj.height){this.imageLoaded=false;}else if(this.imageLoaded===false){this.imageLoaded=true;force=true;}
if(!this.width||!this.height||force===true){var width,height,ratio;if(this.imageObj.width&&this.imageObj.height){width=0;height=0;}
if(this.imageObj.width>this.imageObj.height){ratio=this.imageObj.width/this.imageObj.height;width=this.options.size*2*ratio||this.imageObj.width;height=this.options.size*2||this.imageObj.height;}else{if(this.imageObj.width&&this.imageObj.height){ratio=this.imageObj.height/this.imageObj.width;}else{ratio=1;}
width=this.options.size*2||this.imageObj.width;height=this.options.size*2*ratio||this.imageObj.height;}
this.width=width;this.height=height;this.radius=0.5*this.width;}}},{key:'_drawRawCircle',value:function _drawRawCircle(ctx,x,y,selected,hover,size){var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border;ctx.lineWidth=selected?selectionLineWidth:borderWidth;ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background;ctx.circle(x,y,size);this.enableShadow(ctx);ctx.fill();this.disableShadow(ctx);ctx.stroke();}},{key:'_drawImageAtPosition',value:function _drawImageAtPosition(ctx){if(this.imageObj.width!=0){ctx.globalAlpha=1;this.enableShadow(ctx);ctx.drawImage(this.imageObj,this.left,this.top,this.width,this.height);this.disableShadow(ctx);}}},{key:'_drawImageLabel',value:function _drawImageLabel(ctx,x,y,selected){var yLabel;var offset=0;if(this.height!==undefined){offset=this.height*0.5;var labelDimensions=this.labelModule.getTextSize(ctx);if(labelDimensions.lineCount>=1){offset+=labelDimensions.height/2;}}
yLabel=y+offset;if(this.options.label){this.labelOffset=offset;}
this.labelModule.draw(ctx,x,yLabel,selected,'hanging');}}]);return CircleImageBase;})(_utilNodeBase2['default']);exports['default']=CircleImageBase;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilCircleImageBase=__webpack_require__(67);var _utilCircleImageBase2=_interopRequireDefault(_utilCircleImageBase);var CircularImage=(function(_CircleImageBase){function CircularImage(options,body,labelModule,imageObj){_classCallCheck(this,CircularImage);_get(Object.getPrototypeOf(CircularImage.prototype),'constructor',this).call(this,options,body,labelModule);this.imageObj=imageObj;this._swapToImageResizeWhenImageLoaded=true;}
_inherits(CircularImage,_CircleImageBase);_createClass(CircularImage,[{key:'resize',value:function resize(){if(this.imageObj.src===undefined||this.imageObj.width===undefined||this.imageObj.height===undefined){if(!this.width){var diameter=this.options.size*2;this.width=diameter;this.height=diameter;this._swapToImageResizeWhenImageLoaded=true;this.radius=0.5*this.width;}}else{if(this._swapToImageResizeWhenImageLoaded){this.width=undefined;this.height=undefined;this._swapToImageResizeWhenImageLoaded=false;}
this._resizeImage();}}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this.resize();this.left=x-this.width/2;this.top=y-this.height/2;var size=Math.min(0.5*this.height,0.5*this.width);this._drawRawCircle(ctx,x,y,selected,hover,size);ctx.save();ctx.circle(x,y,size);ctx.stroke();ctx.clip();this._drawImageAtPosition(ctx);ctx.restore();this._drawImageLabel(ctx,x,y,selected);this.updateBoundingBox(x,y);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.boundingBox.top=y-this.options.size;this.boundingBox.left=x-this.options.size;this.boundingBox.right=x+this.options.size;this.boundingBox.bottom=y+this.options.size;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset);}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);return this._distanceToBorder(angle);}}]);return CircularImage;})(_utilCircleImageBase2['default']);exports['default']=CircularImage;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilNodeBase=__webpack_require__(65);var _utilNodeBase2=_interopRequireDefault(_utilNodeBase);var Database=(function(_NodeBase){function Database(options,body,labelModule){_classCallCheck(this,Database);_get(Object.getPrototypeOf(Database.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Database,_NodeBase);_createClass(Database,[{key:'resize',value:function resize(ctx,selected){if(this.width===undefined){var margin=5;var textSize=this.labelModule.getTextSize(ctx,selected);var size=textSize.width+2*margin;this.width=size;this.height=size;this.radius=0.5*this.width;}}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this.resize(ctx,selected);this.left=x-this.width/2;this.top=y-this.height/2;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border;ctx.lineWidth=this.selected?selectionLineWidth:borderWidth;ctx.lineWidth*=this.networkScaleInv;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background;ctx.database(x-this.width/2,y-this.height*0.5,this.width,this.height);this.enableShadow(ctx);ctx.fill();this.disableShadow(ctx);ctx.stroke();this.updateBoundingBox(x,y);this.labelModule.draw(ctx,x,y,selected);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.left=x-this.width*0.5;this.top=y-this.height*0.5;this.boundingBox.left=this.left;this.boundingBox.top=this.top;this.boundingBox.bottom=this.top+this.height;this.boundingBox.right=this.left+this.width;}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);var a=this.width/2;var b=this.height/2;var w=Math.sin(angle)*a;var h=Math.cos(angle)*b;return a*b/Math.sqrt(w*w+h*h);}}]);return Database;})(_utilNodeBase2['default']);exports['default']=Database;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilShapeBase=__webpack_require__(71);var _utilShapeBase2=_interopRequireDefault(_utilShapeBase);var Diamond=(function(_ShapeBase){function Diamond(options,body,labelModule){_classCallCheck(this,Diamond);_get(Object.getPrototypeOf(Diamond.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Diamond,_ShapeBase);_createClass(Diamond,[{key:'resize',value:function resize(ctx){this._resizeShape();}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this._drawShape(ctx,'diamond',4,x,y,selected,hover);}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){return this._distanceToBorder(angle);}}]);return Diamond;})(_utilShapeBase2['default']);exports['default']=Diamond;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilNodeBase=__webpack_require__(65);var _utilNodeBase2=_interopRequireDefault(_utilNodeBase);var ShapeBase=(function(_NodeBase){function ShapeBase(options,body,labelModule){_classCallCheck(this,ShapeBase);_get(Object.getPrototypeOf(ShapeBase.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(ShapeBase,_NodeBase);_createClass(ShapeBase,[{key:'_resizeShape',value:function _resizeShape(){if(this.width===undefined){var size=2*this.options.size;this.width=size;this.height=size;this.radius=0.5*this.width;}}},{key:'_drawShape',value:function _drawShape(ctx,shape,sizeMultiplier,x,y,selected,hover){this._resizeShape();this.left=x-this.width/2;this.top=y-this.height/2;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border;ctx.lineWidth=selected?selectionLineWidth:borderWidth;ctx.lineWidth/=this.body.view.scale;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background;ctx[shape](x,y,this.options.size);this.enableShadow(ctx);ctx.fill();this.disableShadow(ctx);ctx.stroke();if(this.options.label!==undefined){var yLabel=y+0.5*this.height+3;this.labelModule.draw(ctx,x,yLabel,selected,'hanging');}
this.updateBoundingBox(x,y);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.boundingBox.top=y-this.options.size;this.boundingBox.left=x-this.options.size;this.boundingBox.right=x+this.options.size;this.boundingBox.bottom=y+this.options.size;if(this.options.label!==undefined){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+3);}}}]);return ShapeBase;})(_utilNodeBase2['default']);exports['default']=ShapeBase;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilShapeBase=__webpack_require__(71);var _utilShapeBase2=_interopRequireDefault(_utilShapeBase);var Dot=(function(_ShapeBase){function Dot(options,body,labelModule){_classCallCheck(this,Dot);_get(Object.getPrototypeOf(Dot.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Dot,_ShapeBase);_createClass(Dot,[{key:'resize',value:function resize(ctx){this._resizeShape();}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this._drawShape(ctx,'circle',2,x,y,selected,hover);}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){return this.options.size+this.options.borderWidth;}}]);return Dot;})(_utilShapeBase2['default']);exports['default']=Dot;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilNodeBase=__webpack_require__(65);var _utilNodeBase2=_interopRequireDefault(_utilNodeBase);var Ellipse=(function(_NodeBase){function Ellipse(options,body,labelModule){_classCallCheck(this,Ellipse);_get(Object.getPrototypeOf(Ellipse.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Ellipse,_NodeBase);_createClass(Ellipse,[{key:'resize',value:function resize(ctx,selected){if(this.width===undefined){var textSize=this.labelModule.getTextSize(ctx,selected);this.width=textSize.width*1.5;this.height=textSize.height*2;if(this.width<this.height){this.width=this.height;}
this.radius=0.5*this.width;}}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this.resize(ctx,selected);this.left=x-this.width*0.5;this.top=y-this.height*0.5;var borderWidth=this.options.borderWidth;var selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border;ctx.lineWidth=selected?selectionLineWidth:borderWidth;ctx.lineWidth/=this.body.view.scale;ctx.lineWidth=Math.min(this.width,ctx.lineWidth);ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background;ctx.ellipse(this.left,this.top,this.width,this.height);this.enableShadow(ctx);ctx.fill();this.disableShadow(ctx);ctx.stroke();this.updateBoundingBox(x,y);this.labelModule.draw(ctx,x,y,selected);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.left=x-this.width*0.5;this.top=y-this.height*0.5;this.boundingBox.left=this.left;this.boundingBox.top=this.top;this.boundingBox.bottom=this.top+this.height;this.boundingBox.right=this.left+this.width;}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);var a=this.width*0.5;var b=this.height*0.5;var w=Math.sin(angle)*a;var h=Math.cos(angle)*b;return a*b/Math.sqrt(w*w+h*h);}}]);return Ellipse;})(_utilNodeBase2['default']);exports['default']=Ellipse;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilNodeBase=__webpack_require__(65);var _utilNodeBase2=_interopRequireDefault(_utilNodeBase);var Icon=(function(_NodeBase){function Icon(options,body,labelModule){_classCallCheck(this,Icon);_get(Object.getPrototypeOf(Icon.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Icon,_NodeBase);_createClass(Icon,[{key:'resize',value:function resize(ctx){if(this.width===undefined){var margin=5;var iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)};this.width=iconSize.width+2*margin;this.height=iconSize.height+2*margin;this.radius=0.5*this.width;}}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this.resize(ctx);this.options.icon.size=this.options.icon.size||50;this.left=x-this.width*0.5;this.top=y-this.height*0.5;this._icon(ctx,x,y,selected);if(this.options.label!==undefined){var iconTextSpacing=5;this.labelModule.draw(ctx,x,y+this.height*0.5+iconTextSpacing,selected);}
this.updateBoundingBox(x,y);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.boundingBox.top=y-this.options.icon.size*0.5;this.boundingBox.left=x-this.options.icon.size*0.5;this.boundingBox.right=x+this.options.icon.size*0.5;this.boundingBox.bottom=y+this.options.icon.size*0.5;if(this.options.label!==undefined){var iconTextSpacing=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+iconTextSpacing);}}},{key:'_icon',value:function _icon(ctx,x,y,selected){var iconSize=Number(this.options.icon.size);if(this.options.icon.code!==undefined){ctx.font=(selected?'bold ':'')+iconSize+'px '+this.options.icon.face;ctx.fillStyle=this.options.icon.color||'black';ctx.textAlign='center';ctx.textBaseline='middle';this.enableShadow(ctx);ctx.fillText(this.options.icon.code,x,y);this.disableShadow(ctx);}else{console.error('When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.');}}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);this._distanceToBorder(angle);}}]);return Icon;})(_utilNodeBase2['default']);exports['default']=Icon;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilCircleImageBase=__webpack_require__(67);var _utilCircleImageBase2=_interopRequireDefault(_utilCircleImageBase);var Image=(function(_CircleImageBase){function Image(options,body,labelModule,imageObj){_classCallCheck(this,Image);_get(Object.getPrototypeOf(Image.prototype),'constructor',this).call(this,options,body,labelModule);this.imageObj=imageObj;}
_inherits(Image,_CircleImageBase);_createClass(Image,[{key:'resize',value:function resize(){this._resizeImage();}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this.resize();this.left=x-this.width/2;this.top=y-this.height/2;this._drawImageAtPosition(ctx);this._drawImageLabel(ctx,x,y,selected||hover);this.updateBoundingBox(x,y);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.left=x-this.width/2;this.top=y-this.height/2;this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height;if(this.options.label!==undefined){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset);}}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);var a=this.width/2;var b=this.height/2;var w=Math.sin(angle)*a;var h=Math.cos(angle)*b;return a*b/Math.sqrt(w*w+h*h);}}]);return Image;})(_utilCircleImageBase2['default']);exports['default']=Image;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilShapeBase=__webpack_require__(71);var _utilShapeBase2=_interopRequireDefault(_utilShapeBase);var Square=(function(_ShapeBase){function Square(options,body,labelModule){_classCallCheck(this,Square);_get(Object.getPrototypeOf(Square.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Square,_ShapeBase);_createClass(Square,[{key:'resize',value:function resize(){this._resizeShape();}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this._drawShape(ctx,'square',2,x,y,selected,hover);}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);return this._distanceToBorder(angle);}}]);return Square;})(_utilShapeBase2['default']);exports['default']=Square;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilShapeBase=__webpack_require__(71);var _utilShapeBase2=_interopRequireDefault(_utilShapeBase);var Star=(function(_ShapeBase){function Star(options,body,labelModule){_classCallCheck(this,Star);_get(Object.getPrototypeOf(Star.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Star,_ShapeBase);_createClass(Star,[{key:'resize',value:function resize(ctx){this._resizeShape();}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this._drawShape(ctx,'star',4,x,y,selected,hover);}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){return this._distanceToBorder(angle);}}]);return Star;})(_utilShapeBase2['default']);exports['default']=Star;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilNodeBase=__webpack_require__(65);var _utilNodeBase2=_interopRequireDefault(_utilNodeBase);var Text=(function(_NodeBase){function Text(options,body,labelModule){_classCallCheck(this,Text);_get(Object.getPrototypeOf(Text.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Text,_NodeBase);_createClass(Text,[{key:'resize',value:function resize(ctx,selected){if(this.width===undefined){var margin=5;var textSize=this.labelModule.getTextSize(ctx,selected);this.width=textSize.width+2*margin;this.height=textSize.height+2*margin;this.radius=0.5*this.width;}}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this.resize(ctx,selected||hover);this.left=x-this.width/2;this.top=y-this.height/2;this.enableShadow(ctx);this.labelModule.draw(ctx,x,y,selected||hover);this.disableShadow(ctx);this.updateBoundingBox(x,y);}},{key:'updateBoundingBox',value:function updateBoundingBox(x,y){this.left=x-this.width/2;this.top=y-this.height/2;this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height;}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){this.resize(ctx);return this._distanceToBorder(angle);}}]);return Text;})(_utilNodeBase2['default']);exports['default']=Text;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilShapeBase=__webpack_require__(71);var _utilShapeBase2=_interopRequireDefault(_utilShapeBase);var Triangle=(function(_ShapeBase){function Triangle(options,body,labelModule){_classCallCheck(this,Triangle);_get(Object.getPrototypeOf(Triangle.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(Triangle,_ShapeBase);_createClass(Triangle,[{key:'resize',value:function resize(ctx){this._resizeShape();}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this._drawShape(ctx,'triangle',3,x,y,selected,hover);}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){return this._distanceToBorder(angle);}}]);return Triangle;})(_utilShapeBase2['default']);exports['default']=Triangle;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilShapeBase=__webpack_require__(71);var _utilShapeBase2=_interopRequireDefault(_utilShapeBase);var TriangleDown=(function(_ShapeBase){function TriangleDown(options,body,labelModule){_classCallCheck(this,TriangleDown);_get(Object.getPrototypeOf(TriangleDown.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(TriangleDown,_ShapeBase);_createClass(TriangleDown,[{key:'resize',value:function resize(ctx){this._resizeShape();}},{key:'draw',value:function draw(ctx,x,y,selected,hover){this._drawShape(ctx,'triangleDown',3,x,y,selected,hover);}},{key:'distanceToBorder',value:function distanceToBorder(ctx,angle){return this._distanceToBorder(angle);}}]);return TriangleDown;})(_utilShapeBase2['default']);exports['default']=TriangleDown;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _componentsEdge=__webpack_require__(82);var _componentsEdge2=_interopRequireDefault(_componentsEdge);var _componentsSharedLabel=__webpack_require__(63);var _componentsSharedLabel2=_interopRequireDefault(_componentsSharedLabel);var util=__webpack_require__(1);var DataSet=__webpack_require__(8);var DataView=__webpack_require__(10);var EdgesHandler=(function(){function EdgesHandler(body,images,groups){var _this=this;_classCallCheck(this,EdgesHandler);this.body=body;this.images=images;this.groups=groups;this.body.functions.createEdge=this.create.bind(this);this.edgesListeners={add:function add(event,params){_this.add(params.items);},update:function update(event,params){_this.update(params.items);},remove:function remove(event,params){_this.remove(params.items);}};this.options={};this.defaultOptions={arrows:{to:{enabled:false,scaleFactor:1},middle:{enabled:false,scaleFactor:1},from:{enabled:false,scaleFactor:1}},color:{color:'#848484',highlight:'#848484',hover:'#848484',inherit:'from',opacity:1},dashes:false,font:{color:'#343434',size:14,face:'arial',background:'none',strokeWidth:2,strokeColor:'#ffffff',align:'horizontal'},hidden:false,hoverWidth:1.5,label:undefined,length:undefined,physics:true,scaling:{min:1,max:15,label:{enabled:true,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function customScalingFunction(min,max,total,value){if(max===min){return 0.5;}else{var scale=1/(max-min);return Math.max(0,(value-min)*scale);}}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:false,size:10,x:5,y:5},smooth:{enabled:true,type:'dynamic',roundness:0.5},title:undefined,width:1,value:undefined};util.extend(this.options,this.defaultOptions);this.bindEventListeners();}
_createClass(EdgesHandler,[{key:'bindEventListeners',value:function bindEventListeners(){var _this2=this;this.body.emitter.on('_forceDisableDynamicCurves',function(type){if(type==='dynamic'){type='continuous';}
var emitChange=false;for(var edgeId in _this2.body.edges){if(_this2.body.edges.hasOwnProperty(edgeId)){var edge=_this2.body.edges[edgeId];var edgeData=_this2.body.data.edges._data[edgeId];if(edgeData!==undefined){var edgeOptions=edgeData.smooth;if(edgeOptions!==undefined){if(edgeOptions.enabled===true&&edgeOptions.type==='dynamic'){if(type===undefined){edge.setOptions({smooth:false});}else{edge.setOptions({smooth:{type:type}});}
emitChange=true;}}}}}
if(emitChange===true){_this2.body.emitter.emit('_dataChanged');}});this.body.emitter.on('_dataUpdated',function(){_this2.reconnectEdges();_this2.markAllEdgesAsDirty();});this.body.emitter.on('refreshEdges',this.refresh.bind(this));this.body.emitter.on('refresh',this.refresh.bind(this));this.body.emitter.on('destroy',function(){delete _this2.body.functions.createEdge;delete _this2.edgesListeners.add;delete _this2.edgesListeners.update;delete _this2.edgesListeners.remove;delete _this2.edgesListeners;});}},{key:'setOptions',value:function setOptions(options){if(options!==undefined){_componentsEdge2['default'].parseOptions(this.options,options);if(options.color!==undefined){this.markAllEdgesAsDirty();}
var dataChanged=false;if(options.smooth!==undefined){for(var edgeId in this.body.edges){if(this.body.edges.hasOwnProperty(edgeId)){dataChanged=this.body.edges[edgeId].updateEdgeType()||dataChanged;}}}
if(options.font!==undefined){_componentsSharedLabel2['default'].parseOptions(this.options.font,options);for(var edgeId in this.body.edges){if(this.body.edges.hasOwnProperty(edgeId)){this.body.edges[edgeId].updateLabelModule();}}}
if(options.hidden!==undefined||options.physics!==undefined||dataChanged===true){this.body.emitter.emit('_dataChanged');}}}},{key:'setData',value:function setData(edges){var _this3=this;var doNotEmit=arguments[1]===undefined?false:arguments[1];var oldEdgesData=this.body.data.edges;if(edges instanceof DataSet||edges instanceof DataView){this.body.data.edges=edges;}else if(Array.isArray(edges)){this.body.data.edges=new DataSet();this.body.data.edges.add(edges);}else if(!edges){this.body.data.edges=new DataSet();}else{throw new TypeError('Array or DataSet expected');}
if(oldEdgesData){util.forEach(this.edgesListeners,function(callback,event){oldEdgesData.off(event,callback);});}
this.body.edges={};if(this.body.data.edges){util.forEach(this.edgesListeners,function(callback,event){_this3.body.data.edges.on(event,callback);});var ids=this.body.data.edges.getIds();this.add(ids,true);}
if(doNotEmit===false){this.body.emitter.emit('_dataChanged');}}},{key:'add',value:function add(ids){var doNotEmit=arguments[1]===undefined?false:arguments[1];var edges=this.body.edges;var edgesData=this.body.data.edges;for(var i=0;i<ids.length;i++){var id=ids[i];var oldEdge=edges[id];if(oldEdge){oldEdge.disconnect();}
var data=edgesData.get(id,{'showInternalIds':true});edges[id]=this.create(data);}
if(doNotEmit===false){this.body.emitter.emit('_dataChanged');}}},{key:'update',value:function update(ids){var edges=this.body.edges;var edgesData=this.body.data.edges;var dataChanged=false;for(var i=0;i<ids.length;i++){var id=ids[i];var data=edgesData.get(id);var edge=edges[id];if(edge===null){edge.disconnect();dataChanged=edge.setOptions(data)||dataChanged;edge.connect();}else{this.body.edges[id]=this.create(data);dataChanged=true;}}
if(dataChanged===true){this.body.emitter.emit('_dataChanged');}else{this.body.emitter.emit('_dataUpdated');}}},{key:'remove',value:function remove(ids){var edges=this.body.edges;for(var i=0;i<ids.length;i++){var id=ids[i];var edge=edges[id];if(edge!==undefined){if(edge.via!=null){delete this.body.supportNodes[edge.via.id];}
edge.disconnect();delete edges[id];}}
this.body.emitter.emit('_dataChanged');}},{key:'refresh',value:function refresh(){var edges=this.body.edges;for(var edgeId in edges){var edge=undefined;if(edges.hasOwnProperty(edgeId)){edge=edges[edgeId];}
var data=this.body.data.edges._data[edgeId];if(edge!==undefined&&data!==undefined){edge.setOptions(data);}}}},{key:'create',value:function create(properties){return new _componentsEdge2['default'](properties,this.body,this.options);}},{key:'markAllEdgesAsDirty',value:function markAllEdgesAsDirty(){for(var edgeId in this.body.edges){this.body.edges[edgeId].edgeType.colorDirty=true;}}},{key:'reconnectEdges',value:function reconnectEdges(){var id;var nodes=this.body.nodes;var edges=this.body.edges;for(id in nodes){if(nodes.hasOwnProperty(id)){nodes[id].edges=[];}}
for(id in edges){if(edges.hasOwnProperty(id)){var edge=edges[id];edge.from=null;edge.to=null;edge.connect();}}}},{key:'getConnectedNodes',value:function getConnectedNodes(edgeId){var nodeList=[];if(this.body.edges[edgeId]!==undefined){var edge=this.body.edges[edgeId];if(edge.fromId){nodeList.push(edge.fromId);}
if(edge.toId){nodeList.push(edge.toId);}}
return nodeList;}}]);return EdgesHandler;})();exports['default']=EdgesHandler;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _sharedLabel=__webpack_require__(63);var _sharedLabel2=_interopRequireDefault(_sharedLabel);var _edgesBezierEdgeDynamic=__webpack_require__(83);var _edgesBezierEdgeDynamic2=_interopRequireDefault(_edgesBezierEdgeDynamic);var _edgesBezierEdgeStatic=__webpack_require__(86);var _edgesBezierEdgeStatic2=_interopRequireDefault(_edgesBezierEdgeStatic);var _edgesStraightEdge=__webpack_require__(87);var _edgesStraightEdge2=_interopRequireDefault(_edgesStraightEdge);var util=__webpack_require__(1);var Edge=(function(){function Edge(options,body,globalOptions){_classCallCheck(this,Edge);if(body===undefined){throw'No body provided';}
this.options=util.bridgeObject(globalOptions);this.body=body;this.id=undefined;this.fromId=undefined;this.toId=undefined;this.selected=false;this.hover=false;this.labelDirty=true;this.colorDirty=true;this.baseWidth=this.options.width;this.baseFontSize=this.options.font.size;this.from=undefined;this.to=undefined;this.edgeType=undefined;this.connected=false;this.labelModule=new _sharedLabel2['default'](this.body,this.options);this.setOptions(options);}
_createClass(Edge,[{key:'setOptions',value:function setOptions(options){if(!options){return;}
this.colorDirty=true;Edge.parseOptions(this.options,options,true);if(options.id!==undefined){this.id=options.id;}
if(options.from!==undefined){this.fromId=options.from;}
if(options.to!==undefined){this.toId=options.to;}
if(options.title!==undefined){this.title=options.title;}
if(options.value!==undefined){options.value=parseFloat(options.value);}
this.updateLabelModule();var dataChanged=this.updateEdgeType();this._setInteractionWidths();this.connect();if(options.hidden!==undefined||options.physics!==undefined){dataChanged=true;}
return dataChanged;}},{key:'updateLabelModule',value:function updateLabelModule(){this.labelModule.setOptions(this.options,true);if(this.labelModule.baseSize!==undefined){this.baseFontSize=this.labelModule.baseSize;}}},{key:'updateEdgeType',value:function updateEdgeType(){var dataChanged=false;var changeInType=true;if(this.edgeType!==undefined){if(this.edgeType instanceof _edgesBezierEdgeDynamic2['default']&&this.options.smooth.enabled===true&&this.options.smooth.type==='dynamic'){changeInType=false;}
if(this.edgeType instanceof _edgesBezierEdgeStatic2['default']&&this.options.smooth.enabled===true&&this.options.smooth.type!=='dynamic'){changeInType=false;}
if(this.edgeType instanceof _edgesStraightEdge2['default']&&this.options.smooth.enabled===false){changeInType=false;}
if(changeInType===true){dataChanged=this.edgeType.cleanup();}}
if(changeInType===true){if(this.options.smooth.enabled===true){if(this.options.smooth.type==='dynamic'){dataChanged=true;this.edgeType=new _edgesBezierEdgeDynamic2['default'](this.options,this.body,this.labelModule);}else{this.edgeType=new _edgesBezierEdgeStatic2['default'](this.options,this.body,this.labelModule);}}else{this.edgeType=new _edgesStraightEdge2['default'](this.options,this.body,this.labelModule);}}else{this.edgeType.setOptions(this.options);}
return dataChanged;}},{key:'togglePhysics',value:function togglePhysics(status){this.options.physics=status;this.edgeType.togglePhysics(status);}},{key:'connect',value:function connect(){this.disconnect();this.from=this.body.nodes[this.fromId]||undefined;this.to=this.body.nodes[this.toId]||undefined;this.connected=this.from!==undefined&&this.to!==undefined;if(this.connected===true){this.from.attachEdge(this);this.to.attachEdge(this);}else{if(this.from){this.from.detachEdge(this);}
if(this.to){this.to.detachEdge(this);}}
this.edgeType.connect();}},{key:'disconnect',value:function disconnect(){if(this.from){this.from.detachEdge(this);this.from=undefined;}
if(this.to){this.to.detachEdge(this);this.to=undefined;}
this.connected=false;}},{key:'getTitle',value:function getTitle(){return this.title;}},{key:'isSelected',value:function isSelected(){return this.selected;}},{key:'getValue',value:function getValue(){return this.options.value;}},{key:'setValueRange',value:function setValueRange(min,max,total){if(this.options.value!==undefined){var scale=this.options.scaling.customScalingFunction(min,max,total,this.options.value);var widthDiff=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===true){var fontDiff=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+scale*fontDiff;}
this.options.width=this.options.scaling.min+scale*widthDiff;}else{this.options.width=this.baseWidth;this.options.font.size=this.baseFontSize;}
this._setInteractionWidths();}},{key:'_setInteractionWidths',value:function _setInteractionWidths(){if(typeof this.options.hoverWidth==='function'){this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width);}else{this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width;}
if(typeof this.options.selectionWidth==='function'){this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width);}else{this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width;}}},{key:'draw',value:function draw(ctx){var via=this.edgeType.drawLine(ctx,this.selected,this.hover);this.drawArrows(ctx,via);this.drawLabel(ctx,via);}},{key:'drawArrows',value:function drawArrows(ctx,viaNode){if(this.options.arrows.from.enabled===true){this.edgeType.drawArrowHead(ctx,'from',viaNode,this.selected,this.hover);}
if(this.options.arrows.middle.enabled===true){this.edgeType.drawArrowHead(ctx,'middle',viaNode,this.selected,this.hover);}
if(this.options.arrows.to.enabled===true){this.edgeType.drawArrowHead(ctx,'to',viaNode,this.selected,this.hover);}}},{key:'drawLabel',value:function drawLabel(ctx,viaNode){if(this.options.label!==undefined){var node1=this.from;var node2=this.to;var selected=this.from.selected||this.to.selected||this.selected;if(node1.id!=node2.id){this.labelModule.pointToSelf=false;var point=this.edgeType.getPoint(0.5,viaNode);ctx.save();if(this.options.font.align!=='horizontal'){this.labelModule.calculateLabelSize(ctx,selected,point.x,point.y);ctx.translate(point.x,this.labelModule.size.yLine);this._rotateForLabelAlignment(ctx);}
this.labelModule.draw(ctx,point.x,point.y,selected);ctx.restore();}else{this.labelModule.pointToSelf=true;var x,y;var radius=this.options.selfReferenceSize;if(node1.shape.width>node1.shape.height){x=node1.x+node1.shape.width*0.5;y=node1.y-radius;}else{x=node1.x+radius;y=node1.y-node1.shape.height*0.5;}
point=this._pointOnCircle(x,y,radius,0.125);this.labelModule.draw(ctx,point.x,point.y,selected);}}}},{key:'isOverlappingWith',value:function isOverlappingWith(obj){if(this.connected){var distMax=10;var xFrom=this.from.x;var yFrom=this.from.y;var xTo=this.to.x;var yTo=this.to.y;var xObj=obj.left;var yObj=obj.top;var dist=this.edgeType.getDistanceToEdge(xFrom,yFrom,xTo,yTo,xObj,yObj);return dist<distMax;}else{return false;}}},{key:'_rotateForLabelAlignment',value:function _rotateForLabelAlignment(ctx){var dy=this.from.y-this.to.y;var dx=this.from.x-this.to.x;var angleInDegrees=Math.atan2(dy,dx);if(angleInDegrees<-1&&dx<0||angleInDegrees>0&&dx<0){angleInDegrees=angleInDegrees+Math.PI;}
ctx.rotate(angleInDegrees);}},{key:'_pointOnCircle',value:function _pointOnCircle(x,y,radius,percentage){var angle=percentage*2*Math.PI;return{x:x+radius*Math.cos(angle),y:y-radius*Math.sin(angle)};}},{key:'select',value:function select(){this.selected=true;}},{key:'unselect',value:function unselect(){this.selected=false;}}],[{key:'parseOptions',value:function parseOptions(parentOptions,newOptions){var allowDeletion=arguments[2]===undefined?false:arguments[2];var fields=['id','from','hidden','hoverWidth','label','length','line','opacity','physics','selectionWidth','selfReferenceSize','to','title','value','width'];util.selectiveDeepExtend(fields,parentOptions,newOptions,allowDeletion);util.mergeOptions(parentOptions,newOptions,'smooth');util.mergeOptions(parentOptions,newOptions,'shadow');if(newOptions.dashes!==undefined&&newOptions.dashes!==null){parentOptions.dashes=newOptions.dashes;}else if(allowDeletion===true&&newOptions.dashes===null){parentOptions.dashes=undefined;delete parentOptions.dashes;}
if(newOptions.scaling!==undefined&&newOptions.scaling!==null){if(newOptions.scaling.min!==undefined){parentOptions.scaling.min=newOptions.scaling.min;}
if(newOptions.scaling.max!==undefined){parentOptions.scaling.max=newOptions.scaling.max;}
util.mergeOptions(parentOptions.scaling,newOptions.scaling,'label');}else if(allowDeletion===true&&newOptions.scaling===null){parentOptions.scaling=undefined;delete parentOptions.scaling;}
if(newOptions.arrows!==undefined&&newOptions.arrows!==null){if(typeof newOptions.arrows==='string'){var arrows=newOptions.arrows.toLowerCase();if(arrows.indexOf('to')!=-1){parentOptions.arrows.to.enabled=true;}
if(arrows.indexOf('middle')!=-1){parentOptions.arrows.middle.enabled=true;}
if(arrows.indexOf('from')!=-1){parentOptions.arrows.from.enabled=true;}}else if(typeof newOptions.arrows==='object'){util.mergeOptions(parentOptions.arrows,newOptions.arrows,'to');util.mergeOptions(parentOptions.arrows,newOptions.arrows,'middle');util.mergeOptions(parentOptions.arrows,newOptions.arrows,'from');}else{throw new Error('The arrow newOptions can only be an object or a string. Refer to the documentation. You used:'+JSON.stringify(newOptions.arrows));}}else if(allowDeletion===true&&newOptions.arrows===null){parentOptions.arrows=undefined;delete parentOptions.arrows;}
if(newOptions.color!==undefined&&newOptions.color!==null){if(util.isString(newOptions.color)){parentOptions.color.color=newOptions.color;parentOptions.color.highlight=newOptions.color;parentOptions.color.hover=newOptions.color;parentOptions.color.inherit=false;}else{var colorsDefined=false;if(newOptions.color.color!==undefined){parentOptions.color.color=newOptions.color.color;colorsDefined=true;}
if(newOptions.color.highlight!==undefined){parentOptions.color.highlight=newOptions.color.highlight;colorsDefined=true;}
if(newOptions.color.hover!==undefined){parentOptions.color.hover=newOptions.color.hover;colorsDefined=true;}
if(newOptions.color.inherit!==undefined){parentOptions.color.inherit=newOptions.color.inherit;}
if(newOptions.color.opacity!==undefined){parentOptions.color.opacity=Math.min(1,Math.max(0,newOptions.color.opacity));}
if(newOptions.color.inherit===undefined&&colorsDefined===true){parentOptions.color.inherit=false;}}}else if(allowDeletion===true&&newOptions.color===null){parentOptions.color=undefined;delete parentOptions.color;}
if(newOptions.font!==undefined){_sharedLabel2['default'].parseOptions(parentOptions.font,newOptions);}}}]);return Edge;})();exports['default']=Edge;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilBezierEdgeBase=__webpack_require__(84);var _utilBezierEdgeBase2=_interopRequireDefault(_utilBezierEdgeBase);var BezierEdgeDynamic=(function(_BezierEdgeBase){function BezierEdgeDynamic(options,body,labelModule){_classCallCheck(this,BezierEdgeDynamic);_get(Object.getPrototypeOf(BezierEdgeDynamic.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(BezierEdgeDynamic,_BezierEdgeBase);_createClass(BezierEdgeDynamic,[{key:'setOptions',value:function setOptions(options){this.options=options;this.id=this.options.id;this.setupSupportNode();this.connect();}},{key:'connect',value:function connect(){this.from=this.body.nodes[this.options.from];this.to=this.body.nodes[this.options.to];if(this.from===undefined||this.to===undefined){this.via.setOptions({physics:false});}else{if(this.from.id===this.to.id){this.via.setOptions({physics:false});}else{this.via.setOptions({physics:true});}}}},{key:'cleanup',value:function cleanup(){if(this.via!==undefined){delete this.body.nodes[this.via.id];this.via=undefined;return true;}
return false;}},{key:'togglePhysics',value:function togglePhysics(status){this.via.setOptions({physics:status});this.positionBezierNode();}},{key:'setupSupportNode',value:function setupSupportNode(){if(this.via===undefined){var nodeId='edgeId:'+this.id;var node=this.body.functions.createNode({id:nodeId,shape:'circle',physics:true,hidden:true});this.body.nodes[nodeId]=node;this.via=node;this.via.parentEdgeId=this.id;this.positionBezierNode();}}},{key:'positionBezierNode',value:function positionBezierNode(){if(this.via!==undefined&&this.from!==undefined&&this.to!==undefined){this.via.x=0.5*(this.from.x+this.to.x);this.via.y=0.5*(this.from.y+this.to.y);}else if(this.via!==undefined){this.via.x=0;this.via.y=0;}}},{key:'_line',value:function _line(ctx){ctx.beginPath();ctx.moveTo(this.from.x,this.from.y);ctx.quadraticCurveTo(this.via.x,this.via.y,this.to.x,this.to.y);this.enableShadow(ctx);ctx.stroke();this.disableShadow(ctx);return this.via;}},{key:'getPoint',value:function getPoint(percentage){var t=percentage;var x=Math.pow(1-t,2)*this.from.x+2*t*(1-t)*this.via.x+Math.pow(t,2)*this.to.x;var y=Math.pow(1-t,2)*this.from.y+2*t*(1-t)*this.via.y+Math.pow(t,2)*this.to.y;return{x:x,y:y};}},{key:'_findBorderPosition',value:function _findBorderPosition(nearNode,ctx){return this._findBorderPositionBezier(nearNode,ctx,this.via);}},{key:'_getDistanceToEdge',value:function _getDistanceToEdge(x1,y1,x2,y2,x3,y3){return this._getDistanceToBezierEdge(x1,y1,x2,y2,x3,y3,this.via);}}]);return BezierEdgeDynamic;})(_utilBezierEdgeBase2['default']);exports['default']=BezierEdgeDynamic;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x2,_x3,_x4){var _again=true;_function:while(_again){var object=_x2,property=_x3,receiver=_x4;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x2=parent;_x3=property;_x4=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _EdgeBase2=__webpack_require__(85);var _EdgeBase3=_interopRequireDefault(_EdgeBase2);var BezierEdgeBase=(function(_EdgeBase){function BezierEdgeBase(options,body,labelModule){_classCallCheck(this,BezierEdgeBase);_get(Object.getPrototypeOf(BezierEdgeBase.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(BezierEdgeBase,_EdgeBase);_createClass(BezierEdgeBase,[{key:'_findBorderPositionBezier',value:function _findBorderPositionBezier(nearNode,ctx){var viaNode=arguments[2]===undefined?this._getViaCoordinates():arguments[2];var maxIterations=10;var iteration=0;var low=0;var high=1;var pos,angle,distanceToBorder,distanceToPoint,difference;var threshold=0.2;var node=this.to;var from=false;if(nearNode.id===this.from.id){node=this.from;from=true;}
while(low<=high&&iteration<maxIterations){var middle=(low+high)*0.5;pos=this.getPoint(middle,viaNode);angle=Math.atan2(node.y-pos.y,node.x-pos.x);distanceToBorder=node.distanceToBorder(ctx,angle);distanceToPoint=Math.sqrt(Math.pow(pos.x-node.x,2)+Math.pow(pos.y-node.y,2));difference=distanceToBorder-distanceToPoint;if(Math.abs(difference)<threshold){break;}else if(difference<0){if(from===false){low=middle;}else{high=middle;}}else{if(from===false){high=middle;}else{low=middle;}}
iteration++;}
pos.t=middle;return pos;}},{key:'_getDistanceToBezierEdge',value:function _getDistanceToBezierEdge(x1,y1,x2,y2,x3,y3,via){var xVia=undefined,yVia=undefined;xVia=via.x;yVia=via.y;var minDistance=1000000000;var distance=undefined;var i=undefined,t=undefined,x=undefined,y=undefined;var lastX=x1;var lastY=y1;for(i=1;i<10;i++){t=0.1*i;x=Math.pow(1-t,2)*x1+2*t*(1-t)*xVia+Math.pow(t,2)*x2;y=Math.pow(1-t,2)*y1+2*t*(1-t)*yVia+Math.pow(t,2)*y2;if(i>0){distance=this._getDistanceToLine(lastX,lastY,x,y,x3,y3);minDistance=distance<minDistance?distance:minDistance;}
lastX=x;lastY=y;}
return minDistance;}}]);return BezierEdgeBase;})(_EdgeBase3['default']);exports['default']=BezierEdgeBase;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _slicedToArray(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i['return'])_i['return']();}finally{if(_d)throw _e;}}return _arr;}else{throw new TypeError('Invalid attempt to destructure non-iterable instance');}}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var util=__webpack_require__(1);var EdgeBase=(function(){function EdgeBase(options,body,labelModule){_classCallCheck(this,EdgeBase);this.body=body;this.labelModule=labelModule;this.setOptions(options);this.colorDirty=true;this.color={};this.selectionWidth=2;this.hoverWidth=1.5;}
_createClass(EdgeBase,[{key:'connect',value:function connect(){}},{key:'cleanup',value:function cleanup(){return false;}},{key:'setOptions',value:function setOptions(options){this.options=options;this.from=this.body.nodes[this.options.from];this.to=this.body.nodes[this.options.to];this.id=this.options.id;}},{key:'togglePhysics',value:function togglePhysics(status){}},{key:'drawLine',value:function drawLine(ctx,selected,hover){ctx.strokeStyle=this.getColor(ctx,selected,hover);ctx.lineWidth=this.getLineWidth(selected,hover);var via=undefined;if(this.options.dashes!==false){via=this._drawDashedLine(ctx);}else{via=this._drawLine(ctx);}
return via;}},{key:'_drawLine',value:function _drawLine(ctx){var via=undefined;if(this.from!=this.to){via=this._line(ctx);}else{var _getCircleData2=this._getCircleData(ctx);var _getCircleData22=_slicedToArray(_getCircleData2,3);var x=_getCircleData22[0];var y=_getCircleData22[1];var radius=_getCircleData22[2];this._circle(ctx,x,y,radius);}
return via;}},{key:'_drawDashedLine',value:function _drawDashedLine(ctx){var via=undefined;ctx.lineCap='round';var pattern=[5,5];if(Array.isArray(this.options.dashes)===true){pattern=this.options.dashes;}
if(ctx.setLineDash!==undefined){ctx.save();ctx.setLineDash(pattern);ctx.lineDashOffset=0;if(this.from!=this.to){via=this._line(ctx);}else{var _getCircleData3=this._getCircleData(ctx);var _getCircleData32=_slicedToArray(_getCircleData3,3);var x=_getCircleData32[0];var y=_getCircleData32[1];var radius=_getCircleData32[2];this._circle(ctx,x,y,radius);}
ctx.setLineDash([0]);ctx.lineDashOffset=0;ctx.restore();}else{if(this.from!=this.to){ctx.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,pattern);}else{var _getCircleData4=this._getCircleData(ctx);var _getCircleData42=_slicedToArray(_getCircleData4,3);var x=_getCircleData42[0];var y=_getCircleData42[1];var radius=_getCircleData42[2];this._circle(ctx,x,y,radius);}
this.enableShadow(ctx);ctx.stroke();this.disableShadow(ctx);}
return via;}},{key:'findBorderPosition',value:function findBorderPosition(nearNode,ctx,options){if(this.from!=this.to){return this._findBorderPosition(nearNode,ctx,options);}else{return this._findBorderPositionCircle(nearNode,ctx,options);}}},{key:'findBorderPositions',value:function findBorderPositions(ctx){var from={};var to={};if(this.from!=this.to){from=this._findBorderPosition(this.from,ctx);to=this._findBorderPosition(this.to,ctx);}else{var _getCircleData5=this._getCircleData(ctx);var _getCircleData52=_slicedToArray(_getCircleData5,3);var x=_getCircleData52[0];var y=_getCircleData52[1];var radius=_getCircleData52[2];from=this._findBorderPositionCircle(this.from,ctx,{x:x,y:y,low:0.25,high:0.6,direction:-1});to=this._findBorderPositionCircle(this.from,ctx,{x:x,y:y,low:0.6,high:0.8,direction:1});}
return{from:from,to:to};}},{key:'_getCircleData',value:function _getCircleData(ctx){var x=undefined,y=undefined;var node=this.from;var radius=this.options.selfReferenceSize;if(ctx!==undefined){if(node.shape.width===undefined){node.shape.resize(ctx);}}
if(node.shape.width>node.shape.height){x=node.x+node.shape.width*0.5;y=node.y-radius;}else{x=node.x+radius;y=node.y-node.shape.height*0.5;}
return[x,y,radius];}},{key:'_pointOnCircle',value:function _pointOnCircle(x,y,radius,percentage){var angle=percentage*2*Math.PI;return{x:x+radius*Math.cos(angle),y:y-radius*Math.sin(angle)};}},{key:'_findBorderPositionCircle',value:function _findBorderPositionCircle(node,ctx,options){var x=options.x;var y=options.y;var low=options.low;var high=options.high;var direction=options.direction;var maxIterations=10;var iteration=0;var radius=this.options.selfReferenceSize;var pos=undefined,angle=undefined,distanceToBorder=undefined,distanceToPoint=undefined,difference=undefined;var threshold=0.05;var middle=(low+high)*0.5;while(low<=high&&iteration<maxIterations){middle=(low+high)*0.5;pos=this._pointOnCircle(x,y,radius,middle);angle=Math.atan2(node.y-pos.y,node.x-pos.x);distanceToBorder=node.distanceToBorder(ctx,angle);distanceToPoint=Math.sqrt(Math.pow(pos.x-node.x,2)+Math.pow(pos.y-node.y,2));difference=distanceToBorder-distanceToPoint;if(Math.abs(difference)<threshold){break;}else if(difference>0){if(direction>0){low=middle;}else{high=middle;}}else{if(direction>0){high=middle;}else{low=middle;}}
iteration++;}
pos.t=middle;return pos;}},{key:'getLineWidth',value:function getLineWidth(selected,hover){if(selected===true){return Math.max(this.selectionWidth,0.3/this.body.view.scale);}else{if(hover===true){return Math.max(this.hoverWidth,0.3/this.body.view.scale);}else{return Math.max(this.options.width,0.3/this.body.view.scale);}}}},{key:'getColor',value:function getColor(ctx,selected,hover){var colorOptions=this.options.color;if(colorOptions.inherit!==false){if(colorOptions.inherit==='both'&&this.from.id!==this.to.id){var grd=ctx.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);var fromColor=undefined,toColor=undefined;fromColor=this.from.options.color.highlight.border;toColor=this.to.options.color.highlight.border;if(this.from.selected===false&&this.to.selected===false){fromColor=util.overrideOpacity(this.from.options.color.border,this.options.color.opacity);toColor=util.overrideOpacity(this.to.options.color.border,this.options.color.opacity);}else if(this.from.selected===true&&this.to.selected===false){toColor=this.to.options.color.border;}else if(this.from.selected===false&&this.to.selected===true){fromColor=this.from.options.color.border;}
grd.addColorStop(0,fromColor);grd.addColorStop(1,toColor);return grd;}
if(this.colorDirty===true){if(colorOptions.inherit==='to'){this.color.highlight=this.to.options.color.highlight.border;this.color.hover=this.to.options.color.hover.border;this.color.color=util.overrideOpacity(this.to.options.color.border,colorOptions.opacity);}else{this.color.highlight=this.from.options.color.highlight.border;this.color.hover=this.from.options.color.hover.border;this.color.color=util.overrideOpacity(this.from.options.color.border,colorOptions.opacity);}}}else if(this.colorDirty===true){this.color.highlight=colorOptions.highlight;this.color.hover=colorOptions.hover;this.color.color=util.overrideOpacity(colorOptions.color,colorOptions.opacity);}
this.colorDirty=false;if(selected===true){return this.color.highlight;}else if(hover===true){return this.color.hover;}else{return this.color.color;}}},{key:'_circle',value:function _circle(ctx,x,y,radius){this.enableShadow(ctx);ctx.beginPath();ctx.arc(x,y,radius,0,2*Math.PI,false);ctx.stroke();this.disableShadow(ctx);}},{key:'getDistanceToEdge',value:function getDistanceToEdge(x1,y1,x2,y2,x3,y3,via){var returnValue=0;if(this.from!=this.to){returnValue=this._getDistanceToEdge(x1,y1,x2,y2,x3,y3,via);}else{var _getCircleData6=this._getCircleData();var _getCircleData62=_slicedToArray(_getCircleData6,3);var x=_getCircleData62[0];var y=_getCircleData62[1];var radius=_getCircleData62[2];var dx=x-x3;var dy=y-y3;returnValue=Math.abs(Math.sqrt(dx*dx+dy*dy)-radius);}
if(this.labelModule.size.left<x3&&this.labelModule.size.left+this.labelModule.size.width>x3&&this.labelModule.size.top<y3&&this.labelModule.size.top+this.labelModule.size.height>y3){return 0;}else{return returnValue;}}},{key:'_getDistanceToLine',value:function _getDistanceToLine(x1,y1,x2,y2,x3,y3){var px=x2-x1;var py=y2-y1;var something=px*px+py*py;var u=((x3-x1)*px+(y3-y1)*py)/something;if(u>1){u=1;}else if(u<0){u=0;}
var x=x1+u*px;var y=y1+u*py;var dx=x-x3;var dy=y-y3;return Math.sqrt(dx*dx+dy*dy);}},{key:'drawArrowHead',value:function drawArrowHead(ctx,position,viaNode,selected,hover){ctx.strokeStyle=this.getColor(ctx,selected,hover);ctx.fillStyle=ctx.strokeStyle;ctx.lineWidth=this.getLineWidth(selected,hover);var angle=undefined;var length=undefined;var arrowPos=undefined;var node1=undefined;var node2=undefined;var guideOffset=undefined;var scaleFactor=undefined;if(position==='from'){node1=this.from;node2=this.to;guideOffset=0.1;scaleFactor=this.options.arrows.from.scaleFactor;}else if(position==='to'){node1=this.to;node2=this.from;guideOffset=-0.1;scaleFactor=this.options.arrows.to.scaleFactor;}else{node1=this.to;node2=this.from;scaleFactor=this.options.arrows.middle.scaleFactor;}
if(node1!=node2){if(position!=='middle'){if(this.options.smooth.enabled===true){arrowPos=this.findBorderPosition(node1,ctx,{via:viaNode});var guidePos=this.getPoint(Math.max(0,Math.min(1,arrowPos.t+guideOffset)),viaNode);angle=Math.atan2(arrowPos.y-guidePos.y,arrowPos.x-guidePos.x);}else{angle=Math.atan2(node1.y-node2.y,node1.x-node2.x);arrowPos=this.findBorderPosition(node1,ctx);}}else{angle=Math.atan2(node1.y-node2.y,node1.x-node2.x);arrowPos=this.getPoint(0.6,viaNode);}
length=(10+5*this.options.width)*scaleFactor;ctx.arrow(arrowPos.x,arrowPos.y,angle,length);this.enableShadow(ctx);ctx.fill();this.disableShadow(ctx);ctx.stroke();}else{var _angle=undefined,point=undefined;var _getCircleData7=this._getCircleData(ctx);var _getCircleData72=_slicedToArray(_getCircleData7,3);var x=_getCircleData72[0];var y=_getCircleData72[1];var radius=_getCircleData72[2];if(position==='from'){point=this.findBorderPosition(this.from,ctx,{x:x,y:y,low:0.25,high:0.6,direction:-1});_angle=point.t*-2*Math.PI+1.5*Math.PI+0.1*Math.PI;}else if(position==='to'){point=this.findBorderPosition(this.from,ctx,{x:x,y:y,low:0.6,high:1,direction:1});_angle=point.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI;}else{point=this._pointOnCircle(x,y,radius,0.175);_angle=3.9269908169872414;}
var _length=(10+5*this.options.width)*scaleFactor;ctx.arrow(point.x,point.y,_angle,_length);this.enableShadow(ctx);ctx.fill();this.disableShadow(ctx);ctx.stroke();}}},{key:'enableShadow',value:function enableShadow(ctx){if(this.options.shadow.enabled===true){ctx.shadowColor='rgba(0,0,0,0.5)';ctx.shadowBlur=this.options.shadow.size;ctx.shadowOffsetX=this.options.shadow.x;ctx.shadowOffsetY=this.options.shadow.y;}}},{key:'disableShadow',value:function disableShadow(ctx){if(this.options.shadow.enabled===true){ctx.shadowColor='rgba(0,0,0,0)';ctx.shadowBlur=0;ctx.shadowOffsetX=0;ctx.shadowOffsetY=0;}}}]);return EdgeBase;})();exports['default']=EdgeBase;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x4,_x5,_x6){var _again=true;_function:while(_again){var object=_x4,property=_x5,receiver=_x6;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x4=parent;_x5=property;_x6=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilBezierEdgeBase=__webpack_require__(84);var _utilBezierEdgeBase2=_interopRequireDefault(_utilBezierEdgeBase);var BezierEdgeStatic=(function(_BezierEdgeBase){function BezierEdgeStatic(options,body,labelModule){_classCallCheck(this,BezierEdgeStatic);_get(Object.getPrototypeOf(BezierEdgeStatic.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(BezierEdgeStatic,_BezierEdgeBase);_createClass(BezierEdgeStatic,[{key:'_line',value:function _line(ctx){ctx.beginPath();ctx.moveTo(this.from.x,this.from.y);var via=this._getViaCoordinates();var returnValue=via;if(via.x===undefined){ctx.lineTo(this.to.x,this.to.y);returnValue=undefined;}else{ctx.quadraticCurveTo(via.x,via.y,this.to.x,this.to.y);}
this.enableShadow(ctx);ctx.stroke();this.disableShadow(ctx);return returnValue;}},{key:'_getViaCoordinates',value:function _getViaCoordinates(){var xVia=undefined;var yVia=undefined;var factor=this.options.smooth.roundness;var type=this.options.smooth.type;var dx=Math.abs(this.from.x-this.to.x);var dy=Math.abs(this.from.y-this.to.y);if(type==='discrete'||type==='diagonalCross'){if(Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)){if(this.from.y>this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dy;yVia=this.from.y-factor*dy;}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dy;yVia=this.from.y-factor*dy;}}else if(this.from.y<this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dy;yVia=this.from.y+factor*dy;}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dy;yVia=this.from.y+factor*dy;}}
if(type==='discrete'){xVia=dx<factor*dy?this.from.x:xVia;}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.y>this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dx;yVia=this.from.y-factor*dx;}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dx;yVia=this.from.y-factor*dx;}}else if(this.from.y<this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dx;yVia=this.from.y+factor*dx;}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dx;yVia=this.from.y+factor*dx;}}
if(type==='discrete'){yVia=dy<factor*dx?this.from.y:yVia;}}}else if(type==='straightCross'){if(Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)){xVia=this.from.x;if(this.from.y<this.to.y){yVia=this.to.y-(1-factor)*dy;}else{yVia=this.to.y+(1-factor)*dy;}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.x<this.to.x){xVia=this.to.x-(1-factor)*dx;}else{xVia=this.to.x+(1-factor)*dx;}
yVia=this.from.y;}}else if(type==='horizontal'){if(this.from.x<this.to.x){xVia=this.to.x-(1-factor)*dx;}else{xVia=this.to.x+(1-factor)*dx;}
yVia=this.from.y;}else if(type==='vertical'){xVia=this.from.x;if(this.from.y<this.to.y){yVia=this.to.y-(1-factor)*dy;}else{yVia=this.to.y+(1-factor)*dy;}}else if(type==='curvedCW'){dx=this.to.x-this.from.x;dy=this.from.y-this.to.y;var radius=Math.sqrt(dx*dx+dy*dy);var pi=Math.PI;var originalAngle=Math.atan2(dy,dx);var myAngle=(originalAngle+(factor*0.5+0.5)*pi)%(2*pi);xVia=this.from.x+(factor*0.5+0.5)*radius*Math.sin(myAngle);yVia=this.from.y+(factor*0.5+0.5)*radius*Math.cos(myAngle);}else if(type==='curvedCCW'){dx=this.to.x-this.from.x;dy=this.from.y-this.to.y;var radius=Math.sqrt(dx*dx+dy*dy);var pi=Math.PI;var originalAngle=Math.atan2(dy,dx);var myAngle=(originalAngle+(-factor*0.5+0.5)*pi)%(2*pi);xVia=this.from.x+(factor*0.5+0.5)*radius*Math.sin(myAngle);yVia=this.from.y+(factor*0.5+0.5)*radius*Math.cos(myAngle);}else{if(Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)){if(this.from.y>this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dy;yVia=this.from.y-factor*dy;xVia=this.to.x<xVia?this.to.x:xVia;}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dy;yVia=this.from.y-factor*dy;xVia=this.to.x>xVia?this.to.x:xVia;}}else if(this.from.y<this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dy;yVia=this.from.y+factor*dy;xVia=this.to.x<xVia?this.to.x:xVia;}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dy;yVia=this.from.y+factor*dy;xVia=this.to.x>xVia?this.to.x:xVia;}}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.y>this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dx;yVia=this.from.y-factor*dx;yVia=this.to.y>yVia?this.to.y:yVia;}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dx;yVia=this.from.y-factor*dx;yVia=this.to.y>yVia?this.to.y:yVia;}}else if(this.from.y<this.to.y){if(this.from.x<this.to.x){xVia=this.from.x+factor*dx;yVia=this.from.y+factor*dx;yVia=this.to.y<yVia?this.to.y:yVia;}else if(this.from.x>this.to.x){xVia=this.from.x-factor*dx;yVia=this.from.y+factor*dx;yVia=this.to.y<yVia?this.to.y:yVia;}}}}
return{x:xVia,y:yVia};}},{key:'_findBorderPosition',value:function _findBorderPosition(nearNode,ctx){var options=arguments[2]===undefined?{}:arguments[2];return this._findBorderPositionBezier(nearNode,ctx,options.via);}},{key:'_getDistanceToEdge',value:function _getDistanceToEdge(x1,y1,x2,y2,x3,y3){var via=arguments[6]===undefined?this._getViaCoordinates():arguments[6];return this._getDistanceToBezierEdge(x1,y1,x2,y2,x3,y3,via);}},{key:'getPoint',value:function getPoint(percentage){var via=arguments[1]===undefined?this._getViaCoordinates():arguments[1];var t=percentage;var x=Math.pow(1-t,2)*this.from.x+2*t*(1-t)*via.x+Math.pow(t,2)*this.to.x;var y=Math.pow(1-t,2)*this.from.y+2*t*(1-t)*via.y+Math.pow(t,2)*this.to.y;return{x:x,y:y};}}]);return BezierEdgeStatic;})(_utilBezierEdgeBase2['default']);exports['default']=BezierEdgeStatic;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _utilEdgeBase=__webpack_require__(85);var _utilEdgeBase2=_interopRequireDefault(_utilEdgeBase);var StraightEdge=(function(_EdgeBase){function StraightEdge(options,body,labelModule){_classCallCheck(this,StraightEdge);_get(Object.getPrototypeOf(StraightEdge.prototype),'constructor',this).call(this,options,body,labelModule);}
_inherits(StraightEdge,_EdgeBase);_createClass(StraightEdge,[{key:'_line',value:function _line(ctx){ctx.beginPath();ctx.moveTo(this.from.x,this.from.y);ctx.lineTo(this.to.x,this.to.y);this.enableShadow(ctx);ctx.stroke();this.disableShadow(ctx);return undefined;}},{key:'getPoint',value:function getPoint(percentage){return{x:(1-percentage)*this.from.x+percentage*this.to.x,y:(1-percentage)*this.from.y+percentage*this.to.y};}},{key:'_findBorderPosition',value:function _findBorderPosition(nearNode,ctx){var node1=this.to;var node2=this.from;if(nearNode.id===this.from.id){node1=this.from;node2=this.to;}
var angle=Math.atan2(node1.y-node2.y,node1.x-node2.x);var dx=node1.x-node2.x;var dy=node1.y-node2.y;var edgeSegmentLength=Math.sqrt(dx*dx+dy*dy);var toBorderDist=nearNode.distanceToBorder(ctx,angle);var toBorderPoint=(edgeSegmentLength-toBorderDist)/edgeSegmentLength;var borderPos={};borderPos.x=(1-toBorderPoint)*node2.x+toBorderPoint*node1.x;borderPos.y=(1-toBorderPoint)*node2.y+toBorderPoint*node1.y;return borderPos;}},{key:'_getDistanceToEdge',value:function _getDistanceToEdge(x1,y1,x2,y2,x3,y3){return this._getDistanceToLine(x1,y1,x2,y2,x3,y3);}}]);return StraightEdge;})(_utilEdgeBase2['default']);exports['default']=StraightEdge;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _componentsPhysicsBarnesHutSolver=__webpack_require__(89);var _componentsPhysicsBarnesHutSolver2=_interopRequireDefault(_componentsPhysicsBarnesHutSolver);var _componentsPhysicsRepulsionSolver=__webpack_require__(90);var _componentsPhysicsRepulsionSolver2=_interopRequireDefault(_componentsPhysicsRepulsionSolver);var _componentsPhysicsHierarchicalRepulsionSolver=__webpack_require__(91);var _componentsPhysicsHierarchicalRepulsionSolver2=_interopRequireDefault(_componentsPhysicsHierarchicalRepulsionSolver);var _componentsPhysicsSpringSolver=__webpack_require__(92);var _componentsPhysicsSpringSolver2=_interopRequireDefault(_componentsPhysicsSpringSolver);var _componentsPhysicsHierarchicalSpringSolver=__webpack_require__(93);var _componentsPhysicsHierarchicalSpringSolver2=_interopRequireDefault(_componentsPhysicsHierarchicalSpringSolver);var _componentsPhysicsCentralGravitySolver=__webpack_require__(94);var _componentsPhysicsCentralGravitySolver2=_interopRequireDefault(_componentsPhysicsCentralGravitySolver);var _componentsPhysicsFA2BasedRepulsionSolver=__webpack_require__(95);var _componentsPhysicsFA2BasedRepulsionSolver2=_interopRequireDefault(_componentsPhysicsFA2BasedRepulsionSolver);var _componentsPhysicsFA2BasedCentralGravitySolver=__webpack_require__(96);var _componentsPhysicsFA2BasedCentralGravitySolver2=_interopRequireDefault(_componentsPhysicsFA2BasedCentralGravitySolver);var util=__webpack_require__(1);var PhysicsEngine=(function(){function PhysicsEngine(body){_classCallCheck(this,PhysicsEngine);this.body=body;this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}};this.physicsEnabled=true;this.simulationInterval=1000/60;this.requiresTimeout=true;this.previousStates={};this.freezeCache={};this.renderTimer=undefined;this.initialStabilizationEmitted=false;this.stabilized=false;this.startedStabilization=false;this.stabilizationIterations=0;this.ready=false;this.options={};this.defaultOptions={enabled:true,barnesHut:{theta:0.5,gravitationalConstant:-2000,centralGravity:0.3,springLength:95,springConstant:0.04,damping:0.09,avoidOverlap:0},forceAtlas2Based:{theta:0.5,gravitationalConstant:-50,centralGravity:0.01,springConstant:0.08,springLength:100,damping:0.4,avoidOverlap:0},repulsion:{centralGravity:0.2,springLength:200,springConstant:0.05,nodeDistance:100,damping:0.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:0.01,nodeDistance:120,damping:0.09},maxVelocity:50,minVelocity:0.1,solver:'barnesHut',stabilization:{enabled:true,iterations:1000,updateInterval:50,onlyDynamicEdges:false,fit:true},timestep:0.5};util.extend(this.options,this.defaultOptions);this.bindEventListeners();}
_createClass(PhysicsEngine,[{key:'bindEventListeners',value:function bindEventListeners(){var _this=this;this.body.emitter.on('initPhysics',function(){_this.initPhysics();});this.body.emitter.on('resetPhysics',function(){_this.stopSimulation();_this.ready=false;});this.body.emitter.on('disablePhysics',function(){_this.physicsEnabled=false;_this.stopSimulation();});this.body.emitter.on('restorePhysics',function(){_this.setOptions(_this.options);if(_this.ready===true){_this.startSimulation();}});this.body.emitter.on('startSimulation',function(){if(_this.ready===true){_this.startSimulation();}});this.body.emitter.on('stopSimulation',function(){_this.stopSimulation();});this.body.emitter.on('destroy',function(){_this.stopSimulation(false);_this.body.emitter.off();});}},{key:'setOptions',value:function setOptions(options){if(options!==undefined){if(options===false){this.options.enabled=false;this.physicsEnabled=false;this.stopSimulation();}else{this.physicsEnabled=true;util.selectiveNotDeepExtend(['stabilization'],this.options,options);util.mergeOptions(this.options,options,'stabilization');if(options.enabled===undefined){this.options.enabled=true;}
if(this.options.enabled===false){this.physicsEnabled=false;this.stopSimulation();}}}
this.init();}},{key:'init',value:function init(){var options;if(this.options.solver==='forceAtlas2Based'){options=this.options.forceAtlas2Based;this.nodesSolver=new _componentsPhysicsFA2BasedRepulsionSolver2['default'](this.body,this.physicsBody,options);this.edgesSolver=new _componentsPhysicsSpringSolver2['default'](this.body,this.physicsBody,options);this.gravitySolver=new _componentsPhysicsFA2BasedCentralGravitySolver2['default'](this.body,this.physicsBody,options);}else if(this.options.solver==='repulsion'){options=this.options.repulsion;this.nodesSolver=new _componentsPhysicsRepulsionSolver2['default'](this.body,this.physicsBody,options);this.edgesSolver=new _componentsPhysicsSpringSolver2['default'](this.body,this.physicsBody,options);this.gravitySolver=new _componentsPhysicsCentralGravitySolver2['default'](this.body,this.physicsBody,options);}else if(this.options.solver==='hierarchicalRepulsion'){options=this.options.hierarchicalRepulsion;this.nodesSolver=new _componentsPhysicsHierarchicalRepulsionSolver2['default'](this.body,this.physicsBody,options);this.edgesSolver=new _componentsPhysicsHierarchicalSpringSolver2['default'](this.body,this.physicsBody,options);this.gravitySolver=new _componentsPhysicsCentralGravitySolver2['default'](this.body,this.physicsBody,options);}else{options=this.options.barnesHut;this.nodesSolver=new _componentsPhysicsBarnesHutSolver2['default'](this.body,this.physicsBody,options);this.edgesSolver=new _componentsPhysicsSpringSolver2['default'](this.body,this.physicsBody,options);this.gravitySolver=new _componentsPhysicsCentralGravitySolver2['default'](this.body,this.physicsBody,options);}
this.modelOptions=options;}},{key:'initPhysics',value:function initPhysics(){if(this.physicsEnabled===true&&this.options.enabled===true){if(this.options.stabilization.enabled===true){this.stabilize();}else{this.stabilized=false;this.ready=true;this.body.emitter.emit('fit',{},true);this.startSimulation();}}else{this.ready=true;this.body.emitter.emit('fit');}}},{key:'startSimulation',value:function startSimulation(){if(this.physicsEnabled===true&&this.options.enabled===true){this.stabilized=false;this.body.emitter.emit('_resizeNodes');if(this.viewFunction===undefined){this.viewFunction=this.simulationStep.bind(this);this.body.emitter.on('initRedraw',this.viewFunction);this.body.emitter.emit('_startRendering');}}else{this.body.emitter.emit('_redraw');}}},{key:'stopSimulation',value:function stopSimulation(){var emit=arguments[0]===undefined?true:arguments[0];this.stabilized=true;if(emit===true){this._emitStabilized();}
if(this.viewFunction!==undefined){this.body.emitter.off('initRedraw',this.viewFunction);this.viewFunction=undefined;if(emit===true){this.body.emitter.emit('_stopRendering');}}}},{key:'simulationStep',value:function simulationStep(){var startTime=Date.now();this.physicsTick();var physicsTime=Date.now()-startTime;if((physicsTime<0.4*this.simulationInterval||this.runDoubleSpeed===true)&&this.stabilized===false){this.physicsTick();this.runDoubleSpeed=true;}
if(this.stabilized===true){if(this.stabilizationIterations>1){this.startedStabilization=false;}
this.stopSimulation();}}},{key:'_emitStabilized',value:function _emitStabilized(){var _this2=this;if(this.stabilizationIterations>1||this.initialStabilizationEmitted===false){this.initialStabilizationEmitted=true;setTimeout(function(){_this2.body.emitter.emit('stabilized',{iterations:_this2.stabilizationIterations});_this2.stabilizationIterations=0;},0);}}},{key:'physicsTick',value:function physicsTick(){if(this.stabilized===false){this.calculateForces();this.stabilized=this.moveNodes();if(this.stabilized===true){this.revert();}else{if(this.startedStabilization===false){this.body.emitter.emit('startStabilizing');this.startedStabilization=true;}}
this.stabilizationIterations++;}}},{key:'updatePhysicsData',value:function updatePhysicsData(){this.physicsBody.forces={};this.physicsBody.physicsNodeIndices=[];this.physicsBody.physicsEdgeIndices=[];var nodes=this.body.nodes;var edges=this.body.edges;for(var nodeId in nodes){if(nodes.hasOwnProperty(nodeId)){if(nodes[nodeId].options.physics===true){this.physicsBody.physicsNodeIndices.push(nodeId);}}}
for(var edgeId in edges){if(edges.hasOwnProperty(edgeId)){if(edges[edgeId].options.physics===true){this.physicsBody.physicsEdgeIndices.push(edgeId);}}}
for(var i=0;i<this.physicsBody.physicsNodeIndices.length;i++){var nodeId=this.physicsBody.physicsNodeIndices[i];this.physicsBody.forces[nodeId]={x:0,y:0};if(this.physicsBody.velocities[nodeId]===undefined){this.physicsBody.velocities[nodeId]={x:0,y:0};}}
for(var nodeId in this.physicsBody.velocities){if(nodes[nodeId]===undefined){delete this.physicsBody.velocities[nodeId];}}}},{key:'revert',value:function revert(){var nodeIds=Object.keys(this.previousStates);var nodes=this.body.nodes;var velocities=this.physicsBody.velocities;for(var i=0;i<nodeIds.length;i++){var nodeId=nodeIds[i];if(nodes[nodeId]!==undefined){if(nodes[nodeId].options.physics===true){velocities[nodeId].x=this.previousStates[nodeId].vx;velocities[nodeId].y=this.previousStates[nodeId].vy;nodes[nodeId].x=this.previousStates[nodeId].x;nodes[nodeId].y=this.previousStates[nodeId].y;}}else{delete this.previousStates[nodeId];}}}},{key:'moveNodes',value:function moveNodes(){var nodesPresent=false;var nodeIndices=this.physicsBody.physicsNodeIndices;var maxVelocity=this.options.maxVelocity?this.options.maxVelocity:1000000000;var stabilized=true;var vminCorrected=this.options.minVelocity/Math.max(this.body.view.scale,0.05);for(var i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i];var nodeVelocity=this._performStep(nodeId,maxVelocity);stabilized=nodeVelocity<vminCorrected&&stabilized===true;nodesPresent=true;}
if(nodesPresent===true){if(vminCorrected>0.5*this.options.maxVelocity){return false;}else{return stabilized;}}
return true;}},{key:'_performStep',value:function _performStep(nodeId,maxVelocity){var node=this.body.nodes[nodeId];var timestep=this.options.timestep;var forces=this.physicsBody.forces;var velocities=this.physicsBody.velocities;this.previousStates[nodeId]={x:node.x,y:node.y,vx:velocities[nodeId].x,vy:velocities[nodeId].y};if(node.options.fixed.x===false){var dx=this.modelOptions.damping*velocities[nodeId].x;var ax=(forces[nodeId].x-dx)/node.options.mass;velocities[nodeId].x+=ax*timestep;velocities[nodeId].x=Math.abs(velocities[nodeId].x)>maxVelocity?velocities[nodeId].x>0?maxVelocity:-maxVelocity:velocities[nodeId].x;node.x+=velocities[nodeId].x*timestep;}else{forces[nodeId].x=0;velocities[nodeId].x=0;}
if(node.options.fixed.y===false){var dy=this.modelOptions.damping*velocities[nodeId].y;var ay=(forces[nodeId].y-dy)/node.options.mass;velocities[nodeId].y+=ay*timestep;velocities[nodeId].y=Math.abs(velocities[nodeId].y)>maxVelocity?velocities[nodeId].y>0?maxVelocity:-maxVelocity:velocities[nodeId].y;node.y+=velocities[nodeId].y*timestep;}else{forces[nodeId].y=0;velocities[nodeId].y=0;}
var totalVelocity=Math.sqrt(Math.pow(velocities[nodeId].x,2)+Math.pow(velocities[nodeId].y,2));return totalVelocity;}},{key:'calculateForces',value:function calculateForces(){this.gravitySolver.solve();this.nodesSolver.solve();this.edgesSolver.solve();}},{key:'_freezeNodes',value:function _freezeNodes(){var nodes=this.body.nodes;for(var id in nodes){if(nodes.hasOwnProperty(id)){if(nodes[id].x&&nodes[id].y){this.freezeCache[id]={x:nodes[id].options.fixed.x,y:nodes[id].options.fixed.y};nodes[id].options.fixed.x=true;nodes[id].options.fixed.y=true;}}}}},{key:'_restoreFrozenNodes',value:function _restoreFrozenNodes(){var nodes=this.body.nodes;for(var id in nodes){if(nodes.hasOwnProperty(id)){if(this.freezeCache[id]!==undefined){nodes[id].options.fixed.x=this.freezeCache[id].x;nodes[id].options.fixed.y=this.freezeCache[id].y;}}}
this.freezeCache={};}},{key:'stabilize',value:function stabilize(){var _this3=this;var iterations=arguments[0]===undefined?this.options.stabilization.iterations:arguments[0];if(typeof iterations!=='number'){console.log('The stabilize method needs a numeric amount of iterations. Switching to default: ',this.options.stabilization.iterations);iterations=this.options.stabilization.iterations;}
this.body.emitter.emit('_resizeNodes');this.stopSimulation();this.stabilized=false;this.body.emitter.emit('_blockRedrawRequests');this.targetIterations=iterations;if(this.options.stabilization.onlyDynamicEdges===true){this._freezeNodes();}
this.stabilizationIterations=0;setTimeout(function(){return _this3._stabilizationBatch();},0);}},{key:'_stabilizationBatch',value:function _stabilizationBatch(){var count=0;while(this.stabilized===false&&count<this.options.stabilization.updateInterval&&this.stabilizationIterations<this.targetIterations){this.physicsTick();this.stabilizationIterations++;count++;}
if(this.stabilized===false&&this.stabilizationIterations<this.targetIterations){this.body.emitter.emit('stabilizationProgress',{iterations:this.stabilizationIterations,total:this.targetIterations});setTimeout(this._stabilizationBatch.bind(this),0);}else{this._finalizeStabilization();}}},{key:'_finalizeStabilization',value:function _finalizeStabilization(){this.body.emitter.emit('_allowRedrawRequests');if(this.options.stabilization.fit===true){this.body.emitter.emit('fit');}
if(this.options.stabilization.onlyDynamicEdges===true){this._restoreFrozenNodes();}
this.body.emitter.emit('stabilizationIterationsDone');this.body.emitter.emit('_requestRedraw');if(this.stabilized===true){this._emitStabilized();}else{this.startSimulation();}
this.ready=true;}}]);return PhysicsEngine;})();exports['default']=PhysicsEngine;module.exports=exports['default'];},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var BarnesHutSolver=(function(){function BarnesHutSolver(body,physicsBody,options){_classCallCheck(this,BarnesHutSolver);this.body=body;this.physicsBody=physicsBody;this.barnesHutTree;this.setOptions(options);this.randomSeed=5;}
_createClass(BarnesHutSolver,[{key:"setOptions",value:function setOptions(options){this.options=options;this.thetaInversed=1/this.options.theta;this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap));}},{key:"seededRandom",value:function seededRandom(){var x=Math.sin(this.randomSeed++)*10000;return x-Math.floor(x);}},{key:"solve",value:function solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var node=undefined;var nodes=this.body.nodes;var nodeIndices=this.physicsBody.physicsNodeIndices;var nodeCount=nodeIndices.length;var barnesHutTree=this._formBarnesHutTree(nodes,nodeIndices);this.barnesHutTree=barnesHutTree;for(var i=0;i<nodeCount;i++){node=nodes[nodeIndices[i]];if(node.options.mass>0){this._getForceContribution(barnesHutTree.root.children.NW,node);this._getForceContribution(barnesHutTree.root.children.NE,node);this._getForceContribution(barnesHutTree.root.children.SW,node);this._getForceContribution(barnesHutTree.root.children.SE,node);}}}}},{key:"_getForceContribution",value:function _getForceContribution(parentBranch,node){if(parentBranch.childrenCount>0){var dx=undefined,dy=undefined,distance=undefined;dx=parentBranch.centerOfMass.x-node.x;dy=parentBranch.centerOfMass.y-node.y;distance=Math.sqrt(dx*dx+dy*dy);if(distance*parentBranch.calcSize>this.thetaInversed){this._calculateForces(distance,dx,dy,node,parentBranch);}else{if(parentBranch.childrenCount===4){this._getForceContribution(parentBranch.children.NW,node);this._getForceContribution(parentBranch.children.NE,node);this._getForceContribution(parentBranch.children.SW,node);this._getForceContribution(parentBranch.children.SE,node);}else{if(parentBranch.children.data.id!=node.id){this._calculateForces(distance,dx,dy,node,parentBranch);}}}}}},{key:"_calculateForces",value:function _calculateForces(distance,dx,dy,node,parentBranch){if(distance===0){distance=0.1;dx=distance;}
if(this.overlapAvoidanceFactor<1){distance=Math.max(0.1+this.overlapAvoidanceFactor*node.shape.radius,distance-node.shape.radius);}
var gravityForce=this.options.gravitationalConstant*parentBranch.mass*node.options.mass/Math.pow(distance,3);var fx=dx*gravityForce;var fy=dy*gravityForce;this.physicsBody.forces[node.id].x+=fx;this.physicsBody.forces[node.id].y+=fy;}},{key:"_formBarnesHutTree",value:function _formBarnesHutTree(nodes,nodeIndices){var node=undefined;var nodeCount=nodeIndices.length;var minX=nodes[nodeIndices[0]].x;var minY=nodes[nodeIndices[0]].y;var maxX=nodes[nodeIndices[0]].x;var maxY=nodes[nodeIndices[0]].y;for(var i=1;i<nodeCount;i++){var x=nodes[nodeIndices[i]].x;var y=nodes[nodeIndices[i]].y;if(nodes[nodeIndices[i]].options.mass>0){if(x<minX){minX=x;}
if(x>maxX){maxX=x;}
if(y<minY){minY=y;}
if(y>maxY){maxY=y;}}}
var sizeDiff=Math.abs(maxX-minX)-Math.abs(maxY-minY);if(sizeDiff>0){minY-=0.5*sizeDiff;maxY+=0.5*sizeDiff;}
else{minX+=0.5*sizeDiff;maxX-=0.5*sizeDiff;}
var minimumTreeSize=0.00001;var rootSize=Math.max(minimumTreeSize,Math.abs(maxX-minX));var halfRootSize=0.5*rootSize;var centerX=0.5*(minX+maxX),centerY=0.5*(minY+maxY);var barnesHutTree={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:centerX-halfRootSize,maxX:centerX+halfRootSize,minY:centerY-halfRootSize,maxY:centerY+halfRootSize},size:rootSize,calcSize:1/rootSize,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(barnesHutTree.root);for(var i=0;i<nodeCount;i++){node=nodes[nodeIndices[i]];if(node.options.mass>0){this._placeInTree(barnesHutTree.root,node);}}
return barnesHutTree;}},{key:"_updateBranchMass",value:function _updateBranchMass(parentBranch,node){var totalMass=parentBranch.mass+node.options.mass;var totalMassInv=1/totalMass;parentBranch.centerOfMass.x=parentBranch.centerOfMass.x*parentBranch.mass+node.x*node.options.mass;parentBranch.centerOfMass.x*=totalMassInv;parentBranch.centerOfMass.y=parentBranch.centerOfMass.y*parentBranch.mass+node.y*node.options.mass;parentBranch.centerOfMass.y*=totalMassInv;parentBranch.mass=totalMass;var biggestSize=Math.max(Math.max(node.height,node.radius),node.width);parentBranch.maxWidth=parentBranch.maxWidth<biggestSize?biggestSize:parentBranch.maxWidth;}},{key:"_placeInTree",value:function _placeInTree(parentBranch,node,skipMassUpdate){if(skipMassUpdate!=true||skipMassUpdate===undefined){this._updateBranchMass(parentBranch,node);}
if(parentBranch.children.NW.range.maxX>node.x){if(parentBranch.children.NW.range.maxY>node.y){this._placeInRegion(parentBranch,node,"NW");}else{this._placeInRegion(parentBranch,node,"SW");}}else{if(parentBranch.children.NW.range.maxY>node.y){this._placeInRegion(parentBranch,node,"NE");}else{this._placeInRegion(parentBranch,node,"SE");}}}},{key:"_placeInRegion",value:function _placeInRegion(parentBranch,node,region){switch(parentBranch.children[region].childrenCount){case 0:parentBranch.children[region].children.data=node;parentBranch.children[region].childrenCount=1;this._updateBranchMass(parentBranch.children[region],node);break;case 1:if(parentBranch.children[region].children.data.x===node.x&&parentBranch.children[region].children.data.y===node.y){node.x+=this.seededRandom();node.y+=this.seededRandom();}else{this._splitBranch(parentBranch.children[region]);this._placeInTree(parentBranch.children[region],node);}
break;case 4:this._placeInTree(parentBranch.children[region],node);break;}}},{key:"_splitBranch",value:function _splitBranch(parentBranch){var containedNode=null;if(parentBranch.childrenCount===1){containedNode=parentBranch.children.data;parentBranch.mass=0;parentBranch.centerOfMass.x=0;parentBranch.centerOfMass.y=0;}
parentBranch.childrenCount=4;parentBranch.children.data=null;this._insertRegion(parentBranch,"NW");this._insertRegion(parentBranch,"NE");this._insertRegion(parentBranch,"SW");this._insertRegion(parentBranch,"SE");if(containedNode!=null){this._placeInTree(parentBranch,containedNode);}}},{key:"_insertRegion",value:function _insertRegion(parentBranch,region){var minX=undefined,maxX=undefined,minY=undefined,maxY=undefined;var childSize=0.5*parentBranch.size;switch(region){case"NW":minX=parentBranch.range.minX;maxX=parentBranch.range.minX+childSize;minY=parentBranch.range.minY;maxY=parentBranch.range.minY+childSize;break;case"NE":minX=parentBranch.range.minX+childSize;maxX=parentBranch.range.maxX;minY=parentBranch.range.minY;maxY=parentBranch.range.minY+childSize;break;case"SW":minX=parentBranch.range.minX;maxX=parentBranch.range.minX+childSize;minY=parentBranch.range.minY+childSize;maxY=parentBranch.range.maxY;break;case"SE":minX=parentBranch.range.minX+childSize;maxX=parentBranch.range.maxX;minY=parentBranch.range.minY+childSize;maxY=parentBranch.range.maxY;break;}
parentBranch.children[region]={centerOfMass:{x:0,y:0},mass:0,range:{minX:minX,maxX:maxX,minY:minY,maxY:maxY},size:0.5*parentBranch.size,calcSize:2*parentBranch.calcSize,children:{data:null},maxWidth:0,level:parentBranch.level+1,childrenCount:0};}},{key:"_debug",value:function _debug(ctx,color){if(this.barnesHutTree!==undefined){ctx.lineWidth=1;this._drawBranch(this.barnesHutTree.root,ctx,color);}}},{key:"_drawBranch",value:function _drawBranch(branch,ctx,color){if(color===undefined){color="#FF0000";}
if(branch.childrenCount===4){this._drawBranch(branch.children.NW,ctx);this._drawBranch(branch.children.NE,ctx);this._drawBranch(branch.children.SE,ctx);this._drawBranch(branch.children.SW,ctx);}
ctx.strokeStyle=color;ctx.beginPath();ctx.moveTo(branch.range.minX,branch.range.minY);ctx.lineTo(branch.range.maxX,branch.range.minY);ctx.stroke();ctx.beginPath();ctx.moveTo(branch.range.maxX,branch.range.minY);ctx.lineTo(branch.range.maxX,branch.range.maxY);ctx.stroke();ctx.beginPath();ctx.moveTo(branch.range.maxX,branch.range.maxY);ctx.lineTo(branch.range.minX,branch.range.maxY);ctx.stroke();ctx.beginPath();ctx.moveTo(branch.range.minX,branch.range.maxY);ctx.lineTo(branch.range.minX,branch.range.minY);ctx.stroke();}}]);return BarnesHutSolver;})();exports["default"]=BarnesHutSolver;module.exports=exports["default"];},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var RepulsionSolver=(function(){function RepulsionSolver(body,physicsBody,options){_classCallCheck(this,RepulsionSolver);this.body=body;this.physicsBody=physicsBody;this.setOptions(options);}
_createClass(RepulsionSolver,[{key:"setOptions",value:function setOptions(options){this.options=options;}},{key:"solve",value:function solve(){var dx,dy,distance,fx,fy,repulsingForce,node1,node2;var nodes=this.body.nodes;var nodeIndices=this.physicsBody.physicsNodeIndices;var forces=this.physicsBody.forces;var nodeDistance=this.options.nodeDistance;var a=-2/3/nodeDistance;var b=4/3;for(var i=0;i<nodeIndices.length-1;i++){node1=nodes[nodeIndices[i]];for(var j=i+1;j<nodeIndices.length;j++){node2=nodes[nodeIndices[j]];dx=node2.x-node1.x;dy=node2.y-node1.y;distance=Math.sqrt(dx*dx+dy*dy);if(distance===0){distance=0.1*Math.random();dx=distance;}
if(distance<2*nodeDistance){if(distance<0.5*nodeDistance){repulsingForce=1;}else{repulsingForce=a*distance+b;}
repulsingForce=repulsingForce/distance;fx=dx*repulsingForce;fy=dy*repulsingForce;forces[node1.id].x-=fx;forces[node1.id].y-=fy;forces[node2.id].x+=fx;forces[node2.id].y+=fy;}}}}}]);return RepulsionSolver;})();exports["default"]=RepulsionSolver;module.exports=exports["default"];},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var HierarchicalRepulsionSolver=(function(){function HierarchicalRepulsionSolver(body,physicsBody,options){_classCallCheck(this,HierarchicalRepulsionSolver);this.body=body;this.physicsBody=physicsBody;this.setOptions(options);}
_createClass(HierarchicalRepulsionSolver,[{key:"setOptions",value:function setOptions(options){this.options=options;}},{key:"solve",value:function solve(){var dx,dy,distance,fx,fy,repulsingForce,node1,node2,i,j;var nodes=this.body.nodes;var nodeIndices=this.physicsBody.physicsNodeIndices;var forces=this.physicsBody.forces;var nodeDistance=this.options.nodeDistance;for(i=0;i<nodeIndices.length-1;i++){node1=nodes[nodeIndices[i]];for(j=i+1;j<nodeIndices.length;j++){node2=nodes[nodeIndices[j]];if(node1.level===node2.level){dx=node2.x-node1.x;dy=node2.y-node1.y;distance=Math.sqrt(dx*dx+dy*dy);var steepness=0.05;if(distance<nodeDistance){repulsingForce=-Math.pow(steepness*distance,2)+Math.pow(steepness*nodeDistance,2);}else{repulsingForce=0;}
if(distance===0){distance=0.01;}else{repulsingForce=repulsingForce/distance;}
fx=dx*repulsingForce;fy=dy*repulsingForce;forces[node1.id].x-=fx;forces[node1.id].y-=fy;forces[node2.id].x+=fx;forces[node2.id].y+=fy;}}}}}]);return HierarchicalRepulsionSolver;})();exports["default"]=HierarchicalRepulsionSolver;module.exports=exports["default"];},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var SpringSolver=(function(){function SpringSolver(body,physicsBody,options){_classCallCheck(this,SpringSolver);this.body=body;this.physicsBody=physicsBody;this.setOptions(options);}
_createClass(SpringSolver,[{key:"setOptions",value:function setOptions(options){this.options=options;}},{key:"solve",value:function solve(){var edgeLength=undefined,edge=undefined;var edgeIndices=this.physicsBody.physicsEdgeIndices;var edges=this.body.edges;var node1=undefined,node2=undefined,node3=undefined;for(var i=0;i<edgeIndices.length;i++){edge=edges[edgeIndices[i]];if(edge.connected===true&&edge.toId!==edge.fromId){if(this.body.nodes[edge.toId]!==undefined&&this.body.nodes[edge.fromId]!==undefined){if(edge.edgeType.via!==undefined){edgeLength=edge.options.length===undefined?this.options.springLength:edge.options.length;node1=edge.to;node2=edge.edgeType.via;node3=edge.from;this._calculateSpringForce(node1,node2,0.5*edgeLength);this._calculateSpringForce(node2,node3,0.5*edgeLength);}else{edgeLength=edge.options.length===undefined?this.options.springLength*1.5:edge.options.length;this._calculateSpringForce(edge.from,edge.to,edgeLength);}}}}}},{key:"_calculateSpringForce",value:function _calculateSpringForce(node1,node2,edgeLength){var dx=node1.x-node2.x;var dy=node1.y-node2.y;var distance=Math.max(Math.sqrt(dx*dx+dy*dy),0.01);var springForce=this.options.springConstant*(edgeLength-distance)/distance;var fx=dx*springForce;var fy=dy*springForce;if(this.physicsBody.forces[node1.id]!==undefined){this.physicsBody.forces[node1.id].x+=fx;this.physicsBody.forces[node1.id].y+=fy;}
if(this.physicsBody.forces[node2.id]!==undefined){this.physicsBody.forces[node2.id].x-=fx;this.physicsBody.forces[node2.id].y-=fy;}}}]);return SpringSolver;})();exports["default"]=SpringSolver;module.exports=exports["default"];},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var HierarchicalSpringSolver=(function(){function HierarchicalSpringSolver(body,physicsBody,options){_classCallCheck(this,HierarchicalSpringSolver);this.body=body;this.physicsBody=physicsBody;this.setOptions(options);}
_createClass(HierarchicalSpringSolver,[{key:"setOptions",value:function setOptions(options){this.options=options;}},{key:"solve",value:function solve(){var edgeLength,edge;var dx,dy,fx,fy,springForce,distance;var edges=this.body.edges;var factor=0.5;var edgeIndices=this.physicsBody.physicsEdgeIndices;var nodeIndices=this.physicsBody.physicsNodeIndices;var forces=this.physicsBody.forces;for(var i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i];forces[nodeId].springFx=0;forces[nodeId].springFy=0;}
for(var i=0;i<edgeIndices.length;i++){edge=edges[edgeIndices[i]];if(edge.connected===true){edgeLength=edge.options.length===undefined?this.options.springLength:edge.options.length;dx=edge.from.x-edge.to.x;dy=edge.from.y-edge.to.y;distance=Math.sqrt(dx*dx+dy*dy);distance=distance===0?0.01:distance;springForce=this.options.springConstant*(edgeLength-distance)/distance;fx=dx*springForce;fy=dy*springForce;if(edge.to.level!=edge.from.level){if(forces[edge.toId]!==undefined){forces[edge.toId].springFx-=fx;forces[edge.toId].springFy-=fy;}
if(forces[edge.fromId]!==undefined){forces[edge.fromId].springFx+=fx;forces[edge.fromId].springFy+=fy;}}else{if(forces[edge.toId]!==undefined){forces[edge.toId].x-=factor*fx;forces[edge.toId].y-=factor*fy;}
if(forces[edge.fromId]!==undefined){forces[edge.fromId].x+=factor*fx;forces[edge.fromId].y+=factor*fy;}}}}
var springForce=1;var springFx,springFy;for(var i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i];springFx=Math.min(springForce,Math.max(-springForce,forces[nodeId].springFx));springFy=Math.min(springForce,Math.max(-springForce,forces[nodeId].springFy));forces[nodeId].x+=springFx;forces[nodeId].y+=springFy;}
var totalFx=0;var totalFy=0;for(var i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i];totalFx+=forces[nodeId].x;totalFy+=forces[nodeId].y;}
var correctionFx=totalFx/nodeIndices.length;var correctionFy=totalFy/nodeIndices.length;for(var i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i];forces[nodeId].x-=correctionFx;forces[nodeId].y-=correctionFy;}}}]);return HierarchicalSpringSolver;})();exports["default"]=HierarchicalSpringSolver;module.exports=exports["default"];},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var CentralGravitySolver=(function(){function CentralGravitySolver(body,physicsBody,options){_classCallCheck(this,CentralGravitySolver);this.body=body;this.physicsBody=physicsBody;this.setOptions(options);}
_createClass(CentralGravitySolver,[{key:"setOptions",value:function setOptions(options){this.options=options;}},{key:"solve",value:function solve(){var dx=undefined,dy=undefined,distance=undefined,node=undefined;var nodes=this.body.nodes;var nodeIndices=this.physicsBody.physicsNodeIndices;var forces=this.physicsBody.forces;for(var i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i];node=nodes[nodeId];dx=-node.x;dy=-node.y;distance=Math.sqrt(dx*dx+dy*dy);this._calculateForces(distance,dx,dy,forces,node);}}},{key:"_calculateForces",value:function _calculateForces(distance,dx,dy,forces,node){var gravityForce=distance===0?0:this.options.centralGravity/distance;forces[node.id].x=dx*gravityForce;forces[node.id].y=dy*gravityForce;}}]);return CentralGravitySolver;})();exports["default"]=CentralGravitySolver;module.exports=exports["default"];},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _BarnesHutSolver2=__webpack_require__(89);var _BarnesHutSolver3=_interopRequireDefault(_BarnesHutSolver2);var ForceAtlas2BasedRepulsionSolver=(function(_BarnesHutSolver){function ForceAtlas2BasedRepulsionSolver(body,physicsBody,options){_classCallCheck(this,ForceAtlas2BasedRepulsionSolver);_get(Object.getPrototypeOf(ForceAtlas2BasedRepulsionSolver.prototype),"constructor",this).call(this,body,physicsBody,options);}
_inherits(ForceAtlas2BasedRepulsionSolver,_BarnesHutSolver);_createClass(ForceAtlas2BasedRepulsionSolver,[{key:"_calculateForces",value:function _calculateForces(distance,dx,dy,node,parentBranch){if(distance===0){distance=0.1*Math.random();dx=distance;}
if(this.overlapAvoidanceFactor<1){distance=Math.max(0.1+this.overlapAvoidanceFactor*node.shape.radius,distance-node.shape.radius);}
var degree=node.edges.length+1;var gravityForce=this.options.gravitationalConstant*parentBranch.mass*node.options.mass*degree/Math.pow(distance,2);var fx=dx*gravityForce;var fy=dy*gravityForce;this.physicsBody.forces[node.id].x+=fx;this.physicsBody.forces[node.id].y+=fy;}}]);return ForceAtlas2BasedRepulsionSolver;})(_BarnesHutSolver3["default"]);exports["default"]=ForceAtlas2BasedRepulsionSolver;module.exports=exports["default"];},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _CentralGravitySolver2=__webpack_require__(94);var _CentralGravitySolver3=_interopRequireDefault(_CentralGravitySolver2);var ForceAtlas2BasedCentralGravitySolver=(function(_CentralGravitySolver){function ForceAtlas2BasedCentralGravitySolver(body,physicsBody,options){_classCallCheck(this,ForceAtlas2BasedCentralGravitySolver);_get(Object.getPrototypeOf(ForceAtlas2BasedCentralGravitySolver.prototype),"constructor",this).call(this,body,physicsBody,options);}
_inherits(ForceAtlas2BasedCentralGravitySolver,_CentralGravitySolver);_createClass(ForceAtlas2BasedCentralGravitySolver,[{key:"_calculateForces",value:function _calculateForces(distance,dx,dy,forces,node){if(distance>0){var degree=node.edges.length+1;var gravityForce=this.options.centralGravity*degree*node.options.mass;forces[node.id].x=dx*gravityForce;forces[node.id].y=dy*gravityForce;}}}]);return ForceAtlas2BasedCentralGravitySolver;})(_CentralGravitySolver3["default"]);exports["default"]=ForceAtlas2BasedCentralGravitySolver;module.exports=exports["default"];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _componentsNodesCluster=__webpack_require__(98);var _componentsNodesCluster2=_interopRequireDefault(_componentsNodesCluster);var util=__webpack_require__(1);var ClusterEngine=(function(){function ClusterEngine(body){var _this=this;_classCallCheck(this,ClusterEngine);this.body=body;this.clusteredNodes={};this.options={};this.defaultOptions={};util.extend(this.options,this.defaultOptions);this.body.emitter.on('_resetData',function(){_this.clusteredNodes={};});}
_createClass(ClusterEngine,[{key:'setOptions',value:function setOptions(options){if(options!==undefined){}}},{key:'clusterByHubsize',value:function clusterByHubsize(hubsize,options){if(hubsize===undefined){hubsize=this._getHubSize();}else if(typeof hubsize==='object'){options=this._checkOptions(hubsize);hubsize=this._getHubSize();}
var nodesToCluster=[];for(var i=0;i<this.body.nodeIndices.length;i++){var node=this.body.nodes[this.body.nodeIndices[i]];if(node.edges.length>=hubsize){nodesToCluster.push(node.id);}}
for(var i=0;i<nodesToCluster.length;i++){this.clusterByConnection(nodesToCluster[i],options,false);}
this.body.emitter.emit('_dataChanged');}},{key:'cluster',value:function cluster(){var options=arguments[0]===undefined?{}:arguments[0];var refreshData=arguments[1]===undefined?true:arguments[1];if(options.joinCondition===undefined){throw new Error('Cannot call clusterByNodeData without a joinCondition function in the options.');}
options=this._checkOptions(options);var childNodesObj={};var childEdgesObj={};for(var i=0;i<this.body.nodeIndices.length;i++){var nodeId=this.body.nodeIndices[i];var node=this.body.nodes[nodeId];var clonedOptions=this._cloneOptions(node);if(options.joinCondition(clonedOptions)===true){childNodesObj[nodeId]=this.body.nodes[nodeId];for(var _i=0;_i<node.edges.length;_i++){var edge=node.edges[_i];childEdgesObj[edge.id]=edge;}}}
this._cluster(childNodesObj,childEdgesObj,options,refreshData);}},{key:'clusterOutliers',value:function clusterOutliers(options){var refreshData=arguments[1]===undefined?true:arguments[1];options=this._checkOptions(options);var clusters=[];for(var i=0;i<this.body.nodeIndices.length;i++){var childNodesObj={};var childEdgesObj={};var nodeId=this.body.nodeIndices[i];var visibleEdges=0;var edge=undefined;for(var j=0;j<this.body.nodes[nodeId].edges.length;j++){if(this.body.nodes[nodeId].edges[j].options.hidden===false){visibleEdges++;edge=this.body.nodes[nodeId].edges[j];}}
if(visibleEdges===1){var childNodeId=this._getConnectedId(edge,nodeId);if(childNodeId!==nodeId){if(options.joinCondition===undefined){if(this._checkIfUsed(clusters,nodeId,edge.id)===false&&this._checkIfUsed(clusters,childNodeId,edge.id)===false){childEdgesObj[edge.id]=edge;childNodesObj[nodeId]=this.body.nodes[nodeId];childNodesObj[childNodeId]=this.body.nodes[childNodeId];}}else{var clonedOptions=this._cloneOptions(this.body.nodes[nodeId]);if(options.joinCondition(clonedOptions)===true&&this._checkIfUsed(clusters,nodeId,edge.id)===false){childEdgesObj[edge.id]=edge;childNodesObj[nodeId]=this.body.nodes[nodeId];}
clonedOptions=this._cloneOptions(this.body.nodes[childNodeId]);if(options.joinCondition(clonedOptions)===true&&this._checkIfUsed(clusters,nodeId,edge.id)===false){childEdgesObj[edge.id]=edge;childNodesObj[childNodeId]=this.body.nodes[childNodeId];}}
if(Object.keys(childNodesObj).length>0&&Object.keys(childEdgesObj).length>0){clusters.push({nodes:childNodesObj,edges:childEdgesObj});}}}}
for(var i=0;i<clusters.length;i++){this._cluster(clusters[i].nodes,clusters[i].edges,options,false);}
if(refreshData===true){this.body.emitter.emit('_dataChanged');}}},{key:'_checkIfUsed',value:function _checkIfUsed(clusters,nodeId,edgeId){for(var i=0;i<clusters.length;i++){var cluster=clusters[i];if(cluster.nodes[nodeId]!==undefined||cluster.edges[edgeId]!==undefined){return true;}}
return false;}},{key:'clusterByConnection',value:function clusterByConnection(nodeId,options){var refreshData=arguments[2]===undefined?true:arguments[2];if(nodeId===undefined){throw new Error('No nodeId supplied to clusterByConnection!');}
if(this.body.nodes[nodeId]===undefined){throw new Error('The nodeId given to clusterByConnection does not exist!');}
var node=this.body.nodes[nodeId];options=this._checkOptions(options,node);if(options.clusterNodeProperties.x===undefined){options.clusterNodeProperties.x=node.x;}
if(options.clusterNodeProperties.y===undefined){options.clusterNodeProperties.y=node.y;}
if(options.clusterNodeProperties.fixed===undefined){options.clusterNodeProperties.fixed={};options.clusterNodeProperties.fixed.x=node.options.fixed.x;options.clusterNodeProperties.fixed.y=node.options.fixed.y;}
var childNodesObj={};var childEdgesObj={};var parentNodeId=node.id;var parentClonedOptions=this._cloneOptions(node);childNodesObj[parentNodeId]=node;for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];var childNodeId=this._getConnectedId(edge,parentNodeId);if(childNodeId!==parentNodeId){if(options.joinCondition===undefined){childEdgesObj[edge.id]=edge;childNodesObj[childNodeId]=this.body.nodes[childNodeId];}else{var childClonedOptions=this._cloneOptions(this.body.nodes[childNodeId]);if(options.joinCondition(parentClonedOptions,childClonedOptions)===true){childEdgesObj[edge.id]=edge;childNodesObj[childNodeId]=this.body.nodes[childNodeId];}}}else{childEdgesObj[edge.id]=edge;}}
this._cluster(childNodesObj,childEdgesObj,options,refreshData);}},{key:'_cloneOptions',value:function _cloneOptions(item,type){var clonedOptions={};if(type===undefined||type==='node'){util.deepExtend(clonedOptions,item.options,true);clonedOptions.x=item.x;clonedOptions.y=item.y;clonedOptions.amountOfConnections=item.edges.length;}else{util.deepExtend(clonedOptions,item.options,true);}
return clonedOptions;}},{key:'_createClusterEdges',value:function _createClusterEdges(childNodesObj,childEdgesObj,newEdges,clusterNodeProperties,clusterEdgeProperties){var edge=undefined,childNodeId=undefined,childNode=undefined,toId=undefined,fromId=undefined,otherNodeId=undefined;var childKeys=Object.keys(childNodesObj);for(var i=0;i<childKeys.length;i++){childNodeId=childKeys[i];childNode=childNodesObj[childNodeId];for(var j=0;j<childNode.edges.length;j++){edge=childNode.edges[j];childEdgesObj[edge.id]=edge;if(edge.toId==childNodeId){toId=clusterNodeProperties.id;fromId=edge.fromId;otherNodeId=fromId;}else{toId=edge.toId;fromId=clusterNodeProperties.id;otherNodeId=toId;}
if(childNodesObj[otherNodeId]===undefined){var clonedOptions=this._cloneOptions(edge,'edge');util.deepExtend(clonedOptions,clusterEdgeProperties);clonedOptions.from=fromId;clonedOptions.to=toId;clonedOptions.id='clusterEdge:'+util.randomUUID();newEdges.push(this.body.functions.createEdge(clonedOptions));}}}}},{key:'_checkOptions',value:function _checkOptions(){var options=arguments[0]===undefined?{}:arguments[0];if(options.clusterEdgeProperties===undefined){options.clusterEdgeProperties={};}
if(options.clusterNodeProperties===undefined){options.clusterNodeProperties={};}
return options;}},{key:'_cluster',value:function _cluster(childNodesObj,childEdgesObj,options){var refreshData=arguments[3]===undefined?true:arguments[3];if(Object.keys(childNodesObj).length===0){return;}
var clusterNodeProperties=util.deepExtend({},options.clusterNodeProperties);if(options.processProperties!==undefined){var childNodesOptions=[];for(var nodeId in childNodesObj){var clonedOptions=this._cloneOptions(childNodesObj[nodeId]);childNodesOptions.push(clonedOptions);}
var childEdgesOptions=[];for(var edgeId in childEdgesObj){var clonedOptions=this._cloneOptions(childEdgesObj[edgeId],'edge');childEdgesOptions.push(clonedOptions);}
clusterNodeProperties=options.processProperties(clusterNodeProperties,childNodesOptions,childEdgesOptions);if(!clusterNodeProperties){throw new Error('The processProperties function does not return properties!');}}
if(clusterNodeProperties.id===undefined){clusterNodeProperties.id='cluster:'+util.randomUUID();}
var clusterId=clusterNodeProperties.id;if(clusterNodeProperties.label===undefined){clusterNodeProperties.label='cluster';}
var pos=undefined;if(clusterNodeProperties.x===undefined){pos=this._getClusterPosition(childNodesObj);clusterNodeProperties.x=pos.x;}
if(clusterNodeProperties.y===undefined){if(pos===undefined){pos=this._getClusterPosition(childNodesObj);}
clusterNodeProperties.y=pos.y;}
clusterNodeProperties.id=clusterId;var clusterNode=this.body.functions.createNode(clusterNodeProperties,_componentsNodesCluster2['default']);clusterNode.isCluster=true;clusterNode.containedNodes=childNodesObj;clusterNode.containedEdges=childEdgesObj;clusterNode.clusterEdgeProperties=options.clusterEdgeProperties;this.body.nodes[clusterNodeProperties.id]=clusterNode;var newEdges=[];this._createClusterEdges(childNodesObj,childEdgesObj,newEdges,clusterNodeProperties,options.clusterEdgeProperties);for(var edgeId in childEdgesObj){if(childEdgesObj.hasOwnProperty(edgeId)){if(this.body.edges[edgeId]!==undefined){var edge=this.body.edges[edgeId];edge.togglePhysics(false);edge.options.hidden=true;}}}
for(var nodeId in childNodesObj){if(childNodesObj.hasOwnProperty(nodeId)){this.clusteredNodes[nodeId]={clusterId:clusterNodeProperties.id,node:this.body.nodes[nodeId]};this.body.nodes[nodeId].togglePhysics(false);this.body.nodes[nodeId].options.hidden=true;}}
for(var i=0;i<newEdges.length;i++){this.body.edges[newEdges[i].id]=newEdges[i];this.body.edges[newEdges[i].id].connect();}
clusterNodeProperties.id=undefined;if(refreshData===true){this.body.emitter.emit('_dataChanged');}}},{key:'isCluster',value:function isCluster(nodeId){if(this.body.nodes[nodeId]!==undefined){return this.body.nodes[nodeId].isCluster===true;}else{console.log('Node does not exist.');return false;}}},{key:'_getClusterPosition',value:function _getClusterPosition(childNodesObj){var childKeys=Object.keys(childNodesObj);var minX=childNodesObj[childKeys[0]].x;var maxX=childNodesObj[childKeys[0]].x;var minY=childNodesObj[childKeys[0]].y;var maxY=childNodesObj[childKeys[0]].y;var node=undefined;for(var i=1;i<childKeys.length;i++){node=childNodesObj[childKeys[i]];minX=node.x<minX?node.x:minX;maxX=node.x>maxX?node.x:maxX;minY=node.y<minY?node.y:minY;maxY=node.y>maxY?node.y:maxY;}
return{x:0.5*(minX+maxX),y:0.5*(minY+maxY)};}},{key:'openCluster',value:function openCluster(clusterNodeId,options){var refreshData=arguments[2]===undefined?true:arguments[2];if(clusterNodeId===undefined){throw new Error('No clusterNodeId supplied to openCluster.');}
if(this.body.nodes[clusterNodeId]===undefined){throw new Error('The clusterNodeId supplied to openCluster does not exist.');}
if(this.body.nodes[clusterNodeId].containedNodes===undefined){console.log('The node:'+clusterNodeId+' is not a cluster.');return;}
var clusterNode=this.body.nodes[clusterNodeId];var containedNodes=clusterNode.containedNodes;var containedEdges=clusterNode.containedEdges;if(options!==undefined&&options.releaseFunction!==undefined&&typeof options.releaseFunction==='function'){var positions={};var clusterPosition={x:clusterNode.x,y:clusterNode.y};for(var nodeId in containedNodes){if(containedNodes.hasOwnProperty(nodeId)){var containedNode=this.body.nodes[nodeId];positions[nodeId]={x:containedNode.x,y:containedNode.y};}}
var newPositions=options.releaseFunction(clusterPosition,positions);for(var nodeId in containedNodes){if(containedNodes.hasOwnProperty(nodeId)){var containedNode=this.body.nodes[nodeId];if(newPositions[nodeId]!==undefined){containedNode.x=newPositions[nodeId].x||clusterNode.x;containedNode.y=newPositions[nodeId].y||clusterNode.y;}}}}else{for(var nodeId in containedNodes){if(containedNodes.hasOwnProperty(nodeId)){var containedNode=this.body.nodes[nodeId];containedNode=containedNodes[nodeId];containedNode.x=clusterNode.x;containedNode.y=clusterNode.y;}}}
for(var nodeId in containedNodes){if(containedNodes.hasOwnProperty(nodeId)){var containedNode=this.body.nodes[nodeId];containedNode.vx=clusterNode.vx;containedNode.vy=clusterNode.vy;containedNode.options.hidden=false;containedNode.togglePhysics(true);delete this.clusteredNodes[nodeId];}}
for(var edgeId in containedEdges){if(containedEdges.hasOwnProperty(edgeId)){var edge=containedEdges[edgeId];if(this.body.nodes[edge.fromId]===undefined||this.body.nodes[edge.toId]===undefined){edge.edgeType.cleanup();edge.disconnect();delete this.body.edges[edgeId];}else{if(this.clusteredNodes[edge.fromId]!==undefined||this.clusteredNodes[edge.toId]!==undefined){var fromId=undefined,toId=undefined;var clusteredNode=this.clusteredNodes[edge.fromId]||this.clusteredNodes[edge.toId];var clusterId=clusteredNode.clusterId;var _clusterNode=this.body.nodes[clusterId];_clusterNode.containedEdges[edgeId]=edge;if(this.clusteredNodes[edge.fromId]!==undefined){fromId=clusterId;toId=edge.toId;}else{fromId=edge.fromId;toId=clusterId;}
if(this.body.nodes[fromId].options.hidden!==true&&this.body.nodes[toId].options.hidden!==true){var clonedOptions=this._cloneOptions(edge,'edge');var id='clusterEdge:'+util.randomUUID();util.deepExtend(clonedOptions,_clusterNode.clusterEdgeProperties);util.deepExtend(clonedOptions,{from:fromId,to:toId,hidden:false,physics:true,id:id});var newEdge=this.body.functions.createEdge(clonedOptions);this.body.edges[id]=newEdge;this.body.edges[id].connect();}}else{edge.options.hidden=false;edge.togglePhysics(true);}}}}
for(var i=0;i<clusterNode.edges.length;i++){var edgeId=clusterNode.edges[i].id;this.body.edges[edgeId].edgeType.cleanup();this.body.edges[edgeId].disconnect();delete this.body.edges[edgeId];}
delete this.body.nodes[clusterNodeId];if(refreshData===true){this.body.emitter.emit('_dataChanged');}}},{key:'getNodesInCluster',value:function getNodesInCluster(clusterId){var nodesArray=[];if(this.isCluster(clusterId)===true){var containedNodes=this.body.nodes[clusterId].containedNodes;for(var nodeId in containedNodes){if(containedNodes.hasOwnProperty(nodeId)){nodesArray.push(nodeId);}}}
return nodesArray;}},{key:'findNode',value:function findNode(nodeId){var stack=[];var max=100;var counter=0;while(this.clusteredNodes[nodeId]!==undefined&&counter<max){stack.push(this.clusteredNodes[nodeId].node);nodeId=this.clusteredNodes[nodeId].clusterId;counter++;}
stack.push(this.body.nodes[nodeId]);return stack;}},{key:'_getConnectedId',value:function _getConnectedId(edge,nodeId){if(edge.toId!=nodeId){return edge.toId;}else if(edge.fromId!=nodeId){return edge.fromId;}else{return edge.fromId;}}},{key:'_getHubSize',value:function _getHubSize(){var average=0;var averageSquared=0;var hubCounter=0;var largestHub=0;for(var i=0;i<this.body.nodeIndices.length;i++){var node=this.body.nodes[this.body.nodeIndices[i]];if(node.edges.length>largestHub){largestHub=node.edges.length;}
average+=node.edges.length;averageSquared+=Math.pow(node.edges.length,2);hubCounter+=1;}
average=average/hubCounter;averageSquared=averageSquared/hubCounter;var letiance=averageSquared-Math.pow(average,2);var standardDeviation=Math.sqrt(letiance);var hubThreshold=Math.floor(average+2*standardDeviation);if(hubThreshold>largestHub){hubThreshold=largestHub;}
return hubThreshold;}}]);return ClusterEngine;})();exports['default']=ClusterEngine;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function;}}else if('value'in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)subClass.__proto__=superClass;}
var _Node2=__webpack_require__(62);var _Node3=_interopRequireDefault(_Node2);var Cluster=(function(_Node){function Cluster(options,body,imagelist,grouplist,globalOptions){_classCallCheck(this,Cluster);_get(Object.getPrototypeOf(Cluster.prototype),'constructor',this).call(this,options,body,imagelist,grouplist,globalOptions);this.isCluster=true;this.containedNodes={};this.containedEdges={};}
_inherits(Cluster,_Node);return Cluster;})(_Node3['default']);exports['default']=Cluster;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
if(typeof window!=='undefined'){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;}
var util=__webpack_require__(1);var CanvasRenderer=(function(){function CanvasRenderer(body,canvas){_classCallCheck(this,CanvasRenderer);this.body=body;this.canvas=canvas;this.redrawRequested=false;this.renderTimer=undefined;this.requiresTimeout=true;this.renderingActive=false;this.renderRequests=0;this.pixelRatio=undefined;this.allowRedrawRequests=true;this.dragging=false;this.options={};this.defaultOptions={hideEdgesOnDrag:false,hideNodesOnDrag:false};util.extend(this.options,this.defaultOptions);this._determineBrowserMethod();this.bindEventListeners();}
_createClass(CanvasRenderer,[{key:'bindEventListeners',value:function bindEventListeners(){var _this=this;this.body.emitter.on('dragStart',function(){_this.dragging=true;});this.body.emitter.on('dragEnd',function(){return _this.dragging=false;});this.body.emitter.on('_resizeNodes',function(){return _this._resizeNodes();});this.body.emitter.on('_redraw',function(){if(_this.renderingActive===false){_this._redraw();}});this.body.emitter.on('_blockRedrawRequests',function(){_this.allowRedrawRequests=false;});this.body.emitter.on('_allowRedrawRequests',function(){_this.allowRedrawRequests=true;});this.body.emitter.on('_requestRedraw',this._requestRedraw.bind(this));this.body.emitter.on('_startRendering',function(){_this.renderRequests+=1;_this.renderingActive=true;_this._startRendering();});this.body.emitter.on('_stopRendering',function(){_this.renderRequests-=1;_this.renderingActive=_this.renderRequests>0;_this.renderTimer=undefined;});this.body.emitter.on('destroy',function(){_this.renderRequests=0;_this.renderingActive=false;if(_this.requiresTimeout===true){clearTimeout(_this.renderTimer);}else{cancelAnimationFrame(_this.renderTimer);}
_this.body.emitter.off();});}},{key:'setOptions',value:function setOptions(options){if(options!==undefined){var fields=['hideEdgesOnDrag','hideNodesOnDrag'];util.selectiveDeepExtend(fields,this.options,options);}}},{key:'_startRendering',value:function _startRendering(){if(this.renderingActive===true){if(this.renderTimer===undefined){if(this.requiresTimeout===true){this.renderTimer=window.setTimeout(this._renderStep.bind(this),this.simulationInterval);}else{this.renderTimer=window.requestAnimationFrame(this._renderStep.bind(this));}}}}},{key:'_renderStep',value:function _renderStep(){if(this.renderingActive===true){this.renderTimer=undefined;if(this.requiresTimeout===true){this._startRendering();}
this._redraw();if(this.requiresTimeout===false){this._startRendering();}}}},{key:'redraw',value:function redraw(){this.body.emitter.emit('setSize');this._redraw();}},{key:'_requestRedraw',value:function _requestRedraw(){var _this2=this;if(this.redrawRequested!==true&&this.renderingActive===false&&this.allowRedrawRequests===true){this.redrawRequested=true;if(this.requiresTimeout===true){window.setTimeout(function(){_this2._redraw(false);},0);}else{window.requestAnimationFrame(function(){_this2._redraw(false);});}}}},{key:'_redraw',value:function _redraw(){var hidden=arguments[0]===undefined?false:arguments[0];this.body.emitter.emit('initRedraw');this.redrawRequested=false;var ctx=this.canvas.frame.canvas.getContext('2d');if(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0){this.canvas.setSize();}
if(this.pixelRatio===undefined){this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1);}
ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var w=this.canvas.frame.canvas.clientWidth;var h=this.canvas.frame.canvas.clientHeight;ctx.clearRect(0,0,w,h);ctx.save();ctx.translate(this.body.view.translation.x,this.body.view.translation.y);ctx.scale(this.body.view.scale,this.body.view.scale);ctx.beginPath();this.body.emitter.emit('beforeDrawing',ctx);ctx.closePath();if(hidden===false){if(this.dragging===false||this.dragging===true&&this.options.hideEdgesOnDrag===false){this._drawEdges(ctx);}}
if(this.dragging===false||this.dragging===true&&this.options.hideNodesOnDrag===false){this._drawNodes(ctx,hidden);}
if(this.controlNodesActive===true){this._drawControlNodes(ctx);}
ctx.beginPath();this.body.emitter.emit('afterDrawing',ctx);ctx.closePath();ctx.restore();if(hidden===true){ctx.clearRect(0,0,w,h);}}},{key:'_resizeNodes',value:function _resizeNodes(){var ctx=this.canvas.frame.canvas.getContext('2d');if(this.pixelRatio===undefined){this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1);}
ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);ctx.save();ctx.translate(this.body.view.translation.x,this.body.view.translation.y);ctx.scale(this.body.view.scale,this.body.view.scale);var nodes=this.body.nodes;var node=undefined;for(var nodeId in nodes){if(nodes.hasOwnProperty(nodeId)){node=nodes[nodeId];node.resize(ctx);node.updateBoundingBox(ctx);}}
ctx.restore();}},{key:'_drawNodes',value:function _drawNodes(ctx){var alwaysShow=arguments[1]===undefined?false:arguments[1];var nodes=this.body.nodes;var nodeIndices=this.body.nodeIndices;var node=undefined;var selected=[];var margin=20;var topLeft=this.canvas.DOMtoCanvas({x:-margin,y:-margin});var bottomRight=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+margin,y:this.canvas.frame.canvas.clientHeight+margin});var viewableArea={top:topLeft.y,left:topLeft.x,bottom:bottomRight.y,right:bottomRight.x};for(var i=0;i<nodeIndices.length;i++){node=nodes[nodeIndices[i]];if(node.isSelected()){selected.push(nodeIndices[i]);}else{if(alwaysShow===true){node.draw(ctx);}else if(node.isBoundingBoxOverlappingWith(viewableArea)===true){node.draw(ctx);}else{node.updateBoundingBox(ctx);}}}
for(var i=0;i<selected.length;i++){node=nodes[selected[i]];node.draw(ctx);}}},{key:'_drawEdges',value:function _drawEdges(ctx){var edges=this.body.edges;var edgeIndices=this.body.edgeIndices;var edge=undefined;for(var i=0;i<edgeIndices.length;i++){edge=edges[edgeIndices[i]];if(edge.connected===true){edge.draw(ctx);}}}},{key:'_drawControlNodes',value:function _drawControlNodes(ctx){var edges=this.body.edges;var edgeIndices=this.body.edgeIndices;var edge=undefined;for(var i=0;i<edgeIndices.length;i++){edge=edges[edgeIndices[i]];edge._drawControlNodes(ctx);}}},{key:'_determineBrowserMethod',value:function _determineBrowserMethod(){if(typeof window!=='undefined'){var browserType=navigator.userAgent.toLowerCase();this.requiresTimeout=false;if(browserType.indexOf('msie 9.0')!=-1){this.requiresTimeout=true;}else if(browserType.indexOf('safari')!=-1){if(browserType.indexOf('chrome')<=-1){this.requiresTimeout=true;}}}else{this.requiresTimeout=true;}}}]);return CanvasRenderer;})();exports['default']=CanvasRenderer;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var Hammer=__webpack_require__(23);var hammerUtil=__webpack_require__(28);var util=__webpack_require__(1);var Canvas=(function(){function Canvas(body){_classCallCheck(this,Canvas);this.body=body;this.pixelRatio=1;this.resizeTimer=undefined;this.resizeFunction=this._onResize.bind(this);this.options={};this.defaultOptions={autoResize:true,height:'100%',width:'100%'};util.extend(this.options,this.defaultOptions);this.bindEventListeners();}
_createClass(Canvas,[{key:'bindEventListeners',value:function bindEventListeners(){var _this=this;this.body.emitter.once('resize',function(obj){if(obj.width!==0){_this.body.view.translation.x=obj.width*0.5;}
if(obj.height!==0){_this.body.view.translation.y=obj.height*0.5;}});this.body.emitter.on('setSize',this.setSize.bind(this));this.body.emitter.on('destroy',function(){_this.hammerFrame.destroy();_this.hammer.destroy();_this._cleanUp();});}},{key:'setOptions',value:function setOptions(options){var _this2=this;if(options!==undefined){var fields=['width','height','autoResize'];util.selectiveDeepExtend(fields,this.options,options);}
if(this.options.autoResize===true){this._cleanUp();this.resizeTimer=setInterval(function(){var changed=_this2.setSize();if(changed===true){_this2.body.emitter.emit('_requestRedraw');}},1000);this.resizeFunction=this._onResize.bind(this);util.addEventListener(window,'resize',this.resizeFunction);}}},{key:'_cleanUp',value:function _cleanUp(){if(this.resizeTimer!==undefined){clearInterval(this.resizeTimer);}
util.removeEventListener(window,'resize',this.resizeFunction);this.resizeFunction=undefined;}},{key:'_onResize',value:function _onResize(){this.setSize();this.body.emitter.emit('_redraw');}},{key:'_prepareValue',value:function _prepareValue(value){if(typeof value==='number'){return value+'px';}else if(typeof value==='string'){if(value.indexOf('%')!==-1||value.indexOf('px')!==-1){return value;}else if(value.indexOf('%')===-1){return value+'px';}}
throw new Error('Could not use the value supplie for width or height:'+value);}},{key:'_create',value:function _create(){while(this.body.container.hasChildNodes()){this.body.container.removeChild(this.body.container.firstChild);}
this.frame=document.createElement('div');this.frame.className='vis-network';this.frame.style.position='relative';this.frame.style.overflow='hidden';this.frame.tabIndex=900;this.frame.canvas=document.createElement('canvas');this.frame.canvas.style.position='relative';this.frame.appendChild(this.frame.canvas);if(!this.frame.canvas.getContext){var noCanvas=document.createElement('DIV');noCanvas.style.color='red';noCanvas.style.fontWeight='bold';noCanvas.style.padding='10px';noCanvas.innerHTML='Error: your browser does not support HTML canvas';this.frame.canvas.appendChild(noCanvas);}else{var ctx=this.frame.canvas.getContext('2d');this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1);this.frame.canvas.getContext('2d').setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);}
this.body.container.appendChild(this.frame);this.body.view.scale=1;this.body.view.translation={x:0.5*this.frame.canvas.clientWidth,y:0.5*this.frame.canvas.clientHeight};this._bindHammer();}},{key:'_bindHammer',value:function _bindHammer(){var _this3=this;if(this.hammer!==undefined){this.hammer.destroy();}
this.drag={};this.pinch={};this.hammer=new Hammer(this.frame.canvas);this.hammer.get('pinch').set({enable:true});hammerUtil.onTouch(this.hammer,function(event){_this3.body.eventListeners.onTouch(event);});this.hammer.on('tap',function(event){_this3.body.eventListeners.onTap(event);});this.hammer.on('doubletap',function(event){_this3.body.eventListeners.onDoubleTap(event);});this.hammer.on('press',function(event){_this3.body.eventListeners.onHold(event);});this.hammer.on('panstart',function(event){_this3.body.eventListeners.onDragStart(event);});this.hammer.on('panmove',function(event){_this3.body.eventListeners.onDrag(event);});this.hammer.on('panend',function(event){_this3.body.eventListeners.onDragEnd(event);});this.hammer.on('pinch',function(event){_this3.body.eventListeners.onPinch(event);});this.frame.canvas.addEventListener('mousewheel',function(event){_this3.body.eventListeners.onMouseWheel(event);});this.frame.canvas.addEventListener('DOMMouseScroll',function(event){_this3.body.eventListeners.onMouseWheel(event);});this.frame.canvas.addEventListener('mousemove',function(event){_this3.body.eventListeners.onMouseMove(event);});this.frame.canvas.addEventListener('contextmenu',function(event){_this3.body.eventListeners.onContext(event);});this.hammerFrame=new Hammer(this.frame);hammerUtil.onRelease(this.hammerFrame,function(event){_this3.body.eventListeners.onRelease(event);});}},{key:'setSize',value:function setSize(){var width=arguments[0]===undefined?this.options.width:arguments[0];var height=arguments[1]===undefined?this.options.height:arguments[1];width=this._prepareValue(width);height=this._prepareValue(height);var emitEvent=false;var oldWidth=this.frame.canvas.width;var oldHeight=this.frame.canvas.height;if(width!=this.options.width||height!=this.options.height||this.frame.style.width!=width||this.frame.style.height!=height){this.frame.style.width=width;this.frame.style.height=height;this.frame.canvas.style.width='100%';this.frame.canvas.style.height='100%';this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio);this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.options.width=width;this.options.height=height;emitEvent=true;}else{if(this.frame.canvas.width!=Math.round(this.frame.canvas.clientWidth*this.pixelRatio)){this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio);emitEvent=true;}
if(this.frame.canvas.height!=Math.round(this.frame.canvas.clientHeight*this.pixelRatio)){this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);emitEvent=true;}}
if(emitEvent===true){this.body.emitter.emit('resize',{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(oldWidth/this.pixelRatio),oldHeight:Math.round(oldHeight/this.pixelRatio)});}
return emitEvent;}},{key:'_XconvertDOMtoCanvas',value:function _XconvertDOMtoCanvas(x){return(x-this.body.view.translation.x)/this.body.view.scale;}},{key:'_XconvertCanvasToDOM',value:function _XconvertCanvasToDOM(x){return x*this.body.view.scale+this.body.view.translation.x;}},{key:'_YconvertDOMtoCanvas',value:function _YconvertDOMtoCanvas(y){return(y-this.body.view.translation.y)/this.body.view.scale;}},{key:'_YconvertCanvasToDOM',value:function _YconvertCanvasToDOM(y){return y*this.body.view.scale+this.body.view.translation.y;}},{key:'canvasToDOM',value:function canvasToDOM(pos){return{x:this._XconvertCanvasToDOM(pos.x),y:this._YconvertCanvasToDOM(pos.y)};}},{key:'DOMtoCanvas',value:function DOMtoCanvas(pos){return{x:this._XconvertDOMtoCanvas(pos.x),y:this._YconvertDOMtoCanvas(pos.y)};}}]);return Canvas;})();exports['default']=Canvas;module.exports=exports['default'];},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var util=__webpack_require__(1);var View=(function(){function View(body,canvas){var _this=this;_classCallCheck(this,View);this.body=body;this.canvas=canvas;this.animationSpeed=1/this.renderRefreshRate;this.animationEasingFunction="easeInOutQuint";this.easingTime=0;this.sourceScale=0;this.targetScale=0;this.sourceTranslation=0;this.targetTranslation=0;this.lockedOnNodeId=undefined;this.lockedOnNodeOffset=undefined;this.touchTime=0;this.viewFunction=undefined;this.body.emitter.on("fit",this.fit.bind(this));this.body.emitter.on("animationFinished",function(){_this.body.emitter.emit("_stopRendering");});this.body.emitter.on("unlockNode",this.releaseNode.bind(this));}
_createClass(View,[{key:"setOptions",value:function setOptions(){var options=arguments[0]===undefined?{}:arguments[0];this.options=options;}},{key:"_getRange",value:function _getRange(){var specificNodes=arguments[0]===undefined?[]:arguments[0];var minY=1000000000,maxY=-1000000000,minX=1000000000,maxX=-1000000000,node;if(specificNodes.length>0){for(var i=0;i<specificNodes.length;i++){node=this.body.nodes[specificNodes[i]];if(minX>node.shape.boundingBox.left){minX=node.shape.boundingBox.left;}
if(maxX<node.shape.boundingBox.right){maxX=node.shape.boundingBox.right;}
if(minY>node.shape.boundingBox.top){minY=node.shape.boundingBox.top;}
if(maxY<node.shape.boundingBox.bottom){maxY=node.shape.boundingBox.bottom;}}}else{for(var nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){node=this.body.nodes[nodeId];if(minX>node.shape.boundingBox.left){minX=node.shape.boundingBox.left;}
if(maxX<node.shape.boundingBox.right){maxX=node.shape.boundingBox.right;}
if(minY>node.shape.boundingBox.top){minY=node.shape.boundingBox.top;}
if(maxY<node.shape.boundingBox.bottom){maxY=node.shape.boundingBox.bottom;}}}}
if(minX===1000000000&&maxX===-1000000000&&minY===1000000000&&maxY===-1000000000){minY=0,maxY=0,minX=0,maxX=0;}
return{minX:minX,maxX:maxX,minY:minY,maxY:maxY};}},{key:"_findCenter",value:function _findCenter(range){return{x:0.5*(range.maxX+range.minX),y:0.5*(range.maxY+range.minY)};}},{key:"fit",value:function fit(){var options=arguments[0]===undefined?{nodes:[]}:arguments[0];var initialZoom=arguments[1]===undefined?false:arguments[1];var range;var zoomLevel;if(initialZoom===true){var positionDefined=0;for(var nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){var node=this.body.nodes[nodeId];if(node.predefinedPosition===true){positionDefined+=1;}}}
if(positionDefined>0.5*this.body.nodeIndices.length){this.fit(options,false);return;}
range=this._getRange(options.nodes);var numberOfNodes=this.body.nodeIndices.length;zoomLevel=12.662/(numberOfNodes+7.4147)+0.0964822;var factor=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600);zoomLevel*=factor;}else{this.body.emitter.emit("_resizeNodes");range=this._getRange(options.nodes);var xDistance=Math.abs(range.maxX-range.minX)*1.1;var yDistance=Math.abs(range.maxY-range.minY)*1.1;var xZoomLevel=this.canvas.frame.canvas.clientWidth/xDistance;var yZoomLevel=this.canvas.frame.canvas.clientHeight/yDistance;zoomLevel=xZoomLevel<=yZoomLevel?xZoomLevel:yZoomLevel;}
if(zoomLevel>1){zoomLevel=1;}else if(zoomLevel===0){zoomLevel=1;}
var center=this._findCenter(range);var animationOptions={position:center,scale:zoomLevel,animation:options.animation};this.moveTo(animationOptions);}},{key:"focus",value:function focus(nodeId){var options=arguments[1]===undefined?{}:arguments[1];if(this.body.nodes[nodeId]!==undefined){var nodePosition={x:this.body.nodes[nodeId].x,y:this.body.nodes[nodeId].y};options.position=nodePosition;options.lockedOnNode=nodeId;this.moveTo(options);}else{console.log("Node: "+nodeId+" cannot be found.");}}},{key:"moveTo",value:function moveTo(options){if(options===undefined){options={};return;}
if(options.offset===undefined){options.offset={x:0,y:0};}
if(options.offset.x===undefined){options.offset.x=0;}
if(options.offset.y===undefined){options.offset.y=0;}
if(options.scale===undefined){options.scale=this.body.view.scale;}
if(options.position===undefined){options.position=this.getViewPosition();}
if(options.animation===undefined){options.animation={duration:0};}
if(options.animation===false){options.animation={duration:0};}
if(options.animation===true){options.animation={};}
if(options.animation.duration===undefined){options.animation.duration=1000;}
if(options.animation.easingFunction===undefined){options.animation.easingFunction="easeInOutQuad";}
this.animateView(options);}},{key:"animateView",value:function animateView(options){if(options===undefined){return;}
this.animationEasingFunction=options.animation.easingFunction;this.releaseNode();if(options.locked===true){this.lockedOnNodeId=options.lockedOnNode;this.lockedOnNodeOffset=options.offset;}
if(this.easingTime!=0){this._transitionRedraw(true);}
this.sourceScale=this.body.view.scale;this.sourceTranslation=this.body.view.translation;this.targetScale=options.scale;this.body.view.scale=this.targetScale;var viewCenter=this.canvas.DOMtoCanvas({x:0.5*this.canvas.frame.canvas.clientWidth,y:0.5*this.canvas.frame.canvas.clientHeight});var distanceFromCenter={x:viewCenter.x-options.position.x,y:viewCenter.y-options.position.y};this.targetTranslation={x:this.sourceTranslation.x+distanceFromCenter.x*this.targetScale+options.offset.x,y:this.sourceTranslation.y+distanceFromCenter.y*this.targetScale+options.offset.y};if(options.animation.duration===0){if(this.lockedOnNodeId!=undefined){this.viewFunction=this._lockedRedraw.bind(this);this.body.emitter.on("initRedraw",this.viewFunction);}else{this.body.view.scale=this.targetScale;this.body.view.translation=this.targetTranslation;this.body.emitter.emit("_requestRedraw");}}else{this.animationSpeed=1/(60*options.animation.duration*0.001)||1/60;this.animationEasingFunction=options.animation.easingFunction;this.viewFunction=this._transitionRedraw.bind(this);this.body.emitter.on("initRedraw",this.viewFunction);this.body.emitter.emit("_startRendering");}}},{key:"_lockedRedraw",value:function _lockedRedraw(){var nodePosition={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y};var viewCenter=this.DOMtoCanvas({x:0.5*this.frame.canvas.clientWidth,y:0.5*this.frame.canvas.clientHeight});var distanceFromCenter={x:viewCenter.x-nodePosition.x,y:viewCenter.y-nodePosition.y};var sourceTranslation=this.body.view.translation;var targetTranslation={x:sourceTranslation.x+distanceFromCenter.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:sourceTranslation.y+distanceFromCenter.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=targetTranslation;}},{key:"releaseNode",value:function releaseNode(){if(this.lockedOnNodeId!==undefined&&this.viewFunction!==undefined){this.body.emitter.off("initRedraw",this.viewFunction);this.lockedOnNodeId=undefined;this.lockedOnNodeOffset=undefined;}}},{key:"_transitionRedraw",value:function _transitionRedraw(){var finished=arguments[0]===undefined?false:arguments[0];this.easingTime+=this.animationSpeed;this.easingTime=finished===true?1:this.easingTime;var progress=util.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*progress;this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*progress,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*progress};if(this.easingTime>=1){this.body.emitter.off("initRedraw",this.viewFunction);this.easingTime=0;if(this.lockedOnNodeId!=undefined){this.viewFunction=this._lockedRedraw.bind(this);this.body.emitter.on("initRedraw",this.viewFunction);}
this.body.emitter.emit("animationFinished");}}},{key:"getScale",value:function getScale(){return this.body.view.scale;}},{key:"getViewPosition",value:function getViewPosition(){return this.canvas.DOMtoCanvas({x:0.5*this.canvas.frame.canvas.clientWidth,y:0.5*this.canvas.frame.canvas.clientHeight});}}]);return View;})();exports["default"]=View;module.exports=exports["default"];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{'default':obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var _componentsNavigationHandler=__webpack_require__(103);var _componentsNavigationHandler2=_interopRequireDefault(_componentsNavigationHandler);var _componentsPopup=__webpack_require__(104);var _componentsPopup2=_interopRequireDefault(_componentsPopup);var util=__webpack_require__(1);var InteractionHandler=(function(){function InteractionHandler(body,canvas,selectionHandler){_classCallCheck(this,InteractionHandler);this.body=body;this.canvas=canvas;this.selectionHandler=selectionHandler;this.navigationHandler=new _componentsNavigationHandler2['default'](body,canvas);this.body.eventListeners.onTap=this.onTap.bind(this);this.body.eventListeners.onTouch=this.onTouch.bind(this);this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this);this.body.eventListeners.onHold=this.onHold.bind(this);this.body.eventListeners.onDragStart=this.onDragStart.bind(this);this.body.eventListeners.onDrag=this.onDrag.bind(this);this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this);this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this);this.body.eventListeners.onPinch=this.onPinch.bind(this);this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this);this.body.eventListeners.onRelease=this.onRelease.bind(this);this.body.eventListeners.onContext=this.onContext.bind(this);this.touchTime=0;this.drag={};this.pinch={};this.popup=undefined;this.popupObj=undefined;this.popupTimer=undefined;this.body.functions.getPointer=this.getPointer.bind(this);this.options={};this.defaultOptions={dragNodes:true,dragView:true,hover:false,keyboard:{enabled:false,speed:{x:10,y:10,zoom:0.02},bindToWindow:true},navigationButtons:false,tooltipDelay:300,zoomView:true};util.extend(this.options,this.defaultOptions);this.bindEventListeners();}
_createClass(InteractionHandler,[{key:'bindEventListeners',value:function bindEventListeners(){var _this=this;this.body.emitter.on('destroy',function(){clearTimeout(_this.popupTimer);delete _this.body.functions.getPointer;});}},{key:'setOptions',value:function setOptions(options){if(options!==undefined){var fields=['hideEdgesOnDrag','hideNodesOnDrag','keyboard','multiselect','selectable','selectConnectedEdges'];util.selectiveNotDeepExtend(fields,this.options,options);util.mergeOptions(this.options,options,'keyboard');if(options.tooltip){util.extend(this.options.tooltip,options.tooltip);if(options.tooltip.color){this.options.tooltip.color=util.parseColor(options.tooltip.color);}}}
this.navigationHandler.setOptions(this.options);}},{key:'getPointer',value:function getPointer(touch){return{x:touch.x-util.getAbsoluteLeft(this.canvas.frame.canvas),y:touch.y-util.getAbsoluteTop(this.canvas.frame.canvas)};}},{key:'onTouch',value:function onTouch(event){if(new Date().valueOf()-this.touchTime>50){this.drag.pointer=this.getPointer(event.center);this.drag.pinched=false;this.pinch.scale=this.body.view.scale;this.touchTime=new Date().valueOf();}}},{key:'onTap',value:function onTap(event){var pointer=this.getPointer(event.center);var multiselect=this.selectionHandler.options.multiselect&&(event.changedPointers[0].ctrlKey||event.changedPointers[0].metaKey);this.checkSelectionChanges(pointer,event,multiselect);this.selectionHandler._generateClickEvent('click',event,pointer);}},{key:'onDoubleTap',value:function onDoubleTap(event){var pointer=this.getPointer(event.center);this.selectionHandler._generateClickEvent('doubleClick',event,pointer);}},{key:'onHold',value:function onHold(event){var pointer=this.getPointer(event.center);var multiselect=this.selectionHandler.options.multiselect;this.checkSelectionChanges(pointer,event,multiselect);this.selectionHandler._generateClickEvent('click',event,pointer);this.selectionHandler._generateClickEvent('hold',event,pointer);}},{key:'onRelease',value:function onRelease(event){if(new Date().valueOf()-this.touchTime>10){var pointer=this.getPointer(event.center);this.selectionHandler._generateClickEvent('release',event,pointer);this.touchTime=new Date().valueOf();}}},{key:'onContext',value:function onContext(event){var pointer=this.getPointer({x:event.clientX,y:event.clientY});this.selectionHandler._generateClickEvent('oncontext',event,pointer);}},{key:'checkSelectionChanges',value:function checkSelectionChanges(pointer,event){var add=arguments[2]===undefined?false:arguments[2];var previouslySelectedEdgeCount=this.selectionHandler._getSelectedEdgeCount();var previouslySelectedNodeCount=this.selectionHandler._getSelectedNodeCount();var previousSelection=this.selectionHandler.getSelection();var selected=undefined;if(add===true){selected=this.selectionHandler.selectAdditionalOnPoint(pointer);}else{selected=this.selectionHandler.selectOnPoint(pointer);}
var selectedEdgesCount=this.selectionHandler._getSelectedEdgeCount();var selectedNodesCount=this.selectionHandler._getSelectedNodeCount();var currentSelection=this.selectionHandler.getSelection();var _determineIfDifferent2=this._determineIfDifferent(previousSelection,currentSelection);var nodesChanges=_determineIfDifferent2.nodesChanges;var edgesChanges=_determineIfDifferent2.edgesChanges;if(selectedNodesCount-previouslySelectedNodeCount>0){this.selectionHandler._generateClickEvent('selectNode',event,pointer);selected=true;}else if(selectedNodesCount-previouslySelectedNodeCount<0){this.selectionHandler._generateClickEvent('deselectNode',event,pointer,previousSelection);selected=true;}else if(selectedNodesCount===previouslySelectedNodeCount&&nodesChanges===true){this.selectionHandler._generateClickEvent('deselectNode',event,pointer,previousSelection);this.selectionHandler._generateClickEvent('selectNode',event,pointer);selected=true;}
if(selectedEdgesCount-previouslySelectedEdgeCount>0){this.selectionHandler._generateClickEvent('selectEdge',event,pointer);selected=true;}else if(selectedEdgesCount-previouslySelectedEdgeCount<0){this.selectionHandler._generateClickEvent('deselectEdge',event,pointer,previousSelection);selected=true;}else if(selectedEdgesCount===previouslySelectedEdgeCount&&edgesChanges===true){this.selectionHandler._generateClickEvent('deselectEdge',event,pointer,previousSelection);this.selectionHandler._generateClickEvent('selectEdge',event,pointer);selected=true;}
if(selected===true){this.selectionHandler._generateClickEvent('select',event,pointer);}}},{key:'_determineIfDifferent',value:function _determineIfDifferent(previousSelection,currentSelection){var nodesChanges=false;var edgesChanges=false;for(var i=0;i<previousSelection.nodes.length;i++){if(currentSelection.nodes.indexOf(previousSelection.nodes[i])===-1){nodesChanges=true;}}
for(var i=0;i<currentSelection.nodes.length;i++){if(previousSelection.nodes.indexOf(previousSelection.nodes[i])===-1){nodesChanges=true;}}
for(var i=0;i<previousSelection.edges.length;i++){if(currentSelection.edges.indexOf(previousSelection.edges[i])===-1){edgesChanges=true;}}
for(var i=0;i<currentSelection.edges.length;i++){if(previousSelection.edges.indexOf(previousSelection.edges[i])===-1){edgesChanges=true;}}
return{nodesChanges:nodesChanges,edgesChanges:edgesChanges};}},{key:'onDragStart',value:function onDragStart(event){if(this.drag.pointer===undefined){this.onTouch(event);}
var node=this.selectionHandler.getNodeAt(this.drag.pointer);this.drag.dragging=true;this.drag.selection=[];this.drag.translation=util.extend({},this.body.view.translation);this.drag.nodeId=undefined;if(node!==undefined&&this.options.dragNodes===true){this.drag.nodeId=node.id;if(node.isSelected()===false){this.selectionHandler.unselectAll();this.selectionHandler.selectObject(node);}
this.selectionHandler._generateClickEvent('dragStart',event,this.drag.pointer);var selection=this.selectionHandler.selectionObj.nodes;for(var nodeId in selection){if(selection.hasOwnProperty(nodeId)){var object=selection[nodeId];var s={id:object.id,node:object,x:object.x,y:object.y,xFixed:object.options.fixed.x,yFixed:object.options.fixed.y};object.options.fixed.x=true;object.options.fixed.y=true;this.drag.selection.push(s);}}}else{this.selectionHandler._generateClickEvent('dragStart',event,this.drag.pointer,undefined,true);}}},{key:'onDrag',value:function onDrag(event){var _this2=this;if(this.drag.pinched===true){return;}
this.body.emitter.emit('unlockNode');var pointer=this.getPointer(event.center);var selection=this.drag.selection;if(selection&&selection.length&&this.options.dragNodes===true){(function(){_this2.selectionHandler._generateClickEvent('dragging',event,pointer);var deltaX=pointer.x-_this2.drag.pointer.x;var deltaY=pointer.y-_this2.drag.pointer.y;selection.forEach(function(selection){var node=selection.node;if(selection.xFixed===false){node.x=_this2.canvas._XconvertDOMtoCanvas(_this2.canvas._XconvertCanvasToDOM(selection.x)+deltaX);}
if(selection.yFixed===false){node.y=_this2.canvas._YconvertDOMtoCanvas(_this2.canvas._YconvertCanvasToDOM(selection.y)+deltaY);}});_this2.body.emitter.emit('startSimulation');})();}else{if(this.options.dragView===true){this.selectionHandler._generateClickEvent('dragging',event,pointer,undefined,true);if(this.drag.pointer===undefined){this._handleDragStart(event);return;}
var diffX=pointer.x-this.drag.pointer.x;var diffY=pointer.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+diffX,y:this.drag.translation.y+diffY};this.body.emitter.emit('_redraw');}}}},{key:'onDragEnd',value:function onDragEnd(event){this.drag.dragging=false;var selection=this.drag.selection;if(selection&&selection.length){this.selectionHandler._generateClickEvent('dragEnd',event,this.getPointer(event.center));selection.forEach(function(s){s.node.options.fixed.x=s.xFixed;s.node.options.fixed.y=s.yFixed;});this.body.emitter.emit('startSimulation');}else{this.selectionHandler._generateClickEvent('dragEnd',event,this.getPointer(event.center),undefined,true);this.body.emitter.emit('_requestRedraw');}}},{key:'onPinch',value:function onPinch(event){var pointer=this.getPointer(event.center);this.drag.pinched=true;if(this.pinch['scale']===undefined){this.pinch.scale=1;}
var scale=this.pinch.scale*event.scale;this.zoom(scale,pointer);}},{key:'zoom',value:function zoom(scale,pointer){if(this.options.zoomView===true){var scaleOld=this.body.view.scale;if(scale<0.00001){scale=0.00001;}
if(scale>10){scale=10;}
var preScaleDragPointer=undefined;if(this.drag!==undefined){if(this.drag.dragging===true){preScaleDragPointer=this.canvas.DOMtoCanvas(this.drag.pointer);}}
var translation=this.body.view.translation;var scaleFrac=scale/scaleOld;var tx=(1-scaleFrac)*pointer.x+translation.x*scaleFrac;var ty=(1-scaleFrac)*pointer.y+translation.y*scaleFrac;this.body.view.scale=scale;this.body.view.translation={x:tx,y:ty};if(preScaleDragPointer!=undefined){var postScaleDragPointer=this.canvas.canvasToDOM(preScaleDragPointer);this.drag.pointer.x=postScaleDragPointer.x;this.drag.pointer.y=postScaleDragPointer.y;}
this.body.emitter.emit('_requestRedraw');if(scaleOld<scale){this.body.emitter.emit('zoom',{direction:'+',scale:this.body.view.scale});}else{this.body.emitter.emit('zoom',{direction:'-',scale:this.body.view.scale});}}}},{key:'onMouseWheel',value:function onMouseWheel(event){var delta=0;if(event.wheelDelta){delta=event.wheelDelta/120;}else if(event.detail){delta=-event.detail/3;}
if(delta!==0){var scale=this.body.view.scale;var zoom=delta/10;if(delta<0){zoom=zoom/(1-zoom);}
scale*=1+zoom;var pointer=this.getPointer({x:event.clientX,y:event.clientY});this.zoom(scale,pointer);}
event.preventDefault();}},{key:'onMouseMove',value:function onMouseMove(event){var _this3=this;var pointer=this.getPointer({x:event.clientX,y:event.clientY});var popupVisible=false;if(this.popup!==undefined){if(this.popup.hidden===false){this._checkHidePopup(pointer);}
if(this.popup.hidden===false){popupVisible=true;this.popup.setPosition(pointer.x+3,pointer.y-5);this.popup.show();}}
if(this.options.keyboard.bindToWindow===false&&this.options.keyboard.enabled===true){this.canvas.frame.focus();}
if(popupVisible===false){if(this.popupTimer!==undefined){clearInterval(this.popupTimer);this.popupTimer=undefined;}
if(!this.drag.dragging){this.popupTimer=setTimeout(function(){return _this3._checkShowPopup(pointer);},this.options.tooltipDelay);}}
if(this.options.hover===true){var obj=this.selectionHandler.getNodeAt(pointer);if(obj===undefined){obj=this.selectionHandler.getEdgeAt(pointer);}
this.selectionHandler.hoverObject(obj);}}},{key:'_checkShowPopup',value:function _checkShowPopup(pointer){var x=this.canvas._XconvertDOMtoCanvas(pointer.x);var y=this.canvas._YconvertDOMtoCanvas(pointer.y);var pointerObj={left:x,top:y,right:x,bottom:y};var previousPopupObjId=this.popupObj===undefined?undefined:this.popupObj.id;var nodeUnderCursor=false;var popupType='node';if(this.popupObj===undefined){var nodeIndices=this.body.nodeIndices;var nodes=this.body.nodes;var node=undefined;var overlappingNodes=[];for(var i=0;i<nodeIndices.length;i++){node=nodes[nodeIndices[i]];if(node.isOverlappingWith(pointerObj)===true){if(node.getTitle()!==undefined){overlappingNodes.push(nodeIndices[i]);}}}
if(overlappingNodes.length>0){this.popupObj=nodes[overlappingNodes[overlappingNodes.length-1]];nodeUnderCursor=true;}}
if(this.popupObj===undefined&&nodeUnderCursor===false){var edgeIndices=this.body.edgeIndices;var edges=this.body.edges;var edge=undefined;var overlappingEdges=[];for(var i=0;i<edgeIndices.length;i++){edge=edges[edgeIndices[i]];if(edge.isOverlappingWith(pointerObj)===true){if(edge.connected===true&&edge.getTitle()!==undefined){overlappingEdges.push(edgeIndices[i]);}}}
if(overlappingEdges.length>0){this.popupObj=edges[overlappingEdges[overlappingEdges.length-1]];popupType='edge';}}
if(this.popupObj!==undefined){if(this.popupObj.id!==previousPopupObjId){if(this.popup===undefined){this.popup=new _componentsPopup2['default'](this.canvas.frame);}
this.popup.popupTargetType=popupType;this.popup.popupTargetId=this.popupObj.id;this.popup.setPosition(pointer.x+3,pointer.y-5);this.popup.setText(this.popupObj.getTitle());this.popup.show();this.body.emitter.emit('showPopup',this.popupObj.id);}}else{if(this.popup!==undefined){this.popup.hide();this.body.emitter.emit('hidePopup');}}}},{key:'_checkHidePopup',value:function _checkHidePopup(pointer){var pointerObj=this.selectionHandler._pointerToPositionObject(pointer);var stillOnObj=false;if(this.popup.popupTargetType==='node'){if(this.body.nodes[this.popup.popupTargetId]!==undefined){stillOnObj=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(pointerObj);if(stillOnObj===true){var overNode=this.selectionHandler.getNodeAt(pointer);stillOnObj=overNode.id===this.popup.popupTargetId;}}}else{if(this.selectionHandler.getNodeAt(pointer)===undefined){if(this.body.edges[this.popup.popupTargetId]!==undefined){stillOnObj=this.body.edges[this.popup.popupTargetId].isOverlappingWith(pointerObj);}}}
if(stillOnObj===false){this.popupObj=undefined;this.popup.hide();this.body.emitter.emit('hidePopup');}}}]);return InteractionHandler;})();exports['default']=InteractionHandler;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var util=__webpack_require__(1);var Hammer=__webpack_require__(23);var hammerUtil=__webpack_require__(28);var keycharm=__webpack_require__(43);var NavigationHandler=(function(){function NavigationHandler(body,canvas){var _this=this;_classCallCheck(this,NavigationHandler);this.body=body;this.canvas=canvas;this.iconsCreated=false;this.navigationHammers=[];this.boundFunctions={};this.touchTime=0;this.activated=false;this.body.emitter.on('release',function(){_this._stopMovement();});this.body.emitter.on('activate',function(){_this.activated=true;_this.configureKeyboardBindings();});this.body.emitter.on('deactivate',function(){_this.activated=false;_this.configureKeyboardBindings();});this.body.emitter.on('destroy',function(){if(_this.keycharm!==undefined){_this.keycharm.destroy();}});this.options={};}
_createClass(NavigationHandler,[{key:'setOptions',value:function setOptions(options){if(options!==undefined){this.options=options;this.create();}}},{key:'create',value:function create(){if(this.options.navigationButtons===true){if(this.iconsCreated===false){this.loadNavigationElements();}}else if(this.iconsCreated===true){this.cleanNavigation();}
this.configureKeyboardBindings();}},{key:'cleanNavigation',value:function cleanNavigation(){if(this.navigationHammers.length!=0){for(var i=0;i<this.navigationHammers.length;i++){this.navigationHammers[i].destroy();}
this.navigationHammers=[];}
if(this.navigationDOM&&this.navigationDOM['wrapper']&&this.navigationDOM['wrapper'].parentNode){this.navigationDOM['wrapper'].parentNode.removeChild(this.navigationDOM['wrapper']);}
this.iconsCreated=false;}},{key:'loadNavigationElements',value:function loadNavigationElements(){this.cleanNavigation();this.navigationDOM={};var navigationDivs=['up','down','left','right','zoomIn','zoomOut','zoomExtends'];var navigationDivActions=['_moveUp','_moveDown','_moveLeft','_moveRight','_zoomIn','_zoomOut','_fit'];this.navigationDOM['wrapper']=document.createElement('div');this.navigationDOM['wrapper'].className='vis-navigation';this.canvas.frame.appendChild(this.navigationDOM['wrapper']);for(var i=0;i<navigationDivs.length;i++){this.navigationDOM[navigationDivs[i]]=document.createElement('div');this.navigationDOM[navigationDivs[i]].className='vis-button vis-'+navigationDivs[i];this.navigationDOM['wrapper'].appendChild(this.navigationDOM[navigationDivs[i]]);var hammer=new Hammer(this.navigationDOM[navigationDivs[i]]);if(navigationDivActions[i]==='_fit'){hammerUtil.onTouch(hammer,this._fit.bind(this));}else{hammerUtil.onTouch(hammer,this.bindToRedraw.bind(this,navigationDivActions[i]));}
this.navigationHammers.push(hammer);}
this.iconsCreated=true;}},{key:'bindToRedraw',value:function bindToRedraw(action){if(this.boundFunctions[action]===undefined){this.boundFunctions[action]=this[action].bind(this);this.body.emitter.on('initRedraw',this.boundFunctions[action]);this.body.emitter.emit('_startRendering');}}},{key:'unbindFromRedraw',value:function unbindFromRedraw(action){if(this.boundFunctions[action]!==undefined){this.body.emitter.off('initRedraw',this.boundFunctions[action]);this.body.emitter.emit('_stopRendering');delete this.boundFunctions[action];}}},{key:'_fit',value:function _fit(){if(new Date().valueOf()-this.touchTime>700){this.body.emitter.emit('fit',{duration:700});this.touchTime=new Date().valueOf();}}},{key:'_stopMovement',value:function _stopMovement(){for(var boundAction in this.boundFunctions){if(this.boundFunctions.hasOwnProperty(boundAction)){this.body.emitter.off('initRedraw',this.boundFunctions[boundAction]);this.body.emitter.emit('_stopRendering');}}
this.boundFunctions={};}},{key:'_moveUp',value:function _moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y;}},{key:'_moveDown',value:function _moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y;}},{key:'_moveLeft',value:function _moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x;}},{key:'_moveRight',value:function _moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x;}},{key:'_zoomIn',value:function _zoomIn(){this.body.view.scale*=1+this.options.keyboard.speed.zoom;}},{key:'_zoomOut',value:function _zoomOut(){this.body.view.scale/=1+this.options.keyboard.speed.zoom;}},{key:'configureKeyboardBindings',value:function configureKeyboardBindings(){var _this2=this;if(this.keycharm!==undefined){this.keycharm.destroy();}
if(this.options.keyboard.enabled===true){if(this.options.keyboard.bindToWindow===true){this.keycharm=keycharm({container:window,preventDefault:true});}else{this.keycharm=keycharm({container:this.canvas.frame,preventDefault:true});}
this.keycharm.reset();if(this.activated===true){this.keycharm.bind('up',function(){_this2.bindToRedraw('_moveUp');},'keydown');this.keycharm.bind('down',function(){_this2.bindToRedraw('_moveDown');},'keydown');this.keycharm.bind('left',function(){_this2.bindToRedraw('_moveLeft');},'keydown');this.keycharm.bind('right',function(){_this2.bindToRedraw('_moveRight');},'keydown');this.keycharm.bind('=',function(){_this2.bindToRedraw('_zoomIn');},'keydown');this.keycharm.bind('num+',function(){_this2.bindToRedraw('_zoomIn');},'keydown');this.keycharm.bind('num-',function(){_this2.bindToRedraw('_zoomOut');},'keydown');this.keycharm.bind('-',function(){_this2.bindToRedraw('_zoomOut');},'keydown');this.keycharm.bind('[',function(){_this2.bindToRedraw('_zoomOut');},'keydown');this.keycharm.bind(']',function(){_this2.bindToRedraw('_zoomIn');},'keydown');this.keycharm.bind('pageup',function(){_this2.bindToRedraw('_zoomIn');},'keydown');this.keycharm.bind('pagedown',function(){_this2.bindToRedraw('_zoomOut');},'keydown');this.keycharm.bind('up',function(){_this2.unbindFromRedraw('_moveUp');},'keyup');this.keycharm.bind('down',function(){_this2.unbindFromRedraw('_moveDown');},'keyup');this.keycharm.bind('left',function(){_this2.unbindFromRedraw('_moveLeft');},'keyup');this.keycharm.bind('right',function(){_this2.unbindFromRedraw('_moveRight');},'keyup');this.keycharm.bind('=',function(){_this2.unbindFromRedraw('_zoomIn');},'keyup');this.keycharm.bind('num+',function(){_this2.unbindFromRedraw('_zoomIn');},'keyup');this.keycharm.bind('num-',function(){_this2.unbindFromRedraw('_zoomOut');},'keyup');this.keycharm.bind('-',function(){_this2.unbindFromRedraw('_zoomOut');},'keyup');this.keycharm.bind('[',function(){_this2.unbindFromRedraw('_zoomOut');},'keyup');this.keycharm.bind(']',function(){_this2.unbindFromRedraw('_zoomIn');},'keyup');this.keycharm.bind('pageup',function(){_this2.unbindFromRedraw('_zoomIn');},'keyup');this.keycharm.bind('pagedown',function(){_this2.unbindFromRedraw('_zoomOut');},'keyup');}}}}]);return NavigationHandler;})();exports['default']=NavigationHandler;module.exports=exports['default'];},function(module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var Popup=(function(){function Popup(container){_classCallCheck(this,Popup);this.container=container;this.x=0;this.y=0;this.padding=5;this.hidden=false;this.frame=document.createElement('div');this.frame.className='vis-network-tooltip';this.container.appendChild(this.frame);}
_createClass(Popup,[{key:'setPosition',value:function setPosition(x,y){this.x=parseInt(x);this.y=parseInt(y);}},{key:'setText',value:function setText(content){if(content instanceof Element){this.frame.innerHTML='';this.frame.appendChild(content);}else{this.frame.innerHTML=content;}}},{key:'show',value:function show(doShow){if(doShow===undefined){doShow=true;}
if(doShow===true){var height=this.frame.clientHeight;var width=this.frame.clientWidth;var maxHeight=this.frame.parentNode.clientHeight;var maxWidth=this.frame.parentNode.clientWidth;var top=this.y-height;if(top+height+this.padding>maxHeight){top=maxHeight-height-this.padding;}
if(top<this.padding){top=this.padding;}
var left=this.x;if(left+width+this.padding>maxWidth){left=maxWidth-width-this.padding;}
if(left<this.padding){left=this.padding;}
this.frame.style.left=left+'px';this.frame.style.top=top+'px';this.frame.style.visibility='visible';this.hidden=false;}else{this.hide();}}},{key:'hide',value:function hide(){this.hidden=true;this.frame.style.visibility='hidden';}}]);return Popup;})();exports['default']=Popup;module.exports=exports['default'];},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var Node=__webpack_require__(62);var Edge=__webpack_require__(82);var util=__webpack_require__(1);var SelectionHandler=(function(){function SelectionHandler(body,canvas){var _this=this;_classCallCheck(this,SelectionHandler);this.body=body;this.canvas=canvas;this.selectionObj={nodes:[],edges:[]};this.hoverObj={nodes:{},edges:{}};this.options={};this.defaultOptions={multiselect:false,selectable:true,selectConnectedEdges:true,hoverConnectedEdges:true};util.extend(this.options,this.defaultOptions);this.body.emitter.on("_dataChanged",function(){_this.updateSelection();});}
_createClass(SelectionHandler,[{key:"setOptions",value:function setOptions(options){if(options!==undefined){var fields=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];util.selectiveDeepExtend(fields,this.options,options);}}},{key:"selectOnPoint",value:function selectOnPoint(pointer){var selected=false;if(this.options.selectable===true){var obj=this.getNodeAt(pointer)||this.getEdgeAt(pointer);this.unselectAll();if(obj!==undefined){selected=this.selectObject(obj);}
this.body.emitter.emit("_requestRedraw");}
return selected;}},{key:"selectAdditionalOnPoint",value:function selectAdditionalOnPoint(pointer){var selectionChanged=false;if(this.options.selectable===true){var obj=this.getNodeAt(pointer)||this.getEdgeAt(pointer);if(obj!==undefined){selectionChanged=true;if(obj.isSelected()===true){this.deselectObject(obj);}else{this.selectObject(obj);}
this.body.emitter.emit("_requestRedraw");}}
return selectionChanged;}},{key:"_generateClickEvent",value:function _generateClickEvent(eventType,event,pointer,oldSelection){var emptySelection=arguments[4]===undefined?false:arguments[4];var properties=undefined;if(emptySelection===true){properties={nodes:[],edges:[]};}else{properties=this.getSelection();}
properties["pointer"]={DOM:{x:pointer.x,y:pointer.y},canvas:this.canvas.DOMtoCanvas(pointer)};properties["event"]=event;if(oldSelection!==undefined){properties["previousSelection"]=oldSelection;}
this.body.emitter.emit(eventType,properties);}},{key:"selectObject",value:function selectObject(obj){var highlightEdges=arguments[1]===undefined?this.options.selectConnectedEdges:arguments[1];if(obj!==undefined){if(obj instanceof Node){if(highlightEdges===true){this._selectConnectedEdges(obj);}}
obj.select();this._addToSelection(obj);return true;}
return false;}},{key:"deselectObject",value:function deselectObject(obj){if(obj.isSelected()===true){obj.selected=false;this._removeFromSelection(obj);}}},{key:"_getAllNodesOverlappingWith",value:function _getAllNodesOverlappingWith(object){var overlappingNodes=[];var nodes=this.body.nodes;for(var i=0;i<this.body.nodeIndices.length;i++){var nodeId=this.body.nodeIndices[i];if(nodes[nodeId].isOverlappingWith(object)){overlappingNodes.push(nodeId);}}
return overlappingNodes;}},{key:"_pointerToPositionObject",value:function _pointerToPositionObject(pointer){var canvasPos=this.canvas.DOMtoCanvas(pointer);return{left:canvasPos.x-1,top:canvasPos.y+1,right:canvasPos.x+1,bottom:canvasPos.y-1};}},{key:"getNodeAt",value:function getNodeAt(pointer){var returnNode=arguments[1]===undefined?true:arguments[1];var positionObject=this._pointerToPositionObject(pointer);var overlappingNodes=this._getAllNodesOverlappingWith(positionObject);if(overlappingNodes.length>0){if(returnNode===true){return this.body.nodes[overlappingNodes[overlappingNodes.length-1]];}else{return overlappingNodes[overlappingNodes.length-1];}}else{return undefined;}}},{key:"_getEdgesOverlappingWith",value:function _getEdgesOverlappingWith(object,overlappingEdges){var edges=this.body.edges;for(var i=0;i<this.body.edgeIndices.length;i++){var edgeId=this.body.edgeIndices[i];if(edges[edgeId].isOverlappingWith(object)){overlappingEdges.push(edgeId);}}}},{key:"_getAllEdgesOverlappingWith",value:function _getAllEdgesOverlappingWith(object){var overlappingEdges=[];this._getEdgesOverlappingWith(object,overlappingEdges);return overlappingEdges;}},{key:"getEdgeAt",value:function getEdgeAt(pointer){var returnEdge=arguments[1]===undefined?true:arguments[1];var positionObject=this._pointerToPositionObject(pointer);var overlappingEdges=this._getAllEdgesOverlappingWith(positionObject);if(overlappingEdges.length>0){if(returnEdge===true){return this.body.edges[overlappingEdges[overlappingEdges.length-1]];}else{return overlappingEdges[overlappingEdges.length-1];}}else{return undefined;}}},{key:"_addToSelection",value:function _addToSelection(obj){if(obj instanceof Node){this.selectionObj.nodes[obj.id]=obj;}else{this.selectionObj.edges[obj.id]=obj;}}},{key:"_addToHover",value:function _addToHover(obj){if(obj instanceof Node){this.hoverObj.nodes[obj.id]=obj;}else{this.hoverObj.edges[obj.id]=obj;}}},{key:"_removeFromSelection",value:function _removeFromSelection(obj){if(obj instanceof Node){delete this.selectionObj.nodes[obj.id];}else{delete this.selectionObj.edges[obj.id];}}},{key:"unselectAll",value:function unselectAll(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){this.selectionObj.nodes[nodeId].unselect();}}
for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){this.selectionObj.edges[edgeId].unselect();}}
this.selectionObj={nodes:{},edges:{}};}},{key:"_getSelectedNodeCount",value:function _getSelectedNodeCount(){var count=0;for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){count+=1;}}
return count;}},{key:"_getSelectedNode",value:function _getSelectedNode(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){return this.selectionObj.nodes[nodeId];}}
return undefined;}},{key:"_getSelectedEdge",value:function _getSelectedEdge(){for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){return this.selectionObj.edges[edgeId];}}
return undefined;}},{key:"_getSelectedEdgeCount",value:function _getSelectedEdgeCount(){var count=0;for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){count+=1;}}
return count;}},{key:"_getSelectedObjectCount",value:function _getSelectedObjectCount(){var count=0;for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){count+=1;}}
for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){count+=1;}}
return count;}},{key:"_selectionIsEmpty",value:function _selectionIsEmpty(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){return false;}}
for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){return false;}}
return true;}},{key:"_clusterInSelection",value:function _clusterInSelection(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){if(this.selectionObj.nodes[nodeId].clusterSize>1){return true;}}}
return false;}},{key:"_selectConnectedEdges",value:function _selectConnectedEdges(node){for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];edge.select();this._addToSelection(edge);}}},{key:"_hoverConnectedEdges",value:function _hoverConnectedEdges(node){for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];edge.hover=true;this._addToHover(edge);}}},{key:"_unselectConnectedEdges",value:function _unselectConnectedEdges(node){for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];edge.unselect();this._removeFromSelection(edge);}}},{key:"blurObject",value:function blurObject(object){if(object.hover===true){object.hover=false;this.body.emitter.emit("blurNode",{node:object.id});}}},{key:"hoverObject",value:function hoverObject(object){var hoverChanged=false;for(var nodeId in this.hoverObj.nodes){if(this.hoverObj.nodes.hasOwnProperty(nodeId)){if(object===undefined){this.blurObject(this.hoverObj.nodes[nodeId]);hoverChanged=true;}else if(object instanceof Node&&object.id!=nodeId||object instanceof Edge||object===undefined){this.blurObject(this.hoverObj.nodes[nodeId]);hoverChanged=true;delete this.hoverObj.nodes[nodeId];}}}
for(var edgeId in this.hoverObj.edges){if(this.hoverObj.edges.hasOwnProperty(edgeId)){this.hoverObj.edges[edgeId].hover=false;delete this.hoverObj.edges[edgeId];}}
if(object!==undefined){if(object.hover===false){object.hover=true;this._addToHover(object);hoverChanged=true;if(object instanceof Node){this.body.emitter.emit("hoverNode",{node:object.id});}}
if(object instanceof Node&&this.options.hoverConnectedEdges===true){this._hoverConnectedEdges(object);}}
if(hoverChanged===true){this.body.emitter.emit("_requestRedraw");}}},{key:"getSelection",value:function getSelection(){var nodeIds=this.getSelectedNodes();var edgeIds=this.getSelectedEdges();return{nodes:nodeIds,edges:edgeIds};}},{key:"getSelectedNodes",value:function getSelectedNodes(){var idArray=[];if(this.options.selectable===true){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){idArray.push(nodeId);}}}
return idArray;}},{key:"getSelectedEdges",value:function getSelectedEdges(){var idArray=[];if(this.options.selectable===true){for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){idArray.push(edgeId);}}}
return idArray;}},{key:"selectNodes",value:function selectNodes(selection){var highlightEdges=arguments[1]===undefined?true:arguments[1];var i=undefined,id=undefined;if(!selection||selection.length===undefined)throw"Selection must be an array with ids";this.unselectAll();for(i=0;i<selection.length;i++){id=selection[i];var node=this.body.nodes[id];if(!node){throw new RangeError("Node with id \""+id+"\" not found");}
this.selectObject(node,highlightEdges);}
this.body.emitter.emit("_requestRedraw");}},{key:"selectEdges",value:function selectEdges(selection){var i=undefined,id=undefined;if(!selection||selection.length===undefined)throw"Selection must be an array with ids";this.unselectAll();for(i=0;i<selection.length;i++){id=selection[i];var edge=this.body.edges[id];if(!edge){throw new RangeError("Edge with id \""+id+"\" not found");}
this.selectObject(edge);}
this.body.emitter.emit("_requestRedraw");}},{key:"updateSelection",value:function updateSelection(){for(var nodeId in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(nodeId)){if(!this.body.nodes.hasOwnProperty(nodeId)){delete this.selectionObj.nodes[nodeId];}}}
for(var edgeId in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(edgeId)){if(!this.body.edges.hasOwnProperty(edgeId)){delete this.selectionObj.edges[edgeId];}}}}}]);return SelectionHandler;})();exports["default"]=SelectionHandler;module.exports=exports["default"];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var util=__webpack_require__(1);var LayoutEngine=(function(){function LayoutEngine(body){_classCallCheck(this,LayoutEngine);this.body=body;this.initialRandomSeed=Math.round(Math.random()*1000000);this.randomSeed=this.initialRandomSeed;this.options={};this.optionsBackup={};this.defaultOptions={randomSeed:undefined,hierarchical:{enabled:false,levelSeparation:150,direction:'UD',sortMethod:'hubsize'}};util.extend(this.options,this.defaultOptions);this.hierarchicalLevels={};this.bindEventListeners();}
_createClass(LayoutEngine,[{key:'bindEventListeners',value:function bindEventListeners(){var _this=this;this.body.emitter.on('_dataChanged',function(){_this.setupHierarchicalLayout();});this.body.emitter.on('_resetHierarchicalLayout',function(){_this.setupHierarchicalLayout();});}},{key:'setOptions',value:function setOptions(options,allOptions){if(options!==undefined){var prevHierarchicalState=this.options.hierarchical.enabled;util.mergeOptions(this.options,options,'hierarchical');if(options.randomSeed!==undefined){this.initialRandomSeed=options.randomSeed;}
if(this.options.hierarchical.enabled===true){if(this.options.hierarchical.direction==='RL'||this.options.hierarchical.direction==='DU'){if(this.options.hierarchical.levelSeparation>0){this.options.hierarchical.levelSeparation*=-1;}}else{if(this.options.hierarchical.levelSeparation<0){this.options.hierarchical.levelSeparation*=-1;}}
this.body.emitter.emit('_resetHierarchicalLayout');return this.adaptAllOptions(allOptions);}else{if(prevHierarchicalState===true){this.body.emitter.emit('refresh');return util.deepExtend(allOptions,this.optionsBackup);}}}
return allOptions;}},{key:'adaptAllOptions',value:function adaptAllOptions(allOptions){if(this.options.hierarchical.enabled===true){if(allOptions.physics===undefined||allOptions.physics===true){allOptions.physics={solver:'hierarchicalRepulsion'};this.optionsBackup.physics={solver:'barnesHut'};}else if(typeof allOptions.physics==='object'){this.optionsBackup.physics={solver:'barnesHut'};if(allOptions.physics.solver!==undefined){this.optionsBackup.physics={solver:allOptions.physics.solver};}
allOptions.physics['solver']='hierarchicalRepulsion';}else if(allOptions.physics!==false){this.optionsBackup.physics={solver:'barnesHut'};allOptions.physics['solver']='hierarchicalRepulsion';}
var type='horizontal';if(this.options.hierarchical.direction==='RL'||this.options.hierarchical.direction==='LR'){type='vertical';}
if(allOptions.edges===undefined){this.optionsBackup.edges={smooth:{enabled:true,type:'dynamic'}};allOptions.edges={smooth:false};}else if(allOptions.edges.smooth===undefined){this.optionsBackup.edges={smooth:{enabled:true,type:'dynamic'}};allOptions.edges.smooth=false;}else{if(typeof allOptions.edges.smooth==='boolean'){this.optionsBackup.edges={smooth:allOptions.edges.smooth};allOptions.edges.smooth={enabled:allOptions.edges.smooth,type:type};}else{if(allOptions.edges.smooth.type!==undefined&&allOptions.edges.smooth.type!=='dynamic'){type=allOptions.edges.smooth.type;}
this.optionsBackup.edges={smooth:allOptions.edges.smooth.enabled===undefined?true:allOptions.edges.smooth.enabled,type:allOptions.edges.smooth.type===undefined?'dynamic':allOptions.edges.smooth.type,roundness:allOptions.edges.smooth.roundness===undefined?0.5:allOptions.edges.smooth.roundness};allOptions.edges.smooth={enabled:allOptions.edges.smooth.enabled===undefined?true:allOptions.edges.smooth.enabled,type:type,roundness:allOptions.edges.smooth.roundness===undefined?0.5:allOptions.edges.smooth.roundness};}}
this.body.emitter.emit('_forceDisableDynamicCurves',type);}
return allOptions;}},{key:'seededRandom',value:function seededRandom(){var x=Math.sin(this.randomSeed++)*10000;return x-Math.floor(x);}},{key:'positionInitially',value:function positionInitially(nodesArray){if(this.options.hierarchical.enabled!==true){this.randomSeed=this.initialRandomSeed;for(var i=0;i<nodesArray.length;i++){var node=nodesArray[i];if(!node.isFixed()&&(node.x===undefined||node.y===undefined)){var radius=10*0.1*nodesArray.length+10;var angle=2*Math.PI*this.seededRandom();if(node.options.fixed.x===false){node.x=radius*Math.cos(angle);}
if(node.options.fixed.x===false){node.y=radius*Math.sin(angle);}}}}}},{key:'getSeed',value:function getSeed(){return this.initialRandomSeed;}},{key:'setupHierarchicalLayout',value:function setupHierarchicalLayout(){if(this.options.hierarchical.enabled===true&&this.body.nodeIndices.length>0){var node=undefined,nodeId=undefined;var definedLevel=false;var undefinedLevel=false;this.hierarchicalLevels={};this.nodeSpacing=100;for(nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){node=this.body.nodes[nodeId];if(node.options.level!==undefined){definedLevel=true;this.hierarchicalLevels[nodeId]=node.options.level;}else{undefinedLevel=true;}}}
if(undefinedLevel===true&&definedLevel===true){throw new Error('To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.');return;}else{if(undefinedLevel===true){if(this.options.hierarchical.sortMethod==='hubsize'){this._determineLevelsByHubsize();}else if(this.options.hierarchical.sortMethod==='directed'||'direction'){this._determineLevelsDirected();}}
var distribution=this._getDistribution();this._placeNodesByHierarchy(distribution);}}}},{key:'_placeNodesByHierarchy',value:function _placeNodesByHierarchy(distribution){var nodeId=undefined,node=undefined;this.positionedNodes={};for(var level in distribution){if(distribution.hasOwnProperty(level)){for(nodeId in distribution[level].nodes){if(distribution[level].nodes.hasOwnProperty(nodeId)){node=distribution[level].nodes[nodeId];if(this.options.hierarchical.direction==='UD'||this.options.hierarchical.direction==='DU'){if(node.x===undefined){node.x=distribution[level].distance;}
distribution[level].distance=node.x+this.nodeSpacing;}else{if(node.y===undefined){node.y=distribution[level].distance;}
distribution[level].distance=node.y+this.nodeSpacing;}
this.positionedNodes[nodeId]=true;this._placeBranchNodes(node.edges,node.id,distribution,level);}}}}}},{key:'_getDistribution',value:function _getDistribution(){var distribution={};var nodeId=undefined,node=undefined;for(nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){node=this.body.nodes[nodeId];var level=this.hierarchicalLevels[nodeId]===undefined?0:this.hierarchicalLevels[nodeId];if(this.options.hierarchical.direction==='UD'||this.options.hierarchical.direction==='DU'){node.y=this.options.hierarchical.levelSeparation*level;node.options.fixed.y=true;}else{node.x=this.options.hierarchical.levelSeparation*level;node.options.fixed.x=true;}
if(distribution[level]===undefined){distribution[level]={amount:0,nodes:{},distance:0};}
distribution[level].amount+=1;distribution[level].nodes[nodeId]=node;}}
return distribution;}},{key:'_getHubSize',value:function _getHubSize(){var hubSize=0;for(var nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){var node=this.body.nodes[nodeId];if(this.hierarchicalLevels[nodeId]===undefined){hubSize=node.edges.length<hubSize?hubSize:node.edges.length;}}}
return hubSize;}},{key:'_determineLevelsByHubsize',value:function _determineLevelsByHubsize(){var nodeId=undefined,node=undefined;var hubSize=1;while(hubSize>0){hubSize=this._getHubSize();if(hubSize===0)break;for(nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){node=this.body.nodes[nodeId];if(node.edges.length===hubSize){this._setLevelByHubsize(0,node);}}}}}},{key:'_setLevelByHubsize',value:function _setLevelByHubsize(level,node){if(this.hierarchicalLevels[node.id]!==undefined)return;var childNode=undefined;this.hierarchicalLevels[node.id]=level;for(var i=0;i<node.edges.length;i++){if(node.edges[i].toId===node.id){childNode=node.edges[i].from;}else{childNode=node.edges[i].to;}
this._setLevelByHubsize(level+1,childNode);}}},{key:'_determineLevelsDirected',value:function _determineLevelsDirected(){var nodeId=undefined,node=undefined;var minLevel=10000;for(nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){node=this.body.nodes[nodeId];this._setLevelDirected(minLevel,node);}}
for(nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){minLevel=this.hierarchicalLevels[nodeId]<minLevel?this.hierarchicalLevels[nodeId]:minLevel;}}
for(nodeId in this.body.nodes){if(this.body.nodes.hasOwnProperty(nodeId)){this.hierarchicalLevels[nodeId]-=minLevel;}}}},{key:'_setLevelDirected',value:function _setLevelDirected(level,node){if(this.hierarchicalLevels[node.id]!==undefined)return;var childNode=undefined;this.hierarchicalLevels[node.id]=level;for(var i=0;i<node.edges.length;i++){if(node.edges[i].toId===node.id){childNode=node.edges[i].from;this._setLevelDirected(level-1,childNode);}else{childNode=node.edges[i].to;this._setLevelDirected(level+1,childNode);}}}},{key:'_placeBranchNodes',value:function _placeBranchNodes(edges,parentId,distribution,parentLevel){for(var i=0;i<edges.length;i++){var childNode=undefined;var parentNode=undefined;if(edges[i].toId===parentId){childNode=edges[i].from;parentNode=edges[i].to;}else{childNode=edges[i].to;parentNode=edges[i].from;}
var childNodeLevel=this.hierarchicalLevels[childNode.id];if(this.positionedNodes[childNode.id]===undefined){if(childNodeLevel>parentLevel){if(this.options.hierarchical.direction==='UD'||this.options.hierarchical.direction==='DU'){if(childNode.x===undefined){childNode.x=Math.max(distribution[childNodeLevel].distance,parentNode.x);}
distribution[childNodeLevel].distance=childNode.x+this.nodeSpacing;this.positionedNodes[childNode.id]=true;}else{if(childNode.y===undefined){childNode.y=Math.max(distribution[childNodeLevel].distance,parentNode.y);}
distribution[childNodeLevel].distance=childNode.y+this.nodeSpacing;}
this.positionedNodes[childNode.id]=true;if(childNode.edges.length>1){this._placeBranchNodes(childNode.edges,childNode.id,distribution,childNodeLevel);}}}}}}]);return LayoutEngine;})();exports['default']=LayoutEngine;module.exports=exports['default'];},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};})();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function');}}
var util=__webpack_require__(1);var Hammer=__webpack_require__(23);var hammerUtil=__webpack_require__(28);var ManipulationSystem=(function(){function ManipulationSystem(body,canvas,selectionHandler){var _this=this;_classCallCheck(this,ManipulationSystem);this.body=body;this.canvas=canvas;this.selectionHandler=selectionHandler;this.editMode=false;this.manipulationDiv=undefined;this.editModeDiv=undefined;this.closeDiv=undefined;this.manipulationHammers=[];this.temporaryUIFunctions={};this.temporaryEventFunctions=[];this.touchTime=0;this.temporaryIds={nodes:[],edges:[]};this.guiEnabled=false;this.inMode=false;this.selectedControlNode=undefined;this.options={};this.defaultOptions={enabled:false,initiallyActive:false,addNode:true,addEdge:true,editNode:undefined,editEdge:true,deleteNode:true,deleteEdge:true,controlNodeStyle:{shape:'dot',size:6,color:{background:'#ff0000',border:'#3c3c3c',highlight:{background:'#07f968',border:'#3c3c3c'}},borderWidth:2,borderWidthSelected:2}};util.extend(this.options,this.defaultOptions);this.body.emitter.on('destroy',function(){_this._clean();});this.body.emitter.on('_dataChanged',this._restore.bind(this));this.body.emitter.on('_resetData',this._restore.bind(this));}
_createClass(ManipulationSystem,[{key:'_restore',value:function _restore(){if(this.inMode!==false){if(this.options.initiallyActive===true){this.enableEditMode();}else{this.disableEditMode();}}}},{key:'setOptions',value:function setOptions(options,allOptions,globalOptions){if(allOptions!==undefined){if(allOptions.locale!==undefined){this.options.locale=allOptions.locale;}else{this.options.locale=globalOptions.locale;}
if(allOptions.locales!==undefined){this.options.locales=allOptions.locales;}else{this.options.locales=globalOptions.locales;}}
if(options!==undefined){if(typeof options==='boolean'){this.options.enabled=options;}else{this.options.enabled=true;util.deepExtend(this.options,options);}
if(this.options.initiallyActive===true){this.editMode=true;}
this._setup();}}},{key:'toggleEditMode',value:function toggleEditMode(){if(this.editMode===true){this.disableEditMode();}else{this.enableEditMode();}}},{key:'enableEditMode',value:function enableEditMode(){this.editMode=true;this._clean();if(this.guiEnabled===true){this.manipulationDiv.style.display='block';this.closeDiv.style.display='block';this.editModeDiv.style.display='none';this.showManipulatorToolbar();}}},{key:'disableEditMode',value:function disableEditMode(){this.editMode=false;this._clean();if(this.guiEnabled===true){this.manipulationDiv.style.display='none';this.closeDiv.style.display='none';this.editModeDiv.style.display='block';this._createEditButton();}}},{key:'showManipulatorToolbar',value:function showManipulatorToolbar(){this._clean();this.manipulationDOM={};if(this.guiEnabled===true){this.editMode=true;this.manipulationDiv.style.display='block';this.closeDiv.style.display='block';var selectedNodeCount=this.selectionHandler._getSelectedNodeCount();var selectedEdgeCount=this.selectionHandler._getSelectedEdgeCount();var selectedTotalCount=selectedNodeCount+selectedEdgeCount;var locale=this.options.locales[this.options.locale];var needSeperator=false;if(this.options.addNode!==false){this._createAddNodeButton(locale);needSeperator=true;}
if(this.options.addEdge!==false){if(needSeperator===true){this._createSeperator(1);}else{needSeperator=true;}
this._createAddEdgeButton(locale);}
if(selectedNodeCount===1&&typeof this.options.editNode==='function'){if(needSeperator===true){this._createSeperator(2);}else{needSeperator=true;}
this._createEditNodeButton(locale);}else if(selectedEdgeCount===1&&selectedNodeCount===0&&this.options.editEdge!==false){if(needSeperator===true){this._createSeperator(3);}else{needSeperator=true;}
this._createEditEdgeButton(locale);}
if(selectedTotalCount!==0){if(selectedNodeCount===1&&this.options.deleteNode!==false){if(needSeperator===true){this._createSeperator(4);}
this._createDeleteButton(locale);}else if(selectedNodeCount===0&&this.options.deleteEdge!==false){if(needSeperator===true){this._createSeperator(4);}
this._createDeleteButton(locale);}}
this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this));this._temporaryBindEvent('select',this.showManipulatorToolbar.bind(this));}
this.body.emitter.emit('_redraw');}},{key:'addNodeMode',value:function addNodeMode(){if(this.editMode!==true){this.enableEditMode();}
this._clean();this.inMode='addNode';if(this.guiEnabled===true){var locale=this.options.locales[this.options.locale];this.manipulationDOM={};this._createBackButton(locale);this._createSeperator();this._createDescription(locale['addDescription']||this.options.locales['en']['addDescription']);this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this));}
this._temporaryBindEvent('click',this._performAddNode.bind(this));}},{key:'editNode',value:function editNode(){var _this2=this;if(this.editMode!==true){this.enableEditMode();}
this._clean();var node=this.selectionHandler._getSelectedNode();if(node!==undefined){this.inMode='editNode';if(typeof this.options.editNode==='function'){if(node.isCluster!==true){var data=util.deepExtend({},node.options,true);data.x=node.x;data.y=node.y;if(this.options.editNode.length===2){this.options.editNode(data,function(finalizedData){if(finalizedData!==null&&finalizedData!==undefined&&_this2.inMode==='editNode'){_this2.body.data.nodes.getDataSet().update(finalizedData);}
_this2.showManipulatorToolbar();});}else{throw new Error('The function for edit does not support two arguments (data, callback)');}}else{alert(this.options.locales[this.options.locale]['editClusterError']||this.options.locales['en']['editClusterError']);}}else{throw new Error('No function has been configured to handle the editing of nodes.');}}else{this.showManipulatorToolbar();}}},{key:'addEdgeMode',value:function addEdgeMode(){if(this.editMode!==true){this.enableEditMode();}
this._clean();this.inMode='addEdge';if(this.guiEnabled===true){var locale=this.options.locales[this.options.locale];this.manipulationDOM={};this._createBackButton(locale);this._createSeperator();this._createDescription(locale['edgeDescription']||this.options.locales['en']['edgeDescription']);this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this));}
this._temporaryBindUI('onTouch',this._handleConnect.bind(this));this._temporaryBindUI('onDragEnd',this._finishConnect.bind(this));this._temporaryBindUI('onDrag',this._dragControlNode.bind(this));this._temporaryBindUI('onRelease',this._finishConnect.bind(this));this._temporaryBindUI('onDragStart',function(){});this._temporaryBindUI('onHold',function(){});}},{key:'editEdgeMode',value:function editEdgeMode(){var _this3=this;if(this.editMode!==true){this.enableEditMode();}
this._clean();this.inMode='editEdge';if(this.guiEnabled===true){var locale=this.options.locales[this.options.locale];this.manipulationDOM={};this._createBackButton(locale);this._createSeperator();this._createDescription(locale['editEdgeDescription']||this.options.locales['en']['editEdgeDescription']);this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this));}
this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0];if(this.edgeBeingEditedId!==undefined){(function(){var edge=_this3.body.edges[_this3.edgeBeingEditedId];var controlNodeFrom=_this3._getNewTargetNode(edge.from.x,edge.from.y);var controlNodeTo=_this3._getNewTargetNode(edge.to.x,edge.to.y);_this3.temporaryIds.nodes.push(controlNodeFrom.id);_this3.temporaryIds.nodes.push(controlNodeTo.id);_this3.body.nodes[controlNodeFrom.id]=controlNodeFrom;_this3.body.nodeIndices.push(controlNodeFrom.id);_this3.body.nodes[controlNodeTo.id]=controlNodeTo;_this3.body.nodeIndices.push(controlNodeTo.id);_this3._temporaryBindUI('onTouch',_this3._controlNodeTouch.bind(_this3));_this3._temporaryBindUI('onTap',function(){});_this3._temporaryBindUI('onHold',function(){});_this3._temporaryBindUI('onDragStart',_this3._controlNodeDragStart.bind(_this3));_this3._temporaryBindUI('onDrag',_this3._controlNodeDrag.bind(_this3));_this3._temporaryBindUI('onDragEnd',_this3._controlNodeDragEnd.bind(_this3));_this3._temporaryBindUI('onMouseMove',function(){});_this3._temporaryBindEvent('beforeDrawing',function(ctx){var positions=edge.edgeType.findBorderPositions(ctx);if(controlNodeFrom.selected===false){controlNodeFrom.x=positions.from.x;controlNodeFrom.y=positions.from.y;}
if(controlNodeTo.selected===false){controlNodeTo.x=positions.to.x;controlNodeTo.y=positions.to.y;}});_this3.body.emitter.emit('_redraw');})();}else{this.showManipulatorToolbar();}}},{key:'deleteSelected',value:function deleteSelected(){var _this4=this;if(this.editMode!==true){this.enableEditMode();}
this._clean();this.inMode='delete';var selectedNodes=this.selectionHandler.getSelectedNodes();var selectedEdges=this.selectionHandler.getSelectedEdges();var deleteFunction=undefined;if(selectedNodes.length>0){for(var i=0;i<selectedNodes.length;i++){if(this.body.nodes[selectedNodes[i]].isCluster===true){alert(this.options.locales[this.options.locale]['deleteClusterError']||this.options.locales['en']['deleteClusterError']);return;}}
if(typeof this.options.deleteNode==='function'){deleteFunction=this.options.deleteNode;}}else if(selectedEdges.length>0){if(typeof this.options.deleteEdge==='function'){deleteFunction=this.options.deleteEdge;}}
if(typeof deleteFunction==='function'){var data={nodes:selectedNodes,edges:selectedEdges};if(deleteFunction.length===2){deleteFunction(data,function(finalizedData){if(finalizedData!==null&&finalizedData!==undefined&&_this4.inMode==='delete'){_this4.body.data.edges.getDataSet().remove(finalizedData.edges);_this4.body.data.nodes.getDataSet().remove(finalizedData.nodes);_this4.body.emitter.emit('startSimulation');_this4.showManipulatorToolbar();}});}else{throw new Error('The function for delete does not support two arguments (data, callback)');}}else{this.body.data.edges.getDataSet().remove(selectedEdges);this.body.data.nodes.getDataSet().remove(selectedNodes);this.body.emitter.emit('startSimulation');this.showManipulatorToolbar();}}},{key:'_setup',value:function _setup(){if(this.options.enabled===true){this.guiEnabled=true;this._createWrappers();if(this.editMode===false){this._createEditButton();}else{this.showManipulatorToolbar();}}else{this._removeManipulationDOM();this.guiEnabled=false;}}},{key:'_createWrappers',value:function _createWrappers(){if(this.manipulationDiv===undefined){this.manipulationDiv=document.createElement('div');this.manipulationDiv.className='vis-manipulation';if(this.editMode===true){this.manipulationDiv.style.display='block';}else{this.manipulationDiv.style.display='none';}
this.canvas.frame.appendChild(this.manipulationDiv);}
if(this.editModeDiv===undefined){this.editModeDiv=document.createElement('div');this.editModeDiv.className='vis-edit-mode';if(this.editMode===true){this.editModeDiv.style.display='none';}else{this.editModeDiv.style.display='block';}
this.editModeDiv.appendChild(this._createIcon('fa-pencil'))
this.canvas.frame.appendChild(this.editModeDiv);}
if(this.closeDiv===undefined){this.closeDiv=document.createElement('div');this.closeDiv.className='vis-close';this.closeDiv.style.display=this.manipulationDiv.style.display;this.closeDiv.appendChild(this._createIcon('fa-times'))
this.canvas.frame.appendChild(this.closeDiv);}}},{key:'_getNewTargetNode',value:function _getNewTargetNode(x,y){var controlNodeStyle=util.deepExtend({},this.options.controlNodeStyle);controlNodeStyle.id='targetNode'+util.randomUUID();controlNodeStyle.hidden=false;controlNodeStyle.physics=false;controlNodeStyle.x=x;controlNodeStyle.y=y;return this.body.functions.createNode(controlNodeStyle);}},{key:'_createEditButton',value:function _createEditButton(){this._clean();this.manipulationDOM={};util.recursiveDOMDelete(this.editModeDiv);var locale=this.options.locales[this.options.locale];var button=this._createButton('editMode','vis-button vis-edit vis-edit-mode',locale['edit']||this.options.locales['en']['edit'],'fa-pencil');this.editModeDiv.appendChild(button);this._bindHammerToDiv(button,this.toggleEditMode.bind(this));}},{key:'_clean',value:function _clean(){this.inMode=false;if(this.guiEnabled===true){util.recursiveDOMDelete(this.editModeDiv);util.recursiveDOMDelete(this.manipulationDiv);this._cleanManipulatorHammers();}
this._cleanupTemporaryNodesAndEdges();this._unbindTemporaryUIs();this._unbindTemporaryEvents();this.body.emitter.emit('restorePhysics');}},{key:'_cleanManipulatorHammers',value:function _cleanManipulatorHammers(){if(this.manipulationHammers.length!=0){for(var i=0;i<this.manipulationHammers.length;i++){this.manipulationHammers[i].destroy();}
this.manipulationHammers=[];}}},{key:'_removeManipulationDOM',value:function _removeManipulationDOM(){this._clean();util.recursiveDOMDelete(this.manipulationDiv);util.recursiveDOMDelete(this.editModeDiv);util.recursiveDOMDelete(this.closeDiv);if(this.manipulationDiv){this.canvas.frame.removeChild(this.manipulationDiv);}
if(this.editModeDiv){this.canvas.frame.removeChild(this.editModeDiv);}
if(this.closeDiv){this.canvas.frame.removeChild(this.manipulationDiv);}
this.manipulationDiv=undefined;this.editModeDiv=undefined;this.closeDiv=undefined;}},{key:'_createSeperator',value:function _createSeperator(){var index=arguments[0]===undefined?1:arguments[0];this.manipulationDOM['seperatorLineDiv'+index]=document.createElement('div');this.manipulationDOM['seperatorLineDiv'+index].className='vis-separator-line';this.manipulationDiv.appendChild(this.manipulationDOM['seperatorLineDiv'+index]);}},{key:'_createAddNodeButton',value:function _createAddNodeButton(locale){var button=this._createButton('addNode','vis-button vis-add',locale['addNode']||this.options.locales['en']['addNode'],'fa-plus');this.manipulationDiv.appendChild(button);this._bindHammerToDiv(button,this.addNodeMode.bind(this));}},{key:'_createAddEdgeButton',value:function _createAddEdgeButton(locale){var button=this._createButton('addEdge','vis-button vis-connect',locale['addEdge']||this.options.locales['en']['addEdge'],'fa-plus');this.manipulationDiv.appendChild(button);this._bindHammerToDiv(button,this.addEdgeMode.bind(this));}},{key:'_createEditNodeButton',value:function _createEditNodeButton(locale){var button=this._createButton('editNode','vis-button vis-edit',locale['editNode']||this.options.locales['en']['editNode'],'fa-pencil');this.manipulationDiv.appendChild(button);this._bindHammerToDiv(button,this.editNode.bind(this));}},{key:'_createEditEdgeButton',value:function _createEditEdgeButton(locale){var button=this._createButton('editEdge','vis-button vis-edit',locale['editEdge']||this.options.locales['en']['editEdge'],'fa-pencil');this.manipulationDiv.appendChild(button);this._bindHammerToDiv(button,this.editEdgeMode.bind(this));}},{key:'_createDeleteButton',value:function _createDeleteButton(locale){var button=this._createButton('delete','vis-button vis-delete',locale['del']||this.options.locales['en']['del'],'fa-minus');this.manipulationDiv.appendChild(button);this._bindHammerToDiv(button,this.deleteSelected.bind(this));}},{key:'_createBackButton',value:function _createBackButton(locale){var button=this._createButton('back','vis-button vis-back',locale['back']||this.options.locales['en']['back'],'fa-arrow-left');this.manipulationDiv.appendChild(button);this._bindHammerToDiv(button,this.showManipulatorToolbar.bind(this));}},{key:'_createButton',value:function _createButton(id,className,label,iconClass){var labelClassName=arguments[4]===undefined?'vis-label':arguments[4];this.manipulationDOM[id+'Div']=document.createElement('div');this.manipulationDOM[id+'Div'].className=className;this.manipulationDOM[id+'Label']=document.createElement('div');this.manipulationDOM[id+'Label'].className=labelClassName;var labelElement=document.createElement('span')
if(typeof iconClass!='undefined'&&iconClass!=''){var iconElement=this._createIcon(iconClass);this.manipulationDOM[id+'Label'].appendChild(iconElement);labelElement.style.fontFamily='inherit';labelElement.style.fontSize='0.9em';labelElement.style.marginLeft='5px';}
labelElement.innerHTML=label;this.manipulationDOM[id+'Label'].appendChild(labelElement);this.manipulationDOM[id+'Div'].appendChild(this.manipulationDOM[id+'Label']);return this.manipulationDOM[id+'Div'];}},{key:'_createDescription',value:function _createDescription(label){this.manipulationDiv.appendChild(this._createButton('description','vis-button vis-none',label,''));}},{key:'_createIcon',value:function _createIcon(iconClass){var newIcon=document.createElement('i');newIcon.classList.add('fa');newIcon.classList.add(iconClass);return newIcon}},{key:'_temporaryBindEvent',value:function _temporaryBindEvent(event,newFunction){this.temporaryEventFunctions.push({event:event,boundFunction:newFunction});this.body.emitter.on(event,newFunction);}},{key:'_temporaryBindUI',value:function _temporaryBindUI(UIfunctionName,newFunction){if(this.body.eventListeners[UIfunctionName]!==undefined){this.temporaryUIFunctions[UIfunctionName]=this.body.eventListeners[UIfunctionName];this.body.eventListeners[UIfunctionName]=newFunction;}else{throw new Error('This UI function does not exist. Typo? You tried: '+UIfunctionName+' possible are: '+JSON.stringify(Object.keys(this.body.eventListeners)));}}},{key:'_unbindTemporaryUIs',value:function _unbindTemporaryUIs(){for(var functionName in this.temporaryUIFunctions){if(this.temporaryUIFunctions.hasOwnProperty(functionName)){this.body.eventListeners[functionName]=this.temporaryUIFunctions[functionName];delete this.temporaryUIFunctions[functionName];}}
this.temporaryUIFunctions={};}},{key:'_unbindTemporaryEvents',value:function _unbindTemporaryEvents(){for(var i=0;i<this.temporaryEventFunctions.length;i++){var eventName=this.temporaryEventFunctions[i].event;var boundFunction=this.temporaryEventFunctions[i].boundFunction;this.body.emitter.off(eventName,boundFunction);}
this.temporaryEventFunctions=[];}},{key:'_bindHammerToDiv',value:function _bindHammerToDiv(domElement,boundFunction){var hammer=new Hammer(domElement,{});hammerUtil.onTouch(hammer,boundFunction);this.manipulationHammers.push(hammer);}},{key:'_cleanupTemporaryNodesAndEdges',value:function _cleanupTemporaryNodesAndEdges(){for(var i=0;i<this.temporaryIds.edges.length;i++){this.body.edges[this.temporaryIds.edges[i]].disconnect();delete this.body.edges[this.temporaryIds.edges[i]];var indexTempEdge=this.body.edgeIndices.indexOf(this.temporaryIds.edges[i]);if(indexTempEdge!==-1){this.body.edgeIndices.splice(indexTempEdge,1);}}
for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var indexTempNode=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);if(indexTempNode!==-1){this.body.nodeIndices.splice(indexTempNode,1);}}
this.temporaryIds={nodes:[],edges:[]};}},{key:'_controlNodeTouch',value:function _controlNodeTouch(event){this.selectionHandler.unselectAll();this.lastTouch=this.body.functions.getPointer(event.center);this.lastTouch.translation=util.extend({},this.body.view.translation);}},{key:'_controlNodeDragStart',value:function _controlNodeDragStart(event){var pointer=this.lastTouch;var pointerObj=this.selectionHandler._pointerToPositionObject(pointer);var from=this.body.nodes[this.temporaryIds.nodes[0]];var to=this.body.nodes[this.temporaryIds.nodes[1]];var edge=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=undefined;var fromSelect=from.isOverlappingWith(pointerObj);var toSelect=to.isOverlappingWith(pointerObj);if(fromSelect===true){this.selectedControlNode=from;edge.edgeType.from=from;}else if(toSelect===true){this.selectedControlNode=to;edge.edgeType.to=to;}
this.body.emitter.emit('_redraw');}},{key:'_controlNodeDrag',value:function _controlNodeDrag(event){this.body.emitter.emit('disablePhysics');var pointer=this.body.functions.getPointer(event.center);var pos=this.canvas.DOMtoCanvas(pointer);if(this.selectedControlNode!==undefined){this.selectedControlNode.x=pos.x;this.selectedControlNode.y=pos.y;}else{var diffX=pointer.x-this.lastTouch.x;var diffY=pointer.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+diffX,y:this.lastTouch.translation.y+diffY};}
this.body.emitter.emit('_redraw');}},{key:'_controlNodeDragEnd',value:function _controlNodeDragEnd(event){var pointer=this.body.functions.getPointer(event.center);var pointerObj=this.selectionHandler._pointerToPositionObject(pointer);var edge=this.body.edges[this.edgeBeingEditedId];var overlappingNodeIds=this.selectionHandler._getAllNodesOverlappingWith(pointerObj);var node=undefined;for(var i=overlappingNodeIds.length-1;i>=0;i--){if(overlappingNodeIds[i]!==this.selectedControlNode.id){node=this.body.nodes[overlappingNodeIds[i]];break;}}
if(node!==undefined&&this.selectedControlNode!==undefined){if(node.isCluster===true){alert(this.options.locales[this.options.locale]['createEdgeError']||this.options.locales['en']['createEdgeError']);}else{var from=this.body.nodes[this.temporaryIds.nodes[0]];if(this.selectedControlNode.id===from.id){this._performEditEdge(node.id,edge.to.id);}else{this._performEditEdge(edge.from.id,node.id);}}}else{edge.updateEdgeType();this.body.emitter.emit('restorePhysics');}
this.body.emitter.emit('_redraw');}},{key:'_handleConnect',value:function _handleConnect(event){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(event.center);this.lastTouch.translation=util.extend({},this.body.view.translation);var pointer=this.lastTouch;var node=this.selectionHandler.getNodeAt(pointer);if(node!==undefined){if(node.isCluster===true){alert(this.options.locales[this.options.locale]['createEdgeError']||this.options.locales['en']['createEdgeError']);}else{var targetNode=this._getNewTargetNode(node.x,node.y);this.body.nodes[targetNode.id]=targetNode;this.body.nodeIndices.push(targetNode.id);var connectionEdge=this.body.functions.createEdge({id:'connectionEdge'+util.randomUUID(),from:node.id,to:targetNode.id,physics:false,smooth:{enabled:true,type:'continuous',roundness:0.5}});this.body.edges[connectionEdge.id]=connectionEdge;this.body.edgeIndices.push(connectionEdge.id);this.temporaryIds.nodes.push(targetNode.id);this.temporaryIds.edges.push(connectionEdge.id);}}
this.touchTime=new Date().valueOf();}}},{key:'_dragControlNode',value:function _dragControlNode(event){var pointer=this.body.functions.getPointer(event.center);if(this.temporaryIds.nodes[0]!==undefined){var targetNode=this.body.nodes[this.temporaryIds.nodes[0]];targetNode.x=this.canvas._XconvertDOMtoCanvas(pointer.x);targetNode.y=this.canvas._YconvertDOMtoCanvas(pointer.y);this.body.emitter.emit('_redraw');}else{var diffX=pointer.x-this.lastTouch.x;var diffY=pointer.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+diffX,y:this.lastTouch.translation.y+diffY};}}},{key:'_finishConnect',value:function _finishConnect(event){var pointer=this.body.functions.getPointer(event.center);var pointerObj=this.selectionHandler._pointerToPositionObject(pointer);var connectFromId=undefined;if(this.temporaryIds.edges[0]!==undefined){connectFromId=this.body.edges[this.temporaryIds.edges[0]].fromId;}
var overlappingNodeIds=this.selectionHandler._getAllNodesOverlappingWith(pointerObj);var node=undefined;for(var i=overlappingNodeIds.length-1;i>=0;i--){if(this.temporaryIds.nodes.indexOf(overlappingNodeIds[i])===-1){node=this.body.nodes[overlappingNodeIds[i]];break;}}
this._cleanupTemporaryNodesAndEdges();if(node!==undefined){if(node.isCluster===true){alert(this.options.locales[this.options.locale]['createEdgeError']||this.options.locales['en']['createEdgeError']);}else{if(this.body.nodes[connectFromId]!==undefined&&this.body.nodes[node.id]!==undefined){this._performAddEdge(connectFromId,node.id);}}}
this.body.emitter.emit('_redraw');}},{key:'_performAddNode',value:function _performAddNode(clickData){var _this5=this;var defaultData={id:util.randomUUID(),x:clickData.pointer.canvas.x,y:clickData.pointer.canvas.y,label:'new'};if(typeof this.options.addNode==='function'){if(this.options.addNode.length===2){this.options.addNode(defaultData,function(finalizedData){if(finalizedData!==null&&finalizedData!==undefined&&_this5.inMode==='addNode'){_this5.body.data.nodes.getDataSet().add(finalizedData);_this5.showManipulatorToolbar();}});}else{throw new Error('The function for add does not support two arguments (data,callback)');this.showManipulatorToolbar();}}else{this.body.data.nodes.getDataSet().add(defaultData);this.showManipulatorToolbar();}}},{key:'_performAddEdge',value:function _performAddEdge(sourceNodeId,targetNodeId){var _this6=this;var defaultData={from:sourceNodeId,to:targetNodeId};if(typeof this.options.addEdge==='function'){if(this.options.addEdge.length===2){this.options.addEdge(defaultData,function(finalizedData){if(finalizedData!==null&&finalizedData!==undefined&&_this6.inMode==='addEdge'){_this6.body.data.edges.add(finalizedData);_this6.selectionHandler.unselectAll();_this6.showManipulatorToolbar();}});}else{throw new Error('The function for connect does not support two arguments (data,callback)');}}else{this.body.data.edges.add(defaultData);this.selectionHandler.unselectAll();this.showManipulatorToolbar();}}},{key:'_performEditEdge',value:function _performEditEdge(sourceNodeId,targetNodeId){var _this7=this;var defaultData={id:this.edgeBeingEditedId,from:sourceNodeId,to:targetNodeId};if(typeof this.options.editEdge==='function'){if(this.options.editEdge.length===2){this.options.editEdge(defaultData,function(finalizedData){if(finalizedData===null||finalizedData===undefined||_this7.inMode!=='editEdge'){_this7.body.edges[defaultData.id].updateEdgeType();_this7.body.emitter.emit('_redraw');}else{_this7.body.data.edges.update(finalizedData);_this7.selectionHandler.unselectAll();_this7.showManipulatorToolbar();}});}else{throw new Error('The function for edit does not support two arguments (data, callback)');}}else{this.body.data.edges.update(defaultData);this.selectionHandler.unselectAll();this.showManipulatorToolbar();}}}]);return ManipulationSystem;})();exports['default']=ManipulationSystem;module.exports=exports['default'];},function(module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var string='string';var boolean='boolean';var number='number';var array='array';var object='object';var dom='dom';var any='any';var allOptions={configure:{enabled:{boolean:boolean},filter:{boolean:boolean,string:string,array:array,'function':'function'},container:{dom:dom},showButton:{boolean:boolean},__type__:{object:object,boolean:boolean,string:string,array:array,'function':'function'}},edges:{arrows:{to:{enabled:{boolean:boolean},scaleFactor:{number:number},__type__:{object:object,boolean:boolean}},middle:{enabled:{boolean:boolean},scaleFactor:{number:number},__type__:{object:object,boolean:boolean}},from:{enabled:{boolean:boolean},scaleFactor:{number:number},__type__:{object:object,boolean:boolean}},__type__:{string:['from','to','middle'],object:object}},color:{color:{string:string},highlight:{string:string},hover:{string:string},inherit:{string:['from','to','both'],boolean:boolean},opacity:{number:number},__type__:{object:object,string:string}},dashes:{boolean:boolean,array:array},font:{color:{string:string},size:{number:number},face:{string:string},background:{string:string},strokeWidth:{number:number},strokeColor:{string:string},align:{string:['horizontal','top','middle','bottom']},__type__:{object:object,string:string}},hidden:{boolean:boolean},hoverWidth:{'function':'function',number:number},label:{string:string,'undefined':'undefined'},length:{number:number,'undefined':'undefined'},physics:{boolean:boolean},scaling:{min:{number:number},max:{number:number},label:{enabled:{boolean:boolean},min:{number:number},max:{number:number},maxVisible:{number:number},drawThreshold:{number:number},__type__:{object:object,boolean:boolean}},customScalingFunction:{'function':'function'},__type__:{object:object}},selectionWidth:{'function':'function',number:number},selfReferenceSize:{number:number},shadow:{enabled:{boolean:boolean},size:{number:number},x:{number:number},y:{number:number},__type__:{object:object,boolean:boolean}},smooth:{enabled:{boolean:boolean},type:{string:['dynamic','continuous','discrete','diagonalCross','straightCross','horizontal','vertical','curvedCW','curvedCCW']},roundness:{number:number},__type__:{object:object,boolean:boolean}},title:{string:string,'undefined':'undefined'},width:{number:number},value:{number:number,'undefined':'undefined'},__type__:{object:object}},groups:{useDefaultGroups:{boolean:boolean},__any__:'get from nodes, will be overwritten below',__type__:{object:object}},interaction:{dragNodes:{boolean:boolean},dragView:{boolean:boolean},hideEdgesOnDrag:{boolean:boolean},hideNodesOnDrag:{boolean:boolean},hover:{boolean:boolean},keyboard:{enabled:{boolean:boolean},speed:{x:{number:number},y:{number:number},zoom:{number:number},__type__:{object:object}},bindToWindow:{boolean:boolean},__type__:{object:object,boolean:boolean}},multiselect:{boolean:boolean},navigationButtons:{boolean:boolean},selectable:{boolean:boolean},selectConnectedEdges:{boolean:boolean},hoverConnectedEdges:{boolean:boolean},tooltipDelay:{number:number},zoomView:{boolean:boolean},__type__:{object:object}},layout:{randomSeed:{'undefined':'undefined',number:number},hierarchical:{enabled:{boolean:boolean},levelSeparation:{number:number},direction:{string:['UD','DU','LR','RL']},sortMethod:{string:['hubsize','directed']},__type__:{object:object,boolean:boolean}},__type__:{object:object}},manipulation:{enabled:{boolean:boolean},initiallyActive:{boolean:boolean},addNode:{boolean:boolean,'function':'function'},addEdge:{boolean:boolean,'function':'function'},editNode:{'function':'function'},editEdge:{boolean:boolean,'function':'function'},deleteNode:{boolean:boolean,'function':'function'},deleteEdge:{boolean:boolean,'function':'function'},controlNodeStyle:'get from nodes, will be overwritten below',__type__:{object:object,boolean:boolean}},nodes:{borderWidth:{number:number},borderWidthSelected:{number:number,'undefined':'undefined'},brokenImage:{string:string,'undefined':'undefined'},color:{border:{string:string},background:{string:string},highlight:{border:{string:string},background:{string:string},__type__:{object:object,string:string}},hover:{border:{string:string},background:{string:string},__type__:{object:object,string:string}},__type__:{object:object,string:string}},fixed:{x:{boolean:boolean},y:{boolean:boolean},__type__:{object:object,boolean:boolean}},font:{color:{string:string},size:{number:number},face:{string:string},background:{string:string},strokeWidth:{number:number},strokeColor:{string:string},__type__:{object:object,string:string}},group:{string:string,number:number,'undefined':'undefined'},hidden:{boolean:boolean},icon:{face:{string:string},code:{string:string},size:{number:number},color:{string:string},__type__:{object:object}},id:{string:string,number:number},image:{string:string,'undefined':'undefined'},label:{string:string,'undefined':'undefined'},level:{number:number,'undefined':'undefined'},mass:{number:number},physics:{boolean:boolean},scaling:{min:{number:number},max:{number:number},label:{enabled:{boolean:boolean},min:{number:number},max:{number:number},maxVisible:{number:number},drawThreshold:{number:number},__type__:{object:object,boolean:boolean}},customScalingFunction:{'function':'function'},__type__:{object:object}},shadow:{enabled:{boolean:boolean},size:{number:number},x:{number:number},y:{number:number},__type__:{object:object,boolean:boolean}},shape:{string:['ellipse','circle','database','box','text','image','circularImage','diamond','dot','star','triangle','triangleDown','square','icon']},size:{number:number},title:{string:string,'undefined':'undefined'},value:{number:number,'undefined':'undefined'},x:{number:number},y:{number:number},__type__:{object:object}},physics:{enabled:{boolean:boolean},barnesHut:{gravitationalConstant:{number:number},centralGravity:{number:number},springLength:{number:number},springConstant:{number:number},damping:{number:number},avoidOverlap:{number:number},__type__:{object:object}},forceAtlas2Based:{gravitationalConstant:{number:number},centralGravity:{number:number},springLength:{number:number},springConstant:{number:number},damping:{number:number},avoidOverlap:{number:number},__type__:{object:object}},repulsion:{centralGravity:{number:number},springLength:{number:number},springConstant:{number:number},nodeDistance:{number:number},damping:{number:number},__type__:{object:object}},hierarchicalRepulsion:{centralGravity:{number:number},springLength:{number:number},springConstant:{number:number},nodeDistance:{number:number},damping:{number:number},__type__:{object:object}},maxVelocity:{number:number},minVelocity:{number:number},solver:{string:['barnesHut','repulsion','hierarchicalRepulsion','forceAtlas2Based']},stabilization:{enabled:{boolean:boolean},iterations:{number:number},updateInterval:{number:number},onlyDynamicEdges:{boolean:boolean},fit:{boolean:boolean},__type__:{object:object,boolean:boolean}},timestep:{number:number},__type__:{object:object,boolean:boolean}},autoResize:{boolean:boolean},clickToUse:{boolean:boolean},locale:{string:string},locales:{__any__:{any:any},__type__:{object:object}},height:{string:string},width:{string:string},__type__:{object:object}};allOptions.groups.__any__=allOptions.nodes;allOptions.manipulation.controlNodeStyle=allOptions.nodes;var configureOptions={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:['color','#2B7CE9'],background:['color','#97C2FC'],highlight:{border:['color','#2B7CE9'],background:['color','#D2E5FF']},hover:{border:['color','#2B7CE9'],background:['color','#D2E5FF']}},fixed:{x:false,y:false},font:{color:['color','#343434'],size:[14,0,100,1],face:['arial','verdana','tahoma'],background:['color','none'],strokeWidth:[0,0,50,1],strokeColor:['color','#ffffff']},hidden:false,physics:true,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:false,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:false,size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:['ellipse','box','circle','database','diamond','dot','square','star','text','triangle','triangleDown'],size:[25,0,200,1]},edges:{arrows:{to:{enabled:false,scaleFactor:[1,0,3,0.05]},middle:{enabled:false,scaleFactor:[1,0,3,0.05]},from:{enabled:false,scaleFactor:[1,0,3,0.05]}},color:{color:['color','#848484'],highlight:['color','#848484'],hover:['color','#848484'],inherit:['from','to','both',true,false],opacity:[1,0,1,0.05]},dashes:false,font:{color:['color','#343434'],size:[14,0,100,1],face:['arial','verdana','tahoma'],background:['color','none'],strokeWidth:[2,0,50,1],strokeColor:['color','#ffffff'],align:['horizontal','top','middle','bottom']},hidden:false,hoverWidth:[1.5,0,5,0.1],physics:true,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:true,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,0.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:false,size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:true,type:['dynamic','continuous','discrete','diagonalCross','straightCross','horizontal','vertical','curvedCW','curvedCCW'],roundness:[0.5,0,1,0.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:false,levelSeparation:[150,20,500,5],direction:['UD','DU','LR','RL'],sortMethod:['hubsize','directed']}},interaction:{dragNodes:true,dragView:true,hideEdgesOnDrag:false,hideNodesOnDrag:false,hover:false,keyboard:{enabled:false,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[0.02,0,0.1,0.005]},bindToWindow:true},multiselect:false,navigationButtons:false,selectable:true,selectConnectedEdges:true,hoverConnectedEdges:true,tooltipDelay:[300,0,1000,25],zoomView:true},manipulation:{enabled:false,initiallyActive:false},physics:{enabled:true,barnesHut:{gravitationalConstant:[-2000,-30000,0,50],centralGravity:[0.3,0,10,0.05],springLength:[95,0,500,5],springConstant:[0.04,0,1.2,0.005],damping:[0.09,0,1,0.01],avoidOverlap:[0,0,1,0.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[0.01,0,1,0.005],springLength:[95,0,500,5],springConstant:[0.08,0,1.2,0.005],damping:[0.4,0,1,0.01],avoidOverlap:[0,0,1,0.01]},repulsion:{centralGravity:[0.2,0,10,0.05],springLength:[200,0,500,5],springConstant:[0.05,0,1.2,0.005],nodeDistance:[100,0,500,5],damping:[0.09,0,1,0.01]},hierarchicalRepulsion:{centralGravity:[0.2,0,10,0.05],springLength:[100,0,500,5],springConstant:[0.01,0,1.2,0.005],nodeDistance:[120,0,500,5],damping:[0.09,0,1,0.01]},maxVelocity:[50,0,150,1],minVelocity:[0.1,0.01,0.5,0.01],solver:['barnesHut','forceAtlas2Based','repulsion','hierarchicalRepulsion'],timestep:[0.5,0.01,1,0.01]},global:{locale:['en','nl']}};exports.allOptions=allOptions;exports.configureOptions=configureOptions;},function(module,exports){'use strict';if(typeof CanvasRenderingContext2D!=='undefined'){CanvasRenderingContext2D.prototype.circle=function(x,y,r){this.beginPath();this.arc(x,y,r,0,2*Math.PI,false);this.closePath();};CanvasRenderingContext2D.prototype.square=function(x,y,r){this.beginPath();this.rect(x-r,y-r,r*2,r*2);this.closePath();};CanvasRenderingContext2D.prototype.triangle=function(x,y,r){this.beginPath();r*=1.15;y+=0.275*r;var s=r*2;var s2=s/2;var ir=Math.sqrt(3)/6*s;var h=Math.sqrt(s*s-s2*s2);this.moveTo(x,y-(h-ir));this.lineTo(x+s2,y+ir);this.lineTo(x-s2,y+ir);this.lineTo(x,y-(h-ir));this.closePath();};CanvasRenderingContext2D.prototype.triangleDown=function(x,y,r){this.beginPath();r*=1.15;y-=0.275*r;var s=r*2;var s2=s/2;var ir=Math.sqrt(3)/6*s;var h=Math.sqrt(s*s-s2*s2);this.moveTo(x,y+(h-ir));this.lineTo(x+s2,y-ir);this.lineTo(x-s2,y-ir);this.lineTo(x,y+(h-ir));this.closePath();};CanvasRenderingContext2D.prototype.star=function(x,y,r){this.beginPath();r*=0.82;y+=0.1*r;for(var n=0;n<10;n++){var radius=n%2===0?r*1.3:r*0.5;this.lineTo(x+radius*Math.sin(n*2*Math.PI/10),y-radius*Math.cos(n*2*Math.PI/10));}
this.closePath();};CanvasRenderingContext2D.prototype.diamond=function(x,y,r){this.beginPath();this.lineTo(x,y+r);this.lineTo(x+r,y);this.lineTo(x,y-r);this.lineTo(x-r,y);this.closePath();};CanvasRenderingContext2D.prototype.roundRect=function(x,y,w,h,r){var r2d=Math.PI/180;if(w-2*r<0){r=w/2;}
if(h-2*r<0){r=h/2;}
this.beginPath();this.moveTo(x+r,y);this.lineTo(x+w-r,y);this.arc(x+w-r,y+r,r,r2d*270,r2d*360,false);this.lineTo(x+w,y+h-r);this.arc(x+w-r,y+h-r,r,0,r2d*90,false);this.lineTo(x+r,y+h);this.arc(x+r,y+h-r,r,r2d*90,r2d*180,false);this.lineTo(x,y+r);this.arc(x+r,y+r,r,r2d*180,r2d*270,false);this.closePath();};CanvasRenderingContext2D.prototype.ellipse=function(x,y,w,h){var kappa=0.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;this.beginPath();this.moveTo(x,ym);this.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);this.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);this.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);this.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);this.closePath();};CanvasRenderingContext2D.prototype.database=function(x,y,w,h){var f=1/3;var wEllipse=w;var hEllipse=h*f;var kappa=0.5522848,ox=wEllipse/2*kappa,oy=hEllipse/2*kappa,xe=x+wEllipse,ye=y+hEllipse,xm=x+wEllipse/2,ym=y+hEllipse/2,ymb=y+(h-hEllipse/2),yeb=y+h;this.beginPath();this.moveTo(xe,ym);this.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);this.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);this.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);this.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);this.lineTo(xe,ymb);this.bezierCurveTo(xe,ymb+oy,xm+ox,yeb,xm,yeb);this.bezierCurveTo(xm-ox,yeb,x,ymb+oy,x,ymb);this.lineTo(x,ym);};CanvasRenderingContext2D.prototype.arrow=function(x,y,angle,length){var xt=x-length*Math.cos(angle);var yt=y-length*Math.sin(angle);var xi=x-length*0.9*Math.cos(angle);var yi=y-length*0.9*Math.sin(angle);var xl=xt+length/3*Math.cos(angle+0.5*Math.PI);var yl=yt+length/3*Math.sin(angle+0.5*Math.PI);var xr=xt+length/3*Math.cos(angle-0.5*Math.PI);var yr=yt+length/3*Math.sin(angle-0.5*Math.PI);this.beginPath();this.moveTo(x,y);this.lineTo(xl,yl);this.lineTo(xi,yi);this.lineTo(xr,yr);this.closePath();};CanvasRenderingContext2D.prototype.dashedLine=function(x,y,x2,y2,pattern){this.beginPath();this.moveTo(x,y);var patternLength=pattern.length;var dx=x2-x;var dy=y2-y;var slope=dy/dx;var distRemaining=Math.sqrt(dx*dx+dy*dy);var patternIndex=0;var draw=true;var xStep=0;var dashLength=pattern[0];while(distRemaining>=0.1){dashLength=pattern[patternIndex++%patternLength];if(dashLength>distRemaining){dashLength=distRemaining;}
xStep=Math.sqrt(dashLength*dashLength/(1+slope*slope));xStep=dx<0?-xStep:xStep;x+=xStep;y+=slope*xStep;if(draw===true){this.lineTo(x,y);}else{this.moveTo(x,y);}
distRemaining-=dashLength;draw=!draw;}};}},function(module,exports){'use strict';function parseDOT(data){dot=data;return parseGraph();}
var NODE_ATTR_MAPPING={'fontsize':'font.size','fontcolor':'font.color','labelfontcolor':'font.color','fontname':'font.face','color':['color.border','color.background'],'fillcolor':'color.background','tooltip':'title','labeltooltip':'title'};var EDGE_ATTR_MAPPING=Object.create(NODE_ATTR_MAPPING);EDGE_ATTR_MAPPING.color='color.color';var TOKENTYPE={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3};var DELIMITERS={'{':true,'}':true,'[':true,']':true,';':true,'=':true,',':true,'->':true,'--':true};var dot='';var index=0;var c='';var token='';var tokenType=TOKENTYPE.NULL;function first(){index=0;c=dot.charAt(0);}
function next(){index++;c=dot.charAt(index);}
function nextPreview(){return dot.charAt(index+1);}
var regexAlphaNumeric=/[a-zA-Z_0-9.:#]/;function isAlphaNumeric(c){return regexAlphaNumeric.test(c);}
function merge(a,b){if(!a){a={};}
if(b){for(var name in b){if(b.hasOwnProperty(name)){a[name]=b[name];}}}
return a;}
function setValue(obj,path,value){var keys=path.split('.');var o=obj;while(keys.length){var key=keys.shift();if(keys.length){if(!o[key]){o[key]={};}
o=o[key];}else{o[key]=value;}}}
function addNode(graph,node){var i,len;var current=null;var graphs=[graph];var root=graph;while(root.parent){graphs.push(root.parent);root=root.parent;}
if(root.nodes){for(i=0,len=root.nodes.length;i<len;i++){if(node.id===root.nodes[i].id){current=root.nodes[i];break;}}}
if(!current){current={id:node.id};if(graph.node){current.attr=merge(current.attr,graph.node);}}
for(i=graphs.length-1;i>=0;i--){var g=graphs[i];if(!g.nodes){g.nodes=[];}
if(g.nodes.indexOf(current)===-1){g.nodes.push(current);}}
if(node.attr){current.attr=merge(current.attr,node.attr);}}
function addEdge(graph,edge){if(!graph.edges){graph.edges=[];}
graph.edges.push(edge);if(graph.edge){var attr=merge({},graph.edge);edge.attr=merge(attr,edge.attr);}}
function createEdge(graph,from,to,type,attr){var edge={from:from,to:to,type:type};if(graph.edge){edge.attr=merge({},graph.edge);}
edge.attr=merge(edge.attr||{},attr);return edge;}
function getToken(){tokenType=TOKENTYPE.NULL;token='';while(c===' '||c==='\t'||c==='\n'||c==='\r'){next();}
do{var isComment=false;if(c==='#'){var i=index-1;while(dot.charAt(i)===' '||dot.charAt(i)==='\t'){i--;}
if(dot.charAt(i)==='\n'||dot.charAt(i)===''){while(c!=''&&c!='\n'){next();}
isComment=true;}}
if(c==='/'&&nextPreview()==='/'){while(c!=''&&c!='\n'){next();}
isComment=true;}
if(c==='/'&&nextPreview()==='*'){while(c!=''){if(c==='*'&&nextPreview()==='/'){next();next();break;}else{next();}}
isComment=true;}
while(c===' '||c==='\t'||c==='\n'||c==='\r'){next();}}while(isComment);if(c===''){tokenType=TOKENTYPE.DELIMITER;return;}
var c2=c+nextPreview();if(DELIMITERS[c2]){tokenType=TOKENTYPE.DELIMITER;token=c2;next();next();return;}
if(DELIMITERS[c]){tokenType=TOKENTYPE.DELIMITER;token=c;next();return;}
if(isAlphaNumeric(c)||c==='-'){token+=c;next();while(isAlphaNumeric(c)){token+=c;next();}
if(token==='false'){token=false;}else if(token==='true'){token=true;}else if(!isNaN(Number(token))){token=Number(token);}
tokenType=TOKENTYPE.IDENTIFIER;return;}
if(c==='"'){next();while(c!=''&&(c!='"'||c==='"'&&nextPreview()==='"')){token+=c;if(c==='"'){next();}
next();}
if(c!='"'){throw newSyntaxError('End of string " expected');}
next();tokenType=TOKENTYPE.IDENTIFIER;return;}
tokenType=TOKENTYPE.UNKNOWN;while(c!=''){token+=c;next();}
throw new SyntaxError('Syntax error in part "'+chop(token,30)+'"');}
function parseGraph(){var graph={};first();getToken();if(token==='strict'){graph.strict=true;getToken();}
if(token==='graph'||token==='digraph'){graph.type=token;getToken();}
if(tokenType===TOKENTYPE.IDENTIFIER){graph.id=token;getToken();}
if(token!='{'){throw newSyntaxError('Angle bracket { expected');}
getToken();parseStatements(graph);if(token!='}'){throw newSyntaxError('Angle bracket } expected');}
getToken();if(token!==''){throw newSyntaxError('End of file expected');}
getToken();delete graph.node;delete graph.edge;delete graph.graph;return graph;}
function parseStatements(graph){while(token!==''&&token!='}'){parseStatement(graph);if(token===';'){getToken();}}}
function parseStatement(graph){var subgraph=parseSubgraph(graph);if(subgraph){parseEdge(graph,subgraph);return;}
var attr=parseAttributeStatement(graph);if(attr){return;}
if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError('Identifier expected');}
var id=token;getToken();if(token==='='){getToken();if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError('Identifier expected');}
graph[id]=token;getToken();}else{parseNodeStatement(graph,id);}}
function parseSubgraph(graph){var subgraph=null;if(token==='subgraph'){subgraph={};subgraph.type='subgraph';getToken();if(tokenType===TOKENTYPE.IDENTIFIER){subgraph.id=token;getToken();}}
if(token==='{'){getToken();if(!subgraph){subgraph={};}
subgraph.parent=graph;subgraph.node=graph.node;subgraph.edge=graph.edge;subgraph.graph=graph.graph;parseStatements(subgraph);if(token!='}'){throw newSyntaxError('Angle bracket } expected');}
getToken();delete subgraph.node;delete subgraph.edge;delete subgraph.graph;delete subgraph.parent;if(!graph.subgraphs){graph.subgraphs=[];}
graph.subgraphs.push(subgraph);}
return subgraph;}
function parseAttributeStatement(graph){if(token==='node'){getToken();graph.node=parseAttributeList();return'node';}else if(token==='edge'){getToken();graph.edge=parseAttributeList();return'edge';}else if(token==='graph'){getToken();graph.graph=parseAttributeList();return'graph';}
return null;}
function parseNodeStatement(graph,id){var node={id:id};var attr=parseAttributeList();if(attr){node.attr=attr;}
addNode(graph,node);parseEdge(graph,id);}
function parseEdge(graph,from){while(token==='->'||token==='--'){var to;var type=token;getToken();var subgraph=parseSubgraph(graph);if(subgraph){to=subgraph;}else{if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError('Identifier or subgraph expected');}
to=token;addNode(graph,{id:to});getToken();}
var attr=parseAttributeList();var edge=createEdge(graph,from,to,type,attr);addEdge(graph,edge);from=to;}}
function parseAttributeList(){var attr=null;while(token==='['){getToken();attr={};while(token!==''&&token!=']'){if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError('Attribute name expected');}
var name=token;getToken();if(token!='='){throw newSyntaxError('Equal sign = expected');}
getToken();if(tokenType!=TOKENTYPE.IDENTIFIER){throw newSyntaxError('Attribute value expected');}
var value=token;setValue(attr,name,value);getToken();if(token==','){getToken();}}
if(token!=']'){throw newSyntaxError('Bracket ] expected');}
getToken();}
return attr;}
function newSyntaxError(message){return new SyntaxError(message+', got "'+chop(token,30)+'" (char '+index+')');}
function chop(text,maxLength){return text.length<=maxLength?text:text.substr(0,27)+'...';}
function forEach2(array1,array2,fn){if(Array.isArray(array1)){array1.forEach(function(elem1){if(Array.isArray(array2)){array2.forEach(function(elem2){fn(elem1,elem2);});}else{fn(elem1,array2);}});}else{if(Array.isArray(array2)){array2.forEach(function(elem2){fn(array1,elem2);});}else{fn(array1,array2);}}}
function setProp(object,path,value){var names=path.split('.');var prop=names.pop();var obj=object;for(var i=0;i<names.length;i++){var name=names[i];if(!(name in obj)){obj[name]={};}
obj=obj[name];}
obj[prop]=value;return object;}
function convertAttr(attr,mapping){var converted={};for(var prop in attr){if(attr.hasOwnProperty(prop)){var visProp=mapping[prop];if(Array.isArray(visProp)){visProp.forEach(function(visPropI){setProp(converted,visPropI,attr[prop]);});}else if(typeof visProp==='string'){setProp(converted,visProp,attr[prop]);}else{setProp(converted,prop,attr[prop]);}}}
return converted;}
function DOTToGraph(data){var dotData=parseDOT(data);var graphData={nodes:[],edges:[],options:{}};if(dotData.nodes){dotData.nodes.forEach(function(dotNode){var graphNode={id:dotNode.id,label:String(dotNode.label||dotNode.id)};merge(graphNode,convertAttr(dotNode.attr,NODE_ATTR_MAPPING));if(graphNode.image){graphNode.shape='image';}
graphData.nodes.push(graphNode);});}
if(dotData.edges){var convertEdge=function convertEdge(dotEdge){var graphEdge={from:dotEdge.from,to:dotEdge.to};merge(graphEdge,convertAttr(dotEdge.attr,EDGE_ATTR_MAPPING));graphEdge.arrows=dotEdge.type==='->'?'to':undefined;return graphEdge;};dotData.edges.forEach(function(dotEdge){var from,to;if(dotEdge.from instanceof Object){from=dotEdge.from.nodes;}else{from={id:dotEdge.from};}
if(dotEdge.to instanceof Object){to=dotEdge.to.nodes;}else{to={id:dotEdge.to};}
if(dotEdge.from instanceof Object&&dotEdge.from.edges){dotEdge.from.edges.forEach(function(subEdge){var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge);});}
forEach2(from,to,function(from,to){var subEdge=createEdge(graphData,from.id,to.id,dotEdge.type,dotEdge.attr);var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge);});if(dotEdge.to instanceof Object&&dotEdge.to.edges){dotEdge.to.edges.forEach(function(subEdge){var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge);});}});}
if(dotData.attr){graphData.options=dotData.attr;}
return graphData;}
exports.parseDOT=parseDOT;exports.DOTToGraph=DOTToGraph;},function(module,exports){'use strict';function parseGephi(gephiJSON,optionsObj){var edges=[];var nodes=[];var options={edges:{inheritColor:false},nodes:{fixed:false,parseColor:false}};if(optionsObj!==undefined){if(optionsObj.fixed!==undefined){options.nodes.fixed=optionsObj.fixed;}
if(optionsObj.parseColor!==undefined){options.nodes.parseColor=optionsObj.parseColor;}
if(optionsObj.inheritColor!==undefined){options.edges.inheritColor=optionsObj.inheritColor;}}
var gEdges=gephiJSON.edges;var gNodes=gephiJSON.nodes;for(var i=0;i<gEdges.length;i++){var edge={};var gEdge=gEdges[i];edge['id']=gEdge.id;edge['from']=gEdge.source;edge['to']=gEdge.target;edge['attributes']=gEdge.attributes;if(gEdge.color&&options.inheritColor===false){edge['color']=gEdge.color;}
edges.push(edge);}
for(var i=0;i<gNodes.length;i++){var node={};var gNode=gNodes[i];node['id']=gNode.id;node['attributes']=gNode.attributes;node['title']=gNode.title;node['x']=gNode.x;node['y']=gNode.y;node['label']=gNode.label;if(options.nodes.parseColor===true){node['color']=gNode.color;}else{node['color']=gNode.color!==undefined?{background:gNode.color,border:gNode.color,highlight:{background:gNode.color,border:gNode.color},hover:{background:gNode.color,border:gNode.color}}:undefined;}
node['size']=gNode.size;node['fixed']=options.nodes.fixed&&gNode.x!==undefined&&gNode.y!==undefined;nodes.push(node);}
return{nodes:nodes,edges:edges};}
exports.parseGephi=parseGephi;},function(module,exports){"use strict";function Images(callback){this.images={};this.imageBroken={};this.callback=callback;}
Images.prototype.load=function(url,brokenUrl,id){var img=this.images[url];if(img===undefined){var me=this;img=new Image();img.onload=function(){if(this.width===0){document.body.appendChild(this);this.width=this.offsetWidth;this.height=this.offsetHeight;document.body.removeChild(this);}
if(me.callback){me.images[url]=img;me.callback(this);}};img.onerror=function(){if(brokenUrl===undefined){console.error("Could not load image:",url);delete this.src;if(me.callback){me.callback(this);}}else{if(me.imageBroken[id]&&me.imageBroken[id][url]===true){console.error("Could not load brokenImage:",brokenUrl);delete this.src;if(me.callback){me.callback(this);}}else{console.error("Could not load image:",url);this.src=brokenUrl;if(me.imageBroken[id]===undefined){me.imageBroken[id]={};}
me.imageBroken[id][url]=true;}}};img.src=url;}
return img;};module.exports=Images;},function(module,exports){'use strict';exports['en']={edit:'Edit',del:'Delete selected',back:'Back',addNode:'Add Node',addEdge:'Add Edge',editNode:'Edit Node',editEdge:'Edit Edge',addDescription:'Click in an empty space to place a new node.',edgeDescription:'Click on a node and drag the edge to another node to connect them.',editEdgeDescription:'Click on the control points and drag them to a node to connect to it.',createEdgeError:'Cannot link edges to a cluster.',deleteClusterError:'Clusters cannot be deleted.',editClusterError:'Clusters cannot be edited.'};exports['en_EN']=exports['en'];exports['en_US']=exports['en'];exports['nl']={edit:'Wijzigen',del:'Selectie verwijderen',back:'Terug',addNode:'Node toevoegen',addEdge:'Link toevoegen',editNode:'Node wijzigen',editEdge:'Link wijzigen',addDescription:'Klik op een leeg gebied om een nieuwe node te maken.',edgeDescription:'Klik op een node en sleep de link naar een andere node om ze te verbinden.',editEdgeDescription:'Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.',createEdgeError:'Kan geen link maken naar een cluster.',deleteClusterError:'Clusters kunnen niet worden verwijderd.',editClusterError:'Clusters kunnen niet worden aangepast.'};exports['nl_NL']=exports['nl'];exports['nl_BE']=exports['nl'];}])});;(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator',['ngMaterial','ngMessages','ngSanitize','hotgen-utils','hotgen-agent','ui.bootstrap',]).config(['$mdThemingProvider',function($mdThemingProvider){$mdThemingProvider.theme('default').primaryPalette('indigo').accentPalette('blue').warnPalette('red');}]).config(['$provide','$windowProvider',function($provide,$windowProvider){var project_window=$windowProvider.$get();var staticPath=project_window.STATIC_URL+'dashboard/project/heat_dashboard/template_generator/';var projectPath=project_window.WEBROOT+'project/';$provide.constant('horizon.dashboard.project.heat_dashboard.template_generator.basePath',staticPath);$provide.constant('horizon.dashboard.project.heat_dashboard.template_generator.projectPath',projectPath);}]).constant('horizon.dashboard.project.heat_dashboard.template_generator.validationRules',{'name':/^[A-Za-z0-9_.-]+$/,'path':/^\/[a-z0-9/-]+$/,'integer':/^\d*$/,'keypair':/^([A-Za-z0-9_.-]{1,255})=([A-Za-z0-9_.-]{1,255})$/,'ip_address':/^([0-9.]{1,15})|([A-Fa-f0-9:]{1,39})$/,'domain':/^[A-Za-z0-9_.-]+$/,'uuid4':/^[a-f0-9]{8}-([a-f0-9]{4}-){3}[a-f0-9]{12}$/,'uuid_nohyphen':/^[a-f0-9]{32}$/,'mac_address':/^([A-Fa-f0-9]{2}[:-]){5}([A-Fa-f0-9]{2})$/,'cidr':/^(([0-9.]{1,15})(\/([0-9]|[1-2][0-9]|3[0-2]))?)|(([A-Fa-f0-9:]{1,39})(\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))?)$/,'zone':/^[a-zA-Z0-9_.-]{1,127}\.$/,});})();(function(){'use strict';angular.module('hotgen-utils',['cgNotify','angular-uuid','ngVis']).factory('hotgenUUID',['uuid',function(uuid){return{uuid:uuid.v4,};}]).factory('hotgenNotify',['notify','$rootScope',function(notify,$rootScope){notify.config({position:'right',duration:0,});var show_success=function(message){if($rootScope.message_level<2){return-1;}
notify({message:message,classes:['alert-success',],duration:3000,});return 0;};var show_error=function(message){if($rootScope.message_level<0){return-1;}
notify({message:message,classes:['alert-danger',],});return 0;};var show_info=function(message){if($rootScope.message_level<3){return-1;}
notify({message:message,classes:['alert-info',],duration:3000,});return 0;};var show_warning=function(message){if($rootScope.message_level<1){return-1;}
notify({message:message,classes:['alert-warning',],duration:5000,});return 0;};return{show_success:show_success,show_error:show_error,show_info:show_info,show_warning:show_warning};}]).factory('hotgenMessage',['$rootScope',function($rootScope){var broadcast_edit_node=function(node_type){$rootScope.$broadcast('handle_edit_node',node_type);};var broadcast_edit_edge=function(from_type,to_type,from_id,to_id){$rootScope.$broadcast('handle_edit_edge',{'from_type':from_type,'to_type':to_type,'from_id':from_id,'to_id':to_id,});};var broadcast_load_draft=function(){$rootScope.$broadcast('handle_load_draft');};var broadcast_resources_loaded=function(){$rootScope.$broadcast('handle_resources_loaded');};var broadcast_update_template_version=function(){$rootScope.$broadcast('update_template_version');};return{broadcast_edit_node:broadcast_edit_node,broadcast_edit_edge:broadcast_edit_edge,broadcast_load_draft:broadcast_load_draft,broadcast_resources_loaded:broadcast_resources_loaded,broadcast_update_template_version:broadcast_update_template_version,}}]).factory('hotgenUtils',function(){var get_resource_string=function(identity){return'{ get_resource: '+identity+' }';}
var filter_and_return_get_resource_element=function(array,property){var return_val=[];var idx=array.length-1;while(idx>=0){if(typeof array[idx]=='string'){if(array[idx].indexOf('get_resource')!=-1){return_val=return_val.concat(array.splice(idx,1))}}else if(typeof array[idx]=='object'&&property){if(array[idx][property]&&array[idx][property].indexOf('get_resource')!=-1){return_val=return_val.concat(array.splice(idx,1))}}
idx=idx-1;}
return return_val;}
var escape_characters=function(value){return'"'+value.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"';}
var extract_keyvalue=function(value){var new_keyvalue={}
if(value instanceof Array){for(var idx in value){if(value[idx]instanceof Object){if(Object.keys(value[idx]).length==0){continue;}
new_keyvalue[value[idx].key]=value[idx].value}}}
if(Object.keys(new_keyvalue).length==0){return null;}
return new_keyvalue;}
var extract_list_of_keyvalue=function(value_list){if(value_list instanceof Array){for(var idx=value_list.length-1;idx>=0;--idx){if(Object.keys(value_list[idx]).length==0){value_list.splice(idx,1)}}
if(value_list.length==0){return null;}
return value_list}
return null;}
var extract_list=function(value_list){if(value_list instanceof Array){if(value_list.length==0){return null;}
return value_list}
return null;}
var extract_dicts=function check_dicts(value_dict){for(var key in value_dict){if(!value_dict[key]){delete value_dict[key];}}
return value_dict}
var extract_dict=function extract_dict(value_dict){for(var key in value_dict){strip_property(value_dict,key)}}
var extract_array=function extract_array(value_list){for(var idx=value_list.length-1;idx>=0;--idx){if(value_list[idx]==null||value_list[idx]==''){value_list.splice(idx,1)}else if(value_list[idx].constructor&&value_list[idx].constructor==Object){extract_dict(value_list[idx])
if(Object.keys(value_list[idx]).length==0){value_list.splice(idx,1);}}else if(value_list[idx].constructor&&value_list[idx].constructor==Array){extract_array(value_list[idx])
if(value_list[idx].length==0){value_list.splice(idx,1);}}}}
var extract_resource_def=function extract_resource_def(value_dict){if(value_dict.properties){value_dict.properties=extract_keyvalue(value_dict.properties)}
if(value_dict.metadata){value_dict.metadata=extract_keyvalue(value_dict.metadata)}
return value_dict}
var strip_property=function check_property(resource_data,property){if(resource_data[property]==null||resource_data[property]==''){delete resource_data[property];}else if(resource_data[property].constructor&&resource_data[property].constructor==Object){extract_dict(resource_data[property]);if(Object.keys(resource_data[property]).length==0){delete resource_data[property];}}else if(resource_data[property].constructor&&resource_data[property].constructor==Array){extract_array(resource_data[property]);if(resource_data[property].length==0){delete resource_data[property];}}}
return{get_resource_string:get_resource_string,escape_characters:escape_characters,extract_keyvalue:extract_keyvalue,extract_list_of_keyvalue:extract_list_of_keyvalue,extract_list:extract_list,extract_dicts:extract_dicts,extract_resource_def:extract_resource_def,filter_and_return_get_resource_element:filter_and_return_get_resource_element,strip_property:strip_property,};})})();(function(){'use strict';angular.module('hotgen-agent',['hotgen-utils',]).factory('hotgenAgent',['$http','$location','hotgenNotify',function($http,$location,hotgenNotify){var get_resource_options=function(){var static_url=$location.absUrl();if(static_url.substr(-1)!='/'){static_url+='/';}
return $http({method:'GET',url:static_url+'get_resource_options'}).then(function successCallback(response){if(response.data.errors){var msg='';angular.forEach(response.data.errors,function(value,key){msg+=key+': '+value+'. '})
hotgenNotify.show_warning('Unable to retrieve resources '+msg+'.');}
else{hotgenNotify.show_success('Retrieve openstack resources successfully.');}
return response.data;},function errorCallback(response){hotgenNotify.show_error('Cannot get openstack resources.');return null;});}
return{get_resource_options:get_resource_options,};}])})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.AgentController',['$scope','hotgenAgent','hotgenGlobals','hotgenMessage',function($scope,hotgenAgent,hotgenGlobals,hotgenMessage){$scope.template_versions=[];$scope.init=function(){var optionsPromise=hotgenAgent.get_resource_options();optionsPromise.then(function(options){if(!options){return;}
hotgenGlobals.update_resource_options({auth:{tenant_id:'',admin:false},keypair_types:[{'name':'ssh'},{'name':'x509'},],image_snapshots:[],floating_subnets:[],qos_policies:[],});hotgenGlobals.update_resource_options(options);$scope.template_versions=hotgenGlobals.get_resource_options().template_versions
hotgenMessage.broadcast_resources_loaded();});};$scope.init();$scope.update_template_version=function(template_version){hotgenGlobals.set_template_version(template_version);return true;};$scope.load_template_version=function(){$scope.template_version=hotgenGlobals.get_template_version()}
$scope.$on('update_template_version',$scope.load_template_version);}])})();(function(){'use strict';angular.module('hotgen-utils').directive('compile',['$compile',function($compile){return{link:function(scope,element,attrs){var content=$compile(attrs.compile)(scope);element.append(content);}}}]);})();(function(){'use strict';function dependsonController($scope,hotgenStates,basePath){this.$onInit=function(){$scope.dependson=this.dependson;}
$scope.basePath=basePath;$scope.edges=hotgenStates.get_edges();$scope.nodes=hotgenStates.get_nodes();$scope.selected=hotgenStates.get_selected();$scope.toggle=function(item,list){if(typeof item=='undefined'||!(list instanceof Array)){return;}
var idx=list.indexOf(item);if(idx>-1){list.splice(idx,1);}
else{list.push(item);}};$scope.exists=function(item,list){if(typeof item!="undefined"&&list instanceof Array){return list.indexOf(item)>-1;}
return false;};}
function dependsonPath(basePath){return basePath+'templates/depends_on.html';}
dependsonPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];dependsonController.$inject=['$scope','hotgenStates','horizon.dashboard.project.heat_dashboard.template_generator.basePath'];angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('dependsOn',{templateUrl:dependsonPath,controller:dependsonController,bindings:{'dependson':'=',}});})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').directive('draggable',[function(){return function($scope,element){var el=element[0];el.draggable=true;$scope.dragstartHandler=function(e){el.style.opacity='0.4';e.dataTransfer.setData('text',e.target.id);}
$scope.dragendHandler=function(e){el.style.opacity='1.0';}
el.addEventListener('dragstart',$scope.dragstartHandler,false);el.addEventListener('dragend',$scope.dragendHandler,false);}}]);})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').directive('droppable',['hotgenGlobals','hotgenUUID','hotgenStates','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function(hotgenGlobals,hotgenUUID,hotgenStates,basePath){return{link:function($scope,element){$scope.data={nodes:hotgenStates.get_nodes(),edges:hotgenStates.get_edges(),}
$scope.dropHandler=function(e){var resource_types=hotgenGlobals.get_resource_icons();var dropped_elem_id=e.dataTransfer.getData("text");var dropped_elem_base=document.getElementById(dropped_elem_id);var resource_type=dropped_elem_id;var shorten_resource_type=resource_type.split('__')[2]
var dragged_resource=resource_types[resource_type];var counter=hotgenStates.increment_counter(shorten_resource_type);var id=hotgenUUID.uuid();var node_label=shorten_resource_type+'_'+counter;hotgenStates.set_incremented_label(id,node_label)
$scope.data.nodes.add({id:id,label:node_label,shape:'circularImage',title:resource_type,icon:{face:'FontAwesome',code:dragged_resource.code,size:50,color:dragged_resource.color,},borderWidth:0,borderWidthSelected:0,color:{border:'#ffffff',background:'#ffffff',highlight:'#ffffff',hover:'#ffffff'},image:basePath+'js/resources/'+resource_type.toLowerCase()+'/'+resource_type.toLowerCase()+'-gray.svg',});hotgenStates.update_saved_flags(id,false)
e.preventDefault();}
$scope.dragoverHandler=function(e){if(e.preventDefault){e.preventDefault();}}
var el=element[0];el.addEventListener('dragover',$scope.dragoverHandler,true);el.addEventListener('drop',$scope.dropHandler,false);}}}]);})();(function(){'use strict';angular.module('hotgen-utils').service('hotgenGlobals',function(){var globals={resource_icons:{},edge_directions:{},necessary_properties:{},resource_components:{},node_labels:{},node_admin:{},resource_options:{'auth':{'admin':false}},template_version:null,resource_outputs:{},reference_files:{},};return{get_element:function(ele){return globals[ele];},get_node_labels:function(){return this.get_element('node_labels');},get_node_admin:function(){return this.get_element('node_admin');},get_resource_icons:function(){return this.get_element('resource_icons');},get_resource_components:function(){return this.get_element('resource_components');},get_edge_directions:function(){return this.get_element('edge_directions');},get_necessary_properties:function(){return this.get_element('necessary_properties');},update_node_labels:function(key,value){globals.node_labels[key]=value;},update_node_admin:function(key,value){globals.node_admin[key]=value;},update_resource_icons:function(key,value){globals.resource_icons[key]=value;},update_resource_components:function(key,value){globals.resource_components[key]=value;},update_edge_directions:function(key,value){globals.edge_directions[key]=value;},update_necessary_properties:function(key,value){globals.necessary_properties[key]=value;},get_resource_options:function(){return this.get_element('resource_options');},update_resource_options:function(u_object){angular.extend(globals.resource_options,u_object)},set_template_version:function(value){globals.template_version=value;},get_template_version:function(){return globals.template_version;},set_resource_outputs:function(key,value){globals.resource_outputs[key]=value},get_resource_outputs:function(key){return globals.resource_outputs[key];},get_resource_types:function(){return Object.keys(globals.resource_icons);},set_reference_file:function(key,value){globals.reference_files[key]=value;},get_reference_file:function(key){return globals.reference_files[key];},get_reference_files:function(key){return globals.reference_files;},};});})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.IconController',['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function($scope,hotgenGlobals,basePath){$scope.resource_types=hotgenGlobals.get_resource_icons();$scope.resource_admin=hotgenGlobals.get_node_admin();$scope.admin=hotgenGlobals.get_resource_options().auth.admin;$scope.basePath=basePath;$scope.project_types={};for(var idx in $scope.resource_types){var pidx=idx.split('__');if(!pidx||pidx.length!=3){continue}
var level=pidx[0]+'::'+pidx[1]
if(!(level in $scope.project_types)){$scope.project_types[level]={}}
$scope.project_types[level][idx]=$scope.resource_types[idx];}
$scope.currentNavItem=Object.keys($scope.project_types)[0];$scope.showIcon=function(){};}]);})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.LoadingController',['$scope','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function($scope,hotgenNotify,basePath){$scope.loading=true;$scope.basePath=basePath;$scope.$on('handle_resources_loaded',function(event,args){hotgenNotify.show_info('Close loading.');$scope.loading=false;});}])})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.DraftMenuController',['$scope','$mdDialog','hotgenStates','hotgenGlobals','hotgenNotify','hotgenMessage','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function($scope,$mdDialog,hotgenStates,hotgenGlobals,hotgenNotify,hotgenMessage,basePath){$scope.basePath=basePath;var originatorEv;$scope.openMenu=function($mdMenu,ev){originatorEv=ev;$mdMenu.open(ev);};$scope.data={nodes:hotgenStates.get_nodes(),edges:hotgenStates.get_edges(),}
$scope.save_draft=function(){if($scope.data.nodes.length==0&&$scope.data.edges.length==0){hotgenNotify.show_warning('No resource to save.');return;}
if(localStorage.saved_counter){localStorage.saved_counter=(Number(localStorage.saved_counter)+1)%10;}else{localStorage.saved_counter=0;}
var data={nodes:$scope.data.nodes._data,edges:$scope.data.edges._data,saved_resources:hotgenStates.get_saved_resources(),saved_depends_ons:hotgenStates.get_saved_dependsons(),is_saved:hotgenStates.get_saved_flags(),incremented_labels:hotgenStates.get_incremented_labels(),counter:hotgenStates.get_counters(),template_version:hotgenGlobals.get_template_version(),}
var today=new Date();data['time']=today.toUTCString();var drafts_serial=JSON.stringify(data);localStorage.setItem('draft_'+localStorage.saved_counter,drafts_serial);hotgenNotify.show_success('Draft is saved successfully at '+today.toUTCString()+'.');}
$scope.load_draft=function(){hotgenMessage.broadcast_load_draft();}
$scope.import_draft=function(){hotgenNotify.show_warning('Not Implemented.');}
$scope.export_draft=function(){hotgenNotify.show_warning('Not Implemented.');}}]);angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.ClearCanvasController',['$scope','hotgenStates','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function($scope,hotgenStates,hotgenNotify,basePath){$scope.basePath=basePath;$scope.data={nodes:hotgenStates.get_nodes(),edges:hotgenStates.get_edges(),}
$scope.clear_canvas=function(){$scope.data.nodes.clear();$scope.data.edges.clear();hotgenStates.clear_states();hotgenNotify.show_success('The Canvas has been initialized.');};}]);})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.DraftModalController',['$scope','$mdDialog','hotgenNotify','hotgenMessage','hotgenStates','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function($scope,$mdDialog,hotgenNotify,hotgenMessage,hotgenStates,hotgenGlobals,basePath){$scope.draftDialogController=function($scope,$mdDialog,hotgenStates){$scope.draft_list=[];$scope.latest_draft=JSON.parse(localStorage.getItem('draft_'+localStorage.saved_counter));for(var i=0;i<10;i++){if(localStorage.getItem('draft_'+i)){var saved_drafts=JSON.parse(localStorage.getItem('draft_'+i));$scope.draft_list.push(saved_drafts);}}
$scope.data={nodes:hotgenStates.get_nodes(),edges:hotgenStates.get_edges(),}
$scope.load=function(draft){$mdDialog.hide();$scope.data.nodes.clear();for(var id in draft.nodes){$scope.data.nodes.add(draft.nodes[id]);}
$scope.data.edges.clear();for(var id in draft.edges){$scope.data.edges.add(draft.edges[id]);}
hotgenStates.set_saved_resources(draft.saved_resources);hotgenStates.set_saved_dependsons(draft.saved_depends_ons);hotgenStates.set_saved_flags(draft.is_saved);hotgenStates.set_counters(draft.counter);hotgenStates.set_incremented_labels(draft.incremented_labels);hotgenGlobals.set_template_version(draft.template_version);hotgenMessage.broadcast_update_template_version();};$scope.cancel=function(){$mdDialog.cancel();};};$scope.showDialog=function(){$scope.draftDialogController.$inject=['$scope','$mdDialog','hotgenStates'];$mdDialog.show({controller:$scope.draftDialogController,templateUrl:basePath+'templates/modal_draft.html',parent:angular.element(document.body),clickOutsideToClose:true}).then(function(){hotgenNotify.show_success('The draft is loaded successfully.');},function(){});}
$scope.handle_load_draft=function(event,args){$scope.showDialog();}
$scope.$on('handle_load_draft',$scope.handle_load_draft);}]);})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.EdgeFormModalController',['$scope','$mdDialog','hotgenNotify','hotgenMessage','hotgenGlobals','hotgenStates','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function($scope,$mdDialog,hotgenNotify,hotgenMessage,hotgenGlobals,hotgenStates,basePath){$scope.edgeDialogController=function($scope,$mdDialog,hotgenStates,basePath){$scope.is_depends=false;$scope.delete_resource=function(){hotgenStates.get_network().deleteSelected();hotgenNotify.show_success('The selected edge has been delete successfully.')
$mdDialog.cancel();};$scope.cancel=function(){$mdDialog.cancel();};$scope.selected=hotgenStates.get_selected();if($scope.selected.id in hotgenStates.get_saved_resources()){$scope.resource=hotgenStates.get_saved_resources()[$scope.selected.id].data;}else{$scope.resource={}}
if($scope.selected.edge.arrows&&$scope.selected.edge.arrows.middle==true){$scope.is_depends=true;}
var from_type=$scope.selected.resource_type.from;var to_type=$scope.selected.resource_type.to;$scope.from_type=from_type.replace(/_/g,':');$scope.to_type=to_type.replace(/_/g,':');$scope.from_node={image:basePath+'js/resources/'+from_type.toLowerCase()+'/'+from_type.toLowerCase()+'.svg',id:$scope.selected.from_node.id,}
$scope.to_node={image:basePath+'js/resources/'+to_type.toLowerCase()+'/'+to_type.toLowerCase()+'.svg',id:$scope.selected.to_node.id,}}
$scope.showTabDialog=function(){$scope.edgeDialogController.$inject=['$scope','$mdDialog','hotgenStates','horizon.dashboard.project.heat_dashboard.template_generator.basePath'];$mdDialog.show({controller:$scope.edgeDialogController,controllerAs:'ctrl',templateUrl:basePath+'templates/modal_edge.html',parent:angular.element(document.body),clickOutsideToClose:true}).then(function(){},function(){});};$scope.handle_edit_edge=function(event,args){var from_type=args.from_type;var to_type=args.to_type;var from_id=args.from_id;var to_id=args.to_id;var edge_directions=hotgenGlobals.get_edge_directions();var depends_ons=hotgenStates.get_saved_dependsons();if(!(from_type in edge_directions)||!(to_type in edge_directions[from_type])){if(from_id in depends_ons&&depends_ons[from_id]==to_id){}
else{hotgenNotify.show_warning('The edge might be invalid.');return;}}
$scope.showTabDialog();};$scope.$on('handle_edit_edge',$scope.handle_edit_edge);}]);})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.FormModalController',['$scope','$compile','$mdDialog','hotgenNotify','hotgenMessage','hotgenGlobals','hotgenUtils','hotgenStates','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function($scope,$compile,$mdDialog,hotgenNotify,hotgenMessage,hotgenGlobals,hotgenUtils,hotgenStates,basePath){$scope.selected=hotgenStates.get_selected();$scope.data={nodes:hotgenStates.get_nodes(),edges:hotgenStates.get_edges(),};$scope.dialogController=function($scope,$mdDialog,hotgenStates){$scope.delete_resource=function(){var label=hotgenStates.get_selected().node.label;hotgenStates.get_network().deleteSelected();hotgenNotify.show_success(label+' has been delete successfully.')
$mdDialog.cancel();};$scope.cancel=function(){$mdDialog.cancel();};$scope.selected=hotgenStates.get_selected();$scope.data={nodes:hotgenStates.get_nodes(),edges:hotgenStates.get_edges(),};$scope.save=function(){$mdDialog.hide();hotgenStates.update_saved_resources($scope.selected.id,{type:$scope.selected.resource_type,data:angular.copy($scope.resource)});hotgenStates.update_saved_dependsons($scope.selected.id,$scope.dependson);var label=hotgenStates.get_label_by_uuid($scope.selected.node.id);var prop_label=$scope.get_label($scope.selected.resource_type);if(prop_label&&$scope.resource[prop_label]){label=label+'('+$scope.resource[prop_label]+')';}
var new_node_image=$scope.data.nodes.get($scope.selected.id).image.replace('-gray.svg','-blue.svg');var shape=$scope.selected.node.shape;var color="#3f51b5"
if(shape==='icon'){color=$scope.selected.node.icon.color;}
$scope.data.nodes.update({id:$scope.selected.id,label:label,font:{color:color},image:new_node_image,})
hotgenStates.update_saved_flags($scope.selected.id,true);var related_edges=hotgenStates.get_network().getConnectedEdges($scope.selected.id);for(var idx in related_edges){var edge=$scope.data.edges.get(related_edges[idx]);if(edge.from==$scope.selected.id&&edge.arrows&&edge.arrows.middle==true){$scope.data.edges.remove(edge.id);}}
for(var idx in $scope.dependson){$scope.data.edges.add({from:$scope.selected.id,to:$scope.dependson[idx],arrows:{middle:true},dashes:false,color:'#448AFF',});}
for(var idx in $scope.connectedoptions){var connected_option=$scope.connectedoptions[idx];for(var idx_edge in connected_option){hotgenStates.update_saved_flags(connected_option[idx_edge].edge.id,true);var color="#3f51b5";$scope.data.edges.update({id:connected_option[idx_edge].edge.id,dashes:false,color:color,})}}
return true;};$scope.resource_type=$scope.selected.resource_type.replace(/_/g,':');if($scope.selected.id in hotgenStates.get_saved_resources()){$scope.resource=hotgenStates.get_saved_resources()[$scope.selected.id].data;}else{$scope.resource={}}
if($scope.selected.id in hotgenStates.get_saved_dependsons()){$scope.dependson=hotgenStates.get_saved_dependsons()[$scope.selected.id];}else{$scope.dependson=[]}
$scope.get_connected_options=function(){var related_edges=hotgenStates.get_network().getConnectedEdges($scope.selected.id);var connected_options={};for(var idx in related_edges){var edge=$scope.data.edges.get(related_edges[idx]);if(edge.from!=$scope.selected.id||(edge.arrows&&edge.arrows.middle==true)){continue;}
var node=$scope.data.nodes.get(edge.to);var edge_directions=hotgenGlobals.get_edge_directions();if(!($scope.selected.resource_type in edge_directions)){continue;}
var mapping=edge_directions[$scope.selected.resource_type];if(!(node.title in mapping)){continue;}
var property=mapping[node.title].property;if(!(property in connected_options)){connected_options[property]=[];}
connected_options[property].push({value:hotgenUtils.get_resource_string(hotgenStates.get_label_by_uuid(node.id)),id:node.id,resource_type:node.title,edge:edge});}
return connected_options;}
$scope.connectedoptions=$scope.get_connected_options();$scope.component=hotgenGlobals.get_resource_components()[$scope.selected.resource_type];$scope.get_label=function(node_type){return hotgenGlobals.get_node_labels()[node_type];}}
$scope.showTabDialog=function(){$scope.dialogController.$inject=['$scope','$mdDialog','hotgenStates'];$mdDialog.show({controller:$scope.dialogController,controllerAs:'ctrl',templateUrl:basePath+'templates/modal_resource.html',parent:angular.element(document.body),clickOutsideToClose:true}).then(function(){hotgenNotify.show_success('The selected resource is saved successfully.');},function(){});};$scope.handle_edit_node=function(event,args){hotgenNotify.show_info('Show details of resource '+args.replace(/_/g,':')+'.');$scope.showTabDialog();}
$scope.$on('handle_edit_node',$scope.handle_edit_node);}]);})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.TempModalController',['$scope','$mdDialog','hotgenNotify','hotgenUtils','hotgenStates','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.basePath','horizon.dashboard.project.heat_dashboard.template_generator.projectPath',function($scope,$mdDialog,hotgenNotify,hotgenUtils,hotgenStates,hotgenGlobals,basePath,projectPath){$scope.basePath=basePath;$scope.projectPath=projectPath;$scope.dialogController=function($scope,$mdDialog,hotgenStates,hotgenGlobals,hotgenNotify){$scope.all_saved=false;$scope.cancel=function(){$mdDialog.cancel();};$scope.download=function(){var today=new Date();var filename="template-"+today.toISOString();var blob=new Blob([$scope.template_contents],{type:"text/plain;charset=utf-8"});saveAs(blob,filename+".yaml.txt");hotgenNotify.show_success('Template is downloaded.');};$scope.redirect=function(){var redirect=window.location.origin+projectPath+'stacks/';window.location.href=redirect;};$scope.save=function(){var files=hotgenGlobals.get_reference_files();sessionStorage.setItem('files',JSON.stringify(files));sessionStorage.setItem('generated',true);sessionStorage.setItem('template',$scope.template_contents);$scope.redirect();};$scope.extract_properties=function(resource_data){for(var property in resource_data){var func=null;switch(property){case'description':case'public_key':func=hotgenUtils.escape_characters;break;case'metadata':case'X-Account-Meta':case'X-Container-Meta':case'scheduler_hints':case'value_specs':func=hotgenUtils.extract_keyvalue;break;case'allocation_pools':case'allowed_address_pairs':case'block_device_mapping':case'block_device_mapping_v2':case'fixed_ips':case'host_routes':case'personality':case'rules':func=hotgenUtils.extract_list_of_keyvalue;break;case'dns_nameservers':case'dhcp_agent_ids':case'tags':func=hotgenUtils.extract_list;break;case'resource_def':case'resource':func=hotgenUtils.extract_resource_def;break;default:break;}
if(func!=null){resource_data[property]=func(resource_data[property]);}
hotgenUtils.strip_property(resource_data,property);}
return resource_data;}
$scope.warning="Warning: Some resources remain unsaved."
$scope.generate=function(){var resource_root={};var outputs_root={};if(hotgenStates.get_saved_flags_length()==0||hotgenStates.get_saved_resources_length()==0){$scope.all_saved=false;$scope.warning="Warning: Cannot generate, no resource has been saved.";return'';}
$scope.all_saved=hotgenStates.is_all_saved();$scope.saved_resources=hotgenStates.get_saved_resources();$scope.data={nodes:hotgenStates.get_nodes(),}
var depends_ons=hotgenStates.get_saved_dependsons();for(var idkey in $scope.saved_resources){var resource_type=$scope.saved_resources[idkey].type;var resource_name=hotgenStates.get_label_by_uuid(idkey);var copy_data=angular.copy($scope.saved_resources[idkey].data)
var properties=$scope.extract_properties(copy_data);resource_root[resource_name]={type:resource_type.replace(/_/g,':'),};if(Object.keys(properties).length>0){resource_root[resource_name]["properties"]=properties;}
if(idkey in depends_ons){var depends_ids=angular.copy(depends_ons[idkey]);if(depends_ons[idkey].length>0){resource_root[resource_name]['depends_on']=[];for(var idx in depends_ids){resource_root[resource_name]['depends_on'].push(hotgenStates.get_label_by_uuid(depends_ids[idx]));}}}
var output_detail=hotgenGlobals.get_resource_outputs(resource_type);for(var idx in output_detail){var output_key=resource_name+'_'+output_detail[idx].property;outputs_root[output_key]={description:'The '+output_detail[idx].property+' of '+resource_name+'.',value:'{ get_attr: ['+resource_name+', '+output_detail[idx].property+'] }',};}}
var today=new Date();var template_version=hotgenGlobals.get_template_version().split('.')[1]
var template_root={heat_template_version:template_version,description:'version 2017-09-01 created by HOT Generator at '+today.toUTCString()+'.',resources:resource_root,}
if(Object.keys(outputs_root).length>0){template_root['outputs']=outputs_root}
var json_string=JSON.stringify(template_root);return json2yaml(json_string);}
$scope.template_contents=$scope.generate();$scope.template={title:'Template',content:$scope.template_contents,};}
$scope.open=function(){if(hotgenGlobals.get_template_version()==null){hotgenNotify.show_error('Please select template version at first.');return;}
$scope.dialogController.$inject=['$scope','$mdDialog','hotgenStates','hotgenGlobals','hotgenNotify'];$mdDialog.show({parent:angular.element(document.body),clickOutsideToClose:true,templateUrl:basePath+'templates/modal_template.html',controller:$scope.dialogController,}).then(function(){},function(){});};}]);})();(function(){'use strict';angular.module('hotgen-utils').service('hotgenStates',['VisDataSet',function(VisDataSet){var saved_flags={};var incremented_labels={};var selected={};var saved_resources={};var saved_dependsons={};var network=null;var nodes=new VisDataSet();var edges=new VisDataSet();var counter={};var increment_counter=function(type){if(!(type in counter)){counter[type]=0;}
counter[type]+=1;return counter[type];}
var get_counter=function(type){return counter[type];}
var get_network=function(){return network;}
var set_network=function(visNetwork){network=visNetwork}
var get_nodes=function(){return nodes;}
var get_edges=function(){return edges;}
var get_selected=function(){return selected;}
var set_selected=function(to_set){selected=to_set;}
var update_saved_resources=function(key,data){saved_resources[key]=data;};var set_saved_resources=function(to_set){saved_resources=to_set;}
var update_saved_dependsons=function(key,data){saved_dependsons[key]=data;};var set_saved_dependsons=function(to_set){saved_dependsons=to_set;}
var is_all_saved=function(){return(Object.values(saved_flags).indexOf(false)==-1);};var get_saved_flags_length=function(){return Object.keys(saved_flags).length;}
var get_saved_flags=function(){return saved_flags;}
var set_saved_flags=function(to_set){saved_flags=to_set;}
var get_saved_dependsons=function(){return saved_dependsons;}
var update_saved_flags=function(key,value){saved_flags[key]=value;}
var get_saved_resources=function(){return angular.copy(saved_resources);}
var delete_saved_resources=function(key){delete saved_resources[key];}
var get_saved_resources_length=function(){return Object.keys(saved_resources).length;};var clear_states=function(){saved_resources={}
saved_dependsons={}
selected={}
saved_flags={}
incremented_labels={}
counter={}}
var get_label_by_uuid=function(key){return incremented_labels[key];}
var set_incremented_label=function(key,label){incremented_labels[key]=label}
var get_incremented_labels=function(){return incremented_labels;}
var set_incremented_labels=function(labels){incremented_labels=labels;}
var get_counters=function(){return counter;}
var set_counters=function(cached){counter=cached;}
return{is_all_saved:is_all_saved,get_saved_resources:get_saved_resources,get_saved_resources_length:get_saved_resources_length,get_saved_dependsons:get_saved_dependsons,get_saved_flags:get_saved_flags,get_saved_flags_length:get_saved_flags_length,set_selected:set_selected,get_selected:get_selected,set_saved_resources:set_saved_resources,set_saved_dependsons:set_saved_dependsons,set_saved_flags:set_saved_flags,update_saved_flags:update_saved_flags,update_saved_resources:update_saved_resources,update_saved_dependsons:update_saved_dependsons,delete_saved_resources:delete_saved_resources,clear_states:clear_states,get_nodes:get_nodes,get_edges:get_edges,get_network:get_network,set_network:set_network,increment_counter:increment_counter,get_counter:get_counter,get_label_by_uuid:get_label_by_uuid,set_incremented_label:set_incremented_label,get_incremented_labels:get_incremented_labels,set_incremented_labels:set_incremented_labels,get_counters:get_counters,set_counters:set_counters,}}])})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').controller('horizon.dashboard.project.heat_dashboard.template_generator.VisController',['$scope','$rootScope','hotgenNotify','hotgenMessage','hotgenGlobals','hotgenStates','horizon.dashboard.project.heat_dashboard.template_generator.basePath',function($scope,$rootScope,hotgenNotify,hotgenMessage,hotgenGlobals,hotgenStates,basePath){$rootScope.message_level=2;hotgenStates.clear_states();$scope.data={nodes:hotgenStates.get_nodes(),edges:hotgenStates.get_edges(),};$scope.options={autoResize:true,edges:{smooth:false,dashes:true,color:{color:'#848484',highlight:'#848484',hover:'#848484',}},nodes:{brokenImage:basePath+'css/img/icons/unknown-gray.svg',},interaction:{hover:true,},physics:{enabled:true,solver:'forceAtlas2Based',forceAtlas2Based:{avoidOverlap:1,},barnesHut:{avoidOverlap:1}},manipulation:{enabled:true,addEdge:function(data,callback){var valid=$scope.validate_edge(data);if(valid==false){callback(null);}else{hotgenNotify.show_success("Successfully connected.");callback(data);$scope.data.nodes.update({id:data.from,font:{color:'#343434'}})
hotgenStates.update_saved_flags(data.id,false);hotgenStates.update_saved_flags(data.from,false);}},addNode:false,editEdge:false,deleteNode:function(data,callback){var node_ids=data.nodes;var edge_ids=data.edges;for(var idx in node_ids){delete hotgenStates.get_saved_flags()[node_ids[idx]];hotgenStates.delete_saved_resources(node_ids[idx]);}
for(var idx in edge_ids){delete hotgenStates.get_saved_flags()[edge_ids[idx]];hotgenStates.delete_saved_resources(edge_ids[idx]);}
callback(data);},deleteEdge:function(data,callback){var edge_ids=data.edges;for(var idx in edge_ids){var edge_id=edge_ids[idx];delete hotgenStates.get_saved_flags()[edge_id];var from_id=$scope.data.edges.get(edge_id).from;hotgenStates.update_saved_flags(from_id,false);$scope.data.nodes.update({id:from_id,font:{color:'#343434'}})}
callback(data);},},};$scope.click=function(params){if(params.nodes.length>0){$scope.network.disableEditMode();var selected_id=params.nodes[0];var selected_node=$scope.data.nodes.get(selected_id);var selected_type=selected_node.title
hotgenStates.set_selected({element:'node',resource_type:selected_type,id:selected_id,node:selected_node,});hotgenMessage.broadcast_edit_node(selected_type);}else if(params.edges.length>0){$scope.network.disableEditMode();var selected_id=params.edges[0];var selected_edge=$scope.data.edges.get(selected_id);var from_node=$scope.data.nodes.get(selected_edge.from);var to_node=$scope.data.nodes.get(selected_edge.to);hotgenStates.set_selected({element:'edge',resource_type:{from:from_node.title,to:to_node.title},from_node:from_node,to_node:to_node,id:selected_id,edge:selected_edge,});hotgenMessage.broadcast_edit_edge(from_node.title,to_node.title,from_node.id,to_node.id);}else{}};$scope.events={click:$scope.click,onload:function(network){$scope.network=network;hotgenStates.set_network(network);}};$scope.get_added_edge_id=function(old_edge_ids,new_edge_ids){for(var id in new_edge_ids){if(old_edge_ids.indexOf(new_edge_ids[id])==-1){return new_edge_ids[id];}}}
$scope.get_modal=function(data){var from_node=$scope.get_node(data.from);var to_node=$scope.get_node(data.to);var mapping=$scope.get_mapping(from_node.title,to_node.title);if(mapping){return mapping.modal;}
return;}
$scope.get_mapping=function(from_type,to_type){var edge_directions=hotgenGlobals.get_edge_directions()
if((!edge_directions[from_type])||!(edge_directions[from_type][to_type])){hotgenNotify.show_error(to_type.replace(/_/g,':')+" cannot be connected with "+from_type.replace(/_/g,':')+".");return false;}
return edge_directions[from_type][to_type]}
$scope.get_node=function(node_id){return $scope.data.nodes.get(node_id);}
$scope.validate_edge=function(data){if(data.from==data.to){return false;}
var from_node=$scope.get_node(data.from);var to_node=$scope.get_node(data.to);var from_node_type=from_node.title;var to_node_type=to_node.title;var edge_directions=hotgenGlobals.get_edge_directions()
if((!edge_directions[from_node_type])||!(edge_directions[from_node_type][to_node_type])){hotgenNotify.show_error(to_node.label+" cannot be connected with "+from_node.label+".");return false;}else{var limit=edge_directions[from_node_type][to_node_type].limit;var occupied=edge_directions[from_node_type][to_node_type].occupied;var lonely=edge_directions[from_node_type][to_node_type].lonely;var from_connected=$scope.network.getConnectedNodes(data.from);var count=0;for(var idx in from_connected){var item_title=$scope.data.nodes.get(from_connected[idx]).title;if(to_node_type==item_title){count+=1;}}
if(count>=limit){hotgenNotify.show_error("The number of connections between the resources is out of limit.");return false;}
var to_connected=$scope.network.getConnectedNodes(data.to);if(lonely===true&&to_connected.length>0){hotgenNotify.show_error(to_node.label+" cannot be connected with "+from_node.label+".");return false;}
if(occupied===true){for(var idx in to_connected){var item_title=$scope.data.nodes.get(to_connected[idx]).title;if(from_node_type==item_title){hotgenNotify.show_error(to_node.label+" has already been connected with "+from_node_type+".");return false;}}}}
return true;}}]);})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osCinderVolumeSettings',{resource_key:"OS__Cinder__Volume",admin:false,icon:{class:'fa-hdd-o',name:'OS::Cinder::Volume',code:'\uf0a0',color:'#0bb238'},label:'name',modal_component:'<os-cinder-volume volume="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-cinder-volume>',edge_settings:null,necessary_properties:null})
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osCinderVolumeSettings','hotgenGlobals',function(osCinderVolumeSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osCinderVolumeSettings.resource_key,osCinderVolumeSettings.icon);hotgenGlobals.update_resource_components(osCinderVolumeSettings.resource_key,osCinderVolumeSettings.modal_component);hotgenGlobals.update_node_labels(osCinderVolumeSettings.resource_key,osCinderVolumeSettings.label);}]);function osCinderVolumeController($scope,hotgenGlobals,hotgenNotify,validationRules){this.$onInit=function(){if(typeof this.volume.metadata==='undefined'){this.volume.metadata=[{}];}
if(typeof this.volume.scheduler_hints==='undefined'){this.volume.scheduler_hints=[{}];}
$scope.dependson=this.dependson;};$scope.boot_sources=[{'id':'image','name':'image'},{'id':'volume','name':'volume'},{'id':'volume_snapshot','name':'volume snapshot'},{'id':'backup','name':'backup'},];$scope.options=hotgenGlobals.get_resource_options();$scope.show_more=false;$scope.validate_name=validationRules['name'];this.delete_metadata=function(index){this.volume.metadata.splice(index,1)}
this.add_metadata=function(){this.volume.metadata.push({})}
this.delete_scheduler_hints=function(index){this.volume.scheduler_hints.splice(index,1)}
this.add_scheduler_hints=function(){this.volume.scheduler_hints.push({})}}
function osCinderVolumePath(basePath){return basePath+'js/resources/os__cinder__volume/os__cinder__volume.html';}
osCinderVolumeController.$inject=['$scope','hotgenGlobals','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osCinderVolumePath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osCinderVolume',{templateUrl:osCinderVolumePath,controller:osCinderVolumeController,bindings:{'volume':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osCinderVolumeAttachmentSettings',{resource_key:"OS__Cinder__VolumeAttachment",admin:false,icon:{class:'fa-plug',name:'OS::Cinder::VolumeAttachment',code:'\uf1e6',color:'#0bb238'},label:'mountpoint',modal_component:'<os-cinder-volume-attachment volumeattachment="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-cinder-volume-attachment>',edge_settings:{'OS__Cinder__Volume':{'type':'property','property':'volume_id','limit':1,'occupied':false,'lonely':false,'handler':osCinderVolumeAttachmentController.handle_edge_volume_id,'modal':null},'OS__Nova__Server':{'type':'property','property':'instance_uuid','limit':1,'occupied':false,'handler':osCinderVolumeAttachmentController.handle_edge_instance_uuid,'modal':null},},necessary_properties:{'instance_uuid':['OS__Nova__Server',],'volume_id':['OS__Cinder__Volume',]}});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osCinderVolumeAttachmentSettings','hotgenGlobals',function(osCinderVolumeAttachmentSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osCinderVolumeAttachmentSettings.resource_key,osCinderVolumeAttachmentSettings.icon);hotgenGlobals.update_node_labels(osCinderVolumeAttachmentSettings.resource_key,osCinderVolumeAttachmentSettings.label);hotgenGlobals.update_resource_components(osCinderVolumeAttachmentSettings.resource_key,osCinderVolumeAttachmentSettings.modal_component);hotgenGlobals.update_edge_directions(osCinderVolumeAttachmentSettings.resource_key,osCinderVolumeAttachmentSettings.edge_settings);}]);function osCinderVolumeAttachmentController($scope,hotgenGlobals,validationRules){this.$onInit=function(){if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[]}else{$scope.connected_options=this.connectedoptions;}
this.disable={'instance_uuid':false,'volume_id':false}
$scope.update={volumes:$scope.get_volume_id_options(),instances:$scope.get_instance_uuid_options()}
if($scope.connected_options.instance_uuid&&$scope.connected_options.instance_uuid.length>0){this.volumeattachment['instance_uuid']=$scope.connected_options.instance_uuid[0].value
this.disable.instance_uuid=true}
if($scope.connected_options.volume_id&&$scope.connected_options.volume_id.length>0){this.volumeattachment['volume_id']=$scope.connected_options.volume_id[0].value
this.disable.volume_id=true}
$scope.dependson=this.dependson;}
$scope.options=hotgenGlobals.get_resource_options();$scope.validatePath=validationRules['path'];$scope.get_volume_id_options=function(){if('volume_id'in $scope.connected_options){var resource_volumes=[];for(var idx in $scope.connected_options.volume_id){var item=$scope.connected_options.volume_id[idx];resource_volumes.push({id:item.value,name:item.value})}
return $scope.options.volumes.concat(resource_volumes);}
return $scope.options.volumes;}
$scope.get_instance_uuid_options=function(){if('instance_uuid'in $scope.connected_options){var resource_instances=[];for(var idx in $scope.connected_options.instance_uuid){var item=$scope.connected_options.instance_uuid[idx];resource_instances.push({id:item.value,name:item.value})}
return $scope.options.instances.concat(resource_instances);}
return $scope.options.instances;}}
osCinderVolumeAttachmentController.$inject=['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osCinderVolumeAttachmentPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osCinderVolumeAttachmentPath(basePath){return basePath+'js/resources/os__cinder__volumeattachment/os__cinder__volumeattachment.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osCinderVolumeAttachment',{templateUrl:osCinderVolumeAttachmentPath,controller:osCinderVolumeAttachmentController,bindings:{'volumeattachment':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})();(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osDesignateRecordsetSettings',{resource_key:"OS__Designate__RecordSet",admin:false,icon:{class:'fa-key ',name:'OS::Designate::RecordSet',code:'\uf084',color:'#483dff'},label:'name',modal_component:'<os-designate-recordset recordset="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-designate-recordset>',edge_settings:{'OS__Designate__Zone':{'type':'property','property':'zone','limit':1,},},necessary_properties:{'name':null,'zone':['OS__Designate__Zone'],'type':null,'records':null,},});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osDesignateRecordsetSettings','hotgenGlobals',function(osDesignateRecordsetSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osDesignateRecordsetSettings.resource_key,osDesignateRecordsetSettings.icon);hotgenGlobals.update_resource_components(osDesignateRecordsetSettings.resource_key,osDesignateRecordsetSettings.modal_component);hotgenGlobals.update_edge_directions(osDesignateRecordsetSettings.resource_key,osDesignateRecordsetSettings.edge_settings);hotgenGlobals.update_node_labels(osDesignateRecordsetSettings.resource_key,osDesignateRecordsetSettings.label);}]);function osDesignateRecordsetController($scope,hotgenGlobals,validationRules){$scope.options=hotgenGlobals.get_resource_options();$scope.options.types=[{'id':'A','name':'A'},{'id':'AAAA','name':'AAAA'},{'id':'MX','name':'MX'},{'id':'CNAME','name':'CNAME'},{'id':'TXT','name':'TXT'},{'id':'SRV','name':'SRV'},{'id':'NS','name':'NS'},{'id':'PTR','name':'PTR'},{'id':'SPF','name':'SPF'},{'id':'SSHFP','name':'SSHFP'},];$scope.admin=$scope.options.auth.admin;this.$onInit=function(){if(typeof this.recordset.records==='undefined'){this.recordset.records=[];}
if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[]}else{$scope.connected_options=this.connectedoptions;}
this.disable={'zone':false}
if($scope.connected_options.zone&&$scope.connected_options.zone.length>0){this.recordset.zone=$scope.connected_options.zone[0].value
this.disable.zone=true}
$scope.dependson=this.dependson;}
$scope.validate_name=validationRules['name'];}
osDesignateRecordsetController.$inject=['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osDesignateRecordsetPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osDesignateRecordsetPath(basePath){return basePath+'js/resources/os__designate__recordset/os__designate__recordset.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osDesignateRecordset',{templateUrl:osDesignateRecordsetPath,controller:osDesignateRecordsetController,bindings:{'recordset':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osDesignateZoneSettings',{resource_key:"OS__Designate__Zone",admin:false,icon:{class:'fa-key ',name:'OS::Designate::Zone',code:'\uf084',color:'#483dff'},label:'name',modal_component:'<os-designate-zone zone="resource" dependson="dependson" form-reference="resourceForm"></os-designate-zone>',edge_settings:null,necessary_properties:{'name':null,'email':null},});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osDesignateZoneSettings','hotgenGlobals',function(osDesignateZoneSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osDesignateZoneSettings.resource_key,osDesignateZoneSettings.icon);hotgenGlobals.update_resource_components(osDesignateZoneSettings.resource_key,osDesignateZoneSettings.modal_component);hotgenGlobals.update_edge_directions(osDesignateZoneSettings.resource_key,osDesignateZoneSettings.edge_settings);hotgenGlobals.update_node_labels(osDesignateZoneSettings.resource_key,osDesignateZoneSettings.label);}]);function osDesignateZoneController($scope,hotgenGlobals,hotgenNotify,validationRules){$scope.options=hotgenGlobals.get_resource_options();$scope.options.types=[{'id':'PRIMARY','name':'PRIMARY'},{'id':'SECONDARY','name':'SECONDARY'}];$scope.admin=$scope.options.auth.admin;this.$onInit=function(){if(typeof this.zone.masters==='undefined'){this.zone.masters=[];}
$scope.dependson=this.dependson;}
$scope.validate_zone=validationRules['zone'];$scope.validate_master=function(input_string){var re=/^[A-Za-z0-9_.-]+$/;var match=re.exec(input_string);if(match){return input_string;}else{hotgenNotify.show_error('Invalid master value.');return null;}}}
osDesignateZoneController.$inject=['$scope','hotgenGlobals','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osDesignateZonePath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osDesignateZonePath(basePath){return basePath+'js/resources/os__designate__zone/os__designate__zone.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osDesignateZone',{templateUrl:osDesignateZonePath,controller:osDesignateZoneController,bindings:{'zone':'=','dependson':'=','formReference':'<',}});})(window.angular);(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osHeatAutoScalingGroupSettings',{resource_key:"OS__Heat__AutoScalingGroup",admin:false,icon:{class:'fa-hdd-o',name:'OS::Heat::AutoScalingGroup',code:'\uf0a0',color:'#0bb238'},label:'name',modal_component:'<os-heat-autoscalinggroup autoscalinggroup="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-heat-autoscalinggroup>',edge_settings:null,necessary_properties:['max_size','min_size','resource']})
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osHeatAutoScalingGroupSettings','hotgenGlobals',function(osHeatAutoScalingGroupSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osHeatAutoScalingGroupSettings.resource_key,osHeatAutoScalingGroupSettings.icon);hotgenGlobals.update_resource_components(osHeatAutoScalingGroupSettings.resource_key,osHeatAutoScalingGroupSettings.modal_component);hotgenGlobals.update_node_labels(osHeatAutoScalingGroupSettings.resource_key,osHeatAutoScalingGroupSettings.label);}]);function osHeatAutoScalingGroupController($scope,hotgenGlobals,hotgenNotify,validationRules){this.$onInit=function(){$scope.dependson=this.dependson;if(typeof this.autoscalinggroup.resource==='undefined'){this.autoscalinggroup.resource={'type':'','properties':[{}]};}
if(typeof this.autoscalinggroup.rolling_updates==='undefined'){this.autoscalinggroup.rolling_updates={};}
if(this.autoscalinggroup.resource.type){$scope.filecontent=hotgenGlobals.get_reference_file(this.autoscalinggroup.resource.type);}};$scope.validate_integer=validationRules['integer'];$scope.controller=this;$scope.resource_types=[];var resource_types=hotgenGlobals.get_resource_types();resource_types.forEach(function(element){$scope.resource_types.push(element.replace(/_/g,':'));});$scope.options=hotgenGlobals.get_resource_options();$scope.update_upload=function(){if($scope.controller.autoscalinggroup&&$scope.controller.autoscalinggroup.resource&&$scope.controller.autoscalinggroup.resource.type.indexOf('.yaml')!=-1){return'true';}
return'false';}
$scope.is_upload=$scope.update_upload();$scope.$watch('is_upload',function(newValue,oldValue){if(oldValue===newValue){return;}
if(newValue===true||newValue==='true'){$scope.controller.autoscalinggroup.resource.properties=[{}];if(!($scope.filecontent&&$scope.filecontent.length>=0)){$scope.controller.autoscalinggroup.resource.type='';}}else{}});$scope.file_upload=function(element){var file=element.files[0];if(!file){return;}
var textType=/\.yaml$/;if(file.name.match(textType)){var reader=new FileReader();$scope.controller.autoscalinggroup.resource.type=file.name;reader.onload=function(e){hotgenNotify.show_success('Read file content.');hotgenGlobals.set_reference_file(file.name,reader.result)
$scope.filecontent=reader.result;}
reader.readAsText(file);}else{hotgenNotify.show_error('File type is not supported.');}}
$scope.clickUpload=function(){setTimeout(function(){angular.element('#resourcetype-file').trigger('click');},0);};this.delete_property=function(index){this.autoscalinggroup.resource.properties.splice(index,1);}
this.add_property=function(){this.autoscalinggroup.resource.properties.push({});}}
function osHeatAutoScalingGroupPath(basePath){return basePath+'js/resources/os__heat__autoscalinggroup/os__heat__autoscalinggroup.html';}
osHeatAutoScalingGroupController.$inject=['$scope','hotgenGlobals','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osHeatAutoScalingGroupPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osHeatAutoscalinggroup',{templateUrl:osHeatAutoScalingGroupPath,controller:osHeatAutoScalingGroupController,bindings:{'autoscalinggroup':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osHeatResourceGroupSettings',{resource_key:"OS__Heat__ResourceGroup",admin:false,icon:{class:'fa-server',name:'OS::Heat::ResourceGroup',code:'\uf233',color:'#0bb238'},label:'name',modal_component:'<os-heat-resource-group resourcegroup="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-heat-resource-group>',edge_settings:null,necessary_properties:null});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osHeatResourceGroupSettings','hotgenGlobals',function(osHeatResourceGroupSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osHeatResourceGroupSettings.resource_key,osHeatResourceGroupSettings.icon);hotgenGlobals.update_resource_components(osHeatResourceGroupSettings.resource_key,osHeatResourceGroupSettings.modal_component);hotgenGlobals.update_node_labels(osHeatResourceGroupSettings.resource_key,osHeatResourceGroupSettings.label);}]);function osHeatResourceGroupController($scope,hotgenGlobals,hotgenNotify,validationRules){this.$onInit=function(){if(typeof this.resourcegroup.resource_def==='undefined'){this.resourcegroup.resource_def={'type':'','properties':[{}],'metadata':[]};}
$scope.dependson=this.dependson;if(this.resourcegroup.resource_def.type){$scope.filecontent=hotgenGlobals.get_reference_file(this.resourcegroup.resource_def.type);}};$scope.controller=this;$scope.resource_types=[];var resource_types=hotgenGlobals.get_resource_types();resource_types.forEach(function(element){$scope.resource_types.push(element.replace(/_/g,':'));});$scope.update_upload=function(){if($scope.controller.resourcegroup&&$scope.controller.resourcegroup.resource_def&&$scope.controller.resourcegroup.resource_def.type.indexOf('.yaml')!=-1){return'true';}
return'false';}
$scope.is_upload=$scope.update_upload();$scope.show_more=false;$scope.$watch('is_upload',function(newValue,oldValue){if(oldValue===newValue){return;}
if(newValue===true||newValue==='true'){$scope.controller.resourcegroup.resource_def.properties=[{}];if(!($scope.filecontent&&$scope.filecontent.length>=0)){$scope.controller.resourcegroup.resource_def.type='';}}else{}});$scope.file_upload=function(element){var file=element.files[0];if(!file){return;}
var textType=/\.yaml$/;if(file.name.match(textType)){var reader=new FileReader();$scope.controller.resourcegroup.resource_def.type=file.name;reader.onload=function(e){hotgenNotify.show_success('Read file content.');hotgenGlobals.set_reference_file(file.name,reader.result)
$scope.filecontent=reader.result;}
reader.readAsText(file);}else{hotgenNotify.show_error('File type is not supported.');}}
$scope.clickUpload=function(){setTimeout(function(){angular.element('#resourceref-file').trigger('click');},0);};this.delete_property=function(index){this.resourcegroup.resource_def.properties.splice(index,1);}
this.add_property=function(){this.resourcegroup.resource_def.properties.push({});}
this.delete_metadata=function(index){this.resourcegroup.resource_def.metadata.splice(index,1);}
this.add_metadata=function(){this.resourcegroup.resource_def.metadata.push({});}}
function osHeatResourceGroupPath(basePath){return basePath+'js/resources/os__heat__resourcegroup/os__heat__resourcegroup.html';}
osHeatResourceGroupController.$inject=['$scope','hotgenGlobals','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osHeatResourceGroupPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osHeatResourceGroup',{templateUrl:osHeatResourceGroupPath,controller:osHeatResourceGroupController,bindings:{'resourcegroup':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})();(function(){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osHeatScalingPolicySettings',{resource_key:"OS__Heat__ScalingPolicy",admin:false,icon:{class:'fa-clone',name:'OS::Heat::ScalingPolicy',code:'\uf24d',color:'#0bb238'},label:'name',modal_component:'<os-heat-scalingpolicy scalingpolicy="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-heat-scalingpolicy>',edge_settings:{'OS__Heat__AutoScalingGroup':{'type':'property','property':'auto_scaling_group_id','limit':1,'occupied':false,'lonely':false,'modal':null}},necessary_properties:['adjustment_type','scaling_adjustment','auto_scaling_group_id']})
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osHeatScalingPolicySettings','hotgenGlobals',function(osHeatScalingPolicySettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osHeatScalingPolicySettings.resource_key,osHeatScalingPolicySettings.icon);hotgenGlobals.update_resource_components(osHeatScalingPolicySettings.resource_key,osHeatScalingPolicySettings.modal_component);hotgenGlobals.update_node_labels(osHeatScalingPolicySettings.resource_key,osHeatScalingPolicySettings.label);hotgenGlobals.update_edge_directions(osHeatScalingPolicySettings.resource_key,osHeatScalingPolicySettings.edge_settings);}]);function osHeatScalingPolicyController($scope,hotgenGlobals,hotgenNotify,validationRules){this.$onInit=function(){$scope.dependson=this.dependson;$scope.min_adj_step_disabled=false;if(this.scalingpolicy.adjustment_type!=='percent_change_in_capacity'){this.scalingpolicy.min_adjustment_step='';$scope.min_adj_step_disabled=true;}
$scope.auto_scaling_group_id_disabled=false;$scope.auto_scaling_group_id_pattern=$scope.validate_uuid4;if(this.connectedoptions.auto_scaling_group_id){for(var idx in this.connectedoptions.auto_scaling_group_id){this.scalingpolicy.auto_scaling_group_id=this.connectedoptions.auto_scaling_group_id[idx].value;break;}
$scope.auto_scaling_group_id_disabled=true;$scope.auto_scaling_group_id_pattern="";}else{if(this.scalingpolicy.auto_scaling_group_id&&this.scalingpolicy.auto_scaling_group_id.indexOf('get_resource')>=0){this.scalingpolicy.auto_scaling_group_id="";}
$scope.auto_scaling_group_id_disabled=false;}};$scope.validate_integer=validationRules['integer'];$scope.validate_uuid4=validationRules['uuid4'];$scope.controller=this;$scope.adjustment_types=[{'value':'change_in_capacity','name':'Change in Capacity'},{'value':'exact_capacity','name':'Exact Capacity'},{'value':'percent_change_in_capacity','name':'Percent Change in Capacity'},];$scope.$watch('controller.scalingpolicy.adjustment_type',function(newValue,oldValue){if(oldValue===newValue){return;}
if(newValue==='percent_change_in_capacity'){$scope.min_adj_step_disabled=false;}else{$scope.controller.scalingpolicy.min_adjustment_step='';$scope.min_adj_step_disabled=true;}});}
function osHeatScalingPolicyPath(basePath){return basePath+'js/resources/os__heat__scalingpolicy/os__heat__scalingpolicy.html';}
osHeatScalingPolicyController.$inject=['$scope','hotgenGlobals','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osHeatScalingPolicyPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osHeatScalingpolicy',{templateUrl:osHeatScalingPolicyPath,controller:osHeatScalingPolicyController,bindings:{'scalingpolicy':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})();(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNeutronFloatingipSettings',{resource_key:"OS__Neutron__FloatingIP",admin:false,icon:{class:'fa-neuter',name:'OS::Neutron::FloatingIP',code:'\uf22c',color:'#40a5f2'},label:'floating_ip_address',modal_component:'<os-neutron-floatingip floatingip="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-neutron-floatingip>',edge_settings:{'OS__Neutron__Net':{'type':'property','property':'floating_network','limit':1,},'OS__Neutron__Port':{'type':'property','property':'port_id','limit':1,},'OS__Neutron__Subnet':{'type':'property','property':'floating_subnet','limit':1,},},necessary_properties:{'floating_network':['OS__Neutron__Net']},})
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNeutronFloatingipSettings','hotgenGlobals',function(osNeutronFloatingipSettings,hotgenGlobals){hotgenGlobals.update_node_labels(osNeutronFloatingipSettings.resource_key,osNeutronFloatingipSettings.label);hotgenGlobals.update_resource_icons(osNeutronFloatingipSettings.resource_key,osNeutronFloatingipSettings.icon);hotgenGlobals.update_resource_components(osNeutronFloatingipSettings.resource_key,osNeutronFloatingipSettings.modal_component);hotgenGlobals.update_edge_directions(osNeutronFloatingipSettings.resource_key,osNeutronFloatingipSettings.edge_settings);}]);function osNeutronFloatingipController($scope,hotgenGlobals,validationRules){this.$onInit=function(){if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[]}else{$scope.connected_options=this.connectedoptions;}
$scope.dependson=this.dependson;this.disable={'floating_network':false,'floating_subnet':false,'port_id':false}
$scope.update={floating_networks:$scope.get_floating_network_options(),floating_subnets:$scope.get_floating_subnet_options(),ports:$scope.get_port_options(),}
if(typeof this.floatingip.value_specs=='undefined'){this.floatingip.value_specs=[{}]}
if($scope.connected_options.floating_network&&$scope.connected_options.floating_network.length>0){this.floatingip['floating_network']=$scope.connected_options.floating_network[0].value
this.disable.floating_network=true}
if($scope.connected_options.floating_subnet&&$scope.connected_options.floating_subnet.length>0){this.floatingip['floating_subnet']=$scope.connected_options.floating_subnet[0].value
this.disable.floating_subnet=true}
if($scope.connected_options.port_id&&$scope.connected_options.port_id.length>0){this.floatingip['port_id']=$scope.connected_options.port_id[0].value
this.disable.port_id=true}}
$scope.show_more=false;$scope.validate_ip_address=validationRules['ip_address'];$scope.options=hotgenGlobals.get_resource_options();this.add_value_specs=function(){this.floatingip.value_specs.push({})}
this.delete_value_specs=function(index){this.floatingip.value_specs.splice(index,1)}
$scope.get_floating_network_options=function(){if('floating_network'in $scope.connected_options){var resource_floating_network=[];for(var idx in $scope.connected_options.floating_network){var item=$scope.connected_options.floating_network[idx];resource_floating_network.push({id:item.value,name:item.value})}
return $scope.options.floating_networks.concat(resource_floating_network);}
return $scope.options.floating_networks;}
$scope.get_floating_subnet_options=function(){if('floating_subnet'in $scope.connected_options){var resource_floating_subnet=[];for(var idx in $scope.connected_options.floating_subnet){var item=$scope.connected_options.floating_subnet[idx];resource_floating_subnet.push({id:item.value,name:item.value})}
return $scope.options.floating_subnets.concat(resource_floating_subnet);}
return $scope.options.floating_subnets;}
$scope.get_port_options=function(){if('port_id'in $scope.connected_options){var resource_port=[];for(var idx in $scope.connected_options.port_id){var item=$scope.connected_options.port_id[idx];resource_port.push({id:item.value,name:item.value})}
return $scope.options.ports.concat(resource_port);}
return $scope.options.ports;}}
osNeutronFloatingipController.$inject=['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNeutronFloatingipPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNeutronFloatingipPath(basePath){return basePath+'js/resources/os__neutron__floatingip/os__neutron__floatingip.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNeutronFloatingip',{templateUrl:osNeutronFloatingipPath,controller:osNeutronFloatingipController,bindings:{'floatingip':'=','dependson':'=','formReference':'<','connectedoptions':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNeutronFloatingipAssociationSettings',{resource_key:"OS__Neutron__FloatingIPAssociation",admin:false,icon:{class:'fa-paperclip',name:'OS::Neutron::FloatingIPAssociation',code:'\uf0c6',color:'#40a5f2'},label:'fixed_ip_address',modal_component:'<os-neutron-floatingip-association floatingipassociation="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-neutron-floatingip-association>',edge_settings:{'OS__Neutron__FloatingIP':{'type':'property','property':'floatingip_id','limit':1,},'OS__Neutron__Port':{'type':'property','property':'port_id','limit':1,},},necessary_properties:{'floatingip_id':['OS__Neutron__FloatingIP'],'port_id':['OS__Neutron__Port'],}})
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNeutronFloatingipAssociationSettings','hotgenGlobals',function(osNeutronFloatingipAssociationSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNeutronFloatingipAssociationSettings.resource_key,osNeutronFloatingipAssociationSettings.icon);hotgenGlobals.update_resource_components(osNeutronFloatingipAssociationSettings.resource_key,osNeutronFloatingipAssociationSettings.modal_component);hotgenGlobals.update_edge_directions(osNeutronFloatingipAssociationSettings.resource_key,osNeutronFloatingipAssociationSettings.edge_settings);hotgenGlobals.update_node_labels(osNeutronFloatingipAssociationSettings.resource_key,osNeutronFloatingipAssociationSettings.label);}]);function osNeutronFloatingipAssociationController($scope,hotgenGlobals,validationRules){this.$onInit=function(){if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[];}else{$scope.connected_options=this.connectedoptions;}
this.disable={'floatingip_id':false,'port_id':false}
$scope.dependson=this.dependson;$scope.update={floatingips:$scope.get_floatingip_options(),ports:$scope.get_port_options(),}
if($scope.connected_options.floatingip_id&&$scope.connected_options.floatingip_id.length>0){this.floatingipassociation['floatingip_id']=$scope.connected_options.floatingip_id[0].value;this.disable.floatingip_id=true;}
if($scope.connected_options.port_id&&$scope.connected_options.port_id.length>0){this.floatingipassociation['port_id']=$scope.connected_options.port_id[0].value;this.disable.port_id=true;}}
$scope.options=hotgenGlobals.get_resource_options();$scope.validate_ip_address=validationRules['ip_address'];$scope.get_floatingip_options=function(){if('floatingip_id'in $scope.connected_options){var resource_fip=[];for(var idx in $scope.connected_options.floatingip_id){var item=$scope.connected_options.floatingip_id[idx];resource_fip.push({id:item.value,})}
return $scope.options.floatingips.concat(resource_fip);}
return $scope.options.floatingips;}
$scope.get_port_options=function(){if('port_id'in $scope.connected_options){var resource_port=[];for(var idx in $scope.connected_options.port_id){var item=$scope.connected_options.port_id[idx];resource_port.push({id:item.value,name:item.value})}
return $scope.options.ports.concat(resource_port);}
return $scope.options.ports;}}
osNeutronFloatingipAssociationController.$inject=['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNeutronFloatingipAssociationPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNeutronFloatingipAssociationPath(basePath){return basePath+'js/resources/os__neutron__floatingipassociation/os__neutron__floatingipassociation.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNeutronFloatingipAssociation',{templateUrl:osNeutronFloatingipAssociationPath,controller:osNeutronFloatingipAssociationController,bindings:{'floatingipassociation':'=','dependson':'=','formReference':'<','connectedoptions':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNeutronNetSettings',{resource_key:"OS__Neutron__Net",admin:false,icon:{class:'fa-cloud',name:'OS::Neutron::Net',code:'\uf0c2',color:'#40a5f2'},label:'name',modal_component:'<os-neutron-net network="resource" dependson="dependson" form-reference="resourceForm"></os-neutron-net>',edge_settings:null,necessary_properties:null});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNeutronNetSettings','hotgenGlobals',function(osNeutronNetSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNeutronNetSettings.resource_key,osNeutronNetSettings.icon);hotgenGlobals.update_resource_components(osNeutronNetSettings.resource_key,osNeutronNetSettings.modal_component);hotgenGlobals.update_edge_directions(osNeutronNetSettings.resource_key,osNeutronNetSettings.edge_settings);hotgenGlobals.update_node_labels(osNeutronNetSettings.resource_key,osNeutronNetSettings.label);}]);function osNeutronNetController($scope,hotgenGlobals,validationRules){this.$onInit=function(){this.admin=$scope.options.auth.admin;if(typeof this.network.tags=='undefined'){this.network.tags=[]}
if(typeof this.network.dhcp_agent_ids==='undefined'){this.network.dhcp_agent_ids=[];}
if(typeof this.network.admin_state_up==='undefined'){this.network.admin_state_up=true;}
if(typeof this.network.value_specs=='undefined'){this.network.value_specs=[{}]}
$scope.dependson=this.dependson;};this.add_value_specs=function(){this.network.value_specs.push({})}
this.delete_value_specs=function(index){this.network.value_specs.splice(index,1)}
$scope.options=hotgenGlobals.get_resource_options();$scope.qos_policies=$scope.options.qos_policies;$scope.show_more=false;$scope.validate_name=validationRules['name'];$scope.validate_domain=validationRules['domain'];$scope.validate_uuid_nohyphe=validationRules['uuid_nohyphen'];}
osNeutronNetController.$inject=['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNeutronNetPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNeutronNetPath(basePath){return basePath+'js/resources/os__neutron__net/os__neutron__net.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNeutronNet',{templateUrl:osNeutronNetPath,controller:osNeutronNetController,bindings:{'network':'=','dependson':'=','formReference':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNeutronPortSettings',{resource_key:"OS__Neutron__Port",admin:false,icon:{class:'fa-genderless',name:'OS::Neutron::Port',code:'\uf22d',color:'#40a5f2',},label:'name',modal_component:'<os-neutron-port port="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-neutron-port>',edge_settings:{'OS__Neutron__Net':{'type':'property','property':'network','limit':1,},'OS__Neutron__Subnet':{'type':'complex','property':'fixed_ips.subnet','limit':99,},'OS__Neutron__SecurityGroup':{'type':'list','property':'security_groups','limit':99,},},necessary_properties:{'network':['OS__Neutron__Net'],}});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNeutronPortSettings','hotgenGlobals',function(osNeutronPortSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNeutronPortSettings.resource_key,osNeutronPortSettings.icon);hotgenGlobals.update_resource_components(osNeutronPortSettings.resource_key,osNeutronPortSettings.modal_component);hotgenGlobals.update_edge_directions(osNeutronPortSettings.resource_key,osNeutronPortSettings.edge_settings);hotgenGlobals.update_node_labels(osNeutronPortSettings.resource_key,osNeutronPortSettings.label);}]);function osNeutronPortController($scope,hotgenGlobals,validationRules){this.$onInit=function(){if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[]}else{$scope.connected_options=this.connectedoptions;}
this.disable={'network':false,'subnets':[],'security_groups':[],}
if(typeof this.port.admin_state_up==='undefined'){this.port.admin_state_up=true;}
if(typeof this.port.binding==='undefined'){this.port.binding={'vnic_type':''};}
if(typeof this.port.allowed_address_pairs==='undefined'){this.port.allowed_address_pairs=[{}];}
if(typeof this.port.fixed_ips==='undefined'){this.port.fixed_ips=[{}];}
if(typeof this.port.security_groups==='undefined'){this.port.security_groups=[];}
if(typeof this.port.value_specs=='undefined'){this.port.value_specs=[{}]}
if(this.port.device_owner){this.searchText=this.port.device_owner;}
if($scope.connected_options.network&&$scope.connected_options.network.length>0){this.port['network']=$scope.connected_options.network[0].value;this.disable.network=true;}
if($scope.connected_options.security_groups&&$scope.connected_options.security_groups.length>0){for(var idx in $scope.connected_options.security_groups){this.port['security_groups'].push($scope.connected_options.security_groups[idx].value);this.disable.security_groups.push($scope.connected_options.security_groups[idx].value);}}
if($scope.connected_options['fixed_ips.subnet']&&$scope.connected_options['fixed_ips.subnet'].length>0){for(var idx in $scope.connected_options['fixed_ips.subnet']){this.port.fixed_ips.splice(0,0,{subnet:$scope.connected_options['fixed_ips.subnet'][idx].value});this.disable.subnets.push($scope.connected_options['fixed_ips.subnet'][idx].value);}}
$scope.update={networks:$scope.get_networks_options(),security_groups:$scope.get_security_groups_options(),subnets:$scope.get_subnets_options(),}
$scope.dependson=this.dependson;};$scope.options=hotgenGlobals.get_resource_options();$scope.show_more=false;$scope.validate_name=validationRules['name'];$scope.validate_mac_address=validationRules['mac_address'];$scope.validate_ip_address=validationRules['ip_address'];this.device_owners=load_device_owners();this.querySearch=querySearch;this.show_not_found=true;this.selectedItemChange=selectedItemChange;this.searchTextChange=searchTextChange;$scope.get_networks_options=function(){if('network'in $scope.connected_options){var resource_nw=[];for(var idx in $scope.connected_options.network){var item=$scope.connected_options.network[idx];resource_nw.push({id:item.value,name:item.value})}
return $scope.options.networks.concat(resource_nw);}
return $scope.options.networks;}
$scope.get_security_groups_options=function(){if('security_groups'in $scope.connected_options){var resource_secgroups=[];for(var idx in $scope.connected_options.security_groups){var item=$scope.connected_options.security_groups[idx];resource_secgroups.push({id:item.value,name:item.value})}
return $scope.options.security_groups.concat(resource_secgroups);}
return $scope.options.security_groups;}
$scope.get_subnets_options=function(){if('fixed_ips.subnet'in $scope.connected_options){var resource_subnets=[];for(var idx in $scope.connected_options['fixed_ips.subnet']){var item=$scope.connected_options['fixed_ips.subnet'][idx];resource_subnets.push({id:item.value,name:item.value})}
return $scope.options.subnets.concat(resource_subnets);}
return $scope.options.subnets;}
$scope.qos_policies=$scope.options.qos_policies;this.add_value_specs=function(){this.port.value_specs.push({})}
this.delete_value_specs=function(index){this.port.value_specs.splice(index,1)}
this.add_allowed_address_pair=function(){this.port.allowed_address_pairs.push({})}
this.add_fixed_ip=function(){this.port.fixed_ips.push({})}
this.delete_allowed_address_pair=function(index){this.port.allowed_address_pairs.splice(index,1)}
this.delete_fixed_ip=function(index){this.port.fixed_ips.splice(index,1)}
function searchTextChange(text){this.port.device_owner=text;}
function selectedItemChange(item){this.port.device_owner=item.display;}
function load_device_owners(){var all_device_owners='network:floatingip, network:router_interface, network:dhcp';return all_device_owners.split(/, +/g).map(function(dev_owner){return{value:dev_owner.replace(/:/g,'_'),display:dev_owner}});}
function querySearch(query){return query?this.device_owners.filter(createFilterFor(query)):this.device_owners;}
function createFilterFor(query){var lowercaseQuery=angular.lowercase(query).replace(/:/g,'_');return function filterFn(dev_owner){return(dev_owner.value.indexOf(lowercaseQuery)===0);};}}
osNeutronPortController.$inject=['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNeutronPortPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNeutronPortPath(basePath){return basePath+'js/resources/os__neutron__port/os__neutron__port.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNeutronPort',{templateUrl:osNeutronPortPath,controller:osNeutronPortController,bindings:{'port':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNeutronRouterSettings',{resource_key:"OS__Neutron__Router",icon:{class:'fa-life-bouy',name:'OS::Neutron::Router',code:'\uf1cd',color:'#40a5f2'},label:'name',modal_component:'<os-neutron-router router="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-neutron-router>',edge_settings:{'OS__Neutron__Subnet':{'type':'property','property':'ext_fixed_ips.subnet','limit':99,},'OS__Neutron__Net':{'type':'property','property':'external_gateway_info.network','limit':1,},},necessary_properties:null});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNeutronRouterSettings','hotgenGlobals',function(osNeutronRouterSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNeutronRouterSettings.resource_key,osNeutronRouterSettings.icon);hotgenGlobals.update_node_admin(osNeutronRouterSettings.resource_key,osNeutronRouterSettings.admin);hotgenGlobals.update_resource_components(osNeutronRouterSettings.resource_key,osNeutronRouterSettings.modal_component);hotgenGlobals.update_edge_directions(osNeutronRouterSettings.resource_key,osNeutronRouterSettings.edge_settings);hotgenGlobals.update_node_labels(osNeutronRouterSettings.resource_key,osNeutronRouterSettings.label);}]);function osNeutronRouterController($scope,hotgenGlobals,validationRules){this.$onInit=function(){if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[]}else{$scope.connected_options=this.connectedoptions;}
if(typeof this.router.external_gateway_info==='undefined'){this.router.external_gateway_info={"external_fixed_ips":[{}]};}
if(typeof this.router.l3_agent_ids==='undefined'){this.router.l3_agent_ids=[];}
if(typeof this.router.tags=='undefined'){this.router.tags=[]}
if(typeof this.router.admin_state_up==='undefined'){this.router.admin_state_up=true;}
if(typeof this.router.value_specs=='undefined'){this.router.value_specs=[{}]}
this.disable={'subnets':[],'network':false,}
if($scope.connected_options['ext_fixed_ips.subnet']&&$scope.connected_options['ext_fixed_ips.subnet'].length>0){for(var idx in $scope.connected_options['ext_fixed_ips.subnet']){this.router.external_gateway_info.external_fixed_ips.splice(0,0,{subnet:$scope.connected_options['ext_fixed_ips.subnet'][idx].value});this.disable.subnets.push($scope.connected_options['ext_fixed_ips.subnet'][idx].value);}}
if($scope.connected_options['external_gateway_info.network']&&$scope.connected_options['external_gateway_info.network'].length>0){this.router.external_gateway_info['network']=$scope.connected_options['external_gateway_info.network'][0].value;this.disable.network=true}
$scope.update={subnets:$scope.get_subnets_options(),networks:$scope.get_networks_options()}
$scope.dependson=this.dependson;};$scope.options=hotgenGlobals.get_resource_options();$scope.show_more=false;$scope.validate_name=validationRules['name'];$scope.validate_ip_address=validationRules['ip_address'];this.add_external_fixed_ip=function(){this.router.external_gateway_info.external_fixed_ips.push({})}
this.delete_external_fixed_ip=function(index){this.router.external_gateway_info.external_fixed_ips.splice(index,1)}
this.add_value_specs=function(){this.router.value_specs.push({})}
this.delete_value_specs=function(index){this.router.value_specs.splice(index,1)}
$scope.get_networks_options=function(){if('external_gateway_info.network'in $scope.connected_options){var resource_networks=[];for(var idx in $scope.connected_options['external_gateway_info.network']){var item=$scope.connected_options['external_gateway_info.network'][idx];resource_networks.push({id:item.value,name:item.value})}
return $scope.options.networks.concat(resource_networks);}
return $scope.options.networks;}
$scope.get_subnets_options=function(){if('ext_fixed_ips.subnet'in $scope.connected_options){var resource_subnets=[];for(var idx in $scope.connected_options['ext_fixed_ips.subnet']){var item=$scope.connected_options['ext_fixed_ips.subnet'][idx];resource_subnets.push({id:item.value,name:item.value})}
return $scope.options.subnets.concat(resource_subnets);}
return $scope.options.subnets;}}
osNeutronRouterController.$inject=['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNeutronRouterPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNeutronRouterPath(basePath){return basePath+'js/resources/os__neutron__router/os__neutron__router.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNeutronRouter',{templateUrl:osNeutronRouterPath,controller:osNeutronRouterController,bindings:{'router':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNeutronRouterInterfaceSettings',{resource_key:"OS__Neutron__RouterInterface",admin:false,icon:{class:'fa-sun-o',name:'OS::Neutron::RouterInterface',code:'\uf185',color:'#40a5f2'},modal_component:'<os-neutron-router-interface routerinterface="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-neutron-router-interface>',edge_settings:{'OS__Neutron__Port':{'type':'property','property':'port','limit':1,},'OS__Neutron__Router':{'type':'property','property':'router','limit':1,},'OS__Neutron__Subnet':{'type':'property','property':'subnet','limit':1,},},necessary_properties:{'router':['OS__Neutron__Router'],}});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNeutronRouterInterfaceSettings','hotgenGlobals',function(osNeutronRouterInterfaceSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNeutronRouterInterfaceSettings.resource_key,osNeutronRouterInterfaceSettings.icon);hotgenGlobals.update_resource_components(osNeutronRouterInterfaceSettings.resource_key,osNeutronRouterInterfaceSettings.modal_component);hotgenGlobals.update_edge_directions(osNeutronRouterInterfaceSettings.resource_key,osNeutronRouterInterfaceSettings.edge_settings);hotgenGlobals.update_node_labels(osNeutronRouterInterfaceSettings.resource_key,osNeutronRouterInterfaceSettings.label);}]);function osNeutronRouterInterfaceController($scope,hotgenGlobals){this.$onInit=function(){if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[]}else{$scope.connected_options=this.connectedoptions;}
this.disable={'port':false,'router':false,'subnet':false}
$scope.update={subnets:$scope.get_subnets_options(),routers:$scope.get_routers_options(),ports:$scope.get_ports_options(),}
if($scope.connected_options.port&&$scope.connected_options.port.length>0){this.routerinterface['port']=$scope.connected_options.port[0].value
this.disable.port=true}
if($scope.connected_options.router&&$scope.connected_options.router.length>0){this.routerinterface['router']=$scope.connected_options.router[0].value
this.disable.router=true}
if($scope.connected_options.subnet&&$scope.connected_options.subnet.length>0){this.routerinterface['subnet']=$scope.connected_options.subnet[0].value
this.disable.subnet=true}
$scope.dependson=this.dependson;}
$scope.options=hotgenGlobals.get_resource_options();$scope.get_subnets_options=function(){if('subnet'in $scope.connected_options){var resource_subnets=[];for(var idx in $scope.connected_options.subnet){var item=$scope.connected_options.subnet[idx];resource_subnets.push({id:item.value,name:item.value})}
return $scope.options.subnets.concat(resource_subnets);}
return $scope.options.subnets;}
$scope.get_ports_options=function(){if('port'in $scope.connected_options){var resource_ports=[];for(var idx in $scope.connected_options.port){var item=$scope.connected_options.port[idx];resource_ports.push({id:item.value,name:item.value})}
return $scope.options.ports.concat(resource_ports);}
return $scope.options.ports;}
$scope.get_routers_options=function(){if('router'in $scope.connected_options){var resource_routers=[];for(var idx in $scope.connected_options.router){var item=$scope.connected_options.router[idx];resource_routers.push({id:item.value,name:item.value})}
return $scope.options.routers.concat(resource_routers);}
return $scope.options.routers;}}
osNeutronRouterInterfaceController.$inject=['$scope','hotgenGlobals',];osNeutronRouterInterfacePath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNeutronRouterInterfacePath(basePath){return basePath+'js/resources/os__neutron__routerinterface/os__neutron__routerinterface.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNeutronRouterInterface',{templateUrl:osNeutronRouterInterfacePath,controller:osNeutronRouterInterfaceController,bindings:{'routerinterface':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNeutronSecurityGroupSettings',{resource_key:"OS__Neutron__SecurityGroup",admin:false,icon:{class:'fa-shield ',name:'OS::Neutron::SecurityGroup',code:'\uf132',color:'#40a5f2'},label:'name',modal_component:'<os-neutron-security-group securitygroup="resource" dependson="dependson" form-reference="resourceForm"></os-neutron-security-group>',edge_settings:null,necessary_properties:null});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNeutronSecurityGroupSettings','hotgenGlobals',function(osNeutronSecurityGroupSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNeutronSecurityGroupSettings.resource_key,osNeutronSecurityGroupSettings.icon);hotgenGlobals.update_resource_components(osNeutronSecurityGroupSettings.resource_key,osNeutronSecurityGroupSettings.modal_component);hotgenGlobals.update_edge_directions(osNeutronSecurityGroupSettings.resource_key,osNeutronSecurityGroupSettings.edge_settings);hotgenGlobals.update_node_labels(osNeutronSecurityGroupSettings.resource_key,osNeutronSecurityGroupSettings.label);}]);function osNeutronSecurityGroupController($scope,validationRules){this.$onInit=function(){if(typeof this.securitygroup.rules==='undefined'){this.securitygroup.rules=[{}];}
$scope.dependson=this.dependson;}
this.add_rule=function(){this.securitygroup.rules.push({})}
this.delete_rule=function(index){this.securitygroup.rules.splice(index,1)}
$scope.validate_name=validationRules['name'];$scope.validate_cidr=validationRules['cidr'];}
osNeutronSecurityGroupController.$inject=['$scope','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNeutronSecurityGroupPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNeutronSecurityGroupPath(basePath){return basePath+'js/resources/os__neutron__securitygroup/os__neutron__securitygroup.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNeutronSecurityGroup',{templateUrl:osNeutronSecurityGroupPath,controller:osNeutronSecurityGroupController,bindings:{'securitygroup':'=','dependson':'=','formReference':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNeutronSubnetSettings',{resource_key:"OS__Neutron__Subnet",admin:false,icon:{class:'fa-cloud-upload ',name:'OS::Neutron::Subnet',code:'\uf0ee',color:'#40a5f2'},label:'name',modal_component:'<os-neutron-subnet subnet="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-neutron-subnet>',edge_settings:{'OS__Neutron__Net':{'type':'property','property':'network','limit':1,},},necessary_properties:{'network':['OS__Neutron__Net']}});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNeutronSubnetSettings','hotgenGlobals',function(osNeutronSubnetSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNeutronSubnetSettings.resource_key,osNeutronSubnetSettings.icon);hotgenGlobals.update_resource_components(osNeutronSubnetSettings.resource_key,osNeutronSubnetSettings.modal_component);hotgenGlobals.update_edge_directions(osNeutronSubnetSettings.resource_key,osNeutronSubnetSettings.edge_settings);hotgenGlobals.update_node_labels(osNeutronSubnetSettings.resource_key,osNeutronSubnetSettings.label);}]);function osNeutronSubnetController($scope,hotgenGlobals,hotgenNotify,validationRules){this.$onInit=function(){this.admin=$scope.options.auth.admin;if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[]}else{$scope.connected_options=this.connectedoptions;}
this.disable={'network':false}
$scope.networks=$scope.get_networks_options();if(typeof this.subnet.allocation_pools==='undefined'){this.subnet.allocation_pools=[{}];}
if(typeof this.subnet.host_routes==='undefined'){this.subnet.host_routes=[{}];}
if(typeof this.subnet.dns_nameservers==='undefined'){this.subnet.dns_nameservers=[];}
if($scope.connected_options.network&&$scope.connected_options.network.length>0){this.subnet['network']=$scope.connected_options.network[0].value
this.disable.network=true}
$scope.dependson=this.dependson;}
this.add_allocation_pool=function(){this.subnet.allocation_pools.push({})}
this.delete_allocation_pool=function(index){this.subnet.allocation_pools.splice(index,1)}
this.add_hostroute=function(){this.subnet.host_routes.push({})}
this.delete_hostroute=function(index){this.subnet.host_routes.splice(index,1)}
$scope.validate_dns=function(input_string){var re=/^[A-Za-z0-9_.-]+$/;var match=re.exec(input_string);if(match){return input_string;}else{hotgenNotify.show_error('Invalid name server address.');return null;}}
$scope.options=hotgenGlobals.get_resource_options();$scope.validate_name=validationRules['name'];$scope.validate_ip_address=validationRules['ip_address'];$scope.validate_cidr=validationRules['cidr'];$scope.validate_uuid4=validationRules['uuid4'];$scope.validate_uuid_nohyphen=validationRules['uuid_nohyphen'];$scope.get_networks_options=function(){if('network'in $scope.connected_options){var resource_nws=[];for(var idx in $scope.connected_options.network){var item=$scope.connected_options.network[idx];resource_nws.push({id:item.value,name:item.value})}
return $scope.options.networks.concat(resource_nws);}
return $scope.options.networks;}}
osNeutronSubnetController.$inject=['$scope','hotgenGlobals','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNeutronSubnetPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNeutronSubnetPath(basePath){return basePath+'js/resources/os__neutron__subnet/os__neutron__subnet.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNeutronSubnet',{templateUrl:osNeutronSubnetPath,controller:osNeutronSubnetController,bindings:{'subnet':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNovaKeypairSettings',{resource_key:"OS__Nova__KeyPair",admin:false,icon:{class:'fa-key ',name:'OS::Nova::KeyPair',code:'\uf084',color:'#483dff'},label:'name',outputs:[{'property':'private_key',}],modal_component:'<os-nova-keypair keypair="resource" dependson="dependson" form-reference="resourceForm"></os-nova-keypair>',edge_settings:null,necessary_properties:{'name':null},});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNovaKeypairSettings','hotgenGlobals',function(osNovaKeypairSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNovaKeypairSettings.resource_key,osNovaKeypairSettings.icon);hotgenGlobals.update_resource_components(osNovaKeypairSettings.resource_key,osNovaKeypairSettings.modal_component);hotgenGlobals.update_node_labels(osNovaKeypairSettings.resource_key,osNovaKeypairSettings.label);hotgenGlobals.set_resource_outputs(osNovaKeypairSettings.resource_key,osNovaKeypairSettings.outputs);}]);function osNovaKeypairController($scope,hotgenGlobals,validationRules){$scope.options=hotgenGlobals.get_resource_options();$scope.admin=$scope.options.auth.admin;this.$onInit=function(){$scope.dependson=this.dependson;}
$scope.validate_name=validationRules['name'];$scope.validate_keypair=validationRules['keypair'];}
osNovaKeypairController.$inject=['$scope','hotgenGlobals','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNovaKeypairPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNovaKeypairPath(basePath){return basePath+'js/resources/os__nova__keypair/os__nova__keypair.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNovaKeypair',{templateUrl:osNovaKeypairPath,controller:osNovaKeypairController,bindings:{'keypair':'=','dependson':'=','formReference':'<',}});})(window.angular);(function(angular){'use strict';angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osNovaServerSettings',{resource_key:"OS__Nova__Server",admin:false,icon:{class:'fa-desktop ',name:'OS::Nova::Server',code:'\uf108',color:'#483dff'},label:'name',modal_component:'<os-nova-server instance="resource" dependson="dependson" connectedoptions="connectedoptions" form-reference="resourceForm"></os-nova-server>',edge_settings:{'OS__Cinder__Volume':{'type':'property','property':'block_device_mapping_v2.volume_id','limit':99,'occupied':true,'lonely':true,},'OS__Nova__KeyPair':{'type':'property','property':'key_name','limit':1,},'OS__Neutron__Net':{'type':'property','property':'networks.network','limit':99,},'OS__Neutron__FloatingIP':{'type':'property','property':'networks.floating_ip','limit':99,},'OS__Neutron__Subnet':{'type':'property','property':'networks.subnet','limit':99,},'OS__Neutron__Port':{'type':'property','property':'networks.port','limit':99,},'OS__Neutron__SecurityGroup':{'type':'property','property':'security_groups','limit':99,},},necessary_properties:{'flavor':null}});angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osNovaServerSettings','hotgenGlobals',function(osNovaServerSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osNovaServerSettings.resource_key,osNovaServerSettings.icon);hotgenGlobals.update_node_labels(osNovaServerSettings.resource_key,osNovaServerSettings.label);hotgenGlobals.update_resource_components(osNovaServerSettings.resource_key,osNovaServerSettings.modal_component);hotgenGlobals.update_edge_directions(osNovaServerSettings.resource_key,osNovaServerSettings.edge_settings);}]);function osNovaServerController($scope,hotgenGlobals,hotgenNotify,hotgenUtils,validationRules){this.$onInit=function(){if(typeof this.connectedoptions==='undefined'){$scope.connected_options=[]}else{$scope.connected_options=this.connectedoptions;}
if(typeof this.instance.metadata==='undefined'){this.instance.metadata=[{}];}
if(typeof this.instance.tags==='undefined'){this.instance.tags=[];}
if(typeof this.instance.scheduler_hints==='undefined'){this.instance.scheduler_hints=[{}];}
if(typeof this.instance.personality==='undefined'){this.instance.personality=[{}];}
if(typeof this.instance.block_device_mapping==='undefined'){this.instance.block_device_mapping=[];}
if(typeof this.instance.security_groups==='undefined'){this.instance.security_groups=[];}
if(typeof this.instance.block_device_mapping_v2==='undefined'){this.instance.block_device_mapping_v2=[];}
if(typeof this.instance.networks==='undefined'){this.instance.networks=[];}
this.disable={'key_name':false,'security_groups':[],'block_device_mapping_v2.volume_id':[],'networks':{},}
if(this.instance.image){$scope.boot_source='image';}else if(this.instance.image_snapshot){$scope.boot_source='image_snapshot';}else if(this.instance.volume){$scope.boot_source='volume';}else if(this.instance.volume_snapshot){$scope.boot_source='volume_snapshot';}
if($scope.connected_options.key_name&&$scope.connected_options.key_name.length>0){this.instance['key_name']=$scope.connected_options.key_name[0].value;this.disable.key_name=true;}
var old_array=hotgenUtils.filter_and_return_get_resource_element(this.instance['security_groups']);if($scope.connected_options.security_groups&&$scope.connected_options.security_groups.length>0){for(var idx in $scope.connected_options.security_groups){this.instance['security_groups'].push($scope.connected_options.security_groups[idx].value);this.disable.security_groups.push($scope.connected_options.security_groups[idx].value);}}
var old_array=hotgenUtils.filter_and_return_get_resource_element(this.instance['block_device_mapping_v2'],'volume_id');var exist_volume_map={}
for(var idx in old_array){if(old_array[idx].volume_id&&old_array[idx].volume_id.length>0){exist_volume_map[old_array[idx].volume_id]=old_array[idx];}}
this.disable.length=0;$scope.bdpv2_source={};if($scope.connected_options['block_device_mapping_v2.volume_id']&&$scope.connected_options['block_device_mapping_v2.volume_id'].length>0){for(var idx in $scope.connected_options['block_device_mapping_v2.volume_id']){var connected_vol_id=$scope.connected_options['block_device_mapping_v2.volume_id'][idx].value;var item=exist_volume_map[connected_vol_id];if(item==null){item={volume_id:connected_vol_id}}
this.instance.block_device_mapping_v2.push(item);this.disable['block_device_mapping_v2.volume_id'].push(connected_vol_id);}}
for(var idx in this.instance.block_device_mapping_v2){var disk=this.instance.block_device_mapping_v2[idx];var source='';if(disk.volume_id&&disk.volume_id!=''){source='volume';}else if(disk.image&&disk.image!=''){source='image';}else if(disk.snapshot_id&&disk.snapshot_id!=''){source='volume_snapshot';}
$scope.bdpv2_source[idx.toString()]=source;}
var old_net_array=hotgenUtils.filter_and_return_get_resource_element(this.instance['networks'],'network');var exist_network_map={}
for(var idx in old_net_array){if(old_net_array[idx].network&&old_net_array[idx].network.length>0){exist_network_map[old_net_array[idx].network]=old_net_array[idx];}}
var old_subnet_array=hotgenUtils.filter_and_return_get_resource_element(this.instance['networks'],'subnet');var exist_subnet_map={}
for(var idx in old_subnet_array){if(old_subnet_array[idx].subnet&&old_subnet_array[idx].subnet.length>0){exist_subnet_map[old_subnet_array[idx].subnet]=old_subnet_array[idx];}}
var old_port_array=hotgenUtils.filter_and_return_get_resource_element(this.instance['networks'],'port');var exist_port_map={}
for(var idx in old_port_array){if(old_port_array[idx].port&&old_port_array[idx].port.length>0){exist_port_map[old_port_array[idx].port]=old_port_array[idx];}}
var old_fip_array=hotgenUtils.filter_and_return_get_resource_element(this.instance['networks'],'floating_ip');var exist_fip_map={}
for(var idx in old_fip_array){if(old_fip_array[idx].floating_ip&&old_fip_array[idx].floating_ip.length>0){exist_fip_map[old_fip_array[idx].floating_ip]=old_fip_array[idx];}}
if($scope.connected_options['networks.network']&&$scope.connected_options['networks.network'].length>0){for(var idx in $scope.connected_options['networks.network']){var connected_nw_id=$scope.connected_options['networks.network'][idx].value;var item=exist_network_map[connected_nw_id];if(item==null){item={network:connected_nw_id}}
this.disable.networks[this.instance.networks.length.toString()]=true;$scope.how2config_networks[this.instance.networks.length.toString()]='network';this.instance.networks.push(item);}}
if($scope.connected_options['networks.subnet']&&$scope.connected_options['networks.subnet'].length>0){for(var idx in $scope.connected_options['networks.subnet']){var connected_subnet_id=$scope.connected_options['networks.subnet'][idx].value;var item=exist_subnet_map[connected_subnet_id];if(item==null){item={subnet:connected_subnet_id}}
this.disable.networks[this.instance.networks.length]=true;$scope.how2config_networks[this.instance.networks.length.toString()]='subnet';this.instance.networks.push(item);}}
if($scope.connected_options['networks.port']&&$scope.connected_options['networks.port'].length>0){for(var idx in $scope.connected_options['networks.port']){var connected_port_id=$scope.connected_options['networks.port'][idx].value;var item=exist_port_map[connected_port_id];if(item==null){item={port:connected_port_id}}
this.disable.networks[this.instance.networks.length]=true;$scope.how2config_networks[this.instance.networks.length.toString()]='port';this.instance.networks.push(item);}}
if($scope.connected_options['networks.floating_ip']&&$scope.connected_options['networks.floating_ip'].length>0){for(var idx in $scope.connected_options['networks.floating_ip']){var connected_fip_id=$scope.connected_options['networks.floating_ip'][idx].value;var item=exist_fip_map[connected_fip_id];if(item==null){item={floating_ip:connected_fip_id}}
this.disable.networks[this.instance.networks.length]=true;$scope.how2config_networks[this.instance.networks.length.toString()]='floating_ip';this.instance.networks.push(item);}}
for(var idx in this.instance.networks){var netconfig=this.instance.networks[idx];var source='';if(netconfig.network&&netconfig.network!=''){source='network';}else if(netconfig.subnet&&netconfig.subnet!=''){source='subnet';}else if(netconfig.port&&netconfig.port!=''){source='port';}else if(netconfig.floating_ip&&netconfig.floating_ip!=''){source='floating_ip';}
$scope.how2config_networks[idx.toString()]=source;}
$scope.update={keypairs:$scope.get_keypairs_options(),networks:$scope.get_networks_options(),subnets:$scope.get_subnets_options(),floatingips:$scope.get_floatingips_options(),ports:$scope.get_ports_options(),security_groups:$scope.get_security_groups_options(),volumes:$scope.get_volumes_options(),}
$scope.dependson=this.dependson;}
$scope.show_passwd=false;$scope.show_passwd_type="password";$scope.bdpv2_source={};$scope.how2config_networks={}
$scope.update_boot_source=function(){if($scope.boot_source=='image'){this.$ctrl.instance.image_snapshot=null;this.$ctrl.instance.volume=null;this.$ctrl.instance.volume_snapshot=null;}else if($scope.boot_source=='image_snapshot'){this.$ctrl.instance.image=null;this.$ctrl.instance.volume=null;this.$ctrl.instance.volume_snapshot=null;}else if($scope.boot_source=='volume'){this.$ctrl.instance.image=null;this.$ctrl.instance.image_snapshot=null;this.$ctrl.instance.volume_snapshot=null;}else if($scope.boot_source=='volume_snapshot'){this.$ctrl.instance.image=null;this.$ctrl.instance.image_snapshot=null;this.$ctrl.instance.volume=null;}}
$scope.update_source=function(index){if($scope.bdpv2_source[index]=='volume'){this.$ctrl.instance.block_device_mapping_v2[index].image=null;this.$ctrl.instance.block_device_mapping_v2[index].snapshot_id=null;}else if($scope.bdpv2_source[index]=='volume_snapshot'){this.$ctrl.instance.block_device_mapping_v2[index].volume_id=null;this.$ctrl.instance.block_device_mapping_v2[index].image=null;}else if($scope.bdpv2_source[index]=='image'){this.$ctrl.instance.block_device_mapping_v2[index].volume_id=null;this.$ctrl.instance.block_device_mapping_v2[index].snapshot_id=null;}}
$scope.update_nwconfig=function(index){if($scope.how2config_networks[index]=='network'){this.$ctrl.instance.networks[index].subnet=null;this.$ctrl.instance.networks[index].port=null;this.$ctrl.instance.networks[index].floating_ip=null;}else if($scope.how2config_networks[index]=='subnet'){this.$ctrl.instance.networks[index].network=null;this.$ctrl.instance.networks[index].port=null;this.$ctrl.instance.networks[index].floating_ip=null;}else if($scope.how2config_networks[index]=='port'){this.$ctrl.instance.networks[index].subnet=null;this.$ctrl.instance.networks[index].network=null;this.$ctrl.instance.networks[index].floating_ip=null;}else if($scope.how2config_networks[index]=='floating_ip'){this.$ctrl.instance.networks[index].subnet=null;this.$ctrl.instance.networks[index].port=null;this.$ctrl.instance.networks[index].network=null;}}
$scope.$watch("show_passwd",function(newValue,oldValue){$scope.show_passwd_type=$scope.show_passwd?"text":"password";});$scope.options=hotgenGlobals.get_resource_options();$scope.get_security_groups_options=function(){if('security_groups'in $scope.connected_options){var resource_secgroups=[];for(var idx in $scope.connected_options.security_groups){var item=$scope.connected_options.security_groups[idx];resource_secgroups.push({id:item.value,name:item.value})}
return $scope.options.security_groups.concat(resource_secgroups);}
return $scope.options.security_groups;}
$scope.get_volumes_options=function(){if('block_device_mapping_v2.volume_id'in $scope.connected_options){var resource_volumes=[];for(var idx in $scope.connected_options['block_device_mapping_v2.volume_id']){var item=$scope.connected_options['block_device_mapping_v2.volume_id'][idx];resource_volumes.push({id:item.value,name:item.value})}
return $scope.options.volumes.concat(resource_volumes);}
return $scope.options.volumes;}
$scope.get_keypairs_options=function(){if('key_name'in $scope.connected_options){var resource_keypair=[];for(var idx in $scope.connected_options.key_name){var item=$scope.connected_options.key_name[idx];resource_keypair.push({name:item.value})}
return $scope.options.keypairs.concat(resource_keypair);}
return $scope.options.keypairs;}
$scope.get_networks_options=function(){if('networks.network'in $scope.connected_options){var resource_nw=[];for(var idx in $scope.connected_options['networks.network']){var item=$scope.connected_options['networks.network'][idx];resource_nw.push({id:item.value,name:item.value})}
return $scope.options.networks.concat(resource_nw);}
return $scope.options.networks;}
$scope.get_subnets_options=function(){if('networks.subnet'in $scope.connected_options){var resource_subnet=[];for(var idx in $scope.connected_options['networks.subnet']){var item=$scope.connected_options['networks.subnet'][idx];resource_subnet.push({id:item.value,name:item.value})}
return $scope.options.subnets.concat(resource_subnet);}
return $scope.options.subnets;}
$scope.get_floatingips_options=function(){if('networks.floating_ip'in $scope.connected_options){var resource_fip=[];for(var idx in $scope.connected_options['networks.floating_ip']){var item=$scope.connected_options['networks.floating_ip'][idx];resource_fip.push({id:item.value,})}
return $scope.options.floatingips.concat(resource_fip);}
return $scope.options.floatingips;}
$scope.get_ports_options=function(){if('networks.port'in $scope.connected_options){var resource_port=[];for(var idx in $scope.connected_options['networks.port']){var item=$scope.connected_options['networks.port'][idx];resource_port.push({id:item.value,name:item.value})}
return $scope.options.ports.concat(resource_port);}
return $scope.options.ports;}
$scope.block_device_mapping_v2=true;$scope.deployment_swift_data={};$scope.show_more=false;$scope.options.boot_sources=[{'id':'image','name':'image'},{'id':'image_snapshot','name':'image snapshot'},{'id':'volume','name':'volume'},{'id':'volume_snapshot','name':'volume snapshot'}];$scope.options.volume_sources=[{'id':'volume','name':'volume'},{'id':'volume_snapshot','name':'volume snapshot'}];$scope.options.volume_sources_v2=[{'id':'image','name':'image'},{'id':'volume','name':'volume'},{'id':'volume_snapshot','name':'volume snapshot'}];$scope.options.flavor_update_policies=[{'name':'RESIZE','default':true},{'name':'REPLACE'},];$scope.options.image_update_policies=[{'name':'REBUILD','default':true},{'name':'REPLACE'},{'name':'REBUILD_PRESERVE_EPHEMERAL'},];$scope.options.disk_configs=[{'name':'AUTO','default':true},{'name':'MANUAL'},];$scope.options.software_config_transports=[{'name':'POLL_SERVER_CFN','default':true},{'name':'POLL_SERVER_HEAT'},{'name':'POLL_TEMP_URL'},{'name':'ZAQAR_MESSAGE'},];$scope.options.user_data_update_policies=[{'name':'REPLACE','default':true},{'name':'IGNORE'},];$scope.options.user_data_formats=[{'name':'HEAT_CFNTOOLS','default':true},{'name':'RAW'},{'name':'SOFTWARE_CONFIG'}];$scope.options.disk_types=[{'name':'disk'},{'name':'cdrom'},]
$scope.options.disk_buses=[{'name':'ide'},{'name':'lame_bus'},{'name':'scsi'},{'name':'usb'},{'name':'virtio'},];$scope.options.ephemeral_formats=[{'name':'ext2'},{'name':'ext3'},{'name':'ext4'},{'name':'xfs'},{'name':'ntfs'},];$scope.options.allocate_networks=[{'name':'none'},{'name':'auto'}];$scope.validate_name=validationRules['name'];$scope.validate_ip_address=validationRules['ip_address'];$scope.validate_uuid4=validationRules['uuid4'];this.delete_metadata=function(index){this.instance.metadata.splice(index,1)}
this.add_metadata=function(){this.instance.metadata.push({})}
this.delete_personality=function(index){this.instance.personality.splice(index,1)}
this.add_personality=function(){this.instance.personality.push({})}
this.delete_block_device_mapping=function(index){this.instance.block_device_mapping.splice(index,1)}
this.add_block_device_mapping=function(){this.instance.block_device_mapping.push({})}
this.delete_block_device_mapping_v2=function(index){for(var i=index;i<=this.instance.block_device_mapping_v2.length;i=i+1){$scope.bdpv2_source[i]=$scope.bdpv2_source[i+1];}
this.instance.block_device_mapping_v2.splice(index,1)}
this.add_block_device_mapping_v2=function(){this.instance.block_device_mapping_v2.push({})}
this.delete_networks=function(index){for(var i=index;i<this.instance.networks.length;i=i+1){$scope.how2config_networks[i]=$scope.how2config_networks[i+1];}
delete $scope.how2config_networks[this.instance.networks.length];this.instance.networks.splice(index,1);for(var i=index;i<this.instance.networks.length;i=i+1){this.disable.networks[i]=this.disable.networks[i+1];}
delete this.disable.networks[this.instance.networks.length];}
this.add_networks=function(){this.instance.networks.push({})}
this.delete_scheduler_hints=function(index){this.instance.scheduler_hints.splice(index,1)}
this.add_scheduler_hints=function(){this.instance.scheduler_hints.push({})}}
osNovaServerController.$inject=['$scope','hotgenGlobals','hotgenNotify','hotgenUtils','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osNovaServerPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];function osNovaServerPath(basePath){return basePath+'js/resources/os__nova__server/os__nova__server.html';}
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osNovaServer',{templateUrl:osNovaServerPath,controller:osNovaServerController,bindings:{'instance':'=','dependson':'=','connectedoptions':'<','formReference':'<',}});})(window.angular);(function(){'use strict';var c_meta_key="X-Container-Meta",a_meta_key="X-Account-Meta",c_read_key="X-Container-Read",c_write_key="X-Container-Write",purge_key="PurgeOnDelete";angular.module('horizon.dashboard.project.heat_dashboard.template_generator').value('osSwiftContainerSettings',{resource_key:"OS__Swift__Container",admin:false,icon:{class:'fa-archive ',name:'OS::Swift::Container',code:'\uf0a0',color:'#0bb238'},label:'name',modal_component:'<os-swift-container container="resource" form-reference="resourceForm"></os-swift-container>',edge_settings:null,necessary_properties:{name:null}})
angular.module('horizon.dashboard.project.heat_dashboard.template_generator').run(['osSwiftContainerSettings','hotgenGlobals',function(osSwiftContainerSettings,hotgenGlobals){hotgenGlobals.update_resource_icons(osSwiftContainerSettings.resource_key,osSwiftContainerSettings.icon);hotgenGlobals.update_resource_components(osSwiftContainerSettings.resource_key,osSwiftContainerSettings.modal_component);hotgenGlobals.update_node_labels(osSwiftContainerSettings.resource_key,osSwiftContainerSettings.label);}]);function osSwiftContainerController($scope,hotgenGlobals,hotgenNotify,validationRules){this.$onInit=function(){if(typeof this.container[c_meta_key]==='undefined'){this.container[c_meta_key]=[{}];}
if(typeof this.container[a_meta_key]==='undefined'){this.container[a_meta_key]=[{}];}
if(typeof this.container[purge_key]==='undefined'){this.container[purge_key]=false;}};$scope.options=hotgenGlobals.get_resource_options();$scope.show_more=false;$scope.validate_name=validationRules['name'];this.add_x_container_meta=function(){this.container[c_meta_key].push({})}
this.delete_x_container_meta=function(index){this.container[c_meta_key].splice(index,1)}
this.add_x_account_meta=function(){this.container[a_meta_key].push({})}
this.delete_x_account_meta=function(index){this.container[a_meta_key].splice(index,1)}}
function osSwiftContainerPath(basePath){return basePath+'js/resources/os__swift__container/os__swift__container.html';}
osSwiftContainerController.$inject=['$scope','hotgenGlobals','hotgenNotify','horizon.dashboard.project.heat_dashboard.template_generator.validationRules',];osSwiftContainerPath.$inject=['horizon.dashboard.project.heat_dashboard.template_generator.basePath'];angular.module('horizon.dashboard.project.heat_dashboard.template_generator').component('osSwiftContainer',{templateUrl:osSwiftContainerPath,controller:osSwiftContainerController,bindings:{'container':'=','formReference':'<',}});})();