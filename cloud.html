<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>2022云计算技能大赛-私有云</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-require-zoom-fix foreignobject { font-size: var(--mermaid-font-zoom); }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

 :root {--mermaid-font-zoom:1.25em ;} 
</style>
</head>
<body class='typora-export os-windows'>
<div id='write'  class=''><p><span>@</span><a href='私有云'><span>TOC</span></a></p><h2><a name="任务-1私有云服务搭建10-分" class="md-header-anchor"></a><span>【任务 1】私有云服务搭建[10 分]</span></h2><h3><a name="题目-1基础环境配置05-分" class="md-header-anchor"></a><span>【题目 1】基础环境配置[0.5 分]</span></h3><p><span>使用提供的用户名密码，登录提供的 OpenStack 私有云平台，在当前租户下，使用CentOS7.9 镜像，创建两台云主机，云主机类型使用 4vCPU/12G/100G_50G 类型。当前租户下默认存在一张网卡，自行创建第二张网卡并连接至 controller 和 compute 节点（第二张网卡的网段为 10.10.X.0/24，X 为工位号，不需要创建路由）。自行检查安全组策略，以确保网络正常通信与 ssh 连接，然后按以下要求配置服务器：</span>
<span>（1）设置控制节点主机名为 controller，设置计算节点主机名为 compute；</span>
<span>（2）修改hosts 文件将 IP 地址映射为主机名；</span>
<span>完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># hostnamectl set-hostname controller</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># hostnamectl set-hostname compute</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cat /etc/hosts</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">127.0.0.1</span> &nbsp; <span class="cm-identifier">localhost</span> <span class="cm-identifier">localhost</span><span class="cm-punctuation">.</span><span class="cm-identifier">localdomain</span> <span class="cm-identifier">localhost4</span> <span class="cm-identifier">localhost4</span><span class="cm-punctuation">.</span><span class="cm-identifier">localdomain4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">::</span><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">localhost</span> <span class="cm-identifier">localhost</span><span class="cm-punctuation">.</span><span class="cm-identifier">localdomain</span> <span class="cm-identifier">localhost6</span> <span class="cm-identifier">localhost6</span><span class="cm-punctuation">.</span><span class="cm-identifier">localdomain6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">192.168.100.10</span> <span class="cm-identifier">controller</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">192.168.100.20</span> <span class="cm-identifier">compute</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 202px;"></div><div class="CodeMirror-gutters" style="display: none; height: 202px;"></div></div></div></pre><p><span>1.查看控制节点名字为 controller 正确计 0.2 分</span>
<span>2.查看 hosts 文件中有正确的主机名和 IP 映射计 0.2 分</span>
<span>3.控制节点正确使用两块网卡计 0.1 分</span></p><h3><a name="题目-2yum-源配置05-分" class="md-header-anchor"></a><span>【题目 2】Yum 源配置[0.5 分]</span></h3><p><span>使用提供的 http 服务地址，在 http 服务下，存在 centos7.9 和 iaas 的网络 yum 源，使用该 http 源作为安装 iaas 平台的网络源。分别设置 controller 节点和 compute 节点的 yum 源文件 http.repo。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cat /etc/yum.repos.d/local.repo</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">centos</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">centos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">baseurl</span><span class="cm-operator">=</span><span class="cm-identifier">file</span><span class="cm-operator">:///</span><span class="cm-identifier">opt</span><span class="cm-operator">/</span><span class="cm-identifier">centos</span> &nbsp;<span class="cm-comment">#比赛使用的是http远程yum源</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">gpgcheck</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">enabled</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">iaas</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">iaas</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">baseurl</span><span class="cm-operator">=</span><span class="cm-identifier">file</span><span class="cm-operator">:///</span><span class="cm-identifier">opt</span><span class="cm-operator">/</span><span class="cm-identifier">iaas</span><span class="cm-operator">/</span><span class="cm-identifier">iaas-repo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">gpgcheck</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">enabled</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 269px;"></div><div class="CodeMirror-gutters" style="display: none; height: 269px;"></div></div></div></pre><p><span>1.查看/etc/yum.repos.d/http.repo 文件，有正确的 baseurl  路径，计 0.5 分</span></p><h3><a name="题目-3配置无秘钥-ssh05-分" class="md-header-anchor"></a><span>【题目 3】配置无秘钥 ssh[0.5 分]</span></h3><p><span>配置 controller 节点可以无秘钥访问 compute 节点，配置完成后，尝试 ssh 连接 compute</span>
<span>节点的 hostname 进行测试。完成后提交 controller 节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ssh compute</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Last</span> <span class="cm-identifier">login</span><span class="cm-operator">:</span> <span class="cm-identifier">Sun</span> <span class="cm-identifier">Sep</span> <span class="cm-number">18</span> <span class="cm-number">21</span><span class="cm-operator">:</span><span class="cm-number">40</span><span class="cm-operator">:</span><span class="cm-number">30</span> <span class="cm-number">2022</span> <span class="cm-keyword">from</span> <span class="cm-number">192.168.100.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">################################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment"># &nbsp;  Welcome  to  OpenStack &nbsp;  #</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">################################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ssh controller</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Last</span> <span class="cm-identifier">login</span><span class="cm-operator">:</span> <span class="cm-identifier">Sun</span> <span class="cm-identifier">Sep</span> <span class="cm-number">18</span> <span class="cm-number">21</span><span class="cm-operator">:</span><span class="cm-number">39</span><span class="cm-operator">:</span><span class="cm-number">59</span> <span class="cm-number">2022</span> <span class="cm-keyword">from</span> <span class="cm-number">192.168.100.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">################################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment"># &nbsp;  Welcome  to  OpenStack &nbsp;  #</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">################################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 246px;"></div><div class="CodeMirror-gutters" style="display: none; height: 246px;"></div></div></div></pre><p><span>1.查看控制节点允许计算节点无秘钥登录计 0.5 分</span>
<span>### </span>
<span>【题目 4】基础安装[0.5 分]</span>
<span>在控制节点和计算节点上分别安装 openstack-iaas 软件包，根据表 2 配置两个节点脚本文件中的基本变量（配置脚本文件为/etc/openstack/openrc.sh）。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># yum install -y openstack-iaas</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Loaded</span> <span class="cm-identifier">plugins</span><span class="cm-operator">:</span> <span class="cm-identifier">fastestmirror</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Determining</span> <span class="cm-identifier">fastest</span> <span class="cm-identifier">mirrors</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">centos</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">3.6</span> <span class="cm-identifier">kB</span> &nbsp;<span class="cm-number">00</span><span class="cm-operator">:</span><span class="cm-number">00</span><span class="cm-operator">:</span><span class="cm-number">00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">iaas</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">2.9</span> <span class="cm-identifier">kB</span> &nbsp;<span class="cm-number">00</span><span class="cm-operator">:</span><span class="cm-number">00</span><span class="cm-operator">:</span><span class="cm-number">00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Package</span> <span class="cm-identifier">openstack-iaas-2</span><span class="cm-number">.0.1</span><span class="cm-operator">-</span><span class="cm-number">2.</span><span class="cm-identifier">noarch</span> <span class="cm-identifier">already</span> <span class="cm-identifier">installed</span> <span class="cm-identifier">and</span> <span class="cm-identifier">latest</span> <span class="cm-identifier">version</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Nothing</span> <span class="cm-identifier">to</span> <span class="cm-keyword">do</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># sed -i 's/^.//'g /etc/openstack/openrc.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#去点第一行的注释符</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># sed -i 's/PASS=/PASS=000000/'g /etc/openstack/openrc.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#替换PASS=为PASS=000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cat /etc/openstack/openrc.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------system Config--------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Controller Server Manager IP. example:x.x.x.x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">HOST_IP</span><span class="cm-operator">=</span><span class="cm-number">192.168.100.10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Controller HOST Password. example:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">HOST_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Controller Server hostname. example:controller</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">HOST_NAME</span><span class="cm-operator">=</span><span class="cm-identifier">controller</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Compute Node Manager IP. example:x.x.x.x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">HOST_IP_NODE</span><span class="cm-operator">=</span><span class="cm-number">192.168.100.20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Compute HOST Password. example:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">HOST_PASS_NODE</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Compute Node hostname. example:compute</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">HOST_NAME_NODE</span><span class="cm-operator">=</span><span class="cm-identifier">compute</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Chrony Config-------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Controller network segment IP.  example:x.x.0.0/16(x.x.x.0/24)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">network_segment_IP</span><span class="cm-operator">=</span><span class="cm-number">192.168.100.0</span><span class="cm-operator">/</span><span class="cm-number">24</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Rabbit Config ------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#user for rabbit. example:openstack</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">RABBIT_USER</span><span class="cm-operator">=</span><span class="cm-identifier">openstack</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for rabbit user .example:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">RABBIT_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------MySQL Config---------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for MySQL root user . exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">DB_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Keystone Config------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore admin user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">DOMAIN_NAME</span><span class="cm-operator">=</span><span class="cm-identifier">huhy</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ADMIN_PASS</span><span class="cm-operator">=</span><span class="cm-identifier">Root</span><span class="cm-variable-2">@123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">DEMO_PASS</span><span class="cm-operator">=</span><span class="cm-identifier">Root</span><span class="cm-variable-2">@123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql keystore user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">KEYSTONE_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Glance Config--------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql glance user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">GLANCE_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore glance user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">GLANCE_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Placement Config----------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql placement user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PLACEMENT_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore placement user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PLACEMENT_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Nova Config----------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql nova user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">NOVA_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore nova user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">NOVA_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Neutron Config-------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql neutron user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">NEUTRON_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore neutron user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">NEUTRON_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#metadata secret for neutron. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">METADATA_SECRET</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#External Network Interface. example:eth1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">INTERFACE_NAME</span><span class="cm-operator">=</span><span class="cm-identifier">ens37</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#External Network The Physical Adapter. example:provider</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Physical_NAME</span><span class="cm-operator">=</span><span class="cm-identifier">provider</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#First Vlan ID in VLAN RANGE for VLAN Network. exmaple:101</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">minvlan</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Last Vlan ID in VLAN RANGE for VLAN Network. example:200</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">maxvlan</span><span class="cm-operator">=</span><span class="cm-number">1000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Cinder Config--------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql cinder user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CINDER_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore cinder user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CINDER_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Cinder Block Disk. example:md126p3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">BLOCK_DISK</span><span class="cm-operator">=</span><span class="cm-identifier">sdb1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Swift Config---------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore swift user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">SWIFT_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#The NODE Object Disk for Swift. example:md126p4.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">OBJECT_DISK</span><span class="cm-operator">=</span><span class="cm-identifier">sdb2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#The NODE IP for Swift Storage Network. example:x.x.x.x.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">STORAGE_LOCAL_NET_IP</span><span class="cm-operator">=</span><span class="cm-number">192.168.100.20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Trove Config----------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql trove user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TROVE_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore trove user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TROVE_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Heat Config----------------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql heat user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">HEAT_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore heat user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">HEAT_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Ceilometer Config----------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Gnocchi ceilometer user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CEILOMETER_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore ceilometer user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CEILOMETER_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------AODH Config----------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql AODH user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">AODH_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore AODH user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">AODH_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------ZUN Config----------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql ZUN user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ZUN_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore ZUN user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ZUN_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore KURYR user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">KURYR_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------OCTAVIA Config----------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql OCTAVIA user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">OCTAVIA_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore OCTAVIA user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">OCTAVIA_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Manila Config----------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql Manila user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">MANILA_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore Manila user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">MANILA_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#The NODE Object Disk for Manila. example:md126p5.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">SHARE_DISK</span><span class="cm-operator">=</span><span class="cm-identifier">sdb3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Cloudkitty Config----------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql Cloudkitty user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CLOUDKITTY_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore Cloudkitty user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CLOUDKITTY_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#--------------------Barbican Config----------------##</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Mysql Barbican user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">BARBICAN_DBPASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#Password for Keystore Barbican user. exmaple:000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">BARBICAN_PASS</span><span class="cm-operator">=</span><span class="cm-number">000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">###############################################################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#####在vi编辑器中执行:%s/^.\{1\}//  删除每行前1个字符(#号)#####</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">###############################################################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># scp /etc/openstack/openrc.sh compute:/etc/openstack/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#传输完毕后，设置磁盘分区，分出三块！！！对应的磁盘名称写入环境变量中</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 4390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 4390px;"></div></div></div></pre><p><span>1.检查环境变量文件配置正确计 0.5 分</span></p><h3><a name="题目-5数据库安装与调优05-分" class="md-header-anchor"></a><span>【题目 5】数据库安装与调优[0.5 分]</span></h3><p><span>在 controller 节点上使用 iaas-install-mysql.sh 脚本安装 Mariadb、Memcached、RabbitMQ</span>
<span>等服务。安装服务完毕后，修改/etc/my.cnf 文件，完成下列要求：</span></p><p><span>1.设置数据库支持大小写；</span>
<span>2.设置数据库缓存 innodb 表的索引，数据，插入数据时的缓冲为 4G； 3.设置数据库的 log buffer 为 64MB；</span>
<span>4.设置数据库的 redo log 大小为 256MB；</span>
<span>5.设置数据库的 redo log 文件组为 2。</span>
<span>完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-pre-host.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-pre-host.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#执行完这一步，一定要重新连接，刷新一下，不然rabbitmq服务会报错</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-mysql.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cat /etc/my.cnf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># This group is read both both by the client and the server</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># use it for options that affect everything</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">client-server</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># This group is read by the server</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">mysqld</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Disabling symbolic-links is recommended to prevent assorted security risks</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">symbolic-links</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">default-storage-engine</span> <span class="cm-operator">=</span> <span class="cm-identifier">innodb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">innodb_file_per_table</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">collation-server</span> <span class="cm-operator">=</span> <span class="cm-identifier">utf8_general_ci</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">init-connect</span> <span class="cm-operator">=</span> <span class="cm-string">'SET NAMES utf8'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">character-set-server</span> <span class="cm-operator">=</span> <span class="cm-identifier">utf8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">max_connections</span><span class="cm-operator">=</span><span class="cm-number">10000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">innodb_log_buffer_size</span> <span class="cm-operator">=</span> <span class="cm-number">4</span><span class="cm-identifier">M</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#此参数确定些日志文件所用的内存大小，以M为单位。缓冲区更大能提高性能，但意外的故障将会丢失数据。MySQL开发人员建议设置为1－8M之间</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">innodb_log_file_size</span> <span class="cm-operator">=</span> <span class="cm-number">32</span><span class="cm-identifier">M</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#此参数确定数据日志文件的大小，更大的设置可以提高性能，但也会增加恢复故障数据库所需的时间</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">innodb_log_files_in_group</span> <span class="cm-operator">=</span> <span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#为提高性能，MySQL可以以循环方式将日志文件写到多个文件。推荐设置为3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#1，数据库不区分大小写，其中 0：区分大小写，1：不区分大小写</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">lower_case_table_names</span> <span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#2,设置innodb的数据缓冲为4G</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">innodb_buffer_pool_size</span> <span class="cm-operator">=</span> <span class="cm-number">4</span><span class="cm-identifier">G</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#3，传输数据包的大小值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">max_allowed_packet</span> <span class="cm-operator">=</span> <span class="cm-number">30</span><span class="cm-identifier">M</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># include all files from the config directory</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">!</span><span class="cm-identifier">includedir</span> <span class="cm-operator">/</span><span class="cm-identifier">etc</span><span class="cm-operator">/</span><span class="cm-identifier">my</span><span class="cm-punctuation">.</span><span class="cm-identifier">cnf</span><span class="cm-punctuation">.</span><span class="cm-identifier">d</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1142px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1142px;"></div></div></div></pre><p><span>1.检查数据库配置正确计 0.5 分</span></p><h3><a name="题目-6keystone-服务安装与使用05-分" class="md-header-anchor"></a><span>【题目 6】Keystone 服务安装与使用[0.5 分]</span></h3><p><span>在 controller 节点上使用 iaas-install-keystone.sh 脚本安装 Keystone 服务。安装完成后， 使用相关命令，创建用户 chinaskill，密码为 000000。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-keystone.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># source /etc/keystone/admin-openrc.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack user create --domain huhy --password 000000 chinaskill</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------------+----------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Field</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------------+----------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">domain_id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">b11e543ed5104ef79cd7a65c24ea156a</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">enabled</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">True</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">8</span><span class="cm-identifier">bd1afe33af44e24aeb9f3d9a234aa75</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">chinaskill</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">options</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-punctuation">{}</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">password_expires_at</span> <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------------+----------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#注意我的域名是自定义的，正常应该是demo</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 336px;"></div><div class="CodeMirror-gutters" style="display: none; height: 336px;"></div></div></div></pre><p><span>1.检查keystone 服务安装正确计 0.2 分</span>
<span>2.检查chinaskill 用户创建正确计 0.3 分</span></p><h3><a name="题目-7glance-安装与使用05-分" class="md-header-anchor"></a><span>【题目 7】Glance 安装与使用[0.5 分]</span></h3><p><span>在 controller 节点上使用 iaas-install-glance.sh 脚本安装 glance 服务。使用命令将提供的 cirros-0.3.4-x86_64-disk.img 镜像（该镜像在 HTTP 服务中，可自行下载）上传至平台， 命名为 cirros，并设置最小启动需要的硬盘为 10G，最小启动需要的内存为 1G。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-glance.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment"># ls</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">amphora-x64-haproxy</span><span class="cm-punctuation">.</span><span class="cm-identifier">qcow2</span> &nbsp;<span class="cm-identifier">CentOS-7-x86_64-2009</span><span class="cm-punctuation">.</span><span class="cm-identifier">qcow2</span> &nbsp; &nbsp;<span class="cm-identifier">MySQL_5</span><span class="cm-number">.6</span><span class="cm-identifier">_XD</span><span class="cm-punctuation">.</span><span class="cm-identifier">qcow2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CentOS7_1804</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">cirros-0</span><span class="cm-number">.3.4</span><span class="cm-operator">-</span><span class="cm-identifier">x86_64-disk</span><span class="cm-punctuation">.</span><span class="cm-identifier">img</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack image create --disk-format qcow2 --container-format bare --min-disk 10 --min-ram 1024 --file ./cirros-0.3.4-x86_64-disk.img cirros</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Field</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">checksum</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">ee1eca47dc88f4879d8a229cc70a07c6</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">container_format</span> <span class="cm-operator">|</span> <span class="cm-identifier">bare</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">created_at</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">2022</span><span class="cm-operator">-</span><span class="cm-number">09</span><span class="cm-operator">-</span><span class="cm-number">19</span><span class="cm-identifier">T02</span><span class="cm-operator">:</span><span class="cm-number">51</span><span class="cm-operator">:</span><span class="cm-number">10</span><span class="cm-identifier">Z</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">disk_format</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">qcow2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">file</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-operator">/</span><span class="cm-identifier">v2</span><span class="cm-operator">/</span><span class="cm-identifier">images</span><span class="cm-operator">/</span><span class="cm-number">47</span><span class="cm-identifier">adc4fe-6bd9-4728-809f-c868d433f2d7</span><span class="cm-operator">/</span><span class="cm-identifier">file</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">47</span><span class="cm-identifier">adc4fe-6bd9-4728-809f-c868d433f2d7</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">min_disk</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">10</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">min_ram</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">1024</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">cirros</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">owner</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">5</span><span class="cm-identifier">ef6dd81e4164f8d89e41d5537b148f9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">properties</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">os_hash_algo</span><span class="cm-operator">=</span><span class="cm-string">'sha512'</span><span class="cm-punctuation">,</span> <span class="cm-identifier">os_hash_value</span><span class="cm-operator">=</span><span class="cm-string">'1b03ca1bc3fafe448b90583c12f367949f8b0e665685979d95b004e48574b953316799e23240f4f739d1b5eb4c4ca24d38fdc6f4f9d8247a2bc64db25d6bbdb2'</span><span class="cm-punctuation">,</span> <span class="cm-identifier">os_hidden</span><span class="cm-operator">=</span><span class="cm-string">'False'</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">protected</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">False</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">schema</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-operator">/</span><span class="cm-identifier">v2</span><span class="cm-operator">/</span><span class="cm-identifier">schemas</span><span class="cm-operator">/</span><span class="cm-identifier">image</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">13287936</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">status</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">active</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">tags</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">updated_at</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">2022</span><span class="cm-operator">-</span><span class="cm-number">09</span><span class="cm-operator">-</span><span class="cm-number">19</span><span class="cm-identifier">T02</span><span class="cm-operator">:</span><span class="cm-number">51</span><span class="cm-operator">:</span><span class="cm-number">11</span><span class="cm-identifier">Z</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">virtual_size</span> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">visibility</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">shared</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1210px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1210px;"></div></div></div></pre><p><span>1.检查glance 服务安装正确计 0.1 分</span>
<span>2.检查cirros 镜像最小启动硬盘与内存配置正确计 0.4 分</span></p><h3><a name="题目-8nova-安装与优化05-分" class="md-header-anchor"></a><span>【题目 8】Nova 安装与优化[0.5 分]</span></h3><p><span>在 controller 节点和 compute 节点上分别使用 iaas-install-placement.sh 脚本、iaas-install-nova -controller.sh 脚本、iaas-install-nova-compute.sh 脚本安装Nova 服务。安装完成后，请修改 nova 相关配置文件，解决因等待时间过长而导致虚拟机启动超时从而获取不到 IP 地址而报</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-placement.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-nova-controller.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vim /etc/nova/nova.conf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#vif_plugging_is_fatal=true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">改为</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">vif_plugging_is_fatal</span><span class="cm-operator">=</span><span class="cm-identifier">false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 224px;"></div><div class="CodeMirror-gutters" style="display: none; height: 224px;"></div></div></div></pre><p><span>1.检查nova 服务解决超时问题配置正确计 0.5 分</span></p><h3><a name="题目-9neutron-安装05-分" class="md-header-anchor"></a><span>【题目 9】Neutron 安装[0.5 分]</span></h3><p><span>使用提供的脚本 iaas-install-neutron-controller.sh 和 iaas-install-neutron-compute.sh，在controller 和 compute 节点上安装 neutron 服务。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-neutron-controller.sh</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p><span>1.检查neutron 服务安装正确计 0.2 分</span>
<span>2.检查neutron 服务的 linuxbridge 网桥服务启动正确计 0.3 分</span></p><h3><a name="题目-10doshboard-安装05-分" class="md-header-anchor"></a><span>【题目 10】Doshboard 安装[0.5 分]</span></h3><p><span>在controller 节点上使用iaas-install-dashboad.sh 脚本安装dashboad服务。安装完成后， 将 Dashboard 中的 Djingo 数据修改为存储在文件中（此种修改解决了 ALL-in-one 快照在其他云平台 Dashboard 不能访问的问题）。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-dashboard.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vim /etc/openstack-dashboard/local_settings</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">SESSION_ENGINE</span> <span class="cm-operator">=</span> <span class="cm-string">'django.contrib.sessions.backends.cache'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">改为</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">SESSION_ENGINE</span> <span class="cm-operator">=</span> <span class="cm-string">'django.contrib.sessions.backends.file'</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 179px;"></div><div class="CodeMirror-gutters" style="display: none; height: 179px;"></div></div></div></pre><p><span>1.检查Dashboard 服务安装正确计 0.2 分</span>
<span>2.检查Dashboard 服务中Djingo 数据修改为存储在文件中配置正确计 0.3 分</span></p><h3><a name="题目-11swift-安装05-分" class="md-header-anchor"></a><span>【题目 11】Swift 安装[0.5 分]</span></h3><p><span>在 控 制 节 点 和 计 算 节 点 上 分 别 使 用 iaas-install-swift-controller.sh 和iaas-install-swift-compute.sh 脚本安装 Swift 服务。安装完成后，使用命令创建一个名叫examcontainer 的容器，将 cirros-0.3.4-x86_64-disk.img 镜像上传到 examcontainer 容器中，并设置分段存放，每一段大小为 10M。完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-swift-controller.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-swift-compute.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ls</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">anaconda-ks</span><span class="cm-punctuation">.</span><span class="cm-identifier">cfg</span> &nbsp;<span class="cm-identifier">cirros-0</span><span class="cm-number">.3.4</span><span class="cm-operator">-</span><span class="cm-identifier">x86_64-disk</span><span class="cm-punctuation">.</span><span class="cm-identifier">img</span> &nbsp;<span class="cm-identifier">logininfo</span><span class="cm-punctuation">.</span><span class="cm-identifier">txt</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># swift post examcontainers</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># swift upload examcontaiers -S 10000000 cirros-0.3.4-x86_64-disk.img</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">cirros-0</span><span class="cm-number">.3.4</span><span class="cm-operator">-</span><span class="cm-identifier">x86_64-disk</span><span class="cm-punctuation">.</span><span class="cm-identifier">img</span> <span class="cm-identifier">segment</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">cirros-0</span><span class="cm-number">.3.4</span><span class="cm-operator">-</span><span class="cm-identifier">x86_64-disk</span><span class="cm-punctuation">.</span><span class="cm-identifier">img</span> <span class="cm-identifier">segment</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">cirros-0</span><span class="cm-number">.3.4</span><span class="cm-operator">-</span><span class="cm-identifier">x86_64-disk</span><span class="cm-punctuation">.</span><span class="cm-identifier">img</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># du -sh cirros-0.3.4-x86_64-disk.img</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">13</span><span class="cm-identifier">M</span> &nbsp; &nbsp; <span class="cm-identifier">cirros-0</span><span class="cm-number">.3.4</span><span class="cm-operator">-</span><span class="cm-identifier">x86_64-disk</span><span class="cm-punctuation">.</span><span class="cm-identifier">img</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#因为镜像就13M，所有存储为两段</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 336px;"></div><div class="CodeMirror-gutters" style="display: none; height: 336px;"></div></div></div></pre><p><span>1.检查 swift 服务安装正确计 0.3 分</span>
<span>2.分段上传cirros 镜像正确计 0.2 分</span></p><h3><a name="题目-12cinder-创建硬盘05-分" class="md-header-anchor"></a><span>【题目 12】Cinder 创建硬盘[0.5 分]</span></h3><p><span>在 控 制 节 点 和 计 算 节 点 分 别 使 用 iaas-install-cinder-controller.sh 、iaas-install-cinder-compute.sh 脚本安装Cinder 服务，请在计算节点，对块存储进行扩容操作， 即在计算节点再分出一个 5G 的分区，加入到 cinder 块存储的后端存储中去。完成后提交计算节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-cinder-controller.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-cinder-compute.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># lsblk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">NAME</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">MAJ</span><span class="cm-operator">:</span><span class="cm-identifier">MIN</span> <span class="cm-builtin">RM</span> &nbsp;<span class="cm-identifier">SIZE</span> <span class="cm-identifier">RO</span> <span class="cm-builtin">TYPE</span> <span class="cm-identifier">MOUNTPOINT</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sda</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">8</span><span class="cm-operator">:</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">200</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">disk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">├─</span><span class="cm-identifier">sda1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">8</span><span class="cm-operator">:</span><span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">part</span> <span class="cm-operator">/</span><span class="cm-identifier">boot</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">└─</span><span class="cm-identifier">sda2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">8</span><span class="cm-operator">:</span><span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">19</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">part</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-error">├─</span><span class="cm-identifier">centos-root</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">253</span><span class="cm-operator">:</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">17</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">lvm</span> &nbsp;<span class="cm-operator">/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-error">└─</span><span class="cm-identifier">centos-swap</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">253</span><span class="cm-operator">:</span><span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">2</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">lvm</span> &nbsp;<span class="cm-punctuation">[</span><span class="cm-identifier">SWAP</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sdb</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">8</span><span class="cm-operator">:</span><span class="cm-number">16</span> &nbsp; <span class="cm-number">0</span> &nbsp; <span class="cm-number">50</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">disk</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">├─</span><span class="cm-identifier">sdb1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">8</span><span class="cm-operator">:</span><span class="cm-number">17</span> &nbsp; <span class="cm-number">0</span> &nbsp; <span class="cm-number">10</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">part</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">│</span> <span class="cm-error">├─</span><span class="cm-identifier">cinder--volumes-cinder--volumes--pool_tmeta</span> <span class="cm-number">253</span><span class="cm-operator">:</span><span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">12</span><span class="cm-identifier">M</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">lvm</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">│</span> <span class="cm-error">│</span> <span class="cm-error">└─</span><span class="cm-identifier">cinder--volumes-cinder--volumes--pool</span> &nbsp; &nbsp; <span class="cm-number">253</span><span class="cm-operator">:</span><span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">9.5</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">lvm</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">│</span> <span class="cm-error">└─</span><span class="cm-identifier">cinder--volumes-cinder--volumes--pool_tdata</span> <span class="cm-number">253</span><span class="cm-operator">:</span><span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">9.5</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">lvm</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">│</span> &nbsp; <span class="cm-error">└─</span><span class="cm-identifier">cinder--volumes-cinder--volumes--pool</span> &nbsp; &nbsp; <span class="cm-number">253</span><span class="cm-operator">:</span><span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">9.5</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">lvm</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">├─</span><span class="cm-identifier">sdb2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">8</span><span class="cm-operator">:</span><span class="cm-number">18</span> &nbsp; <span class="cm-number">0</span> &nbsp; <span class="cm-number">10</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">part</span> <span class="cm-operator">/</span><span class="cm-identifier">swift</span><span class="cm-operator">/</span><span class="cm-identifier">node</span><span class="cm-operator">/</span><span class="cm-identifier">sdb2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">├─</span><span class="cm-identifier">sdb3</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">8</span><span class="cm-operator">:</span><span class="cm-number">19</span> &nbsp; <span class="cm-number">0</span> &nbsp; <span class="cm-number">10</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">part</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">└─</span><span class="cm-identifier">sdb4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">8</span><span class="cm-operator">:</span><span class="cm-number">20</span> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">5</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">part</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sr0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">11</span><span class="cm-operator">:</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">4.4</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">0</span> <span class="cm-identifier">rom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vgdisplay</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">---</span> <span class="cm-identifier">Volume</span> <span class="cm-builtin">group</span> <span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">cinder-volumes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">System</span> <span class="cm-identifier">ID</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Format</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">lvm2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Metadata</span> <span class="cm-identifier">Areas</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Metadata</span> <span class="cm-identifier">Sequence</span> <span class="cm-identifier">No</span> &nbsp;<span class="cm-number">4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Access</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">read</span><span class="cm-operator">/</span><span class="cm-builtin">write</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Status</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">resizable</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">MAX</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Cur</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Open</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Max</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Cur</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Act</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">&lt;</span><span class="cm-number">10.00</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">PE</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">4.00</span> <span class="cm-identifier">MiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Total</span> <span class="cm-identifier">PE</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2559</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Alloc</span> <span class="cm-identifier">PE</span> <span class="cm-operator">/</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2438</span> <span class="cm-operator">/</span> <span class="cm-number">9.52</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Free</span> &nbsp;<span class="cm-identifier">PE</span> <span class="cm-operator">/</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">121</span> <span class="cm-operator">/</span> <span class="cm-number">484.00</span> <span class="cm-identifier">MiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">UUID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-identifier">k0yKg-iQB2-b2CM-a0z2-2ddJ-cdG3-8WpyrG</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">---</span> <span class="cm-identifier">Volume</span> <span class="cm-builtin">group</span> <span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">centos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">System</span> <span class="cm-identifier">ID</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Format</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">lvm2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Metadata</span> <span class="cm-identifier">Areas</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Metadata</span> <span class="cm-identifier">Sequence</span> <span class="cm-identifier">No</span> &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Access</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">read</span><span class="cm-operator">/</span><span class="cm-builtin">write</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Status</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">resizable</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">MAX</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Cur</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Open</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Max</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Cur</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Act</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">&lt;</span><span class="cm-number">19.00</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">PE</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">4.00</span> <span class="cm-identifier">MiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Total</span> <span class="cm-identifier">PE</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4863</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Alloc</span> <span class="cm-identifier">PE</span> <span class="cm-operator">/</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">4863</span> <span class="cm-operator">/</span> <span class="cm-operator">&lt;</span><span class="cm-number">19.00</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Free</span> &nbsp;<span class="cm-identifier">PE</span> <span class="cm-operator">/</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> <span class="cm-operator">/</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">UUID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">acAXNK-eqKm-qs9b-ly3T-R3Sh-8qyv-nELNWv</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vgextend cinder-volumes /dev/sdb4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Volume</span> <span class="cm-builtin">group</span> <span class="cm-string">"cinder-volumes"</span> <span class="cm-identifier">successfully</span> <span class="cm-identifier">extended</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vgdisplay</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">---</span> <span class="cm-identifier">Volume</span> <span class="cm-builtin">group</span> <span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">cinder-volumes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">System</span> <span class="cm-identifier">ID</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Format</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">lvm2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Metadata</span> <span class="cm-identifier">Areas</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Metadata</span> <span class="cm-identifier">Sequence</span> <span class="cm-identifier">No</span> &nbsp;<span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Access</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">read</span><span class="cm-operator">/</span><span class="cm-builtin">write</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Status</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">resizable</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">MAX</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Cur</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Open</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Max</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Cur</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Act</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">14.99</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">PE</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">4.00</span> <span class="cm-identifier">MiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Total</span> <span class="cm-identifier">PE</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3838</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Alloc</span> <span class="cm-identifier">PE</span> <span class="cm-operator">/</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2438</span> <span class="cm-operator">/</span> <span class="cm-number">9.52</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Free</span> &nbsp;<span class="cm-identifier">PE</span> <span class="cm-operator">/</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1400</span> <span class="cm-operator">/</span> <span class="cm-operator">&lt;</span><span class="cm-number">5.47</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">UUID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-identifier">k0yKg-iQB2-b2CM-a0z2-2ddJ-cdG3-8WpyrG</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">---</span> <span class="cm-identifier">Volume</span> <span class="cm-builtin">group</span> <span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">centos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">System</span> <span class="cm-identifier">ID</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Format</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">lvm2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Metadata</span> <span class="cm-identifier">Areas</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Metadata</span> <span class="cm-identifier">Sequence</span> <span class="cm-identifier">No</span> &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Access</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">read</span><span class="cm-operator">/</span><span class="cm-builtin">write</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Status</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">resizable</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">MAX</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Cur</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Open</span> <span class="cm-identifier">LV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Max</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Cur</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Act</span> <span class="cm-identifier">PV</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">&lt;</span><span class="cm-number">19.00</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">PE</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">4.00</span> <span class="cm-identifier">MiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Total</span> <span class="cm-identifier">PE</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4863</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Alloc</span> <span class="cm-identifier">PE</span> <span class="cm-operator">/</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">4863</span> <span class="cm-operator">/</span> <span class="cm-operator">&lt;</span><span class="cm-number">19.00</span> <span class="cm-identifier">GiB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">Free</span> &nbsp;<span class="cm-identifier">PE</span> <span class="cm-operator">/</span> <span class="cm-identifier">Size</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> <span class="cm-operator">/</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">VG</span> <span class="cm-identifier">UUID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">acAXNK-eqKm-qs9b-ly3T-R3Sh-8qyv-nELNWv</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2442px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2442px;"></div></div></div></pre><p><span>1.检查cinder 后端存储扩容成功计 0.5 分</span></p><h3><a name="题目-13manila-服务安装与使用05-分" class="md-header-anchor"></a><span>【题目 13】Manila 服务安装与使用[0.5 分]</span></h3><p><span>在 控 制 和 计 算 节 点 上 分 别 使 用 iaas-install-manila-controller.sh 和iaas-install-manila-compute.sh 脚本安装 manila 服务。安装服务后创建 default_share_type 共享类型（不使用驱动程序支持），接着创建一个大小为 2G 的共享存储名为 share01 并开放share01 目录对 OpenStack 管理网段使用权限。最后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-manila-controller.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-manila-compute.sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># manila type-create default_share_type False</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+----------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Property</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+----------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">required_extra_specs</span> <span class="cm-operator">|</span> <span class="cm-identifier">driver_handles_share_servers</span> <span class="cm-operator">:</span> <span class="cm-identifier">False</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">default_share_type</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Visibility</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">public</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">is_default</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">YES</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">36d</span><span class="cm-identifier">ddd7a-6c51-4320-9f8e-d99dcb71fcdd</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">optional_extra_specs</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Description</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+----------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># manila type-list</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+--------------------+------------+------------+--------------------------------------+----------------------+-------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">visibility</span> <span class="cm-operator">|</span> <span class="cm-identifier">is_default</span> <span class="cm-operator">|</span> <span class="cm-identifier">required_extra_specs</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">optional_extra_specs</span> <span class="cm-operator">|</span> <span class="cm-identifier">Description</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+--------------------+------------+------------+--------------------------------------+----------------------+-------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-number">36d</span><span class="cm-identifier">ddd7a-6c51-4320-9f8e-d99dcb71fcdd</span> <span class="cm-operator">|</span> <span class="cm-identifier">default_share_type</span> <span class="cm-operator">|</span> <span class="cm-identifier">public</span> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">YES</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">driver_handles_share_servers</span> <span class="cm-operator">:</span> <span class="cm-identifier">False</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+--------------------+------------+------------+--------------------------------------+----------------------+-------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># manila create NFS 2 --name share-test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------------------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Property</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------------------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">status</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">creating</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">share_type_name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">default_share_type</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">description</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">availability_zone</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">share_network_id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">share_server_id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">share_group_id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">host</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">revert_to_snapshot_support</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">False</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">access_rules_status</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">active</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">snapshot_id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">create_share_from_snapshot_support</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">False</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">is_public</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">False</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">task_state</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">snapshot_support</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">False</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">01</span><span class="cm-identifier">b7551c-ac6f-4815-9ade-34dd50d5c489</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">source_share_group_snapshot_member_id</span> <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">user_id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">65355</span><span class="cm-identifier">acf2f4e4e8e8e29fd08d7290750</span> &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">share-test</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">share_type</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">36d</span><span class="cm-identifier">ddd7a-6c51-4320-9f8e-d99dcb71fcdd</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">has_replicas</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">False</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">replication_type</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">created_at</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">2022</span><span class="cm-operator">-</span><span class="cm-number">09</span><span class="cm-operator">-</span><span class="cm-number">19</span><span class="cm-identifier">T06</span><span class="cm-operator">:</span><span class="cm-number">50</span><span class="cm-operator">:</span><span class="cm-number">18.000000</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">share_proto</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">NFS</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">mount_snapshot_support</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">False</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">project_id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">1</span><span class="cm-identifier">b29cb9baa394a0eb3d531913dc9ccec</span> &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">metadata</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-punctuation">{}</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------------------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># manila list</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Size</span> <span class="cm-operator">|</span> <span class="cm-identifier">Share</span> <span class="cm-identifier">Proto</span> <span class="cm-operator">|</span> <span class="cm-identifier">Status</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Is</span> <span class="cm-identifier">Public</span> <span class="cm-operator">|</span> <span class="cm-identifier">Share</span> <span class="cm-builtin">Type</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Host</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Availability</span> <span class="cm-identifier">Zone</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-number">01</span><span class="cm-identifier">b7551c-ac6f-4815-9ade-34dd50d5c489</span> <span class="cm-operator">|</span> <span class="cm-identifier">share-test</span> <span class="cm-operator">|</span> <span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">NFS</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">available</span> <span class="cm-operator">|</span> <span class="cm-identifier">False</span> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">default_share_type</span> <span class="cm-operator">|</span> <span class="cm-identifier">compute</span><span class="cm-variable-2">@lvm</span><span class="cm-comment">#lvm-single-pool | nova &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  |</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+------------+------+-------------+-----------+-----------+--------------------+-----------------------------+-------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># manila access-allow share-test ip 192.168.100.0/24 --access-level rw</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Property</span> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">access_key</span> &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">share_id</span> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">01</span><span class="cm-identifier">b7551c-ac6f-4815-9ade-34dd50d5c489</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">created_at</span> &nbsp; <span class="cm-operator">|</span> <span class="cm-number">2022</span><span class="cm-operator">-</span><span class="cm-number">09</span><span class="cm-operator">-</span><span class="cm-number">19</span><span class="cm-identifier">T06</span><span class="cm-operator">:</span><span class="cm-number">51</span><span class="cm-operator">:</span><span class="cm-number">47.000000</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">updated_at</span> &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">access_type</span> &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">ip</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">access_to</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">192.168.100.0</span><span class="cm-operator">/</span><span class="cm-number">24</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">access_level</span> <span class="cm-operator">|</span> <span class="cm-identifier">rw</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">state</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">queued_to_apply</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">a5fe5b74-e571-405a-a2cb-bda449ed1f53</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">metadata</span> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-punctuation">{}</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># manila access-list share-test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+-------------+------------------+--------------+--------+------------+----------------------------+------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">access_type</span> <span class="cm-operator">|</span> <span class="cm-identifier">access_to</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">access_level</span> <span class="cm-operator">|</span> <span class="cm-identifier">state</span> &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">access_key</span> <span class="cm-operator">|</span> <span class="cm-identifier">created_at</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">updated_at</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+-------------+------------------+--------------+--------+------------+----------------------------+------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">a5fe5b74-e571-405a-a2cb-bda449ed1f53</span> <span class="cm-operator">|</span> <span class="cm-identifier">ip</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">192.168.100.0</span><span class="cm-operator">/</span><span class="cm-number">24</span> <span class="cm-operator">|</span> <span class="cm-identifier">rw</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">active</span> <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">2022</span><span class="cm-operator">-</span><span class="cm-number">09</span><span class="cm-operator">-</span><span class="cm-number">19</span><span class="cm-identifier">T06</span><span class="cm-operator">:</span><span class="cm-number">51</span><span class="cm-operator">:</span><span class="cm-number">47.000000</span> <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+-------------+------------------+--------------+--------+------------+----------------------------+------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#查看share-test共享文件目录的访问路径，选做，到此任务已经结束</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># manila show share-test | grep path | cut -d'|' -f3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-identifier">path</span> <span class="cm-operator">=</span> <span class="cm-number">192.168.100.20</span><span class="cm-operator">:/</span><span class="cm-identifier">var</span><span class="cm-operator">/</span><span class="cm-identifier">lib</span><span class="cm-operator">/</span><span class="cm-identifier">manila</span><span class="cm-operator">/</span><span class="cm-identifier">mnt</span><span class="cm-operator">/</span><span class="cm-identifier">share-8648e34b-a68b-4710-97fe-4e85515c444e</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># mount -t nfs 192.168.100.20:/var/lib/manila/mnt/share-8648e34b-a68b-4710-97fe-4e85515c444e /mnt/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># df -h</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Filesystem</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">Size</span> &nbsp;<span class="cm-identifier">Used</span> <span class="cm-identifier">Avail</span> <span class="cm-identifier">Use</span><span class="cm-operator">%</span> <span class="cm-identifier">Mounted</span> <span class="cm-identifier">on</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">devtmpfs</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1.9</span><span class="cm-identifier">G</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp;<span class="cm-number">1.9</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">0</span><span class="cm-operator">%</span> <span class="cm-operator">/</span><span class="cm-identifier">dev</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">tmpfs</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.9</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">4.0</span><span class="cm-identifier">K</span> &nbsp;<span class="cm-number">1.9</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">1</span><span class="cm-operator">%</span> <span class="cm-operator">/</span><span class="cm-identifier">dev</span><span class="cm-operator">/</span><span class="cm-identifier">shm</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">tmpfs</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.9</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">12</span><span class="cm-identifier">M</span> &nbsp;<span class="cm-number">1.9</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">1</span><span class="cm-operator">%</span> <span class="cm-operator">/</span><span class="cm-identifier">run</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">tmpfs</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.9</span><span class="cm-identifier">G</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp;<span class="cm-number">1.9</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">0</span><span class="cm-operator">%</span> <span class="cm-operator">/</span><span class="cm-identifier">sys</span><span class="cm-operator">/</span><span class="cm-identifier">fs</span><span class="cm-operator">/</span><span class="cm-identifier">cgroup</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">dev</span><span class="cm-operator">/</span><span class="cm-identifier">mapper</span><span class="cm-operator">/</span><span class="cm-identifier">centos-root</span> &nbsp; <span class="cm-number">17</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">4.8</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">13</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">29</span><span class="cm-operator">%</span> <span class="cm-operator">/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">dev</span><span class="cm-operator">/</span><span class="cm-identifier">sda1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1014</span><span class="cm-identifier">M</span> &nbsp;<span class="cm-number">152</span><span class="cm-identifier">M</span> &nbsp;<span class="cm-number">863</span><span class="cm-identifier">M</span> &nbsp;<span class="cm-number">15</span><span class="cm-operator">%</span> <span class="cm-operator">/</span><span class="cm-identifier">boot</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">tmpfs</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">378</span><span class="cm-identifier">M</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp;<span class="cm-number">378</span><span class="cm-identifier">M</span> &nbsp; <span class="cm-number">0</span><span class="cm-operator">%</span> <span class="cm-operator">/</span><span class="cm-identifier">run</span><span class="cm-operator">/</span><span class="cm-identifier">user</span><span class="cm-operator">/</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">dev</span><span class="cm-operator">/</span><span class="cm-identifier">sdb2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">10</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">59</span><span class="cm-identifier">M</span> &nbsp; <span class="cm-number">10</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">1</span><span class="cm-operator">%</span> <span class="cm-operator">/</span><span class="cm-identifier">swift</span><span class="cm-operator">/</span><span class="cm-identifier">node</span><span class="cm-operator">/</span><span class="cm-identifier">sdb2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">dev</span><span class="cm-operator">/</span><span class="cm-identifier">dm-5</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2.0</span><span class="cm-identifier">G</span> &nbsp;<span class="cm-number">6.0</span><span class="cm-identifier">M</span> &nbsp;<span class="cm-number">1.8</span><span class="cm-identifier">G</span> &nbsp; <span class="cm-number">1</span><span class="cm-operator">%</span> <span class="cm-operator">/</span><span class="cm-identifier">var</span><span class="cm-operator">/</span><span class="cm-identifier">lib</span><span class="cm-operator">/</span><span class="cm-identifier">manila</span><span class="cm-operator">/</span><span class="cm-identifier">mnt</span><span class="cm-operator">/</span><span class="cm-identifier">share-8648e34b-a68b-4710-97fe-4e85515c444e</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@compute</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2643px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2643px;"></div></div></div></pre><p><span>1.检查 share01 共享存储正确创建并赋予权限计 0.5 分</span></p><h3><a name="题目-14barbican-服务安装与使用05-分" class="md-header-anchor"></a><span>【题目 14】Barbican 服务安装与使用[0.5 分]</span></h3><p><span>使用 iaas-install-barbican.sh 脚本安装 barbican 服务，安装服务完毕后，使用 openstack 命令创建一个名为 secret01 的密钥，创建完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># iaas-install-barbican.sh</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack secret store --name secret01 --payload secretkey</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------+-----------------------------------------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Field</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------+-----------------------------------------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Secret</span> <span class="cm-identifier">href</span> &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">http</span><span class="cm-operator">://</span><span class="cm-identifier">localhost</span><span class="cm-operator">:</span><span class="cm-number">9311</span><span class="cm-operator">/</span><span class="cm-identifier">v1</span><span class="cm-operator">/</span><span class="cm-identifier">secrets</span><span class="cm-operator">/</span><span class="cm-number">0</span><span class="cm-identifier">c75b604-1cae-4172-b632-b769f1d649e3</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">secret01</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Created</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Status</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Content</span> <span class="cm-identifier">types</span> <span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Algorithm</span> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">aes</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Bit</span> <span class="cm-identifier">length</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">256</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Secret</span> <span class="cm-builtin">type</span> &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">opaque</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Mode</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">cbc</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Expiration</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">None</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------+-----------------------------------------------------------------------+</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 358px;"></div><div class="CodeMirror-gutters" style="display: none; height: 358px;"></div></div></div></pre><p><span>1.检查 secret01 密钥创建正确计 0.5 分</span></p><h3><a name="题目-15cloudkitty-服务安装与使用1-分" class="md-header-anchor"></a><span>【题目 15】Cloudkitty 服务安装与使用[1 分]</span></h3><p><span>使用 iaas-install-cloudkitty.sh 脚本安装cloudkitty 服务，安装完毕后，启用 hashmap 评级模块，接着创建 volume_thresholds 组，创建服务匹配规则 volume.size，并设置每 GB 的价格为 0.01。接下来对应大量数据设置应用折扣，在组 volume_thresholds 中创建阈值，设置若超过 50GB 的阈值，应用 2%的折扣（0.98）。设置完成后提交控制节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#0.启用hashmap</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack rating module enable hashmap </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#1.创建hashmap service</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack rating  hashmap service create volume.size </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Name</span> &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Service</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">volume</span><span class="cm-punctuation">.</span><span class="cm-identifier">size</span> <span class="cm-operator">|</span> <span class="cm-number">09d</span><span class="cm-identifier">a4a8b-b849-4715-a8e3-7cd12dfcf46e</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#2.创建hashmap service group</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack rating hashmap group create  volume_thresholds </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">openstack</span> <span class="cm-identifier">rating</span> <span class="cm-identifier">hashmap</span> <span class="cm-builtin">group</span> <span class="cm-identifier">create</span> &nbsp;<span class="cm-identifier">volume_thresholds</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+-------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-builtin">Group</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+-------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">volume_thresholds</span> <span class="cm-operator">|</span> <span class="cm-number">8</span><span class="cm-identifier">b3dfe73-5efb-46ab-a93b-dc9519063ed6</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+-------------------+--------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#3.创建volume单价</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack rating hashmap mapping create &nbsp; -s  09da4a8b-b849-4715-a8e3-7cd12dfcf46e -g 8b3dfe73-5efb-46ab-a93b-dc9519063ed6  -t flat  0.01 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#4.创建service rule</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack rating hashmap threshold create &nbsp; -s  09da4a8b-b849-4715-a8e3-7cd12dfcf46e -g 8b3dfe73-5efb-46ab-a93b-dc9519063ed6  -t rate 50 0.98</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 627px;"></div><div class="CodeMirror-gutters" style="display: none; height: 627px;"></div></div></div></pre><p><span>1.检查hashmap 评级模块启用成功计 0.2 分</span>
<span>2.检查服务匹配规则volume.size 创建成功 0.8 分</span></p><h3><a name="题目-16openstack-平台内存优化05-分" class="md-header-anchor"></a><span>【题目 16】OpenStack 平台内存优化[0.5 分]</span></h3><p><span>搭建完 OpenStack 平台后，关闭系统的内存共享，打开透明大页。完成后提交控制节点</span>
<span>的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># find / -name defrag</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">sys</span><span class="cm-operator">/</span><span class="cm-identifier">kernel</span><span class="cm-operator">/</span><span class="cm-identifier">mm</span><span class="cm-operator">/</span><span class="cm-identifier">transparent_hugepage</span><span class="cm-operator">/</span><span class="cm-identifier">defrag</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">sys</span><span class="cm-operator">/</span><span class="cm-identifier">kernel</span><span class="cm-operator">/</span><span class="cm-identifier">mm</span><span class="cm-operator">/</span><span class="cm-identifier">transparent_hugepage</span><span class="cm-operator">/</span><span class="cm-identifier">khugepaged</span><span class="cm-operator">/</span><span class="cm-identifier">defrag</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># echo never &gt; /sys/kernel/mm/transparent_hugepage/defr</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ag</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cat /sys/kernel/mm/transparent_hugepage/defrag </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">always</span> <span class="cm-identifier">madvise</span> <span class="cm-punctuation">[</span><span class="cm-identifier">never</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 202px;"></div><div class="CodeMirror-gutters" style="display: none; height: 202px;"></div></div></div></pre><p><span>1.检查系统内存优化成功计 0.5 分</span></p><h3><a name="题目-17修改文件句柄数05-分" class="md-header-anchor"></a><span>【题目 17】修改文件句柄数[0.5 分]</span></h3><p><span>Linux 服务器大并发时，往往需要预先调优 Linux 参数。默认情况下，Linux 最大文件句柄数为 1024 个。当你的服务器在大并发达到极限时，就会报出“too many open files”。创建一台云主机，修改相关配置，将控制节点的最大文件句柄数永久修改为 65535。配置完成后提交 controller 点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ulimit -n</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1024</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#  echo "* soft nofile 65535" &gt;&gt; /etc/security/limits.conf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#  echo "* hard nofile 65535" &gt;&gt; /etc/security/limits.conf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">*</span> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#代表所有用户</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">soft</span> &nbsp; &nbsp;<span class="cm-comment">#超过文件句柄数时，仅提示</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">hard</span> &nbsp; &nbsp;<span class="cm-comment">#超过文件句柄数时，直接限制</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Last</span> <span class="cm-identifier">login</span><span class="cm-operator">:</span> <span class="cm-identifier">Thu</span> <span class="cm-identifier">May</span> &nbsp;<span class="cm-number">5</span> <span class="cm-number">19</span><span class="cm-operator">:</span><span class="cm-number">26</span><span class="cm-operator">:</span><span class="cm-number">47</span> <span class="cm-number">2022</span> <span class="cm-keyword">from</span> <span class="cm-number">10.60.2.201</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">#########################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">#  Welcome to XianDian  #</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">#########################</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ulimit -n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">65535</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 448px;"></div><div class="CodeMirror-gutters" style="display: none; height: 448px;"></div></div></div></pre><p><span>1.检查配置 linux 系统句柄数为 65535 成功计 0.5 分</span></p><h3><a name="题目-18linux-系统调优-防止syn-攻击1-分" class="md-header-anchor"></a><span>【题目 18】Linux 系统调优-防止SYN 攻击[1 分]</span></h3><p><span>修改 controller 节点的相关配置文件，开启 SYN cookie，防止 SYN 洪水攻击。完成后提交 controller 节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@container</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vim /etc/sysctl.conf</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#添加以下参数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_max_syn_backlog</span><span class="cm-operator">=</span><span class="cm-number">2048</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_syncookies</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_syn_retries</span> <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@container</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># sysctl -p</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">bridge</span><span class="cm-punctuation">.</span><span class="cm-identifier">bridge-nf-call-iptables</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">bridge</span><span class="cm-punctuation">.</span><span class="cm-identifier">bridge-nf-call-ip6tables</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_max_syn_backlog</span> <span class="cm-operator">=</span> <span class="cm-number">2048</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_syncookies</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sysctl</span><span class="cm-operator">:</span> <span class="cm-identifier">setting</span> <span class="cm-identifier">key</span> <span class="cm-string">"net.ipv4.tcp_syn_retries"</span><span class="cm-operator">:</span> <span class="cm-identifier">Invalid</span> <span class="cm-identifier">argument</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_syn_retries</span> <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@container</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 381px;"></div><div class="CodeMirror-gutters" style="display: none; height: 381px;"></div></div></div></pre><p><span>1.检查开启SYN cookie 配置计 1 分</span></p><h2><a name="任务-2私有云服务运维15-分" class="md-header-anchor"></a><span>【任务 2】私有云服务运维[15 分]</span></h2><h3><a name="题目-1openstack-开放镜像权限05-分" class="md-header-anchor"></a><span>【题目 1】OpenStack 开放镜像权限[0.5 分]</span></h3><p><span>使用 OpenStack 私 有 云 平 台 ， 在 OpenStack 平台的 admin 项 目 中 使 用cirros-0.3.4-x86_64-disk.img 镜像文件创建名为glance-cirros 的镜像，通过OpenStack 命令将glance-cirros 镜像指定 demo 项目进行共享使用。配置完成后提交controller 点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack image create --disk-format qcow2 --container-format bare --file cirros-0.3.4-x86_64-disk.img glance-cirros</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">9</span><span class="cm-operator">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Field</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">checksum</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">ee1eca47dc88f4879d8a229cc70a07c6</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">container_format</span> <span class="cm-operator">|</span> <span class="cm-identifier">bare</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">created_at</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">2022</span><span class="cm-operator">-</span><span class="cm-number">09</span><span class="cm-operator">-</span><span class="cm-number">19</span><span class="cm-identifier">T07</span><span class="cm-operator">:</span><span class="cm-number">02</span><span class="cm-operator">:</span><span class="cm-number">51</span><span class="cm-identifier">Z</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">disk_format</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">qcow2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">file</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-operator">/</span><span class="cm-identifier">v2</span><span class="cm-operator">/</span><span class="cm-identifier">images</span><span class="cm-operator">/</span><span class="cm-number">3</span><span class="cm-identifier">bac7fd7-bc66-4586-9872-3cbea90da5d2</span><span class="cm-operator">/</span><span class="cm-identifier">file</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">3</span><span class="cm-identifier">bac7fd7-bc66-4586-9872-3cbea90da5d2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">min_disk</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">min_ram</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">name</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">glance-cirros</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">owner</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-number">1</span><span class="cm-identifier">b29cb9baa394a0eb3d531913dc9ccec</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">properties</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">os_hash_algo</span><span class="cm-operator">=</span><span class="cm-string">'sha512'</span><span class="cm-punctuation">,</span> <span class="cm-identifier">os_hash_value</span><span class="cm-operator">=</span><span class="cm-string">'1b03ca1bc3fafe448b90583c12f367949f8b0e665685979d95b004e48574b953316799e23240f4f739d1b5eb4c4ca24d38fdc6f4f9d8247a2bc64db25d6bbdb2'</span><span class="cm-punctuation">,</span> <span class="cm-identifier">os_hidden</span><span class="cm-operator">=</span><span class="cm-string">'False'</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">protected</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">False</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">schema</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-operator">/</span><span class="cm-identifier">v2</span><span class="cm-operator">/</span><span class="cm-identifier">schemas</span><span class="cm-operator">/</span><span class="cm-identifier">image</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">size</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">13287936</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">status</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">active</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">tags</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">updated_at</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-number">2022</span><span class="cm-operator">-</span><span class="cm-number">09</span><span class="cm-operator">-</span><span class="cm-number">19</span><span class="cm-identifier">T07</span><span class="cm-operator">:</span><span class="cm-number">02</span><span class="cm-operator">:</span><span class="cm-number">53</span><span class="cm-identifier">Z</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">virtual_size</span> &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">visibility</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">shared</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># openstack domain list</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+----------------------------------+---------+---------+--------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Name</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Enabled</span> <span class="cm-operator">|</span> <span class="cm-identifier">Description</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+----------------------------------+---------+---------+--------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-number">7</span><span class="cm-identifier">fc907bd4a6e471aa6d714ff66646d2a</span> <span class="cm-operator">|</span> <span class="cm-identifier">huhy</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">True</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-keyword">Default</span> <span class="cm-identifier">Domain</span> &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-keyword">default</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-keyword">Default</span> <span class="cm-operator">|</span> <span class="cm-identifier">True</span> &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">The</span> <span class="cm-keyword">default</span> <span class="cm-identifier">domain</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+----------------------------------+---------+---------+--------------------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># glance member-create 3bac7fd7-bc66-4586-9872-3cbea90da5d2 7fc907bd4a6e471aa6d714ff66646d2a</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 镜像id 域名id</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+----------------------------------+---------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Image</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Member</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Status</span> &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+----------------------------------+---------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-number">3</span><span class="cm-identifier">bac7fd7-bc66-4586-9872-3cbea90da5d2</span> <span class="cm-operator">|</span> <span class="cm-number">7</span><span class="cm-identifier">fc907bd4a6e471aa6d714ff66646d2a</span> <span class="cm-operator">|</span> <span class="cm-identifier">pending</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+----------------------------------+---------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># glance member-update 3bac7fd7-bc66-4586-9872-3cbea90da5d2 7fc907bd4a6e471aa6d714ff66646d2a accepted &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  +--------------------------------------+----------------------------------+----------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Image</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">Member</span> <span class="cm-identifier">ID</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Status</span> &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+----------------------------------+----------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-number">3</span><span class="cm-identifier">bac7fd7-bc66-4586-9872-3cbea90da5d2</span> <span class="cm-operator">|</span> <span class="cm-number">7</span><span class="cm-identifier">fc907bd4a6e471aa6d714ff66646d2a</span> <span class="cm-operator">|</span> <span class="cm-identifier">accepted</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------------------------+----------------------------------+----------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1971px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1971px;"></div></div></div></pre><p><span>1.检查glance-cirros 镜像权限开放正确计 0.5 分</span></p><h3><a name="题目-2openstack-消息队列调优05-分" class="md-header-anchor"></a><span>【题目 2】OpenStack 消息队列调优[0.5 分]</span></h3><p><span>OpenStack 各服务内部通信都是通过 RPC 来交互，各 agent 都需要去连接 RabbitMQ； 随着各服务 agent 增多，MQ 的连接数会随之增多，最终可能会到达上限，成为瓶颈。使用自行搭建的OpenStack 私有云平台，分别通过用户级别、系统级别、配置文件来设置RabbitMQ 服务的最大连接数为 10240，配置完成后提交修改节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi /etc/sysctl.conf</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">fs</span><span class="cm-punctuation">.</span><span class="cm-identifier">file-max</span><span class="cm-operator">=</span><span class="cm-number">10240</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在sysctl.conf文件的最下方添加一行fs.file-max=10240</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># sysctl -p</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">fs</span><span class="cm-punctuation">.</span><span class="cm-identifier">file-max</span> <span class="cm-operator">=</span> <span class="cm-number">10240</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi /etc/security/limits.conf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">openstack</span> <span class="cm-identifier">soft</span> &nbsp; &nbsp; <span class="cm-identifier">nofile</span> &nbsp;<span class="cm-number">10240</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">openstack</span> <span class="cm-identifier">hard</span> &nbsp; &nbsp; <span class="cm-identifier">nofile</span> &nbsp;<span class="cm-number">10240</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在配置文件的最后添加两行内容如上,修改完之后，保存退出</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi /usr/lib/systemd/system/rabbitmq-server.service</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#在[Service]下添加一行参数如下：</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">LimitNOFILE</span><span class="cm-operator">=</span><span class="cm-number">10240</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#重启服务</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># systemctl daemon-reload</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># systemctl restart rabbitmq-server</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># rabbitmqctl status</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Status</span> <span class="cm-identifier">of</span> <span class="cm-identifier">node</span> <span class="cm-identifier">rabbit</span><span class="cm-variable-2">@controller</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[{</span><span class="cm-identifier">pid</span><span class="cm-punctuation">,</span><span class="cm-number">4561</span><span class="cm-punctuation">},</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-punctuation">{</span><span class="cm-identifier">running_applications</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-operator">..........</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-punctuation">{</span><span class="cm-identifier">file_descriptors</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-punctuation">[{</span><span class="cm-identifier">total_limit</span><span class="cm-punctuation">,</span><span class="cm-number">10140</span><span class="cm-punctuation">},</span> &nbsp; <span class="cm-comment">#已经有100个连接数,可以看到当前的RabbitMQ已被修改</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">{</span><span class="cm-identifier">total_used</span><span class="cm-punctuation">,</span><span class="cm-number">77</span><span class="cm-punctuation">},</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">{</span><span class="cm-identifier">sockets_limit</span><span class="cm-punctuation">,</span><span class="cm-number">9124</span><span class="cm-punctuation">},</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">{</span><span class="cm-identifier">sockets_used</span><span class="cm-punctuation">,</span><span class="cm-number">75</span><span class="cm-punctuation">}]},</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-punctuation">{</span><span class="cm-identifier">processes</span><span class="cm-punctuation">,[{</span><span class="cm-identifier">limit</span><span class="cm-punctuation">,</span><span class="cm-number">1048576</span><span class="cm-punctuation">},{</span><span class="cm-identifier">used</span><span class="cm-punctuation">,</span><span class="cm-number">1150</span><span class="cm-punctuation">}]},</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-punctuation">{</span><span class="cm-identifier">run_queue</span><span class="cm-punctuation">,</span><span class="cm-number">0</span><span class="cm-punctuation">},</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-punctuation">{</span><span class="cm-identifier">uptime</span><span class="cm-punctuation">,</span><span class="cm-number">40</span><span class="cm-punctuation">},</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-punctuation">{</span><span class="cm-identifier">kernel</span><span class="cm-punctuation">,{</span><span class="cm-identifier">net_ticktime</span><span class="cm-punctuation">,</span><span class="cm-number">60</span><span class="cm-punctuation">}}]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 739px;"></div><div class="CodeMirror-gutters" style="display: none; height: 739px;"></div></div></div></pre><p><span>1.检查 rabbitmq 服务最大连接数正确计 0.5 分</span></p><h3><a name="题目-3openstack-glance-镜像压缩05-分" class="md-header-anchor"></a><span>【题目 3】OpenStack Glance 镜像压缩[0.5 分]</span></h3><p><span>使用自行搭建的 OpenStack 平台。在 HTTP 服务中存在一个镜像为CentOS7.5-compress.qcow2 的镜像，请使用 qemu 相关命令，对该镜像进行压缩，压缩后的镜像命名为chinaskill-js-compress.qcow2 并存放在/root 目录下。完成后提交 controller 点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># du -sh CentOS7.5-compress.qcow2</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">892</span><span class="cm-identifier">M</span> <span class="cm-identifier">CentOS7</span><span class="cm-number">.5</span><span class="cm-operator">-</span><span class="cm-identifier">compress</span><span class="cm-punctuation">.</span><span class="cm-identifier">qcow2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># qemu-img convert -c -O qcow2 CentOS7.5-compress.qcow2 CentOS7.5-compress2.qcow2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-identifier">c</span> <span class="cm-error">压缩</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-identifier">O</span> <span class="cm-identifier">qcow2</span> <span class="cm-error">输出格式为</span> <span class="cm-identifier">qcow2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CentOS7</span><span class="cm-number">.5</span><span class="cm-operator">-</span><span class="cm-identifier">compress</span><span class="cm-punctuation">.</span><span class="cm-identifier">qcow2</span> &nbsp; <span class="cm-error">被压缩的文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">CentOS7</span><span class="cm-number">.5</span><span class="cm-operator">-</span><span class="cm-identifier">compress2</span><span class="cm-punctuation">.</span><span class="cm-identifier">qcow2</span> <span class="cm-error">压缩完成后文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># du -sh CentOS7.5-compress2.qcow2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">405</span><span class="cm-identifier">M</span> <span class="cm-identifier">CentOS7</span><span class="cm-number">.5</span><span class="cm-operator">-</span><span class="cm-identifier">compress2</span><span class="cm-punctuation">.</span><span class="cm-identifier">qcow2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 269px;"></div><div class="CodeMirror-gutters" style="display: none; height: 269px;"></div></div></div></pre><p><span>1.检查镜像压缩正确计 0.5 分</span></p><h3><a name="题目-4glance-对接-cinder-后端存储05-分" class="md-header-anchor"></a><span>【题目 4】glance 对接 cinder 后端存储[0.5 分]</span></h3><p><span>在自行搭建的OpenStack 平台中修改相关参数，使glance 可以使用cinder 作为后端存储， 将镜像存储于cinder 卷中。使用 cirros-0.3.4-x86_64-disk.img 文件创建 cirros-image 镜像存储于 cirros-cinder 卷中，通过 cirros-image 镜像使用 cinder 卷启动盘的方式进行创建虚拟机。完成后提交修改节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi /etc/glance/glance-api.conf</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#show_multiple_locations = false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">改为</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">show_multiple_locations</span> <span class="cm-operator">=</span> <span class="cm-identifier">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># systemctl restart openstack-glance-*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi /etc/cinder/cinder.conf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#allowed_direct_url_schemes =</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">改为</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">allowed_direct_url_schemes</span> <span class="cm-operator">=</span><span class="cm-identifier">cinder</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#image_upload_use_internal_tenant = false</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">改为</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">image_upload_use_internal_tenant</span> <span class="cm-operator">=</span> <span class="cm-identifier">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#最后重启cinder</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># systemctl restart openstack-cinderack-cinder-scheduler.service httpd</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">代码不全</span><span class="cm-punctuation">,</span><span class="cm-error">还差一些操作</span><span class="cm-punctuation">,</span><span class="cm-error">只有一半的分</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 515px;"></div><div class="CodeMirror-gutters" style="display: none; height: 515px;"></div></div></div></pre><p><span>1.检查修改glance 后端存储为 cinder 正确计 0.5 分</span></p><h3><a name="题目-5openstack-heat-运维创建容器05-分" class="md-header-anchor"></a><span>【题目 5】OpenStack Heat 运维：创建容器[0.5 分]</span></h3><p><span>在自行搭建的 OpenStack 私 有 云 平 台 上 ， 在 /root 目录下编写 Heat 模板create_container.yaml，要求执行 yaml 文件可以创建名为 heat-swift 的容器。完成后提交控制节点的用户名、密码和 IP 地址到答题框。（在提交信息前请准备好 yaml 模板执行的环境）</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vim create_container.yaml</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">heat_template_version</span><span class="cm-operator">:</span> <span class="cm-number">2014</span><span class="cm-operator">-</span><span class="cm-number">10</span><span class="cm-operator">-</span><span class="cm-number">16</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">resources</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">user</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">type</span><span class="cm-operator">:</span> <span class="cm-identifier">OS</span><span class="cm-operator">::</span><span class="cm-identifier">Container</span><span class="cm-operator">::</span><span class="cm-identifier">Swift</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">properties</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-identifier">heat-swift</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#此类题目，在dashboard界面上都有模板可以查询</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 224px;"></div><div class="CodeMirror-gutters" style="display: none; height: 224px;"></div></div></div></pre><p><span>1.执行heat 模板文件成功创建容器计 0.5 分</span></p><h3><a name="题目-6openstack-nova-清除缓存05-分" class="md-header-anchor"></a><span>【题目 6】OpenStack Nova 清除缓存[0.5 分]</span></h3><p><span>在 OpenStack 平台的一台计算节点创建虚拟机，若是第一次在该节点创建次虚拟机，会先将镜像文件复制到该计算节点目录/var/lib/nova/instances/_base。长期下来，该目录会占用比较大的磁盘空间而要清理。可以通过修改 nova 的配置文件来自动清理该缓存目录，即在该节点没有使用某镜像启动的云主机，那么这个镜像在过一定的时间后会被自动删除。配置完成后提交改动节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">此题默认配置文件是是正确的，直接提交即可得分</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p><span>1.检查nova 配置自动清理缓存文件正确计 0.5 分</span></p><h3><a name="题目-7redis-一主二从三哨兵模式1-分" class="md-header-anchor"></a><span>【题目 7】Redis 一主二从三哨兵模式[1 分]</span></h3><p><span>使用提供的 OpenStack 私有云平台，申请三台 CentOS7.9 系统的云主机，使用提供的http 源，在三个节点自行安装 Redis 服务并启动，配置 Redis 的访问需要密码，密码设置为123456。然后将这三个 Redis 节点配置为 Redis 的一主二从三哨兵架构，即一个 Redis 主节点，两个从节点，三个节点均为哨兵节点。配置完成后提交Redis 主节点的用户名、密码和IP 地址到答题框。</span></p><p><span>（1）环境配置</span>
<img src="https://img-blog.csdnimg.cn/c73c298fadef455bbf8e99eb816b7919.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<span>(2) 修改 Redis 配置文件（所有节点操作）</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">systemctl</span> <span class="cm-identifier">stop</span> <span class="cm-identifier">firewalld</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">setenforce</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">vim</span> <span class="cm-operator">/</span><span class="cm-identifier">opt</span><span class="cm-operator">/</span><span class="cm-identifier">redis-5</span><span class="cm-number">.0.7</span><span class="cm-operator">/</span><span class="cm-identifier">sentinel</span><span class="cm-punctuation">.</span><span class="cm-identifier">conf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">protected-mode</span> <span class="cm-identifier">no</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#17行，关闭保护模式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">port</span> <span class="cm-number">26379</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#21行，Redis哨兵默认的监听端口</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">daemonize</span> <span class="cm-identifier">yes</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#26行，指定sentinel为后台启动</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">logfile</span> <span class="cm-string">"/var/log/sentinel.log"</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#36行，指定日志存放路径</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">dir</span> <span class="cm-string">"/var/lib/redis/6379"</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#65行，指定数据库存放路径</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sentinel</span> <span class="cm-identifier">monitor</span> <span class="cm-identifier">mymaster</span> <span class="cm-number">192.168.154.19</span> <span class="cm-number">6379</span> <span class="cm-number">2</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-comment">#84行，修改 指定该哨兵节点监控192.168.184.10:6379这个主节点，该主节点的名称是mymaster，最后的2的含义与主节点的故障判定有关：至少需要2个哨兵节点同意，才能判定主节点故障并进行故障转移</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sentinel</span> <span class="cm-identifier">down-after-milliseconds</span> <span class="cm-identifier">mymaster</span> <span class="cm-number">30000</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-comment">#113行，判定服务器down掉的时间周期，默认30000毫秒（30秒）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sentinel</span> <span class="cm-identifier">failover-timeout</span> <span class="cm-identifier">mymaster</span> <span class="cm-number">180000</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#146行，故障节点的最大超时时间为180000（180秒）</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 291px;"></div><div class="CodeMirror-gutters" style="display: none; height: 291px;"></div></div></div></pre><p><img src="https://img-blog.csdnimg.cn/54dcd46c858d47378a421e403e7c518d.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<img src="https://img-blog.csdnimg.cn/879238a44be94099b01210ca11f90793.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<img src="https://img-blog.csdnimg.cn/a8d3824fd7ac43bb9ec9d77da8043e06.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<img src="https://img-blog.csdnimg.cn/304db3abbefe4a2089f1ca4f0f8ec563.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<img src="https://img-blog.csdnimg.cn/29581791405c4b6b9db8f01314eb3dce.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<span> （3）启动哨兵模式</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> <span class="cm-operator">/</span><span class="cm-identifier">opt</span><span class="cm-operator">/</span><span class="cm-identifier">redis-5</span><span class="cm-number">.0.7</span><span class="cm-operator">/</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">redis-sentinel</span> <span class="cm-identifier">sentinel</span><span class="cm-punctuation">.</span><span class="cm-identifier">conf</span> <span class="cm-operator">&amp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">注意！先启动主服务器，再启动从服务器</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 67px;"></div><div class="CodeMirror-gutters" style="display: none; height: 67px;"></div></div></div></pre><p><img src="https://img-blog.csdnimg.cn/21a120c186d946239fb211e543317c92.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<img src="https://img-blog.csdnimg.cn/519c03302e4345ff9a61c42c74f1c3fc.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<img src="https://img-blog.csdnimg.cn/45077adaad0e40769f587692af1ca613.png" referrerpolicy="no-referrer" alt="在这里插入图片描述"></p><p><span>（4）查看哨兵信息</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@slave2</span> <span class="cm-identifier">redis-5</span><span class="cm-number">.0.7</span><span class="cm-punctuation">]</span><span class="cm-comment"># redis-cli -p 26379 info Sentinel</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Sentinel</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sentinel_masters</span><span class="cm-operator">:</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sentinel_tilt</span><span class="cm-operator">:</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sentinel_running_scripts</span><span class="cm-operator">:</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sentinel_scripts_queue_length</span><span class="cm-operator">:</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">sentinel_simulate_failure_flags</span><span class="cm-operator">:</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">master0</span><span class="cm-operator">:</span><span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">mymaster</span><span class="cm-punctuation">,</span><span class="cm-identifier">status</span><span class="cm-operator">=</span><span class="cm-identifier">ok</span><span class="cm-punctuation">,</span><span class="cm-identifier">address</span><span class="cm-operator">=</span><span class="cm-number">192.168.58.30</span><span class="cm-operator">:</span><span class="cm-number">6379</span><span class="cm-punctuation">,</span><span class="cm-identifier">slaves</span><span class="cm-operator">=</span><span class="cm-number">2</span><span class="cm-punctuation">,</span><span class="cm-identifier">sentinels</span><span class="cm-operator">=</span><span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-number">1</span><span class="cm-punctuation">]</span><span class="cm-operator">+</span> &nbsp;<span class="cm-error">完成</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">redis-sentinel</span> <span class="cm-identifier">sentinel</span><span class="cm-punctuation">.</span><span class="cm-identifier">conf</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 202px;"></div><div class="CodeMirror-gutters" style="display: none; height: 202px;"></div></div></div></pre><p><span>1.检查 redis 主从集群部署正确计 0.5 分</span>
<span>2.检查 redis 集群部署为哨兵节点正确计 0.5 分</span></p><h3><a name="题目-8redis-服务调优-aof1-分" class="md-header-anchor"></a><span>【题目 8】Redis 服务调优-AOF[1 分]</span></h3><p><span>使用上一题安装的Redis 服务。在 Redis 中，AOF 配置为以三种不同的方式在磁盘上执行 write 或者 fsync。假设当前 Redis 压力过大，请配置 Redis 不执行 fsync。除此之外，避免AOF 文件过大，Redis 会进行 AOF 重写，生成缩小的 AOF 文件。请修改配置，让 AOF 重写时，不进行fsync 操作。配置完成后提交 Redis 节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@master</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vim /etc/redis.conf</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">no-appendfsync-on-rewrite</span> <span class="cm-identifier">no</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">aof-rewrite-incremental-fsync</span> <span class="cm-identifier">yes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#连个参数分别改为</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">aof-rewrite-incremental-fsync</span> <span class="cm-identifier">no</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">no-appendfsync-on-rewrite</span> <span class="cm-identifier">yes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#配置就是设置为yes时候，在aof重写期间会停止aof的fsync操作</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@master</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># systemctl restart redis</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@master</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 269px;"></div><div class="CodeMirror-gutters" style="display: none; height: 269px;"></div></div></div></pre><p><span>1.检查配置 redis 不执行 fsync 正确计 0.5 分、</span>
<span>2.检查配置 redis 进行 AOF 重写不执行 fsync 正确计 0.5 分</span></p><h3><a name="题目-9应用部署堡垒机部署05-分" class="md-header-anchor"></a><span>【题目 9】应用部署：堡垒机部署[0.5 分]</span></h3><p><span>使用提供的 OpenStack 平台申请一台 CentOS7.9 的云主机，使用提供的软件包安装JumpServer 堡垒机服务，并配置使用该堡垒机对接自己安装的 controller 和 compute 节点。完成后提交 JumpServer 节点的用户名、密码和 IP 地址到答题框。</span></p><p><span>使用提供的软件包配置Yum源，通过地址将jumpserver.tar.gz软件包下载至Jumpserver节点的/root目录下</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ls</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">anaconda-ks</span><span class="cm-punctuation">.</span><span class="cm-identifier">cfg</span> &nbsp;<span class="cm-identifier">jumpserver</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span><span class="cm-punctuation">.</span><span class="cm-identifier">gz</span> &nbsp;<span class="cm-identifier">original-ks</span><span class="cm-punctuation">.</span><span class="cm-identifier">cfg</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><span>解压软件包jumpserver.tar.gz至/opt目录下</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># tar -zxvf jumpserver.tar.gz -C /opt/</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ls /opt/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">compose</span> &nbsp;<span class="cm-identifier">config</span> &nbsp;<span class="cm-identifier">docker</span> &nbsp;<span class="cm-identifier">docker</span><span class="cm-punctuation">.</span><span class="cm-identifier">service</span> &nbsp;<span class="cm-identifier">images</span> &nbsp;<span class="cm-identifier">jumpserver-repo</span> &nbsp;<span class="cm-identifier">static</span><span class="cm-punctuation">.</span><span class="cm-identifier">env</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 67px;"></div><div class="CodeMirror-gutters" style="display: none; height: 67px;"></div></div></div></pre><p><span>将默认Yum源移至其他目录，创建本地Yum源文件</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># mv /etc/yum.repos.d/* /mnt/</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cat &gt;&gt; /etc/yum.repos.d/jumpserver.repo &lt;&lt; EOF</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">jumpserver</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">jumpserver</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">baseurl</span><span class="cm-operator">=</span><span class="cm-identifier">file</span><span class="cm-operator">:///</span><span class="cm-identifier">opt</span><span class="cm-operator">/</span><span class="cm-identifier">jumpserver-repo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">gpgcheck</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">enabled</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">EOF</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># yum repolist</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">repo</span> <span class="cm-identifier">id</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-identifier">repo</span> <span class="cm-identifier">name</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-identifier">status</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">jumpserver</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-identifier">jumpserver</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-number">2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 246px;"></div><div class="CodeMirror-gutters" style="display: none; height: 246px;"></div></div></div></pre><p><span>安装Python数据库</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># yum install python2 -y</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p><span>安装配置Docker环境</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># cp -rf /opt/docker/* /usr/bin/</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># chmod 775 /usr/bin/docker*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># cp -rf /opt/docker.service /etc/systemd/system</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># chmod 775 /etc/systemd/system/docker.service </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># systemctl daemon-reload</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># systemctl enable docker --now</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Created</span> <span class="cm-identifier">symlink</span> <span class="cm-keyword">from</span> <span class="cm-operator">/</span><span class="cm-identifier">etc</span><span class="cm-operator">/</span><span class="cm-identifier">systemd</span><span class="cm-operator">/</span><span class="cm-identifier">system</span><span class="cm-operator">/</span><span class="cm-identifier">multi-user</span><span class="cm-punctuation">.</span><span class="cm-identifier">target</span><span class="cm-punctuation">.</span><span class="cm-identifier">wants</span><span class="cm-operator">/</span><span class="cm-identifier">docker</span><span class="cm-punctuation">.</span><span class="cm-identifier">service</span> <span class="cm-identifier">to</span> <span class="cm-operator">/</span><span class="cm-identifier">etc</span><span class="cm-operator">/</span><span class="cm-identifier">systemd</span><span class="cm-operator">/</span><span class="cm-identifier">system</span><span class="cm-operator">/</span><span class="cm-identifier">dock</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">er</span><span class="cm-punctuation">.</span><span class="cm-identifier">service</span><span class="cm-punctuation">.</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 179px;"></div><div class="CodeMirror-gutters" style="display: none; height: 179px;"></div></div></div></pre><p><span>验证服务状态</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># docker -v</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Docker</span> <span class="cm-identifier">version</span> <span class="cm-number">18.06.3</span><span class="cm-operator">-</span><span class="cm-identifier">ce</span><span class="cm-punctuation">,</span> <span class="cm-identifier">build</span> <span class="cm-identifier">d7080c1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># docker-compose -v</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker-compose</span> <span class="cm-identifier">version</span> <span class="cm-number">1.27.4</span><span class="cm-punctuation">,</span> <span class="cm-identifier">build</span> <span class="cm-number">40524192</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">opt</span><span class="cm-punctuation">]</span><span class="cm-comment"># </span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 112px;"></div></div></div></pre><p><span>安装Jumpserver服务</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment"># ls</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">jumpserver_core_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span> &nbsp;<span class="cm-identifier">jumpserver_lion_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span> &nbsp;<span class="cm-identifier">jumpserver_nginx_alpine2</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">jumpserver_koko_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span> &nbsp;<span class="cm-identifier">jumpserver_luna_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span> &nbsp;<span class="cm-identifier">jumpserver_redis_6-alpine</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">jumpserver_lina_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span> &nbsp;<span class="cm-identifier">jumpserver_mysql_5</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">load</span><span class="cm-punctuation">.</span><span class="cm-identifier">sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment"># cat load.sh </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#!/bin/bash</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker</span> <span class="cm-identifier">load</span> <span class="cm-operator">-</span><span class="cm-identifier">i</span> <span class="cm-identifier">jumpserver_core_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker</span> <span class="cm-identifier">load</span> <span class="cm-operator">-</span><span class="cm-identifier">i</span> <span class="cm-identifier">jumpserver_koko_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker</span> <span class="cm-identifier">load</span> <span class="cm-operator">-</span><span class="cm-identifier">i</span> <span class="cm-identifier">jumpserver_lina_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker</span> <span class="cm-identifier">load</span> <span class="cm-operator">-</span><span class="cm-identifier">i</span> <span class="cm-identifier">jumpserver_lion_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker</span> <span class="cm-identifier">load</span> <span class="cm-operator">-</span><span class="cm-identifier">i</span> <span class="cm-identifier">jumpserver_luna_v2</span><span class="cm-number">.11.4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker</span> <span class="cm-identifier">load</span> <span class="cm-operator">-</span><span class="cm-identifier">i</span> <span class="cm-identifier">jumpserver_mysql_5</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker</span> <span class="cm-identifier">load</span> <span class="cm-operator">-</span><span class="cm-identifier">i</span> <span class="cm-identifier">jumpserver_nginx_alpine2</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker</span> <span class="cm-identifier">load</span> <span class="cm-operator">-</span><span class="cm-identifier">i</span> <span class="cm-identifier">jumpserver_redis_6-alpine</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment"># sh load.sh </span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 336px;"></div><div class="CodeMirror-gutters" style="display: none; height: 336px;"></div></div></div></pre><p><span>创建Jumpserver服务组件目录</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment"># mkdir -p /opt/jumpserver/{core,koko,lion,mysql,nginx,redis}</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">images</span><span class="cm-punctuation">]</span><span class="cm-comment"># cp -rf /opt/config /opt/jumpserver/</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><span>生效环境变量static.env，使用所提供的脚本up.sh启动Jumpserver服务</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">compose</span><span class="cm-punctuation">]</span><span class="cm-comment"># ls</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">config_static</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">docker-compose-lb</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">docker-compose-network</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">down</span><span class="cm-punctuation">.</span><span class="cm-identifier">sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker-compose-app</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">docker-compose-mysql-internal</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp;<span class="cm-identifier">docker-compose-redis-internal</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp;<span class="cm-identifier">up</span><span class="cm-punctuation">.</span><span class="cm-identifier">sh</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker-compose-es</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">docker-compose-mysql</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">docker-compose-redis</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">docker-compose-external</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp;<span class="cm-identifier">docker-compose-network_ipv6</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span> &nbsp; &nbsp;<span class="cm-identifier">docker-compose-task</span><span class="cm-punctuation">.</span><span class="cm-identifier">yml</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">compose</span><span class="cm-punctuation">]</span><span class="cm-comment"># source /opt/static.env </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">compose</span><span class="cm-punctuation">]</span><span class="cm-comment"># sh up.sh </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">network</span> <span class="cm-string">"jms_net"</span> <span class="cm-identifier">with</span> <span class="cm-identifier">driver</span> <span class="cm-string">"bridge"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_redis</span> <span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_mysql</span> <span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_core</span> &nbsp;<span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_lina</span> &nbsp; <span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_nginx</span> &nbsp;<span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_celery</span> <span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_lion</span> &nbsp; <span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_luna</span> &nbsp; <span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Creating</span> <span class="cm-identifier">jms_koko</span> &nbsp; <span class="cm-operator">..</span><span class="cm-punctuation">.</span> <span class="cm-identifier">done</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@jumpserver</span> <span class="cm-identifier">compose</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 403px;"></div><div class="CodeMirror-gutters" style="display: none; height: 403px;"></div></div></div></pre><p><span>浏览器访问</span><a href='http://10.24.193.142' target='_blank' class='url'>http://10.24.193.142</a><span>，Jumpserver Web登录（admin/admin）</span>
<img src="https://img-blog.csdnimg.cn/9c6d08ac6cbc413782c571a509762d33.png" referrerpolicy="no-referrer" alt="图1 Web登录.png"></p><p><span>图1 Web登录</span></p><p><span>登录成功后，会提示设置新密码，如图2所示：</span></p><p><img src="https://img-blog.csdnimg.cn/526c4bb658cd4ed28200391a45669b8f.png" referrerpolicy="no-referrer" alt="图2 修改密码.png"></p><p><span>图2 修改密码</span></p><p><span>登录平台后，单击页面右上角下拉菜单切换中文字符设置，如图3所示：</span></p><p><img src="https://img-blog.csdnimg.cn/4a359b9369fd421ab5363d195ceb370b.png" referrerpolicy="no-referrer" alt="图3 登录成功.png"></p><p><span>图3 登录成功</span></p><p><span>至此Jumpserver安装完成。</span></p><p><span>（6）管理资产</span></p><p><span>使用管理员admin用户登录Jumpserver管理平台，单击左侧导航栏，展开“资产管理”项目，选择“管理用户”，单击右侧“创建”按钮，如图4所示：</span></p><p><img src="https://img-blog.csdnimg.cn/0543340f279c4063b85a9cfcdc5c200d.png" referrerpolicy="no-referrer" alt="图4 管理用户.png"></p><p><span>图4 管理用户</span></p><p><span>创建远程连接用户，用户名为root密码为“Abc@1234”，单击“提交”按钮进行创建，如图5所示：</span></p><p><img src="https://img-blog.csdnimg.cn/b045cd27415a42c3980aac90453bd6b1.png" referrerpolicy="no-referrer" alt="图5 创建管理用户.png"></p><p><span>图5 创建管理用户</span></p><p><span>选择“系统用户”，单击右侧“创建”按钮，创建系统用户，选择主机协议“SSH”，设置用户名root，密码为服务器SSH密码并单击“提交”按钮，如图6所示：</span></p><p><img src="https://img-blog.csdnimg.cn/94b16f90dddf48589bd702e4254a7726.png" referrerpolicy="no-referrer" alt="图6 创建系统用户.png"></p><p><span>图6 创建系统用户</span></p><p><span>单击左侧导航栏，展开“资产管理”项目，选择“资产列表”，单击右侧“创建”按钮，如图7所示：</span></p><p><img src="https://img-blog.csdnimg.cn/d89596e2187b484c8ab56493cceec414.png" referrerpolicy="no-referrer" alt="图7 管理资产.png"></p><p><span>图7 管理资产</span></p><p><span>创建资产，将云平台主机（controller）加入资产内，如图8、图9所示：</span></p><p><img src="https://img-blog.csdnimg.cn/cb24b23b657f4f9b95749958c9f1bec3.png" referrerpolicy="no-referrer" alt="图8 创建资产controller.png"></p><p><span>图8 创建资产controller</span></p><p><img src="https://img-blog.csdnimg.cn/ca09c35ba686489c821a5c68fdef9c4d.png" referrerpolicy="no-referrer" alt="图9 创建成功.png"></p><p><span>图9 创建成功</span></p><p><span>（7）资产授权</span></p><p><span>单击左侧导航栏，展开“权限管理”项目，选择“资产授权”，单击右侧“创建”按钮，创建资产授权规则，如图10所示：</span></p><p><img src="https://img-blog.csdnimg.cn/887b01cf50214882be0efead1ba24b80.png" referrerpolicy="no-referrer" alt="图10 创建资产授权规则.png"></p><p><span>图10 创建资产授权规则</span></p><p><span>（8）测试连接</span></p><p><span>单击右上角管理员用户下拉菜单，选择“用户界面”，如图11所示：</span></p><p><img src="https://img-blog.csdnimg.cn/710a1447beb7445681332c825fa43e10.png" referrerpolicy="no-referrer" alt="图11 创建资产授权规则.png"></p><p><span>图11 创建资产授权规则</span></p><p><span>如果未出现Default项目下的资产主机，单击收藏夹后“刷新”按钮进行刷新，如图12所示：</span></p><p><img src="https://img-blog.csdnimg.cn/961fdae7c68e46efbe525d5cab17934a.png" referrerpolicy="no-referrer" alt="图12 查看资产.png"></p><p><span>图12 查看资产</span></p><p><span>单击左侧导航栏，选择“Web终端”进入远程连接页面，如图13所示：</span></p><p><img src="https://img-blog.csdnimg.cn/245f50fdd2ad4877aa2aeb3da44c9913.png" referrerpolicy="no-referrer" alt="图13 进入远程连接终端.png"></p><p><span>图13 进入远程连接终端</span></p><p><span>单击左侧Default，展开文件夹，单击controller主机，右侧成功连接主机，如图14所示：</span></p><p><img src="https://img-blog.csdnimg.cn/bf3b1559815f49bfa9a73bff930664d0.png" referrerpolicy="no-referrer" alt="图14 测试连接.png"></p><p><span>图14 测试连接</span></p><p><span>至此OpenStack对接堡垒机案例操作成功。</span></p><h3><a name="题目-10skywalking-服务部署与应用1-分" class="md-header-anchor"></a><span>【题目 10】skywalking 服务部署与应用[1 分]</span></h3><p><span>使用提供的 OpenStack 私有云平台，申请一台 centos7.9 系统的云主机，使用提供的软件包安装 Elasticsearch 服务和 skywalking 服务，将 skywalking 的 UI 访问端口修改为 8888。接下来再申请一台CentOS7.9 的云主机，用于搭建gpmall 商城应用，并配置SkyWalking Agent， 将 gpmall 的 jar 包放置探针并启动。安装与配置完成后提交 skywalking 节点的用户名、密码和 IP 地址到答题框。</span></p><p><span>登录物理OpenStack平台，使用CentOS7.9镜像创建两台云主机（node-1，mall），云主机类型使用4VCPU/8GB内存/100GB硬盘。创建后的云主机作为本次案例的实验节点。</span></p><p><span>修改主机名</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# hostnamectl set-hostname node-1</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# hostnamectl</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Static hostname: node-1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Icon name: computer-vm</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  Chassis: vm</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  Machine ID: cc2c86fe566741e6a2ff6d399c5d5daa</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  Boot ID: 6c32a0c1d29e4f30929422c8032239ca</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Virtualization: kvm</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Operating System: CentOS Linux 7 (Core)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  CPE OS Name: cpe:/o:centos:centos:7</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  Kernel: Linux 3.10.0-1160.el7.x86_64</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Architecture: x86-64</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 269px;"></div><div class="CodeMirror-gutters" style="display: none; height: 269px;"></div></div></div></pre><p><span>将提供的elasticsearch-7.17.0-linux-x86_64.tar.gz软件包上传到此节点并解压到/opt目录，进入解压后的目录并创建data目录</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# tar -zxvf elasticsearch-7.17.0-linux-x86_64.tar.gz -C /opt</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# cd /opt/elasticsearch-7.17.0/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# mkdir data</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 67px;"></div><div class="CodeMirror-gutters" style="display: none; height: 67px;"></div></div></div></pre><p><span>修改Elasticsearch配置，修改并添加如下几行内容</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# vi config/elasticsearch.yml</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">cluster.name: my-application</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">node.name: node-1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">path.data: /opt/elasticsearch-7.17.0/data</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">path.logs: /opt/elasticsearch-7.17.0/logs</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">network.host: 0.0.0.0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">cluster.initial_master_nodes: ["node-1"]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">http.cors.enabled: true</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">http.cors.allow-origin: "*"</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">http.cors.allow-headers: Authorization,X-Requested-With,Content-Length,Content-Type</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 269px;"></div><div class="CodeMirror-gutters" style="display: none; height: 269px;"></div></div></div></pre><p><span>创建Elasticsearch启动用户，并设置属组及权限</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# groupadd elsearch</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# useradd elsearch -g elsearch -p elasticsearch</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# chown -R elsearch:elsearch /opt/elasticsearch-7.17.0</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 67px;"></div><div class="CodeMirror-gutters" style="display: none; height: 67px;"></div></div></div></pre><p><span>修改资源限制及内核配置，添加如下内容</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# vi /etc/security/limits.conf</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">* hard &nbsp; nofile &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 65536</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">* soft &nbsp; nofile &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 65536</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# vi /etc/sysctl.conf</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">vm.max_map_count=262144</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# sysctl -p</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# reboot</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 179px;"></div><div class="CodeMirror-gutters" style="display: none; height: 179px;"></div></div></div></pre><p><span>启动Elasticsearch服务</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# cd /opt/elasticsearch-7.17.0/</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# su elsearch</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[elsearch@node-1 elasticsearch-7.17.0]$ ./bin/elasticsearch -d</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">按Ctrl+D退出</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 90px;"></div><div class="CodeMirror-gutters" style="display: none; height: 90px;"></div></div></div></pre><p><span>查询端口，存在9200则成功启动</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 elasticsearch-7.17.0]# netstat -ntpl</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Active Internet connections (only servers)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Proto Recv-Q Send-Q Local Address &nbsp; &nbsp; Foreign Address &nbsp; &nbsp; &nbsp; State &nbsp; &nbsp; &nbsp; PID/Program name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 0.0.0.0:22 &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1081/sshd &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 127.0.0.1:25 &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1041/master &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 0.0.0.0:111 &nbsp; &nbsp; &nbsp;  0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  610/rpcbind &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::9300 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  2261/java &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::22 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1081/sshd &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 ::1:25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1041/master &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::111 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  610/rpcbind &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::9200 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  2261/java</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 246px;"></div><div class="CodeMirror-gutters" style="display: none; height: 246px;"></div></div></div></pre><p><span>使用提供的jdk-8u144-linux-x64.tar.gz软件包，上传jdk软件包，配置jdk如下</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# tar -zxvf jdk-8u144-linux-x64.tar.gz -C /usr/local/</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# vi /etc/profile</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"># /etc/profile</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">export JAVA_HOME=/usr/local/jdk1.8.0_144</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">export CLASSPATH=.:${JAVA_HOME}/jre/lib/rt.jar:${JAVA_HOME}/lib/dt.jar:${JAVA_HOME}/lib/tools.jar</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">export PATH=$PATH:${JAVA_HOME}/bin</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# source /etc/profile</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# java -version</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">java version "1.8.0_144"</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Java(TM) SE Runtime Environment (build 1.8.0_144-b01)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 269px;"></div><div class="CodeMirror-gutters" style="display: none; height: 269px;"></div></div></div></pre><p><span>进入解压后目录，修改OAP配置文件</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 ~]# cd /opt/apache-skywalking-apm-bin-es7/</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 apache-skywalking-apm-bin-es7]# vi config/application.yml</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#集群配置使用单机版</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">cluster:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">selector: ${SW_CLUSTER:standalone}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">standalone:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#数据库使用elasticsearch7</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">storage:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">selector: ${SW_STORAGE:elasticsearch7}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">elasticsearch7:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  nameSpace: ${SW_NAMESPACE:""}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  clusterNodes: ${SW_STORAGE_ES_CLUSTER_NODES:172.128.11.32:9200}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 336px;"></div><div class="CodeMirror-gutters" style="display: none; height: 336px;"></div></div></div></pre><p><span>启动OAP服务，查询端口，存在11800与12800则成功启动</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 apache-skywalking-apm-bin-es7]# ./bin/oapService.sh</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">SkyWalking OAP started successfully!</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 apache-skywalking-apm-bin-es7]# netstat -ntpl</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Active Internet connections (only servers)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Proto Recv-Q Send-Q Local Address &nbsp; &nbsp; &nbsp; Foreign Address &nbsp; &nbsp; State &nbsp; &nbsp; PID/Program name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 0.0.0.0:22 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 1081/sshd &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 127.0.0.1:25 &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 1041/master &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 0.0.0.0:111 &nbsp; &nbsp; &nbsp; &nbsp;  0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 610/rpcbind &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::9300 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 2261/java &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::22 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 1081/sshd &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::11800 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 2416/java &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 ::1:25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 1041/master &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::12800 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 2416/java &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::111 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 610/rpcbind &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::9200 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; 2261/java</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 358px;"></div><div class="CodeMirror-gutters" style="display: none; height: 358px;"></div></div></div></pre><p><span> 部署SkyWalking UI服务由于SkyWalking UI的默认地址是8080，与很多中间件可能存在冲突，修改一下</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 apache-skywalking-apm-bin-es7]# vi webapp/webapp.yml</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">server:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">port: 8888</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 112px;"></div></div></div></pre><p><span>启动SkyWalking UI服务</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 apache-skywalking-apm-bin-es7]# ./bin/webappService.sh</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">SkyWalking Web Application started successfully!</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><span>查看端口，存在8888则成功启动</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@node-1 apache-skywalking-apm-bin-es7]# netstat -ntpl</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Active Internet connections (only servers)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Proto Recv-Q Send-Q Local Address &nbsp; &nbsp; &nbsp; Foreign Address &nbsp; &nbsp; State &nbsp; &nbsp; &nbsp; PID/Program name</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 0.0.0.0:22 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1081/sshd &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 127.0.0.1:25 &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1041/master &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 0.0.0.0:111 &nbsp; &nbsp; &nbsp; &nbsp;  0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  610/rpcbind &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::9300 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  2261/java &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::22 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1081/sshd &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::8888 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  3133/java &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::11800 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  2416/java &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 ::1:25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1041/master &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::12800 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  2416/java &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::111 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  610/rpcbind &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::9200 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  2261/java</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 314px;"></div><div class="CodeMirror-gutters" style="display: none; height: 314px;"></div></div></div></pre><p><span>搭建并启动应用商城服务，并配置SkyWalking Agent修改mall节点主机名</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@localhost ~]# hostnamectl set-hostname mall</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# hostnamectl</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Static hostname: mall</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  Icon name: computer-vm</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  Chassis: vm</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  Machine ID: cc2c86fe566741e6a2ff6d399c5d5daa</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  Boot ID: 51559d155ec14aafad2411ca8b85db42</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  Virtualization: kvm</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Operating System: CentOS Linux 7 (Core)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  CPE OS Name: cpe:/o:centos:centos:7</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  Kernel: Linux 3.10.0-1160.el7.x86_64</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  Architecture: x86-64</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 269px;"></div><div class="CodeMirror-gutters" style="display: none; height: 269px;"></div></div></div></pre><p><span>修改/etc/hosts配置文件如下</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# cat /etc/hosts</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">127.0.0.1 &nbsp; localhost localhost.localdomain localhost4 localhost4.localdomain4</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">::1 &nbsp; &nbsp; &nbsp; &nbsp; localhost localhost.localdomain localhost6 localhost6.localdomain6</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.128.11.42 mal</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 112px;"></div></div></div></pre><p><span>将提供的gpmall包上传到服务器的/root目录下并解压gpmall.tar.gz，配置本地local.repo文件</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# mv /etc/yum.repos.d/* /media/</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# cd gpmall/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall gpmall]# tar -zxvf gpmall-repo.tar.gz -C /root/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# cat /etc/yum.repos.d/local.repo</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[mall]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">name=mall</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">baseurl=file:///root/gpmall-repo</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">gpgcheck=0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">enabled=1</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 202px;"></div><div class="CodeMirror-gutters" style="display: none; height: 202px;"></div></div></div></pre><p><span>安装基础服务，包括Java JDK环境、数据库、Redis、Nginx等</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# java -version</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">openjdk version "1.8.0_322"</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">OpenJDK Runtime Environment (build 1.8.0_322-b06)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">OpenJDK 64-Bit Server VM (build 25.322-b06, mixed mode)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# yum install redis -y</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# yum install nginx -y</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# yum install mariadb mariadb-server -y</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# tar -zxvf zookeeper-3.4.14.tar.gz</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#进入到zookeeper-3.4.14/conf目录下，将zoo_sample.cfg文件重命名为zoo.cf</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# cd zookeeper-3.4.14/conf/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall conf]# mv zoo_sample.cfg zoo.cfg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall conf]# cd ../bin</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall bin]# ./zkServer.sh start</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ZooKeeper JMX enabled by default</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Using config: /root/zookeeper-3.4.14/bin/../conf/zoo.cfg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Starting zookeeper ... STARTED</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#查看ZooKeeper状态</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall bin]# ./zkServer.sh status</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">ZooKeeper JMX enabled by default</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Using config: /root/zookeeper-3.4.14/bin/../conf/zoo.cfg</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Mode: standalone</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">安装Kafka服务，将提供的kafka_2.11-1.1.1.tgz包上传到mall节点上</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall bin]# cd</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# tar -zxvf kafka_2.11-1.1.1.tgz</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# cd kafka_2.11-1.1.1/bin/</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall bin]# ./kafka-server-start.sh -daemon ../config/server.properties</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall bin]# jps</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">6039 Kafka</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">1722 QuorumPeerMain</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">6126 Jps</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall bin]# netstat -ntpl</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Active Internet connections (only servers)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Proto Recv-Q Send-Q Local Address &nbsp; &nbsp; &nbsp; Foreign Address &nbsp; &nbsp; State &nbsp; &nbsp; &nbsp; PID/Program name &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 0.0.0.0:22 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1008/sshd &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp &nbsp; &nbsp; &nbsp;  0 &nbsp; &nbsp;  0 127.0.0.1:25 &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  887/master &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::9092 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  6039/java &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::46949 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  6039/java &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::2181 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1722/java &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::48677 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1722/java &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 :::22 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  1008/sshd &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tcp6 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;  0 ::1:25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :::* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp;  887/master</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1098px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1098px;"></div></div></div></pre><p><span>修改数据库配置文件并启动MariaDB数据库，设置root用户密码为123456，并创建gpmall数据库，将提供的gpmall.sql导入。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall bin]# cd</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# vi /etc/my.cnf</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[mysqld]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">!includedir /etc/my.cnf.d</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">init_connect='SET collation_connection = utf8_unicode_ci'</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">init_connect='SET NAMES utf8'</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">character-set-server=utf8</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">collation-server=utf8_unicode_ci</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">skip-character-set-client-handshake</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# systemctl start mariadb</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 269px;"></div><div class="CodeMirror-gutters" style="display: none; height: 269px;"></div></div></div></pre><p><span>设置root用户的权限，命令如下</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">MariaDB [(none)]&gt; grant all privileges on *.* to root@localhost identified by '123456' with grant option;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Query OK, 0 rows affected (0.001 sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">MariaDB [(none)]&gt; grant all privileges on *.* to root@"%" identified by '123456' with grant option;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Query OK, 0 rows affected (0.001 sec)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 112px;"></div></div></div></pre><p><span>将gpmall.sql文件上传至云主机的/root目录下。创建数据库gpmall并导入gpmall.sql文件。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">MariaDB [(none)]&gt; create database gpmall;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Query OK, 1 row affected (0.00 sec)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">MariaDB [(none)]&gt; use gpmall;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">MariaDB [gpmall]&gt; source /root/gpmall/gpmall.sql</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 90px;"></div><div class="CodeMirror-gutters" style="display: none; height: 90px;"></div></div></div></pre><p><span>退出数据库并设置开机自启</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">MariaDB [gpmall]&gt; Ctrl-C -- exit!</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Aborted</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# systemctl enable mariadb</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Created symlink from /etc/systemd/system/mysql.service to /usr/lib/systemd/system/mariadb.service.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Created symlink from /etc/systemd/system/mysqld.service to /usr/lib/systemd/system/mariadb.service.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Created symlink from /etc/systemd/system/multi-user.target.wants/mariadb.service to /usr/lib/systemd/system/mariadb.service.</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div><div class="CodeMirror-gutters" style="display: none; height: 157px;"></div></div></div></pre><p><span>修改Redis配置文件，编辑/etc/redis.conf文件。</span>
<span>将bind 127.0.0.1这一行注释掉；将protected-mode yes 改为 protected-mode no。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# vi /etc/redis.conf</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">#bind 127.0.0.1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">protected-mode no</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# systemctl start redis</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# systemctl enable redis</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Created symlink from /etc/systemd/system/multi-user.target.wants/redis.service to /usr/lib/systemd/system/redis.service.</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 202px;"></div><div class="CodeMirror-gutters" style="display: none; height: 202px;"></div></div></div></pre><p><span>启动Nginx服务命令如下</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# systemctl start nginx</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# systemctl enable nginx</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Created symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 90px;"></div><div class="CodeMirror-gutters" style="display: none; height: 90px;"></div></div></div></pre><p><span>应用系统部署，使用提供gpmall-shopping-0.0.1-SNAPSHOT.jar、gpmall-user-0.0.1-SNAPSHOT.jar、shopping-provider-0.0.1-SNAPSHOT.jar、user-provider-0.0.1-SNAPSHOT.jar 、dist这5个包部署应用系统，其中4个jar包为后端服务包，dist为前端包。（包在gpmall目录下）</span>
<span>修改/etc/hosts文件，修改项目全局配置文件如下（原有的172.128.11.42 mall映射删除）</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# cat /etc/hosts</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">127.0.0.1 &nbsp; localhost localhost.localdomain localhost4 localhost4.localdomain4</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">::1 &nbsp; &nbsp; &nbsp; &nbsp; localhost localhost.localdomain localhost6 localhost6.localdomain6</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.128.11.42 kafka.mall</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.128.11.42 mysql.mall</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.128.11.42 redis.mall</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">172.128.11.42 zookeeper.mall</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div><div class="CodeMirror-gutters" style="display: none; height: 157px;"></div></div></div></pre><p><span>清空默认项目路径下的文件，将dist目录下的文件，复制到Nginx默认项目路径</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# rm -rf /usr/share/nginx/html/*</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# cp -rvf gpmall/dist/* /usr/share/nginx/html/</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><span>修改Nginx配置文件/etc/nginx/nginx.conf，添加映射如下所示</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# vi /etc/nginx/nginx.conf</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  server {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  listen &nbsp; &nbsp; &nbsp; 80;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  listen &nbsp; &nbsp; &nbsp; [::]:80;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  server_name _;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  root &nbsp; &nbsp; &nbsp; &nbsp; /usr/share/nginx/html;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; # Load configuration files for the default server block.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  include /etc/nginx/default.d/*.conf;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  location / {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  root &nbsp; /usr/share/nginx/html;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  index index.html index.htm;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  location /user {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  proxy_pass http://127.0.0.1:8082;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  location /shopping {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  proxy_pass http://127.0.0.1:8081;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  location /cashier {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  proxy_pass http://127.0.0.1:8083;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  error_page 404 /404.html;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# systemctl restart nginx</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 672px;"></div><div class="CodeMirror-gutters" style="display: none; height: 672px;"></div></div></div></pre><p><span>到此，前端部署完毕。</span></p><p><span>部署后端</span></p><p><span>将node-1节点的/opt/apache-skywalking-apm-bin-es7目录下的agent目录复制到mall节点下：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# scp -r 172.128.11.32:/opt/apache-skywalking-apm-bin-es7/agent /root</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">修改SkyWalking agent配置文件</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# vi agent/config/agent.config</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">agent.service_name=${SW_AGENT_NAME:my-application}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">agent.sample_n_per_3_secs=${SW_AGENT_SAMPLE:1}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">collector.backend_service=${SW_AGENT_COLLECTOR_BACKEND_SERVICES:172.128.11.32:11800}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 246px;"></div><div class="CodeMirror-gutters" style="display: none; height: 246px;"></div></div></div></pre><p><span>将提供的4个jar包上传到服务器的/root目录下，放置探针并启动，通过设置启动参数的方式检测系统，启动命令如下：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# nohup java -javaagent:/root/agent/skywalking-agent.jar -jar gpmall/shopping-provider-0.0.1-SNAPSHOT.jar &amp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[1] 20086</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# nohup: ignoring input and appending output to ‘nohup.out’</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# nohup java -javaagent:/root/agent/skywalking-agent.jar -jar gpmall/user-provider-0.0.1-SNAPSHOT.jar &amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[2] 20132</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# nohup: ignoring input and appending output to ‘nohup.out’</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# nohup java -javaagent:/root/agent/skywalking-agent.jar -jar gpmall/gpmall-shopping-0.0.1-SNAPSHOT.jar &amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[3] 20177</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# nohup: ignoring input and appending output to ‘nohup.out’</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# nohup java -javaagent:/root/agent/skywalking-agent.jar -jar gpmall/gpmall-user-0.0.1-SNAPSHOT.jar &amp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[4] 20281</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# nohup: ignoring input and appending output to ‘nohup.out’</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"># httpd访问网络配置</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@mall ~]# setsebool -P httpd_can_network_connect 1</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 470px;"></div><div class="CodeMirror-gutters" style="display: none; height: 470px;"></div></div></div></pre><p><span>按照顺序运行4个jar包后，至此后端服务部署完毕</span>
<span>打开浏览器，在地址栏中输入</span><a href='http://localhost' target='_blank' class='url'>http://localhost</a><span>，访问界面</span></p><p><img src="https://img-blog.csdnimg.cn/fcb1e4fa3d6d4f2197d9b2496a11b3be.png" referrerpolicy="no-referrer" alt="在这里插入图片描述">
<span>单击右上角“头像”，进行登录操作，使用用户名/密码为test/test进行登录</span></p><p>&nbsp;</p><p><span>1.检查 skywalking 服务部署正确计 1 分</span></p><h3><a name="题目-11linux-内核优化1-分" class="md-header-anchor"></a><span>【题目 11】Linux 内核优化[1 分]</span></h3><p><span>在使用 Linux 服务器的时候，TCP 协议规定，对于已经建立的连接，网络双方要进行四次挥手才能成功断开连接，如果缺少了其中某个步骤，将会使连接处于假死状态，连接本身占用的资源不会被释放。因为服务器程序要同时管理大量连接，所以很有必要保证无用的连接完全断开，否则大量僵死的连接会浪费许多服务器资源。创建一台 CentOS7.9 云主机，修改相应的配置文件，分别开启 SYN Cookies；允许将 TIME-WAIT sockets 重新用于新的 TCP 连接；开启TCP 连接中TIME-WAIT sockets 的快速回收；修改系統默认的 TIMEOUT 时间为 30。完成后提交修改节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@container</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vim /etc/sysctl.conf</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#添加如下参数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_syncookies</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_tw_reuse</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_tw_recycle</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_fin_timeout</span> <span class="cm-operator">=</span> <span class="cm-number">30</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@container</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># sysctl -p</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">bridge</span><span class="cm-punctuation">.</span><span class="cm-identifier">bridge-nf-call-iptables</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">bridge</span><span class="cm-punctuation">.</span><span class="cm-identifier">bridge-nf-call-ip6tables</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_syncookies</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_tw_reuse</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_tw_recycle</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">net</span><span class="cm-punctuation">.</span><span class="cm-identifier">ipv4</span><span class="cm-punctuation">.</span><span class="cm-identifier">tcp_fin_timeout</span> <span class="cm-operator">=</span> <span class="cm-number">30</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@container</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 358px;"></div><div class="CodeMirror-gutters" style="display: none; height: 358px;"></div></div></div></pre><p><span>1.检查内核优化正确计 1 分</span></p><h3><a name="题目-12排错glance-服务排错1-分" class="md-header-anchor"></a><span>【题目 12】排错：Glance 服务排错[1 分]</span></h3><p><span>使用赛项提供的 chinaskill-error1 镜像启动云主机，flavor 使用 4vcpu/12G 内存/100G 硬</span>
<span>盘。启动后存在错误的私有云平台，错误现象为查看不到 image 列表，试根据错误信息排查云平台错误，使云平台可以查询到 image 信息。完成后提交云主机节点的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">如果不会做，提供取巧思路~~</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">国赛是用错误镜像来创建一个云主机进行排错，可以试着修改正常经常的标签，然后创建正常的</span><span class="cm-identifier">glance</span><span class="cm-error">服务</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">可以得到部分分</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 90px;"></div><div class="CodeMirror-gutters" style="display: none; height: 90px;"></div></div></div></pre><p><span>1.检查错误镜像glance 服务启动正确计 1 分</span></p><h3><a name="题目-13排错数据库排错15-分" class="md-header-anchor"></a><span>【题目 13】排错：数据库排错[1.5 分]</span></h3><p><span>使用赛项提供的排错镜像 chinaskill-error2 创建一台云主机（云主机的登录用户名为 root， 密码为 000000），该云主机中存在错误的数据库服务，错误现象为数据库服务无法启动。请将数据库服务修复并启动，将数据库的密码修改为 chinaskill123。修复完成后提交该云主机的用户名、密码和 IP 地址到答题框。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">使用一个正常的</span><span class="cm-identifier">mysql</span><span class="cm-error">数据库，创建一个符合要求的用户和密码，可以得到</span><span class="cm-number">0.5</span><span class="cm-error">分~判分系统是先连接数据库</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">再进去查询</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><span>1.检查错误镜像数据库服务启动正确计 1.5 分</span></p><h2><a name="任务-3私有云运维开发10-分" class="md-header-anchor"></a><span>【任务 3】私有云运维开发[10 分]</span></h2><h3><a name="题目-1ansible-服务部署部署-mariadb-集群2-分" class="md-header-anchor"></a><span>【题目 1】Ansible 服务部署：部署 MariaDB 集群[2 分]</span></h3><p><span>使用OpenStack 私有云平台，创建 4 台系统为centos7.9 的云主机，其中一台作为 Ansible 的母机并命名为 ansible，另外三台云主机命名为 node1、node2、node3；使用这一台母机， 编写 Ansible 脚本（在/root 目录下创建 example 目录作为 Ansible 工作目录，部署的入口文件命名为 cscc_install.yaml ） ， 对其他三台云主机进行安装高可用数据库集群</span>
<span>（MariaDB_Galera_cluster，数据库密码设置为 123456）的操作（所需的安装包在 HTTP 服务中）。完成后提交 Ansible 节点的用户名、密码和 IP 地址到答题框。（考试系统会连接到你的Ansible 节点，去执行 Ansible 脚本，请准备好 Ansible 运行环境，以便考试系统访问）</span></p><p><span>（1）环境准备</span></p><figure><table><thead><tr><th><span>节点</span></th><th><span>地址</span></th></tr></thead><tbody><tr><td><span>ansible</span></td><td><span>192.168.100.10</span></td></tr><tr><td><span>node1</span></td><td><span>192.168.100.20</span></td></tr><tr><td><span>node2</span></td><td><span>192.168.100.30</span></td></tr><tr><td><span>node3</span></td><td><span>192.168.100.40</span></td></tr></tbody></table></figure><p><span>（2）环境配置</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@localhost</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># hostnamectl set-hostname ansible</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@localhost</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># su</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@localhost</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># hostnamectl set-hostname node1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@localhost</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># su</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@node1</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@localhost</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># hostnamectl set-hostname node2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@localhost</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># su</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@node2</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@localhost</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># hostnamectl set-hostname node3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@localhost</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># su</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@node3</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 将ip地址映射成主机名(其他3台节点配置一样,此处省略)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi /etc/hosts</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">192.168.100.10</span> <span class="cm-identifier">ansible</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">192.168.100.20</span> <span class="cm-identifier">node1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">192.168.100.30</span> <span class="cm-identifier">node2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">192.168.100.40</span> <span class="cm-identifier">node3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">127.0.0.1</span> &nbsp; <span class="cm-identifier">localhost</span> <span class="cm-identifier">localhost</span><span class="cm-punctuation">.</span><span class="cm-identifier">localdomain</span> <span class="cm-identifier">localhost4</span> <span class="cm-identifier">localhost4</span><span class="cm-punctuation">.</span><span class="cm-identifier">localdomain4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">::</span><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">localhost</span> <span class="cm-identifier">localhost</span><span class="cm-punctuation">.</span><span class="cm-identifier">localdomain</span> <span class="cm-identifier">localhost6</span> <span class="cm-identifier">localhost6</span><span class="cm-punctuation">.</span><span class="cm-identifier">localdomain6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#关闭防火墙和selinux(其他3台节点配置一样,此处省略)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># systemctl stop firewalld &amp;&amp; setenforce 0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ansible节点部署ansible服务(通过CRT远程工具将提供的ansible软件包上传到ansible节点)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># tar -xvf ansible.tar.gz</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#删除centos自带的源并配置本地yum源安装ansible服务</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># mv /etc/yum.repos.d/* /home/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi /etc/yum.repos.d/local.repo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">ansible</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">ansible</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">baseurl</span><span class="cm-operator">=</span><span class="cm-identifier">file</span><span class="cm-operator">:///</span><span class="cm-identifier">root</span><span class="cm-operator">/</span><span class="cm-identifier">ansible</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">gpgcheck</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">enabled</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># yum install ansible -y</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#检查是否安装完成</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ansible --version</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ansible</span> <span class="cm-number">2.9.10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">config</span> <span class="cm-identifier">file</span> <span class="cm-operator">=</span> <span class="cm-operator">/</span><span class="cm-identifier">etc</span><span class="cm-operator">/</span><span class="cm-identifier">ansible</span><span class="cm-operator">/</span><span class="cm-identifier">ansible</span><span class="cm-punctuation">.</span><span class="cm-identifier">cfg</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">configured</span> <span class="cm-identifier">module</span> <span class="cm-identifier">search</span> <span class="cm-identifier">path</span> <span class="cm-operator">=</span> <span class="cm-punctuation">[</span><span class="cm-identifier">u</span><span class="cm-string">'/root/.ansible/plugins/modules'</span><span class="cm-punctuation">,</span> <span class="cm-identifier">u</span><span class="cm-string">'/usr/share/ansible/plugins/modules'</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">ansible</span> <span class="cm-identifier">python</span> <span class="cm-identifier">module</span> <span class="cm-identifier">location</span> <span class="cm-operator">=</span> <span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">lib</span><span class="cm-operator">/</span><span class="cm-identifier">python2</span><span class="cm-number">.7</span><span class="cm-operator">/</span><span class="cm-identifier">site-packages</span><span class="cm-operator">/</span><span class="cm-identifier">ansible</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">executable</span> <span class="cm-identifier">location</span> <span class="cm-operator">=</span> <span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ansible</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">python</span> <span class="cm-identifier">version</span> <span class="cm-operator">=</span> <span class="cm-number">2.7.5</span> <span class="cm-punctuation">(</span><span class="cm-keyword">default</span><span class="cm-punctuation">,</span> <span class="cm-identifier">Oct</span> <span class="cm-number">14</span> <span class="cm-number">2020</span><span class="cm-punctuation">,</span> <span class="cm-number">14</span><span class="cm-operator">:</span><span class="cm-number">45</span><span class="cm-operator">:</span><span class="cm-number">30</span><span class="cm-punctuation">)</span> <span class="cm-punctuation">[</span><span class="cm-identifier">GCC</span> <span class="cm-number">4.8.5</span> <span class="cm-number">20150623</span> <span class="cm-punctuation">(</span><span class="cm-identifier">Red</span> <span class="cm-identifier">Hat</span> <span class="cm-number">4.8.5</span><span class="cm-operator">-</span><span class="cm-number">44</span><span class="cm-punctuation">)]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1165px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1165px;"></div></div></div></pre><p><span>（3）设置免密</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ssh-keygen</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Generating</span> <span class="cm-identifier">public</span><span class="cm-operator">/</span><span class="cm-identifier">private</span> <span class="cm-identifier">rsa</span> <span class="cm-identifier">key</span> <span class="cm-identifier">pair</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Enter</span> <span class="cm-identifier">file</span> <span class="cm-keyword">in</span> <span class="cm-identifier">which</span> <span class="cm-identifier">to</span> <span class="cm-identifier">save</span> <span class="cm-identifier">the</span> <span class="cm-identifier">key</span> <span class="cm-punctuation">(</span><span class="cm-operator">/</span><span class="cm-identifier">root</span><span class="cm-operator">/</span><span class="cm-punctuation">.</span><span class="cm-identifier">ssh</span><span class="cm-operator">/</span><span class="cm-identifier">id_rsa</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Enter</span> <span class="cm-identifier">passphrase</span> <span class="cm-punctuation">(</span><span class="cm-identifier">empty</span> <span class="cm-keyword">for</span> <span class="cm-identifier">no</span> <span class="cm-identifier">passphrase</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Enter</span> <span class="cm-identifier">same</span> <span class="cm-identifier">passphrase</span> <span class="cm-identifier">again</span><span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Your</span> <span class="cm-identifier">identification</span> <span class="cm-identifier">has</span> <span class="cm-identifier">been</span> <span class="cm-identifier">saved</span> <span class="cm-keyword">in</span> <span class="cm-operator">/</span><span class="cm-identifier">root</span><span class="cm-operator">/</span><span class="cm-punctuation">.</span><span class="cm-identifier">ssh</span><span class="cm-operator">/</span><span class="cm-identifier">id_rsa</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Your</span> <span class="cm-identifier">public</span> <span class="cm-identifier">key</span> <span class="cm-identifier">has</span> <span class="cm-identifier">been</span> <span class="cm-identifier">saved</span> <span class="cm-keyword">in</span> <span class="cm-operator">/</span><span class="cm-identifier">root</span><span class="cm-operator">/</span><span class="cm-punctuation">.</span><span class="cm-identifier">ssh</span><span class="cm-operator">/</span><span class="cm-identifier">id_rsa</span><span class="cm-punctuation">.</span><span class="cm-identifier">pub</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">The</span> <span class="cm-identifier">key</span> <span class="cm-identifier">fingerprint</span> <span class="cm-identifier">is</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">SHA256</span><span class="cm-operator">:</span><span class="cm-identifier">svV0oqhTRNGB</span><span class="cm-operator">/</span><span class="cm-identifier">tH37Xi49</span><span class="cm-operator">/</span><span class="cm-identifier">OUg</span><span class="cm-operator">+</span><span class="cm-identifier">AFu2XlxcKhsyXm</span><span class="cm-operator">+</span><span class="cm-identifier">wI</span> <span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">The</span> <span class="cm-identifier">key</span><span class="cm-error">'s randomart image is:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---</span><span class="cm-punctuation">[</span><span class="cm-identifier">RSA</span> <span class="cm-number">2048</span><span class="cm-punctuation">]</span><span class="cm-operator">----+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">.</span><span class="cm-operator">+..</span> &nbsp; &nbsp;<span class="cm-punctuation">.</span> &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">o</span> <span class="cm-punctuation">.</span> &nbsp; &nbsp;<span class="cm-identifier">o</span> <span class="cm-identifier">o</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-identifier">o</span> &nbsp; <span class="cm-punctuation">.</span> <span class="cm-punctuation">.</span><span class="cm-operator">=</span> <span class="cm-operator">+</span><span class="cm-punctuation">.</span><span class="cm-identifier">o</span><span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">o</span> <span class="cm-punctuation">.</span> <span class="cm-punctuation">.</span><span class="cm-identifier">o</span><span class="cm-operator">+=</span><span class="cm-identifier">o</span><span class="cm-operator">..|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-operator">..</span><span class="cm-punctuation">.</span><span class="cm-identifier">S</span><span class="cm-punctuation">.</span><span class="cm-identifier">o</span><span class="cm-operator">++=</span> <span class="cm-identifier">o</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">.</span><span class="cm-operator">=</span><span class="cm-punctuation">.</span><span class="cm-operator">+</span><span class="cm-identifier">Eo</span><span class="cm-operator">*</span><span class="cm-punctuation">.</span><span class="cm-identifier">o</span> <span class="cm-identifier">o</span><span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-punctuation">.</span><span class="cm-identifier">o</span> <span class="cm-punctuation">.</span> <span class="cm-punctuation">.</span><span class="cm-operator">+..</span> <span class="cm-operator">*</span><span class="cm-punctuation">.</span><span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp;<span class="cm-operator">..</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">..</span><span class="cm-identifier">oo</span><span class="cm-operator">=|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp;<span class="cm-operator">..</span> &nbsp; &nbsp; &nbsp; <span class="cm-punctuation">.</span><span class="cm-identifier">o</span><span class="cm-operator">+*|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+----</span><span class="cm-punctuation">[</span><span class="cm-identifier">SHA256</span><span class="cm-punctuation">]</span><span class="cm-operator">-----+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ssh-copy-id root@node1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-identifier">Source</span> <span class="cm-identifier">of</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">to</span> <span class="cm-identifier">be</span> <span class="cm-identifier">installed</span><span class="cm-operator">:</span> <span class="cm-string">"/root/.ssh/id_rsa.pub"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">The</span> <span class="cm-identifier">authenticity</span> <span class="cm-identifier">of</span> <span class="cm-identifier">host</span> <span class="cm-string">'node1 (192.168.100.20)'</span> <span class="cm-identifier">can</span><span class="cm-error">'t be established.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ECDSA</span> <span class="cm-identifier">key</span> <span class="cm-identifier">fingerprint</span> <span class="cm-identifier">is</span> <span class="cm-identifier">SHA256</span><span class="cm-operator">:</span><span class="cm-identifier">sGY4R7darwNovS7pGeQNm9FzQjanFFmnwJHO5PRo0RE</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ECDSA</span> <span class="cm-identifier">key</span> <span class="cm-identifier">fingerprint</span> <span class="cm-identifier">is</span> <span class="cm-identifier">MD5</span><span class="cm-operator">:</span><span class="cm-identifier">fa</span><span class="cm-operator">:</span><span class="cm-number">5d</span><span class="cm-operator">:</span><span class="cm-number">85</span><span class="cm-operator">:</span><span class="cm-identifier">af</span><span class="cm-operator">:</span><span class="cm-number">69</span><span class="cm-operator">:</span><span class="cm-number">0d</span><span class="cm-operator">:</span><span class="cm-number">63</span><span class="cm-operator">:</span><span class="cm-number">78</span><span class="cm-operator">:</span><span class="cm-builtin">ac</span><span class="cm-operator">:</span><span class="cm-number">4</span><span class="cm-identifier">e</span><span class="cm-operator">:</span><span class="cm-number">9</span><span class="cm-identifier">a</span><span class="cm-operator">:</span><span class="cm-number">5</span><span class="cm-identifier">b</span><span class="cm-operator">:</span><span class="cm-identifier">c1</span><span class="cm-operator">:</span><span class="cm-identifier">a6</span><span class="cm-operator">:</span><span class="cm-identifier">b2</span><span class="cm-operator">:</span><span class="cm-number">60</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Are</span> <span class="cm-identifier">you</span> <span class="cm-identifier">sure</span> <span class="cm-identifier">you</span> <span class="cm-identifier">want</span> <span class="cm-identifier">to</span> <span class="cm-keyword">continue</span> <span class="cm-identifier">connecting</span> <span class="cm-punctuation">(</span><span class="cm-identifier">yes</span><span class="cm-operator">/</span><span class="cm-identifier">no</span><span class="cm-punctuation">)</span><span class="cm-builtin">?</span> <span class="cm-identifier">yes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-identifier">attempting</span> <span class="cm-identifier">to</span> <span class="cm-identifier">log</span> <span class="cm-keyword">in</span> <span class="cm-identifier">with</span> <span class="cm-identifier">the</span> <span class="cm-identifier">new</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">),</span> <span class="cm-identifier">to</span> <span class="cm-keyword">filter</span> <span class="cm-identifier">out</span> <span class="cm-identifier">any</span> <span class="cm-identifier">that</span> <span class="cm-identifier">are</span> <span class="cm-identifier">already</span> <span class="cm-identifier">installed</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">remain</span> <span class="cm-identifier">to</span> <span class="cm-identifier">be</span> <span class="cm-identifier">installed</span> <span class="cm-operator">--</span> <span class="cm-keyword">if</span> <span class="cm-identifier">you</span> <span class="cm-identifier">are</span> <span class="cm-identifier">prompted</span> <span class="cm-identifier">now</span> <span class="cm-identifier">it</span> <span class="cm-identifier">is</span> <span class="cm-identifier">to</span> <span class="cm-identifier">install</span> <span class="cm-identifier">the</span> <span class="cm-identifier">new</span> <span class="cm-identifier">keys</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">root</span><span class="cm-variable-2">@node1</span><span class="cm-error">'s password: </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Number</span> <span class="cm-identifier">of</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">added</span><span class="cm-operator">:</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Now</span> <span class="cm-keyword">try</span> <span class="cm-identifier">logging</span> <span class="cm-identifier">into</span> <span class="cm-identifier">the</span> <span class="cm-identifier">machine</span><span class="cm-punctuation">,</span> <span class="cm-identifier">with</span><span class="cm-operator">:</span> &nbsp; <span class="cm-string">"ssh 'root@node1'"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">and</span> <span class="cm-identifier">check</span> <span class="cm-identifier">to</span> <span class="cm-identifier">make</span> <span class="cm-identifier">sure</span> <span class="cm-identifier">that</span> <span class="cm-identifier">only</span> <span class="cm-identifier">the</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">you</span> <span class="cm-identifier">wanted</span> <span class="cm-identifier">were</span> <span class="cm-identifier">added</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ssh-copy-id root@node2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-identifier">Source</span> <span class="cm-identifier">of</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">to</span> <span class="cm-identifier">be</span> <span class="cm-identifier">installed</span><span class="cm-operator">:</span> <span class="cm-string">"/root/.ssh/id_rsa.pub"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">The</span> <span class="cm-identifier">authenticity</span> <span class="cm-identifier">of</span> <span class="cm-identifier">host</span> <span class="cm-string">'node2 (192.168.100.30)'</span> <span class="cm-identifier">can</span><span class="cm-error">'t be established.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ECDSA</span> <span class="cm-identifier">key</span> <span class="cm-identifier">fingerprint</span> <span class="cm-identifier">is</span> <span class="cm-identifier">SHA256</span><span class="cm-operator">:</span><span class="cm-identifier">sGY4R7darwNovS7pGeQNm9FzQjanFFmnwJHO5PRo0RE</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ECDSA</span> <span class="cm-identifier">key</span> <span class="cm-identifier">fingerprint</span> <span class="cm-identifier">is</span> <span class="cm-identifier">MD5</span><span class="cm-operator">:</span><span class="cm-identifier">fa</span><span class="cm-operator">:</span><span class="cm-number">5d</span><span class="cm-operator">:</span><span class="cm-number">85</span><span class="cm-operator">:</span><span class="cm-identifier">af</span><span class="cm-operator">:</span><span class="cm-number">69</span><span class="cm-operator">:</span><span class="cm-number">0d</span><span class="cm-operator">:</span><span class="cm-number">63</span><span class="cm-operator">:</span><span class="cm-number">78</span><span class="cm-operator">:</span><span class="cm-builtin">ac</span><span class="cm-operator">:</span><span class="cm-number">4</span><span class="cm-identifier">e</span><span class="cm-operator">:</span><span class="cm-number">9</span><span class="cm-identifier">a</span><span class="cm-operator">:</span><span class="cm-number">5</span><span class="cm-identifier">b</span><span class="cm-operator">:</span><span class="cm-identifier">c1</span><span class="cm-operator">:</span><span class="cm-identifier">a6</span><span class="cm-operator">:</span><span class="cm-identifier">b2</span><span class="cm-operator">:</span><span class="cm-number">60</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Are</span> <span class="cm-identifier">you</span> <span class="cm-identifier">sure</span> <span class="cm-identifier">you</span> <span class="cm-identifier">want</span> <span class="cm-identifier">to</span> <span class="cm-keyword">continue</span> <span class="cm-identifier">connecting</span> <span class="cm-punctuation">(</span><span class="cm-identifier">yes</span><span class="cm-operator">/</span><span class="cm-identifier">no</span><span class="cm-punctuation">)</span><span class="cm-builtin">?</span> <span class="cm-identifier">yes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-identifier">attempting</span> <span class="cm-identifier">to</span> <span class="cm-identifier">log</span> <span class="cm-keyword">in</span> <span class="cm-identifier">with</span> <span class="cm-identifier">the</span> <span class="cm-identifier">new</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">),</span> <span class="cm-identifier">to</span> <span class="cm-keyword">filter</span> <span class="cm-identifier">out</span> <span class="cm-identifier">any</span> <span class="cm-identifier">that</span> <span class="cm-identifier">are</span> <span class="cm-identifier">already</span> <span class="cm-identifier">installed</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">remain</span> <span class="cm-identifier">to</span> <span class="cm-identifier">be</span> <span class="cm-identifier">installed</span> <span class="cm-operator">--</span> <span class="cm-keyword">if</span> <span class="cm-identifier">you</span> <span class="cm-identifier">are</span> <span class="cm-identifier">prompted</span> <span class="cm-identifier">now</span> <span class="cm-identifier">it</span> <span class="cm-identifier">is</span> <span class="cm-identifier">to</span> <span class="cm-identifier">install</span> <span class="cm-identifier">the</span> <span class="cm-identifier">new</span> <span class="cm-identifier">keys</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">root</span><span class="cm-variable-2">@node2</span><span class="cm-error">'s password: </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Number</span> <span class="cm-identifier">of</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">added</span><span class="cm-operator">:</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Now</span> <span class="cm-keyword">try</span> <span class="cm-identifier">logging</span> <span class="cm-identifier">into</span> <span class="cm-identifier">the</span> <span class="cm-identifier">machine</span><span class="cm-punctuation">,</span> <span class="cm-identifier">with</span><span class="cm-operator">:</span> &nbsp; <span class="cm-string">"ssh 'root@node2'"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">and</span> <span class="cm-identifier">check</span> <span class="cm-identifier">to</span> <span class="cm-identifier">make</span> <span class="cm-identifier">sure</span> <span class="cm-identifier">that</span> <span class="cm-identifier">only</span> <span class="cm-identifier">the</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">you</span> <span class="cm-identifier">wanted</span> <span class="cm-identifier">were</span> <span class="cm-identifier">added</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># ssh-copy-id root@node3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-identifier">Source</span> <span class="cm-identifier">of</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">to</span> <span class="cm-identifier">be</span> <span class="cm-identifier">installed</span><span class="cm-operator">:</span> <span class="cm-string">"/root/.ssh/id_rsa.pub"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">The</span> <span class="cm-identifier">authenticity</span> <span class="cm-identifier">of</span> <span class="cm-identifier">host</span> <span class="cm-string">'node3 (192.168.100.40)'</span> <span class="cm-identifier">can</span><span class="cm-error">'t be established.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ECDSA</span> <span class="cm-identifier">key</span> <span class="cm-identifier">fingerprint</span> <span class="cm-identifier">is</span> <span class="cm-identifier">SHA256</span><span class="cm-operator">:</span><span class="cm-identifier">sGY4R7darwNovS7pGeQNm9FzQjanFFmnwJHO5PRo0RE</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ECDSA</span> <span class="cm-identifier">key</span> <span class="cm-identifier">fingerprint</span> <span class="cm-identifier">is</span> <span class="cm-identifier">MD5</span><span class="cm-operator">:</span><span class="cm-identifier">fa</span><span class="cm-operator">:</span><span class="cm-number">5d</span><span class="cm-operator">:</span><span class="cm-number">85</span><span class="cm-operator">:</span><span class="cm-identifier">af</span><span class="cm-operator">:</span><span class="cm-number">69</span><span class="cm-operator">:</span><span class="cm-number">0d</span><span class="cm-operator">:</span><span class="cm-number">63</span><span class="cm-operator">:</span><span class="cm-number">78</span><span class="cm-operator">:</span><span class="cm-builtin">ac</span><span class="cm-operator">:</span><span class="cm-number">4</span><span class="cm-identifier">e</span><span class="cm-operator">:</span><span class="cm-number">9</span><span class="cm-identifier">a</span><span class="cm-operator">:</span><span class="cm-number">5</span><span class="cm-identifier">b</span><span class="cm-operator">:</span><span class="cm-identifier">c1</span><span class="cm-operator">:</span><span class="cm-identifier">a6</span><span class="cm-operator">:</span><span class="cm-identifier">b2</span><span class="cm-operator">:</span><span class="cm-number">60</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Are</span> <span class="cm-identifier">you</span> <span class="cm-identifier">sure</span> <span class="cm-identifier">you</span> <span class="cm-identifier">want</span> <span class="cm-identifier">to</span> <span class="cm-keyword">continue</span> <span class="cm-identifier">connecting</span> <span class="cm-punctuation">(</span><span class="cm-identifier">yes</span><span class="cm-operator">/</span><span class="cm-identifier">no</span><span class="cm-punctuation">)</span><span class="cm-builtin">?</span> <span class="cm-identifier">yes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-identifier">attempting</span> <span class="cm-identifier">to</span> <span class="cm-identifier">log</span> <span class="cm-keyword">in</span> <span class="cm-identifier">with</span> <span class="cm-identifier">the</span> <span class="cm-identifier">new</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">),</span> <span class="cm-identifier">to</span> <span class="cm-keyword">filter</span> <span class="cm-identifier">out</span> <span class="cm-identifier">any</span> <span class="cm-identifier">that</span> <span class="cm-identifier">are</span> <span class="cm-identifier">already</span> <span class="cm-identifier">installed</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">bin</span><span class="cm-operator">/</span><span class="cm-identifier">ssh-copy-id</span><span class="cm-operator">:</span> <span class="cm-identifier">INFO</span><span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">remain</span> <span class="cm-identifier">to</span> <span class="cm-identifier">be</span> <span class="cm-identifier">installed</span> <span class="cm-operator">--</span> <span class="cm-keyword">if</span> <span class="cm-identifier">you</span> <span class="cm-identifier">are</span> <span class="cm-identifier">prompted</span> <span class="cm-identifier">now</span> <span class="cm-identifier">it</span> <span class="cm-identifier">is</span> <span class="cm-identifier">to</span> <span class="cm-identifier">install</span> <span class="cm-identifier">the</span> <span class="cm-identifier">new</span> <span class="cm-identifier">keys</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">root</span><span class="cm-variable-2">@node3</span><span class="cm-error">'s password: </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Number</span> <span class="cm-identifier">of</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">added</span><span class="cm-operator">:</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Now</span> <span class="cm-keyword">try</span> <span class="cm-identifier">logging</span> <span class="cm-identifier">into</span> <span class="cm-identifier">the</span> <span class="cm-identifier">machine</span><span class="cm-punctuation">,</span> <span class="cm-identifier">with</span><span class="cm-operator">:</span> &nbsp; <span class="cm-string">"ssh 'root@node3'"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">and</span> <span class="cm-identifier">check</span> <span class="cm-identifier">to</span> <span class="cm-identifier">make</span> <span class="cm-identifier">sure</span> <span class="cm-identifier">that</span> <span class="cm-identifier">only</span> <span class="cm-identifier">the</span> <span class="cm-identifier">key</span><span class="cm-punctuation">(</span><span class="cm-identifier">s</span><span class="cm-punctuation">)</span> <span class="cm-identifier">you</span> <span class="cm-identifier">wanted</span> <span class="cm-identifier">were</span> <span class="cm-identifier">added</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1702px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1702px;"></div></div></div></pre><p><span>（4）修改ansible文件配置组</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi /etc/ansible/hosts </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">node</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#解压mariadb.tar软件包将mariadb-repo源拷贝到node1,node2,node3节点的/root目录下</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># tar -xvf mariadb.tar </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">mariadb</span><span class="cm-operator">/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">mariadb</span><span class="cm-operator">/</span><span class="cm-identifier">mariadb-repo</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span><span class="cm-punctuation">.</span><span class="cm-identifier">gz</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">mariadb</span><span class="cm-operator">/</span><span class="cm-identifier">Mycat-server-1</span><span class="cm-number">.6</span><span class="cm-operator">-</span><span class="cm-identifier">RELEASE-20161028204710-linux</span><span class="cm-punctuation">.</span><span class="cm-identifier">tar</span><span class="cm-punctuation">.</span><span class="cm-identifier">gz</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">mariadb</span><span class="cm-operator">/</span><span class="cm-identifier">schema</span><span class="cm-punctuation">.</span><span class="cm-identifier">xml</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># tar -xvf mariadb/mariadb-repo.tar.gz </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># scp -r mariadb-repo/ root@node1:/root</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># scp -r mariadb-repo/ root@node2:/root</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># scp -r mariadb-repo/ root@node3:/root</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 582px;"></div><div class="CodeMirror-gutters" style="display: none; height: 582px;"></div></div></div></pre><p><span>（5）创建ansible执行的工作目录编写执行playbook剧本的相关文件</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># mkdir cscc_galera</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cd cscc_galera/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建local.repo文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-identifier">cscc_galera</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi local.repo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">centos</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">centos</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">baseurl</span><span class="cm-operator">=</span><span class="cm-identifier">file</span><span class="cm-operator">:///</span><span class="cm-identifier">opt</span><span class="cm-operator">/</span><span class="cm-identifier">centos</span> &nbsp; <span class="cm-comment">#自行挂载centos7.9镜像到/opt目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">gpgcheck</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">enabled</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">mariadb</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">mariadb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">baseurl</span><span class="cm-operator">=</span><span class="cm-identifier">file</span><span class="cm-operator">:///</span><span class="cm-identifier">root</span><span class="cm-operator">/</span><span class="cm-identifier">mariadb-repo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">gpgcheck</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">enabled</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建server.cnf文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-identifier">cscc_galera</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi server.cnf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">server</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">mysqld</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">galera</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">wsrep_on</span><span class="cm-operator">=</span><span class="cm-identifier">ON</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">wsrep_provider</span><span class="cm-operator">=/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">lib64</span><span class="cm-operator">/</span><span class="cm-identifier">galera</span><span class="cm-operator">/</span><span class="cm-identifier">libgalera_smm</span><span class="cm-punctuation">.</span><span class="cm-identifier">so</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">wsrep_cluster_address</span><span class="cm-operator">=</span><span class="cm-identifier">gcomm</span><span class="cm-operator">://</span><span class="cm-identifier">node1</span><span class="cm-punctuation">,</span><span class="cm-identifier">node2</span><span class="cm-punctuation">,</span><span class="cm-identifier">node3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">binlog_format</span><span class="cm-operator">=</span><span class="cm-identifier">row</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">default_storage_engine</span><span class="cm-operator">=</span><span class="cm-identifier">InnoDB</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">innodb_autoinc_lock_mode</span><span class="cm-operator">=</span><span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">bind-address</span><span class="cm-operator">=</span><span class="cm-number">0.0.0.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">wsrep_slave_threads</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">innodb_flush_log_at_trx_commit</span><span class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">embedded</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">mariadb</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">mariadb-10</span><span class="cm-number">.3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#创建playbook剧本文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-identifier">cscc_galera</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi install_galera.yaml</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-identifier">hosts</span><span class="cm-operator">:</span> <span class="cm-identifier">all</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">remote_user</span><span class="cm-operator">:</span> <span class="cm-identifier">root</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">tasks</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-builtin">rm</span> <span class="cm-identifier">repo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">shell</span><span class="cm-operator">:</span> <span class="cm-builtin">rm</span> <span class="cm-operator">-</span><span class="cm-identifier">rf</span> <span class="cm-operator">/</span><span class="cm-identifier">etc</span><span class="cm-operator">/</span><span class="cm-identifier">yum</span><span class="cm-punctuation">.</span><span class="cm-identifier">repos</span><span class="cm-punctuation">.</span><span class="cm-identifier">d</span><span class="cm-operator">/*</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-builtin">copy</span> <span class="cm-identifier">repo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">copy</span><span class="cm-operator">:</span> <span class="cm-identifier">src</span><span class="cm-operator">=</span><span class="cm-identifier">local</span><span class="cm-punctuation">.</span><span class="cm-identifier">repo</span> <span class="cm-identifier">dest</span><span class="cm-operator">=/</span><span class="cm-identifier">etc</span><span class="cm-operator">/</span><span class="cm-identifier">yum</span><span class="cm-punctuation">.</span><span class="cm-identifier">repos</span><span class="cm-punctuation">.</span><span class="cm-identifier">d</span><span class="cm-operator">/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-identifier">install</span> <span class="cm-identifier">mariadb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">yum</span><span class="cm-operator">:</span> <span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">mariadb-server</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-builtin">start</span> <span class="cm-identifier">mariadb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">service</span><span class="cm-operator">:</span> <span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">mariadb</span> <span class="cm-identifier">state</span><span class="cm-operator">=</span><span class="cm-identifier">started</span> <span class="cm-identifier">enabled</span><span class="cm-operator">=</span><span class="cm-identifier">yes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-identifier">init_mysql</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">shell</span><span class="cm-operator">:</span> <span class="cm-identifier">mysqladmin</span> <span class="cm-operator">-</span><span class="cm-identifier">uroot</span> <span class="cm-identifier">password</span> <span class="cm-number">123456</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-identifier">stop</span> <span class="cm-identifier">mariadb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">service</span><span class="cm-operator">:</span> <span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">mariadb</span> <span class="cm-identifier">state</span><span class="cm-operator">=</span><span class="cm-identifier">stopped</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-builtin">copy</span> <span class="cm-identifier">server</span><span class="cm-punctuation">.</span><span class="cm-identifier">cnf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">copy</span><span class="cm-operator">:</span> <span class="cm-identifier">src</span><span class="cm-operator">=</span><span class="cm-identifier">server</span><span class="cm-punctuation">.</span><span class="cm-identifier">cnf</span> <span class="cm-identifier">dest</span><span class="cm-operator">=/</span><span class="cm-identifier">etc</span><span class="cm-operator">/</span><span class="cm-identifier">my</span><span class="cm-punctuation">.</span><span class="cm-identifier">cnf</span><span class="cm-punctuation">.</span><span class="cm-identifier">d</span><span class="cm-operator">/</span><span class="cm-identifier">server</span><span class="cm-punctuation">.</span><span class="cm-identifier">cnf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-identifier">hosts</span><span class="cm-operator">:</span> <span class="cm-identifier">node1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">remote_user</span><span class="cm-operator">:</span> <span class="cm-identifier">root</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">tasks</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-builtin">start</span> <span class="cm-identifier">mariadb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">shell</span><span class="cm-operator">:</span> <span class="cm-operator">/</span><span class="cm-identifier">usr</span><span class="cm-operator">/</span><span class="cm-identifier">sbin</span><span class="cm-operator">/</span><span class="cm-identifier">mysqld</span> <span class="cm-operator">--</span><span class="cm-identifier">wsrep-new-cluster</span> <span class="cm-operator">-</span><span class="cm-identifier">u</span> <span class="cm-identifier">root</span> <span class="cm-operator">&amp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-identifier">hosts</span><span class="cm-operator">:</span> <span class="cm-identifier">node2</span><span class="cm-punctuation">,</span><span class="cm-identifier">node3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">remote_user</span><span class="cm-operator">:</span> <span class="cm-identifier">root</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">tasks</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">-</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-builtin">start</span> <span class="cm-identifier">mariadb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">shell</span><span class="cm-operator">:</span> <span class="cm-identifier">systemctl</span> <span class="cm-builtin">start</span> <span class="cm-identifier">mariadb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1478px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1478px;"></div></div></div></pre><p><span>（6）执行入口文件</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-identifier">cscc_galera</span><span class="cm-punctuation">]</span><span class="cm-comment"># ansible-playbook install_galera.yaml </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">WARNING</span><span class="cm-punctuation">]</span><span class="cm-operator">:</span> <span class="cm-identifier">Found</span> <span class="cm-identifier">both</span> <span class="cm-builtin">group</span> <span class="cm-identifier">and</span> <span class="cm-identifier">host</span> <span class="cm-identifier">with</span> <span class="cm-identifier">same</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-identifier">node1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">WARNING</span><span class="cm-punctuation">]</span><span class="cm-operator">:</span> <span class="cm-identifier">Found</span> <span class="cm-identifier">both</span> <span class="cm-builtin">group</span> <span class="cm-identifier">and</span> <span class="cm-identifier">host</span> <span class="cm-identifier">with</span> <span class="cm-identifier">same</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-identifier">node3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">WARNING</span><span class="cm-punctuation">]</span><span class="cm-operator">:</span> <span class="cm-identifier">Found</span> <span class="cm-identifier">both</span> <span class="cm-builtin">group</span> <span class="cm-identifier">and</span> <span class="cm-identifier">host</span> <span class="cm-identifier">with</span> <span class="cm-identifier">same</span> <span class="cm-identifier">name</span><span class="cm-operator">:</span> <span class="cm-identifier">node2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PLAY</span> <span class="cm-punctuation">[</span><span class="cm-identifier">all</span><span class="cm-punctuation">]</span> <span class="cm-operator">*******************************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-identifier">Gathering</span> <span class="cm-identifier">Facts</span><span class="cm-punctuation">]</span> <span class="cm-operator">*******************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ok</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ok</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ok</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-builtin">rm</span> <span class="cm-identifier">repo</span><span class="cm-punctuation">]</span> <span class="cm-operator">***************************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">WARNING</span><span class="cm-punctuation">]</span><span class="cm-operator">:</span> <span class="cm-identifier">Consider</span> <span class="cm-identifier">using</span> <span class="cm-identifier">the</span> <span class="cm-identifier">file</span> <span class="cm-identifier">module</span> <span class="cm-identifier">with</span> <span class="cm-identifier">state</span><span class="cm-operator">=</span><span class="cm-identifier">absent</span> <span class="cm-identifier">rather</span> <span class="cm-identifier">than</span> <span class="cm-identifier">running</span> <span class="cm-string">'rm'</span><span class="cm-punctuation">.</span> &nbsp;<span class="cm-keyword">If</span> <span class="cm-identifier">you</span> <span class="cm-identifier">need</span> <span class="cm-identifier">to</span> <span class="cm-identifier">use</span> <span class="cm-identifier">command</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">because</span> <span class="cm-identifier">file</span> <span class="cm-identifier">is</span> <span class="cm-identifier">insufficient</span> <span class="cm-identifier">you</span> <span class="cm-identifier">can</span> <span class="cm-identifier">add</span> <span class="cm-string">'warn: false'</span> <span class="cm-identifier">to</span> <span class="cm-identifier">this</span> <span class="cm-identifier">command</span> <span class="cm-identifier">task</span> <span class="cm-identifier">or</span> <span class="cm-builtin">set</span> <span class="cm-string">'command_warnings=False'</span> <span class="cm-keyword">in</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ansible</span><span class="cm-punctuation">.</span><span class="cm-identifier">cfg</span> <span class="cm-identifier">to</span> <span class="cm-identifier">get</span> <span class="cm-identifier">rid</span> <span class="cm-identifier">of</span> <span class="cm-identifier">this</span> <span class="cm-identifier">message</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-builtin">copy</span> <span class="cm-identifier">repo</span><span class="cm-punctuation">]</span> <span class="cm-operator">*************************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-identifier">install</span> <span class="cm-identifier">mariadb</span><span class="cm-punctuation">]</span> <span class="cm-operator">*******************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-builtin">start</span> <span class="cm-identifier">mariadb</span><span class="cm-punctuation">]</span> <span class="cm-operator">*********************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-identifier">init_mysql</span><span class="cm-punctuation">]</span> <span class="cm-operator">************************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-identifier">stop</span> <span class="cm-identifier">mariadb</span><span class="cm-punctuation">]</span> <span class="cm-operator">**********************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-builtin">copy</span> <span class="cm-identifier">server</span><span class="cm-punctuation">.</span><span class="cm-identifier">cnf</span><span class="cm-punctuation">]</span> <span class="cm-operator">**********************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PLAY</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span> <span class="cm-operator">*****************************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-identifier">Gathering</span> <span class="cm-identifier">Facts</span><span class="cm-punctuation">]</span> <span class="cm-operator">*******************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ok</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-builtin">start</span> <span class="cm-identifier">mariadb</span><span class="cm-punctuation">]</span> <span class="cm-operator">*********************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node1</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PLAY</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">,</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span> <span class="cm-operator">***********************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-identifier">Gathering</span> <span class="cm-identifier">Facts</span><span class="cm-punctuation">]</span> <span class="cm-operator">*******************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ok</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">ok</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">TASK</span> <span class="cm-punctuation">[</span><span class="cm-builtin">start</span> <span class="cm-identifier">mariadb</span><span class="cm-punctuation">]</span> <span class="cm-operator">*********************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node2</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">changed</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span><span class="cm-identifier">node3</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">PLAY</span> <span class="cm-identifier">RECAP</span> <span class="cm-operator">*******************************************************************************************************</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span> <span class="cm-identifier">ok</span><span class="cm-operator">=</span><span class="cm-number">9</span> &nbsp; &nbsp;<span class="cm-identifier">changed</span><span class="cm-operator">=</span><span class="cm-number">7</span> &nbsp; &nbsp;<span class="cm-identifier">unreachable</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">failed</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">skipped</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">rescued</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">ignored</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span> <span class="cm-identifier">ok</span><span class="cm-operator">=</span><span class="cm-number">9</span> &nbsp; &nbsp;<span class="cm-identifier">changed</span><span class="cm-operator">=</span><span class="cm-number">7</span> &nbsp; &nbsp;<span class="cm-identifier">unreachable</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">failed</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">skipped</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">rescued</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">ignored</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">node3</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span> <span class="cm-identifier">ok</span><span class="cm-operator">=</span><span class="cm-number">9</span> &nbsp; &nbsp;<span class="cm-identifier">changed</span><span class="cm-operator">=</span><span class="cm-number">7</span> &nbsp; &nbsp;<span class="cm-identifier">unreachable</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">failed</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">skipped</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">rescued</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-identifier">ignored</span><span class="cm-operator">=</span><span class="cm-number">0</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-identifier">cscc_galera</span><span class="cm-punctuation">]</span><span class="cm-comment"># </span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2128px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2128px;"></div></div></div></pre><p><span>（7）验证,检查wsrep_cluster_size的值是否为3/wsrep_ready的状态是否为ON</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@ansible</span> <span class="cm-identifier">cscc_galera</span><span class="cm-punctuation">]</span><span class="cm-comment"># ssh node1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Last</span> <span class="cm-identifier">login</span><span class="cm-operator">:</span> <span class="cm-identifier">Fri</span> <span class="cm-identifier">Aug</span> <span class="cm-number">26</span> <span class="cm-number">05</span><span class="cm-operator">:</span><span class="cm-number">01</span><span class="cm-operator">:</span><span class="cm-number">52</span> <span class="cm-number">2022</span> <span class="cm-keyword">from</span> <span class="cm-number">192.168.100.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@node1</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># mysql -uroot -p123456</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Welcome</span> <span class="cm-identifier">to</span> <span class="cm-identifier">the</span> <span class="cm-identifier">MariaDB</span> <span class="cm-identifier">monitor</span><span class="cm-punctuation">.</span> &nbsp;<span class="cm-identifier">Commands</span> <span class="cm-keyword">end</span> <span class="cm-identifier">with</span> <span class="cm-punctuation">;</span> <span class="cm-identifier">or</span> <span class="cm-error">\</span><span class="cm-identifier">g</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Your</span> <span class="cm-identifier">MariaDB</span> <span class="cm-identifier">connection</span> <span class="cm-identifier">id</span> <span class="cm-identifier">is</span> <span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Server</span> <span class="cm-identifier">version</span><span class="cm-operator">:</span> <span class="cm-number">10.3.23</span><span class="cm-operator">-</span><span class="cm-identifier">MariaDB</span> <span class="cm-identifier">MariaDB</span> <span class="cm-identifier">Server</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Copyright</span> <span class="cm-punctuation">(</span><span class="cm-identifier">c</span><span class="cm-punctuation">)</span> <span class="cm-number">2000</span><span class="cm-punctuation">,</span> <span class="cm-number">2018</span><span class="cm-punctuation">,</span> <span class="cm-identifier">Oracle</span><span class="cm-punctuation">,</span> <span class="cm-identifier">MariaDB</span> <span class="cm-identifier">Corporation</span> <span class="cm-identifier">Ab</span> <span class="cm-identifier">and</span> <span class="cm-identifier">others</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">Type</span> <span class="cm-string">'help;'</span> <span class="cm-identifier">or</span> <span class="cm-string">'\h'</span> <span class="cm-keyword">for</span> <span class="cm-builtin">help</span><span class="cm-punctuation">.</span> <span class="cm-builtin">Type</span> <span class="cm-string">'\c'</span> <span class="cm-identifier">to</span> <span class="cm-builtin">clear</span> <span class="cm-identifier">the</span> <span class="cm-identifier">current</span> <span class="cm-identifier">input</span> <span class="cm-identifier">statement</span><span class="cm-punctuation">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">MariaDB</span> <span class="cm-punctuation">[(</span><span class="cm-identifier">none</span><span class="cm-punctuation">)]</span><span class="cm-operator">&gt;</span> <span class="cm-identifier">show</span> <span class="cm-identifier">status</span> <span class="cm-identifier">like</span> <span class="cm-string">'wsrep_cluster_size'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------+-------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Variable_name</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-identifier">Value</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------+-------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">wsrep_cluster_size</span> <span class="cm-operator">|</span> <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+--------------------+-------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-identifier">row</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span> <span class="cm-punctuation">(</span><span class="cm-number">0.001</span> <span class="cm-identifier">sec</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">MariaDB</span> <span class="cm-punctuation">[(</span><span class="cm-identifier">none</span><span class="cm-punctuation">)]</span><span class="cm-operator">&gt;</span> <span class="cm-identifier">show</span> <span class="cm-identifier">status</span> <span class="cm-identifier">like</span> <span class="cm-string">'wsrep_ready'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------+-------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">Variable_name</span> <span class="cm-operator">|</span> <span class="cm-identifier">Value</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------+-------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-identifier">wsrep_ready</span> &nbsp; <span class="cm-operator">|</span> <span class="cm-identifier">ON</span> &nbsp; &nbsp;<span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+---------------+-------+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-identifier">row</span> <span class="cm-keyword">in</span> <span class="cm-builtin">set</span> <span class="cm-punctuation">(</span><span class="cm-number">0.001</span> <span class="cm-identifier">sec</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">MariaDB</span> <span class="cm-punctuation">[(</span><span class="cm-identifier">none</span><span class="cm-punctuation">)]</span><span class="cm-operator">&gt;</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 627px;"></div><div class="CodeMirror-gutters" style="display: none; height: 627px;"></div></div></div></pre><p><span>1.执行yaml 文件正确计 0.5 分</span>
<span>2.检查数据库集群部署正确计 1 分</span>
<span>3.检查数据库集群数量为 3 正确计 0.5 分</span></p><h3><a name="题目-2ansible-服务部署部署elk-集群服务2-分" class="md-header-anchor"></a><span>【题目 2】Ansible 服务部署：部署ELK 集群服务[2 分]</span></h3><p><span>使用赛项提供的OpenStack 私有云平台，创建三台 CentOS7.9 系统的云主机分别命名为elk-1、elk-2 和elk-3，Ansible 主机可以使用上一题的环境。要求Ansible 节点编写剧本，执行 Ansible 剧本可以在这三个节点部署 ELK 集群服务（在/root 目录下创建 install_elk 目录作为 ansible 工作目录，部署的入口文件命名为 install_elk.yaml）。具体要求为三个节点均安装Elasticserach 服务并配置为 Elasticserach 集群；kibana 安装在第一个节点；Logstash 安装在第二个节点。（需要用到的软件包在 HTTP 服务下）完成后提交 ansible 节点的用户名、密码和 IP 地址到答题框。（考试系统会连接到 ansible 节点，执行 ansible 脚本，准备好环境， 以便考试系统访问）</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">参考学习地址</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">https</span><span class="cm-operator">://</span><span class="cm-identifier">www</span><span class="cm-punctuation">.</span><span class="cm-identifier">likecs</span><span class="cm-punctuation">.</span><span class="cm-identifier">com</span><span class="cm-operator">/</span><span class="cm-identifier">show-307196346</span><span class="cm-punctuation">.</span><span class="cm-identifier">html</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 67px;"></div><div class="CodeMirror-gutters" style="display: none; height: 67px;"></div></div></div></pre><p><span>1.执行yaml 文件正确计 0.5 分</span>
<span>2.检查 ELK 服务部署正确计 1.5 分</span></p><h3><a name="题目-3python-运维开发基于openstack-restful-api-实现镜像上传1-分" class="md-header-anchor"></a><span>【题目 3】Python 运维开发：基于OpenStack Restful API 实现镜像上传[1 分]</span></h3><p><span>使用OpenStack all-in-one 镜像，创建 OpenStack Python 运维开发环境。云主机的用户/ 密码为：“root/Abc@1234”，OpenStack 的域名/账号/密码为：“demo/admin/000000”。</span>
<span>提示说明：python 脚本文件头建议加入“#encoding:utf-8”避免编码错误；测试脚本代码用 python3 命令执行与测试。</span>
<span>在 controller 节点的/root 目录下创建 api_image_manager.py 脚本，编写 python 代码对接OpenStack API，完成镜像的创建与上传。创建之前查询是否存在“同名镜像”，如果存在先删除该镜像。</span>
<span>（1）创建镜像：要求在 OpenStack 私有云平台中上传镜像cirros-0.3.4-x86_64-disk.img，名字为 cirros001，disk_format 为 qcow2，container_format 为bare。</span>
<span>（2）查询镜像：查询 cirros001 的详细信息，并以 json 格式文本输出到控制台。</span>
<span>完成后提交 OpenStack Python 运维开发环境Controller 节点的 IP 地址，用户名和密码提交。</span></p><p><span>（1）基础环境准备，安装python3，已经需要的依赖</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-error">@</span> <span class="cm-identifier">controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># python3 --version</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">Python</span> <span class="cm-number">3.6.8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#使用提供的whl文件安装依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cd Python-api</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#  pip3 install certifi-2019.11.28-py2.py3-none-any.whl</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># pip3 install urllib3-1.25.11-py3-none-any.whl</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#  pip3 install idna-2.8-py2.py3-none-any.whl</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#  pip3 install chardet-3.0.4-py2.py3-none-any.whl</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment">#  pip3 install requests-2.24.0-py2.py3-none-any.whl</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 246px;"></div><div class="CodeMirror-gutters" style="display: none; height: 246px;"></div></div></div></pre><p><span>（2）代码实现</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi api_image_manager.py</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#encoding:utf-8 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">import</span> <span class="cm-identifier">requests</span><span class="cm-punctuation">,</span> <span class="cm-identifier">json</span><span class="cm-punctuation">,</span> <span class="cm-identifier">time</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">import</span> <span class="cm-identifier">logging</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># -----------logger----------- &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># get logger &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">logger</span> <span class="cm-operator">=</span> <span class="cm-identifier">logging</span><span class="cm-punctuation">.</span><span class="cm-identifier">getLogger</span><span class="cm-punctuation">(</span><span class="cm-identifier">__name__</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># level &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">setLevel</span><span class="cm-punctuation">(</span><span class="cm-identifier">logging</span><span class="cm-punctuation">.</span><span class="cm-identifier">DEBUG</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># format &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">format</span> <span class="cm-operator">=</span> <span class="cm-identifier">logging</span><span class="cm-punctuation">.</span><span class="cm-identifier">Formatter</span><span class="cm-punctuation">(</span><span class="cm-string">'%(asctime)s %(message)s'</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># to console &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">stream_handler</span> <span class="cm-operator">=</span> <span class="cm-identifier">logging</span><span class="cm-punctuation">.</span><span class="cm-identifier">StreamHandler</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">stream_handler</span><span class="cm-punctuation">.</span><span class="cm-identifier">setFormatter</span><span class="cm-punctuation">(</span><span class="cm-identifier">format</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">addHandler</span><span class="cm-punctuation">(</span><span class="cm-identifier">stream_handler</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># -----------logger----------- &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">def</span> <span class="cm-identifier">get_auth_token</span><span class="cm-punctuation">(</span><span class="cm-identifier">controller_ip</span><span class="cm-punctuation">,</span> <span class="cm-identifier">domain</span><span class="cm-punctuation">,</span> <span class="cm-identifier">user</span><span class="cm-punctuation">,</span> <span class="cm-identifier">password</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-error">''' &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">controller_ip</span><span class="cm-operator">:</span> <span class="cm-identifier">openstack</span> <span class="cm-identifier">master</span> <span class="cm-identifier">ip</span> <span class="cm-identifier">address</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">domain</span><span class="cm-operator">:</span> <span class="cm-identifier">current</span> <span class="cm-identifier">user</span><span class="cm-error">'s domain &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">user</span><span class="cm-operator">:</span> <span class="cm-identifier">user</span> <span class="cm-identifier">name</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">password</span><span class="cm-operator">:</span> <span class="cm-identifier">user</span> <span class="cm-identifier">password</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> <span class="cm-identifier">keystoen</span> <span class="cm-identifier">auth</span> <span class="cm-identifier">Token</span> <span class="cm-keyword">for</span> <span class="cm-identifier">current</span> <span class="cm-identifier">user</span><span class="cm-punctuation">.</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-error">''' &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">try</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">url</span> <span class="cm-operator">=</span> <span class="cm-identifier">f</span><span class="cm-string">"http://{controller_ip}:5000/v3/auth/tokens"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">body</span> <span class="cm-operator">=</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"auth"</span><span class="cm-operator">:</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"identity"</span><span class="cm-operator">:</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"methods"</span><span class="cm-operator">:</span> <span class="cm-punctuation">[</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"password"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">],</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"password"</span><span class="cm-operator">:</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"user"</span><span class="cm-operator">:</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"domain"</span><span class="cm-operator">:</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"name"</span><span class="cm-operator">:</span> <span class="cm-identifier">domain</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">},</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"name"</span><span class="cm-operator">:</span> <span class="cm-identifier">user</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"password"</span><span class="cm-operator">:</span> <span class="cm-identifier">password</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">},</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"scope"</span><span class="cm-operator">:</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"project"</span><span class="cm-operator">:</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"domain"</span><span class="cm-operator">:</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"name"</span><span class="cm-operator">:</span> <span class="cm-identifier">domain</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">},</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"name"</span><span class="cm-operator">:</span> <span class="cm-identifier">user</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">headers</span> <span class="cm-operator">=</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"Content-Type"</span><span class="cm-operator">:</span> <span class="cm-string">"application/json"</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">body</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">Token</span> <span class="cm-operator">=</span> <span class="cm-identifier">requests</span><span class="cm-punctuation">.</span><span class="cm-identifier">post</span><span class="cm-punctuation">(</span><span class="cm-identifier">url</span><span class="cm-punctuation">,</span> <span class="cm-keyword">data</span><span class="cm-operator">=</span><span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">body</span><span class="cm-punctuation">),</span> <span class="cm-identifier">headers</span><span class="cm-operator">=</span><span class="cm-identifier">headers</span><span class="cm-punctuation">).</span><span class="cm-identifier">headers</span><span class="cm-punctuation">[</span><span class="cm-string">'X-Subject-Token'</span><span class="cm-punctuation">]</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">headers</span> <span class="cm-operator">=</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"X-Auth-Token"</span><span class="cm-operator">:</span> <span class="cm-identifier">Token</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">debug</span><span class="cm-punctuation">(</span><span class="cm-identifier">f</span><span class="cm-string">"获取Token值：{str(Token)}"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">headers</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">except</span> <span class="cm-identifier">Exception</span> <span class="cm-identifier">as</span> <span class="cm-builtin">e:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">error</span><span class="cm-punctuation">(</span><span class="cm-identifier">f</span><span class="cm-string">"获取Token值失败，请检查访问云主机控制节点IP是否正确？输出错误信息如下：{str(e)}"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">exit</span><span class="cm-punctuation">(</span><span class="cm-number">0</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 镜像管理 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">class</span> <span class="cm-identifier">image_manager</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">__init__</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">handers</span><span class="cm-operator">:</span> <span class="cm-identifier">dict</span><span class="cm-punctuation">,</span> <span class="cm-identifier">resUrl</span><span class="cm-operator">:</span> <span class="cm-identifier">str</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">headers</span> <span class="cm-operator">=</span> <span class="cm-identifier">handers</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span> <span class="cm-operator">=</span> <span class="cm-identifier">resUrl</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">#POST v2/images &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">create_image</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">image_name</span><span class="cm-operator">:</span> <span class="cm-identifier">str</span><span class="cm-punctuation">,</span> <span class="cm-identifier">container_format</span><span class="cm-operator">=</span><span class="cm-string">"bare"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">disk_format</span><span class="cm-operator">=</span><span class="cm-string">"qcow2"</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">image_name</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">container_format</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">disk_format</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">body</span> <span class="cm-operator">=</span> <span class="cm-punctuation">{</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"container_format"</span><span class="cm-operator">:</span> <span class="cm-identifier">container_format</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"disk_format"</span><span class="cm-operator">:</span> <span class="cm-identifier">disk_format</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"name"</span><span class="cm-operator">:</span> <span class="cm-identifier">image_name</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">response</span> <span class="cm-operator">=</span> <span class="cm-identifier">requests</span><span class="cm-punctuation">.</span><span class="cm-identifier">post</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span><span class="cm-punctuation">,</span> <span class="cm-keyword">data</span><span class="cm-operator">=</span><span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">body</span><span class="cm-punctuation">),</span> <span class="cm-identifier">headers</span><span class="cm-operator">=</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">headers</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">debug</span><span class="cm-punctuation">(</span><span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">status_code</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">if</span> <span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">status_code</span> <span class="cm-operator">==</span> <span class="cm-number">201</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-punctuation">{</span><span class="cm-string">"ImageItemCreatedSuccess"</span><span class="cm-operator">:</span> <span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">status_code</span><span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">text</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 获取glance镜像id &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">get_image_id</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">image_name</span><span class="cm-operator">:</span> <span class="cm-identifier">str</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">result</span> <span class="cm-operator">=</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">loads</span><span class="cm-punctuation">(</span><span class="cm-identifier">requests</span><span class="cm-punctuation">.</span><span class="cm-identifier">get</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span><span class="cm-punctuation">,</span> <span class="cm-identifier">headers</span><span class="cm-operator">=</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">headers</span><span class="cm-punctuation">).</span><span class="cm-identifier">text</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">debug</span><span class="cm-punctuation">(</span><span class="cm-identifier">result</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">for</span> <span class="cm-identifier">item</span> <span class="cm-keyword">in</span> <span class="cm-identifier">result</span><span class="cm-punctuation">[</span><span class="cm-string">'images'</span><span class="cm-punctuation">]</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-keyword">if</span> <span class="cm-punctuation">(</span><span class="cm-identifier">item</span><span class="cm-punctuation">[</span><span class="cm-string">'name'</span><span class="cm-punctuation">]</span> <span class="cm-operator">==</span> <span class="cm-identifier">image_name</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">item</span><span class="cm-punctuation">[</span><span class="cm-string">'id'</span><span class="cm-punctuation">]</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 上传glance镜像 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># Image data¶ Uploads and downloads raw image data. &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># These operations may be restricted to administrators. Consult your cloud operator’s documentation for details. &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># /v2/images/{image_id}/file &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 镜像可以重名 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">upload_iamge_data</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">image_id</span><span class="cm-operator">:</span> <span class="cm-identifier">str</span><span class="cm-punctuation">,</span> <span class="cm-identifier">file_path</span><span class="cm-operator">=</span><span class="cm-string">""</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">image_id</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">file_path</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span> <span class="cm-operator">+</span> <span class="cm-string">"/"</span> <span class="cm-operator">+</span> <span class="cm-identifier">image_id</span> <span class="cm-operator">+</span> <span class="cm-string">"/file"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">headers</span><span class="cm-punctuation">[</span><span class="cm-string">'Content-Type'</span><span class="cm-punctuation">]</span> <span class="cm-operator">=</span> <span class="cm-string">"application/octet-stream"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">response</span> <span class="cm-operator">=</span> <span class="cm-identifier">requests</span><span class="cm-punctuation">.</span><span class="cm-identifier">put</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span><span class="cm-punctuation">,</span> <span class="cm-keyword">data</span><span class="cm-operator">=</span><span class="cm-identifier">open</span><span class="cm-punctuation">(</span><span class="cm-identifier">file_path</span><span class="cm-punctuation">,</span> <span class="cm-string">'rb'</span><span class="cm-punctuation">).</span><span class="cm-identifier">read</span><span class="cm-punctuation">(),</span> <span class="cm-identifier">headers</span><span class="cm-operator">=</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">headers</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">debug</span><span class="cm-punctuation">(</span><span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">status_code</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">if</span> <span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">status_code</span> <span class="cm-operator">==</span> <span class="cm-number">204</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-punctuation">{</span><span class="cm-string">"ImageItemCreatedSuccess"</span><span class="cm-operator">:</span> <span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">status_code</span><span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">text</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># ---------------------------- &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># /v2/images &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># List images &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">get_images</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">status_code</span> <span class="cm-operator">=</span> <span class="cm-identifier">requests</span><span class="cm-punctuation">.</span><span class="cm-identifier">get</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span><span class="cm-punctuation">,</span> <span class="cm-identifier">headers</span><span class="cm-operator">=</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">headers</span><span class="cm-punctuation">).</span><span class="cm-identifier">text</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">debug</span><span class="cm-punctuation">(</span><span class="cm-identifier">f</span><span class="cm-string">"返回状态:{str(status_code)}"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">status_code</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># /v2/images/{image_id} Show image &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">get_image</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">id</span><span class="cm-operator">:</span> <span class="cm-identifier">str</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">get</span> <span class="cm-identifier">a</span> <span class="cm-identifier">flavor</span> <span class="cm-identifier">by</span> <span class="cm-identifier">id</span><span class="cm-punctuation">.</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">api_url</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span> <span class="cm-operator">+</span> <span class="cm-string">"/"</span> <span class="cm-operator">+</span> <span class="cm-identifier">id</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">response</span> <span class="cm-operator">=</span> <span class="cm-identifier">requests</span><span class="cm-punctuation">.</span><span class="cm-identifier">get</span><span class="cm-punctuation">(</span><span class="cm-identifier">api_url</span><span class="cm-punctuation">,</span> <span class="cm-identifier">headers</span><span class="cm-operator">=</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">headers</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">result</span> <span class="cm-operator">=</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">loads</span><span class="cm-punctuation">(</span><span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">text</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">debug</span><span class="cm-punctuation">(</span><span class="cm-identifier">f</span><span class="cm-string">"返回信息:{str(result)}"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">result</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># /v2/images/{image_id} Delete image &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">delete_image</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">id</span><span class="cm-operator">:</span> <span class="cm-identifier">str</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">delete</span> <span class="cm-identifier">a</span> <span class="cm-identifier">image</span> <span class="cm-identifier">by</span> <span class="cm-identifier">id</span><span class="cm-punctuation">.</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">api_url</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">resUrl</span> <span class="cm-operator">+</span> <span class="cm-string">"/"</span> <span class="cm-operator">+</span> <span class="cm-identifier">id</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">response</span> <span class="cm-operator">=</span> <span class="cm-identifier">requests</span><span class="cm-punctuation">.</span><span class="cm-identifier">delete</span><span class="cm-punctuation">(</span><span class="cm-identifier">api_url</span><span class="cm-punctuation">,</span> <span class="cm-identifier">headers</span><span class="cm-operator">=</span><span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">headers</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment"># 204 - No ContentThe server has fulfilled the request. &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">if</span> <span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">status_code</span> <span class="cm-operator">==</span> <span class="cm-number">204</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-punctuation">{</span><span class="cm-string">"Image itemDeletedSuccess"</span><span class="cm-operator">:</span> <span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">status_code</span><span class="cm-punctuation">}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">result</span> <span class="cm-operator">=</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">loads</span><span class="cm-punctuation">(</span><span class="cm-identifier">response</span><span class="cm-punctuation">.</span><span class="cm-identifier">text</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">logger</span><span class="cm-punctuation">.</span><span class="cm-identifier">debug</span><span class="cm-punctuation">(</span><span class="cm-identifier">f</span><span class="cm-string">"返回信息:{str(result)}"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">result</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment"># http://192.168.200.226:8774/v2.1/ get apis version infomation. &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> <span class="cm-identifier">__name__</span> <span class="cm-operator">==</span> <span class="cm-string">'__main__'</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 1. openstack allinone （controller ) credentials &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># host ip address &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">controller_ip</span> <span class="cm-operator">=</span> <span class="cm-string">"192.168.200.100"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># domain name &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">domain</span> <span class="cm-operator">=</span> <span class="cm-string">"demo"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># user name &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">user</span> <span class="cm-operator">=</span> <span class="cm-string">"admin"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># user password &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">password</span> <span class="cm-operator">=</span> <span class="cm-string">"000000"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">headers</span> <span class="cm-operator">=</span> <span class="cm-identifier">get_auth_token</span><span class="cm-punctuation">(</span><span class="cm-identifier">controller_ip</span><span class="cm-punctuation">,</span> <span class="cm-identifier">domain</span><span class="cm-punctuation">,</span> <span class="cm-identifier">user</span><span class="cm-punctuation">,</span> <span class="cm-identifier">password</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"headers:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">headers</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># http://controller:9292 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">image_m</span> <span class="cm-operator">=</span> <span class="cm-identifier">image_manager</span><span class="cm-punctuation">(</span><span class="cm-identifier">headers</span><span class="cm-punctuation">,</span> <span class="cm-identifier">f</span><span class="cm-string">"http://{controller_ip}:9292/v2/images"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 1 查所有 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">images</span> <span class="cm-operator">=</span> <span class="cm-identifier">image_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">get_images</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"查询所有images:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">images</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">#2 创建镜像（注意，镜像允许同名） &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">result</span> <span class="cm-operator">=</span> <span class="cm-identifier">image_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">create_image</span><span class="cm-punctuation">(</span><span class="cm-identifier">image_name</span><span class="cm-operator">=</span><span class="cm-string">"cirros001"</span><span class="cm-punctuation">)</span> &nbsp;<span class="cm-comment"># 调用glance-api中创建镜像方法 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">f</span><span class="cm-string">"创建cirros001 镜像:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">result</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># &nbsp; #1.1查询id &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">id</span> <span class="cm-operator">=</span> <span class="cm-identifier">image_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">get_image_id</span><span class="cm-punctuation">(</span><span class="cm-identifier">image_name</span><span class="cm-operator">=</span><span class="cm-string">"cirros001"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"cirros002镜像的，id为: "</span><span class="cm-punctuation">,</span> <span class="cm-identifier">id</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 1.2 上传镜像文件 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">result</span> <span class="cm-operator">=</span> <span class="cm-identifier">image_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">upload_iamge_data</span><span class="cm-punctuation">(</span><span class="cm-identifier">id</span><span class="cm-punctuation">,</span> <span class="cm-identifier">file_path</span><span class="cm-operator">=</span><span class="cm-string">"cirros-0.3.4-x86_64-disk.img"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">f</span><span class="cm-string">"上传{id}镜像:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">result</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 3987px;"></div><div class="CodeMirror-gutters" style="display: none; height: 3987px;"></div></div></div></pre><blockquote><p><span>需要修改的所有变量信息全部都在  if </span><strong><span>name</span></strong><span> == &#39;</span><strong><span>main</span></strong><span>&#39;:    下面</span></p></blockquote><p><span>1.执行api_image_manager.py 脚本,成功创建镜像，计 0.5 分</span>
<span>2.检查镜像状态正确，计 0.5 分</span></p><h3><a name="题目-4python-运维开发基于-openstack-python-sdk-实现云主机创建1-分" class="md-header-anchor"></a><span>【题目 4】Python 运维开发：基于 Openstack Python SDK 实现云主机创建[1 分]</span></h3><p><span>使 用 已 建 好 的 OpenStack Python 运 维 开 发 环 境 ，在 /root 目 录 下 创 建sdk_server_manager.py 脚本，使用 python-openstacksdk Python 模块，完成云主机的创建和查询。创建之前查询是否存在“同名云主机”，如果存在先删除该镜像。</span>
<span>（1）创建 1 台云主机：云主机信息如下： 云主机名称如下：server001</span>
<span>镜像文件：cirros-0.3.4-x86_64-disk.img 云主机类型：m1.tiny</span>
<span>网络等必要信息自己补充。</span>
<span>（2）查询云主机：查询云主机 server001 的详细信息，并以 json 格式文本输出到控制台。</span>
<span>完成后提交 OpenStack Python 运维开发环境 Controller 节点的 IP 地址，用户名和密码提交。</span></p><p><span>（1）代码实现</span>
<span>创建云主机所需的镜像、类型、网络是用name来识别的，需要提前创建好</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@container</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># vi sdk_server_manager.py</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">import</span> <span class="cm-identifier">json</span><span class="cm-punctuation">,</span><span class="cm-identifier">logging</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">import</span> <span class="cm-identifier">openstack</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#openstack logger &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># openstack.enable_logging(debug=True) &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#文档地址 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># https://docs.openstack.org/openstacksdk/latest/user/index.html &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">def</span> <span class="cm-identifier">create_connection</span><span class="cm-punctuation">(</span><span class="cm-identifier">auth_url</span><span class="cm-punctuation">,</span> <span class="cm-identifier">user_domain_name</span><span class="cm-punctuation">,</span> <span class="cm-identifier">username</span><span class="cm-punctuation">,</span> <span class="cm-identifier">password</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-error">建立连接</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">auth_url</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">user_domain_name</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">username</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">password</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">openstack</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">(</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">auth_url</span><span class="cm-operator">=</span><span class="cm-identifier">auth_url</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">user_domain_name</span><span class="cm-operator">=</span><span class="cm-identifier">user_domain_name</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">username</span><span class="cm-operator">=</span><span class="cm-identifier">username</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">password</span><span class="cm-operator">=</span><span class="cm-identifier">password</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#user Manager &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 参见文档 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># https://docs.openstack.org/openstacksdk/latest/user/guides/identity.html &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#openstack.connection.Connection &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#云主机管理 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">class</span> <span class="cm-identifier">server_manager</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">__init__</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">connect</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span> <span class="cm-operator">=</span> <span class="cm-identifier">connect</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">list_servers</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">查询所有云主机</span><span class="cm-punctuation">.</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#to json &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">items</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">servers</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">server_jsons</span> <span class="cm-operator">=</span> <span class="cm-punctuation">{}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">for</span> <span class="cm-identifier">server</span> <span class="cm-keyword">in</span> <span class="cm-identifier">items</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">server_jsons</span><span class="cm-punctuation">[</span><span class="cm-identifier">server</span><span class="cm-punctuation">[</span><span class="cm-string">'name'</span><span class="cm-punctuation">]]</span> <span class="cm-operator">=</span> <span class="cm-identifier">server</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment"># return "" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">items</span><span class="cm-comment"># json.dumps(server_jsons,indent=2,skipkeys=True) &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">create_server</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">server_name</span><span class="cm-punctuation">,</span> <span class="cm-identifier">image_name</span><span class="cm-punctuation">,</span> <span class="cm-identifier">flavor_name</span><span class="cm-punctuation">,</span><span class="cm-identifier">networ_name</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-identifier">create</span> <span class="cm-identifier">a</span> <span class="cm-identifier">server</span><span class="cm-punctuation">.</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">server_name</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">image_name</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">flavor_name</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">networ_name</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">image</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_image</span><span class="cm-punctuation">(</span><span class="cm-identifier">image_name</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">flavor</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavor_name</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">network</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">network</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_network</span><span class="cm-punctuation">(</span><span class="cm-identifier">networ_name</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">server</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">create_server</span><span class="cm-punctuation">(</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">server_name</span><span class="cm-punctuation">,</span> <span class="cm-identifier">image_id</span><span class="cm-operator">=</span><span class="cm-identifier">image</span><span class="cm-punctuation">.</span><span class="cm-identifier">id</span><span class="cm-punctuation">,</span> <span class="cm-identifier">flavor_id</span><span class="cm-operator">=</span><span class="cm-identifier">flavor</span><span class="cm-punctuation">.</span><span class="cm-identifier">id</span><span class="cm-punctuation">,</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">networks</span><span class="cm-operator">=</span><span class="cm-punctuation">[{</span><span class="cm-string">"uuid"</span><span class="cm-operator">:</span> <span class="cm-identifier">network</span><span class="cm-punctuation">.</span><span class="cm-identifier">id</span><span class="cm-punctuation">}])</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">result</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">wait_for_server</span><span class="cm-punctuation">(</span><span class="cm-identifier">server</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">result</span> <span class="cm-comment">#json.dumps(result,indent=2,skipkeys=True) &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">delete_server</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">server_name</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">删除云主机</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">server_name</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">server</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_server</span><span class="cm-punctuation">(</span><span class="cm-identifier">server_name</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">result</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">delete_server</span><span class="cm-punctuation">(</span><span class="cm-identifier">server</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">result</span> <span class="cm-comment">#json.dumps(result, indent=2, skipkeys=True) &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">get_server</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">server_name</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">获取云主机</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">param</span> <span class="cm-identifier">server_name</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">server</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_server</span><span class="cm-punctuation">(</span><span class="cm-identifier">server_name</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">server</span><span class="cm-punctuation">,</span> <span class="cm-identifier">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span><span class="cm-punctuation">,</span> <span class="cm-identifier">skipkeys</span><span class="cm-operator">=</span><span class="cm-identifier">True</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">class</span> <span class="cm-identifier">image_manager</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">__init__</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">connect</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span> <span class="cm-operator">=</span> <span class="cm-identifier">connect</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">list_images</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">查询所有镜像</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#to json &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">items</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">images</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">images_jsons</span> <span class="cm-operator">=</span> <span class="cm-punctuation">{}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">for</span> <span class="cm-identifier">image</span> <span class="cm-keyword">in</span> <span class="cm-identifier">items</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">images_jsons</span><span class="cm-punctuation">[</span><span class="cm-identifier">image</span><span class="cm-punctuation">[</span><span class="cm-string">'name'</span><span class="cm-punctuation">]]</span> <span class="cm-operator">=</span> <span class="cm-identifier">image</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">images_jsons</span><span class="cm-punctuation">,</span><span class="cm-identifier">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">get_image</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">image_name</span><span class="cm-operator">:</span><span class="cm-identifier">str</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">查询镜像</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#to json &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">image</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_image</span><span class="cm-punctuation">(</span><span class="cm-identifier">image_name</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">image</span><span class="cm-punctuation">,</span><span class="cm-identifier">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">class</span> <span class="cm-identifier">flavor_manager</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">__init__</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">connect</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span> <span class="cm-operator">=</span> <span class="cm-identifier">connect</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">list_flavors</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">查询所有云主机类型</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#to json &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">items</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">flavors</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">flavors_jsons</span> <span class="cm-operator">=</span> <span class="cm-punctuation">{}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">for</span> <span class="cm-identifier">flavor</span> <span class="cm-keyword">in</span> <span class="cm-identifier">items</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">flavors_jsons</span><span class="cm-punctuation">[</span><span class="cm-identifier">flavor</span><span class="cm-punctuation">[</span><span class="cm-string">'name'</span><span class="cm-punctuation">]]</span> <span class="cm-operator">=</span> <span class="cm-identifier">flavor</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavors_jsons</span><span class="cm-punctuation">,</span><span class="cm-identifier">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">get_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">flavor_name</span><span class="cm-operator">:</span><span class="cm-identifier">str</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">根据名称获取云主机类</span><span class="cm-punctuation">.</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#to json &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">flavor</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavor_name</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavor</span><span class="cm-punctuation">,</span><span class="cm-identifier">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">class</span> <span class="cm-identifier">network_manager</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">__init__</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">connect</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span> <span class="cm-operator">=</span> <span class="cm-identifier">connect</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">list_networks</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">查询所有网络</span><span class="cm-punctuation">.</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#to json &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">items</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">network</span><span class="cm-punctuation">.</span><span class="cm-identifier">networks</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">items_jsons</span> <span class="cm-operator">=</span> <span class="cm-punctuation">{}</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">for</span> <span class="cm-identifier">network</span> <span class="cm-keyword">in</span> <span class="cm-identifier">items</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-identifier">items_jsons</span><span class="cm-punctuation">[</span><span class="cm-identifier">network</span><span class="cm-punctuation">[</span><span class="cm-string">'name'</span><span class="cm-punctuation">]]</span> <span class="cm-operator">=</span> <span class="cm-identifier">network</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">items_jsons</span><span class="cm-punctuation">,</span><span class="cm-identifier">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">def</span> <span class="cm-identifier">get_network</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">network_name</span><span class="cm-operator">:</span><span class="cm-identifier">str</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">跟名称查询网络</span><span class="cm-punctuation">.</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">:</span><span class="cm-keyword">return</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-error">""" &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment">#to json &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-identifier">flavor</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_network</span><span class="cm-punctuation">(</span><span class="cm-identifier">network_name</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavor</span><span class="cm-punctuation">,</span><span class="cm-identifier">indent</span><span class="cm-operator">=</span><span class="cm-number">2</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> <span class="cm-identifier">__name__</span> <span class="cm-operator">==</span> <span class="cm-string">'__main__'</span><span class="cm-operator">:</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># Initialize connection(通过配置文件） &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">auth_url</span> <span class="cm-operator">=</span> <span class="cm-string">"http://192.168.200.100:5000/v3/"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">username</span> <span class="cm-operator">=</span> <span class="cm-string">"admin"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">password</span> <span class="cm-operator">=</span> <span class="cm-string">"000000"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">user_domain_name</span> <span class="cm-operator">=</span> <span class="cm-string">'demo'</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">conn</span> <span class="cm-operator">=</span> <span class="cm-identifier">create_connection</span><span class="cm-punctuation">(</span><span class="cm-identifier">auth_url</span><span class="cm-punctuation">,</span> <span class="cm-identifier">user_domain_name</span><span class="cm-punctuation">,</span> <span class="cm-identifier">username</span><span class="cm-punctuation">,</span> <span class="cm-identifier">password</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 1 查询flavors &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"list flavors--------"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">sdk_m</span> <span class="cm-operator">=</span> <span class="cm-identifier">flavor_manager</span><span class="cm-punctuation">(</span><span class="cm-identifier">conn</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">flavors</span> <span class="cm-operator">=</span> <span class="cm-identifier">sdk_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">list_flavors</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"flavors:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">flavors</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 2 镜像管理 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">sdk_m</span> <span class="cm-operator">=</span> <span class="cm-identifier">image_manager</span><span class="cm-punctuation">(</span><span class="cm-identifier">conn</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">items</span> <span class="cm-operator">=</span> <span class="cm-identifier">sdk_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">list_images</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"image:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">items</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment"># 3 网络管理 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"list networks--------"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">sdk_m</span> <span class="cm-operator">=</span> <span class="cm-identifier">network_manager</span><span class="cm-punctuation">(</span><span class="cm-identifier">conn</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">networks</span> <span class="cm-operator">=</span> <span class="cm-identifier">sdk_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">list_networks</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"networks:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">networks</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">#4 查询 云主机 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">sdk_m</span> <span class="cm-operator">=</span> <span class="cm-identifier">server_manager</span><span class="cm-punctuation">(</span><span class="cm-identifier">conn</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">servers</span> <span class="cm-operator">=</span> <span class="cm-identifier">sdk_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">list_servers</span><span class="cm-punctuation">()</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"servers:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">servers</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">#5 创建云主机 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"creat server--------"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">servers</span> <span class="cm-operator">=</span> <span class="cm-identifier">sdk_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">create_server</span><span class="cm-punctuation">(</span><span class="cm-string">"server001"</span><span class="cm-punctuation">,</span><span class="cm-string">"cirros"</span><span class="cm-punctuation">,</span><span class="cm-string">"m1.tiny"</span><span class="cm-punctuation">,</span><span class="cm-string">"net"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"servers:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">servers</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">#6 删除云主机 &nbsp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">result</span> <span class="cm-operator">=</span> <span class="cm-identifier">sdk_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">delete_server</span><span class="cm-punctuation">(</span><span class="cm-string">"test_song"</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-string">"servers:"</span><span class="cm-punctuation">,</span> <span class="cm-identifier">result</span><span class="cm-punctuation">)</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 3942px;"></div><div class="CodeMirror-gutters" style="display: none; height: 3942px;"></div></div></div></pre><p><span>1.执行 sdk_server_manager.py 脚本,成功创建云主机，计 0.5 分</span>
<span>2.检查创建的云主机状态正确，计 0.5 分</span></p><h3><a name="题目-5python-运维开发云主机类型管理的命令行工具开发2-分" class="md-header-anchor"></a><span>【题目 5】Python 运维开发：云主机类型管理的命令行工具开发[2 分]</span></h3><p><span>使用已建好的 OpenStack Python 运维开发环境，在/root 目录下创建 flavor_manager.py</span>
<span>脚本，完成云主机类型的管理，flavor_manager.py 程序支持命令行参数执行。提示说明：Python 标准库argparse 模块，可以提供命令行参数的解析。要求如下：</span>
<span>（1）程序支持根据命令行参数，创建 1 个多云主机类型。返回 response。位置参数“create”，表示创建；</span>
<span>参数“-n”支持指定 flavor 名称，数据类型为字符串类型； 参数“-m”支持指定内存大小，数据类型为 int，单位 M； 参数“-v”支持指定虚拟 cpu 个数，数据类型为 int；</span>
<span>参数“-d”支持磁盘大小，内存大小类型为 int，单位 G； 参数“-id”支持指定 ID，类型为字符串。</span>
<span>参考运行实例：</span>
<span>python3 flavor_manager.py create -n flavor_small -m 1024 -v 1 -d 10 -id 100000</span></p><p><span>（2）程序支持查询目前 admin 账号下所有的云主机类型。位置参数“getall”，表示查询所有云主机类型；</span>
<span>查询结果，以 json 格式输出到控制台。参考执行实例如下：</span>
<span>python3 flavor_manager.py getall</span></p><p><span>（3）支持查询给定具体名称的云主机类型查询。位置参数“get”，表示查询 1 个云主机类型； 参数“-id”支持指定 ID 查询，类型为 string。 控制台以 json 格式输出创建结果。</span>
<span>参考执行实例如下：</span>
<span>python3 flavor_manager.py get -id 100000</span></p><p><span>（4）支持删除指定的 ID 云主机类型。</span>
<span>位置参数“delete”，表示删除一个云主机类型；</span>
<span>参数“-id”支持指定 ID 查询，返回 response，控制台输出response。参考执行实例如下：</span>
<span>python3 flavor_manager.py delete -id 100001</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">在这里插入代码片</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p><span>1.执行 flavor_manager.py 脚本，指定 create 和配置参数，成功创建 1 个云主机类型，计 0.5</span>
<span>分；</span>
<span>2.执行 flavor_manager.py 脚本，指定 getall 参数，成功查询所有云主机类型，计 0.5 分；</span>
<span>3.执行 flavor_manager.py 脚本，指定 get 和配置参数，成功查询具体名称的云主机类型，计</span>
<span>0.5 分；</span>
<span>4.执行 flavor_manager.py 脚本，指定 delete 和配置参数，成功删除指定 ID 云主机类型，计</span>
<span>0.5 分。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">import</span> <span class="cm-identifier">json</span><span class="cm-punctuation">,</span><span class="cm-identifier">openstack</span><span class="cm-punctuation">,</span><span class="cm-identifier">argparse</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">class</span> <span class="cm-identifier">flavor_manager</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">__init__</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span><span class="cm-identifier">auth_url</span><span class="cm-punctuation">,</span><span class="cm-identifier">user_domain_name</span><span class="cm-punctuation">,</span><span class="cm-identifier">username</span><span class="cm-punctuation">,</span><span class="cm-identifier">password</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span> <span class="cm-operator">=</span> <span class="cm-identifier">openstack</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">auth_url</span><span class="cm-operator">=</span><span class="cm-identifier">auth_url</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">user_domain_name</span><span class="cm-operator">=</span><span class="cm-identifier">user_domain_name</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">username</span><span class="cm-operator">=</span><span class="cm-identifier">username</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">password</span><span class="cm-operator">=</span><span class="cm-identifier">password</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">create_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span><span class="cm-identifier">args</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">flavor</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">n</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-identifier">flavor</span> <span class="cm-identifier">is</span> <span class="cm-identifier">not</span> <span class="cm-identifier">None</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">delete_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavor</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">flavor</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">create_flavor</span><span class="cm-punctuation">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">n</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">vcpus</span><span class="cm-operator">=</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">v</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">ram</span><span class="cm-operator">=</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">m</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">disk</span><span class="cm-operator">=</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">d</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">id</span><span class="cm-operator">=</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">id</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavor</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">list_all_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span><span class="cm-identifier">args</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">flavors</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">flavors</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> <span class="cm-identifier">flavor</span> <span class="cm-keyword">in</span> <span class="cm-identifier">flavors</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavor</span><span class="cm-punctuation">))</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">get_flavor_by_id</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span><span class="cm-identifier">args</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">flavor</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">id</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">flavor</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">delete_flavor_by_id</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span><span class="cm-identifier">args</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">compute</span><span class="cm-punctuation">.</span><span class="cm-identifier">delete_flavor</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">id</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> <span class="cm-identifier">__name__</span> <span class="cm-operator">==</span> <span class="cm-string">'__main__'</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">flavor_m</span> <span class="cm-operator">=</span> <span class="cm-identifier">flavor_manager</span><span class="cm-punctuation">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'http://192.168.73.10:5000/v3'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'demo'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'admin'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'000000'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># 命令解析器</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser</span> <span class="cm-operator">=</span> <span class="cm-identifier">argparse</span><span class="cm-punctuation">.</span><span class="cm-identifier">ArgumentParser</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">subparsers</span> <span class="cm-operator">=</span> <span class="cm-identifier">parser</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_subparsers</span><span class="cm-punctuation">()</span> &nbsp;<span class="cm-comment"># 添加子命令解析器</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># create 子命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span> <span class="cm-operator">=</span> <span class="cm-identifier">subparsers</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_parser</span><span class="cm-punctuation">(</span><span class="cm-string">'create'</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"创建云主机类型"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-n'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"支持指定 flavor 名称，数据类型为字符串类型"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-m'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">int</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"支持指定内存大小，数据类型为 int，单位 M"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-v'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">int</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"支持指定虚拟 cpu 个数，数据类型为 int"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-d'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">int</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"支持磁盘大小，内存大小类型为 int，单位 G"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-id'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"支持指定 ID，类型为字符串"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span><span class="cm-punctuation">.</span><span class="cm-identifier">set_defaults</span><span class="cm-punctuation">(</span><span class="cm-identifier">func</span><span class="cm-operator">=</span><span class="cm-identifier">flavor_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">create_flavor</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># getall 子命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_getall</span> <span class="cm-operator">=</span> <span class="cm-identifier">subparsers</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_parser</span><span class="cm-punctuation">(</span><span class="cm-string">"getall"</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"查询目前账号下所有的云主机类型"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_getall</span><span class="cm-punctuation">.</span><span class="cm-identifier">set_defaults</span><span class="cm-punctuation">(</span><span class="cm-identifier">func</span><span class="cm-operator">=</span><span class="cm-identifier">flavor_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">list_all_flavor</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># get 子命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_get</span> <span class="cm-operator">=</span> <span class="cm-identifier">subparsers</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_parser</span><span class="cm-punctuation">(</span><span class="cm-string">'get'</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"查询给定具体名称的云主机类型查询"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_get</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-id'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"支持指定 ID 查询，类型为 string"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_get</span><span class="cm-punctuation">.</span><span class="cm-identifier">set_defaults</span><span class="cm-punctuation">(</span><span class="cm-identifier">func</span><span class="cm-operator">=</span><span class="cm-identifier">flavor_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">get_flavor_by_id</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># delete子命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_delete</span> <span class="cm-operator">=</span> <span class="cm-identifier">subparsers</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_parser</span><span class="cm-punctuation">(</span><span class="cm-string">'delete'</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"删除指定的 ID 的云主机类型"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_delete</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-id'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span><span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"指定 ID 查询"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_delete</span><span class="cm-punctuation">.</span><span class="cm-identifier">set_defaults</span><span class="cm-punctuation">(</span><span class="cm-identifier">func</span><span class="cm-operator">=</span><span class="cm-identifier">flavor_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">delete_flavor_by_id</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">args</span> <span class="cm-operator">=</span> <span class="cm-identifier">parser</span><span class="cm-punctuation">.</span><span class="cm-identifier">parse_args</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">func</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">))</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1523px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1523px;"></div></div></div></pre><h3><a name="题目-6python-运维开发用户管理的命令行工具开发2-分" class="md-header-anchor"></a><span>【题目 6】Python 运维开发：用户管理的命令行工具开发[2 分]</span></h3><p><span>使用已建好的OpenStack Python 运维开发环境，在/root 目录下创建 user_manager.py 脚本，完成用户管理功能开发，user_manager.py 程序支持命令行带参数执行。</span>
<span>提示说明：Python 标准库argparse 模块，可以提供命令行参数的解析。</span></p><p><span>（1）程序支持根据命令行参数，创建 1 个用户。位置参数“create”，表示创建；</span>
<span>参数“-i 或--input”，格式为 json 格式文本用户数据。查询结果，以 json 格式输出到控制台。</span>
<span>参考执行实例如下：</span>
<span>python3 user_manager.py create --input &#39;{ &quot;name&quot;: &quot;user01&quot;, &quot;password&quot;: &quot;000000&quot;, &quot;description&quot;: &quot;description&quot; } &#39;</span></p><p><span>（2）支持查询给定具体名称的用户查询。</span>
<span>位置参数“get”，表示查询 1 个用户；</span>
<span>参数“-n 或 --name”支持指定名称查询，类型为 string。</span>
<span>参数“-o 或 output”支持查询该用户信息输出到文件，格式为json 格式。参考执行实例如下：</span>
<span>python3 user_manager.py get --name user01-o user.json</span></p><p><span>（3）程序支持查询目前 admin 账号下所有的用户。位置参数“getall”，表示查询所有用户；</span>
<span>参数“-o 或--output”支持输出到文件，格式为 yaml 格式。参考执行实例如下：</span>
<span>python3 user_manager.py getall -o openstack_all_user.yaml</span></p><p><span>（4）支持删除指定的名称的用户。</span>
<span>位置参数“delete”，表示删除一个用户；返回 response，通过控制台输出。参数“-n 或--name”支持指定名称查询，类型为 string。</span>
<span>参考执行实例如下：</span>
<span>python3 user_manager.py delete -name user01</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-error">在这里插入代码片</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 22px;"></div><div class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre><p><span>1.执行user_manager.py 脚本，指定 create 和配置参数，成功创建 1 个用户，计 0.5 分；</span>
<span>2.执行user_manager.py 脚本，指定 get 和配置参数，成功查询具体名称的用户，计 0.5 分； 3.执行user_manager.py 脚本，指定 getall 和配置参数，成功查询 admin 账号下的所有用户， 计 0.5 分；</span>
<span>4.执行user_manager.py 脚本，指定 delete 和配置参数，成功删除指定名称的用户，计 0.5 分</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="powershell" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="powershell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-punctuation">[</span><span class="cm-identifier">root</span><span class="cm-variable-2">@controller</span> <span class="cm-error">~</span><span class="cm-punctuation">]</span><span class="cm-comment"># cat user_manager.py </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">import</span> <span class="cm-identifier">json</span><span class="cm-punctuation">,</span> <span class="cm-identifier">yaml</span><span class="cm-punctuation">,</span> <span class="cm-identifier">openstack</span><span class="cm-punctuation">,</span> <span class="cm-identifier">argparse</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-identifier">class</span> <span class="cm-identifier">UserManager</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">__init__</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">auth_url</span><span class="cm-punctuation">,</span> <span class="cm-identifier">user_domain_name</span><span class="cm-punctuation">,</span> <span class="cm-identifier">username</span><span class="cm-punctuation">,</span> <span class="cm-identifier">password</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span> <span class="cm-operator">=</span> <span class="cm-identifier">openstack</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">auth_url</span><span class="cm-operator">=</span><span class="cm-identifier">auth_url</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">user_domain_name</span><span class="cm-operator">=</span><span class="cm-identifier">user_domain_name</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">username</span><span class="cm-operator">=</span><span class="cm-identifier">username</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">password</span><span class="cm-operator">=</span><span class="cm-identifier">password</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">create_user</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">args</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">user_info</span> <span class="cm-operator">=</span> <span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">loads</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">input</span><span class="cm-punctuation">)</span> &nbsp;<span class="cm-comment"># 转换为对象</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">user</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">identity</span><span class="cm-punctuation">.</span><span class="cm-identifier">create_user</span><span class="cm-punctuation">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">name</span><span class="cm-operator">=</span><span class="cm-identifier">user_info</span><span class="cm-punctuation">[</span><span class="cm-string">'name'</span><span class="cm-punctuation">],</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">password</span><span class="cm-operator">=</span><span class="cm-identifier">user_info</span><span class="cm-punctuation">[</span><span class="cm-string">'password'</span><span class="cm-punctuation">],</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">description</span><span class="cm-operator">=</span><span class="cm-identifier">user_info</span><span class="cm-punctuation">[</span><span class="cm-string">'description'</span><span class="cm-punctuation">]</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">user</span><span class="cm-punctuation">))</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">get_user</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">args</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">user</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">identity</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_user</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">name</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">output</span> <span class="cm-identifier">is</span> <span class="cm-identifier">not</span> <span class="cm-identifier">None</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">output</span> <span class="cm-operator">=</span> <span class="cm-identifier">open</span><span class="cm-punctuation">(</span><span class="cm-identifier">str</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">output</span><span class="cm-punctuation">),</span> <span class="cm-string">'w'</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dump</span><span class="cm-punctuation">(</span><span class="cm-identifier">user</span><span class="cm-punctuation">,</span> <span class="cm-identifier">output</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">user</span><span class="cm-punctuation">))</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">list_all_user</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">args</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">users</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">identity</span><span class="cm-punctuation">.</span><span class="cm-identifier">users</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">output</span> <span class="cm-identifier">is</span> <span class="cm-identifier">not</span> <span class="cm-identifier">None</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">output</span> <span class="cm-operator">=</span> <span class="cm-identifier">open</span><span class="cm-punctuation">(</span><span class="cm-identifier">str</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">output</span><span class="cm-punctuation">),</span> <span class="cm-string">'w'</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">yaml</span><span class="cm-punctuation">.</span><span class="cm-identifier">safe_dump</span><span class="cm-punctuation">(</span><span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">loads</span><span class="cm-punctuation">(</span><span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">list</span><span class="cm-punctuation">(</span><span class="cm-identifier">users</span><span class="cm-punctuation">))),</span> <span class="cm-identifier">output</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">json</span><span class="cm-punctuation">.</span><span class="cm-identifier">dumps</span><span class="cm-punctuation">(</span><span class="cm-identifier">list</span><span class="cm-punctuation">(</span><span class="cm-identifier">users</span><span class="cm-punctuation">)))</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">def</span> <span class="cm-identifier">del_user</span><span class="cm-punctuation">(</span><span class="cm-identifier">self</span><span class="cm-punctuation">,</span> <span class="cm-identifier">args</span><span class="cm-punctuation">)</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">user</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">identity</span><span class="cm-punctuation">.</span><span class="cm-identifier">find_user</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">name</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">resp</span> <span class="cm-operator">=</span> <span class="cm-identifier">self</span><span class="cm-punctuation">.</span><span class="cm-identifier">connect</span><span class="cm-punctuation">.</span><span class="cm-identifier">identity</span><span class="cm-punctuation">.</span><span class="cm-identifier">delete_user</span><span class="cm-punctuation">(</span><span class="cm-identifier">user</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-identifier">print</span><span class="cm-punctuation">(</span><span class="cm-identifier">resp</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> <span class="cm-identifier">__name__</span> <span class="cm-operator">==</span> <span class="cm-string">'__main__'</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">user_m</span> <span class="cm-operator">=</span> <span class="cm-identifier">UserManager</span><span class="cm-punctuation">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'http://192.168.73.10:5000/v3'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'demo'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'admin'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'000000'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser</span> <span class="cm-operator">=</span> <span class="cm-identifier">argparse</span><span class="cm-punctuation">.</span><span class="cm-identifier">ArgumentParser</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">subparsers</span> <span class="cm-operator">=</span> <span class="cm-identifier">parser</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_subparsers</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># create 子命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span> <span class="cm-operator">=</span> <span class="cm-identifier">subparsers</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_parser</span><span class="cm-punctuation">(</span><span class="cm-string">"create"</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"创建 1 个用户"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-i'</span><span class="cm-punctuation">,</span> <span class="cm-string">'--input'</span><span class="cm-punctuation">,</span><span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span><span class="cm-identifier">required</span><span class="cm-operator">=</span><span class="cm-identifier">True</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"参数“-i 或--input”，格式为 json 格式文本用户数据"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_create</span><span class="cm-punctuation">.</span><span class="cm-identifier">set_defaults</span><span class="cm-punctuation">(</span><span class="cm-identifier">func</span><span class="cm-operator">=</span><span class="cm-identifier">user_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">create_user</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># get 子命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_get</span> <span class="cm-operator">=</span> <span class="cm-identifier">subparsers</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_parser</span><span class="cm-punctuation">(</span><span class="cm-string">'get'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"表示查询 1 个用户"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_get</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-n'</span><span class="cm-punctuation">,</span> <span class="cm-string">'--name'</span><span class="cm-punctuation">,</span> <span class="cm-identifier">required</span><span class="cm-operator">=</span><span class="cm-identifier">True</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"参数“-n 或 --name”支持指定名称查询，类型为 string"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_get</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-o'</span><span class="cm-punctuation">,</span> <span class="cm-string">'--output'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"参数“-o 或 output”支持查询该用户信息输出到文件，格式为 json 格式。"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_get</span><span class="cm-punctuation">.</span><span class="cm-identifier">set_defaults</span><span class="cm-punctuation">(</span><span class="cm-identifier">func</span><span class="cm-operator">=</span><span class="cm-identifier">user_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">get_user</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># getall子命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_getll</span> <span class="cm-operator">=</span> <span class="cm-identifier">subparsers</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_parser</span><span class="cm-punctuation">(</span><span class="cm-string">'getall'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"目前账号下所有的用户"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_getll</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-o'</span><span class="cm-punctuation">,</span> <span class="cm-string">'--output'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"参数“-o 或--output”支持输出到文件，格式为 yaml 格式。"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_getll</span><span class="cm-punctuation">.</span><span class="cm-identifier">set_defaults</span><span class="cm-punctuation">(</span><span class="cm-identifier">func</span><span class="cm-operator">=</span><span class="cm-identifier">user_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">list_all_user</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># delete子命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_delete</span> <span class="cm-operator">=</span> <span class="cm-identifier">subparsers</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_parser</span><span class="cm-punctuation">(</span><span class="cm-string">'delete'</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"表示删除一个用户"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_delete</span><span class="cm-punctuation">.</span><span class="cm-identifier">add_argument</span><span class="cm-punctuation">(</span><span class="cm-string">'-n'</span><span class="cm-punctuation">,</span> <span class="cm-string">'--name'</span><span class="cm-punctuation">,</span> <span class="cm-identifier">required</span><span class="cm-operator">=</span><span class="cm-identifier">True</span><span class="cm-punctuation">,</span> <span class="cm-builtin">type</span><span class="cm-operator">=</span><span class="cm-identifier">str</span><span class="cm-punctuation">,</span> <span class="cm-builtin">help</span><span class="cm-operator">=</span><span class="cm-string">"参数“-n 或--name”支持指定名称查询，类型为 string"</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">parser_delete</span><span class="cm-punctuation">.</span><span class="cm-identifier">set_defaults</span><span class="cm-punctuation">(</span><span class="cm-identifier">func</span><span class="cm-operator">=</span><span class="cm-identifier">user_m</span><span class="cm-punctuation">.</span><span class="cm-identifier">del_user</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">args</span> <span class="cm-operator">=</span> <span class="cm-identifier">parser</span><span class="cm-punctuation">.</span><span class="cm-identifier">parse_args</span><span class="cm-punctuation">()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-identifier">args</span><span class="cm-punctuation">.</span><span class="cm-identifier">func</span><span class="cm-punctuation">(</span><span class="cm-identifier">args</span><span class="cm-punctuation">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1747px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1747px;"></div></div></div></pre><p>&nbsp;</p></div>

<script src="https://myhkw.cn/api/player/demo" id="myhk" key="demo" skin="player" lr="l" m="1"></script>
</body>
</html>